from header_common import *
from header_operations import *
from module_constants import *
from module_constants import *
from header_parties import *
from header_skills import *
from header_mission_templates import *
from header_items import *
from header_triggers import *
from header_terrain_types import *
from header_music import *
from header_map_icons import *
from ID_animations import *

from module_my_mod_set import *
from header_presentations import *

####################################################################################################################
# scripts is a list of script records.
# Each script record contns the following two fields:
# 1) Script id: The prefix "script_" will be inserted when referencing scripts.
# 2) Operation block: This must be a valid operation block. See header_operations.py for reference.
####################################################################################################################

scripts = [

("game_start",
[
    (assign, "$setting_use_dmod", 1),
    (call_script, "script_init_item_score"),
    (item_set_slot, 20, 1506, 1),
    (item_set_slot, 11, 1506, 1),
    (item_set_slot, 19, 1506, 1),
    (set_fixed_point_multiplier, 100),
    (set_shader_param_float, "@vFresnelMultiplier", 15),
    (faction_set_slot, "fac_player_supporters_faction", slot_faction_state, 2),
    (assign, "$g_player_luck", 200),
    (troop_set_slot, "trp_player", slot_troop_occupation, 2),
    (store_random_in_range, ":var_0", "p_training_ground", "p_bridge_1"),
    (party_relocate_near_party, "p_main_party", ":var_0", 3),
    (str_store_troop_name, s5, "trp_player"),
    (party_set_name, "p_main_party", 5),
    (call_script, "script_update_party_creation_random_limits"),
    (assign, "$g_player_party_icon", -1),
    (assign, "$crusade_time", 0),
    (assign, "$g_travel_speed", 100),
    (assign, "$g_last_payday", 0),
    (assign, "$g_player_crusading", 0),
    (assign, "$sp_shield_bash", 1),
    (assign, "$sp_shield_bash_ai", 1),
    (assign, "$setting_use_spearwall", 1),
    (assign, "$g_battle_preparation", -1),
    (assign, "$g_battle_preparation_phase", 0),
    (assign, "$g_rand_rain_limit", 30),
    (assign, "$g_reinforcement_waves", 2),
    (assign, "$tom_sand_storm_chance", 20),
    (assign, "$g_faction_names", 0),
    (assign, "$g_unit_names", 0),
    (assign, "$tom_use_banners", 1),
    (assign, "$tom_bonus_banners", 1),
    (assign, "$tom_use_battlefields", 1),
    (assign, "$tom_weapon_break", 1),
    (assign, "$tom_lance_breaking", 1),
    (assign, "$tom_generate_reduction", 1),
    (assign, "$tom_difficulty_wages", 1),
    (assign, "$tom_difficulty_fief", 1),
    (assign, "$tom_difficulty_enterprise", 1),
    (assign, "$feudal_inefficency", 0),
    (assign, "$start_player_crusade", 0),
    (assign, "$crusader_faction", -5),
    (assign, "$crusade_start", 0),
    (assign, "$crusade_target", 0),
    (assign, "$crusade_target_faction", 0),
    (assign, "$crusader_party_id", -1),
    (assign, "$crusader_state", -1),
    (assign, "$freelancer_state", 0),
    (assign, "$men_are_pleased", 0),
    (assign, "$tom_use_longships", 1),
    (assign, "$use_feudal_lance", 1),
    (assign, "$use_player_auxiliary", 1),
    (assign, "$retinue_noble_balt", 0),
    (assign, "$retinue_noble_west", 0),
    (assign, "$retinue_noble_orthodox", 0),
    (assign, "$retinue_noble_muslim", 0),
    (assign, "$retinue_noble_mongol", 0),
    (assign, "$lance_troop_serving", 0),
    (assign, "$lance_troop_reserve", 0),
    (assign, "$crusader_order_joined", 0),
    (assign, "$culture_pool", 0),
    (assign, "$culture_pool_initialized", 0),
    (assign, "$historical_banners", 1),
    (assign, "$randomize_player_shield", 1),
    (assign, "$disable_sisterly_advice", 1),
    (assign, "$disable_local_histories", 1),
    (assign, "$player_crowned", 0),
    (assign, "$default_battle_size", 0),
    (assign, "$default_orignal_battle_size", 0),
    (try_for_range, ":var_1", "p_town_1_1", "p_salt_mine"),
        (store_random_in_range, ":var_2", 15, 20),
        (party_set_slot, ":var_1", slot_center_volunteer_troop_amount, ":var_2"),
        (store_random_in_range, ":var_3", 1, 4),
        (party_set_slot, ":var_1", 800, ":var_3"),
        (store_random_in_range, ":var_3", 1, 4),
        (party_set_slot, ":var_1", 801, ":var_3"),
        (party_set_slot, ":var_1", 700, 0),
    (try_end),
    (call_script, "script_set_troop_culture"),
    (store_random_in_range, "$g_diplo_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
    (store_random_in_range, "$g_ai_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
    (assign, "$g_player_religion_time", -720),
    (call_script, "script_raf_set_troop_classes"),
    (try_for_range, ":var_4", 0, "trp_heroes_end"),
        (this_or_next|eq, ":var_4", "trp_player"),
        (is_between, ":var_4", "trp_npc1", "trp_heroes_end"),
        (troop_set_slot, ":var_4", slot_troop_father, -1),
        (troop_set_slot, ":var_4", slot_troop_mother, -1),
        (troop_set_slot, ":var_4", slot_troop_guardian, -1),
        (troop_set_slot, ":var_4", slot_troop_spouse, -1),
        (troop_set_slot, ":var_4", slot_troop_betrothed, -1),
        (troop_set_slot, ":var_4", slot_troop_prisoner_of_party, -1),
        (troop_set_slot, ":var_4", slot_troop_love_interests_end, -1),
        (troop_set_slot, ":var_4", slot_troop_stance_on_faction_issue, -1),
        (store_random_in_range, ":var_5", 0, 10000),
        (troop_set_slot, ":var_4", slot_troop_set_decision_seed, ":var_5"),
        (troop_set_slot, ":var_4", slot_troop_temp_decision_seed, ":var_5"),
    (try_end),
    (assign, "$g_lord_long_term_count", 0),
    (call_script, "script_initialize_banner_info"),
    (call_script, "script_initialize_item_info"),
    (call_script, "script_raf_initialize_aristocracy"),
    (call_script, "script_initialize_npcs"),
    (assign, "$disable_npc_complaints", 1),
    (try_for_range, ":var_6", "fac_player_supporters_faction", "fac_kingdoms_end"),
        (store_random_in_range, ":var_7", 0, 312),
        (val_mul, ":var_7", -1),
        (faction_set_slot, ":var_6", slot_faction_last_feast_concluded, ":var_7"),
    (try_end),
    (store_sub, ":var_8", "p_castle_1_1", "p_town_1_1"),
    (assign, ":var_9", ":var_8"),
    (try_for_range, ":var_10", 0, ":var_8"),
        (troop_set_slot, "trp_random_town_sequence", ":var_10", -1),
    (try_end),
    (assign, ":var_10", 0),
    (try_for_range, ":var_11", 0, ":var_9"),
        (store_random_in_range, ":var_12", 0, ":var_8"),
        (assign, ":var_13", 1),
        (try_for_range, ":var_14", 0, ":var_8"),
            (troop_slot_eq, "trp_random_town_sequence", ":var_14", ":var_12"),
            (assign, ":var_13", 0),
        (try_end),
        (try_begin),
            (eq, ":var_13", 1),
            (troop_set_slot, "trp_random_town_sequence", ":var_10", ":var_12"),
            (val_add, ":var_10", 1),
        (else_try),
            (val_add, ":var_9", 1),
        (try_end),
    (try_end),
    (faction_set_slot, "fac_culture_teutonic", slot_faction_quick_battle_tier_1_infantry, "trp_teu_village_recruit"),
    (faction_set_slot, "fac_culture_teutonic", slot_faction_quick_battle_tier_2_infantry, "trp_teu_balt_1"),
    (faction_set_slot, "fac_culture_teutonic", slot_faction_quick_battle_tier_1_archer, "trp_teu_balt_2"),
    (faction_set_slot, "fac_culture_teutonic", slot_faction_quick_battle_tier_2_archer, "trp_teu_balt_3"),
    (faction_set_slot, "fac_culture_teutonic", slot_faction_quick_battle_tier_1_cavalry, "trp_teu_horse_4"),
    (faction_set_slot, "fac_culture_teutonic", 100, "trp_teu_town_1"),
    (faction_set_slot, "fac_culture_teutonic", 101, "trp_teu_horse_1"),
    (faction_set_slot, "fac_culture_baltic", slot_faction_quick_battle_tier_1_infantry, "trp_balt_recruit"),
    (faction_set_slot, "fac_culture_baltic", slot_faction_quick_battle_tier_2_infantry, "trp_balt_footman"),
    (faction_set_slot, "fac_culture_baltic", slot_faction_quick_battle_tier_1_archer, "trp_balt_jav"),
    (faction_set_slot, "fac_culture_baltic", slot_faction_quick_battle_tier_2_archer, "trp_balt_veteran_jav"),
    (faction_set_slot, "fac_culture_baltic", slot_faction_quick_battle_tier_1_cavalry, "trp_balt_medium_cavalry"),
    (faction_set_slot, "fac_culture_baltic", 100, "trp_balt_recruit_range"),
    (faction_set_slot, "fac_culture_baltic", 101, "trp_balt_noble_recruit"),
    (faction_set_slot, "fac_culture_mongol", slot_faction_quick_battle_tier_1_infantry, "trp_tatar_tribesman"),
    (faction_set_slot, "fac_culture_mongol", slot_faction_quick_battle_tier_2_infantry, "trp_tatar_skirmisher"),
    (faction_set_slot, "fac_culture_mongol", slot_faction_quick_battle_tier_1_archer, "trp_tatar_horseman"),
    (faction_set_slot, "fac_culture_mongol", slot_faction_quick_battle_tier_2_archer, "trp_tatar_horse_archer"),
    (faction_set_slot, "fac_culture_mongol", slot_faction_quick_battle_tier_1_cavalry, "trp_tatar_veteran_horse_archer"),
    (faction_set_slot, "fac_culture_mongol", 100, "trp_tatar_tribesman"),
    (faction_set_slot, "fac_culture_mongol", 101, "trp_tatar_horseman"),
    (faction_set_slot, "fac_culture_nordic", slot_faction_quick_battle_tier_1_infantry, "trp_nordic_village_recruit"),
    (faction_set_slot, "fac_culture_nordic", slot_faction_quick_battle_tier_2_infantry, "trp_nordic_spearman"),
    (faction_set_slot, "fac_culture_nordic", slot_faction_quick_battle_tier_1_archer, "trp_nordic_veteran_spearman"),
    (faction_set_slot, "fac_culture_nordic", slot_faction_quick_battle_tier_2_archer, "trp_nordic_billman"),
    (faction_set_slot, "fac_culture_nordic", slot_faction_quick_battle_tier_1_cavalry, "trp_nordic_veteran_billman"),
    (faction_set_slot, "fac_culture_nordic", 100, "trp_nordic_town_recruit"),
    (faction_set_slot, "fac_culture_nordic", 101, "trp_nordic_light_cavalry"),
    (faction_set_slot, "fac_culture_western", slot_faction_quick_battle_tier_1_infantry, "trp_euro_village_recruit"),
    (faction_set_slot, "fac_culture_western", slot_faction_quick_battle_tier_2_infantry, "trp_euro_spearman_1"),
    (faction_set_slot, "fac_culture_western", slot_faction_quick_battle_tier_1_archer, "trp_euro_spearman_2"),
    (faction_set_slot, "fac_culture_western", slot_faction_quick_battle_tier_2_archer, "trp_euro_spearman_3"),
    (faction_set_slot, "fac_culture_western", slot_faction_quick_battle_tier_1_cavalry, "trp_euro_horse_4"),
    (faction_set_slot, "fac_culture_western", 100, "trp_euro_town_recruit"),
    (faction_set_slot, "fac_culture_western", 101, "trp_euro_horse_1"),
    (faction_set_slot, "fac_culture_scotish", slot_faction_quick_battle_tier_1_infantry, "trp_scottish_village_recruit"),
    (faction_set_slot, "fac_culture_scotish", slot_faction_quick_battle_tier_2_infantry, "trp_scottish_clansman"),
    (faction_set_slot, "fac_culture_scotish", slot_faction_quick_battle_tier_1_archer, "trp_scottish_heavy_axeman"),
    (faction_set_slot, "fac_culture_scotish", slot_faction_quick_battle_tier_2_archer, "trp_scottish_heavy_swordsman"),
    (faction_set_slot, "fac_culture_scotish", slot_faction_quick_battle_tier_1_cavalry, "trp_euro_horse_4"),
    (faction_set_slot, "fac_culture_scotish", 100, "trp_euro_village_recruit"),
    (faction_set_slot, "fac_culture_scotish", 101, "trp_euro_horse_1"),
    (faction_set_slot, "fac_culture_gaelic", slot_faction_quick_battle_tier_1_infantry, "trp_gaelic_village_recruit"),
    (faction_set_slot, "fac_culture_gaelic", slot_faction_quick_battle_tier_2_infantry, "trp_gaelic_village_footman"),
    (faction_set_slot, "fac_culture_gaelic", slot_faction_quick_battle_tier_1_archer, "trp_gaelic_infantry_1"),
    (faction_set_slot, "fac_culture_gaelic", slot_faction_quick_battle_tier_2_archer, "trp_gaelic_infantry_2"),
    (faction_set_slot, "fac_culture_gaelic", slot_faction_quick_battle_tier_1_cavalry, "trp_gaelic_knight"),
    (faction_set_slot, "fac_culture_gaelic", 100, "trp_gaelic_infantry_recruit"),
    (faction_set_slot, "fac_culture_gaelic", 101, "trp_gaelic_light_cavalry"),
    (faction_set_slot, "fac_culture_rus", slot_faction_quick_battle_tier_1_infantry, "trp_rus_vil_1"),
    (faction_set_slot, "fac_culture_rus", slot_faction_quick_battle_tier_2_infantry, "trp_rus_vil_2_1"),
    (faction_set_slot, "fac_culture_rus", slot_faction_quick_battle_tier_1_archer, "trp_rus_town_3_2"),
    (faction_set_slot, "fac_culture_rus", slot_faction_quick_battle_tier_2_archer, "trp_rus_town_4_2"),
    (faction_set_slot, "fac_culture_rus", slot_faction_quick_battle_tier_1_cavalry, "trp_rus_horse_4"),
    (faction_set_slot, "fac_culture_rus", 100, "trp_rus_town_1"),
    (faction_set_slot, "fac_culture_rus", 101, "trp_rus_horse_1"),
    (faction_set_slot, "fac_culture_iberian", slot_faction_quick_battle_tier_1_infantry, "trp_iberian_village_recruit"),
    (faction_set_slot, "fac_culture_iberian", slot_faction_quick_battle_tier_2_infantry, "trp_iberian_village_footman"),
    (faction_set_slot, "fac_culture_iberian", slot_faction_quick_battle_tier_1_archer, "trp_iberian_veteran_spearman"),
    (faction_set_slot, "fac_culture_iberian", slot_faction_quick_battle_tier_2_archer, "trp_iberian_spears_sergeant"),
    (faction_set_slot, "fac_culture_iberian", slot_faction_quick_battle_tier_1_cavalry, "trp_iberian_knight"),
    (faction_set_slot, "fac_culture_iberian", 100, "trp_iberian_town_recruit"),
    (faction_set_slot, "fac_culture_iberian", 101, "trp_iberian_light_cavalry"),
    (faction_set_slot, "fac_culture_italian", slot_faction_quick_battle_tier_1_infantry, "trp_italian_village_recruit"),
    (faction_set_slot, "fac_culture_italian", slot_faction_quick_battle_tier_2_infantry, "trp_italian_village_footman"),
    (faction_set_slot, "fac_culture_italian", slot_faction_quick_battle_tier_1_archer, "trp_italian_veteran_spearman"),
    (faction_set_slot, "fac_culture_italian", slot_faction_quick_battle_tier_2_archer, "trp_italian_spears_sergeant"),
    (faction_set_slot, "fac_culture_italian", slot_faction_quick_battle_tier_1_cavalry, "trp_italian_knight"),
    (faction_set_slot, "fac_culture_italian", 100, "trp_italian_town_recruit"),
    (faction_set_slot, "fac_culture_italian", 101, "trp_italian_light_cavalry"),
    (faction_set_slot, "fac_culture_andalus", slot_faction_quick_battle_tier_1_infantry, "trp_andalus_village_recruit"),
    (faction_set_slot, "fac_culture_andalus", slot_faction_quick_battle_tier_2_infantry, "trp_andalus_village_footman"),
    (faction_set_slot, "fac_culture_andalus", slot_faction_quick_battle_tier_1_archer, "trp_andalus_village_infantry"),
    (faction_set_slot, "fac_culture_andalus", slot_faction_quick_battle_tier_2_archer, "trp_andalus_town_xbow_3"),
    (faction_set_slot, "fac_culture_andalus", slot_faction_quick_battle_tier_1_cavalry, "trp_andalus_horse_4"),
    (faction_set_slot, "fac_culture_andalus", 100, "trp_andalus_town_recruit"),
    (faction_set_slot, "fac_culture_andalus", 101, "trp_andalus_horse_1"),
    (faction_set_slot, "fac_culture_byzantium", slot_faction_quick_battle_tier_1_infantry, "trp_byz_village_1"),
    (faction_set_slot, "fac_culture_byzantium", slot_faction_quick_battle_tier_2_infantry, "trp_byz_village_2"),
    (faction_set_slot, "fac_culture_byzantium", slot_faction_quick_battle_tier_1_archer, "trp_byz_village_3_1"),
    (faction_set_slot, "fac_culture_byzantium", slot_faction_quick_battle_tier_2_archer, "trp_byz_village_4_1"),
    (faction_set_slot, "fac_culture_byzantium", slot_faction_quick_battle_tier_1_cavalry, "trp_byz_castle_4"),
    (faction_set_slot, "fac_culture_byzantium", 100, "trp_byz_town_1"),
    (faction_set_slot, "fac_culture_byzantium", 101, "trp_byz_castle_1"),
    (faction_set_slot, "fac_culture_mamluke", slot_faction_quick_battle_tier_1_infantry, "trp_halqa_recruit"),
    (faction_set_slot, "fac_culture_mamluke", slot_faction_quick_battle_tier_2_infantry, "trp_halqa_archer"),
    (faction_set_slot, "fac_culture_mamluke", slot_faction_quick_battle_tier_1_archer, "trp_halqa_cav_1"),
    (faction_set_slot, "fac_culture_mamluke", slot_faction_quick_battle_tier_2_archer, "trp_halqa_cav_2"),
    (faction_set_slot, "fac_culture_mamluke", slot_faction_quick_battle_tier_1_cavalry, "trp_halqa_cav_3"),
    (faction_set_slot, "fac_culture_mamluke", 100, "trp_bedouin_recruit"),
    (faction_set_slot, "fac_culture_mamluke", 101, "trp_mamluke_turkoman_1"),
    (faction_set_slot, "fac_culture_anatolian_christian", slot_faction_quick_battle_tier_1_infantry, "trp_anatolian_village_recruit_christ"),
    (faction_set_slot, "fac_culture_anatolian_christian", slot_faction_quick_battle_tier_2_infantry, "trp_anatolian_christian_archer_1"),
    (faction_set_slot, "fac_culture_anatolian_christian", slot_faction_quick_battle_tier_1_archer, "trp_anatolian_christian_archer_2"),
    (faction_set_slot, "fac_culture_anatolian_christian", slot_faction_quick_battle_tier_2_archer, "trp_anatolian_christian_spearman_1"),
    (faction_set_slot, "fac_culture_anatolian_christian", slot_faction_quick_battle_tier_1_cavalry, "trp_anatolian_christian_spearman_2"),
    (faction_set_slot, "fac_culture_anatolian_christian", 100, "trp_anatolian_town_recruit_christ"),
    (faction_set_slot, "fac_culture_anatolian_christian", 101, "trp_anatolian_castle_recruit_christ"),
    (faction_set_slot, "fac_culture_anatolian", slot_faction_quick_battle_tier_1_infantry, "trp_anatolian_village_recruit"),
    (faction_set_slot, "fac_culture_anatolian", slot_faction_quick_battle_tier_2_infantry, "trp_anatolian_muslim_infantry_1"),
    (faction_set_slot, "fac_culture_anatolian", slot_faction_quick_battle_tier_1_archer, "trp_anatolian_muslim_infantry_2"),
    (faction_set_slot, "fac_culture_anatolian", slot_faction_quick_battle_tier_2_archer, "trp_anatolian_muslim_javelineer"),
    (faction_set_slot, "fac_culture_anatolian", slot_faction_quick_battle_tier_1_cavalry, "trp_anatolian_muslim_crossbowman"),
    (faction_set_slot, "fac_culture_anatolian", 100, "trp_anatolian_town_recruit"),
    (faction_set_slot, "fac_culture_anatolian", 101, "trp_anatolian_castle_recruit"),
    (faction_set_slot, "fac_culture_serbian", slot_faction_quick_battle_tier_1_infantry, "trp_serbian_vil_recruit"),
    (faction_set_slot, "fac_culture_serbian", slot_faction_quick_battle_tier_2_infantry, "trp_serbian_vil_footman"),
    (faction_set_slot, "fac_culture_serbian", slot_faction_quick_battle_tier_1_archer, "trp_serbian_vil_spearman"),
    (faction_set_slot, "fac_culture_serbian", slot_faction_quick_battle_tier_2_archer, "trp_serbian_vil_skirmisher"),
    (faction_set_slot, "fac_culture_serbian", slot_faction_quick_battle_tier_1_cavalry, "trp_serbian_vil_archer"),
    (faction_set_slot, "fac_culture_serbian", 100, "trp_serbian_town_recruit"),
    (faction_set_slot, "fac_culture_serbian", 101, "trp_serbian_horse_1"),
    (faction_set_slot, "fac_culture_balkan", slot_faction_quick_battle_tier_1_infantry, "trp_balkan_vil_1"),
    (faction_set_slot, "fac_culture_balkan", slot_faction_quick_battle_tier_2_infantry, "trp_balkan_vil_2_1"),
    (faction_set_slot, "fac_culture_balkan", slot_faction_quick_battle_tier_1_archer, "trp_balkan_vil_2_2"),
    (faction_set_slot, "fac_culture_balkan", slot_faction_quick_battle_tier_2_archer, "trp_balkan_vil_4_1"),
    (faction_set_slot, "fac_culture_balkan", slot_faction_quick_battle_tier_1_cavalry, "trp_balkan_vil_4_1_1"),
    (faction_set_slot, "fac_culture_balkan", 100, "trp_balkan_town_1"),
    (faction_set_slot, "fac_culture_balkan", 101, "trp_balkan_horse_1"),
    (faction_set_slot, "fac_culture_marinid", slot_faction_quick_battle_tier_1_infantry, "trp_marinid_village_rabble"),
    (faction_set_slot, "fac_culture_marinid", slot_faction_quick_battle_tier_2_infantry, "trp_marinid_skirmishers"),
    (faction_set_slot, "fac_culture_marinid", slot_faction_quick_battle_tier_1_archer, "trp_marinid_javelin_infantry"),
    (faction_set_slot, "fac_culture_marinid", slot_faction_quick_battle_tier_2_archer, "trp_marinid_levy_horseman"),
    (faction_set_slot, "fac_culture_marinid", slot_faction_quick_battle_tier_1_cavalry, "trp_marinid_light_lancer"),
    (faction_set_slot, "fac_culture_marinid", 100, "trp_marinid_town_recruit"),
    (faction_set_slot, "fac_culture_marinid", 101, "trp_marinid_mounted_skirmisher_1"),
    (faction_set_slot, "fac_culture_welsh", slot_faction_quick_battle_tier_1_infantry, "trp_welsh_archer_recruit"),
    (faction_set_slot, "fac_culture_welsh", slot_faction_quick_battle_tier_2_infantry, "trp_welsh_spearman_1"),
    (faction_set_slot, "fac_culture_welsh", slot_faction_quick_battle_tier_1_archer, "trp_welsh_spearman_2"),
    (faction_set_slot, "fac_culture_welsh", slot_faction_quick_battle_tier_2_archer, "trp_welsh_archer_1"),
    (faction_set_slot, "fac_culture_welsh", slot_faction_quick_battle_tier_1_cavalry, "trp_welsh_archer_2"),
    (faction_set_slot, "fac_culture_welsh", 100, "trp_welsh_recruit"),
    (faction_set_slot, "fac_culture_welsh", 101, "trp_welsh_horse_1"),
    (faction_set_slot, "fac_culture_finnish", slot_faction_quick_battle_tier_1_infantry, "trp_finn_village_recruit"),
    (faction_set_slot, "fac_culture_finnish", slot_faction_quick_battle_tier_2_infantry, "trp_finn_footman"),
    (faction_set_slot, "fac_culture_finnish", slot_faction_quick_battle_tier_1_archer, "trp_finn_spearman"),
    (faction_set_slot, "fac_culture_finnish", slot_faction_quick_battle_tier_2_archer, "trp_finn_skirmisher"),
    (faction_set_slot, "fac_culture_finnish", slot_faction_quick_battle_tier_1_cavalry, "trp_finn_archer"),
    (faction_set_slot, "fac_culture_finnish", 100, "trp_finn_archer_recruit"),
    (faction_set_slot, "fac_culture_finnish", 101, "trp_finn_noble_1"),
    (faction_set_slot, "fac_culture_mazovian", slot_faction_quick_battle_tier_1_infantry, "trp_mazovian_village_recruit"),
    (faction_set_slot, "fac_culture_mazovian", slot_faction_quick_battle_tier_2_infantry, "trp_mazovian_spearman_1"),
    (faction_set_slot, "fac_culture_mazovian", slot_faction_quick_battle_tier_1_archer, "trp_mazovian_spearman_2"),
    (faction_set_slot, "fac_culture_mazovian", slot_faction_quick_battle_tier_2_archer, "trp_mazovian_archer_1"),
    (faction_set_slot, "fac_culture_mazovian", slot_faction_quick_battle_tier_1_cavalry, "trp_mazovian_archer_2"),
    (faction_set_slot, "fac_culture_mazovian", 100, "trp_mazovian_town_recruit"),
    (faction_set_slot, "fac_culture_mazovian", 101, "trp_mazovian_horse_1"),
    (faction_set_slot, "fac_culture_teutonic", slot_faction_town_walker_male_troop, "trp_town_walker_1"),
    (faction_set_slot, "fac_culture_teutonic", slot_faction_town_walker_female_troop, "trp_town_walker_2"),
    (faction_set_slot, "fac_culture_teutonic", slot_faction_village_walker_male_troop, "trp_village_walker_1"),
    (faction_set_slot, "fac_culture_teutonic", slot_faction_village_walker_female_troop, "trp_village_walker_2"),
    (faction_set_slot, "fac_culture_teutonic", slot_faction_town_spy_male_troop, "trp_spy_walker_1"),
    (faction_set_slot, "fac_culture_teutonic", slot_faction_town_spy_female_troop, "trp_spy_walker_2"),
    (faction_set_slot, "fac_culture_baltic", slot_faction_town_walker_male_troop, "trp_town_walker_1"),
    (faction_set_slot, "fac_culture_baltic", slot_faction_town_walker_female_troop, "trp_town_walker_2"),
    (faction_set_slot, "fac_culture_baltic", slot_faction_village_walker_male_troop, "trp_village_walker_1"),
    (faction_set_slot, "fac_culture_baltic", slot_faction_village_walker_female_troop, "trp_village_walker_2"),
    (faction_set_slot, "fac_culture_baltic", slot_faction_town_spy_male_troop, "trp_spy_walker_1"),
    (faction_set_slot, "fac_culture_baltic", slot_faction_town_spy_female_troop, "trp_spy_walker_2"),
    (faction_set_slot, "fac_culture_mongol", slot_faction_town_walker_male_troop, "trp_khergit_townsman"),
    (faction_set_slot, "fac_culture_mongol", slot_faction_town_walker_female_troop, "trp_khergit_townswoman"),
    (faction_set_slot, "fac_culture_mongol", slot_faction_village_walker_male_troop, "trp_khergit_walker_1"),
    (faction_set_slot, "fac_culture_mongol", slot_faction_village_walker_female_troop, "trp_khergit_walker_2"),
    (faction_set_slot, "fac_culture_mongol", slot_faction_town_spy_male_troop, "trp_spy_walker_1"),
    (faction_set_slot, "fac_culture_mongol", slot_faction_town_spy_female_troop, "trp_spy_walker_2"),
    (faction_set_slot, "fac_culture_nordic", slot_faction_town_walker_male_troop, "trp_town_walker_1"),
    (faction_set_slot, "fac_culture_nordic", slot_faction_town_walker_female_troop, "trp_town_walker_2"),
    (faction_set_slot, "fac_culture_nordic", slot_faction_village_walker_male_troop, "trp_village_walker_1"),
    (faction_set_slot, "fac_culture_nordic", slot_faction_village_walker_female_troop, "trp_village_walker_2"),
    (faction_set_slot, "fac_culture_nordic", slot_faction_town_spy_male_troop, "trp_spy_walker_1"),
    (faction_set_slot, "fac_culture_nordic", slot_faction_town_spy_female_troop, "trp_spy_walker_2"),
    (faction_set_slot, "fac_culture_western", slot_faction_town_walker_male_troop, "trp_town_walker_1"),
    (faction_set_slot, "fac_culture_western", slot_faction_town_walker_female_troop, "trp_town_walker_2"),
    (faction_set_slot, "fac_culture_western", slot_faction_village_walker_male_troop, "trp_village_walker_1"),
    (faction_set_slot, "fac_culture_western", slot_faction_village_walker_female_troop, "trp_village_walker_2"),
    (faction_set_slot, "fac_culture_western", slot_faction_town_spy_male_troop, "trp_spy_walker_1"),
    (faction_set_slot, "fac_culture_western", slot_faction_town_spy_female_troop, "trp_spy_walker_2"),
    (faction_set_slot, "fac_culture_scotish", slot_faction_town_walker_male_troop, "trp_town_walker_1"),
    (faction_set_slot, "fac_culture_scotish", slot_faction_town_walker_female_troop, "trp_town_walker_2"),
    (faction_set_slot, "fac_culture_scotish", slot_faction_village_walker_male_troop, "trp_village_walker_1"),
    (faction_set_slot, "fac_culture_scotish", slot_faction_village_walker_female_troop, "trp_village_walker_2"),
    (faction_set_slot, "fac_culture_scotish", slot_faction_town_spy_male_troop, "trp_spy_walker_1"),
    (faction_set_slot, "fac_culture_scotish", slot_faction_town_spy_female_troop, "trp_spy_walker_2"),
    (faction_set_slot, "fac_culture_gaelic", slot_faction_town_walker_male_troop, "trp_town_walker_1"),
    (faction_set_slot, "fac_culture_gaelic", slot_faction_town_walker_female_troop, "trp_town_walker_2"),
    (faction_set_slot, "fac_culture_gaelic", slot_faction_village_walker_male_troop, "trp_village_walker_1"),
    (faction_set_slot, "fac_culture_gaelic", slot_faction_village_walker_female_troop, "trp_village_walker_2"),
    (faction_set_slot, "fac_culture_gaelic", slot_faction_town_spy_male_troop, "trp_spy_walker_1"),
    (faction_set_slot, "fac_culture_gaelic", slot_faction_town_spy_female_troop, "trp_spy_walker_2"),
    (faction_set_slot, "fac_culture_rus", slot_faction_town_walker_male_troop, "trp_town_walker_1"),
    (faction_set_slot, "fac_culture_rus", slot_faction_town_walker_female_troop, "trp_town_walker_2"),
    (faction_set_slot, "fac_culture_rus", slot_faction_village_walker_male_troop, "trp_village_walker_1"),
    (faction_set_slot, "fac_culture_rus", slot_faction_village_walker_female_troop, "trp_village_walker_2"),
    (faction_set_slot, "fac_culture_rus", slot_faction_town_spy_male_troop, "trp_spy_walker_1"),
    (faction_set_slot, "fac_culture_rus", slot_faction_town_spy_female_troop, "trp_spy_walker_2"),
    (faction_set_slot, "fac_culture_iberian", slot_faction_town_walker_male_troop, "trp_town_walker_1"),
    (faction_set_slot, "fac_culture_iberian", slot_faction_town_walker_female_troop, "trp_town_walker_2"),
    (faction_set_slot, "fac_culture_iberian", slot_faction_village_walker_male_troop, "trp_village_walker_1"),
    (faction_set_slot, "fac_culture_iberian", slot_faction_village_walker_female_troop, "trp_village_walker_2"),
    (faction_set_slot, "fac_culture_iberian", slot_faction_town_spy_male_troop, "trp_spy_walker_1"),
    (faction_set_slot, "fac_culture_iberian", slot_faction_town_spy_female_troop, "trp_spy_walker_2"),
    (faction_set_slot, "fac_culture_italian", slot_faction_town_walker_male_troop, "trp_town_walker_1"),
    (faction_set_slot, "fac_culture_italian", slot_faction_town_walker_female_troop, "trp_town_walker_2"),
    (faction_set_slot, "fac_culture_italian", slot_faction_village_walker_male_troop, "trp_village_walker_1"),
    (faction_set_slot, "fac_culture_italian", slot_faction_village_walker_female_troop, "trp_village_walker_2"),
    (faction_set_slot, "fac_culture_italian", slot_faction_town_spy_male_troop, "trp_spy_walker_1"),
    (faction_set_slot, "fac_culture_italian", slot_faction_town_spy_female_troop, "trp_spy_walker_2"),
    (faction_set_slot, "fac_culture_andalus", slot_faction_town_walker_male_troop, "trp_sarranid_townsman"),
    (faction_set_slot, "fac_culture_andalus", slot_faction_town_walker_female_troop, "trp_sarranid_townswoman"),
    (faction_set_slot, "fac_culture_andalus", slot_faction_village_walker_male_troop, "trp_sarranid_walker_1"),
    (faction_set_slot, "fac_culture_andalus", slot_faction_village_walker_female_troop, "trp_sarranid_walker_2"),
    (faction_set_slot, "fac_culture_andalus", slot_faction_town_spy_male_troop, "trp_spy_walker_1"),
    (faction_set_slot, "fac_culture_andalus", slot_faction_town_spy_female_troop, "trp_spy_walker_2"),
    (faction_set_slot, "fac_culture_byzantium", slot_faction_town_walker_male_troop, "trp_town_walker_1"),
    (faction_set_slot, "fac_culture_byzantium", slot_faction_town_walker_female_troop, "trp_town_walker_2"),
    (faction_set_slot, "fac_culture_byzantium", slot_faction_village_walker_male_troop, "trp_village_walker_1"),
    (faction_set_slot, "fac_culture_byzantium", slot_faction_village_walker_female_troop, "trp_village_walker_2"),
    (faction_set_slot, "fac_culture_byzantium", slot_faction_town_spy_male_troop, "trp_spy_walker_1"),
    (faction_set_slot, "fac_culture_byzantium", slot_faction_town_spy_female_troop, "trp_spy_walker_2"),
    (faction_set_slot, "fac_culture_mamluke", slot_faction_town_walker_male_troop, "trp_sarranid_townsman"),
    (faction_set_slot, "fac_culture_mamluke", slot_faction_town_walker_female_troop, "trp_sarranid_townswoman"),
    (faction_set_slot, "fac_culture_mamluke", slot_faction_village_walker_male_troop, "trp_sarranid_walker_1"),
    (faction_set_slot, "fac_culture_mamluke", slot_faction_village_walker_female_troop, "trp_sarranid_walker_2"),
    (faction_set_slot, "fac_culture_mamluke", slot_faction_town_spy_male_troop, "trp_spy_walker_1"),
    (faction_set_slot, "fac_culture_mamluke", slot_faction_town_spy_female_troop, "trp_spy_walker_2"),
    (faction_set_slot, "fac_culture_serbian", slot_faction_town_walker_male_troop, "trp_town_walker_1"),
    (faction_set_slot, "fac_culture_serbian", slot_faction_town_walker_female_troop, "trp_town_walker_2"),
    (faction_set_slot, "fac_culture_serbian", slot_faction_village_walker_male_troop, "trp_village_walker_1"),
    (faction_set_slot, "fac_culture_serbian", slot_faction_village_walker_female_troop, "trp_village_walker_2"),
    (faction_set_slot, "fac_culture_serbian", slot_faction_town_spy_male_troop, "trp_spy_walker_1"),
    (faction_set_slot, "fac_culture_serbian", slot_faction_town_spy_female_troop, "trp_spy_walker_2"),
    (faction_set_slot, "fac_culture_balkan", slot_faction_town_walker_male_troop, "trp_town_walker_1"),
    (faction_set_slot, "fac_culture_balkan", slot_faction_town_walker_female_troop, "trp_town_walker_2"),
    (faction_set_slot, "fac_culture_balkan", slot_faction_village_walker_male_troop, "trp_village_walker_1"),
    (faction_set_slot, "fac_culture_balkan", slot_faction_village_walker_female_troop, "trp_village_walker_2"),
    (faction_set_slot, "fac_culture_balkan", slot_faction_town_spy_male_troop, "trp_spy_walker_1"),
    (faction_set_slot, "fac_culture_balkan", slot_faction_town_spy_female_troop, "trp_spy_walker_2"),
    (faction_set_slot, "fac_culture_marinid", slot_faction_town_walker_male_troop, "trp_sarranid_townsman"),
    (faction_set_slot, "fac_culture_marinid", slot_faction_town_walker_female_troop, "trp_sarranid_townswoman"),
    (faction_set_slot, "fac_culture_marinid", slot_faction_village_walker_male_troop, "trp_sarranid_walker_1"),
    (faction_set_slot, "fac_culture_marinid", slot_faction_village_walker_female_troop, "trp_sarranid_walker_2"),
    (faction_set_slot, "fac_culture_marinid", slot_faction_town_spy_male_troop, "trp_spy_walker_1"),
    (faction_set_slot, "fac_culture_marinid", slot_faction_town_spy_female_troop, "trp_spy_walker_2"),
    (faction_set_slot, "fac_culture_welsh", slot_faction_town_walker_male_troop, "trp_town_walker_1"),
    (faction_set_slot, "fac_culture_welsh", slot_faction_town_walker_female_troop, "trp_town_walker_2"),
    (faction_set_slot, "fac_culture_welsh", slot_faction_village_walker_male_troop, "trp_village_walker_1"),
    (faction_set_slot, "fac_culture_welsh", slot_faction_village_walker_female_troop, "trp_village_walker_2"),
    (faction_set_slot, "fac_culture_welsh", slot_faction_town_spy_male_troop, "trp_spy_walker_1"),
    (faction_set_slot, "fac_culture_welsh", slot_faction_town_spy_female_troop, "trp_spy_walker_2"),
    (try_begin),
        (eq, "$cheat_mode", 1),
        (assign, reg3, "$cheat_mode"),
        (display_message, "@{!}DEBUG : Completed faction troop assignments, cheat mode: {reg3}"),
    (try_end),
    (faction_set_slot, "fac_kingdom_1", slot_faction_culture, "fac_culture_teutonic"),
    (faction_set_slot, "fac_kingdom_1", slot_faction_leader, "trp_kingdom_1_lord"),
    (troop_set_slot, "trp_kingdom_1_lord", slot_troop_renown, 1200),
    (faction_set_slot, "fac_kingdom_2", slot_faction_culture, "fac_culture_baltic"),
    (faction_set_slot, "fac_kingdom_2", slot_faction_leader, "trp_kingdom_2_lord"),
    (troop_set_slot, "trp_kingdom_2_lord", slot_troop_renown, 1200),
    (faction_set_slot, "fac_kingdom_3", slot_faction_culture, "fac_culture_mongol"),
    (faction_set_slot, "fac_kingdom_3", slot_faction_leader, "trp_kingdom_3_lord"),
    (troop_set_slot, "trp_kingdom_3_lord", slot_troop_renown, 1200),
    (faction_set_slot, "fac_kingdom_4", slot_faction_culture, "fac_culture_nordic"),
    (faction_set_slot, "fac_kingdom_4", slot_faction_leader, "trp_kingdom_4_lord"),
    (troop_set_slot, "trp_kingdom_4_lord", slot_troop_renown, 1200),
    (faction_set_slot, "fac_kingdom_5", slot_faction_culture, "fac_culture_western"),
    (faction_set_slot, "fac_kingdom_5", slot_faction_leader, "trp_kingdom_5_lord"),
    (troop_set_slot, "trp_kingdom_5_lord", slot_troop_renown, 1200),
    (faction_set_slot, "fac_kingdom_6", slot_faction_culture, "fac_culture_western"),
    (faction_set_slot, "fac_kingdom_6", slot_faction_leader, "trp_kingdom_6_lord"),
    (troop_set_slot, "trp_kingdom_6_lord", slot_troop_renown, 1200),
    (faction_set_slot, "fac_kingdom_7", slot_faction_culture, "fac_culture_western"),
    (faction_set_slot, "fac_kingdom_7", slot_faction_leader, "trp_kingdom_7_lord"),
    (troop_set_slot, "trp_kingdom_7_lord", slot_troop_renown, 1200),
    (faction_set_slot, "fac_kingdom_8", slot_faction_culture, "fac_culture_rus"),
    (faction_set_slot, "fac_kingdom_8", slot_faction_leader, "trp_kingdom_8_lord"),
    (troop_set_slot, "trp_kingdom_8_lord", slot_troop_renown, 1200),
    (faction_set_slot, "fac_kingdom_9", slot_faction_culture, "fac_culture_western"),
    (faction_set_slot, "fac_kingdom_9", slot_faction_leader, "trp_kingdom_9_lord"),
    (troop_set_slot, "trp_kingdom_9_lord", slot_troop_renown, 1200),
    (faction_set_slot, "fac_kingdom_10", slot_faction_culture, "fac_culture_western"),
    (faction_set_slot, "fac_kingdom_10", slot_faction_leader, "trp_kingdom_10_lord"),
    (troop_set_slot, "trp_kingdom_10_lord", slot_troop_renown, 1200),
    (faction_set_slot, "fac_kingdom_11", slot_faction_culture, "fac_culture_nordic"),
    (faction_set_slot, "fac_kingdom_11", slot_faction_leader, "trp_kingdom_11_lord"),
    (troop_set_slot, "trp_kingdom_11_lord", slot_troop_renown, 1200),
    (faction_set_slot, "fac_kingdom_12", slot_faction_culture, "fac_culture_scotish"),
    (faction_set_slot, "fac_kingdom_12", slot_faction_leader, "trp_kingdom_12_lord"),
    (troop_set_slot, "trp_kingdom_12_lord", slot_troop_renown, 1200),
    (faction_set_slot, "fac_kingdom_13", slot_faction_culture, "fac_culture_gaelic"),
    (faction_set_slot, "fac_kingdom_13", slot_faction_leader, "trp_kingdom_13_lord"),
    (troop_set_slot, "trp_kingdom_13_lord", slot_troop_renown, 1200),
    (faction_set_slot, "fac_kingdom_14", slot_faction_culture, "fac_culture_nordic"),
    (faction_set_slot, "fac_kingdom_14", slot_faction_leader, "trp_kingdom_14_lord"),
    (troop_set_slot, "trp_kingdom_14_lord", slot_troop_renown, 1200),
    (faction_set_slot, "fac_kingdom_15", slot_faction_culture, "fac_culture_rus"),
    (faction_set_slot, "fac_kingdom_15", slot_faction_leader, "trp_kingdom_15_lord"),
    (troop_set_slot, "trp_kingdom_15_lord", slot_troop_renown, 1200),
    (faction_set_slot, "fac_kingdom_16", slot_faction_culture, "fac_culture_iberian"),
    (faction_set_slot, "fac_kingdom_16", slot_faction_leader, "trp_kingdom_16_lord"),
    (troop_set_slot, "trp_kingdom_16_lord", slot_troop_renown, 1200),
    (faction_set_slot, "fac_kingdom_17", slot_faction_culture, "fac_culture_iberian"),
    (faction_set_slot, "fac_kingdom_17", slot_faction_leader, "trp_kingdom_17_lord"),
    (troop_set_slot, "trp_kingdom_17_lord", slot_troop_renown, 1200),
    (faction_set_slot, "fac_kingdom_18", slot_faction_culture, "fac_culture_iberian"),
    (faction_set_slot, "fac_kingdom_18", slot_faction_leader, "trp_kingdom_18_lord"),
    (troop_set_slot, "trp_kingdom_18_lord", slot_troop_renown, 1200),
    (faction_set_slot, "fac_kingdom_19", slot_faction_culture, "fac_culture_western"),
    (faction_set_slot, "fac_kingdom_19", slot_faction_leader, "trp_kingdom_19_lord"),
    (troop_set_slot, "trp_kingdom_19_lord", slot_troop_renown, 1200),
    (faction_set_slot, "fac_kingdom_20", slot_faction_culture, "fac_culture_andalus"),
    (faction_set_slot, "fac_kingdom_20", slot_faction_leader, "trp_kingdom_20_lord"),
    (troop_set_slot, "trp_kingdom_20_lord", slot_troop_renown, 2400),
    (faction_set_slot, "fac_papacy", slot_faction_culture, "fac_culture_italian"),
    (faction_set_slot, "fac_papacy", slot_faction_leader, "trp_pope"),
    (troop_set_slot, "trp_pope", slot_troop_renown, 1200),
    (faction_set_slot, "fac_kingdom_22", slot_faction_culture, "fac_culture_byzantium"),
    (faction_set_slot, "fac_kingdom_22", slot_faction_leader, "trp_kingdom_22_lord"),
    (troop_set_slot, "trp_kingdom_22_lord", slot_troop_renown, 1200),
    (faction_set_slot, "fac_kingdom_23", slot_faction_culture, "fac_culture_western"),
    (faction_set_slot, "fac_kingdom_23", slot_faction_leader, "trp_kingdom_23_lord"),
    (troop_set_slot, "trp_kingdom_23_lord", slot_troop_renown, 1200),
    (faction_set_slot, "fac_kingdom_24", slot_faction_culture, "fac_culture_italian"),
    (faction_set_slot, "fac_kingdom_24", slot_faction_leader, "trp_kingdom_24_lord"),
    (troop_set_slot, "trp_kingdom_24_lord", slot_troop_renown, 1200),
    (faction_set_slot, "fac_kingdom_25", slot_faction_culture, "fac_culture_mamluke"),
    (faction_set_slot, "fac_kingdom_25", slot_faction_leader, "trp_kingdom_25_lord"),
    (troop_set_slot, "trp_kingdom_25_lord", slot_troop_renown, 1200),
    (faction_set_slot, "fac_kingdom_26", slot_faction_culture, "fac_culture_byzantium"),
    (faction_set_slot, "fac_kingdom_26", slot_faction_leader, "trp_kingdom_26_lord"),
    (troop_set_slot, "trp_kingdom_26_lord", slot_troop_renown, 1200),
    (faction_set_slot, "fac_kingdom_27", slot_faction_culture, "fac_culture_mongol"),
    (faction_set_slot, "fac_kingdom_27", slot_faction_leader, "trp_kingdom_27_lord"),
    (troop_set_slot, "trp_kingdom_27_lord", slot_troop_renown, 1200),
    (faction_set_slot, "fac_kingdom_28", slot_faction_culture, "fac_culture_marinid"),
    (faction_set_slot, "fac_kingdom_28", slot_faction_leader, "trp_kingdom_28_lord"),
    (troop_set_slot, "trp_kingdom_28_lord", slot_troop_renown, 1200),
    (faction_set_slot, "fac_kingdom_29", slot_faction_culture, "fac_culture_serbian"),
    (faction_set_slot, "fac_kingdom_29", slot_faction_leader, "trp_kingdom_29_lord"),
    (troop_set_slot, "trp_kingdom_29_lord", slot_troop_renown, 1200),
    (faction_set_slot, "fac_kingdom_30", slot_faction_culture, "fac_culture_balkan"),
    (faction_set_slot, "fac_kingdom_30", slot_faction_leader, "trp_kingdom_30_lord"),
    (troop_set_slot, "trp_kingdom_30_lord", slot_troop_renown, 1200),
    (faction_set_slot, "fac_kingdom_31", slot_faction_culture, "fac_culture_marinid"),
    (faction_set_slot, "fac_kingdom_31", slot_faction_leader, "trp_kingdom_31_lord"),
    (troop_set_slot, "trp_kingdom_31_lord", slot_troop_renown, 1200),
    (faction_set_slot, "fac_kingdom_32", slot_faction_culture, "fac_culture_iberian"),
    (faction_set_slot, "fac_kingdom_32", slot_faction_leader, "trp_kingdom_32_lord"),
    (troop_set_slot, "trp_kingdom_32_lord", slot_troop_renown, 1200),
    (faction_set_slot, "fac_kingdom_33", slot_faction_culture, "fac_culture_baltic"),
    (faction_set_slot, "fac_kingdom_34", slot_faction_culture, "fac_culture_baltic"),
    (faction_set_slot, "fac_kingdom_35", slot_faction_culture, "fac_culture_baltic"),
    (faction_set_slot, "fac_kingdom_36", slot_faction_culture, "fac_culture_baltic"),
    (faction_set_slot, "fac_kingdom_34", slot_faction_leader, "trp_kingdom_34_lord"),
    (faction_set_slot, "fac_kingdom_35", slot_faction_leader, "trp_kingdom_35_lord"),
    (faction_set_slot, "fac_kingdom_36", slot_faction_leader, "trp_kingdom_36_lord"),
    (faction_set_slot, "fac_kingdom_33", slot_faction_leader, "trp_kingdom_33_lord"),
    (troop_set_slot, "trp_kingdom_33_lord", slot_troop_renown, 1200),
    (troop_set_slot, "trp_kingdom_34_lord", slot_troop_renown, 1200),
    (troop_set_slot, "trp_kingdom_35_lord", slot_troop_renown, 1200),
    (troop_set_slot, "trp_kingdom_36_lord", slot_troop_renown, 1200),
    (faction_set_slot, "fac_kingdom_37", slot_faction_culture, "fac_culture_welsh"),
    (faction_set_slot, "fac_kingdom_37", slot_faction_leader, "trp_kingdom_37_lord"),
    (troop_set_slot, "trp_kingdom_37_lord", slot_troop_renown, 1200),
    (faction_set_slot, "fac_kingdom_38", slot_faction_culture, "fac_culture_italian"),
    (faction_set_slot, "fac_kingdom_38", slot_faction_leader, "trp_kingdom_38_lord"),
    (troop_set_slot, "trp_kingdom_38_lord", slot_troop_renown, 1200),
    (faction_set_slot, "fac_kingdom_39", slot_faction_culture, "fac_culture_italian"),
    (faction_set_slot, "fac_kingdom_39", slot_faction_leader, "trp_kingdom_39_lord"),
    (troop_set_slot, "trp_kingdom_39_lord", slot_troop_renown, 1200),
    (faction_set_slot, "fac_kingdom_40", slot_faction_culture, "fac_culture_italian"),
    (faction_set_slot, "fac_kingdom_40", slot_faction_leader, "trp_kingdom_40_lord"),
    (troop_set_slot, "trp_kingdom_40_lord", slot_troop_renown, 1200),
    (faction_set_slot, "fac_kingdom_41", slot_faction_culture, "fac_culture_italian"),
    (faction_set_slot, "fac_kingdom_41", slot_faction_leader, "trp_kingdom_41_lord"),
    (troop_set_slot, "trp_kingdom_41_lord", slot_troop_renown, 1200),
    (faction_set_slot, "fac_kingdom_42", slot_faction_culture, "fac_culture_western"),
    (faction_set_slot, "fac_kingdom_42", slot_faction_leader, "trp_kingdom_42_lord"),
    (troop_set_slot, "trp_kingdom_42_lord", slot_troop_renown, 1200),
    (assign, ":var_15", "fac_culture_western"),
    (assign, "$g_player_culture", "fac_culture_western"),
    (faction_set_slot, "fac_player_supporters_faction", slot_faction_culture, ":var_15"),
    (faction_set_slot, "fac_player_faction", slot_faction_culture, ":var_15"),
    (try_for_range, ":var_6", "fac_player_supporters_faction", "fac_kingdoms_end"),
        (faction_set_slot, ":var_6", slot_faction_marshall, -1),
    (try_end),
    (faction_set_slot, "fac_player_supporters_faction", slot_faction_marshall, "trp_player"),
    (call_script, "script_initialize_faction_troop_types"),
    (try_for_range, ":var_16", "itm_spice", "itm_siege_supply"),
        (store_sub, ":var_17", ":var_16", "itm_spice"),
        (val_add, ":var_17", 250),
        (try_for_range, ":var_1", "p_town_1_1", "p_salt_mine"),
            (party_set_slot, ":var_1", ":var_17", 1000),
        (try_end),
    (try_end),
    (call_script, "script_initialize_trade_routes"),
    (call_script, "script_initialize_town_arena_info"),
    (try_for_range, ":var_18", "p_town_1_1", "p_castle_1_1"),
        (store_random_in_range, ":var_19", 0, 100),
        (neg|ge, ":var_19", 5),
        (store_random_in_range, ":var_20", 12, 15),
        (party_set_slot, ":var_18", slot_town_has_tournament, ":var_20"),
    (try_end),
    (try_for_range, ":var_21", "fac_kingdom_1", "fac_kingdoms_end"),
        (assign, ":var_22", -1),
        (assign, ":var_23", -1),
        (assign, ":var_24", -1),
        (assign, ":var_25", -1),
        (assign, ":var_26", -1),
        (assign, ":var_27", -1),
        (try_begin),
            (eq, ":var_21", "fac_kingdom_1"),
            (assign, ":var_22", "p_town_1_1"),
            (assign, ":var_23", "p_town_2_1"),
            (assign, ":var_24", "p_castle_1_1"),
            (assign, ":var_25", "p_castle_2_1"),
            (assign, ":var_26", "p_village_1_1"),
            (assign, ":var_27", "p_village_2_1"),
        (else_try),
            (eq, ":var_21", "fac_kingdom_2"),
            (assign, ":var_22", "p_town_2_1"),
            (assign, ":var_23", "p_town_3_1"),
            (assign, ":var_24", "p_castle_2_1"),
            (assign, ":var_25", "p_castle_3_1"),
            (assign, ":var_26", "p_village_2_1"),
            (assign, ":var_27", "p_village_3_1"),
        (else_try),
            (eq, ":var_21", "fac_kingdom_3"),
            (assign, ":var_22", "p_town_3_1"),
            (assign, ":var_23", "p_town_4_1"),
            (assign, ":var_24", "p_castle_3_1"),
            (assign, ":var_25", "p_castle_4_1"),
            (assign, ":var_26", "p_village_3_1"),
            (assign, ":var_27", "p_village_4_1"),
        (else_try),
            (eq, ":var_21", "fac_kingdom_4"),
            (assign, ":var_22", "p_town_4_1"),
            (assign, ":var_23", "p_town_5_1"),
            (assign, ":var_24", "p_castle_4_1"),
            (assign, ":var_25", "p_castle_5_1"),
            (assign, ":var_26", "p_village_4_1"),
            (assign, ":var_27", "p_village_5_1"),
        (else_try),
            (eq, ":var_21", "fac_kingdom_5"),
            (assign, ":var_22", "p_town_5_1"),
            (assign, ":var_23", "p_town_6_1"),
            (assign, ":var_24", "p_castle_5_1"),
            (assign, ":var_25", "p_castle_6_1"),
            (assign, ":var_26", "p_village_5_1"),
            (assign, ":var_27", "p_village_6_1"),
        (else_try),
            (eq, ":var_21", "fac_kingdom_6"),
            (assign, ":var_22", "p_town_6_1"),
            (assign, ":var_23", "p_town_7_1"),
            (assign, ":var_24", "p_castle_6_1"),
            (assign, ":var_25", "p_castle_7_1"),
            (assign, ":var_26", "p_village_6_1"),
            (assign, ":var_27", "p_village_7_1"),
        (else_try),
            (eq, ":var_21", "fac_kingdom_7"),
            (assign, ":var_22", "p_town_7_1"),
            (assign, ":var_23", "p_town_8_1"),
            (assign, ":var_24", "p_castle_7_1"),
            (assign, ":var_25", "p_castle_8_1"),
            (assign, ":var_26", "p_village_7_1"),
            (assign, ":var_27", "p_village_8_1"),
        (else_try),
            (eq, ":var_21", "fac_kingdom_8"),
            (assign, ":var_22", "p_town_8_1"),
            (assign, ":var_23", "p_town_9_1"),
            (assign, ":var_24", "p_castle_8_1"),
            (assign, ":var_25", "p_castle_9_1"),
            (assign, ":var_26", "p_village_8_1"),
            (assign, ":var_27", "p_village_9_1"),
        (else_try),
            (eq, ":var_21", "fac_kingdom_9"),
            (assign, ":var_22", "p_town_9_1"),
            (assign, ":var_23", "p_town_10_1"),
            (assign, ":var_24", "p_castle_9_1"),
            (assign, ":var_25", "p_castle_10_1"),
            (assign, ":var_26", "p_village_9_1"),
            (assign, ":var_27", "p_village_10_1"),
        (else_try),
            (eq, ":var_21", "fac_kingdom_10"),
            (assign, ":var_22", "p_town_10_1"),
            (assign, ":var_23", "p_town_11_1"),
            (assign, ":var_24", "p_castle_10_1"),
            (assign, ":var_25", "p_castle_11_1"),
            (assign, ":var_26", "p_village_10_1"),
            (assign, ":var_27", "p_village_11_1"),
        (else_try),
            (eq, ":var_21", "fac_kingdom_11"),
            (assign, ":var_22", "p_town_11_1"),
            (assign, ":var_23", "p_town_12_1"),
            (assign, ":var_24", "p_castle_11_1"),
            (assign, ":var_25", "p_castle_12_1"),
            (assign, ":var_26", "p_village_11_1"),
            (assign, ":var_27", "p_village_12_1"),
        (else_try),
            (eq, ":var_21", "fac_kingdom_12"),
            (assign, ":var_22", "p_town_12_1"),
            (assign, ":var_23", "p_town_13_1"),
            (assign, ":var_24", "p_castle_12_1"),
            (assign, ":var_25", "p_castle_13_1"),
            (assign, ":var_26", "p_village_12_1"),
            (assign, ":var_27", "p_village_13_1"),
        (else_try),
            (eq, ":var_21", "fac_kingdom_13"),
            (assign, ":var_22", "p_town_13_1"),
            (assign, ":var_23", "p_town_14_1"),
            (assign, ":var_24", "p_castle_13_1"),
            (assign, ":var_25", "p_castle_14_1"),
            (assign, ":var_26", "p_village_13_1"),
            (assign, ":var_27", "p_village_14_1"),
        (else_try),
            (eq, ":var_21", "fac_kingdom_14"),
            (assign, ":var_22", "p_town_14_1"),
            (assign, ":var_23", "p_town_15_1"),
            (assign, ":var_24", "p_castle_14_1"),
            (assign, ":var_25", "p_castle_15_1"),
            (assign, ":var_26", "p_village_14_1"),
            (assign, ":var_27", "p_village_15_1"),
        (else_try),
            (eq, ":var_21", "fac_kingdom_15"),
            (assign, ":var_22", "p_town_15_1"),
            (assign, ":var_23", "p_town_16_1"),
            (assign, ":var_24", "p_castle_15_1"),
            (assign, ":var_25", "p_castle_16_1"),
            (assign, ":var_26", "p_village_15_1"),
            (assign, ":var_27", "p_village_16_1"),
        (else_try),
            (eq, ":var_21", "fac_kingdom_16"),
            (assign, ":var_22", "p_town_16_1"),
            (assign, ":var_23", "p_town_17_1"),
            (assign, ":var_24", "p_castle_16_1"),
            (assign, ":var_25", "p_castle_17_1"),
            (assign, ":var_26", "p_village_16_1"),
            (assign, ":var_27", "p_village_17_1"),
        (else_try),
            (eq, ":var_21", "fac_kingdom_17"),
            (assign, ":var_22", "p_town_17_1"),
            (assign, ":var_23", "p_town_18_1"),
            (assign, ":var_24", "p_castle_17_1"),
            (assign, ":var_25", "p_castle_18_1"),
            (assign, ":var_26", "p_village_17_1"),
            (assign, ":var_27", "p_village_18_1"),
        (else_try),
            (eq, ":var_21", "fac_kingdom_18"),
            (assign, ":var_22", "p_town_18_1"),
            (assign, ":var_23", "p_town_20_1"),
            (assign, ":var_24", "p_castle_18_1"),
            (assign, ":var_25", "p_castle_19_1"),
            (assign, ":var_26", "p_village_18_1"),
            (assign, ":var_27", "p_village_20_1"),
        (else_try),
            (eq, ":var_21", "fac_kingdom_19"),
            (assign, ":var_22", "p_town_19_1"),
            (assign, ":var_23", "p_town_20_1"),
            (assign, ":var_24", "p_castle_19_1"),
            (assign, ":var_25", "p_castle_20_1"),
            (assign, ":var_26", "p_village_19_1"),
            (assign, ":var_27", "p_village_20_1"),
        (else_try),
            (eq, ":var_21", "fac_kingdom_20"),
            (assign, ":var_22", "p_town_20_1"),
            (assign, ":var_23", "p_town_21_1"),
            (assign, ":var_24", "p_castle_20_1"),
            (assign, ":var_25", "p_castle_22_1"),
            (assign, ":var_26", "p_village_20_1"),
            (assign, ":var_27", "p_village_21_1"),
        (else_try),
            (eq, ":var_21", "fac_papacy"),
            (assign, ":var_22", "p_town_21_1"),
            (assign, ":var_23", "p_town_22_1"),
            (assign, ":var_26", "p_village_21_1"),
            (assign, ":var_27", "p_village_22_1"),
        (else_try),
            (eq, ":var_21", "fac_kingdom_22"),
            (assign, ":var_22", "p_town_22_1"),
            (assign, ":var_23", "p_town_23_1"),
            (assign, ":var_24", "p_castle_22_1"),
            (assign, ":var_25", "p_castle_23_1"),
            (assign, ":var_26", "p_village_22_1"),
            (assign, ":var_27", "p_village_23_1"),
        (else_try),
            (eq, ":var_21", "fac_kingdom_23"),
            (assign, ":var_22", "p_town_23_1"),
            (assign, ":var_23", "p_town_24_1"),
            (assign, ":var_24", "p_castle_23_1"),
            (assign, ":var_25", "p_castle_24_1"),
            (assign, ":var_26", "p_village_23_1"),
            (assign, ":var_27", "p_village_24_1"),
        (else_try),
            (eq, ":var_21", "fac_kingdom_24"),
            (assign, ":var_22", "p_town_24_1"),
            (assign, ":var_23", "p_town_25_1"),
            (assign, ":var_24", "p_castle_24_1"),
            (assign, ":var_25", "p_castle_25_1"),
            (assign, ":var_26", "p_village_24_1"),
            (assign, ":var_27", "p_village_25_1"),
        (else_try),
            (eq, ":var_21", "fac_kingdom_25"),
            (assign, ":var_22", "p_town_25_1"),
            (assign, ":var_23", "p_town_26_1"),
            (assign, ":var_24", "p_castle_25_1"),
            (assign, ":var_25", "p_castle_26_1"),
            (assign, ":var_26", "p_village_25_1"),
            (assign, ":var_27", "p_village_26_1"),
        (else_try),
            (eq, ":var_21", "fac_kingdom_26"),
            (assign, ":var_22", "p_town_26_1"),
            (assign, ":var_23", "p_town_27_1"),
            (assign, ":var_24", "p_castle_26_1"),
            (assign, ":var_25", "p_castle_27_1"),
            (assign, ":var_26", "p_village_26_1"),
            (assign, ":var_27", "p_village_27_1"),
        (else_try),
            (eq, ":var_21", "fac_kingdom_27"),
            (assign, ":var_22", "p_town_27_1"),
            (assign, ":var_23", "p_town_28_1"),
            (assign, ":var_24", "p_castle_27_1"),
            (assign, ":var_25", "p_castle_28_1"),
            (assign, ":var_26", "p_village_27_1"),
            (assign, ":var_27", "p_village_28_1"),
        (else_try),
            (eq, ":var_21", "fac_kingdom_28"),
            (assign, ":var_22", "p_town_28_1"),
            (assign, ":var_23", "p_town_29_1"),
            (assign, ":var_24", "p_castle_28_1"),
            (assign, ":var_25", "p_castle_29_1"),
            (assign, ":var_26", "p_village_28_1"),
            (assign, ":var_27", "p_village_29_1"),
        (else_try),
            (eq, ":var_21", "fac_kingdom_29"),
            (assign, ":var_22", "p_town_29_1"),
            (assign, ":var_23", "p_town_30_1"),
            (assign, ":var_24", "p_castle_29_1"),
            (assign, ":var_25", "p_castle_30_1"),
            (assign, ":var_26", "p_village_29_1"),
            (assign, ":var_27", "p_village_30_1"),
        (else_try),
            (eq, ":var_21", "fac_kingdom_30"),
            (assign, ":var_22", "p_town_30_1"),
            (assign, ":var_23", "p_town_31_1"),
            (assign, ":var_24", "p_castle_30_1"),
            (assign, ":var_25", "p_castle_31_1"),
            (assign, ":var_26", "p_village_30_1"),
            (assign, ":var_27", "p_village_31_1"),
        (else_try),
            (eq, ":var_21", "fac_kingdom_31"),
            (assign, ":var_22", "p_town_31_1"),
            (assign, ":var_23", "p_town_32_1"),
            (assign, ":var_24", "p_castle_31_1"),
            (assign, ":var_25", "p_castle_32_1"),
            (assign, ":var_26", "p_village_31_1"),
            (assign, ":var_27", "p_village_32_1"),
        (else_try),
            (eq, ":var_21", "fac_kingdom_32"),
            (assign, ":var_22", "p_town_32_1"),
            (assign, ":var_23", "p_town_37_1"),
            (assign, ":var_24", "p_castle_32_1"),
            (assign, ":var_25", "p_castle_33_1"),
            (assign, ":var_26", "p_village_32_1"),
            (assign, ":var_27", "p_village_33_1"),
        (else_try),
            (eq, ":var_21", "fac_kingdom_33"),
            (assign, ":var_24", "p_castle_33_1"),
            (assign, ":var_25", "p_castle_34_1"),
            (assign, ":var_26", "p_village_33_1"),
            (assign, ":var_27", "p_village_34_1"),
        (else_try),
            (eq, ":var_21", "fac_kingdom_34"),
            (assign, ":var_24", "p_castle_34_1"),
            (assign, ":var_25", "p_castle_35_1"),
            (assign, ":var_26", "p_village_34_1"),
            (assign, ":var_27", "p_village_35_1"),
        (else_try),
            (eq, ":var_21", "fac_kingdom_35"),
            (assign, ":var_24", "p_castle_35_1"),
            (assign, ":var_25", "p_castle_36_1"),
            (assign, ":var_26", "p_village_35_1"),
            (assign, ":var_27", "p_village_36_1"),
        (else_try),
            (eq, ":var_21", "fac_kingdom_36"),
            (assign, ":var_24", "p_castle_36_1"),
            (assign, ":var_25", "p_castle_37_1"),
            (assign, ":var_26", "p_village_36_1"),
            (assign, ":var_27", "p_village_37_1"),
        (else_try),
            (eq, ":var_21", "fac_kingdom_37"),
            (assign, ":var_22", "p_town_37_1"),
            (assign, ":var_23", "p_town_38_1"),
            (assign, ":var_24", "p_castle_37_1"),
            (assign, ":var_25", "p_castle_38_1"),
            (assign, ":var_26", "p_village_37_1"),
            (assign, ":var_27", "p_village_38_1"),
        (else_try),
            (eq, ":var_21", "fac_kingdom_38"),
            (assign, ":var_22", "p_town_38_1"),
            (assign, ":var_23", "p_town_39_1"),
            (assign, ":var_24", "p_castle_38_1"),
            (assign, ":var_25", "p_castle_39_1"),
            (assign, ":var_26", "p_village_38_1"),
            (assign, ":var_27", "p_village_39_1"),
        (else_try),
            (eq, ":var_21", "fac_kingdom_39"),
            (assign, ":var_22", "p_town_39_1"),
            (assign, ":var_23", "p_town_40_1"),
            (assign, ":var_24", "p_castle_39_1"),
            (assign, ":var_25", "p_castle_player"),
            (assign, ":var_26", "p_village_39_1"),
            (assign, ":var_27", "p_village_40_1"),
        (else_try),
            (eq, ":var_21", "fac_kingdom_40"),
            (assign, ":var_22", "p_town_40_1"),
            (assign, ":var_23", "p_town_41_1"),
            (assign, ":var_26", "p_village_40_1"),
            (assign, ":var_27", "p_village_41_1"),
        (else_try),
            (eq, ":var_21", "fac_kingdom_41"),
            (assign, ":var_22", "p_town_41_1"),
            (assign, ":var_23", "p_town_42_1"),
            (assign, ":var_26", "p_village_41_1"),
            (assign, ":var_27", "p_village_42_1"),
        (else_try),
            (eq, ":var_21", "fac_kingdom_42"),
            (assign, ":var_22", "p_town_42_1"),
            (assign, ":var_23", "p_castle_1_1"),
            (assign, ":var_26", "p_village_42_1"),
            (assign, ":var_27", "p_village_player"),
        (try_end),
        (try_for_range, ":var_28", ":var_22", ":var_23"),
            (assign, ":var_29", 999999),
            (assign, ":var_30", -1),
            (try_for_range, ":var_31", ":var_26", ":var_27"),
                (neg|party_slot_ge, ":var_31", slot_village_bound_center, 1),
                (store_distance_to_party_from_party, ":var_32", ":var_31", ":var_28"),
                (neg|ge, ":var_32", ":var_29"),
                (assign, ":var_29", ":var_32"),
                (assign, ":var_30", ":var_31"),
            (try_end),
            (neg|eq, ":var_30", -1),
            (party_set_slot, ":var_30", slot_village_bound_center, ":var_28"),
            (store_faction_of_party, ":var_33", ":var_28"),
            (call_script, "script_give_center_to_faction_aux", ":var_30", ":var_33"),
        (try_end),
        (try_for_range, ":var_28", ":var_22", ":var_23"),
            (assign, ":var_29", 999999),
            (assign, ":var_30", -1),
            (try_for_range, ":var_31", ":var_26", ":var_27"),
                (neg|party_slot_ge, ":var_31", slot_village_bound_center, 1),
                (store_distance_to_party_from_party, ":var_32", ":var_31", ":var_28"),
                (neg|ge, ":var_32", ":var_29"),
                (assign, ":var_29", ":var_32"),
                (assign, ":var_30", ":var_31"),
            (try_end),
            (neg|eq, ":var_30", -1),
            (party_set_slot, ":var_30", slot_village_bound_center, ":var_28"),
            (store_faction_of_party, ":var_33", ":var_28"),
            (call_script, "script_give_center_to_faction_aux", ":var_30", ":var_33"),
        (try_end),
        (try_for_range, ":var_28", ":var_24", ":var_25"),
            (assign, ":var_29", 999999),
            (assign, ":var_30", -1),
            (try_for_range, ":var_31", ":var_26", ":var_27"),
                (neg|party_slot_ge, ":var_31", slot_village_bound_center, 1),
                (store_distance_to_party_from_party, ":var_32", ":var_31", ":var_28"),
                (neg|ge, ":var_32", ":var_29"),
                (assign, ":var_29", ":var_32"),
                (assign, ":var_30", ":var_31"),
            (try_end),
            (assign, ":var_34", 0),
            (try_for_range, ":var_31", ":var_26", ":var_27"),
                (party_slot_eq, ":var_31", slot_village_bound_center, ":var_28"),
                (assign, ":var_34", 1),
            (try_end),
            (try_begin),
                (eq, ":var_34", 0),
                (neg|eq, ":var_30", -1),
                (party_set_slot, ":var_30", slot_village_bound_center, ":var_28"),
                (store_faction_of_party, ":var_33", ":var_28"),
                (call_script, "script_give_center_to_faction_aux", ":var_30", ":var_33"),
            (try_end),
        (try_end),
    (try_end),
    (store_sub, ":var_35", "p_castle_1_1", "p_town_1_1"),
    (store_sub, ":var_36", "p_salt_mine", "p_village_1_1"),
    (store_sub, ":var_37", "p_village_1_1", "p_castle_1_1"),
    (store_sub, ":var_38", "trp_village_1_elder", "trp_town_1_mayor"),
    (store_sub, ":var_39", "trp_town_1_merchant", "trp_town_1_tavernkeeper"),
    (store_sub, ":var_40", "trp_town_1_tavernkeeper", "trp_town_1_weaponsmith"),
    (store_sub, ":var_41", "trp_town_1_weaponsmith", "trp_town_1_armorer"),
    (store_sub, ":var_42", "trp_salt_mine_merchant", "trp_town_1_merchant"),
    (store_sub, ":var_43", "trp_town_1_mayor", "trp_town_1_horse_merchant"),
    (store_sub, ":var_44", "trp_town_1_armorer", "trp_town_1_arena_master"),
    (store_sub, ":var_45", "trp_zendar_chest", "trp_town_1_master_craftsman"),
    (store_sub, ":var_46", "trp_merchants_end", "trp_village_1_elder"),
    (assign, reg25, ":var_35"),
    (assign, reg27, ":var_36"),
    (assign, reg28, ":var_37"),
    (store_mul, ":var_47", ":var_35", 2),
    (val_add, ":var_47", ":var_37"),
    (try_begin),
        (neg|eq, ":var_47", ":var_36"),
        (assign, reg26, ":var_47"),
        (display_message, "@ERROR -- wrong number of villages, need {reg26} have {reg27}"),
    (try_end),
    (try_begin),
        (neg|eq, ":var_36", ":var_46"),
        (assign, reg26, ":var_46"),
        (display_message, "@ERROR -- Villages: {reg27} elders: {reg26}"),
    (try_end),
    (try_begin),
        (neg|eq, ":var_35", ":var_38"),
        (assign, reg26, ":var_38"),
        (display_message, "@ERROR -- Towns: {reg25} mayors: {reg26}"),
    (try_end),
    (try_begin),
        (neg|eq, ":var_35", ":var_39"),
        (assign, reg26, ":var_39"),
        (display_message, "@ERROR -- Towns: {reg25} tavern keepers: {reg26}"),
    (try_end),
    (try_begin),
        (neg|eq, ":var_35", ":var_40"),
        (assign, reg26, ":var_40"),
        (display_message, "@ERROR -- Towns: {reg25} weaponsmiths: {reg26}"),
    (try_end),
    (try_begin),
        (neg|eq, ":var_35", ":var_41"),
        (assign, reg26, ":var_41"),
        (display_message, "@ERROR -- Towns: {reg25} armorers: {reg26}"),
    (try_end),
    (try_begin),
        (neg|eq, ":var_35", ":var_42"),
        (assign, reg26, ":var_42"),
        (display_message, "@ERROR -- Towns: {reg25} merchants: {reg26}"),
    (try_end),
    (try_begin),
        (neg|eq, ":var_35", ":var_43"),
        (assign, reg26, ":var_43"),
        (display_message, "@ERROR -- Towns: {reg25} horse merchants: {reg26}"),
    (try_end),
    (try_begin),
        (neg|eq, ":var_35", ":var_44"),
        (assign, reg26, ":var_44"),
        (display_message, "@ERROR -- Towns: {reg25} arena masters: {reg26}"),
    (try_end),
    (try_begin),
        (neg|eq, ":var_35", ":var_45"),
        (assign, reg26, ":var_45"),
        (display_message, "@ERROR -- Towns: {reg25} craftsmen: {reg26}"),
    (try_end),
    (try_for_range, ":var_18", "p_town_1_1", "p_castle_1_1"),
        (store_sub, ":var_17", ":var_18", "p_town_1_1"),
        (party_set_slot, ":var_18", slot_party_type, 3),
        (store_add, ":var_48", "trp_town_1_mayor", ":var_17"),
        (party_set_slot, ":var_18", slot_town_elder, ":var_48"),
        (store_add, ":var_48", "trp_town_1_tavernkeeper", ":var_17"),
        (party_set_slot, ":var_18", slot_town_tavernkeeper, ":var_48"),
        (store_add, ":var_48", "trp_town_1_weaponsmith", ":var_17"),
        (party_set_slot, ":var_18", slot_town_weaponsmith, ":var_48"),
        (store_add, ":var_48", "trp_town_1_armorer", ":var_17"),
        (party_set_slot, ":var_18", slot_town_armorer, ":var_48"),
        (store_add, ":var_48", "trp_town_1_merchant", ":var_17"),
        (party_set_slot, ":var_18", slot_town_merchant, ":var_48"),
        (store_add, ":var_48", "trp_town_1_horse_merchant", ":var_17"),
        (party_set_slot, ":var_18", slot_town_horse_merchant, ":var_48"),
        (store_add, ":var_48", "trp_town_1_arena_master", ":var_17"),
        (party_set_slot, ":var_18", 600, ":var_48"),
        (party_set_slot, ":var_18", slot_town_reinforcement_party_template, "pt_center_reinforcements"),
    (try_end),
    (try_for_range, ":var_49", "p_castle_1_1", "p_village_1_1"),
        (store_sub, ":var_17", ":var_49", "p_castle_1_1"),
        (val_mul, ":var_17", 3),
        (party_set_slot, ":var_49", slot_town_reinforcement_party_template, "pt_center_reinforcements"),
        (party_set_slot, ":var_49", slot_party_type, 2),
        (party_set_slot, ":var_49", slot_center_is_besieged_by, -1),
    (try_end),
    (try_for_range, ":var_50", "p_village_1_1", "p_salt_mine"),
        (store_sub, ":var_17", ":var_50", "p_village_1_1"),
        (store_add, ":var_51", "trp_village_1_elder", ":var_17"),
        (party_set_slot, ":var_50", slot_town_elder, ":var_51"),
        (party_set_slot, ":var_50", slot_party_type, 4),
        (party_set_slot, ":var_50", slot_village_raided_by, -1),
        (call_script, "script_refresh_village_defenders", ":var_50"),
        (call_script, "script_refresh_village_defenders", ":var_50"),
        (call_script, "script_refresh_village_defenders", ":var_50"),
        (call_script, "script_refresh_village_defenders", ":var_50"),
    (try_end),
    (try_for_range, ":var_1", "p_town_1_1", "p_salt_mine"),
        (party_set_slot, ":var_1", slot_center_last_spotted_enemy, -1),
        (party_set_slot, ":var_1", slot_center_is_besieged_by, -1),
        (party_set_slot, ":var_1", slot_center_last_taken_by_troop, -1),
    (try_end),
    (faction_set_slot, "fac_kingdom_1", slot_faction_banner, "mesh_banner_kingdom_1"),
    (faction_set_slot, "fac_kingdom_2", slot_faction_banner, "mesh_banner_kingdom_2"),
    (faction_set_slot, "fac_kingdom_3", slot_faction_banner, "mesh_banner_kingdom_3"),
    (faction_set_slot, "fac_kingdom_4", slot_faction_banner, "mesh_banner_kingdom_4"),
    (faction_set_slot, "fac_kingdom_5", slot_faction_banner, "mesh_banner_kingdom_5"),
    (faction_set_slot, "fac_kingdom_6", slot_faction_banner, "mesh_banner_kingdom_6"),
    (faction_set_slot, "fac_kingdom_7", slot_faction_banner, "mesh_banner_kingdom_7"),
    (faction_set_slot, "fac_kingdom_8", slot_faction_banner, "mesh_banner_kingdom_8"),
    (faction_set_slot, "fac_kingdom_9", slot_faction_banner, "mesh_banner_kingdom_9"),
    (faction_set_slot, "fac_kingdom_10", slot_faction_banner, "mesh_banner_kingdom_10"),
    (faction_set_slot, "fac_kingdom_11", slot_faction_banner, "mesh_banner_kingdom_11"),
    (faction_set_slot, "fac_kingdom_12", slot_faction_banner, "mesh_banner_kingdom_12"),
    (faction_set_slot, "fac_kingdom_13", slot_faction_banner, "mesh_banner_kingdom_13"),
    (faction_set_slot, "fac_kingdom_14", slot_faction_banner, "mesh_banner_kingdom_14"),
    (faction_set_slot, "fac_kingdom_15", slot_faction_banner, "mesh_banner_kingdom_15"),
    (faction_set_slot, "fac_kingdom_16", slot_faction_banner, "mesh_banner_kingdom_16"),
    (faction_set_slot, "fac_kingdom_17", slot_faction_banner, "mesh_banner_kingdom_17"),
    (faction_set_slot, "fac_kingdom_18", slot_faction_banner, "mesh_banner_kingdom_18"),
    (faction_set_slot, "fac_kingdom_19", slot_faction_banner, "mesh_banner_kingdom_19"),
    (faction_set_slot, "fac_kingdom_20", slot_faction_banner, "mesh_banner_kingdom_20"),
    (faction_set_slot, "fac_papacy", slot_faction_banner, "mesh_banner_kingdom_21"),
    (faction_set_slot, "fac_kingdom_22", slot_faction_banner, "mesh_banner_kingdom_22"),
    (faction_set_slot, "fac_kingdom_23", slot_faction_banner, "mesh_banner_kingdom_23"),
    (faction_set_slot, "fac_kingdom_24", slot_faction_banner, "mesh_banner_kingdom_24"),
    (faction_set_slot, "fac_kingdom_25", slot_faction_banner, "mesh_banner_kingdom_25"),
    (faction_set_slot, "fac_kingdom_26", slot_faction_banner, "mesh_banner_kingdom_26"),
    (faction_set_slot, "fac_kingdom_27", slot_faction_banner, "mesh_banner_kingdom_27"),
    (faction_set_slot, "fac_kingdom_28", slot_faction_banner, "mesh_banner_kingdom_28"),
    (faction_set_slot, "fac_kingdom_29", slot_faction_banner, "mesh_banner_kingdom_29"),
    (faction_set_slot, "fac_kingdom_30", slot_faction_banner, "mesh_banner_kingdom_30"),
    (faction_set_slot, "fac_kingdom_31", slot_faction_banner, "mesh_banner_kingdom_31"),
    (faction_set_slot, "fac_kingdom_32", slot_faction_banner, "mesh_banner_kingdom_32"),
    (faction_set_slot, "fac_kingdom_33", slot_faction_banner, "mesh_banner_kingdom_2"),
    (faction_set_slot, "fac_kingdom_34", slot_faction_banner, "mesh_banner_kingdom_2"),
    (faction_set_slot, "fac_kingdom_35", slot_faction_banner, "mesh_banner_kingdom_2"),
    (faction_set_slot, "fac_kingdom_36", slot_faction_banner, "mesh_banner_kingdom_2"),
    (faction_set_slot, "fac_kingdom_37", slot_faction_banner, "mesh_banner_kingdom_32"),
    (faction_set_slot, "fac_kingdom_38", slot_faction_banner, "mesh_banner_kingdom_32"),
    (faction_set_slot, "fac_kingdom_39", slot_faction_banner, "mesh_banner_kingdom_32"),
    (faction_set_slot, "fac_kingdom_40", slot_faction_banner, "mesh_banner_kingdom_32"),
    (faction_set_slot, "fac_kingdom_41", slot_faction_banner, "mesh_banner_kingdom_32"),
    (faction_set_slot, "fac_kingdom_42", slot_faction_banner, "mesh_banner_kingdom_6"),
    (try_for_range, ":var_52", "trp_npc1", "trp_knight_1_1_wife"),
        (this_or_next|troop_slot_eq, ":var_52", slot_troop_occupation, 2),
        (troop_slot_eq, ":var_52", slot_troop_occupation, 9),
        (store_troop_faction, ":var_53", ":var_52"),
        (neg|faction_slot_eq, ":var_53", slot_faction_leader, ":var_52"),
        (store_character_level, ":var_54", ":var_52"),
        (store_mul, ":var_55", ":var_54", ":var_54"),
        (val_div, ":var_55", 4),
        (troop_get_slot, ":var_56", ":var_52", slot_troop_age),
        (store_mul, ":var_57", ":var_56", ":var_56"),
        (val_div, ":var_57", 8),
        (val_add, ":var_55", ":var_57"),
        (try_begin),
            (faction_slot_eq, ":var_53", slot_faction_leader, ":var_52"),
            (store_random_in_range, ":var_58", 250, 400),
        (else_try),
            (store_random_in_range, ":var_58", 0, 100),
        (try_end),
        (val_add, ":var_55", ":var_58"),
        (troop_set_slot, ":var_52", slot_troop_renown, ":var_55"),
    (try_end),
    (try_for_range, ":var_59", "trp_player", "trp_merchants_end"),
        (add_troop_note_tableau_mesh, ":var_59", "tableau_troop_note_mesh"),
    (try_end),
    (try_for_range, ":var_1", "p_town_1_1", "p_salt_mine"),
        (add_party_note_tableau_mesh, ":var_1", "tableau_center_note_mesh"),
    (try_end),
    (try_for_range, ":var_6", "fac_player_supporters_faction", "fac_kingdoms_end"),
        (is_between, ":var_6", "fac_kingdom_1", "fac_kingdoms_end"),
        (add_faction_note_tableau_mesh, ":var_6", "tableau_faction_note_mesh"),
    (else_try),
        (add_faction_note_tableau_mesh, ":var_6", "tableau_faction_note_mesh_banner"),
    (try_end),
    (troop_set_slot, "trp_kingdom_42_lord", slot_troop_banner_scene_prop, "spr_banner_o06"),
    (troop_set_slot, "trp_knight_42_1", slot_troop_banner_scene_prop, "spr_banner_o01"),
    (troop_set_slot, "trp_knight_42_2", slot_troop_banner_scene_prop, "spr_banner_o02"),
    (troop_set_slot, "trp_knight_42_3", slot_troop_banner_scene_prop, "spr_banner_o03"),
    (troop_set_slot, "trp_knight_42_4", slot_troop_banner_scene_prop, "spr_banner_o04"),
    (troop_set_slot, "trp_knight_42_5", slot_troop_banner_scene_prop, "spr_banner_o05"),
    (troop_set_slot, "trp_kingdom_41_lord", slot_troop_banner_scene_prop, "spr_banner_s"),
    (troop_set_slot, "trp_knight_41_1", slot_troop_banner_scene_prop, "spr_banner_s"),
    (troop_set_slot, "trp_knight_41_2", slot_troop_banner_scene_prop, "spr_banner_s"),
    (troop_set_slot, "trp_knight_41_3", slot_troop_banner_scene_prop, "spr_banner_s"),
    (troop_set_slot, "trp_knight_41_4", slot_troop_banner_scene_prop, "spr_banner_s"),
    (troop_set_slot, "trp_knight_41_5", slot_troop_banner_scene_prop, "spr_banner_s"),
    (troop_set_slot, "trp_kingdom_40_lord", slot_troop_banner_scene_prop, "spr_banner_t"),
    (troop_set_slot, "trp_knight_40_1", slot_troop_banner_scene_prop, "spr_banner_t"),
    (troop_set_slot, "trp_knight_40_2", slot_troop_banner_scene_prop, "spr_banner_t"),
    (troop_set_slot, "trp_knight_40_3", slot_troop_banner_scene_prop, "spr_banner_t"),
    (troop_set_slot, "trp_knight_40_4", slot_troop_banner_scene_prop, "spr_banner_t"),
    (troop_set_slot, "trp_knight_40_5", slot_troop_banner_scene_prop, "spr_banner_t"),
    (troop_set_slot, "trp_kingdom_39_lord", slot_troop_banner_scene_prop, "spr_banner_x09"),
    (troop_set_slot, "trp_knight_39_1", slot_troop_banner_scene_prop, "spr_banner_r12"),
    (troop_set_slot, "trp_knight_39_2", slot_troop_banner_scene_prop, "spr_banner_r03"),
    (troop_set_slot, "trp_knight_39_3", slot_troop_banner_scene_prop, "spr_banner_k20"),
    (troop_set_slot, "trp_knight_39_4", slot_troop_banner_scene_prop, "spr_banner_r04"),
    (troop_set_slot, "trp_knight_39_5", slot_troop_banner_scene_prop, "spr_banner_r02"),
    (troop_set_slot, "trp_kingdom_38_lord", slot_troop_banner_scene_prop, "spr_banner_f18"),
    (troop_set_slot, "trp_knight_38_1", slot_troop_banner_scene_prop, "spr_banner_f18"),
    (troop_set_slot, "trp_knight_38_2", slot_troop_banner_scene_prop, "spr_banner_r08"),
    (troop_set_slot, "trp_knight_38_3", slot_troop_banner_scene_prop, "spr_banner_r07"),
    (troop_set_slot, "trp_knight_38_4", slot_troop_banner_scene_prop, "spr_banner_r06"),
    (troop_set_slot, "trp_knight_38_5", slot_troop_banner_scene_prop, "spr_banner_r05"),
    (troop_set_slot, "trp_kingdom_37_lord", slot_troop_banner_scene_prop, "spr_banner_h"),
    (troop_set_slot, "trp_knight_37_1", slot_troop_banner_scene_prop, "spr_banner_h"),
    (troop_set_slot, "trp_knight_37_2", slot_troop_banner_scene_prop, "spr_banner_i"),
    (troop_set_slot, "trp_knight_37_3", slot_troop_banner_scene_prop, "spr_banner_i"),
    (troop_set_slot, "trp_kingdom_36_lord", slot_troop_banner_scene_prop, "spr_banner_p19"),
    (troop_set_slot, "trp_knight_36_1", slot_troop_banner_scene_prop, "spr_banner_p21"),
    (troop_set_slot, "trp_knight_36_2", slot_troop_banner_scene_prop, "spr_banner_p20"),
    (troop_set_slot, "trp_knight_36_3", slot_troop_banner_scene_prop, "spr_banner_p19"),
    (troop_set_slot, "trp_kingdom_35_lord", slot_troop_banner_scene_prop, "spr_banner_d"),
    (troop_set_slot, "trp_knight_35_1", slot_troop_banner_scene_prop, "spr_banner_p18"),
    (troop_set_slot, "trp_knight_35_2", slot_troop_banner_scene_prop, "spr_banner_p17"),
    (troop_set_slot, "trp_knight_35_3", slot_troop_banner_scene_prop, "spr_banner_p16"),
    (troop_set_slot, "trp_kingdom_34_lord", slot_troop_banner_scene_prop, "spr_banner_l"),
    (troop_set_slot, "trp_knight_34_1", slot_troop_banner_scene_prop, "spr_banner_p15"),
    (troop_set_slot, "trp_knight_34_2", slot_troop_banner_scene_prop, "spr_banner_p14"),
    (troop_set_slot, "trp_knight_34_3", slot_troop_banner_scene_prop, "spr_banner_p13"),
    (troop_set_slot, "trp_kingdom_33_lord", slot_troop_banner_scene_prop, "spr_banner_p17"),
    (troop_set_slot, "trp_knight_33_1", slot_troop_banner_scene_prop, "spr_banner_p12"),
    (troop_set_slot, "trp_knight_33_2", slot_troop_banner_scene_prop, "spr_banner_p11"),
    (troop_set_slot, "trp_knight_33_3", slot_troop_banner_scene_prop, "spr_banner_p10"),
    (troop_set_slot, "trp_kingdom_32_lord", slot_troop_banner_scene_prop, "spr_banner_o"),
    (troop_set_slot, "trp_knight_32_1", slot_troop_banner_scene_prop, "spr_banner_j"),
    (troop_set_slot, "trp_knight_32_2", slot_troop_banner_scene_prop, "spr_banner_r10"),
    (troop_set_slot, "trp_knight_32_3", slot_troop_banner_scene_prop, "spr_banner_r"),
    (troop_set_slot, "trp_knight_32_4", slot_troop_banner_scene_prop, "spr_banner_q09"),
    (troop_set_slot, "trp_knight_32_5", slot_troop_banner_scene_prop, "spr_banner_j"),
    (troop_set_slot, "trp_knight_32_6", slot_troop_banner_scene_prop, "spr_banner_q"),
    (troop_set_slot, "trp_knight_32_7", slot_troop_banner_scene_prop, "spr_banner_r"),
    (troop_set_slot, "trp_knight_32_8", slot_troop_banner_scene_prop, "spr_banner_p"),
    (troop_set_slot, "trp_knight_32_9", slot_troop_banner_scene_prop, "spr_banner_j"),
    (troop_set_slot, "trp_knight_32_10", slot_troop_banner_scene_prop, "spr_banner_j"),
    (troop_set_slot, "trp_kingdom_31_lord", slot_troop_banner_scene_prop, "spr_banner_x19"),
    (troop_set_slot, "trp_knight_31_1", slot_troop_banner_scene_prop, "spr_banner_x19"),
    (troop_set_slot, "trp_knight_31_2", slot_troop_banner_scene_prop, "spr_banner_x19"),
    (troop_set_slot, "trp_knight_31_3", slot_troop_banner_scene_prop, "spr_banner_x19"),
    (troop_set_slot, "trp_knight_31_4", slot_troop_banner_scene_prop, "spr_banner_x19"),
    (troop_set_slot, "trp_knight_31_5", slot_troop_banner_scene_prop, "spr_banner_x19"),
    (troop_set_slot, "trp_knight_31_6", slot_troop_banner_scene_prop, "spr_banner_x19"),
    (troop_set_slot, "trp_knight_31_7", slot_troop_banner_scene_prop, "spr_banner_x19"),
    (troop_set_slot, "trp_knight_31_8", slot_troop_banner_scene_prop, "spr_banner_x19"),
    (troop_set_slot, "trp_knight_31_9", slot_troop_banner_scene_prop, "spr_banner_x19"),
    (troop_set_slot, "trp_knight_31_10", slot_troop_banner_scene_prop, "spr_banner_x19"),
    (troop_set_slot, "trp_knight_31_11", slot_troop_banner_scene_prop, "spr_banner_x19"),
    (troop_set_slot, "trp_knight_31_12", slot_troop_banner_scene_prop, "spr_banner_x19"),
    (troop_set_slot, "trp_knight_31_13", slot_troop_banner_scene_prop, "spr_banner_x19"),
    (troop_set_slot, "trp_knight_31_14", slot_troop_banner_scene_prop, "spr_banner_x19"),
    (troop_set_slot, "trp_knight_31_15", slot_troop_banner_scene_prop, "spr_banner_x19"),
    (troop_set_slot, "trp_kingdom_30_lord", slot_troop_banner_scene_prop, "spr_banner_x15"),
    (troop_set_slot, "trp_knight_30_1", slot_troop_banner_scene_prop, "spr_banner_x15"),
    (troop_set_slot, "trp_knight_30_2", slot_troop_banner_scene_prop, "spr_banner_x15"),
    (troop_set_slot, "trp_knight_30_3", slot_troop_banner_scene_prop, "spr_banner_x15"),
    (troop_set_slot, "trp_knight_30_4", slot_troop_banner_scene_prop, "spr_banner_x15"),
    (troop_set_slot, "trp_knight_30_5", slot_troop_banner_scene_prop, "spr_banner_x15"),
    (troop_set_slot, "trp_knight_30_6", slot_troop_banner_scene_prop, "spr_banner_x15"),
    (troop_set_slot, "trp_knight_30_7", slot_troop_banner_scene_prop, "spr_banner_x15"),
    (troop_set_slot, "trp_knight_30_8", slot_troop_banner_scene_prop, "spr_banner_x15"),
    (troop_set_slot, "trp_knight_30_9", slot_troop_banner_scene_prop, "spr_banner_x15"),
    (troop_set_slot, "trp_knight_30_10", slot_troop_banner_scene_prop, "spr_banner_x15"),
    (troop_set_slot, "trp_kingdom_29_lord", slot_troop_banner_scene_prop, "spr_banner_x16"),
    (troop_set_slot, "trp_knight_29_1", slot_troop_banner_scene_prop, "spr_banner_x16"),
    (troop_set_slot, "trp_knight_29_2", slot_troop_banner_scene_prop, "spr_banner_x16"),
    (troop_set_slot, "trp_knight_29_3", slot_troop_banner_scene_prop, "spr_banner_x16"),
    (troop_set_slot, "trp_knight_29_4", slot_troop_banner_scene_prop, "spr_banner_x16"),
    (troop_set_slot, "trp_knight_29_5", slot_troop_banner_scene_prop, "spr_banner_x16"),
    (troop_set_slot, "trp_knight_29_6", slot_troop_banner_scene_prop, "spr_banner_x16"),
    (troop_set_slot, "trp_knight_29_7", slot_troop_banner_scene_prop, "spr_banner_x16"),
    (troop_set_slot, "trp_knight_29_8", slot_troop_banner_scene_prop, "spr_banner_x16"),
    (troop_set_slot, "trp_knight_29_9", slot_troop_banner_scene_prop, "spr_banner_x16"),
    (troop_set_slot, "trp_knight_29_10", slot_troop_banner_scene_prop, "spr_banner_x16"),
    (troop_set_slot, "trp_kingdom_28_lord", slot_troop_banner_scene_prop, "spr_banner_x13"),
    (troop_set_slot, "trp_knight_28_1", slot_troop_banner_scene_prop, "spr_banner_x13"),
    (troop_set_slot, "trp_knight_28_2", slot_troop_banner_scene_prop, "spr_banner_x13"),
    (troop_set_slot, "trp_knight_28_3", slot_troop_banner_scene_prop, "spr_banner_x13"),
    (troop_set_slot, "trp_knight_28_4", slot_troop_banner_scene_prop, "spr_banner_x13"),
    (troop_set_slot, "trp_knight_28_5", slot_troop_banner_scene_prop, "spr_banner_x13"),
    (troop_set_slot, "trp_knight_28_6", slot_troop_banner_scene_prop, "spr_banner_x13"),
    (troop_set_slot, "trp_knight_28_7", slot_troop_banner_scene_prop, "spr_banner_x13"),
    (troop_set_slot, "trp_knight_28_8", slot_troop_banner_scene_prop, "spr_banner_x13"),
    (troop_set_slot, "trp_knight_28_9", slot_troop_banner_scene_prop, "spr_banner_x13"),
    (troop_set_slot, "trp_knight_28_10", slot_troop_banner_scene_prop, "spr_banner_x13"),
    (troop_set_slot, "trp_knight_28_11", slot_troop_banner_scene_prop, "spr_banner_x13"),
    (troop_set_slot, "trp_knight_28_12", slot_troop_banner_scene_prop, "spr_banner_x13"),
    (troop_set_slot, "trp_knight_28_13", slot_troop_banner_scene_prop, "spr_banner_x13"),
    (troop_set_slot, "trp_knight_28_14", slot_troop_banner_scene_prop, "spr_banner_x13"),
    (troop_set_slot, "trp_knight_28_15", slot_troop_banner_scene_prop, "spr_banner_x13"),
    (troop_set_slot, "trp_kingdom_27_lord", slot_troop_banner_scene_prop, "spr_banner_x12"),
    (troop_set_slot, "trp_knight_27_1", slot_troop_banner_scene_prop, "spr_banner_x14"),
    (troop_set_slot, "trp_knight_27_2", slot_troop_banner_scene_prop, "spr_banner_x12"),
    (troop_set_slot, "trp_knight_27_3", slot_troop_banner_scene_prop, "spr_banner_i18"),
    (troop_set_slot, "trp_knight_27_4", slot_troop_banner_scene_prop, "spr_banner_x12"),
    (troop_set_slot, "trp_knight_27_5", slot_troop_banner_scene_prop, "spr_banner_x12"),
    (troop_set_slot, "trp_knight_27_6", slot_troop_banner_scene_prop, "spr_banner_x12"),
    (troop_set_slot, "trp_knight_27_7", slot_troop_banner_scene_prop, "spr_banner_x12"),
    (troop_set_slot, "trp_knight_27_8", slot_troop_banner_scene_prop, "spr_banner_x12"),
    (troop_set_slot, "trp_knight_27_9", slot_troop_banner_scene_prop, "spr_banner_x12"),
    (troop_set_slot, "trp_knight_27_10", slot_troop_banner_scene_prop, "spr_banner_x12"),
    (troop_set_slot, "trp_knight_27_11", slot_troop_banner_scene_prop, "spr_banner_x12"),
    (troop_set_slot, "trp_knight_27_12", slot_troop_banner_scene_prop, "spr_banner_x12"),
    (troop_set_slot, "trp_knight_27_13", slot_troop_banner_scene_prop, "spr_banner_x12"),
    (troop_set_slot, "trp_knight_27_14", slot_troop_banner_scene_prop, "spr_banner_x12"),
    (troop_set_slot, "trp_knight_27_15", slot_troop_banner_scene_prop, "spr_banner_x12"),
    (troop_set_slot, "trp_kingdom_26_lord", slot_troop_banner_scene_prop, "spr_banner_x11"),
    (troop_set_slot, "trp_knight_26_1", slot_troop_banner_scene_prop, "spr_banner_i16"),
    (troop_set_slot, "trp_knight_26_2", slot_troop_banner_scene_prop, "spr_banner_i12"),
    (troop_set_slot, "trp_knight_26_3", slot_troop_banner_scene_prop, "spr_banner_i11"),
    (troop_set_slot, "trp_knight_26_4", slot_troop_banner_scene_prop, "spr_banner_i15"),
    (troop_set_slot, "trp_knight_26_5", slot_troop_banner_scene_prop, "spr_banner_x11"),
    (troop_set_slot, "trp_knight_26_6", slot_troop_banner_scene_prop, "spr_banner_i10"),
    (troop_set_slot, "trp_knight_26_7", slot_troop_banner_scene_prop, "spr_banner_i13"),
    (troop_set_slot, "trp_knight_26_8", slot_troop_banner_scene_prop, "spr_banner_x11"),
    (troop_set_slot, "trp_knight_26_9", slot_troop_banner_scene_prop, "spr_banner_i14"),
    (troop_set_slot, "trp_knight_26_10", slot_troop_banner_scene_prop, "spr_banner_x11"),
    (troop_set_slot, "trp_kingdom_25_lord", slot_troop_banner_scene_prop, "spr_banner_x10"),
    (troop_set_slot, "trp_knight_25_1", slot_troop_banner_scene_prop, "spr_banner_x10"),
    (troop_set_slot, "trp_knight_25_2", slot_troop_banner_scene_prop, "spr_banner_x10"),
    (troop_set_slot, "trp_knight_25_3", slot_troop_banner_scene_prop, "spr_banner_x10"),
    (troop_set_slot, "trp_knight_25_4", slot_troop_banner_scene_prop, "spr_banner_x10"),
    (troop_set_slot, "trp_knight_25_5", slot_troop_banner_scene_prop, "spr_banner_x10"),
    (troop_set_slot, "trp_knight_25_6", slot_troop_banner_scene_prop, "spr_banner_x10"),
    (troop_set_slot, "trp_knight_25_7", slot_troop_banner_scene_prop, "spr_banner_x10"),
    (troop_set_slot, "trp_knight_25_8", slot_troop_banner_scene_prop, "spr_banner_x10"),
    (troop_set_slot, "trp_knight_25_9", slot_troop_banner_scene_prop, "spr_banner_x10"),
    (troop_set_slot, "trp_knight_25_10", slot_troop_banner_scene_prop, "spr_banner_x10"),
    (troop_set_slot, "trp_knight_25_11", slot_troop_banner_scene_prop, "spr_banner_x10"),
    (troop_set_slot, "trp_knight_25_12", slot_troop_banner_scene_prop, "spr_banner_x10"),
    (troop_set_slot, "trp_knight_25_13", slot_troop_banner_scene_prop, "spr_banner_x10"),
    (troop_set_slot, "trp_knight_25_14", slot_troop_banner_scene_prop, "spr_banner_x10"),
    (troop_set_slot, "trp_knight_25_15", slot_troop_banner_scene_prop, "spr_banner_x10"),
    (troop_set_slot, "trp_knight_25_16", slot_troop_banner_scene_prop, "spr_banner_x10"),
    (troop_set_slot, "trp_knight_25_17", slot_troop_banner_scene_prop, "spr_banner_x10"),
    (troop_set_slot, "trp_knight_25_18", slot_troop_banner_scene_prop, "spr_banner_x10"),
    (troop_set_slot, "trp_knight_25_19", slot_troop_banner_scene_prop, "spr_banner_x10"),
    (troop_set_slot, "trp_knight_25_20", slot_troop_banner_scene_prop, "spr_banner_x10"),
    (troop_set_slot, "trp_kingdom_24_lord", slot_troop_banner_scene_prop, "spr_banner_f10"),
    (troop_set_slot, "trp_knight_24_1", slot_troop_banner_scene_prop, "spr_banner_r11"),
    (troop_set_slot, "trp_knight_24_2", slot_troop_banner_scene_prop, "spr_banner_f12"),
    (troop_set_slot, "trp_knight_24_3", slot_troop_banner_scene_prop, "spr_banner_f13"),
    (troop_set_slot, "trp_knight_24_4", slot_troop_banner_scene_prop, "spr_banner_f14"),
    (troop_set_slot, "trp_knight_24_5", slot_troop_banner_scene_prop, "spr_banner_f15"),
    (troop_set_slot, "trp_knight_24_6", slot_troop_banner_scene_prop, "spr_banner_f10"),
    (troop_set_slot, "trp_knight_24_7", slot_troop_banner_scene_prop, "spr_banner_f10"),
    (troop_set_slot, "trp_knight_24_8", slot_troop_banner_scene_prop, "spr_banner_f10"),
    (troop_set_slot, "trp_knight_24_9", slot_troop_banner_scene_prop, "spr_banner_f10"),
    (troop_set_slot, "trp_knight_24_10", slot_troop_banner_scene_prop, "spr_banner_f10"),
    (troop_set_slot, "trp_kingdom_23_lord", slot_troop_banner_scene_prop, "spr_banner_v05"),
    (troop_set_slot, "trp_knight_23_1", slot_troop_banner_scene_prop, "spr_banner_v07"),
    (troop_set_slot, "trp_knight_23_2", slot_troop_banner_scene_prop, "spr_banner_v08"),
    (troop_set_slot, "trp_knight_23_3", slot_troop_banner_scene_prop, "spr_banner_x20"),
    (troop_set_slot, "trp_knight_23_4", slot_troop_banner_scene_prop, "spr_banner_v02"),
    (troop_set_slot, "trp_knight_23_5", slot_troop_banner_scene_prop, "spr_banner_v03"),
    (troop_set_slot, "trp_knight_23_6", slot_troop_banner_scene_prop, "spr_banner_v06"),
    (troop_set_slot, "trp_knight_23_7", slot_troop_banner_scene_prop, "spr_banner_v04"),
    (troop_set_slot, "trp_knight_23_8", slot_troop_banner_scene_prop, "spr_banner_v13"),
    (troop_set_slot, "trp_knight_23_9", slot_troop_banner_scene_prop, "spr_banner_x21"),
    (troop_set_slot, "trp_knight_23_10", slot_troop_banner_scene_prop, "spr_banner_v10"),
    (troop_set_slot, "trp_knight_23_11", slot_troop_banner_scene_prop, "spr_banner_v14"),
    (troop_set_slot, "trp_knight_23_12", slot_troop_banner_scene_prop, "spr_banner_v15"),
    (troop_set_slot, "trp_knight_23_13", slot_troop_banner_scene_prop, "spr_banner_v20"),
    (troop_set_slot, "trp_knight_23_14", slot_troop_banner_scene_prop, "spr_banner_x08"),
    (troop_set_slot, "trp_knight_23_15", slot_troop_banner_scene_prop, "spr_banner_x08"),
    (troop_set_slot, "trp_kingdom_22_lord", slot_troop_banner_scene_prop, "spr_banner_x07"),
    (troop_set_slot, "trp_knight_22_1", slot_troop_banner_scene_prop, "spr_banner_x07"),
    (troop_set_slot, "trp_knight_22_2", slot_troop_banner_scene_prop, "spr_banner_x07"),
    (troop_set_slot, "trp_knight_22_3", slot_troop_banner_scene_prop, "spr_banner_x07"),
    (troop_set_slot, "trp_knight_22_4", slot_troop_banner_scene_prop, "spr_banner_x07"),
    (troop_set_slot, "trp_knight_22_5", slot_troop_banner_scene_prop, "spr_banner_x07"),
    (troop_set_slot, "trp_knight_22_6", slot_troop_banner_scene_prop, "spr_banner_x07"),
    (troop_set_slot, "trp_knight_22_7", slot_troop_banner_scene_prop, "spr_banner_x07"),
    (troop_set_slot, "trp_knight_22_8", slot_troop_banner_scene_prop, "spr_banner_x07"),
    (troop_set_slot, "trp_knight_22_9", slot_troop_banner_scene_prop, "spr_banner_x07"),
    (troop_set_slot, "trp_knight_22_10", slot_troop_banner_scene_prop, "spr_banner_x07"),
    (troop_set_slot, "trp_knight_22_11", slot_troop_banner_scene_prop, "spr_banner_x07"),
    (troop_set_slot, "trp_knight_22_12", slot_troop_banner_scene_prop, "spr_banner_x07"),
    (troop_set_slot, "trp_knight_22_13", slot_troop_banner_scene_prop, "spr_banner_x07"),
    (troop_set_slot, "trp_knight_22_14", slot_troop_banner_scene_prop, "spr_banner_x07"),
    (troop_set_slot, "trp_knight_22_15", slot_troop_banner_scene_prop, "spr_banner_x07"),
    (troop_set_slot, "trp_pope", slot_troop_banner_scene_prop, "spr_banner_f16"),
    (troop_set_slot, "trp_knight_21_1", slot_troop_banner_scene_prop, "spr_banner_f17"),
    (troop_set_slot, "trp_knight_21_2", slot_troop_banner_scene_prop, "spr_banner_o09"),
    (troop_set_slot, "trp_knight_21_3", slot_troop_banner_scene_prop, "spr_banner_f19"),
    (troop_set_slot, "trp_knight_21_4", slot_troop_banner_scene_prop, "spr_banner_f20"),
    (troop_set_slot, "trp_knight_21_5", slot_troop_banner_scene_prop, "spr_banner_f21"),
    (troop_set_slot, "trp_kingdom_20_lord", slot_troop_banner_scene_prop, "spr_banner_x01"),
    (troop_set_slot, "trp_knight_20_1", slot_troop_banner_scene_prop, "spr_banner_x02"),
    (troop_set_slot, "trp_knight_20_2", slot_troop_banner_scene_prop, "spr_banner_x01"),
    (troop_set_slot, "trp_knight_20_3", slot_troop_banner_scene_prop, "spr_banner_x02"),
    (troop_set_slot, "trp_knight_20_4", slot_troop_banner_scene_prop, "spr_banner_x01"),
    (troop_set_slot, "trp_knight_20_5", slot_troop_banner_scene_prop, "spr_banner_x02"),
    (troop_set_slot, "trp_knight_20_6", slot_troop_banner_scene_prop, "spr_banner_x01"),
    (troop_set_slot, "trp_knight_20_7", slot_troop_banner_scene_prop, "spr_banner_x02"),
    (troop_set_slot, "trp_knight_20_8", slot_troop_banner_scene_prop, "spr_banner_x01"),
    (troop_set_slot, "trp_knight_20_9", slot_troop_banner_scene_prop, "spr_banner_x02"),
    (troop_set_slot, "trp_knight_20_10", slot_troop_banner_scene_prop, "spr_banner_x01"),
    (troop_set_slot, "trp_knight_20_11", slot_troop_banner_scene_prop, "spr_banner_x02"),
    (troop_set_slot, "trp_knight_20_12", slot_troop_banner_scene_prop, "spr_banner_x01"),
    (troop_set_slot, "trp_knight_20_13", slot_troop_banner_scene_prop, "spr_banner_x02"),
    (troop_set_slot, "trp_knight_20_14", slot_troop_banner_scene_prop, "spr_banner_x01"),
    (troop_set_slot, "trp_knight_20_15", slot_troop_banner_scene_prop, "spr_banner_x02"),
    (troop_set_slot, "trp_knight_20_16", slot_troop_banner_scene_prop, "spr_banner_x01"),
    (troop_set_slot, "trp_knight_20_17", slot_troop_banner_scene_prop, "spr_banner_x02"),
    (troop_set_slot, "trp_knight_20_18", slot_troop_banner_scene_prop, "spr_banner_x01"),
    (troop_set_slot, "trp_knight_20_19", slot_troop_banner_scene_prop, "spr_banner_x02"),
    (troop_set_slot, "trp_knight_20_20", slot_troop_banner_scene_prop, "spr_banner_x01"),
    (troop_set_slot, "trp_kingdom_19_lord", slot_troop_banner_scene_prop, "spr_banner_x04"),
    (troop_set_slot, "trp_knight_19_1", slot_troop_banner_scene_prop, "spr_banner_x04"),
    (troop_set_slot, "trp_knight_19_2", slot_troop_banner_scene_prop, "spr_banner_x04"),
    (troop_set_slot, "trp_knight_19_3", slot_troop_banner_scene_prop, "spr_banner_x04"),
    (troop_set_slot, "trp_kingdom_18_lord", slot_troop_banner_scene_prop, "spr_banner_f01"),
    (troop_set_slot, "trp_knight_18_1", slot_troop_banner_scene_prop, "spr_banner_f02"),
    (troop_set_slot, "trp_knight_18_2", slot_troop_banner_scene_prop, "spr_banner_f03"),
    (troop_set_slot, "trp_knight_18_3", slot_troop_banner_scene_prop, "spr_banner_f04"),
    (troop_set_slot, "trp_knight_18_4", slot_troop_banner_scene_prop, "spr_banner_f05"),
    (troop_set_slot, "trp_knight_18_5", slot_troop_banner_scene_prop, "spr_banner_f06"),
    (troop_set_slot, "trp_knight_18_6", slot_troop_banner_scene_prop, "spr_banner_f07"),
    (troop_set_slot, "trp_knight_18_7", slot_troop_banner_scene_prop, "spr_banner_f08"),
    (troop_set_slot, "trp_knight_18_8", slot_troop_banner_scene_prop, "spr_banner_f09"),
    (troop_set_slot, "trp_knight_18_9", slot_troop_banner_scene_prop, "spr_banner_e18"),
    (troop_set_slot, "trp_knight_18_10", slot_troop_banner_scene_prop, "spr_banner_f01"),
    (troop_set_slot, "trp_knight_18_11", slot_troop_banner_scene_prop, "spr_banner_f01"),
    (troop_set_slot, "trp_knight_18_12", slot_troop_banner_scene_prop, "spr_banner_f01"),
    (troop_set_slot, "trp_knight_18_13", slot_troop_banner_scene_prop, "spr_banner_f01"),
    (troop_set_slot, "trp_knight_18_14", slot_troop_banner_scene_prop, "spr_banner_f01"),
    (troop_set_slot, "trp_knight_18_15", slot_troop_banner_scene_prop, "spr_banner_f01"),
    (troop_set_slot, "trp_kingdom_17_lord", slot_troop_banner_scene_prop, "spr_banner_e01"),
    (troop_set_slot, "trp_knight_17_1", slot_troop_banner_scene_prop, "spr_banner_e02"),
    (troop_set_slot, "trp_knight_17_2", slot_troop_banner_scene_prop, "spr_banner_e03"),
    (troop_set_slot, "trp_knight_17_3", slot_troop_banner_scene_prop, "spr_banner_e04"),
    (troop_set_slot, "trp_knight_17_4", slot_troop_banner_scene_prop, "spr_banner_e05"),
    (troop_set_slot, "trp_knight_17_5", slot_troop_banner_scene_prop, "spr_banner_e06"),
    (troop_set_slot, "trp_knight_17_6", slot_troop_banner_scene_prop, "spr_banner_e07"),
    (troop_set_slot, "trp_knight_17_7", slot_troop_banner_scene_prop, "spr_banner_e08"),
    (troop_set_slot, "trp_knight_17_8", slot_troop_banner_scene_prop, "spr_banner_e09"),
    (troop_set_slot, "trp_knight_17_9", slot_troop_banner_scene_prop, "spr_banner_e10"),
    (troop_set_slot, "trp_knight_17_10", slot_troop_banner_scene_prop, "spr_banner_e11"),
    (troop_set_slot, "trp_knight_17_11", slot_troop_banner_scene_prop, "spr_banner_e12"),
    (troop_set_slot, "trp_knight_17_12", slot_troop_banner_scene_prop, "spr_banner_e13"),
    (troop_set_slot, "trp_knight_17_13", slot_troop_banner_scene_prop, "spr_banner_e14"),
    (troop_set_slot, "trp_knight_17_14", slot_troop_banner_scene_prop, "spr_banner_e15"),
    (troop_set_slot, "trp_knight_17_15", slot_troop_banner_scene_prop, "spr_banner_e16"),
    (troop_set_slot, "trp_kingdom_16_lord", slot_troop_banner_scene_prop, "spr_banner_e17"),
    (troop_set_slot, "trp_knight_16_1", slot_troop_banner_scene_prop, "spr_banner_e21"),
    (troop_set_slot, "trp_knight_16_2", slot_troop_banner_scene_prop, "spr_banner_e19"),
    (troop_set_slot, "trp_knight_16_3", slot_troop_banner_scene_prop, "spr_banner_e20"),
    (troop_set_slot, "trp_knight_16_4", slot_troop_banner_scene_prop, "spr_banner_e21"),
    (troop_set_slot, "trp_knight_16_5", slot_troop_banner_scene_prop, "spr_banner_e17"),
    (troop_set_slot, "trp_knight_16_6", slot_troop_banner_scene_prop, "spr_banner_e17"),
    (troop_set_slot, "trp_knight_16_7", slot_troop_banner_scene_prop, "spr_banner_e17"),
    (troop_set_slot, "trp_knight_16_8", slot_troop_banner_scene_prop, "spr_banner_e17"),
    (troop_set_slot, "trp_knight_16_9", slot_troop_banner_scene_prop, "spr_banner_e17"),
    (troop_set_slot, "trp_knight_16_10", slot_troop_banner_scene_prop, "spr_banner_e17"),
    (troop_set_slot, "trp_knight_16_11", slot_troop_banner_scene_prop, "spr_banner_e17"),
    (troop_set_slot, "trp_knight_16_12", slot_troop_banner_scene_prop, "spr_banner_e17"),
    (troop_set_slot, "trp_knight_16_13", slot_troop_banner_scene_prop, "spr_banner_e17"),
    (troop_set_slot, "trp_knight_16_14", slot_troop_banner_scene_prop, "spr_banner_e17"),
    (troop_set_slot, "trp_knight_16_15", slot_troop_banner_scene_prop, "spr_banner_e17"),
    (troop_set_slot, "trp_kingdom_15_lord", slot_troop_banner_scene_prop, "spr_banner_v01"),
    (troop_set_slot, "trp_knight_15_1", slot_troop_banner_scene_prop, "spr_banner_i06"),
    (troop_set_slot, "trp_knight_15_2", slot_troop_banner_scene_prop, "spr_banner_i07"),
    (troop_set_slot, "trp_knight_15_3", slot_troop_banner_scene_prop, "spr_banner_i08"),
    (troop_set_slot, "trp_knight_15_4", slot_troop_banner_scene_prop, "spr_banner_i09"),
    (troop_set_slot, "trp_knight_15_5", slot_troop_banner_scene_prop, "spr_banner_v01"),
    (troop_set_slot, "trp_knight_15_6", slot_troop_banner_scene_prop, "spr_banner_v01"),
    (troop_set_slot, "trp_knight_15_7", slot_troop_banner_scene_prop, "spr_banner_v01"),
    (troop_set_slot, "trp_knight_15_8", slot_troop_banner_scene_prop, "spr_banner_v01"),
    (troop_set_slot, "trp_knight_15_9", slot_troop_banner_scene_prop, "spr_banner_v01"),
    (troop_set_slot, "trp_knight_15_10", slot_troop_banner_scene_prop, "spr_banner_v01"),
    (troop_set_slot, "trp_kingdom_14_lord", slot_troop_banner_scene_prop, "spr_banner_u01"),
    (troop_set_slot, "trp_knight_14_1", slot_troop_banner_scene_prop, "spr_banner_u02"),
    (troop_set_slot, "trp_knight_14_2", slot_troop_banner_scene_prop, "spr_banner_u03"),
    (troop_set_slot, "trp_knight_14_3", slot_troop_banner_scene_prop, "spr_banner_u04"),
    (troop_set_slot, "trp_knight_14_4", slot_troop_banner_scene_prop, "spr_banner_u05"),
    (troop_set_slot, "trp_knight_14_5", slot_troop_banner_scene_prop, "spr_banner_u06"),
    (troop_set_slot, "trp_knight_14_6", slot_troop_banner_scene_prop, "spr_banner_u07"),
    (troop_set_slot, "trp_knight_14_7", slot_troop_banner_scene_prop, "spr_banner_u08"),
    (troop_set_slot, "trp_knight_14_8", slot_troop_banner_scene_prop, "spr_banner_u09"),
    (troop_set_slot, "trp_knight_14_9", slot_troop_banner_scene_prop, "spr_banner_u10"),
    (troop_set_slot, "trp_knight_14_10", slot_troop_banner_scene_prop, "spr_banner_u11"),
    (troop_set_slot, "trp_knight_14_11", slot_troop_banner_scene_prop, "spr_banner_u12"),
    (troop_set_slot, "trp_knight_14_12", slot_troop_banner_scene_prop, "spr_banner_u13"),
    (troop_set_slot, "trp_knight_14_13", slot_troop_banner_scene_prop, "spr_banner_u14"),
    (troop_set_slot, "trp_knight_14_14", slot_troop_banner_scene_prop, "spr_banner_u15"),
    (troop_set_slot, "trp_knight_14_15", slot_troop_banner_scene_prop, "spr_banner_u16"),
    (troop_set_slot, "trp_kingdom_13_lord", slot_troop_banner_scene_prop, "spr_banner_t02"),
    (troop_set_slot, "trp_knight_13_1", slot_troop_banner_scene_prop, "spr_banner_t01"),
    (troop_set_slot, "trp_knight_13_2", slot_troop_banner_scene_prop, "spr_banner_t03"),
    (troop_set_slot, "trp_knight_13_3", slot_troop_banner_scene_prop, "spr_banner_t04"),
    (troop_set_slot, "trp_knight_13_4", slot_troop_banner_scene_prop, "spr_banner_t05"),
    (troop_set_slot, "trp_knight_13_5", slot_troop_banner_scene_prop, "spr_banner_t06"),
    (troop_set_slot, "trp_knight_13_6", slot_troop_banner_scene_prop, "spr_banner_t07"),
    (troop_set_slot, "trp_knight_13_7", slot_troop_banner_scene_prop, "spr_banner_t08"),
    (troop_set_slot, "trp_knight_13_8", slot_troop_banner_scene_prop, "spr_banner_t09"),
    (troop_set_slot, "trp_knight_13_9", slot_troop_banner_scene_prop, "spr_banner_t10"),
    (troop_set_slot, "trp_knight_13_10", slot_troop_banner_scene_prop, "spr_banner_t11"),
    (troop_set_slot, "trp_kingdom_13_pretender", slot_troop_banner_scene_prop, "spr_banner_t01"),
    (troop_set_slot, "trp_kingdom_12_lord", slot_troop_banner_scene_prop, "spr_banner_s01"),
    (troop_set_slot, "trp_knight_12_1", slot_troop_banner_scene_prop, "spr_banner_s02"),
    (troop_set_slot, "trp_knight_12_2", slot_troop_banner_scene_prop, "spr_banner_s03"),
    (troop_set_slot, "trp_knight_12_3", slot_troop_banner_scene_prop, "spr_banner_s04"),
    (troop_set_slot, "trp_knight_12_4", slot_troop_banner_scene_prop, "spr_banner_s05"),
    (troop_set_slot, "trp_knight_12_5", slot_troop_banner_scene_prop, "spr_banner_s06"),
    (troop_set_slot, "trp_knight_12_6", slot_troop_banner_scene_prop, "spr_banner_s07"),
    (troop_set_slot, "trp_knight_12_7", slot_troop_banner_scene_prop, "spr_banner_s08"),
    (troop_set_slot, "trp_knight_12_8", slot_troop_banner_scene_prop, "spr_banner_s09"),
    (troop_set_slot, "trp_knight_12_9", slot_troop_banner_scene_prop, "spr_banner_s10"),
    (troop_set_slot, "trp_knight_12_10", slot_troop_banner_scene_prop, "spr_banner_s11"),
    (troop_set_slot, "trp_kingdom_12_pretender", slot_troop_banner_scene_prop, "spr_banner_s01"),
    (troop_set_slot, "trp_kingdom_11_lord", slot_troop_banner_scene_prop, "spr_banner_r01"),
    (troop_set_slot, "trp_knight_11_1", slot_troop_banner_scene_prop, "spr_banner_r01"),
    (troop_set_slot, "trp_knight_11_2", slot_troop_banner_scene_prop, "spr_banner_r01"),
    (troop_set_slot, "trp_knight_11_3", slot_troop_banner_scene_prop, "spr_banner_r01"),
    (troop_set_slot, "trp_knight_11_4", slot_troop_banner_scene_prop, "spr_banner_r01"),
    (troop_set_slot, "trp_knight_11_5", slot_troop_banner_scene_prop, "spr_banner_r01"),
    (troop_set_slot, "trp_knight_11_6", slot_troop_banner_scene_prop, "spr_banner_r01"),
    (troop_set_slot, "trp_knight_11_7", slot_troop_banner_scene_prop, "spr_banner_r01"),
    (troop_set_slot, "trp_knight_11_8", slot_troop_banner_scene_prop, "spr_banner_r01"),
    (troop_set_slot, "trp_knight_11_9", slot_troop_banner_scene_prop, "spr_banner_r01"),
    (troop_set_slot, "trp_knight_11_10", slot_troop_banner_scene_prop, "spr_banner_r01"),
    (troop_set_slot, "trp_knight_11_11", slot_troop_banner_scene_prop, "spr_banner_r01"),
    (troop_set_slot, "trp_knight_11_12", slot_troop_banner_scene_prop, "spr_banner_r01"),
    (troop_set_slot, "trp_knight_11_13", slot_troop_banner_scene_prop, "spr_banner_r01"),
    (troop_set_slot, "trp_knight_11_14", slot_troop_banner_scene_prop, "spr_banner_r01"),
    (troop_set_slot, "trp_knight_11_15", slot_troop_banner_scene_prop, "spr_banner_r01"),
    (troop_set_slot, "trp_kingdom_10_lord", slot_troop_banner_scene_prop, "spr_banner_g01"),
    (troop_set_slot, "trp_knight_10_1", slot_troop_banner_scene_prop, "spr_banner_g02"),
    (troop_set_slot, "trp_knight_10_2", slot_troop_banner_scene_prop, "spr_banner_g03"),
    (troop_set_slot, "trp_knight_10_3", slot_troop_banner_scene_prop, "spr_banner_g04"),
    (troop_set_slot, "trp_knight_10_4", slot_troop_banner_scene_prop, "spr_banner_g05"),
    (troop_set_slot, "trp_knight_10_5", slot_troop_banner_scene_prop, "spr_banner_g06"),
    (troop_set_slot, "trp_knight_10_6", slot_troop_banner_scene_prop, "spr_banner_g07"),
    (troop_set_slot, "trp_knight_10_7", slot_troop_banner_scene_prop, "spr_banner_g08"),
    (troop_set_slot, "trp_knight_10_8", slot_troop_banner_scene_prop, "spr_banner_g09"),
    (troop_set_slot, "trp_knight_10_9", slot_troop_banner_scene_prop, "spr_banner_g10"),
    (troop_set_slot, "trp_knight_10_10", slot_troop_banner_scene_prop, "spr_banner_g11"),
    (troop_set_slot, "trp_knight_10_11", slot_troop_banner_scene_prop, "spr_banner_g12"),
    (troop_set_slot, "trp_knight_10_12", slot_troop_banner_scene_prop, "spr_banner_g13"),
    (troop_set_slot, "trp_knight_10_13", slot_troop_banner_scene_prop, "spr_banner_g14"),
    (troop_set_slot, "trp_knight_10_14", slot_troop_banner_scene_prop, "spr_banner_g15"),
    (troop_set_slot, "trp_knight_10_15", slot_troop_banner_scene_prop, "spr_banner_g16"),
    (troop_set_slot, "trp_knight_10_16", slot_troop_banner_scene_prop, "spr_banner_g17"),
    (troop_set_slot, "trp_knight_10_17", slot_troop_banner_scene_prop, "spr_banner_g18"),
    (troop_set_slot, "trp_knight_10_18", slot_troop_banner_scene_prop, "spr_banner_g19"),
    (troop_set_slot, "trp_knight_10_19", slot_troop_banner_scene_prop, "spr_banner_g20"),
    (troop_set_slot, "trp_knight_10_20", slot_troop_banner_scene_prop, "spr_banner_g21"),
    (troop_set_slot, "trp_kingdom_9_lord", slot_troop_banner_scene_prop, "spr_banner_h01"),
    (troop_set_slot, "trp_knight_9_1", slot_troop_banner_scene_prop, "spr_banner_h02"),
    (troop_set_slot, "trp_knight_9_2", slot_troop_banner_scene_prop, "spr_banner_h03"),
    (troop_set_slot, "trp_knight_9_3", slot_troop_banner_scene_prop, "spr_banner_h04"),
    (troop_set_slot, "trp_knight_9_4", slot_troop_banner_scene_prop, "spr_banner_h05"),
    (troop_set_slot, "trp_knight_9_5", slot_troop_banner_scene_prop, "spr_banner_h06"),
    (troop_set_slot, "trp_knight_9_6", slot_troop_banner_scene_prop, "spr_banner_h07"),
    (troop_set_slot, "trp_knight_9_7", slot_troop_banner_scene_prop, "spr_banner_h08"),
    (troop_set_slot, "trp_knight_9_8", slot_troop_banner_scene_prop, "spr_banner_h09"),
    (troop_set_slot, "trp_knight_9_9", slot_troop_banner_scene_prop, "spr_banner_h10"),
    (troop_set_slot, "trp_knight_9_10", slot_troop_banner_scene_prop, "spr_banner_h11"),
    (troop_set_slot, "trp_knight_9_11", slot_troop_banner_scene_prop, "spr_banner_h12"),
    (troop_set_slot, "trp_knight_9_12", slot_troop_banner_scene_prop, "spr_banner_h13"),
    (troop_set_slot, "trp_knight_9_13", slot_troop_banner_scene_prop, "spr_banner_h14"),
    (troop_set_slot, "trp_knight_9_14", slot_troop_banner_scene_prop, "spr_banner_h15"),
    (troop_set_slot, "trp_knight_9_15", slot_troop_banner_scene_prop, "spr_banner_h16"),
    (troop_set_slot, "trp_knight_9_16", slot_troop_banner_scene_prop, "spr_banner_h17"),
    (troop_set_slot, "trp_knight_9_17", slot_troop_banner_scene_prop, "spr_banner_h18"),
    (troop_set_slot, "trp_knight_9_18", slot_troop_banner_scene_prop, "spr_banner_h19"),
    (troop_set_slot, "trp_knight_9_19", slot_troop_banner_scene_prop, "spr_banner_h20"),
    (troop_set_slot, "trp_knight_9_20", slot_troop_banner_scene_prop, "spr_banner_h21"),
    (troop_set_slot, "trp_kingdom_9_pretender", slot_troop_banner_scene_prop, "spr_banner_h01"),
    (troop_set_slot, "trp_kingdom_8_lord", slot_troop_banner_scene_prop, "spr_banner_i01"),
    (troop_set_slot, "trp_knight_8_1", slot_troop_banner_scene_prop, "spr_banner_i02"),
    (troop_set_slot, "trp_knight_8_2", slot_troop_banner_scene_prop, "spr_banner_i03"),
    (troop_set_slot, "trp_knight_8_3", slot_troop_banner_scene_prop, "spr_banner_i04"),
    (troop_set_slot, "trp_knight_8_4", slot_troop_banner_scene_prop, "spr_banner_i05"),
    (troop_set_slot, "trp_knight_8_5", slot_troop_banner_scene_prop, "spr_banner_i06"),
    (troop_set_slot, "trp_knight_8_6", slot_troop_banner_scene_prop, "spr_banner_i07"),
    (troop_set_slot, "trp_knight_8_7", slot_troop_banner_scene_prop, "spr_banner_i08"),
    (troop_set_slot, "trp_knight_8_8", slot_troop_banner_scene_prop, "spr_banner_i09"),
    (troop_set_slot, "trp_knight_8_9", slot_troop_banner_scene_prop, "spr_banner_i10"),
    (troop_set_slot, "trp_knight_8_10", slot_troop_banner_scene_prop, "spr_banner_i11"),
    (troop_set_slot, "trp_kingdom_7_lord", slot_troop_banner_scene_prop, "spr_banner_j01"),
    (troop_set_slot, "trp_knight_7_1", slot_troop_banner_scene_prop, "spr_banner_j02"),
    (troop_set_slot, "trp_knight_7_2", slot_troop_banner_scene_prop, "spr_banner_j03"),
    (troop_set_slot, "trp_knight_7_3", slot_troop_banner_scene_prop, "spr_banner_j04"),
    (troop_set_slot, "trp_knight_7_4", slot_troop_banner_scene_prop, "spr_banner_j05"),
    (troop_set_slot, "trp_knight_7_5", slot_troop_banner_scene_prop, "spr_banner_j06"),
    (troop_set_slot, "trp_knight_7_6", slot_troop_banner_scene_prop, "spr_banner_j07"),
    (troop_set_slot, "trp_knight_7_7", slot_troop_banner_scene_prop, "spr_banner_j08"),
    (troop_set_slot, "trp_knight_7_8", slot_troop_banner_scene_prop, "spr_banner_j09"),
    (troop_set_slot, "trp_knight_7_9", slot_troop_banner_scene_prop, "spr_banner_j10"),
    (troop_set_slot, "trp_knight_7_10", slot_troop_banner_scene_prop, "spr_banner_j11"),
    (troop_set_slot, "trp_knight_7_11", slot_troop_banner_scene_prop, "spr_banner_j12"),
    (troop_set_slot, "trp_knight_7_12", slot_troop_banner_scene_prop, "spr_banner_j13"),
    (troop_set_slot, "trp_knight_7_13", slot_troop_banner_scene_prop, "spr_banner_j14"),
    (troop_set_slot, "trp_knight_7_14", slot_troop_banner_scene_prop, "spr_banner_j15"),
    (troop_set_slot, "trp_knight_7_15", slot_troop_banner_scene_prop, "spr_banner_j16"),
    (troop_set_slot, "trp_kingdom_6_lord", slot_troop_banner_scene_prop, "spr_banner_k01"),
    (troop_set_slot, "trp_knight_6_1", slot_troop_banner_scene_prop, "spr_banner_k02"),
    (troop_set_slot, "trp_knight_6_2", slot_troop_banner_scene_prop, "spr_banner_k03"),
    (troop_set_slot, "trp_knight_6_3", slot_troop_banner_scene_prop, "spr_banner_k04"),
    (troop_set_slot, "trp_knight_6_4", slot_troop_banner_scene_prop, "spr_banner_k05"),
    (troop_set_slot, "trp_knight_6_5", slot_troop_banner_scene_prop, "spr_banner_k06"),
    (troop_set_slot, "trp_knight_6_6", slot_troop_banner_scene_prop, "spr_banner_k07"),
    (troop_set_slot, "trp_knight_6_7", slot_troop_banner_scene_prop, "spr_banner_k08"),
    (troop_set_slot, "trp_knight_6_8", slot_troop_banner_scene_prop, "spr_banner_k09"),
    (troop_set_slot, "trp_knight_6_9", slot_troop_banner_scene_prop, "spr_banner_k10"),
    (troop_set_slot, "trp_knight_6_10", slot_troop_banner_scene_prop, "spr_banner_k11"),
    (troop_set_slot, "trp_knight_6_11", slot_troop_banner_scene_prop, "spr_banner_k12"),
    (troop_set_slot, "trp_knight_6_12", slot_troop_banner_scene_prop, "spr_banner_k13"),
    (troop_set_slot, "trp_knight_6_13", slot_troop_banner_scene_prop, "spr_banner_k14"),
    (troop_set_slot, "trp_knight_6_14", slot_troop_banner_scene_prop, "spr_banner_k15"),
    (troop_set_slot, "trp_knight_6_15", slot_troop_banner_scene_prop, "spr_banner_k16"),
    (troop_set_slot, "trp_knight_6_16", slot_troop_banner_scene_prop, "spr_banner_k17"),
    (troop_set_slot, "trp_knight_6_17", slot_troop_banner_scene_prop, "spr_banner_k18"),
    (troop_set_slot, "trp_knight_6_18", slot_troop_banner_scene_prop, "spr_banner_k19"),
    (troop_set_slot, "trp_knight_6_19", slot_troop_banner_scene_prop, "spr_banner_k20"),
    (troop_set_slot, "trp_knight_6_20", slot_troop_banner_scene_prop, "spr_banner_k21"),
    (troop_set_slot, "trp_kingdom_5_lord", slot_troop_banner_scene_prop, "spr_banner_l01"),
    (troop_set_slot, "trp_knight_5_1", slot_troop_banner_scene_prop, "spr_banner_l02"),
    (troop_set_slot, "trp_knight_5_2", slot_troop_banner_scene_prop, "spr_banner_l16"),
    (troop_set_slot, "trp_knight_5_3", slot_troop_banner_scene_prop, "spr_banner_l07"),
    (troop_set_slot, "trp_knight_5_4", slot_troop_banner_scene_prop, "spr_banner_l15"),
    (troop_set_slot, "trp_knight_5_5", slot_troop_banner_scene_prop, "spr_banner_l10"),
    (troop_set_slot, "trp_knight_5_6", slot_troop_banner_scene_prop, "spr_banner_l03"),
    (troop_set_slot, "trp_knight_5_7", slot_troop_banner_scene_prop, "spr_banner_l09"),
    (troop_set_slot, "trp_knight_5_8", slot_troop_banner_scene_prop, "spr_banner_l11"),
    (troop_set_slot, "trp_knight_5_9", slot_troop_banner_scene_prop, "spr_banner_l14"),
    (troop_set_slot, "trp_knight_5_10", slot_troop_banner_scene_prop, "spr_banner_l02"),
    (troop_set_slot, "trp_knight_5_11", slot_troop_banner_scene_prop, "spr_banner_l09"),
    (troop_set_slot, "trp_knight_5_12", slot_troop_banner_scene_prop, "spr_banner_l06"),
    (troop_set_slot, "trp_knight_5_13", slot_troop_banner_scene_prop, "spr_banner_l08"),
    (troop_set_slot, "trp_knight_5_14", slot_troop_banner_scene_prop, "spr_banner_l17"),
    (troop_set_slot, "trp_knight_5_15", slot_troop_banner_scene_prop, "spr_banner_l06"),
    (troop_set_slot, "trp_kingdom_4_lord", slot_troop_banner_scene_prop, "spr_banner_m01"),
    (troop_set_slot, "trp_knight_4_1", slot_troop_banner_scene_prop, "spr_banner_m02"),
    (troop_set_slot, "trp_knight_4_2", slot_troop_banner_scene_prop, "spr_banner_m03"),
    (troop_set_slot, "trp_knight_4_3", slot_troop_banner_scene_prop, "spr_banner_m04"),
    (troop_set_slot, "trp_knight_4_4", slot_troop_banner_scene_prop, "spr_banner_m05"),
    (troop_set_slot, "trp_knight_4_5", slot_troop_banner_scene_prop, "spr_banner_m06"),
    (troop_set_slot, "trp_knight_4_6", slot_troop_banner_scene_prop, "spr_banner_m07"),
    (troop_set_slot, "trp_knight_4_7", slot_troop_banner_scene_prop, "spr_banner_m08"),
    (troop_set_slot, "trp_knight_4_8", slot_troop_banner_scene_prop, "spr_banner_m09"),
    (troop_set_slot, "trp_knight_4_9", slot_troop_banner_scene_prop, "spr_banner_m10"),
    (troop_set_slot, "trp_knight_4_10", slot_troop_banner_scene_prop, "spr_banner_m11"),
    (troop_set_slot, "trp_knight_4_11", slot_troop_banner_scene_prop, "spr_banner_m12"),
    (troop_set_slot, "trp_knight_4_12", slot_troop_banner_scene_prop, "spr_banner_m13"),
    (troop_set_slot, "trp_knight_4_13", slot_troop_banner_scene_prop, "spr_banner_m14"),
    (troop_set_slot, "trp_knight_4_14", slot_troop_banner_scene_prop, "spr_banner_m15"),
    (troop_set_slot, "trp_knight_4_15", slot_troop_banner_scene_prop, "spr_banner_m16"),
    (troop_set_slot, "trp_kingdom_4_pretender", slot_troop_banner_scene_prop, "spr_banner_m01"),
    (troop_set_slot, "trp_kingdom_3_lord", slot_troop_banner_scene_prop, "spr_banner_n01"),
    (troop_set_slot, "trp_knight_3_1", slot_troop_banner_scene_prop, "spr_banner_n02"),
    (troop_set_slot, "trp_knight_3_2", slot_troop_banner_scene_prop, "spr_banner_n03"),
    (troop_set_slot, "trp_knight_3_3", slot_troop_banner_scene_prop, "spr_banner_n04"),
    (troop_set_slot, "trp_knight_3_4", slot_troop_banner_scene_prop, "spr_banner_n05"),
    (troop_set_slot, "trp_knight_3_5", slot_troop_banner_scene_prop, "spr_banner_n06"),
    (troop_set_slot, "trp_knight_3_6", slot_troop_banner_scene_prop, "spr_banner_n07"),
    (troop_set_slot, "trp_knight_3_7", slot_troop_banner_scene_prop, "spr_banner_n08"),
    (troop_set_slot, "trp_knight_3_8", slot_troop_banner_scene_prop, "spr_banner_n09"),
    (troop_set_slot, "trp_knight_3_9", slot_troop_banner_scene_prop, "spr_banner_n10"),
    (troop_set_slot, "trp_knight_3_10", slot_troop_banner_scene_prop, "spr_banner_n11"),
    (troop_set_slot, "trp_knight_3_11", slot_troop_banner_scene_prop, "spr_banner_n12"),
    (troop_set_slot, "trp_knight_3_12", slot_troop_banner_scene_prop, "spr_banner_n13"),
    (troop_set_slot, "trp_knight_3_13", slot_troop_banner_scene_prop, "spr_banner_n14"),
    (troop_set_slot, "trp_knight_3_14", slot_troop_banner_scene_prop, "spr_banner_n15"),
    (troop_set_slot, "trp_knight_3_15", slot_troop_banner_scene_prop, "spr_banner_n16"),
    (troop_set_slot, "trp_knight_3_16", slot_troop_banner_scene_prop, "spr_banner_n17"),
    (troop_set_slot, "trp_knight_3_17", slot_troop_banner_scene_prop, "spr_banner_n18"),
    (troop_set_slot, "trp_knight_3_18", slot_troop_banner_scene_prop, "spr_banner_n19"),
    (troop_set_slot, "trp_knight_3_19", slot_troop_banner_scene_prop, "spr_banner_n20"),
    (troop_set_slot, "trp_knight_3_20", slot_troop_banner_scene_prop, "spr_banner_o21"),
    (troop_set_slot, "trp_kingdom_2_lord", slot_troop_banner_scene_prop, "spr_banner_p01"),
    (troop_set_slot, "trp_knight_2_1", slot_troop_banner_scene_prop, "spr_banner_p02"),
    (troop_set_slot, "trp_knight_2_2", slot_troop_banner_scene_prop, "spr_banner_p03"),
    (troop_set_slot, "trp_knight_2_3", slot_troop_banner_scene_prop, "spr_banner_p04"),
    (troop_set_slot, "trp_knight_2_4", slot_troop_banner_scene_prop, "spr_banner_p05"),
    (troop_set_slot, "trp_knight_2_5", slot_troop_banner_scene_prop, "spr_banner_p06"),
    (troop_set_slot, "trp_knight_2_6", slot_troop_banner_scene_prop, "spr_banner_p07"),
    (troop_set_slot, "trp_knight_2_7", slot_troop_banner_scene_prop, "spr_banner_p08"),
    (troop_set_slot, "trp_knight_2_8", slot_troop_banner_scene_prop, "spr_banner_p09"),
    (troop_set_slot, "trp_knight_2_9", slot_troop_banner_scene_prop, "spr_banner_p10"),
    (troop_set_slot, "trp_knight_2_10", slot_troop_banner_scene_prop, "spr_banner_p11"),
    (troop_set_slot, "trp_knight_2_11", slot_troop_banner_scene_prop, "spr_banner_i12"),
    (troop_set_slot, "trp_knight_2_12", slot_troop_banner_scene_prop, "spr_banner_i13"),
    (troop_set_slot, "trp_knight_2_13", slot_troop_banner_scene_prop, "spr_banner_i14"),
    (troop_set_slot, "trp_knight_2_14", slot_troop_banner_scene_prop, "spr_banner_i15"),
    (troop_set_slot, "trp_knight_2_15", slot_troop_banner_scene_prop, "spr_banner_i16"),
    (troop_set_slot, "trp_kingdom_1_lord", slot_troop_banner_scene_prop, "spr_banner_q01"),
    (troop_set_slot, "trp_knight_1_1", slot_troop_banner_scene_prop, "spr_banner_q02"),
    (troop_set_slot, "trp_knight_1_2", slot_troop_banner_scene_prop, "spr_banner_q03"),
    (troop_set_slot, "trp_knight_1_3", slot_troop_banner_scene_prop, "spr_banner_q04"),
    (troop_set_slot, "trp_knight_1_4", slot_troop_banner_scene_prop, "spr_banner_q05"),
    (troop_set_slot, "trp_knight_1_5", slot_troop_banner_scene_prop, "spr_banner_q06"),
    (troop_set_slot, "trp_knight_1_6", slot_troop_banner_scene_prop, "spr_banner_q07"),
    (troop_set_slot, "trp_knight_1_7", slot_troop_banner_scene_prop, "spr_banner_q08"),
    (troop_set_slot, "trp_knight_1_8", slot_troop_banner_scene_prop, "spr_banner_q09"),
    (troop_set_slot, "trp_knight_1_9", slot_troop_banner_scene_prop, "spr_banner_q10"),
    (troop_set_slot, "trp_knight_1_10", slot_troop_banner_scene_prop, "spr_banner_q11"),
    (troop_set_slot, "trp_knight_1_11", slot_troop_banner_scene_prop, "spr_banner_q12"),
    (troop_set_slot, "trp_knight_1_12", slot_troop_banner_scene_prop, "spr_banner_q13"),
    (troop_set_slot, "trp_knight_1_13", slot_troop_banner_scene_prop, "spr_banner_q14"),
    (troop_set_slot, "trp_knight_1_14", slot_troop_banner_scene_prop, "spr_banner_q15"),
    (troop_set_slot, "trp_knight_1_15", slot_troop_banner_scene_prop, "spr_banner_q16"),
    (call_script, "script_give_center_to_faction_aux", "p_town_5_1", "fac_kingdom_5"),
    (call_script, "script_give_center_to_faction_aux", "p_town_5_2", "fac_kingdom_5"),
    (call_script, "script_give_center_to_faction_aux", "p_town_5_3", "fac_kingdom_5"),
    (call_script, "script_give_center_to_faction_aux", "p_town_5_4", "fac_kingdom_5"),
    (call_script, "script_give_center_to_faction_aux", "p_town_1_1", "fac_kingdom_1"),
    (call_script, "script_give_center_to_faction_aux", "p_town_1_2", "fac_kingdom_1"),
    (call_script, "script_give_center_to_faction_aux", "p_town_1_3", "fac_kingdom_1"),
    (call_script, "script_give_center_to_faction_aux", "p_town_1_4", "fac_kingdom_1"),
    (call_script, "script_give_center_to_faction_aux", "p_town_2_1", "fac_kingdom_2"),
    (call_script, "script_give_center_to_faction_aux", "p_town_2_2", "fac_kingdom_2"),
    (call_script, "script_give_center_to_faction_aux", "p_town_2_3", "fac_kingdom_2"),
    (call_script, "script_give_center_to_faction_aux", "p_town_2_4", "fac_kingdom_2"),
    (call_script, "script_give_center_to_faction_aux", "p_town_8_1", "fac_kingdom_8"),
    (call_script, "script_give_center_to_faction_aux", "p_town_8_2", "fac_kingdom_8"),
    (call_script, "script_give_center_to_faction_aux", "p_town_3_1", "fac_kingdom_3"),
    (call_script, "script_give_center_to_faction_aux", "p_town_3_2", "fac_kingdom_3"),
    (call_script, "script_give_center_to_faction_aux", "p_town_3_3", "fac_kingdom_3"),
    (call_script, "script_give_center_to_faction_aux", "p_town_3_4", "fac_kingdom_3"),
    (call_script, "script_give_center_to_faction_aux", "p_town_4_1", "fac_kingdom_4"),
    (call_script, "script_give_center_to_faction_aux", "p_town_4_2", "fac_kingdom_4"),
    (call_script, "script_give_center_to_faction_aux", "p_town_4_3", "fac_kingdom_4"),
    (call_script, "script_give_center_to_faction_aux", "p_town_4_4", "fac_kingdom_4"),
    (call_script, "script_give_center_to_faction_aux", "p_town_14_1", "fac_kingdom_14"),
    (call_script, "script_give_center_to_faction_aux", "p_town_14_2", "fac_kingdom_14"),
    (call_script, "script_give_center_to_faction_aux", "p_town_14_3", "fac_kingdom_14"),
    (call_script, "script_give_center_to_faction_aux", "p_town_11_1", "fac_kingdom_11"),
    (call_script, "script_give_center_to_faction_aux", "p_town_11_2", "fac_kingdom_11"),
    (call_script, "script_give_center_to_faction_aux", "p_town_11_3", "fac_kingdom_11"),
    (call_script, "script_give_center_to_faction_aux", "p_town_7_1", "fac_kingdom_7"),
    (call_script, "script_give_center_to_faction_aux", "p_town_7_2", "fac_kingdom_7"),
    (call_script, "script_give_center_to_faction_aux", "p_town_7_3", "fac_kingdom_7"),
    (call_script, "script_give_center_to_faction_aux", "p_town_7_4", "fac_kingdom_7"),
    (call_script, "script_give_center_to_faction_aux", "p_town_6_1", "fac_kingdom_6"),
    (call_script, "script_give_center_to_faction_aux", "p_town_6_2", "fac_kingdom_6"),
    (call_script, "script_give_center_to_faction_aux", "p_town_6_3", "fac_kingdom_6"),
    (call_script, "script_give_center_to_faction_aux", "p_town_6_5", "fac_kingdom_6"),
    (call_script, "script_give_center_to_faction_aux", "p_town_6_6", "fac_kingdom_6"),
    (call_script, "script_give_center_to_faction_aux", "p_town_6_4", "fac_kingdom_6"),
    (call_script, "script_give_center_to_faction_aux", "p_town_9_1", "fac_kingdom_9"),
    (call_script, "script_give_center_to_faction_aux", "p_town_9_2", "fac_kingdom_9"),
    (call_script, "script_give_center_to_faction_aux", "p_town_9_3", "fac_kingdom_9"),
    (call_script, "script_give_center_to_faction_aux", "p_town_9_4", "fac_kingdom_9"),
    (call_script, "script_give_center_to_faction_aux", "p_town_9_6", "fac_kingdom_9"),
    (call_script, "script_give_center_to_faction_aux", "p_town_9_5", "fac_kingdom_9"),
    (call_script, "script_give_center_to_faction_aux", "p_town_10_1", "fac_kingdom_10"),
    (call_script, "script_give_center_to_faction_aux", "p_town_10_2", "fac_kingdom_10"),
    (call_script, "script_give_center_to_faction_aux", "p_town_10_3", "fac_kingdom_10"),
    (call_script, "script_give_center_to_faction_aux", "p_town_10_4", "fac_kingdom_10"),
    (call_script, "script_give_center_to_faction_aux", "p_town_10_5", "fac_kingdom_10"),
    (call_script, "script_give_center_to_faction_aux", "p_town_10_6", "fac_kingdom_10"),
    (call_script, "script_give_center_to_faction_aux", "p_town_12_1", "fac_kingdom_12"),
    (call_script, "script_give_center_to_faction_aux", "p_town_12_2", "fac_kingdom_12"),
    (call_script, "script_give_center_to_faction_aux", "p_town_13_1", "fac_kingdom_13"),
    (call_script, "script_give_center_to_faction_aux", "p_town_13_2", "fac_kingdom_13"),
    (call_script, "script_give_center_to_faction_aux", "p_town_15_1", "fac_kingdom_15"),
    (call_script, "script_give_center_to_faction_aux", "p_town_15_2", "fac_kingdom_15"),
    (call_script, "script_give_center_to_faction_aux", "p_town_15_3", "fac_kingdom_15"),
    (call_script, "script_give_center_to_faction_aux", "p_town_16_1", "fac_kingdom_16"),
    (call_script, "script_give_center_to_faction_aux", "p_town_16_2", "fac_kingdom_16"),
    (call_script, "script_give_center_to_faction_aux", "p_town_17_1", "fac_kingdom_17"),
    (call_script, "script_give_center_to_faction_aux", "p_town_17_2", "fac_kingdom_17"),
    (call_script, "script_give_center_to_faction_aux", "p_town_18_1", "fac_kingdom_18"),
    (call_script, "script_give_center_to_faction_aux", "p_town_18_2", "fac_kingdom_18"),
    (call_script, "script_give_center_to_faction_aux", "p_town_19_1", "fac_kingdom_19"),
    (call_script, "script_give_center_to_faction_aux", "p_town_20_1", "fac_kingdom_20"),
    (call_script, "script_give_center_to_faction_aux", "p_town_20_2", "fac_kingdom_20"),
    (call_script, "script_give_center_to_faction_aux", "p_town_21_1", "fac_papacy"),
    (call_script, "script_give_center_to_faction_aux", "p_town_21_2", "fac_papacy"),
    (call_script, "script_give_center_to_faction_aux", "p_town_22_1", "fac_kingdom_22"),
    (call_script, "script_give_center_to_faction_aux", "p_town_22_2", "fac_kingdom_22"),
    (call_script, "script_give_center_to_faction_aux", "p_town_22_3", "fac_kingdom_22"),
    (call_script, "script_give_center_to_faction_aux", "p_town_22_4", "fac_kingdom_22"),
    (call_script, "script_give_center_to_faction_aux", "p_town_23_1", "fac_kingdom_23"),
    (call_script, "script_give_center_to_faction_aux", "p_town_23_2", "fac_kingdom_23"),
    (call_script, "script_give_center_to_faction_aux", "p_town_23_4", "fac_kingdom_23"),
    (call_script, "script_give_center_to_faction_aux", "p_town_23_5", "fac_kingdom_23"),
    (call_script, "script_give_center_to_faction_aux", "p_town_23_6", "fac_kingdom_23"),
    (call_script, "script_give_center_to_faction_aux", "p_town_24_1", "fac_kingdom_24"),
    (call_script, "script_give_center_to_faction_aux", "p_town_24_2", "fac_kingdom_24"),
    (call_script, "script_give_center_to_faction_aux", "p_town_25_1", "fac_kingdom_25"),
    (call_script, "script_give_center_to_faction_aux", "p_town_25_2", "fac_kingdom_25"),
    (call_script, "script_give_center_to_faction_aux", "p_town_25_3", "fac_kingdom_25"),
    (call_script, "script_give_center_to_faction_aux", "p_town_25_4", "fac_kingdom_25"),
    (call_script, "script_give_center_to_faction_aux", "p_town_25_5", "fac_kingdom_25"),
    (call_script, "script_give_center_to_faction_aux", "p_town_26_1", "fac_kingdom_26"),
    (call_script, "script_give_center_to_faction_aux", "p_town_26_2", "fac_kingdom_26"),
    (call_script, "script_give_center_to_faction_aux", "p_town_27_1", "fac_kingdom_27"),
    (call_script, "script_give_center_to_faction_aux", "p_town_27_2", "fac_kingdom_27"),
    (call_script, "script_give_center_to_faction_aux", "p_town_27_3", "fac_kingdom_27"),
    (call_script, "script_give_center_to_faction_aux", "p_town_27_4", "fac_kingdom_27"),
    (call_script, "script_give_center_to_faction_aux", "p_town_28_1", "fac_kingdom_28"),
    (call_script, "script_give_center_to_faction_aux", "p_town_28_2", "fac_kingdom_28"),
    (call_script, "script_give_center_to_faction_aux", "p_town_29_1", "fac_kingdom_29"),
    (call_script, "script_give_center_to_faction_aux", "p_town_29_2", "fac_kingdom_29"),
    (call_script, "script_give_center_to_faction_aux", "p_town_30_1", "fac_kingdom_30"),
    (call_script, "script_give_center_to_faction_aux", "p_town_30_2", "fac_kingdom_30"),
    (call_script, "script_give_center_to_faction_aux", "p_town_31_1", "fac_kingdom_31"),
    (call_script, "script_give_center_to_faction_aux", "p_town_31_2", "fac_kingdom_31"),
    (call_script, "script_give_center_to_faction_aux", "p_town_31_3", "fac_kingdom_31"),
    (call_script, "script_give_center_to_faction_aux", "p_town_32_1", "fac_kingdom_32"),
    (call_script, "script_give_center_to_faction_aux", "p_town_32_2", "fac_kingdom_32"),
    (call_script, "script_give_center_to_faction_aux", "p_town_32_3", "fac_kingdom_32"),
    (call_script, "script_give_center_to_faction_aux", "p_town_37_1", "fac_kingdom_37"),
    (call_script, "script_give_center_to_faction_aux", "p_town_38_1", "fac_kingdom_38"),
    (call_script, "script_give_center_to_faction_aux", "p_town_39_1", "fac_kingdom_39"),
    (call_script, "script_give_center_to_faction_aux", "p_town_40_1", "fac_kingdom_40"),
    (call_script, "script_give_center_to_faction_aux", "p_town_40_2", "fac_kingdom_40"),
    (call_script, "script_give_center_to_faction_aux", "p_town_41_1", "fac_kingdom_41"),
    (call_script, "script_give_center_to_faction_aux", "p_town_41_2", "fac_kingdom_41"),
    (call_script, "script_give_center_to_faction_aux", "p_town_42_1", "fac_kingdom_42"),
    (call_script, "script_give_center_to_faction_aux", "p_town_42_2", "fac_kingdom_42"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_5_1", "fac_kingdom_5"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_5_2", "fac_kingdom_5"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_5_3", "fac_kingdom_5"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_5_4", "fac_kingdom_5"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_5_5", "fac_kingdom_5"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_5_6", "fac_kingdom_5"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_5_7", "fac_kingdom_5"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_5_8", "fac_kingdom_5"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_1_1", "fac_kingdom_1"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_1_2", "fac_kingdom_1"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_1_3", "fac_kingdom_1"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_1_4", "fac_kingdom_1"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_1_5", "fac_kingdom_1"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_1_6", "fac_kingdom_1"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_1_7", "fac_kingdom_1"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_1_8", "fac_kingdom_1"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_1_9", "fac_kingdom_1"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_2_1", "fac_kingdom_2"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_2_2", "fac_kingdom_2"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_2_3", "fac_kingdom_2"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_2_4", "fac_kingdom_2"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_2_5", "fac_kingdom_2"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_2_6", "fac_kingdom_2"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_2_7", "fac_kingdom_2"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_2_8", "fac_kingdom_2"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_3_1", "fac_kingdom_3"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_8_1", "fac_kingdom_8"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_8_2", "fac_kingdom_8"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_8_3", "fac_kingdom_8"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_8_4", "fac_kingdom_8"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_3_2", "fac_kingdom_3"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_3_3", "fac_kingdom_3"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_3_4", "fac_kingdom_3"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_3_5", "fac_kingdom_3"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_3_6", "fac_kingdom_3"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_3_7", "fac_kingdom_3"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_3_8", "fac_kingdom_3"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_7_1", "fac_kingdom_7"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_7_2", "fac_kingdom_7"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_7_3", "fac_kingdom_7"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_7_4", "fac_kingdom_7"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_7_5", "fac_kingdom_7"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_7_6", "fac_kingdom_7"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_7_7", "fac_kingdom_7"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_7_8", "fac_kingdom_7"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_7_9", "fac_kingdom_7"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_6_1", "fac_kingdom_6"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_6_2", "fac_kingdom_6"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_6_3", "fac_kingdom_6"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_6_4", "fac_kingdom_6"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_6_5", "fac_kingdom_6"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_6_6", "fac_kingdom_6"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_6_7", "fac_kingdom_6"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_6_8", "fac_kingdom_6"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_6_9", "fac_kingdom_6"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_6_10", "fac_kingdom_6"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_6_11", "fac_kingdom_6"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_6_12", "fac_kingdom_6"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_6_13", "fac_kingdom_6"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_4_1", "fac_kingdom_4"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_4_2", "fac_kingdom_4"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_4_3", "fac_kingdom_4"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_4_4", "fac_kingdom_4"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_4_5", "fac_kingdom_4"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_4_6", "fac_kingdom_4"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_4_7", "fac_kingdom_4"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_4_8", "fac_kingdom_4"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_11_1", "fac_kingdom_11"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_11_2", "fac_kingdom_11"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_11_3", "fac_kingdom_11"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_11_4", "fac_kingdom_11"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_11_5", "fac_kingdom_11"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_11_6", "fac_kingdom_11"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_9_1", "fac_kingdom_9"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_9_2", "fac_kingdom_9"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_9_3", "fac_kingdom_9"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_9_4", "fac_kingdom_9"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_9_5", "fac_kingdom_9"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_9_6", "fac_kingdom_9"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_9_7", "fac_kingdom_9"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_9_8", "fac_kingdom_9"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_9_9", "fac_kingdom_9"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_10_1", "fac_kingdom_10"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_10_2", "fac_kingdom_10"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_10_3", "fac_kingdom_10"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_10_4", "fac_kingdom_10"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_10_5", "fac_kingdom_10"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_10_6", "fac_kingdom_10"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_10_7", "fac_kingdom_10"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_10_8", "fac_kingdom_10"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_10_9", "fac_kingdom_10"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_10_10", "fac_kingdom_10"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_10_11", "fac_kingdom_10"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_10_12", "fac_kingdom_10"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_12_1", "fac_kingdom_12"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_12_2", "fac_kingdom_12"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_12_3", "fac_kingdom_12"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_12_4", "fac_kingdom_12"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_13_1", "fac_kingdom_13"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_13_2", "fac_kingdom_13"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_13_3", "fac_kingdom_13"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_13_4", "fac_kingdom_13"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_14_1", "fac_kingdom_14"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_14_2", "fac_kingdom_14"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_14_3", "fac_kingdom_14"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_14_4", "fac_kingdom_14"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_14_5", "fac_kingdom_14"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_14_6", "fac_kingdom_14"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_15_1", "fac_kingdom_15"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_15_2", "fac_kingdom_15"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_15_3", "fac_kingdom_15"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_15_4", "fac_kingdom_15"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_15_5", "fac_kingdom_15"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_15_6", "fac_kingdom_15"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_16_1", "fac_kingdom_16"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_16_2", "fac_kingdom_16"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_16_3", "fac_kingdom_16"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_16_4", "fac_kingdom_16"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_17_1", "fac_kingdom_17"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_17_2", "fac_kingdom_17"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_17_3", "fac_kingdom_17"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_17_4", "fac_kingdom_17"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_17_5", "fac_kingdom_17"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_17_6", "fac_kingdom_17"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_17_7", "fac_kingdom_17"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_18_1", "fac_kingdom_18"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_18_2", "fac_kingdom_18"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_18_3", "fac_kingdom_18"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_18_4", "fac_kingdom_18"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_18_5", "fac_kingdom_18"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_18_6", "fac_kingdom_18"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_19_1", "fac_kingdom_19"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_20_1", "fac_kingdom_20"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_20_2", "fac_kingdom_20"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_20_3", "fac_kingdom_20"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_20_4", "fac_kingdom_20"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_20_5", "fac_kingdom_20"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_20_6", "fac_kingdom_20"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_20_7", "fac_kingdom_20"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_22_1", "fac_kingdom_22"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_22_2", "fac_kingdom_22"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_22_3", "fac_kingdom_22"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_22_4", "fac_kingdom_22"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_22_5", "fac_kingdom_22"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_22_6", "fac_kingdom_22"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_23_1", "fac_kingdom_23"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_23_2", "fac_kingdom_23"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_23_3", "fac_kingdom_23"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_24_1", "fac_kingdom_24"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_24_2", "fac_kingdom_24"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_24_3", "fac_kingdom_24"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_24_4", "fac_kingdom_24"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_25_1", "fac_kingdom_25"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_25_2", "fac_kingdom_25"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_25_3", "fac_kingdom_25"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_25_4", "fac_kingdom_25"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_25_5", "fac_kingdom_25"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_25_6", "fac_kingdom_25"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_25_7", "fac_kingdom_25"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_26_1", "fac_kingdom_26"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_26_2", "fac_kingdom_26"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_26_3", "fac_kingdom_26"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_26_4", "fac_kingdom_26"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_27_1", "fac_kingdom_27"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_27_2", "fac_kingdom_27"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_27_3", "fac_kingdom_27"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_27_4", "fac_kingdom_27"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_27_5", "fac_kingdom_27"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_27_6", "fac_kingdom_27"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_28_1", "fac_kingdom_28"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_28_2", "fac_kingdom_28"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_28_3", "fac_kingdom_28"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_28_4", "fac_kingdom_28"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_28_5", "fac_kingdom_28"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_28_6", "fac_kingdom_28"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_29_1", "fac_kingdom_29"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_29_2", "fac_kingdom_29"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_30_1", "fac_kingdom_30"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_30_2", "fac_kingdom_30"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_30_3", "fac_kingdom_30"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_31_1", "fac_kingdom_31"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_31_2", "fac_kingdom_31"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_32_1", "fac_kingdom_32"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_32_2", "fac_kingdom_32"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_33_1", "fac_kingdom_33"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_33_2", "fac_kingdom_33"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_33_3", "fac_kingdom_33"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_34_1", "fac_kingdom_34"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_34_2", "fac_kingdom_34"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_34_3", "fac_kingdom_34"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_35_1", "fac_kingdom_35"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_35_2", "fac_kingdom_35"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_35_3", "fac_kingdom_35"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_36_1", "fac_kingdom_36"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_36_2", "fac_kingdom_36"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_36_3", "fac_kingdom_36"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_37_1", "fac_kingdom_37"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_38_1", "fac_kingdom_38"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_38_2", "fac_kingdom_38"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_39_1", "fac_kingdom_39"),
    (call_script, "script_give_center_to_faction_aux", "p_castle_39_2", "fac_kingdom_39"),
    (call_script, "script_give_center_to_lord", "p_castle_player", "trp_temp_lord", 0),
    (call_script, "script_give_center_to_lord", "p_village_player", "trp_temp_lord", 0),
    (party_set_slot, "p_village_player", slot_village_bound_center, "p_castle_player"),
    (try_for_range, ":var_1", "p_town_1_1", "p_salt_mine"),
        (store_faction_of_party, ":var_60", ":var_1"),
        (faction_get_slot, ":var_61", ":var_60", slot_faction_culture),
        (party_set_slot, ":var_1", slot_center_culture, ":var_61"),
        (party_set_slot, ":var_1", slot_center_original_faction, ":var_60"),
        (party_set_slot, ":var_1", slot_center_ex_faction, ":var_60"),
    (try_end),
    (try_for_range, ":var_1", "p_town_1_1", "p_salt_mine"),
        (party_slot_eq, ":var_1", slot_center_culture, 11),
        (party_set_slot, ":var_1", slot_center_culture, 15),
    (try_end),
    (try_for_range, ":var_1", "p_town_1_1", "p_salt_mine"),
        (party_slot_eq, ":var_1", slot_center_culture, 27),
        (neg|eq, ":var_1", "p_village_27_11"),
        (neg|eq, ":var_1", "p_village_27_12"),
        (neg|eq, ":var_1", "p_castle_27_5"),
        (party_set_slot, ":var_1", slot_center_culture, 24),
    (try_end),
    (party_set_slot, "p_castle_3_8", slot_center_culture, 26),
    (party_set_slot, "p_village_3_16", slot_center_culture, 26),
    (party_set_slot, "p_castle_player", slot_center_culture, 26),
    (party_set_slot, "p_castle_player", slot_center_original_faction, 34),
    (party_set_slot, "p_castle_player", slot_center_ex_faction, 34),
    (party_set_slot, "p_village_player", slot_center_culture, 26),
    (party_set_slot, "p_village_player", slot_center_original_faction, 34),
    (party_set_slot, "p_village_player", slot_center_ex_faction, 34),
    (party_set_slot, "p_town_3_3", slot_center_culture, "fac_culture_rus"),
    (party_set_slot, "p_town_3_3", slot_center_original_faction, "fac_kingdom_15"),
    (party_set_slot, "p_town_3_2", slot_center_culture, "fac_culture_rus"),
    (party_set_slot, "p_town_3_2", slot_center_original_faction, "fac_kingdom_15"),
    (party_set_slot, "p_town_3_4", slot_center_culture, "fac_culture_rus"),
    (party_set_slot, "p_town_3_4", slot_center_original_faction, "fac_kingdom_15"),
    (party_set_slot, "p_castle_3_1", slot_center_culture, "fac_culture_rus"),
    (party_set_slot, "p_castle_3_2", slot_center_culture, "fac_culture_rus"),
    (party_set_slot, "p_castle_3_3", slot_center_culture, "fac_culture_rus"),
    (party_set_slot, "p_castle_3_4", slot_center_culture, "fac_culture_rus"),
    (party_set_slot, "p_castle_3_5", slot_center_culture, "fac_culture_rus"),
    (party_set_slot, "p_castle_3_6", slot_center_culture, "fac_culture_rus"),
    (party_set_slot, "p_castle_3_7", slot_center_culture, "fac_culture_rus"),
    (party_set_slot, "p_castle_3_1", slot_center_original_faction, "fac_kingdom_15"),
    (party_set_slot, "p_castle_3_2", slot_center_original_faction, "fac_kingdom_15"),
    (party_set_slot, "p_castle_3_3", slot_center_original_faction, "fac_kingdom_15"),
    (party_set_slot, "p_castle_3_4", slot_center_original_faction, "fac_kingdom_15"),
    (party_set_slot, "p_castle_3_5", slot_center_original_faction, "fac_kingdom_15"),
    (party_set_slot, "p_castle_3_6", slot_center_original_faction, "fac_kingdom_15"),
    (party_set_slot, "p_castle_3_7", slot_center_original_faction, "fac_kingdom_15"),
    (party_set_slot, "p_village_3_1", slot_center_culture, "fac_culture_rus"),
    (party_set_slot, "p_village_3_2", slot_center_culture, "fac_culture_rus"),
    (party_set_slot, "p_village_3_3", slot_center_culture, "fac_culture_rus"),
    (party_set_slot, "p_village_3_4", slot_center_culture, "fac_culture_rus"),
    (party_set_slot, "p_village_3_5", slot_center_culture, "fac_culture_rus"),
    (party_set_slot, "p_village_3_6", slot_center_culture, "fac_culture_rus"),
    (party_set_slot, "p_village_3_7", slot_center_culture, "fac_culture_rus"),
    (party_set_slot, "p_village_3_8", slot_center_culture, "fac_culture_rus"),
    (party_set_slot, "p_village_3_9", slot_center_culture, "fac_culture_rus"),
    (party_set_slot, "p_village_3_10", slot_center_culture, "fac_culture_rus"),
    (party_set_slot, "p_village_3_11", slot_center_culture, "fac_culture_rus"),
    (party_set_slot, "p_village_3_14", slot_center_culture, "fac_culture_rus"),
    (party_set_slot, "p_village_3_15", slot_center_culture, "fac_culture_rus"),
    (party_set_slot, "p_village_3_1", slot_center_original_faction, "fac_kingdom_15"),
    (party_set_slot, "p_village_3_2", slot_center_original_faction, "fac_kingdom_15"),
    (party_set_slot, "p_village_3_3", slot_center_original_faction, "fac_kingdom_15"),
    (party_set_slot, "p_village_3_4", slot_center_original_faction, "fac_kingdom_15"),
    (party_set_slot, "p_village_3_5", slot_center_original_faction, "fac_kingdom_15"),
    (party_set_slot, "p_village_3_6", slot_center_original_faction, "fac_kingdom_15"),
    (party_set_slot, "p_village_3_7", slot_center_original_faction, "fac_kingdom_15"),
    (party_set_slot, "p_village_3_8", slot_center_original_faction, "fac_kingdom_15"),
    (party_set_slot, "p_village_3_9", slot_center_original_faction, "fac_kingdom_15"),
    (party_set_slot, "p_village_3_10", slot_center_original_faction, "fac_kingdom_15"),
    (party_set_slot, "p_village_3_11", slot_center_original_faction, "fac_kingdom_15"),
    (party_set_slot, "p_village_3_14", slot_center_original_faction, "fac_kingdom_15"),
    (party_set_slot, "p_village_3_15", slot_center_original_faction, "fac_kingdom_15"),
    (party_set_slot, "p_town_2_4", slot_center_culture, "fac_culture_rus"),
    (party_set_slot, "p_town_2_4", slot_center_original_faction, "fac_kingdom_15"),
    (party_set_slot, "p_castle_2_6", slot_center_culture, "fac_culture_rus"),
    (party_set_slot, "p_castle_2_7", slot_center_culture, "fac_culture_rus"),
    (party_set_slot, "p_castle_2_8", slot_center_culture, "fac_culture_rus"),
    (party_set_slot, "p_castle_2_6", slot_center_original_faction, "fac_kingdom_15"),
    (party_set_slot, "p_castle_2_7", slot_center_original_faction, "fac_kingdom_15"),
    (party_set_slot, "p_castle_2_8", slot_center_original_faction, "fac_kingdom_15"),
    (party_set_slot, "p_village_2_12", slot_center_culture, "fac_culture_rus"),
    (party_set_slot, "p_village_2_13", slot_center_culture, "fac_culture_rus"),
    (party_set_slot, "p_village_2_14", slot_center_culture, "fac_culture_rus"),
    (party_set_slot, "p_village_2_15", slot_center_culture, "fac_culture_rus"),
    (party_set_slot, "p_village_2_16", slot_center_culture, "fac_culture_rus"),
    (party_set_slot, "p_village_2_12", slot_center_original_faction, "fac_kingdom_15"),
    (party_set_slot, "p_village_2_13", slot_center_original_faction, "fac_kingdom_15"),
    (party_set_slot, "p_village_2_14", slot_center_original_faction, "fac_kingdom_15"),
    (party_set_slot, "p_village_2_15", slot_center_original_faction, "fac_kingdom_15"),
    (party_set_slot, "p_village_2_16", slot_center_original_faction, "fac_kingdom_15"),
    (party_set_slot, "p_village_23_5", slot_center_culture, "fac_culture_anatolian_christian"),
    (party_set_slot, "p_village_23_8", slot_center_culture, "fac_culture_anatolian_christian"),
    (party_set_slot, "p_village_27_7", slot_center_culture, "fac_culture_anatolian_christian"),
    (party_set_slot, "p_town_23_2", slot_center_culture, "fac_culture_anatolian_christian"),
    (party_set_slot, "p_castle_27_1", slot_center_culture, "fac_culture_anatolian_christian"),
    (party_set_slot, "p_village_4_6", slot_center_culture, "fac_culture_finnish"),
    (party_set_slot, "p_village_4_5", slot_center_culture, "fac_culture_finnish"),
    (party_set_slot, "p_town_4_3", slot_center_culture, "fac_culture_finnish"),
    (party_set_slot, "p_village_14_4", slot_center_culture, "fac_culture_finnish"),
    (party_set_slot, "p_town_14_2", slot_center_culture, "fac_culture_finnish"),
    (party_set_slot, "p_castle_1_1", slot_center_culture, "fac_culture_finnish"),
    (party_set_slot, "p_castle_1_6", slot_center_culture, "fac_culture_finnish"),
    (party_set_slot, "p_castle_1_3", slot_center_culture, "fac_culture_finnish"),
    (party_set_slot, "p_castle_1_5", slot_center_culture, "fac_culture_finnish"),
    (party_set_slot, "p_village_1_13", slot_center_culture, "fac_culture_finnish"),
    (party_set_slot, "p_village_5_9", slot_center_culture, "fac_culture_mazovian"),
    (party_set_slot, "p_village_5_8", slot_center_culture, "fac_culture_mazovian"),
    (party_set_slot, "p_village_5_11", slot_center_culture, "fac_culture_mazovian"),
    (party_set_slot, "p_village_5_16", slot_center_culture, "fac_culture_mazovian"),
    (party_set_slot, "p_castle_5_1", slot_center_culture, "fac_culture_mazovian"),
    (party_set_slot, "p_castle_5_6", slot_center_culture, "fac_culture_mazovian"),
    (party_set_slot, "p_castle_5_8", slot_center_culture, "fac_culture_mazovian"),
    (party_set_slot, "p_castle_5_2", slot_center_culture, "fac_culture_mazovian"),
    (call_script, "script_give_center_to_lord", "p_town_5_1", "trp_kingdom_5_lord", 0),
    (call_script, "script_give_center_to_lord", "p_town_5_2", "trp_knight_5_9", 0),
    (call_script, "script_give_center_to_lord", "p_town_5_3", "trp_knight_5_10", 0),
    (call_script, "script_give_center_to_lord", "p_town_5_4", "trp_knight_5_15", 0),
    (call_script, "script_give_center_to_lord", "p_town_1_1", "trp_kingdom_1_lord", 0),
    (call_script, "script_give_center_to_lord", "p_town_1_2", "trp_knight_1_1", 0),
    (call_script, "script_give_center_to_lord", "p_town_1_3", "trp_knight_1_2", 0),
    (call_script, "script_give_center_to_lord", "p_town_1_4", "trp_knight_1_3", 0),
    (call_script, "script_give_center_to_lord", "p_town_2_1", "trp_kingdom_2_lord", 0),
    (call_script, "script_give_center_to_lord", "p_town_2_2", "trp_knight_2_1", 0),
    (call_script, "script_give_center_to_lord", "p_town_2_3", "trp_knight_2_2", 0),
    (call_script, "script_give_center_to_lord", "p_town_2_4", "trp_knight_2_3", 0),
    (call_script, "script_give_center_to_lord", "p_village_2_13", "trp_knight_2_11", 0),
    (call_script, "script_give_center_to_lord", "p_village_2_12", "trp_knight_2_12", 0),
    (call_script, "script_give_center_to_lord", "p_village_2_16", "trp_knight_2_13", 0),
    (call_script, "script_give_center_to_lord", "p_castle_2_8", "trp_knight_2_14", 0),
    (call_script, "script_give_center_to_lord", "p_village_2_9", "trp_knight_2_15", 0),
    (call_script, "script_give_center_to_lord", "p_castle_3_8", "trp_knight_3_20", 0),
    (call_script, "script_give_center_to_lord", "p_village_3_16", "trp_knight_3_20", 0),
    (call_script, "script_give_center_to_lord", "p_town_8_1", "trp_kingdom_8_lord", 0),
    (call_script, "script_give_center_to_lord", "p_town_8_2", "trp_knight_8_1", 0),
    (call_script, "script_give_center_to_lord", "p_town_4_1", "trp_kingdom_4_lord", 0),
    (call_script, "script_give_center_to_lord", "p_town_4_2", "trp_knight_4_1", 0),
    (call_script, "script_give_center_to_lord", "p_town_4_3", "trp_knight_4_2", 0),
    (call_script, "script_give_center_to_lord", "p_town_7_1", "trp_kingdom_7_lord", 0),
    (call_script, "script_give_center_to_lord", "p_town_7_2", "trp_knight_7_1", 0),
    (call_script, "script_give_center_to_lord", "p_town_7_3", "trp_knight_7_2", 0),
    (call_script, "script_give_center_to_lord", "p_town_7_4", "trp_knight_7_3", 0),
    (call_script, "script_give_center_to_lord", "p_town_6_1", "trp_knight_6_19", 0),
    (call_script, "script_give_center_to_lord", "p_town_6_2", "trp_knight_6_4", 0),
    (call_script, "script_give_center_to_lord", "p_town_6_3", "trp_kingdom_6_lord", 0),
    (call_script, "script_give_center_to_lord", "p_town_6_5", "trp_knight_6_6", 0),
    (call_script, "script_give_center_to_lord", "p_town_6_6", "trp_knight_6_15", 0),
    (call_script, "script_give_center_to_lord", "p_town_6_4", "trp_knight_6_20", 0),
    (call_script, "script_give_center_to_lord", "p_castle_6_3", "trp_knight_6_1", 0),
    (call_script, "script_give_center_to_lord", "p_town_3_1", "trp_kingdom_3_lord", 0),
    (call_script, "script_give_center_to_lord", "p_town_3_3", "trp_knight_3_1", 0),
    (call_script, "script_give_center_to_lord", "p_town_3_2", "trp_knight_3_2", 0),
    (call_script, "script_give_center_to_lord", "p_town_3_4", "trp_knight_3_3", 0),
    (call_script, "script_give_center_to_lord", "p_town_9_1", "trp_kingdom_9_lord", 0),
    (call_script, "script_give_center_to_lord", "p_town_9_2", "trp_knight_9_1", 0),
    (call_script, "script_give_center_to_lord", "p_town_9_3", "trp_knight_9_2", 0),
    (call_script, "script_give_center_to_lord", "p_town_9_4", "trp_knight_9_3", 0),
    (call_script, "script_give_center_to_lord", "p_town_9_5", "trp_knight_9_4", 0),
    (call_script, "script_give_center_to_lord", "p_town_10_1", "trp_kingdom_10_lord", 0),
    (call_script, "script_give_center_to_lord", "p_town_10_2", "trp_knight_10_1", 0),
    (call_script, "script_give_center_to_lord", "p_town_10_3", "trp_knight_10_2", 0),
    (call_script, "script_give_center_to_lord", "p_town_10_4", "trp_knight_10_3", 0),
    (call_script, "script_give_center_to_lord", "p_town_10_5", "trp_knight_10_4", 0),
    (call_script, "script_give_center_to_lord", "p_town_10_5", "trp_knight_10_5", 0),
    (call_script, "script_give_center_to_lord", "p_town_11_1", "trp_kingdom_11_lord", 0),
    (call_script, "script_give_center_to_lord", "p_town_11_2", "trp_knight_11_1", 0),
    (call_script, "script_give_center_to_lord", "p_town_11_3", "trp_knight_11_2", 0),
    (call_script, "script_give_center_to_lord", "p_town_14_1", "trp_kingdom_14_lord", 0),
    (call_script, "script_give_center_to_lord", "p_town_14_2", "trp_knight_14_1", 0),
    (call_script, "script_give_center_to_lord", "p_town_14_3", "trp_knight_14_2", 0),
    (call_script, "script_give_center_to_lord", "p_town_12_1", "trp_kingdom_12_lord", 0),
    (call_script, "script_give_center_to_lord", "p_town_12_2", "trp_knight_12_1", 0),
    (call_script, "script_give_center_to_lord", "p_town_13_2", "trp_knight_13_1", 0),
    (call_script, "script_give_center_to_lord", "p_town_15_1", "trp_kingdom_15_lord", 0),
    (call_script, "script_give_center_to_lord", "p_town_15_2", "trp_knight_15_1", 0),
    (call_script, "script_give_center_to_lord", "p_town_15_3", "trp_knight_15_2", 0),
    (call_script, "script_give_center_to_lord", "p_town_16_1", "trp_kingdom_16_lord", 0),
    (call_script, "script_give_center_to_lord", "p_town_17_1", "trp_kingdom_17_lord", 0),
    (call_script, "script_give_center_to_lord", "p_town_18_1", "trp_kingdom_18_lord", 0),
    (call_script, "script_give_center_to_lord", "p_town_19_1", "trp_kingdom_19_lord", 0),
    (call_script, "script_give_center_to_lord", "p_town_20_1", "trp_kingdom_20_lord", 0),
    (call_script, "script_give_center_to_lord", "p_town_21_1", "trp_pope", 0),
    (call_script, "script_give_center_to_lord", "p_village_21_1", "trp_pope", 0),
    (call_script, "script_give_center_to_lord", "p_village_21_2", "trp_pope", 0),
    (call_script, "script_give_center_to_lord", "p_town_22_1", "trp_kingdom_22_lord", 0),
    (call_script, "script_give_center_to_lord", "p_town_22_2", "trp_knight_22_3", 0),
    (call_script, "script_give_center_to_lord", "p_town_22_3", "trp_knight_22_2", 0),
    (call_script, "script_give_center_to_lord", "p_town_22_4", "trp_knight_22_1", 0),
    (call_script, "script_give_center_to_lord", "p_town_23_1", "trp_kingdom_23_lord", 0),
    (call_script, "script_give_center_to_lord", "p_town_23_2", "trp_knight_23_9", 0),
    (call_script, "script_give_center_to_lord", "p_village_23_5", "trp_knight_23_9", 0),
    (call_script, "script_give_center_to_lord", "p_village_23_8", "trp_knight_23_10", 0),
    (call_script, "script_give_center_to_lord", "p_town_24_1", "trp_kingdom_24_lord", 0),
    (call_script, "script_give_center_to_lord", "p_town_25_1", "trp_kingdom_25_lord", 0),
    (call_script, "script_give_center_to_lord", "p_town_25_2", "trp_knight_25_1", 0),
    (call_script, "script_give_center_to_lord", "p_town_25_3", "trp_knight_25_2", 0),
    (call_script, "script_give_center_to_lord", "p_town_25_4", "trp_knight_25_3", 0),
    (call_script, "script_give_center_to_lord", "p_town_26_1", "trp_kingdom_26_lord", 0),
    (call_script, "script_give_center_to_lord", "p_town_27_2", "trp_kingdom_27_lord", 0),
    (call_script, "script_give_center_to_lord", "p_town_27_1", "trp_knight_27_1", 0),
    (call_script, "script_give_center_to_lord", "p_castle_27_1", "trp_knight_27_2", 0),
    (call_script, "script_give_center_to_lord", "p_village_27_7", "trp_knight_27_2", 0),
    (call_script, "script_give_center_to_lord", "p_town_27_3", "trp_knight_27_3", 0),
    (call_script, "script_give_center_to_lord", "p_village_27_5", "trp_knight_27_3", 0),
    (call_script, "script_give_center_to_lord", "p_town_28_1", "trp_kingdom_28_lord", 0),
    (call_script, "script_give_center_to_lord", "p_town_29_1", "trp_kingdom_29_lord", 0),
    (call_script, "script_give_center_to_lord", "p_town_29_2", "trp_knight_29_1", 0),
    (call_script, "script_give_center_to_lord", "p_town_30_1", "trp_kingdom_30_lord", 0),
    (call_script, "script_give_center_to_lord", "p_town_30_2", "trp_knight_30_1", 0),
    (call_script, "script_give_center_to_lord", "p_town_31_1", "trp_kingdom_31_lord", 0),
    (call_script, "script_give_center_to_lord", "p_town_31_2", "trp_knight_31_1", 0),
    (call_script, "script_give_center_to_lord", "p_town_31_3", "trp_knight_31_2", 0),
    (call_script, "script_give_center_to_lord", "p_castle_31_1", "trp_knight_31_3", 0),
    (call_script, "script_give_center_to_lord", "p_castle_31_2", "trp_knight_31_4", 0),
    (call_script, "script_give_center_to_lord", "p_town_32_1", "trp_kingdom_32_lord", 0),
    (call_script, "script_give_center_to_lord", "p_castle_32_1", "trp_knight_32_1", 0),
    (call_script, "script_give_center_to_lord", "p_village_32_2", "trp_knight_32_2", 0),
    (call_script, "script_give_center_to_lord", "p_town_32_2", "trp_knight_32_3", 0),
    (call_script, "script_give_center_to_lord", "p_village_32_3", "trp_knight_32_4", 0),
    (call_script, "script_give_center_to_lord", "p_castle_35_1", "trp_kingdom_35_lord", 0),
    (call_script, "script_give_center_to_lord", "p_castle_33_1", "trp_kingdom_33_lord", 0),
    (call_script, "script_give_center_to_lord", "p_castle_34_1", "trp_kingdom_34_lord", 0),
    (call_script, "script_give_center_to_lord", "p_castle_36_1", "trp_kingdom_36_lord", 0),
    (call_script, "script_give_center_to_lord", "p_castle_38_1", "trp_knight_38_2", 0),
    (call_script, "script_give_center_to_lord", "p_castle_38_2", "trp_knight_38_1", 0),
    (call_script, "script_give_center_to_lord", "p_town_38_1", "trp_kingdom_38_lord", 0),
    (call_script, "script_give_center_to_lord", "p_castle_39_1", "trp_knight_39_1", 0),
    (call_script, "script_give_center_to_lord", "p_castle_39_2", "trp_knight_39_2", 0),
    (call_script, "script_give_center_to_lord", "p_town_39_1", "trp_kingdom_39_lord", 0),
    (call_script, "script_give_center_to_lord", "p_town_40_1", "trp_kingdom_40_lord", 0),
    (call_script, "script_give_center_to_lord", "p_town_40_2", "trp_knight_40_2", 0),
    (call_script, "script_give_center_to_lord", "p_town_41_1", "trp_kingdom_41_lord", 0),
    (call_script, "script_give_center_to_lord", "p_town_41_2", "trp_knight_41_3", 0),
    (call_script, "script_give_center_to_lord", "p_town_42_1", "trp_kingdom_42_lord", 0),
    (call_script, "script_give_center_to_lord", "p_town_42_2", "trp_knight_42_1", 0),
    (call_script, "script_assign_lords_to_empty_centers"),
    (party_set_slot, "p_town_9_5", slot_center_ex_faction, "fac_kingdom_10"),
    (party_set_slot, "p_town_9_6", slot_center_ex_faction, "fac_kingdom_13"),
    (party_set_slot, "p_castle_9_9", slot_center_ex_faction, "fac_kingdom_13"),
    (party_set_slot, "p_town_25_5", slot_center_ex_faction, "fac_kingdom_23"),
    (party_set_slot, "p_town_26_1", slot_center_ex_faction, "fac_kingdom_22"),
    (call_script, "script_update_village_market_towns"),
    (try_for_range, ":var_18", "p_town_1_1", "p_castle_1_1"),
        (store_faction_of_party, ":var_62", ":var_18"),
        (call_script, "script_raf_aor_faction_to_region", ":var_62"),
        (faction_get_slot, ":var_61", ":var_62", slot_faction_culture),
        (try_begin),
            (this_or_next|eq, reg0, 8),
            (this_or_next|eq, reg0, 10),
            (this_or_next|eq, reg0, 11),
            (eq, reg0, 12),
            (party_set_slot, ":var_18", slot_town_center, "scn_town_arab_center"),
            (party_set_slot, ":var_18", slot_town_castle, "scn_town_arab_castle"),
            (party_set_slot, ":var_18", slot_town_prison, "scn_town_arab_prison"),
            (party_set_slot, ":var_18", slot_town_walls, "scn_town_arab_walls"),
            (party_set_slot, ":var_18", slot_town_alley, "scn_town_arab_alley"),
            (party_set_slot, ":var_18", slot_town_tavern, "scn_town_arab_tavern"),
            (party_set_slot, ":var_18", slot_town_store, "scn_town_arab_store"),
            (party_set_slot, ":var_18", slot_town_arena, "scn_town_arab_arena"),
            (party_set_slot, ":var_18", slot_center_siege_with_belfry, 0),
        (else_try),
            (eq, reg0, 2),
            (party_set_slot, ":var_18", slot_town_center, "scn_town_nordic_center_new"),
            (party_set_slot, ":var_18", slot_town_castle, "scn_town_nordic_castle"),
            (party_set_slot, ":var_18", slot_town_prison, "scn_town_nordic_prison"),
            (party_set_slot, ":var_18", slot_town_walls, "scn_town_nordic_walls_new"),
            (party_set_slot, ":var_18", slot_town_alley, "scn_town_nordic_alley"),
            (party_set_slot, ":var_18", slot_town_tavern, "scn_town_nordic_tavern"),
            (party_set_slot, ":var_18", slot_town_store, "scn_town_nordic_store"),
            (party_set_slot, ":var_18", slot_town_arena, "scn_town_nordic_arena"),
            (party_set_slot, ":var_18", slot_center_siege_with_belfry, 0),
        (else_try),
            (this_or_next|eq, ":var_62", "fac_kingdom_1"),
            (this_or_next|eq, reg0, 13),
            (this_or_next|eq, reg0, 7),
            (this_or_next|eq, reg0, 16),
            (eq, reg0, 5),
            (store_random_in_range, ":var_12", 1, 5),
            (try_begin),
                (eq, ":var_12", 1),
                (party_set_slot, ":var_18", slot_town_center, "scn_town_euro_center"),
                (party_set_slot, ":var_18", slot_town_walls, "scn_town_euro_walls"),
                (party_set_slot, ":var_18", slot_center_siege_with_belfry, 1),
            (else_try),
                (eq, ":var_12", 2),
                (party_set_slot, ":var_18", slot_town_center, "scn_town_euro_center_2"),
                (party_set_slot, ":var_18", slot_town_walls, "scn_town_euro_walls"),
                (party_set_slot, ":var_18", slot_center_siege_with_belfry, 1),
            (else_try),
                (eq, ":var_12", 3),
                (party_set_slot, ":var_18", slot_town_center, "scn_town_euro_center_3"),
                (party_set_slot, ":var_18", slot_town_walls, "scn_town_euro_walls"),
                (party_set_slot, ":var_18", slot_center_siege_with_belfry, 1),
            (else_try),
                (eq, ":var_12", 4),
                (party_set_slot, ":var_18", slot_town_center, "scn_town_euro_center_4"),
                (party_set_slot, ":var_18", slot_town_walls, "scn_town_euro_walls"),
                (party_set_slot, ":var_18", slot_center_siege_with_belfry, 1),
            (try_end),
            (party_set_slot, ":var_18", slot_town_castle, "scn_town_euro_castle"),
            (party_set_slot, ":var_18", slot_town_prison, "scn_town_euro_prison"),
            (party_set_slot, ":var_18", slot_town_alley, "scn_town_euro_alley"),
            (party_set_slot, ":var_18", slot_town_tavern, "scn_town_euro_tavern"),
            (party_set_slot, ":var_18", slot_town_store, "scn_town_euro_store"),
            (party_set_slot, ":var_18", slot_town_arena, "scn_town_euro_arena"),
        (else_try),
            (eq, reg0, 1),
            (party_set_slot, ":var_18", slot_town_center, "scn_town_baltic_center"),
            (party_set_slot, ":var_18", slot_town_castle, "scn_town_baltic_castle"),
            (party_set_slot, ":var_18", slot_town_prison, "scn_town_baltic_prison"),
            (party_set_slot, ":var_18", slot_town_walls, "scn_town_baltic_walls"),
            (party_set_slot, ":var_18", slot_town_alley, "scn_town_baltic_alley"),
            (party_set_slot, ":var_18", slot_town_tavern, "scn_town_baltic_tavern"),
            (party_set_slot, ":var_18", slot_town_store, "scn_town_baltic_store"),
            (party_set_slot, ":var_18", slot_town_arena, "scn_town_baltic_arena"),
            (party_set_slot, ":var_18", slot_center_siege_with_belfry, 0),
        (else_try),
            (eq, reg0, 4),
            (party_set_slot, ":var_18", slot_town_center, "scn_town_mongol_center"),
            (party_set_slot, ":var_18", slot_town_castle, "scn_town_mongol_castle"),
            (party_set_slot, ":var_18", slot_town_prison, "scn_town_mongol_prison"),
            (party_set_slot, ":var_18", slot_town_walls, "scn_town_mongol_walls"),
            (party_set_slot, ":var_18", slot_town_alley, "scn_town_mongol_alley"),
            (party_set_slot, ":var_18", slot_town_tavern, "scn_town_mongol_tavern"),
            (party_set_slot, ":var_18", slot_town_store, "scn_town_mongol_store"),
            (party_set_slot, ":var_18", slot_town_arena, "scn_town_mongol_arena"),
            (party_set_slot, ":var_18", slot_center_siege_with_belfry, 0),
        (else_try),
            (this_or_next|eq, reg0, 9),
            (this_or_next|eq, reg0, 14),
            (eq, reg0, 15),
            (party_set_slot, ":var_18", slot_town_center, "scn_byzantine_center"),
            (party_set_slot, ":var_18", slot_town_castle, "scn_town_interior_byz"),
            (party_set_slot, ":var_18", slot_town_prison, "scn_town_eastern_prison"),
            (party_set_slot, ":var_18", slot_town_walls, "scn_byzantine_walls_belfry"),
            (party_set_slot, ":var_18", slot_town_alley, "scn_town_eastern_alley"),
            (party_set_slot, ":var_18", slot_town_tavern, "scn_town_eastern_tavern"),
            (party_set_slot, ":var_18", slot_town_store, "scn_town_eastern_store"),
            (party_set_slot, ":var_18", slot_town_arena, "scn_town_eastern_arena"),
            (party_set_slot, ":var_18", slot_center_siege_with_belfry, 1),
        (else_try),
            (eq, reg0, 3),
            (party_set_slot, ":var_18", slot_town_center, "scn_rus_center"),
            (party_set_slot, ":var_18", slot_town_castle, "scn_town_baltic_castle"),
            (party_set_slot, ":var_18", slot_town_prison, "scn_town_baltic_prison"),
            (party_set_slot, ":var_18", slot_town_walls, "scn_rus_walls"),
            (party_set_slot, ":var_18", slot_town_alley, "scn_town_baltic_alley"),
            (party_set_slot, ":var_18", slot_town_tavern, "scn_town_baltic_tavern"),
            (party_set_slot, ":var_18", slot_town_store, "scn_town_baltic_store"),
            (party_set_slot, ":var_18", slot_town_arena, "scn_town_baltic_arena"),
            (party_set_slot, ":var_18", slot_center_siege_with_belfry, 0),
        (try_end),
        (store_faction_of_party, ":var_62", ":var_18"),
        (try_begin),
            (this_or_next|eq, ":var_62", "fac_kingdom_8"),
            (eq, ":var_62", "fac_kingdom_3"),
            (neg|eq, ":var_18", "p_town_3_1"),
            (party_set_slot, ":var_18", slot_town_center, "scn_rus_snow_center"),
            (party_set_slot, ":var_18", slot_town_walls, "scn_rus_snow_walls"),
            (party_set_slot, ":var_18", slot_town_castle, "scn_town_baltic_castle"),
            (party_set_slot, ":var_18", slot_town_prison, "scn_town_baltic_prison"),
            (party_set_slot, ":var_18", slot_town_alley, "scn_town_baltic_alley"),
            (party_set_slot, ":var_18", slot_town_tavern, "scn_town_baltic_tavern"),
            (party_set_slot, ":var_18", slot_town_store, "scn_town_baltic_store"),
            (party_set_slot, ":var_18", slot_town_arena, "scn_town_baltic_arena"),
        (try_end),
        (try_begin),
            (eq, ":var_62", "fac_kingdom_26"),
            (party_set_slot, ":var_18", slot_town_center, "scn_byzantine_center"),
            (party_set_slot, ":var_18", slot_town_castle, "scn_town_interior_byz"),
            (party_set_slot, ":var_18", slot_town_prison, "scn_town_eastern_prison"),
            (party_set_slot, ":var_18", slot_town_walls, "scn_byzantine_walls_belfry"),
            (party_set_slot, ":var_18", slot_town_alley, "scn_town_eastern_alley"),
            (party_set_slot, ":var_18", slot_town_tavern, "scn_town_eastern_tavern"),
            (party_set_slot, ":var_18", slot_town_store, "scn_town_eastern_store"),
            (party_set_slot, ":var_18", slot_town_arena, "scn_town_eastern_arena"),
            (party_set_slot, ":var_18", slot_center_siege_with_belfry, 1),
        (try_end),
        (try_begin),
            (this_or_next|eq, ":var_62", "fac_kingdom_42"),
            (eq, ":var_62", "fac_kingdom_6"),
            (store_random_in_range, ":var_12", 1, 4),
            (try_begin),
                (eq, ":var_12", 1),
                (party_set_slot, ":var_18", slot_town_center, "scn_town_euro_center"),
                (party_set_slot, ":var_18", slot_town_walls, "scn_town_euro_walls"),
                (party_set_slot, ":var_18", slot_center_siege_with_belfry, 1),
            (else_try),
                (party_set_slot, ":var_18", slot_town_center, "scn_aachen_center"),
                (party_set_slot, ":var_18", slot_town_walls, "scn_aachen_walls"),
                (party_set_slot, ":var_18", slot_center_siege_with_belfry, 0),
            (try_end),
        (try_end),
        (try_begin),
            (eq, ":var_62", "fac_kingdom_1"),
            (party_set_slot, ":var_18", slot_town_center, "scn_to_center"),
            (party_set_slot, ":var_18", slot_town_walls, "scn_to_walls"),
            (party_set_slot, ":var_18", slot_town_castle, "scn_to_interior"),
            (party_set_slot, ":var_18", slot_center_siege_with_belfry, 0),
        (try_end),
        (try_begin),
            (eq, ":var_61", "fac_culture_italian"),
            (party_set_slot, ":var_18", slot_town_castle, "scn_town_italy_castle"),
            (party_set_slot, ":var_18", slot_town_center, "scn_town_italy_center"),
            (party_set_slot, ":var_18", slot_town_walls, "scn_town_italy_walls_new"),
            (party_set_slot, ":var_18", slot_center_siege_with_belfry, 0),
        (try_end),
        (try_begin),
            (eq, ":var_61", "fac_culture_italian"),
            (party_set_slot, ":var_18", slot_town_castle, "scn_town_italy_castle"),
            (party_set_slot, ":var_18", slot_town_center, "scn_town_italy_center"),
            (party_set_slot, ":var_18", slot_town_walls, "scn_town_italy_walls_new"),
            (party_set_slot, ":var_18", slot_center_siege_with_belfry, 0),
        (try_end),
        (try_begin),
            (this_or_next|eq, ":var_61", "fac_culture_andalus"),
            (this_or_next|eq, ":var_61", "fac_culture_marinid"),
            (eq, ":var_61", "fac_culture_marinid"),
            (party_set_slot, ":var_18", slot_town_castle, "scn_town_arab_castle_west"),
        (try_end),
        (try_begin),
            (eq, ":var_62", "fac_kingdom_23"),
            (store_random_in_range, ":var_3", 0, 2),
            (try_begin),
                (eq, ":var_3", 0),
                (party_set_slot, ":var_18", slot_town_castle, "scn_town_castle_crusade_1"),
            (else_try),
                (party_set_slot, ":var_18", slot_town_castle, "scn_town_castle_crusade_2"),
            (try_end),
        (try_end),
    (try_end),
    (try_for_range, ":var_49", "p_castle_1_1", "p_village_1_1"),
        (store_faction_of_party, ":var_62", ":var_49"),
        (try_begin),
            (this_or_next|eq, ":var_62", "fac_kingdom_1"),
            (this_or_next|eq, ":var_62", "fac_kingdom_5"),
            (this_or_next|eq, ":var_62", "fac_kingdom_6"),
            (this_or_next|eq, ":var_62", "fac_kingdom_7"),
            (this_or_next|eq, ":var_62", "fac_kingdom_9"),
            (this_or_next|eq, ":var_62", "fac_kingdom_37"),
            (this_or_next|eq, ":var_62", "fac_kingdom_10"),
            (this_or_next|eq, ":var_62", "fac_kingdom_4"),
            (eq, ":var_62", "fac_kingdom_42"),
            (store_random_in_range, ":var_12", 1, 24),
            (try_begin),
                (eq, ":var_12", 1),
                (party_set_slot, ":var_49", slot_town_center, "scn_walls_motte_bailey_1"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_interior_euro"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_prison_euro"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (else_try),
                (eq, ":var_12", 2),
                (party_set_slot, ":var_49", slot_town_center, "scn_walls_tonbridge"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_interior_euro"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_prison_euro"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (else_try),
                (eq, ":var_12", 3),
                (party_set_slot, ":var_49", slot_town_center, "scn_walls_pevensey"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_interior_euro"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_prison_euro"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (else_try),
                (eq, ":var_12", 4),
                (party_set_slot, ":var_49", slot_town_center, "scn_walls_york"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_interior_euro"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_prison_euro"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (else_try),
                (eq, ":var_12", 5),
                (party_set_slot, ":var_49", slot_town_center, "scn_walls_carlisle"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_interior_euro"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_prison_euro"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (else_try),
                (eq, ":var_12", 6),
                (party_set_slot, ":var_49", slot_town_center, "scn_walls_llansteffan"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_interior_euro"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_prison_euro"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (else_try),
                (eq, ":var_12", 7),
                (party_set_slot, ":var_49", slot_town_center, "scn_walls_beaumaris"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_interior_euro"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_prison_euro"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (else_try),
                (eq, ":var_12", 8),
                (party_set_slot, ":var_49", slot_town_center, "scn_walls_conwy"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_interior_euro"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_prison_euro"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (else_try),
                (eq, ":var_12", 9),
                (party_set_slot, ":var_49", slot_town_center, "scn_walls_arwa"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_interior_euro"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_prison_euro"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (else_try),
                (eq, ":var_12", 10),
                (party_set_slot, ":var_49", slot_town_center, "scn_walls_lublin"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_interior_euro"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_prison_euro"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (else_try),
                (eq, ":var_12", 11),
                (party_set_slot, ":var_49", slot_town_center, "scn_walls_hedingham"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_interior_euro"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_prison_euro"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (else_try),
                (eq, ":var_12", 12),
                (party_set_slot, ":var_49", slot_town_center, "scn_castle_1_exterior"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_1_interior"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_1_prison"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (else_try),
                (eq, ":var_12", 13),
                (party_set_slot, ":var_49", slot_town_center, "scn_castle_3_exterior"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_3_interior"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_3_prison"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (else_try),
                (eq, ":var_12", 14),
                (party_set_slot, ":var_49", slot_town_center, "scn_castle_11_exterior"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_11_interior"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_11_prison"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 1),
            (else_try),
                (eq, ":var_12", 15),
                (party_set_slot, ":var_49", slot_town_center, "scn_castle_12_exterior"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_12_interior"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_12_prison"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (else_try),
                (eq, ":var_12", 16),
                (party_set_slot, ":var_49", slot_town_center, "scn_castle_13_exterior"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_13_interior"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_13_prison"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 1),
            (else_try),
                (eq, ":var_12", 17),
                (party_set_slot, ":var_49", slot_town_center, "scn_castle_15_exterior"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_15_interior"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_15_prison"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (else_try),
                (eq, ":var_12", 18),
                (party_set_slot, ":var_49", slot_town_center, "scn_castle_20_exterior"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_20_interior"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_20_prison"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (else_try),
                (eq, ":var_12", 19),
                (party_set_slot, ":var_49", slot_town_center, "scn_castle_21_exterior"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_21_interior"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_21_prison"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 1),
            (else_try),
                (eq, ":var_12", 20),
                (party_set_slot, ":var_49", slot_town_center, "scn_walls_dorpat"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_interior_euro"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_prison_euro"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (else_try),
                (eq, ":var_12", 21),
                (party_set_slot, ":var_49", slot_town_center, "scn_walls_hedingham"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_interior_euro"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_prison_euro"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (else_try),
                (eq, ":var_12", 22),
                (party_set_slot, ":var_49", slot_town_center, "scn_castle_23_exterior"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_23_interior"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_23_prison"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (else_try),
                (party_set_slot, ":var_49", slot_town_center, "scn_castle_walls_euro"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_interior_euro"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_prison_euro"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (try_end),
        (else_try),
            (this_or_next|eq, ":var_62", "fac_kingdom_12"),
            (eq, ":var_62", "fac_kingdom_13"),
            (store_random_in_range, ":var_12", 1, 7),
            (try_begin),
                (eq, ":var_12", 1),
                (party_set_slot, ":var_49", slot_town_center, "scn_walls_motte_bailey_1"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_interior_euro"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_prison_euro"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (else_try),
                (eq, ":var_12", 2),
                (party_set_slot, ":var_49", slot_town_center, "scn_walls_tonbridge"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_interior_euro"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_prison_euro"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (else_try),
                (eq, ":var_12", 3),
                (party_set_slot, ":var_49", slot_town_center, "scn_walls_pevensey"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_interior_euro"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_prison_euro"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (else_try),
                (eq, ":var_12", 4),
                (party_set_slot, ":var_49", slot_town_center, "scn_walls_york"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_interior_euro"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_prison_euro"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (else_try),
                (eq, ":var_12", 5),
                (party_set_slot, ":var_49", slot_town_center, "scn_walls_carlisle"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_interior_euro"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_prison_euro"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (else_try),
                (party_set_slot, ":var_49", slot_town_center, "scn_walls_scot"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_interior_euro"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_prison_euro"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (try_end),
        (else_try),
            (eq, ":var_62", "fac_kingdom_22"),
            (party_set_slot, ":var_49", slot_town_center, "scn_byzantine_castle"),
            (party_set_slot, ":var_49", slot_town_castle, "scn_castle_interior_byz"),
            (party_set_slot, ":var_49", slot_town_prison, "scn_castle_prison_iberia"),
            (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
        (else_try),
            (this_or_next|eq, ":var_62", "fac_kingdom_2"),
            (this_or_next|eq, ":var_62", "fac_kingdom_30"),
            (this_or_next|eq, ":var_62", "fac_kingdom_33"),
            (this_or_next|eq, ":var_62", "fac_kingdom_34"),
            (this_or_next|eq, ":var_62", "fac_kingdom_35"),
            (eq, ":var_62", "fac_kingdom_36"),
            (store_random_in_range, ":var_12", 1, 3),
            (party_get_current_terrain, ":var_63", ":var_49"),
            (try_begin),
                (this_or_next|eq, ":var_63", 12),
                (eq, ":var_63", 4),
                (try_begin),
                    (eq, ":var_12", 1),
                    (party_set_slot, ":var_49", slot_town_center, "scn_walls_seiminiskeliai_snow"),
                    (party_set_slot, ":var_49", slot_town_castle, "scn_castle_interior_eastern"),
                    (party_set_slot, ":var_49", slot_town_prison, "scn_castle_prison_eastern"),
                    (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
                (else_try),
                    (party_set_slot, ":var_49", slot_town_center, "scn_walls_taurapilis_snow"),
                    (party_set_slot, ":var_49", slot_town_castle, "scn_castle_interior_eastern"),
                    (party_set_slot, ":var_49", slot_town_prison, "scn_castle_prison_eastern"),
                    (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
                (try_end),
            (else_try),
                (try_begin),
                    (eq, ":var_12", 1),
                    (party_set_slot, ":var_49", slot_town_center, "scn_walls_seiminiskeliai"),
                    (party_set_slot, ":var_49", slot_town_castle, "scn_castle_interior_eastern"),
                    (party_set_slot, ":var_49", slot_town_prison, "scn_castle_prison_eastern"),
                    (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
                (else_try),
                    (party_set_slot, ":var_49", slot_town_center, "scn_walls_taurapilis"),
                    (party_set_slot, ":var_49", slot_town_castle, "scn_castle_interior_eastern"),
                    (party_set_slot, ":var_49", slot_town_prison, "scn_castle_prison_eastern"),
                    (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
                (try_end),
            (try_end),
        (else_try),
            (this_or_next|eq, ":var_62", "fac_kingdom_8"),
            (eq, ":var_62", "fac_kingdom_3"),
            (store_random_in_range, ":var_12", 1, 3),
            (try_begin),
                (eq, ":var_12", 1),
                (party_set_slot, ":var_49", slot_town_center, "scn_walls_vladimir_snow"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_interior_eastern"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_prison_eastern"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (else_try),
                (party_set_slot, ":var_49", slot_town_center, "scn_walls_moscow"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_interior_moscow"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_prison_eastern"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (try_end),
        (else_try),
            (this_or_next|eq, ":var_62", "fac_kingdom_15"),
            (this_or_next|eq, ":var_62", "fac_kingdom_29"),
            (eq, ":var_62", "fac_kingdom_26"),
            (store_random_in_range, ":var_12", 1, 4),
            (try_begin),
                (eq, ":var_12", 1),
                (party_set_slot, ":var_49", slot_town_center, "scn_castle_37_exterior"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_37_interior"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_37_prison"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (else_try),
                (eq, ":var_12", 2),
                (party_set_slot, ":var_49", slot_town_center, "scn_walls_vladimir"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_interior_eastern"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_prison_eastern"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (else_try),
                (party_set_slot, ":var_49", slot_town_center, "scn_castle_walls_eastern"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_interior_eastern"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_prison_eastern"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 1),
            (try_end),
        (else_try),
            (this_or_next|eq, ":var_62", "fac_kingdom_11"),
            (eq, ":var_62", "fac_kingdom_14"),
            (store_random_in_range, ":var_12", 1, 10),
            (try_begin),
                (eq, ":var_12", 1),
                (party_set_slot, ":var_49", slot_town_center, "scn_walls_tonbridge"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_interior_nordic"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_prison_nordic"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (else_try),
                (eq, ":var_12", 2),
                (party_set_slot, ":var_49", slot_town_center, "scn_castle_18_exterior"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_18_interior"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_18_prison"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (else_try),
                (eq, ":var_12", 3),
                (party_set_slot, ":var_49", slot_town_center, "scn_castle_19_exterior"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_19_interior"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_19_prison"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (else_try),
                (eq, ":var_12", 4),
                (party_set_slot, ":var_49", slot_town_center, "scn_castle_29_exterior"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_29_interior"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_29_prison"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (else_try),
                (eq, ":var_12", 5),
                (party_set_slot, ":var_49", slot_town_center, "scn_castle_39_exterior"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_39_interior"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_39_prison"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (else_try),
                (eq, ":var_12", 6),
                (party_set_slot, ":var_49", slot_town_center, "scn_walls_ragnhildsholmen"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_39_interior"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_39_prison"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (else_try),
                (eq, ":var_12", 7),
                (party_set_slot, ":var_49", slot_town_center, "scn_castle_cold"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_39_interior"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_39_prison"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (else_try),
                (eq, ":var_12", 8),
                (party_set_slot, ":var_49", slot_town_center, "scn_walls_lake"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_39_interior"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_39_prison"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (else_try),
                (party_set_slot, ":var_49", slot_town_center, "scn_castle_walls_nordic"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_interior_nordic"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_prison_nordic"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 1),
            (try_end),
        (else_try),
            (this_or_next|eq, ":var_62", "fac_kingdom_16"),
            (this_or_next|eq, ":var_62", "fac_kingdom_17"),
            (this_or_next|eq, ":var_62", "fac_kingdom_18"),
            (eq, ":var_62", "fac_kingdom_19"),
            (store_random_in_range, ":var_12", 1, 4),
            (try_begin),
                (eq, ":var_12", 1),
                (party_set_slot, ":var_49", slot_town_center, "scn_castle_2_exterior"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_2_interior"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_2_prison"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 1),
            (else_try),
                (eq, ":var_12", 2),
                (party_set_slot, ":var_49", slot_town_center, "scn_castle_9_exterior"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_9_interior"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_9_prison"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 1),
            (else_try),
                (party_set_slot, ":var_49", slot_town_center, "scn_castle_17_exterior"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_17_interior"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_17_prison"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (try_end),
        (else_try),
            (this_or_next|eq, ":var_62", "fac_papacy"),
            (this_or_next|eq, ":var_62", "fac_kingdom_32"),
            (this_or_next|eq, ":var_62", "fac_kingdom_38"),
            (this_or_next|eq, ":var_62", "fac_kingdom_39"),
            (this_or_next|eq, ":var_62", "fac_kingdom_40"),
            (this_or_next|eq, ":var_62", "fac_kingdom_41"),
            (eq, ":var_62", "fac_kingdom_24"),
            (store_random_in_range, ":var_12", 1, 11),
            (try_begin),
                (eq, ":var_12", 1),
                (party_set_slot, ":var_49", slot_town_center, "scn_walls_motte_bailey_1"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_interior_italy"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_prison_italy"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (else_try),
                (eq, ":var_12", 2),
                (party_set_slot, ":var_49", slot_town_center, "scn_walls_motte_bailey_1"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_interior_italy"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_prison_italy"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (else_try),
                (eq, ":var_12", 3),
                (party_set_slot, ":var_49", slot_town_center, "scn_walls_tonbridge"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_interior_italy"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_prison_italy"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (else_try),
                (eq, ":var_12", 4),
                (party_set_slot, ":var_49", slot_town_center, "scn_walls_pevensey"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_interior_italy"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_prison_italy"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (else_try),
                (eq, ":var_12", 4),
                (party_set_slot, ":var_49", slot_town_center, "scn_walls_york"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_interior_italy"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_prison_italy"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (else_try),
                (eq, ":var_12", 5),
                (party_set_slot, ":var_49", slot_town_center, "scn_walls_carlisle"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_interior_italy"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_prison_italy"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (else_try),
                (eq, ":var_12", 6),
                (party_set_slot, ":var_49", slot_town_center, "scn_walls_llansteffan"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_interior_italy"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_prison_italy"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (else_try),
                (eq, ":var_12", 7),
                (party_set_slot, ":var_49", slot_town_center, "scn_walls_beaumaris"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_interior_italy"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_prison_italy"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (else_try),
                (eq, ":var_12", 8),
                (party_set_slot, ":var_49", slot_town_center, "scn_walls_conwy"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_interior_italy"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_prison_italy"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (else_try),
                (eq, ":var_12", 9),
                (party_set_slot, ":var_49", slot_town_center, "scn_walls_hedingham"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_interior_italy"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_prison_italy"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (else_try),
                (party_set_slot, ":var_49", slot_town_center, "scn_castle_walls_italy"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_interior_italy"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_prison_italy"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 1),
            (try_end),
        (else_try),
            (this_or_next|eq, ":var_62", "fac_kingdom_20"),
            (this_or_next|eq, ":var_62", "fac_kingdom_23"),
            (this_or_next|eq, ":var_62", "fac_kingdom_28"),
            (this_or_next|eq, ":var_62", "fac_kingdom_31"),
            (eq, ":var_62", "fac_kingdom_25"),
            (store_random_in_range, ":var_12", 0, 7),
            (try_begin),
                (eq, ":var_12", 0),
                (party_set_slot, ":var_49", slot_town_center, "scn_castle_2_exterior"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_2_interior"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_2_prison"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 1),
            (else_try),
                (eq, ":var_12", 1),
                (party_set_slot, ":var_49", slot_town_center, "scn_castle_42_exterior"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_42_interior"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_42_prison"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (else_try),
                (eq, ":var_12", 2),
                (party_set_slot, ":var_49", slot_town_center, "scn_castle_43_exterior"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_43_interior"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_43_prison"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (else_try),
                (eq, ":var_12", 3),
                (party_set_slot, ":var_49", slot_town_center, "scn_castle_45_exterior"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_45_interior"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_45_prison"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (else_try),
                (eq, ":var_12", 4),
                (party_set_slot, ":var_49", slot_town_center, "scn_castle_46_exterior"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_46_interior"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_46_prison"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (else_try),
                (eq, ":var_12", 5),
                (party_set_slot, ":var_49", slot_town_center, "scn_castle_47_exterior"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_47_interior"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_47_prison"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (else_try),
                (party_set_slot, ":var_49", slot_town_center, "scn_castle_walls_arab"),
                (party_set_slot, ":var_49", slot_town_castle, "scn_castle_interior_arab"),
                (party_set_slot, ":var_49", slot_town_prison, "scn_castle_prison_arab"),
                (party_set_slot, ":var_49", slot_center_siege_with_belfry, 0),
            (try_end),
        (else_try),
            (eq, ":var_62", "fac_kingdom_27"),
            (party_set_slot, ":var_49", slot_town_center, "scn_castle_walls_mongol"),
            (party_set_slot, ":var_49", slot_town_castle, "scn_castle_interior_mongol"),
            (party_set_slot, ":var_49", slot_town_prison, "scn_castle_prison_mongol"),
            (party_set_slot, ":var_49", slot_center_siege_with_belfry, 1),
        (try_end),
    (try_end),
    (party_set_slot, "p_castle_3_7", slot_town_center, "scn_walls_vladimir"),
    (party_set_slot, "p_castle_3_7", slot_center_siege_with_belfry, 0),
    (party_set_slot, "p_castle_2_4", slot_town_center, "scn_walls_kernave"),
    (party_set_slot, "p_castle_2_4", slot_center_siege_with_belfry, 0),
    (party_set_slot, "p_castle_3_6", slot_town_center, "scn_walls_moscow"),
    (party_set_slot, "p_castle_3_6", slot_town_castle, "scn_interior_moscow"),
    (party_set_slot, "p_castle_3_6", slot_center_siege_with_belfry, 0),
    (party_set_slot, "p_castle_3_2", slot_town_center, "scn_walls_vladimir_snow"),
    (party_set_slot, "p_castle_3_2", slot_center_siege_with_belfry, 0),
    (party_set_slot, "p_castle_2_7", slot_town_center, "scn_walls_vladimir_snow"),
    (party_set_slot, "p_castle_2_7", slot_center_siege_with_belfry, 0),
    (party_set_slot, "p_castle_2_8", slot_town_center, "scn_walls_moscow"),
    (party_set_slot, "p_castle_2_8", slot_center_siege_with_belfry, 0),
    (party_set_slot, "p_castle_1_9", slot_town_center, "scn_walls_wenden"),
    (party_set_slot, "p_castle_1_9", slot_center_siege_with_belfry, 1),
    (party_set_slot, "p_castle_1_7", slot_town_center, "scn_walls_treyden"),
    (party_set_slot, "p_castle_1_7", slot_center_siege_with_belfry, 0),
    (party_set_slot, "p_castle_1_1", slot_town_center, "scn_walls_arensburg"),
    (party_set_slot, "p_castle_1_1", slot_center_siege_with_belfry, 1),
    (party_set_slot, "p_castle_1_5", slot_town_center, "scn_walls_dorpat"),
    (party_set_slot, "p_castle_1_5", slot_center_siege_with_belfry, 0),
    (party_set_slot, "p_castle_1_6", slot_town_center, "scn_walls_lemsahl"),
    (party_set_slot, "p_castle_1_6", slot_center_siege_with_belfry, 0),
    (party_set_slot, "p_castle_1_8", slot_town_center, "scn_walls_marienwerder"),
    (party_set_slot, "p_castle_1_8", slot_center_siege_with_belfry, 0),
    (party_set_slot, "p_castle_2_2", slot_town_center, "scn_walls_seiminiskeliai"),
    (party_set_slot, "p_castle_2_2", slot_center_siege_with_belfry, 0),
    (party_set_slot, "p_castle_11_6", slot_town_center, "scn_walls_mann"),
    (party_set_slot, "p_castle_11_6", slot_center_siege_with_belfry, 0),
    (party_set_slot, "p_castle_25_1", slot_town_center, "scn_walls_mansoura"),
    (party_set_slot, "p_castle_25_1", slot_center_siege_with_belfry, 0),
    (party_set_slot, "p_town_23_1", slot_town_center, "scn_acre_center"),
    (party_set_slot, "p_town_23_1", slot_town_walls, "scn_acre_walls"),
    (party_set_slot, "p_town_23_1", slot_center_siege_with_belfry, 0),
    (party_set_slot, "p_town_9_1", slot_town_center, "scn_london_center"),
    (party_set_slot, "p_town_9_1", slot_town_walls, "scn_london_walls"),
    (party_set_slot, "p_town_9_1", slot_center_siege_with_belfry, 0),
    (party_set_slot, "p_town_3_3", slot_town_center, "scn_rus_center"),
    (party_set_slot, "p_town_3_3", slot_town_walls, "scn_rus_walls"),
    (party_set_slot, "p_town_2_4", slot_town_center, "scn_rus_snow_center"),
    (party_set_slot, "p_town_2_4", slot_town_walls, "scn_rus_snow_walls"),
    (party_set_slot, "p_town_3_3", slot_town_castle, "scn_town_baltic_castle"),
    (party_set_slot, "p_town_3_3", slot_town_prison, "scn_town_baltic_prison"),
    (party_set_slot, "p_town_3_3", slot_town_alley, "scn_town_baltic_alley"),
    (party_set_slot, "p_town_3_3", slot_town_tavern, "scn_town_baltic_tavern"),
    (party_set_slot, "p_town_3_3", slot_town_store, "scn_town_baltic_store"),
    (party_set_slot, "p_town_3_3", slot_town_arena, "scn_town_baltic_arena"),
    (party_set_slot, "p_town_3_3", slot_center_siege_with_belfry, 0),
    (party_set_slot, "p_town_38_1", slot_town_castle, "scn_town_italy_castle"),
    (party_set_slot, "p_town_38_1", slot_town_center, "scn_town_italy_center"),
    (party_set_slot, "p_town_38_1", slot_town_walls, "scn_town_italy_walls_new"),
    (party_set_slot, "p_town_38_1", slot_center_siege_with_belfry, 0),
    (party_set_slot, "p_town_39_1", slot_town_castle, "scn_town_italy_castle"),
    (party_set_slot, "p_town_39_1", slot_town_center, "scn_town_italy_center"),
    (party_set_slot, "p_town_39_1", slot_town_walls, "scn_town_italy_walls_new"),
    (party_set_slot, "p_town_39_1", slot_center_siege_with_belfry, 0),
    (party_set_slot, "p_town_2_1", slot_town_center, "scn_vilnius_center"),
    (party_set_slot, "p_town_2_1", slot_town_walls, "scn_vilnius_walls"),
    (party_set_slot, "p_town_2_1", slot_center_siege_with_belfry, 0),
    (party_set_slot, "p_town_22_2", slot_town_center, "scn_smyrna_center"),
    (party_set_slot, "p_town_22_2", slot_town_walls, "scn_smyrna_walls"),
    (party_set_slot, "p_town_22_2", slot_center_siege_with_belfry, 0),
    (party_set_slot, "p_town_9_4", slot_town_center, "scn_york_center"),
    (party_set_slot, "p_town_27_4", slot_town_center, "scn_aleppo_center"),
    (party_set_slot, "p_town_27_4", slot_town_walls, "scn_aleppo_walls"),
    (party_set_slot, "p_town_27_4", slot_center_siege_with_belfry, 0),
    (party_set_slot, "p_town_26_1", slot_town_center, "scn_constantinople_center"),
    (party_set_slot, "p_town_32_1", slot_town_center, "scn_venice_center"),
    (party_set_slot, "p_town_6_1", slot_town_center, "scn_nuernberg_center"),
    (party_set_slot, "p_town_6_1", slot_town_castle, "scn_nuernberg_castle"),
    (party_set_slot, "p_town_6_1", slot_town_prison, "scn_nuernberg_prison"),
    (party_set_slot, "p_town_6_1", slot_town_walls, "scn_nuernberg_walls"),
    (party_set_slot, "p_town_6_1", slot_town_tavern, "scn_nuernberg_tavern"),
    (party_set_slot, "p_town_6_1", slot_town_store, "scn_nuernberg_store"),
    (party_set_slot, "p_town_6_1", slot_town_arena, "scn_nuernberg_arena"),
    (party_set_slot, "p_town_6_1", slot_center_siege_with_belfry, 0),
    (party_set_slot, "p_town_9_2", slot_town_center, "scn_bristol_center"),
    (party_set_slot, "p_town_9_2", slot_town_walls, "scn_bristol_walls"),
    (party_set_slot, "p_town_9_2", slot_center_siege_with_belfry, 1),
    (party_set_slot, "p_castle_8_4", slot_town_center, "scn_walls_ladoga"),
    (party_set_slot, "p_castle_8_4", slot_center_siege_with_belfry, 0),
    (party_set_slot, "p_castle_5_8", slot_town_center, "scn_walls_lublin"),
    (party_set_slot, "p_castle_5_8", slot_center_siege_with_belfry, 0),
    (party_set_slot, "p_castle_23_1", slot_town_center, "scn_walls_krak"),
    (party_set_slot, "p_castle_23_1", slot_center_siege_with_belfry, 0),
    (party_set_slot, "p_castle_2_5", slot_town_center, "scn_walls_taurapilis"),
    (party_set_slot, "p_castle_2_5", slot_center_siege_with_belfry, 0),
    (party_set_slot, "p_castle_11_4", slot_town_center, "scn_walls_tunsberg"),
    (party_set_slot, "p_castle_11_4", slot_center_siege_with_belfry, 0),
    (party_set_slot, "p_castle_6_5", slot_town_center, "scn_walls_munchen"),
    (party_set_slot, "p_castle_6_5", slot_center_siege_with_belfry, 0),
    (party_set_slot, "p_castle_6_11", slot_town_center, "scn_walls_hohenburg"),
    (party_set_slot, "p_castle_6_11", slot_center_siege_with_belfry, 0),
    (party_set_slot, "p_town_14_2", slot_town_center, "scn_oslo_center"),
    (party_set_slot, "p_town_23_6", slot_town_center, "scn_center_saphet"),
    (party_set_slot, "p_town_23_6", slot_town_walls, "scn_walls_saphet"),
    (party_set_slot, "p_town_23_6", slot_center_siege_with_belfry, 0),
    (party_set_slot, "p_town_25_5", slot_town_center, "scn_center_jerusalem"),
    (party_set_slot, "p_town_25_5", slot_town_walls, "scn_walls_jerusalem"),
    (party_set_slot, "p_town_25_5", slot_center_siege_with_belfry, 1),
    (party_set_slot, "p_town_23_4", slot_town_center, "scn_center_antioch"),
    (party_set_slot, "p_town_23_4", slot_town_walls, "scn_walls_antioch"),
    (party_set_slot, "p_town_23_4", slot_center_siege_with_belfry, 0),
    (party_set_slot, "p_castle_25_6", slot_town_center, "scn_walls_karak"),
    (party_set_slot, "p_castle_25_6", slot_center_siege_with_belfry, 0),
    (party_set_slot, "p_castle_8_1", slot_town_center, "scn_walls_pskov"),
    (party_set_slot, "p_castle_8_1", slot_center_siege_with_belfry, 0),
    (party_set_slot, "p_castle_5_4", slot_town_center, "scn_walls_opole"),
    (party_set_slot, "p_castle_5_4", slot_center_siege_with_belfry, 0),
    (party_set_slot, "p_castle_6_6", slot_town_center, "scn_walls_brandenburg"),
    (party_set_slot, "p_castle_6_6", slot_center_siege_with_belfry, 0),
    (party_set_slot, "p_castle_9_7", slot_town_center, "scn_walls_hedingham"),
    (party_set_slot, "p_castle_9_7", slot_town_castle, "scn_castle_interior_euro"),
    (party_set_slot, "p_castle_9_7", slot_town_prison, "scn_castle_prison_euro"),
    (party_set_slot, "p_castle_9_7", slot_center_siege_with_belfry, 0),
    (party_set_slot, "p_castle_11_5", slot_town_center, "scn_walls_ragnhildsholmen"),
    (party_set_slot, "p_castle_11_5", slot_center_siege_with_belfry, 0),
    (try_for_range, ":var_50", "p_village_1_1", "p_salt_mine"),
        (store_sub, ":var_17", ":var_50", "p_village_1_1"),
        (store_faction_of_party, ":var_62", ":var_50"),
        (try_begin),
            (this_or_next|eq, ":var_62", "fac_kingdom_5"),
            (this_or_next|eq, ":var_62", "fac_kingdom_6"),
            (this_or_next|eq, ":var_62", "fac_kingdom_4"),
            (this_or_next|eq, ":var_62", "fac_kingdom_7"),
            (this_or_next|eq, ":var_62", "fac_kingdom_37"),
            (this_or_next|eq, ":var_62", "fac_kingdom_10"),
            (this_or_next|eq, ":var_62", "fac_kingdom_12"),
            (this_or_next|eq, ":var_62", "fac_kingdom_42"),
            (eq, ":var_62", "fac_kingdom_13"),
            (store_random_in_range, ":var_12", 1, 4),
            (try_begin),
                (eq, ":var_12", 1),
                (party_set_slot, ":var_50", slot_town_center, "scn_village_euro"),
            (else_try),
                (eq, ":var_12", 2),
                (party_set_slot, ":var_50", slot_town_center, "scn_village_euro2"),
            (else_try),
                (party_set_slot, ":var_50", slot_town_center, "scn_den_bosch"),
            (try_end),
        (else_try),
            (eq, ":var_62", "fac_kingdom_9"),
            (party_set_slot, ":var_50", slot_town_center, "scn_village_england"),
        (else_try),
            (this_or_next|eq, ":var_62", "fac_kingdom_22"),
            (this_or_next|eq, ":var_62", "fac_kingdom_27"),
            (this_or_next|eq, ":var_62", "fac_kingdom_29"),
            (this_or_next|eq, ":var_62", "fac_kingdom_30"),
            (eq, ":var_62", "fac_kingdom_26"),
            (store_random_in_range, ":var_12", 1, 3),
            (try_begin),
                (eq, ":var_12", 1),
                (party_set_slot, ":var_50", slot_town_center, "scn_village_byz"),
            (else_try),
                (party_set_slot, ":var_50", slot_town_center, "scn_village_byzantine"),
            (try_end),
        (else_try),
            (this_or_next|eq, ":var_62", "fac_kingdom_8"),
            (eq, ":var_62", "fac_kingdom_3"),
            (party_set_slot, ":var_50", slot_town_center, "scn_village_eastern2"),
        (else_try),
            (this_or_next|eq, ":var_62", "fac_kingdom_1"),
            (this_or_next|eq, ":var_62", "fac_kingdom_2"),
            (this_or_next|eq, ":var_62", "fac_kingdom_33"),
            (this_or_next|eq, ":var_62", "fac_kingdom_34"),
            (this_or_next|eq, ":var_62", "fac_kingdom_35"),
            (this_or_next|eq, ":var_62", "fac_kingdom_36"),
            (eq, ":var_62", "fac_kingdom_15"),
            (party_set_slot, ":var_50", slot_town_center, "scn_village_eastern"),
        (else_try),
            (this_or_next|eq, ":var_62", "fac_kingdom_11"),
            (eq, ":var_62", "fac_kingdom_14"),
            (party_set_slot, ":var_50", slot_town_center, "scn_village_nordic"),
        (else_try),
            (this_or_next|eq, ":var_62", "fac_kingdom_20"),
            (this_or_next|eq, ":var_62", "fac_kingdom_16"),
            (this_or_next|eq, ":var_62", "fac_kingdom_28"),
            (this_or_next|eq, ":var_62", "fac_kingdom_31"),
            (this_or_next|eq, ":var_62", "fac_kingdom_18"),
            (eq, ":var_62", "fac_kingdom_19"),
            (party_set_slot, ":var_50", slot_town_center, "scn_village_iberia"),
        (else_try),
            (this_or_next|eq, ":var_62", "fac_papacy"),
            (this_or_next|eq, ":var_62", "fac_kingdom_17"),
            (this_or_next|eq, ":var_62", "fac_kingdom_32"),
            (this_or_next|eq, ":var_62", "fac_kingdom_38"),
            (this_or_next|eq, ":var_62", "fac_kingdom_39"),
            (this_or_next|eq, ":var_62", "fac_kingdom_40"),
            (this_or_next|eq, ":var_62", "fac_kingdom_41"),
            (eq, ":var_62", "fac_kingdom_24"),
            (party_set_slot, ":var_50", slot_town_center, "scn_village_italy"),
        (else_try),
            (this_or_next|eq, ":var_62", "fac_kingdom_23"),
            (eq, ":var_62", "fac_kingdom_25"),
            (party_set_slot, ":var_50", slot_town_center, "scn_village_arab"),
        (try_end),
    (try_end),
    (party_set_slot, "p_castle_3_8", slot_town_center, "scn_castle_walls_euro"),
    (party_set_slot, "p_castle_3_8", slot_town_castle, "scn_castle_interior_euro"),
    (party_set_slot, "p_castle_3_8", slot_town_prison, "scn_castle_prison_euro"),
    (party_set_slot, "p_castle_3_8", slot_center_siege_with_belfry, 0),
    (party_set_slot, "p_village_3_16", slot_town_center, "scn_village_euro"),
    (party_set_slot, "p_village_6_19", slot_town_center, "scn_den_bosch"),
    (party_set_slot, "p_village_4_15", slot_town_center, "scn_village_nordic3"),
    (party_set_slot, "p_village_4_14", slot_town_center, "scn_village_nordic3"),
    (party_set_slot, "p_village_4_3", slot_town_center, "scn_village_nordic3"),
    (party_set_slot, "p_village_11_5", slot_town_center, "scn_village_nordic2"),
    (party_set_slot, "p_village_11_8", slot_town_center, "scn_village_nordic2"),
    (party_set_slot, "p_village_11_10", slot_town_center, "scn_village_nordic3"),
    (party_set_slot, "p_village_11_11", slot_town_center, "scn_village_nordic3"),
    (party_set_slot, "p_village_11_1", slot_town_center, "scn_village_nordic3"),
    (party_set_slot, "p_village_11_3", slot_town_center, "scn_village_nordic3"),
    (party_set_slot, "p_village_14_3", slot_town_center, "scn_village_nordic3"),
    (party_set_slot, "p_village_14_5", slot_town_center, "scn_village_nordic3"),
    (party_set_slot, "p_village_1_8", slot_town_center, "scn_village_euro"),
    (party_set_slot, "p_village_1_9", slot_town_center, "scn_village_euro"),
    (party_set_slot, "p_village_1_14", slot_town_center, "scn_village_euro"),
    (party_set_slot, "p_village_1_1", slot_town_center, "scn_village_euro"),
    (party_set_slot, "p_village_1_2", slot_town_center, "scn_village_euro"),
    (party_set_slot, "p_village_1_17", slot_town_center, "scn_village_euro"),
    (party_set_slot, "p_village_10_12", slot_town_center, "scn_village_italy"),
    (party_set_slot, "p_village_10_10", slot_town_center, "scn_village_italy"),
    (party_set_slot, "p_village_10_15", slot_town_center, "scn_village_italy"),
    (party_set_slot, "p_village_10_19", slot_town_center, "scn_village_italy"),
    (party_set_slot, "p_village_10_17", slot_town_center, "scn_village_italy"),
    (party_set_slot, "p_village_28_2", slot_town_center, "scn_village_arab"),
    (party_set_slot, "p_village_28_9", slot_town_center, "scn_village_arab"),
    (party_set_slot, "p_village_28_1", slot_town_center, "scn_village_arab"),
    (party_set_slot, "p_village_28_10", slot_town_center, "scn_village_arab"),
    (party_set_slot, "p_village_3_5", slot_town_center, "scn_village_eastern"),
    (party_set_slot, "p_castle_3_3", slot_town_center, "scn_castle_walls_mongol"),
    (party_set_slot, "p_village_3_14", slot_town_center, "scn_village_eastern"),
    (party_set_slot, "p_village_3_10", slot_town_center, "scn_village_byz"),
    (party_set_slot, "p_village_2_16", slot_town_center, "scn_village_eastern2"),
    (party_set_slot, "p_village_2_15", slot_town_center, "scn_village_eastern2"),
    (party_set_slot, "p_village_2_4", slot_town_center, "scn_village_eastern2"),
    (party_set_slot, "p_village_2_8", slot_town_center, "scn_village_eastern2"),
    (party_set_slot, "p_village_2_3", slot_town_center, "scn_village_eastern2"),
    (party_set_slot, "p_village_2_2", slot_town_center, "scn_village_eastern2"),
    (party_set_slot, "p_village_1_3", slot_town_center, "scn_village_eastern2"),
    (party_set_slot, "p_village_1_10", slot_town_center, "scn_village_eastern2"),
    (party_set_slot, "p_village_1_15", slot_town_center, "scn_village_eastern2"),
    (party_set_slot, "p_village_1_13", slot_town_center, "scn_village_eastern2"),
    (party_set_slot, "p_village_1_11", slot_town_center, "scn_village_eastern2"),
    (party_set_slot, "p_village_1_6", slot_town_center, "scn_village_eastern2"),
    (party_set_slot, "p_village_1_7", slot_town_center, "scn_village_eastern2"),
    (party_set_slot, "p_village_4_5", slot_town_center, "scn_village_eastern2"),
    (party_set_slot, "p_village_4_6", slot_town_center, "scn_village_eastern2"),
    (party_set_slot, "p_village_14_4", slot_town_center, "scn_village_eastern2"),
    (party_set_slot, "p_village_12_1", slot_town_center, "scn_village_nordic"),
    (call_script, "script_randomly_start_war_peace_new", 0),
    (try_for_range, ":var_1", "p_town_1_1", "p_salt_mine"),
        (this_or_next|party_slot_eq, ":var_1", slot_party_type, 3),
        (party_slot_eq, ":var_1", slot_party_type, 4),
        (try_for_range, ":var_64", 0, 8),
            (call_script, "script_center_set_walker_to_type", ":var_1", ":var_64", 0),
        (try_end),
    (try_end),
    (call_script, "script_initialize_economic_information"),
    (try_for_range, ":var_50", "p_village_1_1", "p_salt_mine"),
        (call_script, "script_refresh_village_merchant_inventory", ":var_50"),
        (call_script, "script_refresh_village_merchant_inventory", ":var_50"),
    (try_end),
    (try_for_range, ":var_65", "trp_kingdom_1_lord", "trp_knight_1_1_wife"),
        (try_begin),
            (store_troop_faction, ":var_66", ":var_65"),
            (is_between, ":var_66", "fac_player_supporters_faction", "fac_kingdoms_end"),
            (troop_set_slot, ":var_65", slot_troop_original_faction, ":var_66"),
            (try_begin),
                (is_between, ":var_65", "trp_kingdom_4_pretender", "trp_knight_1_1_wife"),
                (faction_set_slot, ":var_66", slot_faction_has_rebellion_chance, 1),
            (try_end),
        (try_end),
        (assign, ":var_67", 6000),
        (try_begin),
            (store_troop_faction, ":var_68", ":var_65"),
            (faction_slot_eq, ":var_68", slot_faction_leader, ":var_65"),
            (assign, ":var_67", 15000),
        (try_end),
        (troop_set_slot, ":var_65", slot_troop_wealth, ":var_67"),
    (try_end),
    (try_for_range, ":var_69", "p_town_1_1", "p_salt_mine"),
        (store_faction_of_party, ":var_68", ":var_69"),
        (try_begin),
            (is_between, ":var_69", "p_town_1_1", "p_castle_1_1"),
            (party_set_slot, ":var_69", 703, 1),
            (party_set_slot, ":var_69", 706, 1),
            (party_set_slot, ":var_69", 709, 1),
        (try_end),
        (try_begin),
            (this_or_next|eq, ":var_69", "p_town_3_1"),
            (this_or_next|eq, ":var_69", "p_town_27_1"),
            (eq, ":var_69", "p_town_27_4"),
            (party_set_slot, ":var_69", 702, 31),
            (party_set_slot, ":var_69", 704, "pt_company_kwarezmian"),
        (else_try),
            (this_or_next|eq, ":var_68", "fac_kingdom_1"),
            (this_or_next|eq, ":var_68", "fac_kingdom_5"),
            (this_or_next|eq, ":var_68", "fac_kingdom_6"),
            (this_or_next|eq, ":var_68", "fac_kingdom_7"),
            (this_or_next|eq, ":var_68", "fac_kingdom_9"),
            (this_or_next|eq, ":var_68", "fac_kingdom_10"),
            (this_or_next|eq, ":var_68", "fac_kingdom_12"),
            (this_or_next|eq, ":var_68", "fac_kingdom_41"),
            (this_or_next|eq, ":var_68", "fac_kingdom_42"),
            (eq, ":var_68", "fac_kingdom_37"),
            (party_set_slot, ":var_69", 702, 1),
            (party_set_slot, ":var_69", 704, "pt_generic_euro"),
        (else_try),
            (this_or_next|eq, ":var_68", "fac_kingdom_2"),
            (this_or_next|eq, ":var_68", "fac_kingdom_33"),
            (this_or_next|eq, ":var_68", "fac_kingdom_34"),
            (this_or_next|eq, ":var_68", "fac_kingdom_35"),
            (eq, ":var_68", "fac_kingdom_36"),
            (party_set_slot, ":var_69", 702, 2),
            (party_set_slot, ":var_69", 704, "pt_generic_balt"),
        (else_try),
            (this_or_next|eq, ":var_68", "fac_kingdom_4"),
            (this_or_next|eq, ":var_68", "fac_kingdom_11"),
            (eq, ":var_68", "fac_kingdom_14"),
            (party_set_slot, ":var_69", 702, 8),
            (party_set_slot, ":var_69", 704, "pt_generic_scan"),
        (else_try),
            (this_or_next|eq, ":var_68", "fac_kingdom_3"),
            (this_or_next|eq, ":var_68", "fac_kingdom_8"),
            (eq, ":var_68", "fac_kingdom_15"),
            (party_set_slot, ":var_69", 702, 5),
            (party_set_slot, ":var_69", 704, "pt_generic_rus"),
        (else_try),
            (this_or_next|eq, ":var_68", "fac_kingdom_16"),
            (this_or_next|eq, ":var_68", "fac_kingdom_17"),
            (this_or_next|eq, ":var_68", "fac_kingdom_18"),
            (this_or_next|eq, ":var_68", "fac_kingdom_19"),
            (this_or_next|eq, ":var_68", "fac_kingdom_26"),
            (this_or_next|eq, ":var_68", "fac_papacy"),
            (this_or_next|eq, ":var_68", "fac_kingdom_23"),
            (this_or_next|eq, ":var_68", "fac_kingdom_24"),
            (this_or_next|eq, ":var_68", "fac_kingdom_38"),
            (this_or_next|eq, ":var_68", "fac_kingdom_39"),
            (this_or_next|eq, ":var_68", "fac_kingdom_40"),
            (this_or_next|eq, ":var_68", "fac_kingdom_27"),
            (eq, ":var_68", "fac_kingdom_32"),
            (party_set_slot, ":var_69", 702, 6),
            (party_set_slot, ":var_69", 704, "pt_generic_latin"),
        (else_try),
            (this_or_next|eq, ":var_68", "fac_kingdom_22"),
            (this_or_next|eq, ":var_68", "fac_kingdom_29"),
            (eq, ":var_68", "fac_kingdom_30"),
            (party_set_slot, ":var_69", 702, 7),
            (party_set_slot, ":var_69", 704, "pt_generic_balkan"),
        (else_try),
            (this_or_next|eq, ":var_68", "fac_kingdom_20"),
            (this_or_next|eq, ":var_68", "fac_kingdom_28"),
            (eq, ":var_68", "fac_kingdom_31"),
            (party_set_slot, ":var_69", 702, 4),
            (party_set_slot, ":var_69", 704, "pt_generic_maghreb"),
        (else_try),
            (eq, ":var_68", "fac_kingdom_25"),
            (party_set_slot, ":var_69", 702, 10),
            (party_set_slot, ":var_69", 704, "pt_generic_mamluk"),
        (else_try),
            (eq, ":var_68", "fac_kingdom_13"),
            (party_set_slot, ":var_69", 702, 9),
            (party_set_slot, ":var_69", 704, "pt_generic_gaelic"),
        (try_end),
        (try_begin),
            (this_or_next|eq, ":var_69", "p_town_3_3"),
            (eq, ":var_69", "p_town_3_4"),
            (party_set_slot, ":var_69", 705, 33),
            (party_set_slot, ":var_69", 707, "pt_company_kipchak"),
        (else_try),
            (eq, ":var_69", "p_town_38_1"),
            (party_set_slot, ":var_69", 705, 28),
            (party_set_slot, ":var_69", 707, "pt_company_genoese"),
        (else_try),
            (this_or_next|eq, ":var_68", "fac_kingdom_8"),
            (eq, ":var_69", "p_town_3_2"),
            (party_set_slot, ":var_69", 705, 32),
            (party_set_slot, ":var_69", 707, "pt_company_mordovian"),
        (else_try),
            (this_or_next|eq, ":var_68", "fac_kingdom_37"),
            (eq, ":var_68", "fac_kingdom_9"),
            (party_set_slot, ":var_69", 705, 29),
            (party_set_slot, ":var_69", 707, "pt_company_welsh"),
        (else_try),
            (eq, ":var_68", "fac_kingdom_23"),
            (party_set_slot, ":var_69", 705, 23),
            (party_set_slot, ":var_69", 707, "pt_company_turkopoles"),
        (else_try),
            (eq, ":var_68", "fac_kingdom_27"),
            (party_set_slot, ":var_69", 705, 21),
            (party_set_slot, ":var_69", 707, "pt_company_georgian"),
        (else_try),
            (this_or_next|eq, ":var_68", "fac_kingdom_3"),
            (eq, ":var_68", "fac_kingdom_7"),
            (party_set_slot, ":var_69", 705, 24),
            (party_set_slot, ":var_69", 707, "pt_company_cuman"),
        (else_try),
            (eq, ":var_69", "p_town_6_2"),
            (party_set_slot, ":var_69", 705, 20),
            (party_set_slot, ":var_69", 707, "pt_company_brabantine"),
        (else_try),
            (eq, ":var_68", "fac_kingdom_24"),
            (party_set_slot, ":var_69", 705, 22),
            (party_set_slot, ":var_69", 707, "pt_company_sicily"),
        (else_try),
            (eq, ":var_68", "fac_kingdom_25"),
            (party_set_slot, ":var_69", 708, 30),
            (party_set_slot, ":var_69", 710, "pt_company_mamlukes"),
        (try_end),
        (try_begin),
            (eq, ":var_68", "fac_kingdom_23"),
            (store_random_in_range, ":var_70", 51, 58),
            (store_sub, ":var_71", ":var_70", 51),
            (val_add, ":var_71", "pt_company_teutons"),
            (party_set_slot, ":var_69", 708, ":var_70"),
            (party_set_slot, ":var_69", 710, ":var_71"),
        (try_end),
        (store_random_in_range, ":var_2", 10, 15),
        (party_set_slot, ":var_1", slot_center_volunteer_troop_amount, ":var_2"),
    (try_end),
    (try_for_range, ":var_1", "p_town_1_1", "p_village_1_1"),
        (try_begin),
            (party_slot_eq, ":var_1", slot_party_type, 3),
            (assign, ":var_72", 20),
            (try_begin),
                (this_or_next|eq, ":var_1", "p_town_21_1"),
                (this_or_next|eq, ":var_1", "p_town_19_1"),
                (eq, ":var_1", "p_town_37_1"),
                (assign, ":var_72", 60),
            (try_end),
            (try_begin),
                (eq, ":var_1", "p_town_26_1"),
                (assign, ":var_72", 50),
            (try_end),
        (try_end),
        (try_for_range, ":var_11", 0, ":var_72"),
            (call_script, "script_cf_reinforce_party", ":var_1"),
        (try_end),
        (store_div, ":var_73", ":var_72", 5),
        (val_add, ":var_73", 2),
        (game_get_reduce_campaign_ai, ":var_74"),
        (try_begin),
            (eq, ":var_74", 0),
            (assign, ":var_75", 15000),
        (else_try),
            (eq, ":var_74", 1),
            (assign, ":var_75", 10000),
        (else_try),
            (eq, ":var_74", 2),
            (assign, ":var_75", 5000),
        (try_end),
        (try_for_range, ":var_11", 0, ":var_73"),
            (party_upgrade_with_xp, ":var_1", ":var_75", 0),
        (try_end),
        (call_script, "script_center_get_food_store_limit", ":var_1"),
        (assign, ":var_76", reg0),
        (val_div, ":var_76", 2),
        (party_set_slot, ":var_1", slot_party_food_store, ":var_76"),
        (party_get_slot, ":var_77", ":var_1", slot_town_lord),
        (ge, ":var_77", 1),
        (troop_slot_eq, ":var_77", slot_troop_leaded_party, 0),
        (call_script, "script_create_kingdom_hero_party", ":var_77", ":var_1"),
        (assign, ":var_78", "$pout_party"),
        (party_attach_to_party, ":var_78", ":var_1"),
        (party_set_slot, ":var_1", slot_town_player_odds, 1000),
    (try_end),
    (try_for_range, ":var_79", "trp_npc1", "trp_kingdom_1_lord"),
        (try_for_range, ":var_80", "trp_npc1", "trp_kingdom_1_lord"),
            (neg|eq, ":var_80", ":var_79"),
            (neg|troop_slot_eq, ":var_79", slot_troop_personalityclash_object, ":var_80"),
            (neg|troop_slot_eq, ":var_79", slot_troop_personalityclash2_object, ":var_80"),
            (call_script, "script_troop_change_relation_with_troop", ":var_79", ":var_80", 7),
        (try_end),
    (try_end),
    (try_for_range, ":var_81", "trp_kingdom_1_lord", "trp_knight_1_1_wife"),
        (troop_slot_eq, ":var_81", slot_troop_occupation, 2),
        (troop_get_slot, ":var_82", ":var_81", slot_troop_original_faction),
        (try_for_range, ":var_83", "trp_kingdom_1_lord", "trp_knight_1_1_wife"),
            (this_or_next|troop_slot_eq, ":var_83", slot_troop_occupation, 2),
            (troop_slot_eq, ":var_83", slot_troop_occupation, 9),
            (troop_get_slot, ":var_84", ":var_83", slot_troop_original_faction),
            (eq, ":var_84", ":var_82"),
            (call_script, "script_troop_get_family_relation_to_troop", ":var_81", ":var_83"),
            (call_script, "script_troop_change_relation_with_troop", ":var_81", ":var_83", reg0),
            (store_random_in_range, ":var_3", 0, 11),
            (call_script, "script_troop_change_relation_with_troop", ":var_81", ":var_83", ":var_3"),
        (try_end),
    (try_end),
    (try_for_range, ":var_11", 0, 15000),
        (call_script, "script_cf_random_political_event"),
    (try_end),
    (assign, "$total_random_quarrel_changes", 0),
    (assign, "$total_relation_adds", 0),
    (assign, "$total_relation_subs", 0),
    (try_for_range, ":var_85", "fac_player_supporters_faction", "fac_kingdoms_end"),
        (call_script, "script_evaluate_realm_stability", ":var_85"),
    (try_end),
    (try_begin),
        (eq, "$cheat_mode", 1),
        (assign, reg3, "$cheat_mode"),
        (display_message, "@{!}DEBUG : Completed political events, cheat mode: {reg3}"),
    (try_end),
    (try_for_range, ":var_86", "trp_knight_1_1", "trp_kingdom_2_pretender"),
        (troop_slot_eq, ":var_86", slot_troop_spouse, -1),
        (neg|is_between, ":var_86", "trp_kingdom_1_lord", "trp_knight_1_1"),
        (neg|is_between, ":var_86", "trp_kingdom_4_pretender", "trp_knight_1_1_wife"),
        (call_script, "script_assign_troop_love_interests", ":var_86"),
    (try_end),
    (store_random_in_range, "$romantic_attraction_seed", 0, 5),
    (try_begin),
        (eq, "$cheat_mode", 1),
        (assign, reg3, "$romantic_attraction_seed"),
        (display_message, "@{!}DEBUG : Assigned love interests. Attraction seed: {reg3}"),
    (try_end),
    (call_script, "script_spawn_manors"),
    (try_for_range, ":var_11", 0, 20),
        (call_script, "script_spawn_bandits"),
    (try_end),
    (set_spawn_radius, 5),
    (try_for_range, ":var_31", "p_village_1_1", "p_salt_mine"),
        (store_random_in_range, ":var_87", 0, 5),
        (eq, ":var_87", 0),
        (spawn_around_party, ":var_31", "pt_looters"),
    (try_end),
    (call_script, "script_update_mercenary_units_of_towns"),
    (call_script, "script_update_companion_candidates_in_taverns"),
    (call_script, "script_update_ransom_brokers"),
    (call_script, "script_update_tavern_travellers"),
    (call_script, "script_update_tavern_minstrels"),
    (call_script, "script_update_booksellers"),
    (try_for_range, ":var_11", 0, 5),
        (call_script, "script_spawn_balts"),
    (try_end),
    (try_for_range, ":var_11", 0, 6),
        (call_script, "script_cf_spawn_crusaders_and_jihadists"),
    (try_end),
    (call_script, "script_spawn_peasant_rebels"),
    (call_script, "script_prepare_manor_troops"),
    (call_script, "script_update_manor_infested_by_bandits"),
    (call_script, "script_spawn_mongols"),
    (try_for_range, ":var_88", "fac_player_supporters_faction", "fac_kingdoms_end"),
        (call_script, "script_update_faction_notes", ":var_88"),
        (store_random_in_range, ":var_12", -60, 0),
        (faction_set_slot, ":var_6", slot_faction_ai_last_offensive_time, ":var_12"),
    (try_end),
    (try_for_range, ":var_86", "trp_kingdom_1_lord", "trp_knight_1_1_wife"),
        (call_script, "script_update_troop_notes", ":var_86"),
    (try_end),
    (try_for_range, ":var_28", "p_town_1_1", "p_salt_mine"),
        (call_script, "script_update_center_notes", ":var_28"),
    (try_end),
    (call_script, "script_update_troop_notes", "trp_player"),
    (try_for_range, ":var_65", "trp_knight_1_1_wife", "trp_heroes_end"),
        (call_script, "script_get_kingdom_lady_social_determinants", ":var_65"),
        (troop_set_slot, ":var_65", slot_troop_cur_center, reg1),
    (try_end),
    (try_begin),
        (eq, "$cheat_mode", 1),
        (assign, reg3, "$cheat_mode"),
        (display_message, "@{!}DEBUG : Located kingdom ladies, cheat mode: {reg3}"),
    (try_end),
    (try_for_range, ":var_6", "fac_player_supporters_faction", "fac_kingdoms_end"),
        (call_script, "script_faction_recalculate_strength", ":var_6"),
    (try_end),
    (faction_set_slot, "fac_kingdom_1", slot_faction_adjective, "str_kingdom_1_adjective"),
    (faction_set_slot, "fac_kingdom_2", slot_faction_adjective, "str_kingdom_2_adjective"),
    (faction_set_slot, "fac_kingdom_3", slot_faction_adjective, "str_kingdom_3_adjective"),
    (faction_set_slot, "fac_kingdom_4", slot_faction_adjective, "str_kingdom_4_adjective"),
    (faction_set_slot, "fac_kingdom_5", slot_faction_adjective, "str_kingdom_5_adjective"),
    (faction_set_slot, "fac_kingdom_6", slot_faction_adjective, "str_kingdom_6_adjective"),
    (faction_set_slot, "fac_kingdom_7", slot_faction_adjective, "str_kingdom_7_adjective"),
    (faction_set_slot, "fac_kingdom_8", slot_faction_adjective, "str_kingdom_8_adjective"),
    (faction_set_slot, "fac_kingdom_9", slot_faction_adjective, "str_kingdom_9_adjective"),
    (faction_set_slot, "fac_kingdom_10", slot_faction_adjective, "str_kingdom_10_adjective"),
    (faction_set_slot, "fac_kingdom_11", slot_faction_adjective, "str_kingdom_11_adjective"),
    (faction_set_slot, "fac_kingdom_12", slot_faction_adjective, "str_kingdom_12_adjective"),
    (faction_set_slot, "fac_kingdom_13", slot_faction_adjective, "str_kingdom_13_adjective"),
    (faction_set_slot, "fac_kingdom_14", slot_faction_adjective, "str_kingdom_14_adjective"),
    (faction_set_slot, "fac_kingdom_15", slot_faction_adjective, "str_kingdom_15_adjective"),
    (faction_set_slot, "fac_kingdom_16", slot_faction_adjective, "str_kingdom_16_adjective"),
    (faction_set_slot, "fac_kingdom_17", slot_faction_adjective, "str_kingdom_17_adjective"),
    (faction_set_slot, "fac_kingdom_18", slot_faction_adjective, "str_kingdom_18_adjective"),
    (faction_set_slot, "fac_kingdom_19", slot_faction_adjective, "str_kingdom_19_adjective"),
    (faction_set_slot, "fac_kingdom_20", slot_faction_adjective, "str_kingdom_20_adjective"),
    (faction_set_slot, "fac_papacy", slot_faction_adjective, "str_kingdom_21_adjective"),
    (faction_set_slot, "fac_kingdom_22", slot_faction_adjective, "str_kingdom_22_adjective"),
    (faction_set_slot, "fac_kingdom_23", slot_faction_adjective, "str_kingdom_23_adjective"),
    (faction_set_slot, "fac_kingdom_24", slot_faction_adjective, "str_kingdom_24_adjective"),
    (faction_set_slot, "fac_kingdom_25", slot_faction_adjective, "str_kingdom_25_adjective"),
    (faction_set_slot, "fac_kingdom_26", slot_faction_adjective, "str_kingdom_26_adjective"),
    (faction_set_slot, "fac_kingdom_27", slot_faction_adjective, "str_kingdom_27_adjective"),
    (faction_set_slot, "fac_kingdom_28", slot_faction_adjective, "str_kingdom_28_adjective"),
    (faction_set_slot, "fac_kingdom_29", slot_faction_adjective, "str_kingdom_29_adjective"),
    (faction_set_slot, "fac_kingdom_30", slot_faction_adjective, "str_kingdom_30_adjective"),
    (faction_set_slot, "fac_kingdom_31", slot_faction_adjective, "str_kingdom_31_adjective"),
    (faction_set_slot, "fac_kingdom_32", slot_faction_adjective, "str_kingdom_32_adjective"),
    (faction_set_slot, "fac_kingdom_33", slot_faction_adjective, "str_kingdom_33_adjective"),
    (faction_set_slot, "fac_kingdom_34", slot_faction_adjective, "str_kingdom_34_adjective"),
    (faction_set_slot, "fac_kingdom_35", slot_faction_adjective, "str_kingdom_35_adjective"),
    (faction_set_slot, "fac_kingdom_36", slot_faction_adjective, "str_kingdom_36_adjective"),
    (faction_set_slot, "fac_kingdom_37", slot_faction_adjective, "str_kingdom_37_adjective"),
    (faction_set_slot, "fac_kingdom_38", slot_faction_adjective, "str_kingdom_38_adjective"),
    (faction_set_slot, "fac_kingdom_39", slot_faction_adjective, "str_kingdom_39_adjective"),
    (faction_set_slot, "fac_kingdom_40", slot_faction_adjective, "str_kingdom_40_adjective"),
    (faction_set_slot, "fac_kingdom_41", slot_faction_adjective, "str_kingdom_41_adjective"),
    (faction_set_slot, "fac_kingdom_42", slot_faction_adjective, "str_kingdom_42_adjective"),
    (call_script, "script_get_player_party_morale_values"),
    (party_set_morale, "p_main_party", reg0),
    (troop_set_note_available, "trp_player", 1),
    (try_for_range, ":var_59", "trp_kingdom_1_lord", "trp_knight_1_1"),
        (troop_set_note_available, ":var_59", 1),
    (try_end),
    (try_for_range, ":var_59", "trp_knight_1_1", "trp_kingdom_2_pretender"),
        (troop_set_note_available, ":var_59", 1),
    (try_end),
    (try_for_range, ":var_59", "trp_knight_1_1_wife", "trp_heroes_end"),
        (troop_set_note_available, ":var_59", 1),
    (try_end),
    (troop_set_note_available, "trp_knight_1_1_wife", 0),
    (try_for_range, ":var_59", "trp_kingdom_4_pretender", "trp_knight_1_1_wife"),
        (troop_set_note_available, ":var_59", 1),
    (try_end),
    (try_for_range, ":var_6", "fac_kingdom_1", "fac_kingdoms_end"),
        (faction_set_note_available, ":var_6", 1),
        (faction_set_slot, ":var_6", 103, 0),
    (try_end),
    (faction_set_note_available, "fac_neutral", 0),
    (try_for_range, ":var_89", "p_town_1_1", "p_salt_mine"),
        (party_set_note_available, ":var_89", 1),
    (try_end),
    (try_for_range, ":var_50", "p_village_1_1", "p_salt_mine"),
        (call_script, "script_update_volunteer_troops_in_village", ":var_50"),
    (try_end),
    (try_for_range, ":var_50", "p_town_1_1", "p_castle_1_1"),
        (call_script, "script_update_volunteer_troops_in_village", ":var_50"),
        (call_script, "script_update_npc_volunteer_troops_in_village", ":var_50"),
    (try_end),
    (try_for_range, ":var_50", "p_castle_1_1", "p_village_1_1"),
        (call_script, "script_update_volunteer_troops_in_village", ":var_50"),
        (call_script, "script_update_npc_volunteer_troops_in_village", ":var_50"),
    (try_end),
    (call_script, "script_troop_change_relation_with_troop", "trp_kingdom_2_lord", "trp_kingdom_4_lord", -15),
    (call_script, "script_troop_change_relation_with_troop", "trp_kingdom_4_lord", "trp_kingdom_2_lord", -15),
    (call_script, "script_troop_change_relation_with_troop", "trp_kingdom_14_lord", "trp_kingdom_2_lord", -15),
    (call_script, "script_troop_change_relation_with_troop", "trp_kingdom_2_lord", "trp_kingdom_14_lord", -15),
    (call_script, "script_troop_change_relation_with_troop", "trp_kingdom_15_lord", "trp_kingdom_2_lord", 5),
    (call_script, "script_troop_change_relation_with_troop", "trp_kingdom_2_lord", "trp_kingdom_15_lord", 5),
    (call_script, "script_troop_change_relation_with_troop", "trp_kingdom_5_lord", "trp_kingdom_2_lord", 5),
    (call_script, "script_troop_change_relation_with_troop", "trp_kingdom_2_lord", "trp_kingdom_5_lord", 5),
    (call_script, "script_troop_change_relation_with_troop", "trp_kingdom_15_lord", "trp_kingdom_3_lord", -5),
    (call_script, "script_troop_change_relation_with_troop", "trp_kingdom_8_lord", "trp_kingdom_3_lord", 15),
    (call_script, "script_troop_change_relation_with_troop", "trp_kingdom_3_lord", "trp_kingdom_8_lord", 15),
    (call_script, "script_troop_change_relation_with_troop", "trp_kingdom_1_lord", "trp_kingdom_2_lord", -15),
    (call_script, "script_troop_change_relation_with_troop", "trp_kingdom_2_lord", "trp_kingdom_1_lord", -15),
    (call_script, "script_troop_change_relation_with_troop", "trp_kingdom_13_lord", "trp_kingdom_9_lord", -15),
    (call_script, "script_troop_change_relation_with_troop", "trp_kingdom_9_lord", "trp_kingdom_13_lord", -15),
    (call_script, "script_troop_change_relation_with_troop", "trp_kingdom_12_lord", "trp_kingdom_9_lord", -2),
    (call_script, "script_troop_change_relation_with_troop", "trp_kingdom_9_lord", "trp_kingdom_12_lord", -2),
    (call_script, "script_troop_change_relation_with_troop", "trp_kingdom_10_lord", "trp_kingdom_9_lord", -10),
    (call_script, "script_troop_change_relation_with_troop", "trp_kingdom_9_lord", "trp_kingdom_10_lord", -10),
    (call_script, "script_troop_change_relation_with_troop", "trp_kingdom_17_lord", "trp_kingdom_20_lord", 5),
    (call_script, "script_troop_change_relation_with_troop", "trp_kingdom_20_lord", "trp_kingdom_17_lord", 5),
    (call_script, "script_troop_change_relation_with_troop", "trp_kingdom_3_lord", "trp_kingdom_27_lord", -10),
    (call_script, "script_troop_change_relation_with_troop", "trp_kingdom_27_lord", "trp_kingdom_3_lord", -10),
    (call_script, "script_troop_change_relation_with_troop", "trp_kingdom_23_lord", "trp_kingdom_25_lord", -50),
    (call_script, "script_troop_change_relation_with_troop", "trp_kingdom_25_lord", "trp_kingdom_23_lord", -50),
    (call_script, "script_troop_change_relation_with_troop", "trp_kingdom_22_lord", "trp_kingdom_26_lord", -50),
    (call_script, "script_troop_change_relation_with_troop", "trp_kingdom_29_lord", "trp_kingdom_22_lord", -3),
    (call_script, "script_troop_change_relation_with_troop", "trp_kingdom_30_lord", "trp_kingdom_22_lord", -3),
    (call_script, "script_troop_change_relation_with_troop", "trp_kingdom_29_lord", "trp_kingdom_30_lord", -1),
    (call_script, "script_troop_change_relation_with_troop", "trp_kingdom_30_lord", "trp_kingdom_29_lord", -1),
    (try_for_range, ":var_11", 0, 100),
        (call_script, "script_cf_random_political_event"),
    (try_end),
    (call_script, "script_initialize_item_banners"),

]),

("game_get_use_string",
[
    (store_script_param, ":var_0", 1),
    (prop_instance_get_scene_prop_kind, ":var_1", ":var_0"),
    (try_begin),
        (this_or_next|eq, ":var_1", "spr_winch_b"),
        (eq, ":var_1", "spr_winch"),
        (assign, ":var_2", "spr_portcullis"),
    (else_try),
        (this_or_next|eq, ":var_1", "spr_door_destructible"),
        (this_or_next|eq, ":var_1", "spr_castle_f_door_b"),
        (this_or_next|eq, ":var_1", "spr_castle_e_sally_door_a"),
        (this_or_next|eq, ":var_1", "spr_castle_f_sally_door_a"),
        (this_or_next|eq, ":var_1", "spr_earth_sally_gate_left"),
        (this_or_next|eq, ":var_1", "spr_earth_sally_gate_right"),
        (this_or_next|eq, ":var_1", "spr_viking_keep_destroy_sally_door_left"),
        (this_or_next|eq, ":var_1", "spr_viking_keep_destroy_sally_door_right"),
        (this_or_next|eq, ":var_1", "spr_castle_f_door_a"),
        (this_or_next|eq, ":var_1", "spr_siege_ladder_move_6m"),
        (this_or_next|eq, ":var_1", "spr_siege_ladder_move_8m"),
        (this_or_next|eq, ":var_1", "spr_siege_ladder_move_10m"),
        (this_or_next|eq, ":var_1", "spr_siege_ladder_move_12m"),
        (eq, ":var_1", "spr_siege_ladder_move_14m"),
        (assign, ":var_2", ":var_1"),
    (try_end),
    (scene_prop_get_slot, ":var_3", ":var_0", 1),
    (try_begin),
        (eq, ":var_2", "spr_portcullis"),
        (try_begin),
            (eq, ":var_3", 0),
            (str_store_string, s0, "str_open_gate"),
        (else_try),
            (str_store_string, s0, "str_close_gate"),
        (try_end),
    (else_try),
        (this_or_next|eq, ":var_2", "spr_door_destructible"),
        (this_or_next|eq, ":var_2", "spr_castle_f_door_b"),
        (this_or_next|eq, ":var_2", "spr_castle_e_sally_door_a"),
        (this_or_next|eq, ":var_2", "spr_castle_f_sally_door_a"),
        (this_or_next|eq, ":var_2", "spr_earth_sally_gate_left"),
        (this_or_next|eq, ":var_2", "spr_earth_sally_gate_right"),
        (this_or_next|eq, ":var_2", "spr_viking_keep_destroy_sally_door_left"),
        (this_or_next|eq, ":var_2", "spr_viking_keep_destroy_sally_door_right"),
        (eq, ":var_2", "spr_castle_f_door_a"),
        (try_begin),
            (eq, ":var_3", 0),
            (str_store_string, s0, "str_open_door"),
        (else_try),
            (str_store_string, s0, "str_close_door"),
        (try_end),
    (else_try),
        (try_begin),
            (eq, ":var_3", 0),
            (str_store_string, s0, "str_raise_ladder"),
        (else_try),
            (str_store_string, s0, "str_drop_ladder"),
        (try_end),
    (try_end),

]),

("game_quick_start",
[
    (assign, "$g_is_quick_battle", 0),
    (assign, "$g_quick_battle_game_type", 0),
    (assign, "$g_quick_battle_troop", "trp_quick_battle_troop_1"),
    (assign, "$g_quick_battle_map", "scn_quick_battle_scene_1"),
    (assign, "$g_quick_battle_team_1_faction", "fac_kingdom_1"),
    (assign, "$g_quick_battle_team_2_faction", "fac_kingdom_2"),
    (assign, "$g_quick_battle_army_1_size", 25),
    (assign, "$g_quick_battle_army_2_size", 25),
    (faction_set_slot, "fac_outlaws", slot_faction_quick_battle_tier_1_infantry, "trp_mountain_bandit"),
    (faction_set_slot, "fac_outlaws", slot_faction_quick_battle_tier_2_infantry, "trp_sea_raider"),
    (faction_set_slot, "fac_outlaws", slot_faction_quick_battle_tier_1_archer, "trp_forest_bandit"),
    (faction_set_slot, "fac_outlaws", slot_faction_quick_battle_tier_2_archer, "trp_taiga_bandit"),
    (faction_set_slot, "fac_outlaws", slot_faction_quick_battle_tier_1_cavalry, "trp_steppe_bandit"),
    (faction_set_slot, "fac_outlaws", slot_faction_quick_battle_tier_2_cavalry, "trp_desert_bandit"),
    (try_for_range, ":var_0", "fac_kingdom_1", "fac_kingdoms_end"),
        (call_script, "script_raf_aor_faction_to_region", ":var_0"),
        (try_begin),
            (eq, reg0, 1),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_1_infantry, "trp_balt_billman"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_2_infantry, "trp_balt_spearman"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_1_archer, "trp_balt_archer"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_2_archer, "trp_balt_jav"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_1_cavalry, "trp_balt_medium_cavalry"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_2_cavalry, "trp_balt_noble_3"),
        (else_try),
            (eq, reg0, 2),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_1_infantry, "trp_nordic_veteran_spearman"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_2_infantry, "trp_nordic_veteran_billman"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_1_archer, "trp_nordic_veteran_archer"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_2_archer, "trp_nordic_veteran_crossbowman"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_1_cavalry, "trp_nordic_squire"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_2_cavalry, "trp_nordic_knight"),
        (else_try),
            (eq, reg0, 3),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_1_infantry, "trp_rus_town_3_2"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_2_infantry, "trp_rus_town_2"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_1_archer, "trp_rus_vil_3_2"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_2_archer, "trp_rus_vil_3_2"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_1_cavalry, "trp_rus_horse_3"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_2_cavalry, "trp_rus_horse_4"),
        (else_try),
            (eq, reg0, 15),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_1_infantry, "trp_rus_town_3_2"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_2_infantry, "trp_rus_town_2"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_1_archer, "trp_rus_vil_3_2"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_2_archer, "trp_rus_vil_3_2"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_1_cavalry, "trp_rus_horse_3"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_2_cavalry, "trp_rus_horse_4"),
        (else_try),
            (eq, reg0, 4),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_1_infantry, "trp_tatar_horseman"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_2_infantry, "trp_tatar_horseman"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_1_archer, "trp_tatar_horse_archer"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_2_archer, "trp_tatar_veteran_horse_archer"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_1_cavalry, "trp_tatar_lancer"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_2_cavalry, "trp_tatar_heavy_lancer"),
        (else_try),
            (this_or_next|eq, reg0, 16),
            (eq, reg0, 5),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_1_infantry, "trp_euro_spearman_2"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_2_infantry, "trp_euro_spearman_3"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_1_archer, "trp_euro_xbow_2"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_2_archer, "trp_euro_archer_2"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_1_cavalry, "trp_euro_horse_2"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_2_cavalry, "trp_euro_horse_4"),
        (else_try),
            (eq, reg0, 13),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_1_infantry, "trp_iberian_town_footman_1"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_2_infantry, "trp_iberian_veteran_spearman"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_1_archer, "trp_iberian_veteran_crossbowman"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_2_archer, "trp_iberian_crossbows_sergeant"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_1_cavalry, "trp_iberian_medium_cavalry"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_2_cavalry, "trp_iberian_knight"),
        (else_try),
            (eq, reg0, 14),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_1_infantry, "trp_iberian_town_footman_1"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_2_infantry, "trp_iberian_veteran_spearman"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_1_archer, "trp_iberian_veteran_crossbowman"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_2_archer, "trp_iberian_crossbows_sergeant"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_1_cavalry, "trp_iberian_medium_cavalry"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_2_cavalry, "trp_iberian_knight"),
        (else_try),
            (eq, reg0, 7),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_1_infantry, "trp_gaelic_infantry_1"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_2_infantry, "trp_merc_gaelic_spearman_2"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_1_archer, "trp_gaelic_archer_1"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_2_archer, "trp_gaelic_archer_1"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_1_cavalry, "trp_gaelic_medium_cavalry"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_2_cavalry, "trp_gaelic_knight"),
        (else_try),
            (eq, reg0, 6),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_1_infantry, "trp_teu_balt_3"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_2_infantry, "trp_teu_town_4_1"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_1_archer, "trp_teu_town_3_2"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_2_archer, "trp_teu_town_4_2"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_1_cavalry, "trp_teu_horse_3"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_2_cavalry, "trp_teu_horse_4"),
        (else_try),
            (eq, reg0, 10),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_1_infantry, "trp_andalus_spearman_1"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_2_infantry, "trp_andalus_spearman_2"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_1_archer, "trp_andalus_town_xbow_1"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_2_archer, "trp_andalus_town_xbow_2"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_1_cavalry, "trp_andalus_horse_2"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_2_cavalry, "trp_andalus_horse_3"),
        (else_try),
            (eq, reg0, 11),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_1_infantry, "trp_marinid_levy_spearman"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_2_infantry, "trp_marinid_swordsman"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_1_archer, "trp_marinid_skirmishers"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_2_archer, "trp_marinid_javelin_infantry"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_1_cavalry, "trp_marinid_mounted_skirmisher_2"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_2_cavalry, "trp_marinid_mounted_skirmisher_3"),
        (else_try),
            (eq, reg0, 12),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_1_infantry, "trp_halqa_recruit"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_2_infantry, "trp_halqa_archer"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_1_archer, "trp_bedouin_recruit"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_2_archer, "trp_bedouin_spearman"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_1_cavalry, "trp_bedouin_cav_2"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_2_cavalry, "trp_halqa_cav_3"),
        (else_try),
            (eq, reg0, 8),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_1_infantry, "trp_hospitaller_half_brother"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_2_infantry, "trp_templar_half_brother"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_1_archer, "trp_hospitaller_knight"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_2_archer, "trp_templar_knight"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_1_cavalry, "trp_hospitaller_knight"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_2_cavalry, "trp_templar_knight"),
        (else_try),
            (eq, reg0, 9),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_1_infantry, "trp_byz_town_3_1"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_2_infantry, "trp_byz_town_3_2"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_1_archer, "trp_byz_village_3_1"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_2_archer, "trp_byz_village_3_2"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_1_cavalry, "trp_byz_castle_3"),
            (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_2_cavalry, "trp_byz_castle_4"),
        (try_end),
    (try_end),
    (assign, "$g_multiplayer_selected_map", "scn_multi_scene_1"),
    (assign, "$g_multiplayer_respawn_period", 5),
    (assign, "$g_multiplayer_round_max_seconds", 300),
    (assign, "$g_multiplayer_game_max_minutes", 30),
    (assign, "$g_multiplayer_game_max_points", 300),
    (server_get_renaming_server_allowed, "$g_multiplayer_renaming_server_allowed"),
    (server_get_changing_game_type_allowed, "$g_multiplayer_changing_game_type_allowed"),
    (assign, "$g_multiplayer_point_gained_from_flags", 100),
    (assign, "$g_multiplayer_point_gained_from_capturing_flag", 5),
    (assign, "$g_multiplayer_game_type", 0),
    (assign, "$g_multiplayer_team_1_faction", "fac_kingdom_1"),
    (assign, "$g_multiplayer_team_2_faction", "fac_kingdom_2"),
    (assign, "$g_multiplayer_next_team_1_faction", "$g_multiplayer_team_1_faction"),
    (assign, "$g_multiplayer_next_team_2_faction", "$g_multiplayer_team_2_faction"),
    (assign, "$g_multiplayer_num_bots_team_1", 0),
    (assign, "$g_multiplayer_num_bots_team_2", 0),
    (assign, "$g_multiplayer_number_of_respawn_count", 0),
    (assign, "$g_multiplayer_num_bots_voteable", 50),
    (assign, "$g_multiplayer_max_num_bots", 101),
    (assign, "$g_multiplayer_factions_voteable", 1),
    (assign, "$g_multiplayer_maps_voteable", 1),
    (assign, "$g_multiplayer_kick_voteable", 1),
    (assign, "$g_multiplayer_ban_voteable", 1),
    (assign, "$g_multiplayer_valid_vote_ratio", 51),
    (assign, "$g_multiplayer_auto_team_balance_limit", 3),
    (assign, "$g_multiplayer_player_respawn_as_bot", 1),
    (assign, "$g_multiplayer_stats_chart_opened_manually", 0),
    (assign, "$g_multiplayer_mission_end_screen", 0),
    (assign, "$g_multiplayer_ready_for_spawning_agent", 1),
    (assign, "$g_multiplayer_welcome_message_shown", 0),
    (assign, "$g_multiplayer_allow_player_banners", 1),
    (assign, "$g_multiplayer_force_default_armor", 1),
    (assign, "$g_multiplayer_disallow_ranged_weapons", 0),
    (assign, "$g_multiplayer_initial_gold_multiplier", 100),
    (assign, "$g_multiplayer_battle_earnings_multiplier", 100),
    (assign, "$g_multiplayer_round_earnings_multiplier", 100),
    (faction_set_slot, "fac_kingdom_1", slot_faction_banner, "mesh_banner_kingdom_1"),
    (faction_set_slot, "fac_kingdom_2", slot_faction_banner, "mesh_banner_kingdom_2"),
    (faction_set_slot, "fac_kingdom_3", slot_faction_banner, "mesh_banner_kingdom_3"),
    (faction_set_slot, "fac_kingdom_4", slot_faction_banner, "mesh_banner_kingdom_4"),
    (faction_set_slot, "fac_kingdom_5", slot_faction_banner, "mesh_banner_kingdom_5"),
    (faction_set_slot, "fac_kingdom_6", slot_faction_banner, "mesh_banner_kingdom_6"),
    (faction_set_slot, "fac_kingdom_7", slot_faction_banner, "mesh_banner_kingdom_7"),
    (faction_set_slot, "fac_kingdom_8", slot_faction_banner, "mesh_banner_kingdom_8"),
    (faction_set_slot, "fac_kingdom_9", slot_faction_banner, "mesh_banner_kingdom_9"),
    (faction_set_slot, "fac_kingdom_10", slot_faction_banner, "mesh_banner_kingdom_10"),
    (faction_set_slot, "fac_kingdom_11", slot_faction_banner, "mesh_banner_kingdom_11"),
    (faction_set_slot, "fac_kingdom_12", slot_faction_banner, "mesh_banner_kingdom_12"),
    (faction_set_slot, "fac_kingdom_13", slot_faction_banner, "mesh_banner_kingdom_13"),
    (faction_set_slot, "fac_kingdom_14", slot_faction_banner, "mesh_banner_kingdom_14"),
    (faction_set_slot, "fac_kingdom_15", slot_faction_banner, "mesh_banner_kingdom_15"),
    (faction_set_slot, "fac_kingdom_16", slot_faction_banner, "mesh_banner_kingdom_16"),
    (faction_set_slot, "fac_kingdom_17", slot_faction_banner, "mesh_banner_kingdom_17"),
    (faction_set_slot, "fac_kingdom_18", slot_faction_banner, "mesh_banner_kingdom_18"),
    (faction_set_slot, "fac_kingdom_19", slot_faction_banner, "mesh_banner_kingdom_19"),
    (faction_set_slot, "fac_kingdom_20", slot_faction_banner, "mesh_banner_kingdom_20"),
    (faction_set_slot, "fac_papacy", slot_faction_banner, "mesh_banner_kingdom_21"),
    (faction_set_slot, "fac_kingdom_22", slot_faction_banner, "mesh_banner_kingdom_22"),
    (faction_set_slot, "fac_kingdom_23", slot_faction_banner, "mesh_banner_kingdom_23"),
    (faction_set_slot, "fac_kingdom_24", slot_faction_banner, "mesh_banner_kingdom_24"),
    (faction_set_slot, "fac_kingdom_25", slot_faction_banner, "mesh_banner_kingdom_25"),
    (faction_set_slot, "fac_kingdom_26", slot_faction_banner, "mesh_banner_kingdom_26"),
    (faction_set_slot, "fac_kingdom_27", slot_faction_banner, "mesh_banner_kingdom_27"),
    (faction_set_slot, "fac_kingdom_28", slot_faction_banner, "mesh_banner_kingdom_28"),
    (faction_set_slot, "fac_kingdom_29", slot_faction_banner, "mesh_banner_kingdom_29"),
    (faction_set_slot, "fac_kingdom_30", slot_faction_banner, "mesh_banner_kingdom_30"),
    (faction_set_slot, "fac_kingdom_31", slot_faction_banner, "mesh_banner_kingdom_31"),
    (faction_set_slot, "fac_kingdom_32", slot_faction_banner, "mesh_banner_kingdom_31"),
    (faction_set_slot, "fac_kingdom_34", slot_faction_banner, "mesh_banner_kingdom_2"),
    (faction_set_slot, "fac_kingdom_35", slot_faction_banner, "mesh_banner_kingdom_2"),
    (faction_set_slot, "fac_kingdom_36", slot_faction_banner, "mesh_banner_kingdom_2"),
    (faction_set_slot, "fac_kingdom_33", slot_faction_banner, "mesh_banner_kingdom_2"),
    (faction_set_slot, "fac_kingdom_34", slot_faction_banner, "mesh_banner_kingdom_2"),
    (faction_set_slot, "fac_kingdom_35", slot_faction_banner, "mesh_banner_kingdom_6"),
    (faction_set_slot, "fac_kingdom_36", slot_faction_banner, "mesh_banner_kingdom_6"),
    (faction_set_slot, "fac_kingdom_37", slot_faction_banner, "mesh_banner_kingdom_6"),
    (faction_set_slot, "fac_kingdom_38", slot_faction_banner, "mesh_banner_kingdom_6"),
    (faction_set_slot, "fac_kingdom_39", slot_faction_banner, "mesh_banner_kingdom_6"),
    (faction_set_slot, "fac_kingdom_40", slot_faction_banner, "mesh_banner_kingdom_6"),
    (faction_set_slot, "fac_kingdom_41", slot_faction_banner, "mesh_banner_kingdom_6"),
    (faction_set_slot, "fac_kingdom_42", slot_faction_banner, "mesh_banner_kingdom_6"),
    (try_for_range, ":var_1", 0, "itm_pig_killer"),
        (try_for_range, ":var_2", "fac_kingdom_1", "fac_kingdoms_end"),
            (store_sub, ":var_3", ":var_2", "fac_kingdom_1"),
            (val_add, ":var_3", 30),
            (item_set_slot, ":var_1", ":var_3", 100),
        (try_end),
    (try_end),
    (store_sub, ":var_4", "fac_kingdom_1", "fac_kingdom_1"),
    (val_add, ":var_4", 30),
    (store_sub, ":var_5", "fac_kingdom_2", "fac_kingdom_1"),
    (val_add, ":var_5", 30),
    (store_sub, ":var_6", "fac_kingdom_3", "fac_kingdom_1"),
    (val_add, ":var_6", 30),
    (store_sub, ":var_7", "fac_kingdom_4", "fac_kingdom_1"),
    (val_add, ":var_7", 30),
    (store_sub, ":var_8", "fac_kingdom_5", "fac_kingdom_1"),
    (val_add, ":var_8", 30),
    (store_sub, ":var_9", "fac_kingdom_6", "fac_kingdom_1"),
    (val_add, ":var_9", 30),
    (item_set_slot, "itm_arrows", slot_item_multiplayer_item_class, 14),
    (item_set_slot, "itm_barbed_arrows", slot_item_multiplayer_item_class, 14),
    (item_set_slot, "itm_bodkin_arrows", slot_item_multiplayer_item_class, 14),
    (item_set_slot, "itm_khergit_arrows", slot_item_multiplayer_item_class, 14),
    (item_set_slot, "itm_bolts", slot_item_multiplayer_item_class, 15),
    (item_set_slot, "itm_steel_bolts", slot_item_multiplayer_item_class, 15),
    (item_set_slot, "itm_crossbow", slot_item_multiplayer_item_class, 12),
    (item_set_slot, "itm_heavy_crossbow", slot_item_multiplayer_item_class, 12),
    (item_set_slot, "itm_sniper_crossbow", slot_item_multiplayer_item_class, 12),
    (item_set_slot, "itm_nomad_bow", slot_item_multiplayer_item_class, 12),
    (item_set_slot, "itm_khergit_bow", slot_item_multiplayer_item_class, 12),
    (item_set_slot, "itm_strong_bow", slot_item_multiplayer_item_class, 12),
    (item_set_slot, "itm_short_bow", slot_item_multiplayer_item_class, 12),
    (item_set_slot, "itm_long_bow", slot_item_multiplayer_item_class, 12),
    (item_set_slot, "itm_light_crossbow", slot_item_multiplayer_item_class, 12),
    (item_set_slot, "itm_sword_type_xii", slot_item_multiplayer_item_class, 1),
    (item_set_slot, "itm_sword_type_xiii", slot_item_multiplayer_item_class, 1),
    (item_set_slot, "itm_sword_type_xiv", slot_item_multiplayer_item_class, 1),
    (item_set_slot, "itm_sword_type_xiiib", slot_item_multiplayer_item_class, 1),
    (item_set_slot, "itm_sword_type_xiv", slot_item_multiplayer_item_class, 1),
    (item_set_slot, "itm_scimitar", slot_item_multiplayer_item_class, 1),
    (item_set_slot, "itm_scimitar_b", slot_item_multiplayer_item_class, 1),
    (item_set_slot, "itm_dagger", slot_item_multiplayer_item_class, 1),
    (item_set_slot, "itm_sword_khergit_1", slot_item_multiplayer_item_class, 1),
    (item_set_slot, "itm_sword_khergit_2", slot_item_multiplayer_item_class, 1),
    (item_set_slot, "itm_sword_khergit_3", slot_item_multiplayer_item_class, 1),
    (item_set_slot, "itm_sword_khergit_4", slot_item_multiplayer_item_class, 1),
    (item_set_slot, "itm_sword_viking_1", slot_item_multiplayer_item_class, 1),
    (item_set_slot, "itm_sword_viking_2", slot_item_multiplayer_item_class, 1),
    (item_set_slot, "itm_sword_viking_2_small", slot_item_multiplayer_item_class, 1),
    (item_set_slot, "itm_sword_viking_3", slot_item_multiplayer_item_class, 1),
    (item_set_slot, "itm_sword_viking_3_small", slot_item_multiplayer_item_class, 1),
    (item_set_slot, "itm_sword_type_xiia", slot_item_multiplayer_item_class, 6),
    (item_set_slot, "itm_sword_type_xiiia", slot_item_multiplayer_item_class, 6),
    (item_set_slot, "itm_raf_two_handed_axe_a", slot_item_multiplayer_item_class, 2),
    (item_set_slot, "itm_shortened_voulge", slot_item_multiplayer_item_class, 7),
    (item_set_slot, "itm_long_axe", slot_item_multiplayer_item_class, 7),
    (item_set_slot, "itm_long_axe_b", slot_item_multiplayer_item_class, 7),
    (item_set_slot, "itm_mace_1", slot_item_multiplayer_item_class, 3),
    (item_set_slot, "itm_mace_2", slot_item_multiplayer_item_class, 3),
    (item_set_slot, "itm_mace_3", slot_item_multiplayer_item_class, 3),
    (item_set_slot, "itm_mace_4", slot_item_multiplayer_item_class, 3),
    (item_set_slot, "itm_long_spiked_club", slot_item_multiplayer_item_class, 3),
    (item_set_slot, "itm_long_hafted_spiked_mace", slot_item_multiplayer_item_class, 3),
    (item_set_slot, "itm_maul", slot_item_multiplayer_item_class, 3),
    (item_set_slot, "itm_sledgehammer", slot_item_multiplayer_item_class, 3),
    (item_set_slot, "itm_morningstar", slot_item_multiplayer_item_class, 3),
    (item_set_slot, "itm_military_sickle_a", slot_item_multiplayer_item_class, 4),
    (item_set_slot, "itm_fighting_pick", slot_item_multiplayer_item_class, 4),
    (item_set_slot, "itm_military_pick", slot_item_multiplayer_item_class, 4),
    (item_set_slot, "itm_club_with_spike_head", slot_item_multiplayer_item_class, 4),
    (item_set_slot, "itm_military_cleaver_b", slot_item_multiplayer_item_class, 5),
    (item_set_slot, "itm_military_cleaver_c", slot_item_multiplayer_item_class, 5),
    (item_set_slot, "itm_two_handed_cleaver", slot_item_multiplayer_item_class, 5),
    (item_set_slot, "itm_hafted_blade_a", slot_item_multiplayer_item_class, 5),
    (item_set_slot, "itm_hafted_blade_b", slot_item_multiplayer_item_class, 5),
    (item_set_slot, "itm_shortened_military_scythe", slot_item_multiplayer_item_class, 5),
    (item_set_slot, "itm_glaive", slot_item_multiplayer_item_class, 8),
    (item_set_slot, "itm_staff", slot_item_multiplayer_item_class, 8),
    (item_set_slot, "itm_quarter_staff", slot_item_multiplayer_item_class, 8),
    (item_set_slot, "itm_spear_i", slot_item_multiplayer_item_class, 8),
    (item_set_slot, "itm_military_scythe", slot_item_multiplayer_item_class, 8),
    (item_set_slot, "itm_light_lance", slot_item_multiplayer_item_class, 9),
    (item_set_slot, "itm_lance", slot_item_multiplayer_item_class, 9),
    (item_set_slot, "itm_heavy_lance", slot_item_multiplayer_item_class, 9),
    (item_set_slot, "itm_tab_shield_round_a", slot_item_multiplayer_item_class, 10),
    (item_set_slot, "itm_tab_shield_round_b", slot_item_multiplayer_item_class, 10),
    (item_set_slot, "itm_tab_shield_round_c", slot_item_multiplayer_item_class, 10),
    (item_set_slot, "itm_tab_shield_round_d", slot_item_multiplayer_item_class, 10),
    (item_set_slot, "itm_tab_shield_round_e", slot_item_multiplayer_item_class, 10),
    (item_set_slot, "itm_tab_shield_kite_c", slot_item_multiplayer_item_class, 10),
    (item_set_slot, "itm_tab_shield_kite_c", slot_item_multiplayer_item_class, 10),
    (item_set_slot, "itm_tab_shield_kite_c", slot_item_multiplayer_item_class, 10),
    (item_set_slot, "itm_tab_shield_kite_c", slot_item_multiplayer_item_class, 10),
    (item_set_slot, "itm_tab_shield_kite_cav_a", slot_item_multiplayer_item_class, 10),
    (item_set_slot, "itm_tab_shield_kite_cav_b", slot_item_multiplayer_item_class, 10),
    (item_set_slot, "itm_tab_shield_heater_c", slot_item_multiplayer_item_class, 10),
    (item_set_slot, "itm_tab_shield_heater_c", slot_item_multiplayer_item_class, 10),
    (item_set_slot, "itm_tab_shield_heater_c", slot_item_multiplayer_item_class, 10),
    (item_set_slot, "itm_tab_shield_heater_c", slot_item_multiplayer_item_class, 10),
    (item_set_slot, "itm_tab_shield_heater_cav_a", slot_item_multiplayer_item_class, 10),
    (item_set_slot, "itm_tab_shield_heater_cav_b", slot_item_multiplayer_item_class, 10),
    (item_set_slot, "itm_tab_shield_heater_c", slot_item_multiplayer_item_class, 10),
    (item_set_slot, "itm_tab_shield_heater_c", slot_item_multiplayer_item_class, 10),
    (item_set_slot, "itm_tab_shield_heater_c", slot_item_multiplayer_item_class, 10),
    (item_set_slot, "itm_tab_shield_heater_c", slot_item_multiplayer_item_class, 10),
    (item_set_slot, "itm_tab_shield_small_round_a", slot_item_multiplayer_item_class, 10),
    (item_set_slot, "itm_tab_shield_small_round_b", slot_item_multiplayer_item_class, 10),
    (item_set_slot, "itm_tab_shield_small_round_c", slot_item_multiplayer_item_class, 10),
    (item_set_slot, "itm_darts", slot_item_multiplayer_item_class, 16),
    (item_set_slot, "itm_war_darts", slot_item_multiplayer_item_class, 16),
    (item_set_slot, "itm_javelin", slot_item_multiplayer_item_class, 16),
    (item_set_slot, "itm_jarid", slot_item_multiplayer_item_class, 16),
    (item_set_slot, "itm_throwing_spears", slot_item_multiplayer_item_class, 16),
    (item_set_slot, "itm_red_shirt", slot_item_multiplayer_item_class, 19),
    (item_set_slot, "itm_gambeson_a", slot_item_multiplayer_item_class, 19),
    (item_set_slot, "itm_haubergeon", slot_item_multiplayer_item_class, 19),
    (item_set_slot, "itm_coat_of_plates_red", slot_item_multiplayer_item_class, 19),
    (item_set_slot, "itm_mail_with_surcoat", slot_item_multiplayer_item_class, 19),
    (item_set_slot, "itm_linen_tunic", slot_item_multiplayer_item_class, 19),
    (item_set_slot, "itm_leather_vest", slot_item_multiplayer_item_class, 19),
    (item_set_slot, "itm_leather_jerkin", slot_item_multiplayer_item_class, 19),
    (item_set_slot, "itm_lamellar_vest", slot_item_multiplayer_item_class, 19),
    (item_set_slot, "itm_coarse_tunic", slot_item_multiplayer_item_class, 19),
    (item_set_slot, "itm_tribal_warrior_outfit", slot_item_multiplayer_item_class, 19),
    (item_set_slot, "itm_tunic_with_green_cape", slot_item_multiplayer_item_class, 19),
    (item_set_slot, "itm_surcoat_over_mail", slot_item_multiplayer_item_class, 19),
    (item_set_slot, "itm_hide_boots", slot_item_multiplayer_item_class, 24),
    (item_set_slot, "itm_ankle_boots", slot_item_multiplayer_item_class, 24),
    (item_set_slot, "itm_nomad_boots", slot_item_multiplayer_item_class, 24),
    (item_set_slot, "itm_leather_boots", slot_item_multiplayer_item_class, 24),
    (item_set_slot, "itm_splinted_leather_greaves", slot_item_multiplayer_item_class, 24),
    (item_set_slot, "itm_mail_chausses", slot_item_multiplayer_item_class, 24),
    (item_set_slot, "itm_splinted_leather_greaves", slot_item_multiplayer_item_class, 24),
    (item_set_slot, "itm_splinted_greaves", slot_item_multiplayer_item_class, 24),
    (item_set_slot, "itm_mail_boots", slot_item_multiplayer_item_class, 24),
    (item_set_slot, "itm_leather_steppe_cap_a", slot_item_multiplayer_item_class, 22),
    (item_set_slot, "itm_leather_steppe_cap_b", slot_item_multiplayer_item_class, 22),
    (item_set_slot, "itm_leather_steppe_cap_c", slot_item_multiplayer_item_class, 22),
    (item_set_slot, "itm_khergit_war_helmet", slot_item_multiplayer_item_class, 22),
    (item_set_slot, "itm_khergit_guard_helmet", slot_item_multiplayer_item_class, 22),
    (item_set_slot, "itm_arming_cap", slot_item_multiplayer_item_class, 22),
    (item_set_slot, "itm_padded_coif", slot_item_multiplayer_item_class, 22),
    (item_set_slot, "itm_mail_coif", slot_item_multiplayer_item_class, 22),
    (item_set_slot, "itm_footman_helmet", slot_item_multiplayer_item_class, 22),
    (item_set_slot, "itm_kettlehat_a", slot_item_multiplayer_item_class, 22),
    (item_set_slot, "itm_flat_topped_helmet_a", slot_item_multiplayer_item_class, 22),
    (item_set_slot, "itm_vik_norman_helmet_a", slot_item_multiplayer_item_class, 22),
    (item_set_slot, "itm_maciejowski_helm", slot_item_multiplayer_item_class, 22),
    (item_set_slot, "itm_nomad_cap", slot_item_multiplayer_item_class, 22),
    (item_set_slot, "itm_leather_cap", slot_item_multiplayer_item_class, 22),
    (item_set_slot, "itm_rus_noble_helmet", slot_item_multiplayer_item_class, 22),
    (item_set_slot, "itm_rus_helmet_a", slot_item_multiplayer_item_class, 22),
    (item_set_slot, "itm_vaegir_mask", slot_item_multiplayer_item_class, 22),
    (item_set_slot, "itm_leather_gloves", slot_item_multiplayer_item_class, 26),
    (item_set_slot, "itm_mail_mittens", slot_item_multiplayer_item_class, 26),
    (item_set_slot, "itm_scale_gauntlets", slot_item_multiplayer_item_class, 26),
    (item_set_slot, "itm_saddle_horse", slot_item_multiplayer_item_class, 18),
    (item_set_slot, "itm_hunter", slot_item_multiplayer_item_class, 18),
    (item_set_slot, "itm_courser", slot_item_multiplayer_item_class, 18),
    (item_set_slot, "itm_hunter", slot_item_multiplayer_item_class, 18),
    (item_set_slot, "itm_warhorse", slot_item_multiplayer_item_class, 18),
    (item_set_slot, "itm_steppe_horse", slot_item_multiplayer_item_class, 18),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_bolts", "trp_swadian_crossbowman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_steel_bolts", "trp_swadian_crossbowman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_crossbow", "trp_swadian_crossbowman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_heavy_crossbow", "trp_swadian_crossbowman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_sniper_crossbow", "trp_swadian_crossbowman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_sword_type_xii", "trp_swadian_crossbowman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_sword_type_xiii", "trp_swadian_crossbowman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_sword_type_xiv", "trp_swadian_crossbowman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_tab_shield_heater_c", "trp_swadian_crossbowman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_tab_shield_heater_c", "trp_swadian_crossbowman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_tab_shield_heater_c", "trp_swadian_crossbowman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_red_shirt", "trp_swadian_crossbowman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_haubergeon", "trp_swadian_crossbowman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_ankle_boots", "trp_swadian_crossbowman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_leather_boots", "trp_swadian_crossbowman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_mail_chausses", "trp_swadian_crossbowman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_leather_gloves", "trp_swadian_crossbowman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_arming_cap", "trp_swadian_crossbowman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_flat_topped_helmet_a", "trp_swadian_crossbowman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_vik_norman_helmet_a", "trp_swadian_crossbowman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_sword_type_xii", "trp_swadian_infantry_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_sword_type_xiii", "trp_swadian_infantry_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_sword_type_xiv", "trp_swadian_infantry_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_sword_type_xiiib", "trp_swadian_infantry_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_sword_type_xiv", "trp_swadian_infantry_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_sword_type_xiia", "trp_swadian_infantry_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_sword_type_xiiia", "trp_swadian_infantry_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_darts", "trp_swadian_infantry_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_war_darts", "trp_swadian_infantry_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_tab_shield_heater_c", "trp_swadian_infantry_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_tab_shield_heater_c", "trp_swadian_infantry_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_tab_shield_heater_c", "trp_swadian_infantry_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_tab_shield_heater_c", "trp_swadian_infantry_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_gambeson_a", "trp_swadian_infantry_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_haubergeon", "trp_swadian_infantry_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_ankle_boots", "trp_swadian_infantry_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_leather_boots", "trp_swadian_infantry_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_mail_chausses", "trp_swadian_infantry_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_splinted_greaves", "trp_swadian_infantry_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_arming_cap", "trp_swadian_infantry_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_flat_topped_helmet_a", "trp_swadian_infantry_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_vik_norman_helmet_a", "trp_swadian_infantry_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_maciejowski_helm", "trp_swadian_infantry_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_leather_gloves", "trp_swadian_infantry_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_mail_mittens", "trp_swadian_infantry_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_scale_gauntlets", "trp_swadian_infantry_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_darts", "trp_swadian_man_at_arms_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_war_darts", "trp_swadian_man_at_arms_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_lance", "trp_swadian_man_at_arms_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_heavy_lance", "trp_swadian_man_at_arms_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_sword_type_xii", "trp_swadian_man_at_arms_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_sword_type_xiii", "trp_swadian_man_at_arms_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_sword_type_xiv", "trp_swadian_man_at_arms_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_sword_type_xiiib", "trp_swadian_man_at_arms_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_sword_type_xiv", "trp_swadian_man_at_arms_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_sword_type_xiia", "trp_swadian_man_at_arms_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_sword_type_xiiia", "trp_swadian_man_at_arms_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_tab_shield_heater_c", "trp_swadian_man_at_arms_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_tab_shield_heater_c", "trp_swadian_man_at_arms_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_tab_shield_heater_c", "trp_swadian_man_at_arms_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_tab_shield_heater_c", "trp_swadian_man_at_arms_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_mail_with_surcoat", "trp_swadian_man_at_arms_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_coat_of_plates_red", "trp_swadian_man_at_arms_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_ankle_boots", "trp_swadian_man_at_arms_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_leather_boots", "trp_swadian_man_at_arms_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_mail_chausses", "trp_swadian_man_at_arms_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_splinted_greaves", "trp_swadian_man_at_arms_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_arming_cap", "trp_swadian_man_at_arms_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_flat_topped_helmet_a", "trp_swadian_man_at_arms_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_vik_norman_helmet_a", "trp_swadian_man_at_arms_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_maciejowski_helm", "trp_swadian_man_at_arms_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_leather_gloves", "trp_swadian_man_at_arms_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_mail_mittens", "trp_swadian_man_at_arms_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_scale_gauntlets", "trp_swadian_man_at_arms_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_saddle_horse", "trp_swadian_man_at_arms_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_courser", "trp_swadian_man_at_arms_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_hunter", "trp_swadian_man_at_arms_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_warhorse", "trp_swadian_man_at_arms_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_arrows", "trp_vaegir_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_barbed_arrows", "trp_vaegir_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_scimitar", "trp_vaegir_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_mace_1", "trp_vaegir_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_mace_2", "trp_vaegir_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_nomad_bow", "trp_vaegir_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_khergit_bow", "trp_vaegir_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_strong_bow", "trp_vaegir_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_linen_tunic", "trp_vaegir_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_leather_jerkin", "trp_vaegir_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_leather_vest", "trp_vaegir_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_lamellar_vest", "trp_vaegir_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_hide_boots", "trp_vaegir_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_nomad_boots", "trp_vaegir_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_splinted_leather_greaves", "trp_vaegir_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_nomad_cap", "trp_vaegir_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_tab_shield_kite_c", "trp_vaegir_spearman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_tab_shield_kite_c", "trp_vaegir_spearman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_tab_shield_kite_c", "trp_vaegir_spearman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_tab_shield_kite_c", "trp_vaegir_spearman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_mace_1", "trp_vaegir_spearman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_mace_2", "trp_vaegir_spearman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_mace_3", "trp_vaegir_spearman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_mace_4", "trp_vaegir_spearman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_long_hafted_spiked_mace", "trp_vaegir_spearman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_long_spiked_club", "trp_vaegir_spearman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_scimitar", "trp_vaegir_spearman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_scimitar_b", "trp_vaegir_spearman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_javelin", "trp_vaegir_spearman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_linen_tunic", "trp_vaegir_spearman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_leather_jerkin", "trp_vaegir_spearman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_leather_vest", "trp_vaegir_spearman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_lamellar_vest", "trp_vaegir_spearman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_hide_boots", "trp_vaegir_spearman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_nomad_boots", "trp_vaegir_spearman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_splinted_leather_greaves", "trp_vaegir_spearman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_splinted_greaves", "trp_vaegir_spearman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_rus_noble_helmet", "trp_vaegir_spearman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_rus_helmet_a", "trp_vaegir_spearman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_leather_gloves", "trp_vaegir_spearman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_mail_mittens", "trp_vaegir_spearman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_scale_gauntlets", "trp_vaegir_spearman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_darts", "trp_vaegir_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_war_darts", "trp_vaegir_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_scimitar", "trp_vaegir_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_scimitar_b", "trp_vaegir_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_lance", "trp_vaegir_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_heavy_lance", "trp_vaegir_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_tab_shield_kite_cav_a", "trp_vaegir_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_tab_shield_kite_cav_b", "trp_vaegir_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_tab_shield_kite_c", "trp_vaegir_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_tab_shield_kite_c", "trp_vaegir_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_linen_tunic", "trp_vaegir_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_leather_vest", "trp_vaegir_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_lamellar_vest", "trp_vaegir_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_hide_boots", "trp_vaegir_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_nomad_boots", "trp_vaegir_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_splinted_leather_greaves", "trp_vaegir_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_splinted_greaves", "trp_vaegir_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_rus_noble_helmet", "trp_vaegir_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_rus_helmet_a", "trp_vaegir_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_leather_gloves", "trp_vaegir_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_mail_mittens", "trp_vaegir_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_scale_gauntlets", "trp_vaegir_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_saddle_horse", "trp_vaegir_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_courser", "trp_vaegir_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_hunter", "trp_vaegir_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_warhorse", "trp_vaegir_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_sword_khergit_1", "trp_khergit_veteran_horse_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_sword_khergit_2", "trp_khergit_veteran_horse_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_sword_khergit_3", "trp_khergit_veteran_horse_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_sword_khergit_4", "trp_khergit_veteran_horse_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_nomad_bow", "trp_khergit_veteran_horse_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_khergit_bow", "trp_khergit_veteran_horse_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_strong_bow", "trp_khergit_veteran_horse_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_arrows", "trp_khergit_veteran_horse_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_khergit_arrows", "trp_khergit_veteran_horse_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_tab_shield_small_round_a", "trp_khergit_veteran_horse_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_tab_shield_small_round_b", "trp_khergit_veteran_horse_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_leather_steppe_cap_a", "trp_khergit_veteran_horse_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_leather_steppe_cap_b", "trp_khergit_veteran_horse_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_leather_steppe_cap_c", "trp_khergit_veteran_horse_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_coarse_tunic", "trp_khergit_veteran_horse_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_leather_vest", "trp_khergit_veteran_horse_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_tribal_warrior_outfit", "trp_khergit_veteran_horse_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_hide_boots", "trp_khergit_veteran_horse_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_nomad_boots", "trp_khergit_veteran_horse_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_splinted_leather_greaves", "trp_khergit_veteran_horse_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_splinted_greaves", "trp_khergit_veteran_horse_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_steppe_horse", "trp_khergit_veteran_horse_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_javelin", "trp_khergit_lancer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_sword_khergit_1", "trp_khergit_lancer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_sword_khergit_2", "trp_khergit_lancer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_sword_khergit_3", "trp_khergit_lancer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_sword_khergit_4", "trp_khergit_lancer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_tab_shield_small_round_a", "trp_khergit_lancer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_tab_shield_small_round_b", "trp_khergit_lancer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_tab_shield_small_round_c", "trp_khergit_lancer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_lance", "trp_khergit_lancer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_heavy_lance", "trp_khergit_lancer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_hafted_blade_a", "trp_khergit_lancer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_hafted_blade_b", "trp_khergit_lancer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_mace_1", "trp_khergit_lancer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_mace_2", "trp_khergit_lancer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_mace_3", "trp_khergit_lancer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_leather_steppe_cap_a", "trp_khergit_lancer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_leather_steppe_cap_b", "trp_khergit_lancer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_leather_steppe_cap_c", "trp_khergit_lancer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_khergit_war_helmet", "trp_khergit_lancer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_khergit_guard_helmet", "trp_khergit_lancer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_coarse_tunic", "trp_khergit_lancer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_leather_vest", "trp_khergit_lancer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_tribal_warrior_outfit", "trp_khergit_lancer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_hide_boots", "trp_khergit_lancer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_nomad_boots", "trp_khergit_lancer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_splinted_leather_greaves", "trp_khergit_lancer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_splinted_greaves", "trp_khergit_lancer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_leather_gloves", "trp_khergit_lancer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_mail_mittens", "trp_khergit_lancer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_scale_gauntlets", "trp_khergit_lancer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_steppe_horse", "trp_khergit_lancer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_courser", "trp_khergit_lancer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_hunter", "trp_khergit_lancer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_warhorse", "trp_khergit_lancer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_arrows", "trp_nord_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_barbed_arrows", "trp_nord_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_bodkin_arrows", "trp_nord_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_sword_viking_1", "trp_nord_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_sword_viking_2", "trp_nord_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_sword_viking_2_small", "trp_nord_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_sword_viking_3", "trp_nord_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_sword_viking_3_small", "trp_nord_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_short_bow", "trp_nord_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_long_bow", "trp_nord_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_leather_jerkin", "trp_nord_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_leather_boots", "trp_nord_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_splinted_leather_greaves", "trp_nord_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_mail_chausses", "trp_nord_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_mail_boots", "trp_nord_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_sword_viking_1", "trp_nord_veteran_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_sword_viking_2", "trp_nord_veteran_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_sword_viking_2_small", "trp_nord_veteran_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_sword_viking_3", "trp_nord_veteran_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_sword_viking_3_small", "trp_nord_veteran_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_long_axe", "trp_nord_veteran_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_long_axe_b", "trp_nord_veteran_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_tab_shield_round_a", "trp_nord_veteran_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_tab_shield_round_b", "trp_nord_veteran_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_tab_shield_round_c", "trp_nord_veteran_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_tab_shield_round_d", "trp_nord_veteran_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_tab_shield_round_e", "trp_nord_veteran_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_leather_jerkin", "trp_nord_veteran_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_leather_boots", "trp_nord_veteran_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_splinted_leather_greaves", "trp_nord_veteran_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_mail_chausses", "trp_nord_veteran_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_mail_boots", "trp_nord_veteran_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_leather_gloves", "trp_nord_veteran_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_mail_mittens", "trp_nord_veteran_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_scale_gauntlets", "trp_nord_veteran_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_darts", "trp_nord_scout_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_war_darts", "trp_nord_scout_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_javelin", "trp_nord_scout_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_throwing_spears", "trp_nord_scout_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_sword_viking_1", "trp_nord_scout_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_sword_viking_2", "trp_nord_scout_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_sword_viking_3", "trp_nord_scout_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_shortened_voulge", "trp_nord_scout_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_light_lance", "trp_nord_scout_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_lance", "trp_nord_scout_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_tab_shield_small_round_a", "trp_nord_scout_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_tab_shield_small_round_b", "trp_nord_scout_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_tab_shield_small_round_c", "trp_nord_scout_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_leather_jerkin", "trp_nord_scout_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_leather_boots", "trp_nord_scout_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_splinted_leather_greaves", "trp_nord_scout_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_mail_chausses", "trp_nord_scout_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_mail_boots", "trp_nord_scout_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_leather_gloves", "trp_nord_scout_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_mail_mittens", "trp_nord_scout_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_scale_gauntlets", "trp_nord_scout_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_saddle_horse", "trp_nord_scout_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_courser", "trp_nord_scout_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_hunter", "trp_nord_scout_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_crossbow", "trp_rhodok_veteran_crossbowman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_heavy_crossbow", "trp_rhodok_veteran_crossbowman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_sniper_crossbow", "trp_rhodok_veteran_crossbowman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_bolts", "trp_rhodok_veteran_crossbowman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_steel_bolts", "trp_rhodok_veteran_crossbowman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_fighting_pick", "trp_rhodok_veteran_crossbowman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_military_pick", "trp_rhodok_veteran_crossbowman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_club_with_spike_head", "trp_rhodok_veteran_crossbowman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_maul", "trp_rhodok_veteran_crossbowman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_sledgehammer", "trp_rhodok_veteran_crossbowman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_military_cleaver_b", "trp_rhodok_veteran_crossbowman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_sword_type_xii", "trp_rhodok_veteran_crossbowman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_sword_type_xiii", "trp_rhodok_veteran_crossbowman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_sword_type_xiv", "trp_rhodok_veteran_crossbowman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_tab_shield_heater_c", "trp_rhodok_veteran_crossbowman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_tab_shield_heater_c", "trp_rhodok_veteran_crossbowman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_tab_shield_heater_c", "trp_rhodok_veteran_crossbowman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_tab_shield_heater_c", "trp_rhodok_veteran_crossbowman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_leather_cap", "trp_rhodok_veteran_crossbowman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_padded_coif", "trp_rhodok_veteran_crossbowman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_footman_helmet", "trp_rhodok_veteran_crossbowman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_kettlehat_a", "trp_rhodok_veteran_crossbowman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_tunic_with_green_cape", "trp_rhodok_veteran_crossbowman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_ankle_boots", "trp_rhodok_veteran_crossbowman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_leather_boots", "trp_rhodok_veteran_crossbowman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_splinted_greaves", "trp_rhodok_veteran_crossbowman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_leather_gloves", "trp_rhodok_veteran_crossbowman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_darts", "trp_rhodok_sergeant_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_war_darts", "trp_rhodok_sergeant_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_javelin", "trp_rhodok_sergeant_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_fighting_pick", "trp_rhodok_sergeant_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_military_pick", "trp_rhodok_sergeant_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_morningstar", "trp_rhodok_sergeant_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_club_with_spike_head", "trp_rhodok_sergeant_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_military_cleaver_b", "trp_rhodok_sergeant_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_military_cleaver_c", "trp_rhodok_sergeant_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_two_handed_cleaver", "trp_rhodok_sergeant_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_military_sickle_a", "trp_rhodok_sergeant_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_maul", "trp_rhodok_sergeant_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_sledgehammer", "trp_rhodok_sergeant_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_glaive", "trp_rhodok_sergeant_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_tab_shield_heater_c", "trp_rhodok_sergeant_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_tab_shield_heater_c", "trp_rhodok_sergeant_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_tab_shield_heater_c", "trp_rhodok_sergeant_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_tab_shield_heater_c", "trp_rhodok_sergeant_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_leather_cap", "trp_rhodok_sergeant_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_padded_coif", "trp_rhodok_sergeant_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_footman_helmet", "trp_rhodok_sergeant_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_kettlehat_a", "trp_rhodok_sergeant_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_surcoat_over_mail", "trp_rhodok_sergeant_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_ankle_boots", "trp_rhodok_sergeant_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_leather_boots", "trp_rhodok_sergeant_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_splinted_greaves", "trp_rhodok_sergeant_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_leather_gloves", "trp_rhodok_sergeant_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_mail_mittens", "trp_rhodok_sergeant_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_scale_gauntlets", "trp_rhodok_sergeant_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_darts", "trp_rhodok_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_war_darts", "trp_rhodok_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_javelin", "trp_rhodok_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_sword_type_xii", "trp_rhodok_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_sword_type_xiii", "trp_rhodok_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_sword_type_xiiib", "trp_rhodok_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_fighting_pick", "trp_rhodok_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_military_pick", "trp_rhodok_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_morningstar", "trp_rhodok_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_military_cleaver_b", "trp_rhodok_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_military_cleaver_c", "trp_rhodok_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_two_handed_cleaver", "trp_rhodok_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_shortened_military_scythe", "trp_rhodok_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_light_lance", "trp_rhodok_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_lance", "trp_rhodok_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_heavy_lance", "trp_rhodok_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_tab_shield_heater_cav_a", "trp_rhodok_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_tab_shield_heater_cav_b", "trp_rhodok_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_padded_coif", "trp_rhodok_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_footman_helmet", "trp_rhodok_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_kettlehat_a", "trp_rhodok_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_surcoat_over_mail", "trp_rhodok_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_ankle_boots", "trp_rhodok_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_leather_boots", "trp_rhodok_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_splinted_greaves", "trp_rhodok_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_leather_gloves", "trp_rhodok_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_mail_mittens", "trp_rhodok_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_scale_gauntlets", "trp_rhodok_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_saddle_horse", "trp_rhodok_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_courser", "trp_rhodok_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_hunter", "trp_rhodok_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_warhorse", "trp_rhodok_horseman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_short_bow", "trp_sarranid_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_nomad_bow", "trp_sarranid_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_arrows", "trp_sarranid_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_barbed_arrows", "trp_sarranid_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_scimitar", "trp_sarranid_archer_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_jarid", "trp_sarranid_footman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_javelin", "trp_sarranid_footman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_tab_shield_kite_c", "trp_sarranid_footman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_tab_shield_kite_c", "trp_sarranid_footman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_tab_shield_kite_c", "trp_sarranid_footman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_tab_shield_kite_c", "trp_sarranid_footman_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_lance", "trp_sarranid_mamluke_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_heavy_lance", "trp_sarranid_mamluke_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_jarid", "trp_sarranid_mamluke_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_javelin", "trp_sarranid_mamluke_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_tab_shield_small_round_a", "trp_sarranid_mamluke_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_tab_shield_small_round_b", "trp_sarranid_mamluke_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_tab_shield_small_round_c", "trp_sarranid_mamluke_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_saddle_horse", "trp_sarranid_mamluke_multiplayer"),
    (call_script, "script_multiplayer_set_item_available_for_troop", "itm_warhorse", "trp_sarranid_mamluke_multiplayer"),

]),

("get_army_size_from_slider_value",
[
    (store_script_param, ":var_0", 1),
    (assign, ":var_1", ":var_0"),
    (try_begin),
        (gt, ":var_0", 25),
        (store_sub, ":var_2", ":var_0", 25),
        (val_add, ":var_1", ":var_2"),
        (try_begin),
            (gt, ":var_0", 50),
            (store_sub, ":var_2", ":var_0", 50),
            (val_mul, ":var_2", 3),
            (val_add, ":var_1", ":var_2"),
        (try_end),
    (try_end),
    (assign, reg0, ":var_1"),

]),

("spawn_quick_battle_army",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (store_script_param, ":var_3", 4),
    (store_script_param, ":var_4", 5),
    (store_script_param, ":var_5", 6),
    (store_script_param, ":var_6", 7),
    (try_begin),
        (eq, ":var_6", 1),
        (call_script, "script_get_army_size_from_slider_value", "$g_quick_battle_army_1_size"),
        (assign, ":var_7", reg0),
        (set_player_troop, "$g_quick_battle_troop"),
        (set_visitor, ":var_0", "$g_quick_battle_troop"),
        (try_begin),
            (eq, ":var_0", 0),
            (try_begin),
                (is_between, ":var_1", "fac_kingdom_1", "fac_kingdoms_end"),
                (faction_get_slot, "$g_quick_battle_team_0_banner", ":var_1", slot_faction_banner),
            (else_try),
                (assign, "$g_quick_battle_team_0_banner", "mesh_banners_default_b"),
            (try_end),
        (else_try),
            (try_begin),
                (is_between, ":var_1", "fac_kingdom_1", "fac_kingdoms_end"),
                (faction_get_slot, "$g_quick_battle_team_1_banner", ":var_1", slot_faction_banner),
            (else_try),
                (assign, "$g_quick_battle_team_1_banner", "mesh_banners_default_b"),
            (try_end),
        (try_end),
        (val_add, ":var_0", 1),
    (else_try),
        (call_script, "script_get_army_size_from_slider_value", "$g_quick_battle_army_2_size"),
        (assign, ":var_7", reg0),
        (try_begin),
            (eq, ":var_0", 0),
            (assign, "$g_quick_battle_team_0_banner", "mesh_banners_default_a"),
        (else_try),
            (assign, "$g_quick_battle_team_1_banner", "mesh_banners_default_a"),
        (try_end),
        (val_add, ":var_0", 1),
    (try_end),
    (store_mul, ":var_8", ":var_2", ":var_7"),
    (val_div, ":var_8", 100),
    (store_mul, ":var_9", ":var_3", ":var_7"),
    (val_div, ":var_9", 100),
    (store_mul, ":var_10", ":var_4", ":var_7"),
    (val_div, ":var_10", 100),
    (try_begin),
        (store_add, ":var_11", ":var_8", ":var_9"),
        (val_add, ":var_11", ":var_10"),
        (neg|eq, ":var_11", ":var_7"),
        (store_sub, ":var_12", ":var_7", ":var_11"),
        (try_begin),
            (gt, ":var_2", ":var_3"),
            (gt, ":var_2", ":var_4"),
            (val_add, ":var_8", ":var_12"),
        (else_try),
            (gt, ":var_3", ":var_4"),
            (val_add, ":var_9", ":var_12"),
        (else_try),
            (val_add, ":var_10", ":var_12"),
        (try_end),
    (try_end),
    (store_mul, ":var_13", ":var_8", 15),
    (val_div, ":var_13", 100),
    (store_mul, ":var_14", ":var_8", 45),
    (val_div, ":var_14", 100),
    (store_random_in_range, ":var_15", ":var_13", ":var_14"),
    (store_sub, ":var_16", ":var_8", ":var_15"),
    (store_mul, ":var_13", ":var_9", 15),
    (val_div, ":var_13", 100),
    (store_mul, ":var_14", ":var_9", 45),
    (val_div, ":var_14", 100),
    (store_random_in_range, ":var_17", ":var_13", ":var_14"),
    (store_sub, ":var_18", ":var_9", ":var_17"),
    (store_mul, ":var_13", ":var_10", 15),
    (val_div, ":var_13", 100),
    (store_mul, ":var_14", ":var_10", 45),
    (val_div, ":var_14", 100),
    (store_random_in_range, ":var_19", ":var_13", ":var_14"),
    (store_sub, ":var_20", ":var_10", ":var_19"),
    (faction_get_slot, ":var_21", ":var_1", slot_faction_quick_battle_tier_2_infantry),
    (set_visitors, ":var_0", ":var_21", ":var_15"),
    (val_add, ":var_0", 1),
    (faction_get_slot, ":var_21", ":var_1", slot_faction_quick_battle_tier_1_infantry),
    (set_visitors, ":var_0", ":var_21", ":var_16"),
    (val_add, ":var_0", 1),
    (faction_get_slot, ":var_21", ":var_1", slot_faction_quick_battle_tier_2_cavalry),
    (set_visitors, ":var_0", ":var_21", ":var_19"),
    (val_add, ":var_0", 1),
    (faction_get_slot, ":var_21", ":var_1", slot_faction_quick_battle_tier_1_cavalry),
    (set_visitors, ":var_0", ":var_21", ":var_20"),
    (val_add, ":var_0", 1),
    (try_begin),
        (eq, ":var_5", 0),
        (faction_get_slot, ":var_21", ":var_1", slot_faction_quick_battle_tier_2_archer),
        (set_visitors, ":var_0", ":var_21", ":var_17"),
        (val_add, ":var_0", 1),
        (faction_get_slot, ":var_21", ":var_1", slot_faction_quick_battle_tier_1_archer),
        (set_visitors, ":var_0", ":var_21", ":var_18"),
        (val_add, ":var_0", 1),
    (else_try),
        (assign, ":var_0", 40),
        (store_div, ":var_22", ":var_18", 8),
        (val_mul, ":var_22", 8),
        (try_begin),
            (neg|eq, ":var_22", ":var_18"),
            (val_div, ":var_22", 8),
            (val_add, ":var_22", 1),
            (val_mul, ":var_22", 8),
        (try_end),
        (store_div, ":var_23", ":var_17", 8),
        (val_mul, ":var_23", 8),
        (try_begin),
            (neg|eq, ":var_23", ":var_17"),
            (val_div, ":var_23", 8),
            (val_add, ":var_23", 1),
            (val_mul, ":var_23", 8),
        (try_end),
        (store_add, ":var_24", ":var_22", ":var_23"),
        (store_div, ":var_25", ":var_24", 8),
        (assign, ":var_26", ":var_18"),
        (assign, ":var_27", ":var_17"),
        (assign, ":var_28", 1000),
        (try_for_range, ":var_29", 0, ":var_28"),
            (try_begin),
                (gt, ":var_27", 0),
                (assign, ":var_30", ":var_25"),
                (val_min, ":var_30", ":var_27"),
                (faction_get_slot, ":var_21", ":var_1", slot_faction_quick_battle_tier_2_archer),
                (set_visitors, ":var_0", ":var_21", ":var_30"),
                (val_add, ":var_0", 1),
                (val_sub, ":var_27", ":var_30"),
            (else_try),
                (gt, ":var_26", 0),
                (assign, ":var_31", ":var_25"),
                (val_min, ":var_31", ":var_26"),
                (faction_get_slot, ":var_21", ":var_1", slot_faction_quick_battle_tier_1_archer),
                (set_visitors, ":var_0", ":var_21", ":var_31"),
                (val_add, ":var_0", 1),
                (val_sub, ":var_26", ":var_31"),
            (else_try),
                (assign, ":var_28", 0),
            (try_end),
        (try_end),
    (try_end),

]),

("player_arrived",
[
    (assign, ":var_0", "fac_culture_western"),
    (faction_set_slot, "fac_player_supporters_faction", slot_faction_culture, ":var_0"),
    (faction_set_slot, "fac_player_faction", slot_faction_culture, ":var_0"),

]),

("game_set_multiplayer_mission_end",
[
    (assign, "$g_multiplayer_mission_end_screen", 1),

]),

("game_enable_cheat_menu",
[
    (store_script_param, ":var_0", 1),
    (try_begin),
        (eq, ":var_0", 0),
        (assign, "$cheat_mode", 0),
    (else_try),
        (eq, ":var_0", 1),
        (assign, "$cheat_mode", 1),
    (try_end),

]),

("game_get_console_command",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (try_begin),
        (eq, ":var_0", 2),
        (store_script_param, ":var_2", 3),
    (try_end),
    (try_begin),
        (eq, ":var_0", 1),
        (assign, reg0, ":var_1"),
        (try_begin),
            (eq, ":var_1", 1),
            (assign, reg1, "$g_multiplayer_num_bots_team_1"),
            (str_store_string, s0, "str_team_reg0_bot_count_is_reg1"),
        (else_try),
            (eq, ":var_1", 2),
            (assign, reg1, "$g_multiplayer_num_bots_team_2"),
            (str_store_string, s0, "str_team_reg0_bot_count_is_reg1"),
        (else_try),
            (str_store_string, s0, "str_input_is_not_correct_for_the_command_type_help_for_more_information"),
        (try_end),
    (else_try),
        (eq, ":var_0", 2),
        (assign, reg0, ":var_1"),
        (assign, reg1, ":var_2"),
        (try_begin),
            (eq, ":var_1", 1),
            (ge, ":var_2", 0),
            (assign, "$g_multiplayer_num_bots_team_1", ":var_2"),
            (str_store_string, s0, "str_team_reg0_bot_count_is_reg1"),
        (else_try),
            (eq, ":var_1", 2),
            (ge, ":var_2", 0),
            (assign, "$g_multiplayer_num_bots_team_2", ":var_2"),
            (str_store_string, s0, "str_team_reg0_bot_count_is_reg1"),
        (else_try),
            (str_store_string, s0, "str_input_is_not_correct_for_the_command_type_help_for_more_information"),
        (try_end),
    (else_try),
        (eq, ":var_0", 3),
        (assign, reg0, "$g_multiplayer_round_max_seconds"),
        (str_store_string, s0, "str_maximum_seconds_for_round_is_reg0"),
    (else_try),
        (eq, ":var_0", 4),
        (assign, reg0, ":var_1"),
        (try_begin),
            (is_between, ":var_1", 60, 901),
            (assign, "$g_multiplayer_round_max_seconds", ":var_1"),
            (str_store_string, s0, "str_maximum_seconds_for_round_is_reg0"),
            (get_max_players, ":var_3"),
            (try_for_range, ":var_4", 1, ":var_3"),
                (player_is_active, ":var_4"),
                (multiplayer_send_int_to_player, ":var_4", 59, ":var_1"),
            (try_end),
        (else_try),
            (str_store_string, s0, "str_input_is_not_correct_for_the_command_type_help_for_more_information"),
        (try_end),
    (else_try),
        (eq, ":var_0", 5),
        (assign, reg0, "$g_multiplayer_respawn_period"),
        (str_store_string, s0, "str_respawn_period_is_reg0_seconds"),
    (else_try),
        (eq, ":var_0", 6),
        (assign, reg0, ":var_1"),
        (try_begin),
            (is_between, ":var_1", 3, 31),
            (assign, "$g_multiplayer_respawn_period", ":var_1"),
            (str_store_string, s0, "str_respawn_period_is_reg0_seconds"),
        (else_try),
            (str_store_string, s0, "str_input_is_not_correct_for_the_command_type_help_for_more_information"),
        (try_end),
    (else_try),
        (eq, ":var_0", 7),
        (assign, reg0, "$g_multiplayer_num_bots_voteable"),
        (str_store_string, s0, "str_bots_upper_limit_for_votes_is_reg0"),
    (else_try),
        (eq, ":var_0", 8),
        (try_begin),
            (is_between, ":var_1", 0, 51),
            (assign, "$g_multiplayer_num_bots_voteable", ":var_1"),
            (store_add, "$g_multiplayer_max_num_bots", ":var_1", 1),
            (assign, reg0, "$g_multiplayer_num_bots_voteable"),
            (str_store_string, s0, "str_bots_upper_limit_for_votes_is_reg0"),
            (get_max_players, ":var_3"),
            (try_for_range, ":var_4", 1, ":var_3"),
                (player_is_active, ":var_4"),
                (multiplayer_send_int_to_player, ":var_4", 81, ":var_1"),
            (try_end),
        (else_try),
            (str_store_string, s0, "str_input_is_not_correct_for_the_command_type_help_for_more_information"),
        (try_end),
    (else_try),
        (eq, ":var_0", 9),
        (try_begin),
            (eq, "$g_multiplayer_maps_voteable", 1),
            (str_store_string, s0, "str_map_is_voteable"),
        (else_try),
            (str_store_string, s0, "str_map_is_not_voteable"),
        (try_end),
    (else_try),
        (eq, ":var_0", 10),
        (try_begin),
            (is_between, ":var_1", 0, 2),
            (assign, "$g_multiplayer_maps_voteable", ":var_1"),
            (try_begin),
                (eq, ":var_1", 1),
                (str_store_string, s0, "str_map_is_voteable"),
            (else_try),
                (str_store_string, s0, "str_map_is_not_voteable"),
            (try_end),
            (get_max_players, ":var_3"),
            (try_for_range, ":var_4", 1, ":var_3"),
                (player_is_active, ":var_4"),
                (multiplayer_send_int_to_player, ":var_4", 83, ":var_1"),
            (try_end),
        (else_try),
            (str_store_string, s0, "str_input_is_not_correct_for_the_command_type_help_for_more_information"),
        (try_end),
    (else_try),
        (eq, ":var_0", 11),
        (try_begin),
            (eq, "$g_multiplayer_factions_voteable", 1),
            (str_store_string, s0, "str_factions_are_voteable"),
        (else_try),
            (str_store_string, s0, "str_factions_are_not_voteable"),
        (try_end),
    (else_try),
        (eq, ":var_0", 12),
        (try_begin),
            (is_between, ":var_1", 0, 2),
            (assign, "$g_multiplayer_factions_voteable", ":var_1"),
            (try_begin),
                (eq, ":var_1", 1),
                (str_store_string, s0, "str_factions_are_voteable"),
            (else_try),
                (str_store_string, s0, "str_factions_are_not_voteable"),
            (try_end),
            (get_max_players, ":var_3"),
            (try_for_range, ":var_4", 1, ":var_3"),
                (player_is_active, ":var_4"),
                (multiplayer_send_int_to_player, ":var_4", 82, ":var_1"),
            (try_end),
        (else_try),
            (str_store_string, s0, "str_input_is_not_correct_for_the_command_type_help_for_more_information"),
        (try_end),
    (else_try),
        (eq, ":var_0", 13),
        (try_begin),
            (eq, "$g_multiplayer_player_respawn_as_bot", 1),
            (str_store_string, s0, "str_players_respawn_as_bot"),
        (else_try),
            (str_store_string, s0, "str_players_do_not_respawn_as_bot"),
        (try_end),
    (else_try),
        (eq, ":var_0", 14),
        (try_begin),
            (is_between, ":var_1", 0, 2),
            (assign, "$g_multiplayer_player_respawn_as_bot", ":var_1"),
            (try_begin),
                (eq, ":var_1", 1),
                (str_store_string, s0, "str_players_respawn_as_bot"),
            (else_try),
                (str_store_string, s0, "str_players_do_not_respawn_as_bot"),
            (try_end),
            (get_max_players, ":var_3"),
            (try_for_range, ":var_4", 1, ":var_3"),
                (player_is_active, ":var_4"),
                (multiplayer_send_int_to_player, ":var_4", 85, ":var_1"),
            (try_end),
        (else_try),
            (str_store_string, s0, "str_input_is_not_correct_for_the_command_type_help_for_more_information"),
        (try_end),
    (else_try),
        (eq, ":var_0", 15),
        (try_begin),
            (eq, "$g_multiplayer_kick_voteable", 1),
            (str_store_string, s0, "str_kicking_a_player_is_voteable"),
        (else_try),
            (str_store_string, s0, "str_kicking_a_player_is_not_voteable"),
        (try_end),
    (else_try),
        (eq, ":var_0", 16),
        (try_begin),
            (is_between, ":var_1", 0, 2),
            (assign, "$g_multiplayer_kick_voteable", ":var_1"),
            (try_begin),
                (eq, ":var_1", 1),
                (str_store_string, s0, "str_kicking_a_player_is_voteable"),
            (else_try),
                (str_store_string, s0, "str_kicking_a_player_is_not_voteable"),
            (try_end),
            (get_max_players, ":var_3"),
            (try_for_range, ":var_4", 1, ":var_3"),
                (player_is_active, ":var_4"),
                (multiplayer_send_int_to_player, ":var_4", 90, ":var_1"),
            (try_end),
        (else_try),
            (str_store_string, s0, "str_input_is_not_correct_for_the_command_type_help_for_more_information"),
        (try_end),
    (else_try),
        (eq, ":var_0", 17),
        (try_begin),
            (eq, "$g_multiplayer_ban_voteable", 1),
            (str_store_string, s0, "str_banning_a_player_is_voteable"),
        (else_try),
            (str_store_string, s0, "str_banning_a_player_is_not_voteable"),
        (try_end),
    (else_try),
        (eq, ":var_0", 18),
        (try_begin),
            (is_between, ":var_1", 0, 2),
            (assign, "$g_multiplayer_ban_voteable", ":var_1"),
            (try_begin),
                (eq, ":var_1", 1),
                (str_store_string, s0, "str_banning_a_player_is_voteable"),
            (else_try),
                (str_store_string, s0, "str_banning_a_player_is_not_voteable"),
            (try_end),
            (get_max_players, ":var_3"),
            (try_for_range, ":var_4", 1, ":var_3"),
                (player_is_active, ":var_4"),
                (multiplayer_send_int_to_player, ":var_4", 91, ":var_1"),
            (try_end),
        (else_try),
            (str_store_string, s0, "str_input_is_not_correct_for_the_command_type_help_for_more_information"),
        (try_end),
    (else_try),
        (eq, ":var_0", 19),
        (assign, reg0, "$g_multiplayer_valid_vote_ratio"),
        (str_store_string, s0, "str_percentage_of_yes_votes_required_for_a_poll_to_get_accepted_is_reg0"),
    (else_try),
        (eq, ":var_0", 20),
        (try_begin),
            (is_between, ":var_1", 50, 101),
            (assign, "$g_multiplayer_valid_vote_ratio", ":var_1"),
            (assign, reg0, ":var_1"),
            (str_store_string, s0, "str_percentage_of_yes_votes_required_for_a_poll_to_get_accepted_is_reg0"),
        (else_try),
            (str_store_string, s0, "str_input_is_not_correct_for_the_command_type_help_for_more_information"),
        (try_end),
    (else_try),
        (eq, ":var_0", 21),
        (assign, reg0, "$g_multiplayer_auto_team_balance_limit"),
        (str_store_string, s0, "str_auto_team_balance_threshold_is_reg0"),
    (else_try),
        (eq, ":var_0", 22),
        (try_begin),
            (is_between, ":var_1", 2, 7),
            (assign, "$g_multiplayer_auto_team_balance_limit", ":var_1"),
            (assign, reg0, "$g_multiplayer_auto_team_balance_limit"),
            (str_store_string, s0, "str_auto_team_balance_threshold_is_reg0"),
            (get_max_players, ":var_3"),
            (try_for_range, ":var_4", 1, ":var_3"),
                (player_is_active, ":var_4"),
                (multiplayer_send_int_to_player, ":var_4", 93, ":var_1"),
            (try_end),
        (else_try),
            (ge, ":var_1", 7),
            (assign, "$g_multiplayer_auto_team_balance_limit", 1000),
            (assign, reg0, "$g_multiplayer_auto_team_balance_limit"),
            (str_store_string, s0, "str_auto_team_balance_threshold_is_reg0"),
            (get_max_players, ":var_3"),
            (try_for_range, ":var_4", 1, ":var_3"),
                (player_is_active, ":var_4"),
                (multiplayer_send_int_to_player, ":var_4", 93, ":var_1"),
            (try_end),
        (else_try),
            (str_store_string, s0, "str_input_is_not_correct_for_the_command_type_help_for_more_information"),
        (try_end),
    (else_try),
        (eq, ":var_0", 23),
        (assign, reg0, "$g_multiplayer_initial_gold_multiplier"),
        (str_store_string, s0, "str_starting_gold_ratio_is_reg0"),
    (else_try),
        (eq, ":var_0", 24),
        (try_begin),
            (is_between, ":var_1", 0, 1001),
            (assign, "$g_multiplayer_initial_gold_multiplier", ":var_1"),
            (assign, reg0, "$g_multiplayer_initial_gold_multiplier"),
            (str_store_string, s0, "str_starting_gold_ratio_is_reg0"),
        (else_try),
            (str_store_string, s0, "str_input_is_not_correct_for_the_command_type_help_for_more_information"),
        (try_end),
    (else_try),
        (eq, ":var_0", 25),
        (assign, reg0, "$g_multiplayer_battle_earnings_multiplier"),
        (str_store_string, s0, "str_combat_gold_bonus_ratio_is_reg0"),
    (else_try),
        (eq, ":var_0", 26),
        (try_begin),
            (is_between, ":var_1", 0, 1001),
            (assign, "$g_multiplayer_battle_earnings_multiplier", ":var_1"),
            (assign, reg0, "$g_multiplayer_battle_earnings_multiplier"),
            (str_store_string, s0, "str_combat_gold_bonus_ratio_is_reg0"),
        (else_try),
            (str_store_string, s0, "str_input_is_not_correct_for_the_command_type_help_for_more_information"),
        (try_end),
    (else_try),
        (eq, ":var_0", 27),
        (assign, reg0, "$g_multiplayer_round_earnings_multiplier"),
        (str_store_string, s0, "str_round_gold_bonus_ratio_is_reg0"),
    (else_try),
        (eq, ":var_0", 28),
        (try_begin),
            (is_between, ":var_1", 0, 1001),
            (assign, "$g_multiplayer_round_earnings_multiplier", ":var_1"),
            (assign, reg0, "$g_multiplayer_round_earnings_multiplier"),
            (str_store_string, s0, "str_round_gold_bonus_ratio_is_reg0"),
        (else_try),
            (str_store_string, s0, "str_input_is_not_correct_for_the_command_type_help_for_more_information"),
        (try_end),
    (else_try),
        (eq, ":var_0", 29),
        (try_begin),
            (eq, "$g_multiplayer_allow_player_banners", 1),
            (str_store_string, s0, "str_player_banners_are_allowed"),
        (else_try),
            (str_store_string, s0, "str_player_banners_are_not_allowed"),
        (try_end),
    (else_try),
        (eq, ":var_0", 30),
        (try_begin),
            (is_between, ":var_1", 0, 2),
            (assign, "$g_multiplayer_allow_player_banners", ":var_1"),
            (try_begin),
                (eq, ":var_1", 1),
                (str_store_string, s0, "str_player_banners_are_allowed"),
            (else_try),
                (str_store_string, s0, "str_player_banners_are_not_allowed"),
            (try_end),
        (else_try),
            (str_store_string, s0, "str_input_is_not_correct_for_the_command_type_help_for_more_information"),
        (try_end),
    (else_try),
        (eq, ":var_0", 31),
        (try_begin),
            (eq, "$g_multiplayer_force_default_armor", 1),
            (str_store_string, s0, "str_default_armor_is_forced"),
        (else_try),
            (str_store_string, s0, "str_default_armor_is_not_forced"),
        (try_end),
    (else_try),
        (eq, ":var_0", 32),
        (try_begin),
            (is_between, ":var_1", 0, 2),
            (assign, "$g_multiplayer_force_default_armor", ":var_1"),
            (try_begin),
                (eq, ":var_1", 1),
                (str_store_string, s0, "str_default_armor_is_forced"),
            (else_try),
                (str_store_string, s0, "str_default_armor_is_not_forced"),
            (try_end),
        (else_try),
            (str_store_string, s0, "str_input_is_not_correct_for_the_command_type_help_for_more_information"),
        (try_end),
    (else_try),
        (eq, ":var_0", 33),
        (assign, reg0, "$g_multiplayer_point_gained_from_flags"),
        (str_store_string, s0, "str_point_gained_from_flags_is_reg0"),
    (else_try),
        (eq, ":var_0", 34),
        (try_begin),
            (is_between, ":var_1", 25, 401),
            (assign, "$g_multiplayer_point_gained_from_flags", ":var_1"),
            (assign, reg0, "$g_multiplayer_point_gained_from_flags"),
            (str_store_string, s0, "str_point_gained_from_flags_is_reg0"),
        (else_try),
            (str_store_string, s0, "str_input_is_not_correct_for_the_command_type_help_for_more_information"),
        (try_end),
    (else_try),
        (eq, ":var_0", 35),
        (assign, reg0, "$g_multiplayer_point_gained_from_capturing_flag"),
        (str_store_string, s0, "str_point_gained_from_capturing_flag_is_reg0"),
    (else_try),
        (eq, ":var_0", 36),
        (try_begin),
            (is_between, ":var_1", 0, 11),
            (assign, "$g_multiplayer_point_gained_from_capturing_flag", ":var_1"),
            (assign, reg0, "$g_multiplayer_point_gained_from_capturing_flag"),
            (str_store_string, s0, "str_point_gained_from_capturing_flag_is_reg0"),
        (else_try),
            (str_store_string, s0, "str_input_is_not_correct_for_the_command_type_help_for_more_information"),
        (try_end),
    (else_try),
        (eq, ":var_0", 37),
        (assign, reg0, "$g_multiplayer_game_max_minutes"),
        (str_store_string, s0, "str_map_time_limit_is_reg0"),
    (else_try),
        (eq, ":var_0", 38),
        (try_begin),
            (is_between, ":var_1", 5, 121),
            (assign, "$g_multiplayer_game_max_minutes", ":var_1"),
            (assign, reg0, "$g_multiplayer_game_max_minutes"),
            (str_store_string, s0, "str_map_time_limit_is_reg0"),
        (else_try),
            (str_store_string, s0, "str_input_is_not_correct_for_the_command_type_help_for_more_information"),
        (try_end),
    (else_try),
        (eq, ":var_0", 39),
        (assign, reg0, "$g_multiplayer_game_max_points"),
        (str_store_string, s0, "str_team_points_limit_is_reg0"),
    (else_try),
        (eq, ":var_0", 40),
        (try_begin),
            (is_between, ":var_1", 3, 1001),
            (assign, "$g_multiplayer_game_max_points", ":var_1"),
            (assign, reg0, "$g_multiplayer_game_max_points"),
            (str_store_string, s0, "str_team_points_limit_is_reg0"),
        (else_try),
            (str_store_string, s0, "str_input_is_not_correct_for_the_command_type_help_for_more_information"),
        (try_end),
    (else_try),
        (eq, ":var_0", 41),
        (assign, reg0, "$g_multiplayer_number_of_respawn_count"),
        (try_begin),
            (eq, reg0, 0),
            (str_store_string, s1, "str_unlimited"),
        (else_try),
            (str_store_string, s1, "str_reg0"),
        (try_end),
        (str_store_string, s0, "str_defender_spawn_count_limit_is_s1"),
    (else_try),
        (eq, ":var_0", 42),
        (try_begin),
            (is_between, ":var_1", 0, 6),
            (assign, "$g_multiplayer_number_of_respawn_count", ":var_1"),
            (assign, reg0, "$g_multiplayer_number_of_respawn_count"),
            (try_begin),
                (eq, reg0, 0),
                (str_store_string, s1, "str_unlimited"),
            (else_try),
                (str_store_string, s1, "str_reg0"),
            (try_end),
            (str_store_string, s0, "str_defender_spawn_count_limit_is_s1"),
            (get_max_players, ":var_3"),
            (try_for_range, ":var_4", 1, ":var_3"),
                (player_is_active, ":var_4"),
                (multiplayer_send_int_to_player, ":var_4", 88, ":var_1"),
            (try_end),
        (else_try),
            (str_store_string, s0, "str_input_is_not_correct_for_the_command_type_help_for_more_information"),
        (try_end),
    (else_try),
        (eq, ":var_0", 43),
        (try_begin),
            (eq, "$g_multiplayer_disallow_ranged_weapons", 1),
            (str_store_string, s0, "str_ranged_weapons_are_disallowed"),
        (else_try),
            (str_store_string, s0, "str_ranged_weapons_are_allowed"),
        (try_end),
    (else_try),
        (eq, ":var_0", 44),
        (try_begin),
            (is_between, ":var_1", 0, 2),
            (assign, "$g_multiplayer_disallow_ranged_weapons", ":var_1"),
            (try_begin),
                (eq, ":var_1", 1),
                (str_store_string, s0, "str_ranged_weapons_are_disallowed"),
            (else_try),
                (str_store_string, s0, "str_ranged_weapons_are_allowed"),
            (try_end),
        (else_try),
            (str_store_string, s0, "str_input_is_not_correct_for_the_command_type_help_for_more_information"),
        (try_end),
    (else_try),
        (str_store_string, s0, "@{!}DEBUG : SYSTEM ERROR!"),
    (try_end),

]),

("game_event_party_encounter",
[
    (store_script_param_1, "$g_encountered_party"),
    (store_script_param_2, "$g_encountered_party_2"),
    (store_faction_of_party, "$g_encountered_party_faction", "$g_encountered_party"),
    (store_relation, "$g_encountered_party_relation", "$g_encountered_party_faction", "fac_player_faction"),
    (party_get_slot, "$g_encountered_party_type", "$g_encountered_party", slot_party_type),
    (party_get_template_id, "$g_encountered_party_template", "$g_encountered_party"),
    (call_script, "script_party_count_fit_regulars", "p_main_party"),
    (assign, "$playerparty_prebattle_regulars", reg0),
    (try_begin),
        (eq, "$culture_pool_initialized", 1),
        (eq, "$culture_pool", 1),
        (call_script, "script_rebalance_troops_by_culture"),
    (try_end),
    (assign, "$g_last_rest_center", -1),
    (assign, "$talk_context", 0),
    (assign, "$g_player_surrenders", 0),
    (assign, "$g_enemy_surrenders", 0),
    (assign, "$g_leave_encounter", 0),
    (assign, "$g_engaged_enemy", 0),
    (try_begin),
        (neg|is_between, "$g_encountered_party", "p_town_1_1", "p_salt_mine"),
        (rest_for_hours, 0),
        (assign, "$g_infinite_camping", 0),
    (try_end),
    (assign, "$new_encounter", 1),
    (try_begin),
        (neg|ge, "$g_encountered_party_2", 0),
        (try_begin),
            (party_slot_eq, "$g_encountered_party", slot_party_type, 3),
            (jump_to_menu, "mnu_castle_outside"),
        (else_try),
            (party_slot_eq, "$g_encountered_party", slot_party_type, 2),
            (jump_to_menu, "mnu_castle_outside"),
        (else_try),
            (party_slot_eq, "$g_encountered_party", slot_party_type, 16),
            (jump_to_menu, "mnu_ship_reembark"),
        (else_try),
            (party_slot_eq, "$g_encountered_party", slot_party_type, 4),
            (jump_to_menu, "mnu_village"),
        (else_try),
            (party_slot_eq, "$g_encountered_party", slot_party_type, 17),
            (jump_to_menu, "mnu_cattle_herd"),
        (else_try),
            (is_between, "$g_encountered_party", "p_training_ground", "p_bridge_1"),
            (jump_to_menu, "mnu_training_ground"),
        (else_try),
            (party_get_template_id, ":var_0", "$g_encountered_party"),
            (ge, ":var_0", "pt_steppe_bandit_lair"),
            (neg|ge, ":var_0", "pt_bandit_lair_templates_end"),
            (assign, "$loot_screen_shown", 0),
            (jump_to_menu, "mnu_bandit_lair"),
        (else_try),
            (eq, "$g_encountered_party", "p_zendar"),
            (jump_to_menu, "mnu_zendar"),
        (else_try),
            (eq, "$g_encountered_party", "p_salt_mine"),
            (jump_to_menu, "mnu_salt_mine"),
        (else_try),
            (eq, "$g_encountered_party", "p_four_ways_inn"),
            (jump_to_menu, "mnu_four_ways_inn"),
        (else_try),
            (eq, "$g_encountered_party", "p_test_scene"),
            (jump_to_menu, "mnu_test_scene"),
        (else_try),
            (eq, "$g_encountered_party", "p_battlefields"),
            (jump_to_menu, "mnu_battlefields"),
        (else_try),
            (eq, "$g_encountered_party", "p_training_ground"),
            (jump_to_menu, "mnu_tutorial"),
        (else_try),
            (eq, "$g_encountered_party", "p_camp_bandits"),
            (jump_to_menu, "mnu_camp"),
        (else_try),
            (eq, "$g_encountered_party_template", "pt_manor"),
            (jump_to_menu, "mnu_manor_center"),
        (else_try),
            (party_slot_eq, "$g_encountered_party", 301, 1),
            (eq, "$g_encountered_party_template", "pt_mongolian_camp"),
            (jump_to_menu, "mnu_mongol_camp"),
        (else_try),
            (jump_to_menu, "mnu_simple_encounter"),
        (try_end),
    (else_try),
        (try_begin),
            (this_or_next|party_slot_eq, "$g_encountered_party", slot_party_type, 3),
            (party_slot_eq, "$g_encountered_party", slot_party_type, 2),
            (try_begin),
                (eq, "$auto_enter_town", "$g_encountered_party"),
                (jump_to_menu, "mnu_town"),
            (else_try),
                (eq, "$auto_besiege_town", "$g_encountered_party"),
                (jump_to_menu, "mnu_besiegers_camp_with_allies"),
            (else_try),
                (jump_to_menu, "mnu_join_siege_outside"),
            (try_end),
        (else_try),
            (jump_to_menu, "mnu_pre_join"),
        (try_end),
    (try_end),
    (assign, "$auto_enter_town", 0),
    (assign, "$auto_besiege_town", 0),

]),

("game_event_simulate_battle",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (assign, "$marshall_defeated_in_battle", -1),
    (store_current_hours, ":var_2"),
    (try_for_parties, ":var_3"),
        (party_get_battle_opponent, ":var_4", ":var_3"),
        (gt, ":var_4", 0),
        (party_set_slot, ":var_3", slot_party_last_in_combat, ":var_2"),
    (try_end),
    (assign, ":var_5", 1),
    (try_begin),
        (ge, ":var_0", 0),
        (ge, ":var_1", 0),
        (party_is_active, ":var_0"),
        (party_is_active, ":var_1"),
        (store_faction_of_party, ":var_6", ":var_0"),
        (store_faction_of_party, ":var_7", ":var_1"),
        (store_relation, ":var_8", ":var_6", ":var_7"),
        (neg|ge, ":var_8", 0),
        (assign, ":var_5", 0),
        (try_begin),
            (this_or_next|eq, "$g_battle_simulation_cancel_for_party", ":var_0"),
            (eq, "$g_battle_simulation_cancel_for_party", ":var_1"),
            (assign, "$g_battle_simulation_cancel_for_party", -1),
            (assign, "$auto_enter_town", "$g_battle_simulation_auto_enter_town_after_battle"),
            (assign, ":var_5", 1),
        (else_try),
            (try_begin),
                (this_or_next|party_slot_eq, ":var_0", slot_party_retreat_flag, 1),
                (party_slot_eq, ":var_1", slot_party_retreat_flag, 1),
                (assign, ":var_5", 1),
            (try_end),
            (party_set_slot, ":var_1", slot_party_retreat_flag, 0),
            (party_collect_attachments_to_party, ":var_0", "p_collective_ally"),
            (party_collect_attachments_to_party, ":var_1", "p_collective_enemy"),
            (call_script, "script_party_calculate_strength", "p_collective_ally", 0),
            (assign, ":var_9", reg0),
            (call_script, "script_party_calculate_strength", "p_collective_enemy", 0),
            (assign, ":var_10", reg0),
            (store_div, ":var_9", ":var_9", 20),
            (val_min, ":var_9", 50),
            (val_max, ":var_9", 1),
            (store_div, ":var_10", ":var_10", 20),
            (val_min, ":var_10", 50),
            (val_add, ":var_10", 1),
            (try_begin),
                (this_or_next|party_slot_eq, ":var_0", slot_party_type, 2),
                (party_slot_eq, ":var_0", slot_party_type, 3),
                (val_mul, ":var_9", 123),
                (val_div, ":var_9", 100),
                (val_mul, ":var_10", 100),
                (val_div, ":var_10", 123),
            (try_end),
            (call_script, "script_party_count_fit_for_battle", "p_collective_ally", 0),
            (assign, ":var_11", reg0),
            (try_begin),
                (neg|is_currently_night),
                (inflict_casualties_to_party_group, ":var_1", ":var_9", "p_temp_casualties"),
                (party_collect_attachments_to_party, ":var_1", "p_collective_enemy"),
            (try_end),
            (call_script, "script_party_count_fit_for_battle", "p_collective_enemy", 0),
            (assign, ":var_12", reg0),
            (try_begin),
                (gt, ":var_12", 0),
                (neg|is_currently_night),
                (inflict_casualties_to_party_group, ":var_0", ":var_10", "p_temp_casualties"),
                (party_collect_attachments_to_party, ":var_0", "p_collective_ally"),
            (try_end),
            (call_script, "script_party_count_fit_for_battle", "p_collective_ally", 0),
            (assign, ":var_13", reg0),
            (try_begin),
                (this_or_next|eq, ":var_12", 0),
                (eq, ":var_13", 0),
                (assign, ":var_14", 0),
                (try_begin),
                    (neg|troop_is_wounded, "trp_player"),
                    (eq, ":var_13", 0),
                    (eq, "$auto_enter_town", "$g_encountered_party"),
                    (eq, ":var_11", ":var_13"),
                    (assign, ":var_14", 1),
                (try_end),
                (eq, ":var_14", 0),
                (try_begin),
                    (eq, ":var_12", 0),
                    (eq, ":var_13", 0),
                    (assign, ":var_15", -1),
                    (assign, ":var_16", -1),
                    (assign, ":var_17", -1),
                (else_try),
                    (eq, ":var_12", 0),
                    (assign, ":var_15", ":var_0"),
                    (assign, ":var_16", ":var_1"),
                    (assign, ":var_17", "p_collective_enemy"),
                (else_try),
                    (assign, ":var_15", ":var_1"),
                    (assign, ":var_16", ":var_0"),
                    (assign, ":var_17", "p_collective_ally"),
                (try_end),
                (try_begin),
                    (ge, ":var_15", 0),
                    (call_script, "script_get_nonempty_party_in_group", ":var_15"),
                    (assign, ":var_18", reg0),
                    (store_faction_of_party, ":var_19", ":var_18"),
                    (store_faction_of_party, ":var_20", ":var_16"),
                (else_try),
                    (assign, ":var_18", -1),
                (try_end),
                (try_begin),
                    (ge, ":var_17", 0),
                    (party_get_num_companion_stacks, ":var_21", ":var_17"),
                (else_try),
                    (assign, ":var_21", 0),
                (try_end),
                (try_for_range, ":var_22", 0, ":var_21"),
                    (party_stack_get_troop_id, ":var_23", ":var_17", ":var_22"),
                    (troop_is_hero, ":var_23"),
                    (try_begin),
                        (check_quest_active, "qst_lend_surgeon"),
                        (quest_slot_eq, "qst_lend_surgeon", 6, ":var_23"),
                        (call_script, "script_abort_quest", "qst_lend_surgeon", 0),
                    (try_end),
                    (call_script, "script_remove_troop_from_prison", ":var_23"),
                    (troop_set_slot, ":var_23", slot_troop_leaded_party, -1),
                    (store_random_in_range, ":var_24", 0, 100),
                    (str_store_troop_name_link, s1, ":var_23"),
                    (str_store_faction_name_link, s2, ":var_19"),
                    (store_troop_faction, ":var_25", ":var_23"),
                    (str_store_faction_name_link, s3, ":var_25"),
                    (try_begin),
                        (ge, ":var_24", 70),
                        (party_stack_get_troop_id, ":var_26", ":var_18", 0),
                        (is_between, ":var_26", "trp_npc1", "trp_knight_1_1_wife"),
                        (party_add_prisoners, ":var_18", ":var_23", 1),
                        (gt, reg0, 0),
                        (troop_set_slot, ":var_23", slot_troop_prisoner_of_party, ":var_18"),
                        (display_log_message, "str_hero_taken_prisoner"),
                        (try_begin),
                            (call_script, "script_cf_prisoner_offered_parole", ":var_23"),
                            (try_begin),
                                (eq, "$cheat_mode", 1),
                                (display_message, "@{!}DEBUG : Prisoner granted parole"),
                            (try_end),
                            (call_script, "script_troop_change_relation_with_troop", ":var_26", ":var_23", 3),
                            (val_add, "$total_battle_enemy_changes", 3),
                        (else_try),
                            (try_begin),
                                (eq, "$cheat_mode", 1),
                                (display_message, "@{!}DEBUG : Prisoner not offered parole"),
                            (try_end),
                            (call_script, "script_troop_change_relation_with_troop", ":var_26", ":var_23", -5),
                            (val_add, "$total_battle_enemy_changes", -5),
                        (try_end),
                        (store_faction_of_party, ":var_27", ":var_18"),
                        (call_script, "script_update_troop_location_notes_prisoned", ":var_23", ":var_27"),
                    (else_try),
                        (display_message, "@{s1} of {s3} was defeated in battle but managed to escape."),
                    (try_end),
                    (try_begin),
                        (store_troop_faction, ":var_28", ":var_23"),
                        (is_between, ":var_28", "fac_player_supporters_faction", "fac_kingdoms_end"),
                        (faction_slot_eq, ":var_28", slot_faction_marshall, ":var_23"),
                        (is_between, ":var_28", "fac_player_supporters_faction", "fac_kingdoms_end"),
                        (assign, "$marshall_defeated_in_battle", ":var_23"),
                        (assign, "$g_recalculate_ais", 1),
                    (try_end),
                (try_end),
                (try_begin),
                    (ge, ":var_17", 0),
                    (party_get_num_prisoner_stacks, ":var_21", ":var_17"),
                (else_try),
                    (assign, ":var_21", 0),
                (try_end),
                (try_for_range, ":var_22", 0, ":var_21"),
                    (party_prisoner_stack_get_troop_id, ":var_23", ":var_17", ":var_22"),
                    (troop_is_hero, ":var_23"),
                    (call_script, "script_remove_troop_from_prison", ":var_23"),
                    (store_troop_faction, ":var_28", ":var_23"),
                    (str_store_troop_name_link, s1, ":var_23"),
                    (str_store_faction_name_link, s2, ":var_19"),
                    (str_store_faction_name_link, s3, ":var_28"),
                    (display_log_message, "str_hero_freed"),
                (try_end),
                (try_begin),
                    (ge, ":var_17", 0),
                    (party_clear, "p_temp_party"),
                    (assign, "$g_move_heroes", 0),
                    (call_script, "script_party_add_party_prisoners", "p_temp_party", ":var_17"),
                    (call_script, "script_party_prisoners_add_party_companions", "p_temp_party", ":var_17"),
                    (distribute_party_among_party_group, "p_temp_party", ":var_15"),
                    (call_script, "script_battle_political_consequences", ":var_16", ":var_15"),
                    (call_script, "script_clear_party_group", ":var_16"),
                (try_end),
                (assign, ":var_5", 1),
                (try_begin),
                    (ge, ":var_17", 0),
                    (party_get_slot, ":var_29", ":var_16", slot_party_type),
                    (this_or_next|eq, ":var_29", 3),
                    (eq, ":var_29", 2),
                    (assign, "$g_recalculate_ais", 1),
                    (store_faction_of_party, ":var_30", ":var_15"),
                    (store_faction_of_party, ":var_20", ":var_16"),
                    (str_store_party_name, s1, ":var_16"),
                    (str_store_faction_name, s2, ":var_30"),
                    (str_store_faction_name, s3, ":var_20"),
                    (display_log_message, "str_center_captured"),
                    (store_current_hours, ":var_2"),
                    (faction_set_slot, ":var_30", slot_faction_ai_last_decisive_event, ":var_2"),
                    (try_begin),
                        (eq, "$g_encountered_party", ":var_16"),
                        (call_script, "script_add_log_entry", 18, "trp_player", "$g_encountered_party", 0, "$g_encountered_party_faction"),
                    (try_end),
                    (try_begin),
                        (party_get_num_companion_stacks, ":var_21", ":var_15"),
                        (gt, ":var_21", 0),
                        (party_stack_get_troop_id, ":var_31", ":var_15", 0),
                        (is_between, ":var_31", "trp_npc1", "trp_knight_1_1_wife"),
                        (party_set_slot, ":var_16", slot_center_last_taken_by_troop, ":var_31"),
                    (else_try),
                        (party_set_slot, ":var_16", slot_center_last_taken_by_troop, -1),
                    (try_end),
                    (call_script, "script_lift_siege", ":var_16", 0),
                    (store_faction_of_party, ":var_32", ":var_16"),
                    (try_begin),
                        (is_between, ":var_16", "p_town_1_1", "p_castle_1_1"),
                        (assign, ":var_33", 40),
                    (else_try),
                        (assign, ":var_33", 20),
                    (try_end),
                    (call_script, "script_faction_inflict_war_damage_on_faction", ":var_30", ":var_32", ":var_33"),
                    (call_script, "script_give_center_to_faction", ":var_16", ":var_30"),
                    (try_begin),
                        (eq, ":var_20", "fac_player_supporters_faction"),
                        (call_script, "script_add_notification_menu", "mnu_notification_center_lost", ":var_16", ":var_30"),
                    (try_end),
                    (party_get_num_attached_parties, ":var_34", ":var_1"),
                    (try_for_range, ":var_35", 0, ":var_34"),
                        (party_get_attached_party_with_rank, ":var_36", ":var_1", ":var_35"),
                        (party_get_num_companion_stacks, ":var_21", ":var_36"),
                        (assign, ":var_37", 0),
                        (try_for_range, ":var_38", 0, ":var_21"),
                            (party_stack_get_size, ":var_39", ":var_36", ":var_38"),
                            (val_add, ":var_37", ":var_39"),
                        (try_end),
                        (try_begin),
                            (ge, ":var_37", 10),
                            (assign, ":var_40", 0),
                            (assign, ":var_41", -1),
                            (assign, ":var_42", 10),
                            (try_for_range, ":var_43", 0, ":var_42"),
                                (store_random_in_range, ":var_44", 1, ":var_21"),
                                (party_stack_get_troop_id, ":var_45", ":var_36", ":var_44"),
                                (party_stack_get_size, ":var_39", ":var_36", ":var_44"),
                                (ge, ":var_39", 4),
                                (neg|eq, ":var_44", ":var_41"),
                                (store_mul, ":var_46", ":var_37", 2),
                                (assign, ":var_47", ":var_46"),
                                (val_min, ":var_47", 100),
                                (val_mul, ":var_39", ":var_47"),
                                (val_div, ":var_39", 100),
                                (party_stack_get_troop_id, ":var_48", ":var_36", 0),
                                (try_begin),
                                    (this_or_next|troop_slot_eq, ":var_48", slot_lord_reputation_type, 6),
                                    (this_or_next|troop_slot_eq, ":var_48", slot_lord_reputation_type, 7),
                                    (troop_slot_eq, ":var_48", slot_lord_reputation_type, 1),
                                    (assign, reg2, 0),
                                    (store_random_in_range, ":var_49", 40, 50),
                                (else_try),
                                    (this_or_next|troop_slot_eq, ":var_48", slot_lord_reputation_type, 2),
                                    (troop_slot_eq, ":var_48", slot_lord_reputation_type, 4),
                                    (assign, reg2, 1),
                                    (store_random_in_range, ":var_49", 30, 40),
                                (else_try),
                                    (this_or_next|troop_slot_eq, ":var_48", slot_lord_reputation_type, 3),
                                    (this_or_next|troop_slot_eq, ":var_48", slot_lord_reputation_type, 8),
                                    (troop_slot_eq, ":var_48", slot_lord_reputation_type, 5),
                                    (assign, reg2, 2),
                                    (store_random_in_range, ":var_49", 20, 30),
                                (else_try),
                                    (this_or_next|troop_slot_eq, ":var_48", slot_lord_reputation_type, 9),
                                    (troop_slot_eq, ":var_48", slot_lord_reputation_type, 10),
                                    (assign, reg2, 3),
                                    (store_random_in_range, ":var_49", 50, 60),
                                (try_end),
                                (val_min, ":var_49", 100),
                                (val_mul, ":var_39", ":var_49"),
                                (val_div, ":var_39", 100),
                                (party_add_members, ":var_0", ":var_45", ":var_39"),
                                (party_remove_members, ":var_36", ":var_45", ":var_39"),
                                (val_add, ":var_40", 1),
                                (assign, ":var_41", ":var_44"),
                                (try_begin),
                                    (eq, ":var_40", 3),
                                    (assign, ":var_42", 0),
                                (try_end),
                            (try_end),
                        (try_end),
                    (try_end),
                    (try_begin),
                        (neg|is_between, ":var_16", "p_castle_1_1", "p_village_1_1"),
                        (call_script, "script_change_center_prosperity", ":var_16", -5),
                        (val_add, "$newglob_total_prosperity_from_townloot", -5),
                    (try_end),
                    (call_script, "script_order_best_besieger_party_to_guard_center", ":var_16", ":var_30"),
                    (call_script, "script_cf_reinforce_party", ":var_16"),
                    (call_script, "script_cf_reinforce_party", ":var_16"),
                (try_end),
            (try_end),
            (try_begin),
                (party_slot_eq, ":var_1", slot_party_type, 13),
                (assign, ":var_50", 200),
                (game_get_reduce_campaign_ai, ":var_51"),
                (store_faction_of_party, ":var_52", ":var_1"),
                (try_begin),
                    (this_or_next|eq, ":var_1", "p_main_party"),
                    (this_or_next|eq, ":var_52", "fac_player_supporters_faction"),
                    (eq, ":var_52", "$players_kingdom"),
                (else_try),
                    (eq, ":var_51", 0),
                    (val_mul, ":var_50", 3),
                    (val_div, ":var_50", 2),
                (else_try),
                    (eq, ":var_51", 1),
                (else_try),
                    (eq, ":var_51", 2),
                    (val_div, ":var_50", 2),
                (try_end),
                (gt, ":var_12", 0),
                (call_script, "script_upgrade_hero_party", ":var_1", ":var_50"),
            (try_end),
            (try_begin),
                (party_slot_eq, ":var_0", slot_party_type, 13),
                (assign, ":var_53", 200),
                (store_faction_of_party, ":var_54", ":var_0"),
                (game_get_reduce_campaign_ai, ":var_51"),
                (try_begin),
                    (this_or_next|eq, ":var_0", "p_main_party"),
                    (this_or_next|eq, ":var_54", "fac_player_supporters_faction"),
                    (eq, ":var_54", "$players_kingdom"),
                (else_try),
                    (eq, ":var_51", 0),
                    (val_mul, ":var_53", 3),
                    (val_div, ":var_53", 2),
                (else_try),
                    (eq, ":var_51", 1),
                (else_try),
                    (eq, ":var_51", 2),
                    (val_div, ":var_53", 2),
                (try_end),
                (gt, ":var_13", 0),
                (call_script, "script_upgrade_hero_party", ":var_0", ":var_53"),
            (try_end),
            (try_begin),
                (neg|party_slot_eq, ":var_0", slot_party_type, 2),
                (neg|party_slot_eq, ":var_0", slot_party_type, 3),
                (party_get_slot, ":var_55", ":var_1", slot_party_cached_strength),
                (party_get_slot, ":var_56", ":var_1", slot_party_nearby_friend_strength),
                (party_get_slot, ":var_57", ":var_1", slot_party_follower_strength),
                (store_add, ":var_58", ":var_55", ":var_56"),
                (val_add, ":var_58", ":var_57"),
                (party_get_slot, ":var_59", ":var_0", slot_party_cached_strength),
                (party_get_slot, ":var_60", ":var_0", slot_party_nearby_friend_strength),
                (party_get_slot, ":var_61", ":var_0", slot_party_follower_strength),
                (store_add, ":var_62", ":var_59", ":var_60"),
                (val_add, ":var_58", ":var_61"),
                (store_random_in_range, ":var_63", 0, 100),
                (try_begin),
                    (neg|ge, ":var_63", 10),
                    (assign, ":var_5", 1),
                (try_end),
            (else_try),
                (party_get_slot, ":var_55", ":var_1", slot_party_cached_strength),
                (party_get_slot, ":var_56", ":var_1", slot_party_nearby_friend_strength),
                (party_get_slot, ":var_64", ":var_1", slot_party_follower_strength),
                (store_add, ":var_58", ":var_55", ":var_56"),
                (val_add, ":var_58", ":var_64"),
                (party_get_slot, ":var_59", ":var_0", slot_party_cached_strength),
                (party_get_slot, ":var_60", ":var_0", slot_party_nearby_friend_strength),
                (store_add, ":var_62", ":var_59", ":var_60"),
                (val_mul, ":var_62", 13),
                (val_div, ":var_62", 10),
                (gt, ":var_62", ":var_58"),
                (gt, ":var_62", 3),
                (store_random_in_range, ":var_63", 0, 100),
                (try_begin),
                    (neg|ge, ":var_63", 15),
                    (assign, ":var_5", 1),
                    (assign, "$g_recalculate_ais", 1),
                    (try_begin),
                        (eq, "$cheat_mode", 1),
                        (display_message, "@{!}DEBUG : Siege attackers are running away"),
                    (try_end),
                (try_end),
            (try_end),
        (try_end),
    (try_end),
    (set_trigger_result, ":var_5"),

]),

("game_event_battle_end",
[
    (try_for_range, ":var_0", "trp_npc1", "trp_knight_1_1_wife"),
        (troop_slot_eq, ":var_0", slot_troop_occupation, 2),
        (troop_get_slot, ":var_1", ":var_0", slot_troop_leaded_party),
        (troop_get_slot, ":var_2", ":var_0", slot_troop_prisoner_of_party),
        (try_begin),
            (ge, ":var_1", 0),
            (assign, ":var_3", 0),
            (try_begin),
                (neg|party_is_active, ":var_1"),
                (assign, ":var_3", 1),
            (else_try),
                (party_count_companions_of_type, ":var_4", ":var_1", ":var_0"),
                (neg|gt, ":var_4", 0),
                (assign, ":var_3", 1),
            (try_end),
            (eq, ":var_3", 1),
            (troop_set_slot, ":var_0", slot_troop_leaded_party, -1),
        (try_end),
        (try_begin),
            (ge, ":var_2", 0),
            (assign, ":var_3", 0),
            (try_begin),
                (neg|party_is_active, ":var_2"),
                (assign, ":var_3", 1),
            (else_try),
                (party_count_prisoners_of_type, ":var_4", ":var_2", ":var_0"),
                (neg|gt, ":var_4", 0),
                (assign, ":var_3", 1),
            (try_end),
            (eq, ":var_3", 1),
            (try_begin),
                (eq, "$cheat_mode", 1),
                (str_store_troop_name, s1, ":var_0"),
                (display_message, "@{!}DEBUG: {s1} is no longer a prisoner."),
            (try_end),
            (call_script, "script_remove_troop_from_prison", ":var_0"),
            (try_begin),
                (party_count_prisoners_of_type, ":var_4", "p_main_party", ":var_0"),
                (gt, ":var_4", 0),
                (troop_set_slot, ":var_0", slot_troop_prisoner_of_party, "p_main_party"),
                (assign, ":var_3", 0),
                (try_begin),
                    (eq, "$cheat_mode", 1),
                    (str_store_troop_name, s1, ":var_0"),
                    (display_message, "@{!}DEBUG: {s1} is now a prisoner of player."),
                (try_end),
            (try_end),
            (eq, ":var_3", 1),
            (try_for_range, ":var_5", "trp_npc1", "trp_knight_1_1_wife"),
                (troop_slot_eq, ":var_5", slot_troop_occupation, 2),
                (eq, ":var_3", 1),
                (troop_get_slot, ":var_6", ":var_5", slot_troop_leaded_party),
                (party_is_active, ":var_6"),
                (party_count_prisoners_of_type, ":var_4", ":var_6", ":var_0"),
                (gt, ":var_4", 0),
                (troop_set_slot, ":var_0", slot_troop_prisoner_of_party, ":var_6"),
                (assign, ":var_3", 0),
                (try_begin),
                    (eq, "$cheat_mode", 1),
                    (str_store_troop_name, s1, ":var_0"),
                    (str_store_party_name, s2, ":var_6"),
                    (display_message, "@{!}DEBUG: {s1} is now a prisoner of {s2}."),
                (try_end),
            (try_end),
            (try_for_range, ":var_6", "p_town_1_1", "p_village_1_1"),
                (eq, ":var_3", 1),
                (party_count_prisoners_of_type, ":var_4", ":var_6", ":var_0"),
                (gt, ":var_4", 0),
                (troop_set_slot, ":var_0", slot_troop_prisoner_of_party, ":var_6"),
                (assign, ":var_3", 0),
                (try_begin),
                    (eq, "$cheat_mode", 1),
                    (str_store_troop_name, s1, ":var_0"),
                    (str_store_party_name, s2, ":var_6"),
                    (display_message, "@{!}DEBUG: {s1} is now a prisoner of {s2}."),
                (try_end),
            (try_end),
        (try_end),
    (try_end),

]),

("order_best_besieger_party_to_guard_center",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (assign, ":var_2", -1),
    (assign, ":var_3", 0),
    (try_for_range, ":var_4", "trp_npc1", "trp_knight_1_1_wife"),
        (troop_get_slot, ":var_5", ":var_4", slot_troop_leaded_party),
        (gt, ":var_5", 0),
        (party_is_active, ":var_5"),
        (store_faction_of_party, ":var_6", ":var_5"),
        (eq, ":var_1", ":var_6"),
        (store_distance_to_party_from_party, ":var_7", ":var_5", ":var_0"),
        (neg|ge, ":var_7", 5),
        (neg|faction_slot_eq, ":var_1", slot_faction_marshall, ":var_4"),
        (assign, ":var_8", 0),
        (try_begin),
            (party_slot_eq, ":var_5", slot_party_ai_state, 1),
            (party_slot_eq, ":var_5", slot_party_ai_object, ":var_0"),
            (assign, ":var_8", 1),
        (else_try),
            (party_slot_eq, ":var_5", slot_party_ai_state, 11),
            (party_get_slot, ":var_9", ":var_5", slot_party_ai_object),
            (party_slot_eq, ":var_9", slot_party_ai_state, 1),
            (party_slot_eq, ":var_9", slot_party_ai_object, ":var_0"),
            (assign, ":var_8", 1),
        (try_end),
        (eq, ":var_8", 1),
        (party_get_slot, ":var_10", ":var_5", slot_party_cached_strength),
        (gt, ":var_10", ":var_3"),
        (assign, ":var_3", ":var_10"),
        (assign, ":var_2", ":var_5"),
    (try_end),
    (try_begin),
        (gt, ":var_2", 0),
        (call_script, "script_party_set_ai_state", ":var_2", 7, ":var_0"),
        (party_set_flags, ":var_2", 65536, 1),
    (try_end),

]),

("game_get_item_buy_price_factor",
[
    (store_script_param_1, ":var_0"),
    (assign, ":var_1", 100),
    (call_script, "script_get_trade_penalty", ":var_0"),
    (assign, ":var_2", reg0),
    (try_begin),
        (is_between, "$g_encountered_party", "p_town_1_1", "p_salt_mine"),
        (is_between, ":var_0", "itm_spice", "itm_siege_supply"),
        (store_sub, ":var_3", ":var_0", "itm_spice"),
        (val_add, ":var_3", 250),
        (party_get_slot, ":var_1", "$g_encountered_party", ":var_3"),
        (val_mul, ":var_1", 100),
        (val_div, ":var_1", 1000),
    (try_end),
    (store_add, ":var_4", 100, ":var_2"),
    (val_mul, ":var_1", ":var_4"),
    (val_div, ":var_1", 100),
    (assign, reg0, ":var_1"),
    (set_trigger_result, reg0),

]),

("game_get_item_sell_price_factor",
[
    (store_script_param_1, ":var_0"),
    (assign, ":var_1", 100),
    (call_script, "script_get_trade_penalty", ":var_0"),
    (assign, ":var_2", reg0),
    (try_begin),
        (is_between, "$g_encountered_party", "p_town_1_1", "p_salt_mine"),
        (is_between, ":var_0", "itm_spice", "itm_siege_supply"),
        (store_sub, ":var_3", ":var_0", "itm_spice"),
        (val_add, ":var_3", 250),
        (party_get_slot, ":var_1", "$g_encountered_party", ":var_3"),
        (val_mul, ":var_1", 100),
        (val_div, ":var_1", 1000),
    (else_try),
        (val_mul, ":var_2", 12),
    (try_end),
    (store_add, ":var_4", 100, ":var_2"),
    (val_mul, ":var_1", 100),
    (val_div, ":var_1", ":var_4"),
    (assign, reg0, ":var_1"),
    (set_trigger_result, reg0),

]),

("get_trade_penalty",
[
    (store_script_param_1, ":var_0"),
    (assign, ":var_1", 0),
    (party_get_skill_level, ":var_2", "p_main_party", skl_trade),
    (try_begin),
        (is_between, ":var_0", "itm_spice", "itm_siege_supply"),
        (assign, ":var_1", 13),
        (store_mul, ":var_3", ":var_2", 1),
        (val_sub, ":var_1", ":var_3"),
        (val_max, ":var_1", 3),
    (else_try),
        (assign, ":var_1", 100),
        (store_mul, ":var_3", ":var_2", 5),
        (val_sub, ":var_1", ":var_3"),
    (try_end),
    (assign, ":var_4", 1000),
    (try_begin),
        (is_between, "$g_encountered_party", "p_town_1_1", "p_salt_mine"),
        (party_get_slot, ":var_5", "$g_encountered_party", slot_center_player_relation),
        (store_mul, ":var_6", ":var_5", -3),
        (val_add, ":var_4", ":var_6"),
        (try_begin),
            (neg|ge, ":var_5", 0),
            (store_sub, ":var_7", 100, ":var_5"),
            (val_mul, ":var_4", ":var_7"),
            (val_div, ":var_4", 100),
        (try_end),
    (try_end),
    (call_script, "script_troop_get_player_relation", "$g_talk_troop"),
    (assign, ":var_8", reg0),
    (try_begin),
        (neg|ge, ":var_8", 0),
        (store_sub, ":var_9", 0, ":var_8"),
        (store_mul, ":var_10", ":var_9", 20),
        (val_add, ":var_4", ":var_10"),
    (try_end),
    (try_begin),
        (is_between, "$g_encountered_party", "p_village_1_1", "p_salt_mine"),
        (val_mul, ":var_1", 5),
        (val_div, ":var_1", 4),
    (try_end),
    (val_mul, ":var_1", ":var_4"),
    (val_div, ":var_1", 1000),
    (val_max, ":var_1", 1),
    (assign, reg0, ":var_1"),

]),

("game_event_buy_item",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (try_begin),
        (is_between, ":var_0", "itm_spice", "itm_siege_supply"),
        (store_sub, ":var_2", ":var_0", "itm_spice"),
        (val_add, ":var_2", 250),
        (party_get_slot, ":var_3", "$g_encountered_party", ":var_2"),
        (try_begin),
            (eq, ":var_1", 0),
            (val_add, ":var_3", 10),
        (else_try),
            (val_add, ":var_3", 15),
        (try_end),
        (val_min, ":var_3", 10000),
        (party_set_slot, "$g_encountered_party", ":var_2", ":var_3"),
    (try_end),

]),

("game_event_sell_item",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (try_begin),
        (is_between, ":var_0", "itm_spice", "itm_siege_supply"),
        (store_sub, ":var_2", ":var_0", "itm_spice"),
        (val_add, ":var_2", 250),
        (party_get_slot, ":var_3", "$g_encountered_party", ":var_2"),
        (try_begin),
            (eq, ":var_1", 0),
            (val_sub, ":var_3", 15),
        (else_try),
            (val_sub, ":var_3", 10),
        (try_end),
        (val_max, ":var_3", 100),
        (party_set_slot, "$g_encountered_party", ":var_2", ":var_3"),
    (try_end),

]),

("start_wedding_cutscene",
[
    (store_script_param, "$g_wedding_groom_troop", 1),
    (store_script_param, "$g_wedding_bride_troop", 2),
    (assign, "$g_wedding_bishop_troop", "trp_temporary_minister"),
    (try_begin),
        (is_between, "$players_kingdom", "fac_player_supporters_faction", "fac_kingdoms_end"),
        (neg|faction_slot_eq, "$players_kingdom", slot_faction_leader, "$g_wedding_groom_troop"),
        (neg|faction_slot_eq, "$players_kingdom", slot_faction_leader, "$g_wedding_bride_troop"),
        (faction_get_slot, ":var_0", "$players_kingdom", slot_faction_leader),
        (troop_get_type, ":var_1", ":var_0"),
        (eq, ":var_1", 0),
        (neg|eq, ":var_0", "$g_wedding_groom_troop"),
        (assign, "$g_wedding_bishop_troop", ":var_0"),
    (else_try),
        (eq, "$players_kingdom", "fac_player_supporters_faction"),
        (faction_slot_eq, "$players_kingdom", slot_faction_leader, "trp_player"),
        (gt, "$g_player_minister", 0),
        (troop_get_type, ":var_1", "$g_player_minister"),
        (eq, ":var_1", 0),
        (neg|eq, "$g_player_minister", "$g_wedding_groom_troop"),
        (assign, "$g_wedding_bishop_troop", "$g_player_minister"),
    (try_end),
    (assign, "$g_wedding_brides_dad_troop", "trp_temporary_minister"),
    (try_begin),
        (neg|eq, "$g_wedding_bride_troop", "trp_player"),
        (try_begin),
            (troop_get_slot, ":var_2", "$g_wedding_bride_troop", slot_troop_father),
            (gt, ":var_2", 0),
            (troop_get_type, ":var_1", ":var_2"),
            (eq, ":var_1", 0),
            (neg|eq, ":var_2", "$g_wedding_groom_troop"),
            (neg|eq, ":var_2", "$g_wedding_bishop_troop"),
            (assign, "$g_wedding_brides_dad_troop", ":var_2"),
        (else_try),
            (troop_get_slot, ":var_3", "$g_wedding_bride_troop", slot_troop_guardian),
            (gt, ":var_3", 0),
            (troop_get_type, ":var_1", ":var_3"),
            (eq, ":var_1", 0),
            (neg|eq, ":var_3", "$g_wedding_groom_troop"),
            (neg|eq, ":var_3", "$g_wedding_bishop_troop"),
            (assign, "$g_wedding_brides_dad_troop", ":var_3"),
        (try_end),
    (else_try),
        (try_for_range, ":var_4", "trp_npc1", "trp_kingdom_1_lord"),
            (this_or_next|troop_slot_eq, ":var_4", slot_troop_occupation, 5),
            (troop_slot_eq, ":var_4", slot_troop_occupation, 2),
            (troop_get_type, ":var_1", ":var_4"),
            (eq, ":var_1", 0),
            (neg|eq, ":var_4", "$g_wedding_groom_troop"),
            (neg|eq, ":var_4", "$g_wedding_bishop_troop"),
            (assign, "$g_wedding_brides_dad_troop", ":var_4"),
        (try_end),
    (try_end),
    (modify_visitors_at_site, "scn_wedding"),
    (reset_visitors, 0),
    (set_visitor, 0, "$g_wedding_groom_troop"),
    (set_visitor, 1, "$g_wedding_bride_troop"),
    (set_visitor, 2, "$g_wedding_brides_dad_troop"),
    (set_visitor, 3, "$g_wedding_bishop_troop"),
    (assign, ":var_5", 4),
    (assign, ":var_6", 0),
    (try_for_range, ":var_7", "trp_npc1", "trp_heroes_end"),
        (neg|ge, ":var_5", 32),
        (neg|eq, ":var_7", "$g_wedding_groom_troop"),
        (neg|eq, ":var_7", "$g_wedding_bride_troop"),
        (neg|eq, ":var_7", "$g_wedding_brides_dad_troop"),
        (neg|eq, ":var_7", "$g_wedding_bishop_troop"),
        (store_troop_faction, ":var_8", ":var_7"),
        (is_between, ":var_8", "fac_player_supporters_faction", "fac_kingdoms_end"),
        (eq, ":var_8", "$players_kingdom"),
        (this_or_next|troop_slot_eq, ":var_7", slot_troop_occupation, 5),
        (this_or_next|troop_slot_eq, ":var_7", slot_troop_occupation, 2),
        (troop_slot_eq, ":var_7", slot_troop_occupation, 6),
        (troop_get_type, ":var_1", ":var_7"),
        (assign, ":var_9", 1),
        (try_begin),
            (eq, ":var_1", 0),
            (assign, ":var_9", 0),
            (neg|ge, ":var_6", 16),
            (assign, ":var_9", 1),
            (val_add, ":var_6", 1),
        (try_end),
        (eq, ":var_9", 1),
        (set_visitor, ":var_5", ":var_7"),
        (val_add, ":var_5", 1),
    (try_end),
    (set_jump_mission, "mt_wedding"),
    (jump_to_scene, "scn_wedding"),
    (change_screen_mission),

]),

("orig_game_get_troop_wage",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (assign, ":var_2", 0),
    (troop_get_slot, ":var_3", ":var_0", 230),
    (troop_get_slot, ":var_4", ":var_0", 231),
    (troop_get_slot, ":var_5", ":var_0", 232),
    (troop_get_slot, ":var_6", ":var_0", 233),
    (try_begin),
        (neg|troop_is_hero, ":var_0"),
        (troop_get_slot, ":var_3", ":var_0", 230),
        (troop_get_slot, ":var_4", ":var_0", 231),
        (troop_get_slot, ":var_5", ":var_0", 232),
        (troop_get_slot, ":var_6", ":var_0", 233),
    (try_end),
    (try_begin),
        (neg|troop_is_hero, ":var_0"),
        (eq, ":var_6", 0),
        (store_character_level, ":var_7", ":var_0"),
        (neg|gt, ":var_7", 12),
        (val_div, ":var_3", 9),
        (val_div, ":var_4", 9),
    (try_end),
    (try_begin),
        (eq, ":var_6", 3),
        (val_mul, ":var_4", 3),
        (val_div, ":var_4", 2),
        (val_mul, ":var_3", 3),
        (val_div, ":var_3", 2),
        (val_add, ":var_3", ":var_5"),
    (else_try),
        (eq, ":var_6", 1),
        (val_mul, ":var_3", 4),
        (val_div, ":var_3", 2),
        (val_add, ":var_3", ":var_5"),
        (val_mul, ":var_4", 3),
        (val_div, ":var_4", 2),
    (try_end),
    (val_add, ":var_3", ":var_5"),
    (assign, ":var_2", ":var_3"),
    (val_div, ":var_2", 2),
    (val_max, ":var_2", 1),
    (try_begin),
        (is_between, ":var_0", "trp_npc1", "trp_kingdom_1_lord"),
        (store_character_level, ":var_7", ":var_0"),
        (store_mul, ":var_3", ":var_7", 3),
        (val_add, ":var_3", 50),
        (store_mul, ":var_4", ":var_7", 2),
        (val_add, ":var_4", 20),
    (try_end),
    (try_begin),
        (neg|eq, ":var_0", "trp_player"),
        (neg|eq, ":var_0", "trp_kidnapped_girl"),
        (neg|is_between, ":var_0", "trp_kingdom_4_pretender", "trp_knight_1_1_wife"),
        (val_max, ":var_2", 1),
    (try_end),
    (assign, ":var_8", -1),
    (try_begin),
        (ge, ":var_1", 0),
        (try_begin),
            (this_or_next|party_slot_eq, ":var_1", slot_party_type, 3),
            (party_slot_eq, ":var_1", slot_party_type, 2),
            (party_get_slot, ":var_8", ":var_1", slot_town_lord),
        (else_try),
            (eq, ":var_1", "p_main_party"),
            (assign, ":var_8", "trp_player"),
        (else_try),
            (party_stack_get_troop_id, ":var_8", ":var_1", 0),
        (try_end),
    (try_end),
    (try_begin),
        (ge, ":var_8", 0),
        (store_skill_level, ":var_9", "skl_leadership", ":var_8"),
        (store_mul, ":var_10", 5, ":var_9"),
        (store_sub, ":var_11", 100, ":var_10"),
        (val_mul, ":var_2", ":var_11"),
        (val_div, ":var_2", 100),
    (try_end),
    (assign, reg0, ":var_2"),
    (set_trigger_result, reg0),

]),

("game_get_total_wage",
[
    (assign, ":var_0", 0),
    (party_get_num_companion_stacks, ":var_1", "p_main_party"),
    (try_for_range, ":var_2", 0, ":var_1"),
        (party_stack_get_troop_id, ":var_3", "p_main_party", ":var_2"),
        (party_stack_get_size, ":var_4", "p_main_party", ":var_2"),
        (call_script, "script_game_get_troop_wage", ":var_3", 0),
        (val_mul, reg0, ":var_4"),
        (val_add, ":var_0", reg0),
    (try_end),
    (assign, reg0, ":var_0"),
    (set_trigger_result, reg0),

]),

("game_get_join_cost",
[
    (store_script_param_1, ":var_0"),
    (assign, ":var_1", 0),
    (try_begin),
        (troop_is_hero, ":var_0"),
    (else_try),
        (store_character_level, ":var_2", ":var_0"),
        (assign, ":var_1", ":var_2"),
        (val_add, ":var_1", 5),
        (val_mul, ":var_1", ":var_1"),
        (val_add, ":var_1", 40),
        (val_div, ":var_1", 5),
        (try_begin),
            (troop_is_mounted, ":var_0"),
            (val_mul, ":var_1", 2),
        (try_end),
    (try_end),
    (try_begin),
        (eq, "$use_feudal_lance", 1),
        (this_or_next|gt, "$g_player_crusading", 0),
        (eq, "$use_feudal_lance", 1),
        (assign, ":var_3", 0),
        (try_for_range, ":var_4", "p_town_1_1", "p_salt_mine"),
            (party_slot_eq, ":var_4", slot_town_lord, "trp_player"),
            (assign, ":var_3", 1),
        (try_end),
        (eq, ":var_3", 0),
        (val_div, ":var_1", 3),
    (try_end),
    (assign, reg0, ":var_1"),
    (set_trigger_result, reg0),

]),

("game_get_upgrade_xp",
[
    (store_script_param_1, ":var_0"),
    (assign, ":var_1", 0),
    (store_character_level, ":var_2", ":var_0"),
    (store_add, ":var_1", ":var_2", 3),
    (get_level_boundary, reg0, ":var_1"),
    (val_mul, reg0, 6),
    (val_div, reg0, 1000),
    (val_add, reg0, 30),
    (try_begin),
        (ge, ":var_0", "trp_bandit"),
        (neg|ge, ":var_0", "trp_black_khergit_horseman"),
        (val_mul, reg0, 2),
    (try_end),
    (set_trigger_result, reg0),

]),

("game_get_upgrade_cost",
[
    (store_script_param_1, ":var_0"),
    (store_character_level, ":var_1", ":var_0"),
    (try_begin),
        (is_between, ":var_1", 0, 6),
        (assign, reg0, 10),
    (else_try),
        (is_between, ":var_1", 6, 11),
        (assign, reg0, 20),
    (else_try),
        (is_between, ":var_1", 11, 16),
        (assign, reg0, 40),
    (else_try),
        (is_between, ":var_1", 16, 21),
        (assign, reg0, 80),
    (else_try),
        (is_between, ":var_1", 21, 26),
        (assign, reg0, 120),
    (else_try),
        (is_between, ":var_1", 26, 31),
        (assign, reg0, 160),
    (else_try),
        (assign, reg0, 200),
    (try_end),
    (set_trigger_result, reg0),

]),

("game_get_prisoner_price",
[
    (store_script_param_1, ":var_0"),
    (try_begin),
        (is_between, "$g_talk_troop", "trp_ransom_broker_1", "trp_tavern_traveler_1"),
        (store_character_level, ":var_1", ":var_0"),
        (assign, ":var_2", ":var_1"),
        (val_add, ":var_2", 10),
        (val_mul, ":var_2", ":var_2"),
        (val_div, ":var_2", 6),
    (else_try),
        (assign, ":var_2", 50),
    (try_end),
    (assign, reg0, ":var_2"),
    (set_trigger_result, reg0),

]),

("game_check_prisoner_can_be_sold",
[
    (store_script_param_1, ":var_0"),
    (assign, reg0, 0),
    (try_begin),
        (neg|troop_is_hero, ":var_0"),
        (assign, reg0, 1),
    (try_end),
    (set_trigger_result, reg0),

]),

("game_get_morale_of_troops_from_faction",
[
    (store_script_param_1, ":var_0"),
    (store_troop_faction, ":var_1", ":var_0"),
    (try_begin),
        (ge, ":var_1", "fac_kingdom_1"),
        (neg|ge, ":var_1", "fac_kingdoms_end"),
        (faction_get_slot, reg0, ":var_1", slot_faction_morale_of_player_troops),
    (else_try),
        (assign, reg0, 0),
    (try_end),
    (val_div, reg0, 100),
    (party_get_morale, reg1, "p_main_party"),
    (val_add, reg0, reg1),
    (set_trigger_result, reg0),

]),

("game_event_detect_party",
[
    (store_script_param_1, ":var_0"),
    (try_begin),
        (party_slot_eq, ":var_0", slot_party_type, 13),
        (party_stack_get_troop_id, ":var_1", ":var_0", 0),
        (is_between, ":var_1", "trp_npc1", "trp_knight_1_1_wife"),
        (call_script, "script_update_troop_location_notes", ":var_1", 0),
    (else_try),
        (is_between, ":var_0", "p_town_1_1", "p_village_1_1"),
        (party_get_num_attached_parties, ":var_2", ":var_0"),
        (try_for_range, ":var_3", 0, ":var_2"),
            (party_get_attached_party_with_rank, ":var_4", ":var_0", ":var_3"),
            (party_stack_get_troop_id, ":var_1", ":var_4", 0),
            (is_between, ":var_1", "trp_npc1", "trp_knight_1_1_wife"),
            (call_script, "script_update_troop_location_notes", ":var_1", 0),
        (try_end),
    (try_end),

]),

("game_event_undetect_party",
[
    (store_script_param_1, ":var_0"),
    (try_begin),
        (party_slot_eq, ":var_0", slot_party_type, 13),
        (party_stack_get_troop_id, ":var_1", ":var_0", 0),
        (is_between, ":var_1", "trp_npc1", "trp_knight_1_1_wife"),
        (call_script, "script_update_troop_location_notes", ":var_1", 0),
    (try_end),

]),

("game_get_statistics_line",
[
    (store_script_param_1, ":var_0"),
    (try_begin),
        (eq, ":var_0", 0),
        (get_player_agent_kill_count, reg1),
        (str_store_string, s1, "str_number_of_troops_killed_reg1"),
        (set_result_string, 1),
    (else_try),
        (eq, ":var_0", 1),
        (get_player_agent_kill_count, reg1, 1),
        (str_store_string, s1, "str_number_of_troops_wounded_reg1"),
        (set_result_string, 1),
    (else_try),
        (eq, ":var_0", 2),
        (get_player_agent_own_troop_kill_count, reg1),
        (str_store_string, s1, "str_number_of_own_troops_killed_reg1"),
        (set_result_string, 1),
    (else_try),
        (eq, ":var_0", 3),
        (get_player_agent_own_troop_kill_count, reg1, 1),
        (str_store_string, s1, "str_number_of_own_troops_wounded_reg1"),
        (set_result_string, 1),
    (try_end),

]),

("game_get_date_text",
[
    (store_script_param_2, ":var_0"),
    (store_div, ":var_1", ":var_0", 24),
    (store_add, ":var_2", ":var_1", 23),
    (assign, ":var_3", 3),
    (assign, ":var_4", 1257),
    (assign, ":var_5", 99999),
    (try_for_range, ":var_6", 0, ":var_5"),
        (try_begin),
            (this_or_next|eq, ":var_3", 1),
            (this_or_next|eq, ":var_3", 3),
            (this_or_next|eq, ":var_3", 5),
            (this_or_next|eq, ":var_3", 7),
            (this_or_next|eq, ":var_3", 8),
            (this_or_next|eq, ":var_3", 10),
            (eq, ":var_3", 12),
            (assign, ":var_7", 31),
        (else_try),
            (this_or_next|eq, ":var_3", 4),
            (this_or_next|eq, ":var_3", 6),
            (this_or_next|eq, ":var_3", 9),
            (eq, ":var_3", 11),
            (assign, ":var_7", 30),
        (else_try),
            (try_begin),
                (store_div, ":var_8", ":var_4", 4),
                (val_mul, ":var_8", 4),
                (eq, ":var_8", ":var_4"),
                (assign, ":var_7", 29),
            (else_try),
                (assign, ":var_7", 28),
            (try_end),
        (try_end),
        (try_begin),
            (gt, ":var_2", ":var_7"),
            (val_sub, ":var_2", ":var_7"),
            (val_add, ":var_3", 1),
            (try_begin),
                (gt, ":var_3", 12),
                (val_sub, ":var_3", 12),
                (val_add, ":var_4", 1),
            (try_end),
        (else_try),
            (assign, ":var_5", 0),
        (try_end),
    (try_end),
    (assign, reg1, ":var_2"),
    (assign, reg2, ":var_4"),
    (try_begin),
        (eq, ":var_3", 1),
        (str_store_string, s1, "str_january_reg1_reg2"),
    (else_try),
        (eq, ":var_3", 2),
        (str_store_string, s1, "str_february_reg1_reg2"),
    (else_try),
        (eq, ":var_3", 3),
        (str_store_string, s1, "str_march_reg1_reg2"),
    (else_try),
        (eq, ":var_3", 4),
        (str_store_string, s1, "str_april_reg1_reg2"),
    (else_try),
        (eq, ":var_3", 5),
        (str_store_string, s1, "str_may_reg1_reg2"),
    (else_try),
        (eq, ":var_3", 6),
        (str_store_string, s1, "str_june_reg1_reg2"),
    (else_try),
        (eq, ":var_3", 7),
        (str_store_string, s1, "str_july_reg1_reg2"),
    (else_try),
        (eq, ":var_3", 8),
        (str_store_string, s1, "str_august_reg1_reg2"),
    (else_try),
        (eq, ":var_3", 9),
        (str_store_string, s1, "str_september_reg1_reg2"),
    (else_try),
        (eq, ":var_3", 10),
        (str_store_string, s1, "str_october_reg1_reg2"),
    (else_try),
        (eq, ":var_3", 11),
        (str_store_string, s1, "str_november_reg1_reg2"),
    (else_try),
        (eq, ":var_3", 12),
        (str_store_string, s1, "str_december_reg1_reg2"),
    (try_end),
    (set_result_string, 1),

]),

("game_get_money_text",
[
    (store_script_param_1, ":var_0"),
    (try_begin),
        (eq, ":var_0", 1),
        (str_store_string, s1, "str_1_denar"),
    (else_try),
        (assign, reg1, ":var_0"),
        (str_store_string, s1, "str_reg1_denars"),
    (try_end),
    (set_result_string, 1),

]),

("game_get_party_companion_limit",
[
    (assign, ":var_0", "trp_player"),
    (assign, ":var_1", 100),
    (store_skill_level, ":var_2", "skl_leadership", ":var_0"),
    (store_attribute_level, ":var_3", ":var_0", ca_charisma),
    (val_mul, ":var_2", 5),
    (val_add, ":var_1", ":var_2"),
    (val_add, ":var_1", ":var_3"),
    (troop_get_slot, ":var_4", ":var_0", slot_troop_renown),
    (store_div, ":var_5", ":var_4", 25),
    (val_add, ":var_1", ":var_5"),
    (assign, reg0, ":var_1"),
    (set_trigger_result, reg0),

]),

("game_reset_player_party_name",
[
    (str_store_troop_name, s5, "trp_player"),
    (party_set_name, "p_main_party", 5),

]),

("game_get_troop_note",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (set_trigger_result, 0),
    (str_store_troop_name, s54, ":var_0"),
    (try_begin),
        (eq, ":var_0", "trp_player"),
        (this_or_next|eq, "$player_has_homage", 1),
        (eq, "$players_kingdom", "fac_player_supporters_faction"),
        (assign, ":var_2", "$players_kingdom"),
    (else_try),
        (store_troop_faction, ":var_2", ":var_0"),
    (try_end),
    (str_clear, s49),
    (try_begin),
        (this_or_next|is_between, ":var_0", "trp_knight_1_1", "trp_heroes_end"),
        (eq, ":var_0", "trp_player"),
        (neg|is_between, ":var_0", "trp_kingdom_4_pretender", "trp_knight_1_1_wife"),
        (assign, ":var_3", 0),
        (try_begin),
            (call_script, "script_troop_get_family_relation_to_troop", "trp_player", ":var_0"),
            (gt, reg0, 0),
            (val_add, ":var_3", 1),
        (try_end),
        (try_for_range, ":var_4", "trp_knight_1_1", "trp_heroes_end"),
            (call_script, "script_troop_get_family_relation_to_troop", ":var_4", ":var_0"),
            (gt, reg0, 0),
            (val_add, ":var_3", 1),
        (try_end),
        (try_begin),
            (gt, ":var_3", 0),
            (try_begin),
                (eq, ":var_0", "trp_player"),
                (str_store_string, s49, "str__family_"),
            (else_try),
                (troop_get_slot, reg1, ":var_0", slot_troop_age),
                (str_store_string, s49, "str__age_reg1_family_"),
            (try_end),
            (try_begin),
                (call_script, "script_troop_get_family_relation_to_troop", "trp_player", ":var_0"),
                (gt, reg0, 0),
                (str_store_troop_name_link, s12, "trp_player"),
                (val_sub, ":var_3", 1),
                (try_begin),
                    (eq, ":var_3", 0),
                    (str_store_string, s49, "str_s49_s12_s11_end"),
                (else_try),
                    (str_store_string, s49, "str_s49_s12_s11"),
                (try_end),
            (try_end),
            (try_for_range, ":var_4", "trp_knight_1_1", "trp_heroes_end"),
                (call_script, "script_troop_get_family_relation_to_troop", ":var_4", ":var_0"),
                (gt, reg0, 0),
                (try_begin),
                    (neg|is_between, ":var_4", "trp_knight_1_1_wife", "trp_heroes_end"),
                    (eq, "$cheat_mode", 1),
                    (str_store_troop_name_link, s12, ":var_4"),
                    (call_script, "script_troop_get_relation_with_troop", ":var_4", ":var_0"),
                    (str_store_string, s49, "str_s49_s12_s11_rel_reg0"),
                (else_try),
                    (str_store_troop_name_link, s12, ":var_4"),
                    (val_sub, ":var_3", 1),
                    (try_begin),
                        (eq, ":var_3", 0),
                        (str_store_string, s49, "str_s49_s12_s11_end"),
                    (else_try),
                        (str_store_string, s49, "str_s49_s12_s11"),
                    (try_end),
                (try_end),
            (try_end),
        (try_end),
    (try_end),
    (try_begin),
        (neg|eq, ":var_0", "trp_player"),
        (neg|is_between, ":var_2", "fac_player_supporters_faction", "fac_kingdoms_end"),
        (neg|is_between, ":var_0", "trp_npc1", "trp_kingdom_1_lord"),
        (neg|is_between, ":var_0", "trp_kingdom_4_pretender", "trp_knight_1_1_wife"),
        (try_begin),
            (eq, ":var_1", 0),
            (str_store_string, s0, "str_s54_has_left_the_realm"),
            (set_trigger_result, 1),
        (else_try),
            (str_clear, s0),
            (this_or_next|eq, ":var_1", 1),
            (eq, ":var_1", 2),
            (set_trigger_result, 1),
        (try_end),
    (else_try),
        (is_between, ":var_0", "trp_npc1", "trp_kingdom_1_lord"),
        (neg|troop_slot_eq, ":var_0", slot_troop_occupation, 2),
        (eq, ":var_1", 0),
        (set_trigger_result, 1),
        (str_clear, s0),
        (assign, ":var_5", ":var_0"),
        (str_store_troop_name, s4, ":var_5"),
        (try_begin),
            (troop_get_slot, ":var_6", ":var_5", slot_troop_current_mission),
            (this_or_next|main_party_has_troop, ":var_5"),
            (this_or_next|troop_slot_ge, ":var_5", slot_troop_mission_object, 1),
            (eq, "$g_player_minister", ":var_5"),
            (try_begin),
                (troop_slot_eq, ":var_5", slot_troop_mission_object, 1),
                (str_store_string, s8, "str_gathering_support"),
                (try_begin),
                    (eq, ":var_6", 1),
                    (str_store_string, s5, "str_expected_back_imminently"),
                (else_try),
                    (assign, reg3, ":var_6"),
                    (str_store_string, s5, "str_expected_back_in_approximately_reg3_days"),
                (try_end),
            (else_try),
                (troop_slot_eq, ":var_5", slot_troop_mission_object, 2),
                (troop_get_slot, ":var_7", ":var_5", slot_troop_town_with_contacts),
                (str_store_party_name, s11, ":var_7"),
                (str_store_string, s8, "str_gathering_intelligence"),
                (try_begin),
                    (eq, ":var_6", 1),
                    (str_store_string, s5, "str_expected_back_imminently"),
                (else_try),
                    (assign, reg3, ":var_6"),
                    (str_store_string, s5, "str_expected_back_in_approximately_reg3_days"),
                (try_end),
            (else_try),
                (troop_slot_ge, ":var_5", slot_troop_mission_object, 3),
                (neg|troop_slot_ge, ":var_5", slot_troop_mission_object, 8),
                (troop_get_slot, ":var_8", ":var_5", slot_troop_recent_offense_time),
                (str_store_faction_name, s9, ":var_8"),
                (str_store_string, s8, "str_diplomatic_embassy_to_s9"),
                (try_begin),
                    (eq, ":var_6", 1),
                    (str_store_string, s5, "str_expected_back_imminently"),
                (else_try),
                    (assign, reg3, ":var_6"),
                    (str_store_string, s5, "str_expected_back_in_approximately_reg3_days"),
                (try_end),
            (else_try),
                (eq, ":var_5", "$g_player_minister"),
                (str_store_string, s8, "str_serving_as_minister"),
                (str_store_party_name, s9, "$g_player_court"),
                (is_between, "$g_player_court", "p_town_1_1", "p_salt_mine"),
                (str_store_string, s5, "str_in_your_court_at_s9"),
            (else_try),
                (eq, ":var_5", "$g_player_minister"),
                (str_store_string, s8, "str_serving_as_minister"),
                (str_store_string, s5, "str_awaiting_the_capture_of_a_fortress_which_can_serve_as_your_court"),
            (else_try),
                (main_party_has_troop, ":var_5"),
                (str_store_string, s8, "str_under_arms"),
                (str_store_string, s5, "str_in_your_party"),
            (try_end),
            (str_store_string, s0, "str_s4_s8_s5"),
        (else_try),
            (str_store_string, s0, "str_whereabouts_unknown"),
        (try_end),
    (else_try),
        (is_between, ":var_0", "trp_kingdom_4_pretender", "trp_knight_1_1_wife"),
        (neg|troop_slot_eq, ":var_0", slot_troop_occupation, 2),
        (neg|eq, ":var_0", "$supported_pretender"),
        (troop_get_slot, ":var_9", ":var_0", slot_troop_original_faction),
        (try_begin),
            (faction_slot_eq, ":var_9", slot_faction_state, 0),
            (faction_slot_eq, ":var_9", slot_faction_has_rebellion_chance, 1),
            (try_begin),
                (eq, ":var_1", 0),
                (str_store_faction_name_link, s56, ":var_9"),
                (str_store_string, s0, "@{s54} is a claimant to the throne of {s56}.", 0),
                (set_trigger_result, 1),
            (try_end),
        (else_try),
            (try_begin),
                (str_clear, s0),
                (this_or_next|eq, ":var_1", 0),
                (this_or_next|eq, ":var_1", 1),
                (eq, ":var_1", 2),
                (set_trigger_result, 1),
            (try_end),
        (try_end),
    (else_try),
        (try_begin),
            (eq, ":var_1", 0),
            (faction_get_slot, ":var_10", ":var_2", slot_faction_leader),
            (str_store_troop_name_link, s55, ":var_10"),
            (str_store_faction_name_link, s56, ":var_2"),
            (assign, ":var_11", 0),
            (assign, ":var_12", 0),
            (try_begin),
                (eq, ":var_2", "fac_player_faction"),
                (assign, ":var_11", 1),
            (else_try),
                (eq, ":var_10", ":var_0"),
                (assign, ":var_12", 1),
            (try_end),
            (assign, ":var_13", 0),
            (str_store_string, s58, "@nowhere"),
            (try_for_range_backwards, ":var_14", "p_town_1_1", "p_salt_mine"),
                (party_slot_eq, ":var_14", slot_town_lord, ":var_0"),
                (try_begin),
                    (eq, ":var_13", 0),
                    (str_store_party_name_link, s58, ":var_14"),
                (else_try),
                    (eq, ":var_13", 1),
                    (str_store_party_name_link, s57, ":var_14"),
                    (str_store_string, s58, "@{s57} and {s58}"),
                (else_try),
                    (str_store_party_name_link, s57, ":var_14"),
                    (str_store_string, s58, "@{!}{s57}, {s58}"),
                (try_end),
                (val_add, ":var_13", 1),
            (try_end),
            (troop_get_type, reg3, ":var_0"),
            (troop_get_slot, reg5, ":var_0", slot_troop_renown),
            (troop_get_slot, reg15, ":var_0", slot_troop_days_on_mission),
            (str_clear, s59),
            (try_begin),
                (call_script, "script_troop_get_player_relation", ":var_0"),
                (assign, ":var_15", reg0),
                (store_add, ":var_16", ":var_15", 100),
                (val_add, ":var_16", 5),
                (store_div, ":var_17", ":var_16", 10),
                (val_clamp, ":var_17", 0, 20),
                (store_add, ":var_18", "str_relation_mnus_100_ns", ":var_17"),
                (neg|eq, ":var_18", "str_relation_plus_0_ns"),
                (str_store_string, s60, "@{reg3?She:He}"),
                (str_store_string, s59, ":var_18"),
                (str_store_string, s59, "@{!}^{s59}"),
            (try_end),
            (assign, reg9, ":var_13"),
            (troop_get_type, reg3, ":var_0"),
            (troop_get_slot, reg5, ":var_0", slot_troop_renown),
            (assign, reg4, ":var_12"),
            (assign, reg6, ":var_11"),
            (troop_get_slot, reg17, ":var_0", slot_troop_wealth),
            (str_store_string, s0, "str_lord_info_string", 0),
            (add_troop_note_tableau_mesh, ":var_0", "tableau_troop_note_mesh"),
            (set_trigger_result, 1),
        (try_end),
    (try_end),

]),

("game_get_center_note",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (set_trigger_result, 0),
    (try_begin),
        (eq, ":var_1", 0),
        (party_get_slot, ":var_2", ":var_0", slot_town_lord),
        (try_begin),
            (ge, ":var_2", 0),
            (store_troop_faction, ":var_3", ":var_2"),
            (str_store_troop_name_link, s1, ":var_2"),
            (try_begin),
                (eq, ":var_2", "trp_player"),
                (gt, "$players_kingdom", 0),
                (str_store_faction_name_link, s2, "$players_kingdom"),
            (else_try),
                (str_store_faction_name_link, s2, ":var_3"),
            (try_end),
            (str_store_party_name, s50, ":var_0"),
            (try_begin),
                (party_slot_eq, ":var_0", slot_party_type, 3),
                (str_store_string, s51, "@The town of {s50}"),
            (else_try),
                (party_slot_eq, ":var_0", slot_party_type, 4),
                (party_get_slot, ":var_4", ":var_0", slot_village_bound_center),
                (str_store_party_name_link, s52, ":var_4"),
                (str_store_string, s51, "@The village of {s50} near {s52}"),
            (else_try),
                (str_store_string, s51, "@{!}{s50}"),
            (try_end),
            (str_store_string, s2, "@{s51} belongs to {s1} of {s2}.^"),
        (else_try),
            (str_clear, s2),
        (try_end),
        (try_begin),
            (is_between, ":var_0", "p_village_1_1", "p_salt_mine"),
        (else_try),
            (assign, ":var_5", 0),
            (try_for_range_backwards, ":var_6", "p_village_1_1", "p_salt_mine"),
                (party_slot_eq, ":var_6", slot_village_bound_center, ":var_0"),
                (try_begin),
                    (eq, ":var_5", 0),
                    (str_store_party_name_link, s8, ":var_6"),
                (else_try),
                    (eq, ":var_5", 1),
                    (str_store_party_name_link, s7, ":var_6"),
                    (str_store_string, s8, "@{s7} and {s8}"),
                (else_try),
                    (str_store_party_name_link, s7, ":var_6"),
                    (str_store_string, s8, "@{!}{s7}, {s8}"),
                (try_end),
                (val_add, ":var_5", 1),
            (try_end),
            (try_begin),
                (eq, ":var_5", 0),
                (str_store_string, s2, "@{s2}It has no villages.^"),
            (else_try),
                (store_sub, reg0, ":var_5", 1),
                (str_store_string, s2, "@{s2}{reg0?Its villages are:Its village is} {s8}.^"),
            (try_end),
        (try_end),
        (call_script, "script_get_prosperity_text_to_s50", ":var_0"),
        (str_store_string, s0, "@{s2}Its prosperity is: {s50}", 0),
        (set_trigger_result, 1),
    (try_end),

]),

("game_get_faction_note",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (set_trigger_result, 0),
    (try_begin),
        (is_between, ":var_0", "fac_player_supporters_faction", "fac_kingdoms_end"),
        (faction_slot_eq, ":var_0", slot_faction_state, 0),
        (try_begin),
            (eq, ":var_1", 0),
            (faction_get_slot, ":var_2", ":var_0", slot_faction_leader),
            (str_store_faction_name, s5, ":var_0"),
            (str_store_troop_name_link, s6, ":var_2"),
            (assign, ":var_3", 0),
            (str_store_string, s8, "@nowhere"),
            (try_for_range_backwards, ":var_4", "p_town_1_1", "p_salt_mine"),
                (store_faction_of_party, ":var_5", ":var_4"),
                (eq, ":var_5", ":var_0"),
                (try_begin),
                    (eq, ":var_3", 0),
                    (str_store_party_name_link, s8, ":var_4"),
                (else_try),
                    (eq, ":var_3", 1),
                    (str_store_party_name_link, s7, ":var_4"),
                    (str_store_string, s8, "@{s7} and {s8}"),
                (else_try),
                    (str_store_party_name_link, s7, ":var_4"),
                    (str_store_string, s8, "@{!}{s7}, {s8}"),
                (try_end),
                (val_add, ":var_3", 1),
            (try_end),
            (assign, ":var_6", 0),
            (str_store_string, s10, "@noone"),
            (try_for_range_backwards, ":var_7", "trp_kingdom_heroes_including_player_begin", "trp_knight_1_1_wife"),
                (assign, ":var_8", ":var_7"),
                (try_begin),
                    (eq, ":var_7", "trp_kingdom_heroes_including_player_begin"),
                    (assign, ":var_8", "trp_player"),
                    (assign, ":var_9", "$players_kingdom"),
                (else_try),
                    (store_troop_faction, ":var_9", ":var_8"),
                (try_end),
                (eq, ":var_9", ":var_0"),
                (neg|eq, ":var_8", ":var_2"),
                (troop_slot_eq, ":var_8", slot_troop_occupation, 2),
                (try_begin),
                    (eq, ":var_6", 0),
                    (str_store_troop_name_link, s10, ":var_8"),
                (else_try),
                    (eq, ":var_6", 1),
                    (str_store_troop_name_link, s9, ":var_8"),
                    (str_store_string, s10, "@{s9} and {s10}"),
                (else_try),
                    (str_store_troop_name_link, s9, ":var_8"),
                    (str_store_string, s10, "@{!}{s9}, {s10}"),
                (try_end),
                (val_add, ":var_6", 1),
            (try_end),
            (str_store_string, s12, "@noone"),
            (str_store_string, s21, "str_foreign_relations__"),
            (try_for_range, ":var_10", "fac_player_supporters_faction", "fac_kingdoms_end"),
                (faction_slot_eq, ":var_10", slot_faction_state, 0),
                (neg|eq, ":var_0", ":var_10"),
                (str_store_faction_name_link, s14, ":var_10"),
                (call_script, "script_diplomacy_faction_get_diplomatic_status_with_faction", ":var_0", ":var_10"),
                (assign, ":var_11", reg0),
                (assign, ":var_12", reg1),
                (call_script, "script_diplomacy_faction_get_diplomatic_status_with_faction", ":var_10", ":var_0"),
                (assign, ":var_13", reg0),
                (try_begin),
                    (eq, ":var_11", -2),
                    (str_store_string, s21, "str_s21__the_s5_is_at_war_with_the_s14"),
                    (store_add, ":var_14", ":var_10", 220),
                    (val_sub, ":var_14", "fac_player_supporters_faction"),
                    (faction_get_slot, ":var_15", ":var_0", ":var_14"),
                    (store_mul, ":var_16", ":var_15", 2),
                    (store_add, ":var_17", ":var_0", 220),
                    (val_sub, ":var_17", "fac_player_supporters_faction"),
                    (faction_get_slot, ":var_18", ":var_10", ":var_17"),
                    (store_mul, ":var_19", ":var_18", 2),
                    (assign, ":var_20", 0),
                    (assign, ":var_21", 0),
                    (try_for_range, ":var_22", 0, "$num_log_entries"),
                        (troop_get_slot, ":var_23", "trp_log_array_entry_type", ":var_22"),
                        (is_between, ":var_23", 91, 96),
                        (troop_get_slot, ":var_24", "trp_log_array_actor", ":var_22"),
                        (troop_get_slot, ":var_25", "trp_log_array_faction_object", ":var_22"),
                        (try_begin),
                            (eq, ":var_24", ":var_10"),
                            (eq, ":var_25", ":var_0"),
                            (assign, ":var_20", ":var_23"),
                            (assign, ":var_21", ":var_24"),
                        (else_try),
                            (eq, ":var_24", ":var_0"),
                            (eq, ":var_25", ":var_10"),
                            (assign, ":var_20", ":var_23"),
                            (assign, ":var_21", ":var_24"),
                        (try_end),
                    (try_end),
                    (str_store_string, s25, 8),
                    (try_begin),
                        (gt, ":var_20", 0),
                        (str_store_faction_name, s8, ":var_21"),
                        (try_begin),
                            (eq, ":var_20", 91),
                            (str_store_string, s21, "str_s21_the_s8_declared_war_out_of_personal_enmity"),
                        (else_try),
                            (eq, ":var_20", 95),
                            (str_store_string, s21, "str_s21_the_s8_declared_war_due_to_religious_differences"),
                        (else_try),
                            (eq, ":var_20", 94),
                            (str_store_string, s21, "str_s21_the_s8_declared_war_in_response_to_border_provocations"),
                        (else_try),
                            (eq, ":var_20", 93),
                            (str_store_string, s21, "str_s21_the_s8_declared_war_to_curb_the_other_realms_power"),
                        (else_try),
                            (eq, ":var_20", 92),
                            (str_store_string, s21, "str_s21_the_s8_declared_war_to_regain_lost_territory"),
                        (else_try),
                            (eq, ":var_20", 90),
                            (neg|eq, ":var_21", "fac_player_supporters_faction"),
                            (str_store_string, s21, "str_s21_the_s8_declared_war_as_part_of_a_bid_to_conquer_all_calradia"),
                        (try_end),
                    (try_end),
                    (str_store_string, s8, 25),
                    (try_begin),
                        (gt, ":var_15", ":var_19"),
                        (str_store_string, s21, "str_s21_the_s5_has_had_the_upper_hand_in_the_fighting"),
                    (else_try),
                        (gt, ":var_18", ":var_16"),
                        (str_store_string, s21, "str_s21_the_s5_has_gotten_the_worst_of_the_fighting"),
                    (else_try),
                        (gt, ":var_15", 100),
                        (gt, ":var_15", 100),
                        (str_store_string, s21, "str_s21_the_fighting_has_gone_on_for_some_time_and_the_war_may_end_soon_with_a_truce"),
                    (else_try),
                        (str_store_string, s21, "str_s21_the_fighting_has_begun_relatively_recently_and_the_war_may_continue_for_some_time"),
                    (try_end),
                    (try_begin),
                        (eq, "$cheat_mode", 1),
                        (assign, reg4, ":var_15"),
                        (assign, reg5, ":var_18"),
                        (str_store_string, s21, "str_s21_reg4reg5"),
                    (try_end),
                (else_try),
                    (eq, ":var_11", 1),
                    (str_clear, s18),
                    (try_begin),
                        (neg|eq, ":var_13", 1),
                        (str_store_string, s18, "str__however_the_truce_is_no_longer_binding_on_the_s14"),
                    (try_end),
                    (assign, reg1, ":var_12"),
                    (str_store_string, s21, "str_s21__the_s5_is_bound_by_truce_not_to_attack_the_s14s18_the_truce_will_expire_in_reg1_days"),
                (else_try),
                    (eq, ":var_11", -1),
                    (str_store_string, s21, "str_s21__the_s5_has_recently_suffered_provocation_by_subjects_of_the_s14_and_there_is_a_risk_of_war"),
                (else_try),
                    (eq, ":var_11", 0),
                    (str_store_string, s21, "str_s21__the_s5_has_no_outstanding_issues_with_the_s14"),
                (try_end),
                (try_begin),
                    (eq, ":var_13", -1),
                    (str_store_string, s21, "str_s21_the_s14_was_recently_provoked_by_subjects_of_the_s5_and_there_is_a_risk_of_war_"),
                (try_end),
                (try_begin),
                    (eq, "$cheat_mode", 1),
                    (call_script, "script_npc_decision_checklist_peace_or_war", ":var_0", ":var_10", -1),
                    (str_store_string, s21, "@{!}DEBUG : {s21}.^CHEAT MODE ASSESSMENT: {s14}^"),
                (try_end),
            (try_end),
            (call_script, "script_raf_religion_to_s11", ":var_0"),
            (str_store_string, s0, "str_the_s5_is_ruled_by_s6_it_occupies_s8_its_vassals_are_s10_its_religion_is_s11__s21", 0),
            (set_trigger_result, 1),
        (try_end),
    (else_try),
        (is_between, ":var_0", "fac_player_supporters_faction", "fac_kingdoms_end"),
        (faction_slot_eq, ":var_0", slot_faction_state, 1),
        (try_begin),
            (eq, ":var_1", 0),
            (str_store_faction_name, s5, ":var_0"),
            (str_store_string, s0, "@{s5} has been defeated!", 0),
            (set_trigger_result, 1),
        (else_try),
            (eq, ":var_1", 1),
            (str_clear, s0),
            (set_trigger_result, 1),
        (try_end),
    (else_try),
        (try_begin),
            (this_or_next|eq, ":var_1", 0),
            (eq, ":var_1", 1),
            (str_clear, s0),
            (set_trigger_result, 1),
        (try_end),
    (try_end),

]),

("game_get_quest_note",
[
    (set_trigger_result, 0),

]),

("game_get_info_page_note",
[
    (set_trigger_result, 0),

]),

("game_get_scene_name",
[
    (store_script_param, ":var_0", 1),
    (try_begin),
        (is_between, ":var_0", "scn_multi_scene_1", "scn_multiplayer_maps_end"),
        (store_sub, ":var_1", ":var_0", "scn_multi_scene_1"),
        (val_add, ":var_1", "str_multi_scene_1"),
        (str_store_string, s0, ":var_1"),
    (try_end),

]),

("game_get_mission_template_name",
[
    (store_script_param, ":var_0", 1),
    (call_script, "script_multiplayer_get_mission_template_game_type", ":var_0"),
    (assign, ":var_1", reg0),
    (try_begin),
        (is_between, ":var_1", 0, 8),
        (store_add, ":var_2", ":var_1", "str_multi_game_type_1"),
        (str_store_string, s0, ":var_2"),
    (try_end),

]),

("add_kill_death_counts",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (try_begin),
        (ge, ":var_0", 0),
        (agent_get_team, ":var_2", ":var_0"),
    (else_try),
        (assign, ":var_2", -1),
    (try_end),
    (try_begin),
        (ge, ":var_1", 0),
        (agent_get_team, ":var_3", ":var_1"),
    (else_try),
        (assign, ":var_3", -1),
    (try_end),
    (try_begin),
        (try_begin),
            (ge, ":var_0", 0),
            (ge, ":var_1", 0),
            (agent_is_human, ":var_0"),
            (agent_is_human, ":var_1"),
            (neg|eq, ":var_0", ":var_1"),
            (this_or_next|neg|eq, ":var_2", ":var_3"),
            (this_or_next|eq, "$g_multiplayer_game_type", 0),
            (eq, "$g_multiplayer_game_type", 7),
            (agent_get_player_id, ":var_4", ":var_0"),
            (try_begin),
                (agent_is_non_player, ":var_0"),
                (agent_get_team, ":var_2", ":var_0"),
                (team_get_bot_kill_count, ":var_5", ":var_2"),
                (val_add, ":var_5", 1),
                (team_set_bot_kill_count, ":var_2", ":var_5"),
            (else_try),
                (player_is_active, ":var_4"),
                (player_get_kill_count, ":var_6", ":var_4"),
                (val_add, ":var_6", 1),
                (player_set_kill_count, ":var_4", ":var_6"),
            (try_end),
        (try_end),
        (try_begin),
            (ge, ":var_1", 0),
            (agent_is_human, ":var_1"),
            (try_begin),
                (agent_is_non_player, ":var_1"),
                (agent_get_team, ":var_3", ":var_1"),
                (team_get_bot_death_count, ":var_7", ":var_3"),
                (val_add, ":var_7", 1),
                (team_set_bot_death_count, ":var_3", ":var_7"),
            (else_try),
                (agent_get_player_id, ":var_8", ":var_1"),
                (player_is_active, ":var_8"),
                (player_get_death_count, ":var_9", ":var_8"),
                (val_add, ":var_9", 1),
                (player_set_death_count, ":var_8", ":var_9"),
            (try_end),
            (try_begin),
                (assign, ":var_10", 0),
                (try_begin),
                    (this_or_next|neg|ge, ":var_0", 0),
                    (eq, ":var_0", ":var_1"),
                    (assign, ":var_10", 1),
                (try_end),
                (try_begin),
                    (eq, ":var_2", ":var_3"),
                    (neg|eq, "$g_multiplayer_game_type", 0),
                    (neg|eq, "$g_multiplayer_game_type", 7),
                    (assign, ":var_10", 1),
                (try_end),
                (eq, ":var_10", 1),
                (try_begin),
                    (ge, ":var_0", 0),
                    (assign, ":var_11", ":var_0"),
                (else_try),
                    (assign, ":var_11", ":var_1"),
                (try_end),
                (try_begin),
                    (ge, ":var_11", 0),
                    (neg|agent_is_non_player, ":var_11"),
                    (agent_get_player_id, ":var_12", ":var_11"),
                    (ge, ":var_12", 0),
                    (player_get_kill_count, ":var_13", ":var_12"),
                    (val_add, ":var_13", -1),
                    (player_set_kill_count, ":var_12", ":var_13"),
                (try_end),
            (try_end),
        (try_end),
    (try_end),

]),

("warn_player_about_auto_team_balance",
[
    (assign, "$g_multiplayer_message_type", 3),
    (start_presentation, "prsnt_multiplayer_message_2"),

]),

("check_team_balance",
[
    (try_begin),
        (multiplayer_is_server),
        (assign, ":var_0", 0),
        (assign, ":var_1", 0),
        (get_max_players, ":var_2"),
        (try_for_range, ":var_3", 0, ":var_2"),
            (player_is_active, ":var_3"),
            (player_get_team_no, ":var_4", ":var_3"),
            (try_begin),
                (eq, ":var_4", 0),
                (val_add, ":var_0", 1),
            (else_try),
                (eq, ":var_4", 1),
                (val_add, ":var_1", 1),
            (try_end),
        (try_end),
        (store_sub, ":var_5", ":var_0", ":var_1"),
        (assign, ":var_6", 0),
        (try_begin),
            (try_begin),
                (store_mul, ":var_7", "$g_multiplayer_auto_team_balance_limit", -1),
                (neg|gt, ":var_5", ":var_7"),
                (store_div, ":var_6", ":var_5", -2),
                (assign, ":var_8", 1),
                (assign, ":var_9", 0),
            (else_try),
                (ge, ":var_5", "$g_multiplayer_auto_team_balance_limit"),
                (store_div, ":var_6", ":var_5", 2),
                (assign, ":var_8", 0),
                (assign, ":var_9", 1),
            (try_end),
        (try_end),
        (try_begin),
            (gt, ":var_6", 0),
            (try_begin),
                (eq, "$g_team_balance_next_round", 1),
                (try_for_range, ":var_10", 0, ":var_6"),
                    (assign, ":var_11", 0),
                    (assign, ":var_12", -1),
                    (get_max_players, ":var_2"),
                    (try_for_range, ":var_13", 0, ":var_2"),
                        (player_is_active, ":var_13"),
                        (player_get_team_no, ":var_4", ":var_13"),
                        (eq, ":var_4", ":var_8"),
                        (player_get_slot, ":var_14", ":var_13", 21),
                        (try_begin),
                            (gt, ":var_14", ":var_11"),
                            (assign, ":var_11", ":var_14"),
                            (assign, ":var_12", ":var_13"),
                        (try_end),
                    (try_end),
                    (try_begin),
                        (ge, ":var_12", 0),
                        (try_begin),
                            (player_get_agent_id, ":var_15", ":var_12"),
                            (ge, ":var_15", 0),
                            (agent_is_alive, ":var_15"),
                            (player_get_kill_count, ":var_16", ":var_12"),
                            (val_add, ":var_16", 1),
                            (player_set_kill_count, ":var_12", ":var_16"),
                            (player_get_death_count, ":var_17", ":var_12"),
                            (val_sub, ":var_17", 1),
                            (player_set_death_count, ":var_12", ":var_17"),
                            (player_get_score, ":var_18", ":var_12"),
                            (val_add, ":var_18", 1),
                            (player_set_score, ":var_12", ":var_18"),
                            (try_for_range, ":var_13", 1, ":var_2"),
                                (player_is_active, ":var_13"),
                                (multiplayer_send_4_int_to_player, ":var_13", 86, ":var_12", ":var_18", ":var_16", ":var_17"),
                            (try_end),
                            (player_get_value_of_original_items, ":var_19", ":var_12"),
                            (player_get_gold, ":var_20", ":var_12"),
                            (val_add, ":var_20", ":var_19"),
                            (player_set_gold, ":var_12", ":var_20", 15000),
                        (try_end),
                        (player_set_troop_id, ":var_12", -1),
                        (player_set_team_no, ":var_12", ":var_9"),
                        (multiplayer_send_message_to_player, ":var_12", 79),
                    (try_end),
                (try_end),
                (call_script, "script_show_multiplayer_message", 2, 0),
                (get_max_players, ":var_2"),
                (try_for_range, ":var_13", 1, ":var_2"),
                    (player_is_active, ":var_13"),
                    (multiplayer_send_int_to_player, ":var_13", 68, 2),
                (try_end),
                (assign, "$g_team_balance_next_round", 0),
            (else_try),
                (assign, "$g_team_balance_next_round", 1),
                (call_script, "script_show_multiplayer_message", 3, 0),
                (get_max_players, ":var_2"),
                (try_for_range, ":var_13", 1, ":var_2"),
                    (player_is_active, ":var_13"),
                    (multiplayer_send_int_to_player, ":var_13", 68, 3),
                (try_end),
            (try_end),
        (else_try),
            (assign, "$g_team_balance_next_round", 0),
        (try_end),
    (try_end),

]),

("check_creating_ladder_dust_effect",
[
    (store_trigger_param_1, ":var_0"),
    (store_trigger_param_2, ":var_1"),
    (try_begin),
        (neg|ge, ":var_1", 15),
        (gt, ":var_1", 3),
        (scene_prop_get_slot, ":var_2", ":var_0", 2),
        (scene_prop_get_slot, ":var_3", ":var_0", 1),
        (try_begin),
            (eq, ":var_2", 0),
            (eq, ":var_3", 0),
            (prop_instance_get_position, pos0, ":var_0"),
            (assign, ":var_4", -1),
            (try_for_range, ":var_5", 100, 110),
                (entry_point_get_position, pos1, ":var_5"),
                (get_sq_distance_between_positions, ":var_6", pos0, pos1),
                (this_or_next|eq, ":var_4", -1),
                (neg|ge, ":var_6", ":var_4"),
                (assign, ":var_4", ":var_6"),
                (assign, ":var_7", ":var_5"),
            (try_end),
            (try_begin),
                (set_fixed_point_multiplier, 100),
                (ge, ":var_4", 0),
                (neg|ge, ":var_4", 22500),
                (entry_point_get_position, pos1, ":var_7"),
                (position_rotate_x, pos1, -90),
                (prop_instance_get_scene_prop_kind, ":var_8", ":var_0"),
                (try_begin),
                    (eq, ":var_8", "spr_siege_ladder_move_6m"),
                    (init_position, pos2),
                    (position_set_z, pos2, 300),
                    (position_transform_position_to_parent, pos3, pos1, pos2),
                    (particle_system_burst, "psys_ladder_dust_6m", pos3, 100),
                    (particle_system_burst, "psys_ladder_straw_6m", pos3, 100),
                (else_try),
                    (eq, ":var_8", "spr_siege_ladder_move_8m"),
                    (init_position, pos2),
                    (position_set_z, pos2, 400),
                    (position_transform_position_to_parent, pos3, pos1, pos2),
                    (particle_system_burst, "psys_ladder_dust_8m", pos3, 100),
                    (particle_system_burst, "psys_ladder_straw_8m", pos3, 100),
                (else_try),
                    (eq, ":var_8", "spr_siege_ladder_move_10m"),
                    (init_position, pos2),
                    (position_set_z, pos2, 500),
                    (position_transform_position_to_parent, pos3, pos1, pos2),
                    (particle_system_burst, "psys_ladder_dust_10m", pos3, 100),
                    (particle_system_burst, "psys_ladder_straw_10m", pos3, 100),
                (else_try),
                    (eq, ":var_8", "spr_siege_ladder_move_12m"),
                    (init_position, pos2),
                    (position_set_z, pos2, 600),
                    (position_transform_position_to_parent, pos3, pos1, pos2),
                    (particle_system_burst, "psys_ladder_dust_12m", pos3, 100),
                    (particle_system_burst, "psys_ladder_straw_12m", pos3, 100),
                (else_try),
                    (eq, ":var_8", "spr_siege_ladder_move_14m"),
                    (init_position, pos2),
                    (position_set_z, pos2, 700),
                    (position_transform_position_to_parent, pos3, pos1, pos2),
                    (particle_system_burst, "psys_ladder_dust_14m", pos3, 100),
                    (particle_system_burst, "psys_ladder_straw_14m", pos3, 100),
                (try_end),
                (scene_prop_set_slot, ":var_0", 2, 1),
            (try_end),
        (try_end),
    (try_end),

]),

("money_management_after_agent_death",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (assign, ":var_2", -1),
    (try_begin),
        (multiplayer_is_server),
        (ge, ":var_0", 0),
        (ge, ":var_1", 0),
        (agent_is_human, ":var_1"),
        (agent_is_human, ":var_0"),
        (agent_get_team, ":var_3", ":var_0"),
        (agent_get_team, ":var_4", ":var_1"),
        (this_or_next|eq, "$g_multiplayer_game_type", 0),
        (this_or_next|eq, "$g_multiplayer_game_type", 7),
        (neg|eq, ":var_3", ":var_4"),
        (neg|eq, ":var_1", ":var_0"),
        (try_begin),
            (neg|agent_is_non_player, ":var_1"),
            (agent_get_player_id, ":var_5", ":var_1"),
            (player_get_slot, ":var_6", ":var_5", 27),
        (else_try),
            (assign, ":var_6", 0),
        (try_end),
        (assign, ":var_7", 0),
        (get_max_players, ":var_8"),
        (try_for_range, ":var_9", 0, ":var_8"),
            (player_is_active, ":var_9"),
            (player_get_team_no, ":var_10", ":var_9"),
            (eq, ":var_10", ":var_4"),
            (val_add, ":var_7", 1),
        (try_end),
        (try_for_range, ":var_9", 0, ":var_8"),
            (player_is_active, ":var_9"),
            (try_begin),
                (this_or_next|eq, "$g_multiplayer_game_type", 2),
                (eq, "$g_multiplayer_game_type", 3),
                (assign, ":var_11", 1),
            (else_try),
                (assign, ":var_11", 0),
            (try_end),
            (this_or_next|eq, ":var_11", 0),
            (this_or_next|player_slot_eq, ":var_9", 0, 0),
            (player_slot_eq, ":var_9", 0, 1),
            (player_get_agent_id, ":var_12", ":var_9"),
            (try_begin),
                (eq, ":var_12", ":var_1"),
                (player_get_gold, ":var_13", ":var_9"),
                (assign, ":var_2", ":var_9"),
                (store_mul, ":var_14", ":var_6", 48),
                (val_div, ":var_14", 100),
                (val_mul, ":var_14", "$g_multiplayer_battle_earnings_multiplier"),
                (val_div, ":var_14", 100),
                (try_begin),
                    (this_or_next|eq, "$g_multiplayer_game_type", 0),
                    (this_or_next|eq, "$g_multiplayer_game_type", 7),
                    (this_or_next|eq, "$g_multiplayer_game_type", 1),
                    (this_or_next|eq, "$g_multiplayer_game_type", 4),
                    (eq, "$g_multiplayer_game_type", 5),
                    (val_mul, ":var_14", 4),
                    (val_div, ":var_14", 3),
                    (val_add, ":var_13", ":var_14"),
                (else_try),
                    (this_or_next|eq, "$g_multiplayer_game_type", 2),
                    (eq, "$g_multiplayer_game_type", 3),
                    (val_mul, ":var_14", 2),
                    (val_div, ":var_14", 3),
                    (val_add, ":var_13", ":var_14"),
                (else_try),
                    (val_add, ":var_13", ":var_14"),
                (try_end),
                (player_set_gold, ":var_9", ":var_13", 15000),
            (else_try),
                (eq, ":var_12", ":var_0"),
                (player_get_gold, ":var_13", ":var_9"),
                (assign, ":var_15", 150),
                (val_mul, ":var_15", "$g_multiplayer_battle_earnings_multiplier"),
                (val_div, ":var_15", 100),
                (try_begin),
                    (this_or_next|eq, "$g_multiplayer_game_type", 0),
                    (this_or_next|eq, "$g_multiplayer_game_type", 7),
                    (this_or_next|eq, "$g_multiplayer_game_type", 1),
                    (this_or_next|eq, "$g_multiplayer_game_type", 4),
                    (eq, "$g_multiplayer_game_type", 5),
                    (val_mul, ":var_15", 4),
                    (val_div, ":var_15", 3),
                    (val_add, ":var_13", ":var_15"),
                (else_try),
                    (this_or_next|eq, "$g_multiplayer_game_type", 2),
                    (eq, "$g_multiplayer_game_type", 3),
                    (val_mul, ":var_15", 2),
                    (val_div, ":var_15", 3),
                    (val_add, ":var_13", ":var_15"),
                (else_try),
                    (val_add, ":var_13", ":var_15"),
                (try_end),
                (store_mul, ":var_16", ":var_6", 12),
                (val_div, ":var_16", 100),
                (val_mul, ":var_16", "$g_multiplayer_battle_earnings_multiplier"),
                (val_div, ":var_16", 100),
                (try_begin),
                    (this_or_next|eq, "$g_multiplayer_game_type", 0),
                    (this_or_next|eq, "$g_multiplayer_game_type", 7),
                    (this_or_next|eq, "$g_multiplayer_game_type", 1),
                    (this_or_next|eq, "$g_multiplayer_game_type", 4),
                    (eq, "$g_multiplayer_game_type", 5),
                    (val_mul, ":var_16", 4),
                    (val_div, ":var_16", 3),
                    (val_add, ":var_13", ":var_16"),
                (else_try),
                    (this_or_next|eq, "$g_multiplayer_game_type", 2),
                    (eq, "$g_multiplayer_game_type", 3),
                    (val_mul, ":var_16", 2),
                    (val_div, ":var_16", 3),
                    (val_add, ":var_13", ":var_16"),
                (else_try),
                    (val_add, ":var_13", ":var_16"),
                (try_end),
                (player_set_gold, ":var_9", ":var_13", 15000),
            (try_end),
        (try_end),
    (try_end),
    (try_begin),
        (multiplayer_is_server),
        (neg|eq, "$g_multiplayer_game_type", 2),
        (neg|eq, "$g_multiplayer_game_type", 3),
        (ge, ":var_1", 0),
        (agent_is_human, ":var_1"),
        (agent_get_player_id, ":var_2", ":var_1"),
        (ge, ":var_2", 0),
        (player_get_gold, ":var_13", ":var_2"),
        (try_begin),
            (store_mul, ":var_17", "$g_multiplayer_initial_gold_multiplier", 10),
            (neg|ge, ":var_13", ":var_17"),
            (assign, ":var_13", ":var_17"),
        (try_end),
        (player_set_gold, ":var_2", ":var_13"),
    (try_end),

]),

("raf_count_kingdom_lords_and_ladies",
[
    (store_script_param, ":var_0", 1),
    (assign, ":var_1", 0),
    (assign, ":var_2", 0),
    (assign, reg3, 0),
    (assign, reg4, 0),
    (try_for_range, ":var_3", "trp_knight_1_1", "trp_kingdom_2_pretender"),
        (store_troop_faction, ":var_4", ":var_3"),
        (eq, ":var_4", ":var_0"),
        (try_begin),
            (eq, ":var_1", 0),
            (assign, reg3, ":var_3"),
        (try_end),
        (val_add, ":var_1", 1),
    (try_end),
    (try_for_range, ":var_3", "trp_knight_1_1_wife", "trp_heroes_end"),
        (store_troop_faction, ":var_4", ":var_3"),
        (eq, ":var_4", ":var_0"),
        (try_begin),
            (eq, ":var_2", 0),
            (assign, reg4, ":var_3"),
        (try_end),
        (val_add, ":var_2", 1),
    (try_end),
    (assign, reg0, ":var_1"),
    (assign, reg1, ":var_2"),

]),

("raf_initialize_aristocracy",
[
    (assign, ":var_0", "trp_kingdom_2_lady_1"),
    (try_for_range, ":var_1", "trp_kingdom_1_lord", "trp_knight_1_1"),
        (troop_set_slot, ":var_1", slot_troop_occupation, 2),
        (store_random_in_range, ":var_2", 50, 60),
        (troop_set_slot, ":var_1", slot_troop_age, ":var_2"),
    (try_end),
    (try_for_range, ":var_1", "trp_knight_1_1_wife", "trp_heroes_end"),
        (troop_set_slot, ":var_1", slot_troop_occupation, 6),
        (store_random_in_range, ":var_3", 20, 26),
        (try_begin),
            (eq, ":var_3", 20),
            (assign, ":var_3", 21),
        (try_end),
        (troop_set_slot, ":var_1", slot_lord_reputation_type, ":var_3"),
    (try_end),
    (try_for_range, ":var_1", "trp_knight_1_1", "trp_kingdom_2_pretender"),
        (troop_set_slot, ":var_1", slot_troop_occupation, 2),
        (store_random_in_range, ":var_3", 0, 8),
        (troop_set_slot, ":var_1", slot_lord_reputation_type, ":var_3"),
    (try_end),
    (try_for_range, ":var_1", "trp_kingdom_4_pretender", "trp_knight_1_1_wife"),
        (troop_set_slot, ":var_1", slot_troop_occupation, 9),
        (store_random_in_range, ":var_2", 25, 30),
        (troop_set_slot, ":var_1", slot_troop_age, ":var_2"),
    (try_end),
    (try_for_range, ":var_4", "fac_kingdom_1", "fac_kingdoms_end"),
        (call_script, "script_raf_count_kingdom_lords_and_ladies", ":var_4"),
        (assign, ":var_5", reg0),
        (assign, ":var_6", reg1),
        (assign, ":var_7", reg3),
        (assign, ":var_8", reg4),
        (gt, ":var_6", 0),
        (store_add, ":var_9", ":var_7", ":var_5"),
        (store_div, ":var_10", ":var_5", 5),
        (store_mul, ":var_11", ":var_10", 2),
        (store_mul, ":var_12", ":var_10", 2),
        (store_add, ":var_13", ":var_8", ":var_12"),
        (store_add, ":var_14", ":var_13", ":var_11"),
        (store_add, ":var_15", ":var_7", ":var_12"),
        (val_sub, ":var_15", 1),
        (store_sub, ":var_16", ":var_12", 2),
        (store_add, ":var_17", ":var_15", 1),
        (store_add, ":var_18", ":var_17", ":var_11"),
        (val_sub, ":var_18", 1),
        (store_add, ":var_19", ":var_18", 1),
        (assign, ":var_20", 0),
        (try_begin),
            (neg|eq, ":var_5", ":var_6"),
            (str_store_faction_name, s25, ":var_4"),
            (display_message, "@--DEBUG-- count of lords and ladies for {s25} is not equal"),
        (try_end),
        (assign, ":var_20", 0),
        (try_for_range, ":var_21", ":var_7", ":var_17"),
            (store_add, ":var_0", ":var_8", ":var_20"),
            (store_random_in_range, ":var_22", 0, ":var_16"),
            (store_add, ":var_23", ":var_9", 10000),
            (val_add, ":var_22", ":var_23"),
            (troop_set_slot, ":var_21", slot_troop_father, ":var_22"),
            (store_random_in_range, ":var_2", 45, 64),
            (call_script, "script_init_troop_age", ":var_21", ":var_2"),
            (store_random_in_range, ":var_3", 0, 8),
            (troop_set_slot, ":var_21", slot_lord_reputation_type, ":var_3"),
            (try_begin),
                (troop_set_slot, ":var_21", slot_troop_spouse, ":var_0"),
                (troop_set_slot, ":var_0", slot_troop_spouse, ":var_21"),
                (store_random_in_range, ":var_24", 20, 26),
                (try_begin),
                    (eq, ":var_24", 20),
                    (assign, ":var_24", 21),
                (try_end),
                (troop_set_slot, ":var_0", slot_lord_reputation_type, ":var_24"),
                (store_random_in_range, ":var_2", 35, 54),
                (call_script, "script_init_troop_age", ":var_0", ":var_2"),
                (call_script, "script_add_lady_items", ":var_0"),
            (try_end),
            (try_begin),
                (neg|ge, ":var_20", ":var_10"),
                (store_add, ":var_25", ":var_14", ":var_20"),
                (troop_set_slot, ":var_25", slot_troop_father, ":var_21"),
                (store_random_in_range, ":var_2", 16, 25),
                (call_script, "script_init_troop_age", ":var_25", ":var_2"),
                (troop_set_slot, ":var_25", slot_troop_mother, ":var_0"),
                (store_random_in_range, ":var_26", 21, 34),
                (try_begin),
                    (neg|gt, ":var_26", 25),
                    (troop_set_slot, ":var_0", slot_lord_reputation_type, ":var_26"),
                (else_try),
                    (eq, ":var_26", 26),
                    (troop_set_slot, ":var_0", slot_lord_reputation_type, 21),
                (else_try),
                    (eq, ":var_26", 27),
                    (troop_set_slot, ":var_0", slot_lord_reputation_type, 25),
                (else_try),
                    (assign, ":var_27", ":var_3"),
                    (try_begin),
                        (this_or_next|eq, ":var_27", 1),
                        (eq, ":var_27", 0),
                        (troop_set_slot, ":var_0", slot_lord_reputation_type, 21),
                    (else_try),
                        (eq, ":var_27", 2),
                        (troop_set_slot, ":var_0", slot_lord_reputation_type, 23),
                    (else_try),
                        (eq, ":var_27", 3),
                        (troop_set_slot, ":var_0", slot_lord_reputation_type, 24),
                    (else_try),
                        (eq, ":var_27", 4),
                        (troop_set_slot, ":var_0", slot_lord_reputation_type, 22),
                    (else_try),
                        (eq, ":var_27", 6),
                        (troop_set_slot, ":var_0", slot_lord_reputation_type, 22),
                    (else_try),
                        (eq, ":var_27", 5),
                        (troop_set_slot, ":var_0", slot_lord_reputation_type, 24),
                    (else_try),
                        (eq, ":var_27", 7),
                        (troop_set_slot, ":var_0", slot_lord_reputation_type, 25),
                    (try_end),
                (try_end),
                (call_script, "script_add_lady_items", ":var_25"),
            (try_end),
            (try_begin),
                (ge, ":var_20", ":var_10"),
                (assign, ":var_28", ":var_19"),
                (val_add, ":var_28", ":var_20"),
                (val_sub, ":var_28", ":var_10"),
                (try_begin),
                    (troop_set_slot, ":var_28", slot_troop_father, ":var_21"),
                    (troop_set_slot, ":var_28", slot_troop_mother, ":var_0"),
                (try_end),
                (store_random_in_range, ":var_2", 16, 25),
                (call_script, "script_init_troop_age", ":var_28", ":var_2"),
            (try_end),
            (val_add, ":var_20", 1),
        (try_end),
        (assign, ":var_20", 0),
        (try_for_range, ":var_21", ":var_17", ":var_19"),
            (store_random_in_range, ":var_2", 25, 36),
            (store_random_in_range, ":var_3", 0, 8),
            (troop_set_slot, ":var_21", slot_lord_reputation_type, ":var_3"),
            (call_script, "script_init_troop_age", ":var_21", ":var_2"),
            (try_begin),
                (store_add, ":var_29", ":var_13", ":var_20"),
                (store_random_in_range, ":var_30", 20, 26),
                (try_begin),
                    (eq, ":var_30", 20),
                    (assign, ":var_30", 21),
                (try_end),
                (troop_set_slot, ":var_29", slot_lord_reputation_type, ":var_30"),
                (troop_set_slot, ":var_29", slot_troop_guardian, ":var_21"),
                (call_script, "script_init_troop_age", ":var_29", 21),
                (call_script, "script_add_lady_items", ":var_29"),
            (try_end),
            (val_add, ":var_20", 1),
        (try_end),
    (try_end),

]),

("initialize_aristocracy",
[

]),

("initialize_trade_routes",
[
    (try_for_range, ":var_0", "p_town_1_1", "p_castle_1_1"),
        (store_random_in_range, ":var_1", 0, 6),
        (try_for_range, ":var_2", 0, ":var_1"),
            (store_random_in_range, ":var_3", "p_town_1_1", "p_castle_1_1"),
            (neg|eq, ":var_3", ":var_0"),
            (call_script, "script_set_trade_route_between_centers", ":var_0", ":var_3"),
        (try_end),
    (try_end),

]),

("initialize_faction_troop_types",
[
    (try_for_range, ":var_0", "fac_player_supporters_faction", "fac_kingdoms_end"),
        (faction_get_slot, ":var_1", ":var_0", slot_faction_culture),
        (faction_get_slot, ":var_2", ":var_1", slot_faction_quick_battle_tier_1_infantry),
        (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_1_infantry, ":var_2"),
        (faction_get_slot, ":var_2", ":var_1", slot_faction_quick_battle_tier_2_infantry),
        (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_2_infantry, ":var_2"),
        (faction_get_slot, ":var_2", ":var_1", slot_faction_quick_battle_tier_1_archer),
        (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_1_archer, ":var_2"),
        (faction_get_slot, ":var_2", ":var_1", slot_faction_quick_battle_tier_2_archer),
        (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_2_archer, ":var_2"),
        (faction_get_slot, ":var_2", ":var_1", slot_faction_quick_battle_tier_1_cavalry),
        (faction_set_slot, ":var_0", slot_faction_quick_battle_tier_1_cavalry, ":var_2"),
        (faction_get_slot, ":var_2", ":var_1", 100),
        (faction_set_slot, ":var_0", 100, ":var_2"),
        (faction_get_slot, ":var_2", ":var_1", 101),
        (faction_set_slot, ":var_0", 101, ":var_2"),
        (try_begin),
            (faction_slot_eq, ":var_0", slot_faction_culture, "fac_culture_teutonic"),
            (faction_set_slot, ":var_0", slot_faction_deserter_troop, "trp_teutonic_deserter"),
            (faction_set_slot, ":var_0", slot_faction_guard_troop, "trp_teu_horse_3"),
            (faction_set_slot, ":var_0", slot_faction_messenger_troop, "trp_teutonic_messenger"),
            (faction_set_slot, ":var_0", slot_faction_prison_guard_troop, "trp_teutonic_prison_guard"),
            (faction_set_slot, ":var_0", slot_faction_castle_guard_troop, "trp_teu_horse_3"),
            (faction_set_slot, ":var_0", slot_faction_reinforcements_a, "pt_kingdom_teutonic_reinforcements_a"),
            (faction_set_slot, ":var_0", slot_faction_reinforcements_b, "pt_kingdom_teutonic_reinforcements_b"),
            (faction_set_slot, ":var_0", slot_faction_reinforcements_c, "pt_kingdom_teutonic_reinforcements_c"),
            (faction_set_slot, ":var_0", 102, 0),
        (else_try),
            (faction_slot_eq, ":var_0", slot_faction_culture, "fac_culture_baltic"),
            (faction_set_slot, ":var_0", slot_faction_deserter_troop, "trp_lithuanian_deserter"),
            (faction_set_slot, ":var_0", slot_faction_guard_troop, "trp_balt_veteran_spearman"),
            (faction_set_slot, ":var_0", slot_faction_messenger_troop, "trp_lithuanian_messenger"),
            (faction_set_slot, ":var_0", slot_faction_prison_guard_troop, "trp_lithuanian_prison_guard"),
            (faction_set_slot, ":var_0", slot_faction_castle_guard_troop, "trp_lithuanian_castle_guard"),
            (faction_set_slot, ":var_0", slot_faction_reinforcements_a, "pt_kingdom_baltic_reinforcements_a"),
            (faction_set_slot, ":var_0", slot_faction_reinforcements_b, "pt_kingdom_baltic_reinforcements_b"),
            (faction_set_slot, ":var_0", slot_faction_reinforcements_c, "pt_kingdom_baltic_reinforcements_c"),
            (faction_set_slot, ":var_0", 102, 3),
        (else_try),
            (faction_slot_eq, ":var_0", slot_faction_culture, "fac_culture_mongol"),
            (faction_set_slot, ":var_0", slot_faction_deserter_troop, "trp_tatar_deserter"),
            (faction_set_slot, ":var_0", slot_faction_guard_troop, "trp_tatar_lancer"),
            (faction_set_slot, ":var_0", slot_faction_messenger_troop, "trp_tatar_messenger"),
            (faction_set_slot, ":var_0", slot_faction_prison_guard_troop, "trp_tatar_prison_guard"),
            (faction_set_slot, ":var_0", slot_faction_castle_guard_troop, "trp_tatar_castle_guard"),
            (faction_set_slot, ":var_0", slot_faction_reinforcements_a, "pt_kingdom_mongol_reinforcements_a"),
            (faction_set_slot, ":var_0", slot_faction_reinforcements_b, "pt_kingdom_mongol_reinforcements_b"),
            (faction_set_slot, ":var_0", slot_faction_reinforcements_c, "pt_kingdom_mongol_reinforcements_c"),
            (faction_set_slot, ":var_0", 102, 2),
        (else_try),
            (faction_slot_eq, ":var_0", slot_faction_culture, "fac_culture_nordic"),
            (faction_set_slot, ":var_0", slot_faction_deserter_troop, "trp_danish_deserter"),
            (faction_set_slot, ":var_0", slot_faction_guard_troop, "trp_nordic_swords_sergeant"),
            (faction_set_slot, ":var_0", slot_faction_messenger_troop, "trp_danish_messenger"),
            (faction_set_slot, ":var_0", slot_faction_prison_guard_troop, "trp_danish_prison_guard"),
            (faction_set_slot, ":var_0", slot_faction_castle_guard_troop, "trp_danish_castle_guard"),
            (faction_set_slot, ":var_0", slot_faction_reinforcements_a, "pt_kingdom_nordic_reinforcements_a"),
            (faction_set_slot, ":var_0", slot_faction_reinforcements_b, "pt_kingdom_nordic_reinforcements_b"),
            (faction_set_slot, ":var_0", slot_faction_reinforcements_c, "pt_kingdom_nordic_reinforcements_c"),
            (faction_set_slot, ":var_0", 102, 0),
        (else_try),
            (faction_slot_eq, ":var_0", slot_faction_culture, "fac_culture_western"),
            (faction_set_slot, ":var_0", slot_faction_deserter_troop, "trp_polish_deserter"),
            (faction_set_slot, ":var_0", slot_faction_guard_troop, "trp_euro_spearman_3"),
            (faction_set_slot, ":var_0", slot_faction_messenger_troop, "trp_polish_messenger"),
            (faction_set_slot, ":var_0", slot_faction_prison_guard_troop, "trp_polish_prison_guard"),
            (faction_set_slot, ":var_0", slot_faction_castle_guard_troop, "trp_polish_castle_guard"),
            (faction_set_slot, ":var_0", slot_faction_reinforcements_a, "pt_kingdom_western_reinforcements_a"),
            (faction_set_slot, ":var_0", slot_faction_reinforcements_b, "pt_kingdom_western_reinforcements_b"),
            (faction_set_slot, ":var_0", slot_faction_reinforcements_c, "pt_kingdom_western_reinforcements_c"),
            (faction_set_slot, ":var_0", 102, 0),
        (else_try),
            (faction_slot_eq, ":var_0", slot_faction_culture, "fac_culture_rus"),
            (faction_set_slot, ":var_0", slot_faction_deserter_troop, "trp_russian_deserter"),
            (faction_set_slot, ":var_0", slot_faction_guard_troop, "trp_rus_town_4_2"),
            (faction_set_slot, ":var_0", slot_faction_messenger_troop, "trp_russian_messenger"),
            (faction_set_slot, ":var_0", slot_faction_prison_guard_troop, "trp_russian_prison_guard"),
            (faction_set_slot, ":var_0", slot_faction_castle_guard_troop, "trp_russian_castle_guard"),
            (faction_set_slot, ":var_0", slot_faction_reinforcements_a, "pt_kingdom_rus_reinforcements_a"),
            (faction_set_slot, ":var_0", slot_faction_reinforcements_b, "pt_kingdom_rus_reinforcements_b"),
            (faction_set_slot, ":var_0", slot_faction_reinforcements_c, "pt_kingdom_rus_reinforcements_c"),
            (faction_set_slot, ":var_0", 102, 1),
        (else_try),
            (faction_slot_eq, ":var_0", slot_faction_culture, "fac_culture_scotish"),
            (faction_set_slot, ":var_0", slot_faction_deserter_troop, "trp_scottish_deserter"),
            (faction_set_slot, ":var_0", slot_faction_guard_troop, "trp_euro_spearman_3"),
            (faction_set_slot, ":var_0", slot_faction_messenger_troop, "trp_scottish_messenger"),
            (faction_set_slot, ":var_0", slot_faction_prison_guard_troop, "trp_scottish_prison_guard"),
            (faction_set_slot, ":var_0", slot_faction_castle_guard_troop, "trp_scottish_castle_guard"),
            (faction_set_slot, ":var_0", slot_faction_reinforcements_a, "pt_kingdom_scot_reinforcements_a"),
            (faction_set_slot, ":var_0", slot_faction_reinforcements_b, "pt_kingdom_scot_reinforcements_b"),
            (faction_set_slot, ":var_0", slot_faction_reinforcements_c, "pt_kingdom_scot_reinforcements_c"),
            (faction_set_slot, ":var_0", 102, 0),
        (else_try),
            (faction_slot_eq, ":var_0", slot_faction_culture, "fac_culture_gaelic"),
            (faction_set_slot, ":var_0", slot_faction_deserter_troop, "trp_irish_deserter"),
            (faction_set_slot, ":var_0", slot_faction_guard_troop, "trp_euro_spearman_3"),
            (faction_set_slot, ":var_0", slot_faction_messenger_troop, "trp_irish_messenger"),
            (faction_set_slot, ":var_0", slot_faction_prison_guard_troop, "trp_irish_prison_guard"),
            (faction_set_slot, ":var_0", slot_faction_castle_guard_troop, "trp_irish_castle_guard"),
            (faction_set_slot, ":var_0", slot_faction_reinforcements_a, "pt_kingdom_gaelic_reinforcements_a"),
            (faction_set_slot, ":var_0", slot_faction_reinforcements_b, "pt_kingdom_gaelic_reinforcements_b"),
            (faction_set_slot, ":var_0", slot_faction_reinforcements_c, "pt_kingdom_gaelic_reinforcements_c"),
            (faction_set_slot, ":var_0", 102, 0),
        (else_try),
            (faction_slot_eq, ":var_0", slot_faction_culture, "fac_culture_iberian"),
            (faction_set_slot, ":var_0", slot_faction_deserter_troop, "trp_irish_deserter"),
            (faction_set_slot, ":var_0", slot_faction_guard_troop, "trp_iberian_spears_sergeant"),
            (faction_set_slot, ":var_0", slot_faction_messenger_troop, "trp_irish_messenger"),
            (faction_set_slot, ":var_0", slot_faction_prison_guard_troop, "trp_irish_prison_guard"),
            (faction_set_slot, ":var_0", slot_faction_castle_guard_troop, "trp_iberian_spears_sergeant"),
            (faction_set_slot, ":var_0", slot_faction_reinforcements_a, "pt_kingdom_iberain_reinforcements_a"),
            (faction_set_slot, ":var_0", slot_faction_reinforcements_b, "pt_kingdom_iberain_reinforcements_b"),
            (faction_set_slot, ":var_0", slot_faction_reinforcements_c, "pt_kingdom_iberain_reinforcements_c"),
            (faction_set_slot, ":var_0", 102, 0),
        (else_try),
            (faction_slot_eq, ":var_0", slot_faction_culture, "fac_culture_italian"),
            (faction_set_slot, ":var_0", slot_faction_deserter_troop, "trp_irish_deserter"),
            (faction_set_slot, ":var_0", slot_faction_guard_troop, "trp_iberian_spears_sergeant"),
            (faction_set_slot, ":var_0", slot_faction_messenger_troop, "trp_irish_messenger"),
            (faction_set_slot, ":var_0", slot_faction_prison_guard_troop, "trp_irish_prison_guard"),
            (faction_set_slot, ":var_0", slot_faction_castle_guard_troop, "trp_iberian_spears_sergeant"),
            (faction_set_slot, ":var_0", slot_faction_reinforcements_a, "pt_kingdom_italian_reinforcements_a"),
            (faction_set_slot, ":var_0", slot_faction_reinforcements_b, "pt_kingdom_italian_reinforcements_b"),
            (faction_set_slot, ":var_0", slot_faction_reinforcements_c, "pt_kingdom_italian_reinforcements_c"),
            (faction_set_slot, ":var_0", 102, 0),
        (else_try),
            (faction_slot_eq, ":var_0", slot_faction_culture, "fac_culture_andalus"),
            (faction_set_slot, ":var_0", slot_faction_deserter_troop, "trp_sarranid_deserter"),
            (faction_set_slot, ":var_0", slot_faction_guard_troop, "trp_andalus_horse_4"),
            (faction_set_slot, ":var_0", slot_faction_messenger_troop, "trp_sarranid_messenger"),
            (faction_set_slot, ":var_0", slot_faction_prison_guard_troop, "trp_andalus_horse_3"),
            (faction_set_slot, ":var_0", slot_faction_castle_guard_troop, "trp_andalus_horse_4"),
            (faction_set_slot, ":var_0", slot_faction_reinforcements_a, "pt_kingdom_andalus_reinforcements_a"),
            (faction_set_slot, ":var_0", slot_faction_reinforcements_b, "pt_kingdom_andalus_reinforcements_b"),
            (faction_set_slot, ":var_0", slot_faction_reinforcements_c, "pt_kingdom_andalus_reinforcements_c"),
            (faction_set_slot, ":var_0", 102, 2),
        (else_try),
            (faction_slot_eq, ":var_0", slot_faction_culture, "fac_culture_byzantium"),
            (faction_set_slot, ":var_0", slot_faction_deserter_troop, "trp_russian_deserter"),
            (faction_set_slot, ":var_0", slot_faction_guard_troop, "trp_byz_castle_guard"),
            (faction_set_slot, ":var_0", slot_faction_messenger_troop, "trp_russian_messenger"),
            (faction_set_slot, ":var_0", slot_faction_prison_guard_troop, "trp_russian_prison_guard"),
            (faction_set_slot, ":var_0", slot_faction_castle_guard_troop, "trp_russian_castle_guard"),
            (faction_set_slot, ":var_0", slot_faction_reinforcements_a, "pt_kingdom_byzantium_reinforcements_a"),
            (faction_set_slot, ":var_0", slot_faction_reinforcements_b, "pt_kingdom_byzantium_reinforcements_b"),
            (faction_set_slot, ":var_0", slot_faction_reinforcements_c, "pt_kingdom_byzantium_reinforcements_c"),
            (faction_set_slot, ":var_0", 102, 1),
        (else_try),
            (faction_slot_eq, ":var_0", slot_faction_culture, "fac_culture_mamluke"),
            (faction_set_slot, ":var_0", slot_faction_deserter_troop, "trp_sarranid_deserter"),
            (faction_set_slot, ":var_0", slot_faction_guard_troop, "trp_mamluke_elite_horse_archer"),
            (faction_set_slot, ":var_0", slot_faction_messenger_troop, "trp_sarranid_messenger"),
            (faction_set_slot, ":var_0", slot_faction_prison_guard_troop, "trp_sarranid_prison_guard"),
            (faction_set_slot, ":var_0", slot_faction_castle_guard_troop, "trp_mamluke_elite_horse_archer"),
            (faction_set_slot, ":var_0", slot_faction_reinforcements_a, "pt_kingdom_mamluke_reinforcements_a"),
            (faction_set_slot, ":var_0", slot_faction_reinforcements_b, "pt_kingdom_mamluke_reinforcements_b"),
            (faction_set_slot, ":var_0", slot_faction_reinforcements_c, "pt_kingdom_mamluke_reinforcements_c"),
            (faction_set_slot, ":var_0", 102, 2),
        (else_try),
            (faction_slot_eq, ":var_0", slot_faction_culture, "fac_culture_serbian"),
            (faction_set_slot, ":var_0", slot_faction_deserter_troop, "trp_russian_deserter"),
            (faction_set_slot, ":var_0", slot_faction_guard_troop, "trp_balkan_vil_4_1_1"),
            (faction_set_slot, ":var_0", slot_faction_messenger_troop, "trp_russian_messenger"),
            (faction_set_slot, ":var_0", slot_faction_prison_guard_troop, "trp_russian_prison_guard"),
            (faction_set_slot, ":var_0", slot_faction_castle_guard_troop, "trp_balkan_vil_4_1_1"),
            (faction_set_slot, ":var_0", slot_faction_reinforcements_a, "pt_kingdom_serbian_reinforcements_a"),
            (faction_set_slot, ":var_0", slot_faction_reinforcements_b, "pt_kingdom_serbian_reinforcements_b"),
            (faction_set_slot, ":var_0", slot_faction_reinforcements_c, "pt_kingdom_serbian_reinforcements_c"),
            (faction_set_slot, ":var_0", 102, 1),
        (else_try),
            (faction_slot_eq, ":var_0", slot_faction_culture, "fac_culture_balkan"),
            (faction_set_slot, ":var_0", slot_faction_deserter_troop, "trp_russian_deserter"),
            (faction_set_slot, ":var_0", slot_faction_guard_troop, "trp_balkan_vil_4_1_1"),
            (faction_set_slot, ":var_0", slot_faction_messenger_troop, "trp_russian_messenger"),
            (faction_set_slot, ":var_0", slot_faction_prison_guard_troop, "trp_russian_prison_guard"),
            (faction_set_slot, ":var_0", slot_faction_castle_guard_troop, "trp_balkan_vil_4_1_1"),
            (faction_set_slot, ":var_0", slot_faction_reinforcements_a, "pt_kingdom_balkan_reinforcements_a"),
            (faction_set_slot, ":var_0", slot_faction_reinforcements_b, "pt_kingdom_balkan_reinforcements_b"),
            (faction_set_slot, ":var_0", slot_faction_reinforcements_c, "pt_kingdom_balkan_reinforcements_c"),
            (faction_set_slot, ":var_0", 102, 1),
        (else_try),
            (faction_slot_eq, ":var_0", slot_faction_culture, "fac_culture_marinid"),
            (faction_set_slot, ":var_0", slot_faction_deserter_troop, "trp_sarranid_deserter"),
            (faction_set_slot, ":var_0", slot_faction_guard_troop, "trp_marinid_swordsman"),
            (faction_set_slot, ":var_0", slot_faction_messenger_troop, "trp_sarranid_messenger"),
            (faction_set_slot, ":var_0", slot_faction_prison_guard_troop, "trp_sarranid_prison_guard"),
            (faction_set_slot, ":var_0", slot_faction_castle_guard_troop, "trp_marinid_swordsman"),
            (faction_set_slot, ":var_0", slot_faction_reinforcements_a, "pt_kingdom_marinid_reinforcements_a"),
            (faction_set_slot, ":var_0", slot_faction_reinforcements_b, "pt_kingdom_marinid_reinforcements_b"),
            (faction_set_slot, ":var_0", slot_faction_reinforcements_c, "pt_kingdom_marinid_reinforcements_c"),
            (faction_set_slot, ":var_0", 102, 2),
        (else_try),
            (faction_slot_eq, ":var_0", slot_faction_culture, "fac_culture_welsh"),
            (faction_set_slot, ":var_0", slot_faction_deserter_troop, "trp_english_deserter"),
            (faction_set_slot, ":var_0", slot_faction_guard_troop, "trp_euro_spearman_3"),
            (faction_set_slot, ":var_0", slot_faction_messenger_troop, "trp_english_messenger"),
            (faction_set_slot, ":var_0", slot_faction_prison_guard_troop, "trp_english_prison_guard"),
            (faction_set_slot, ":var_0", slot_faction_castle_guard_troop, "trp_english_castle_guard"),
            (faction_set_slot, ":var_0", slot_faction_reinforcements_a, "pt_kingdom_welsh_reinforcements_a"),
            (faction_set_slot, ":var_0", slot_faction_reinforcements_b, "pt_kingdom_welsh_reinforcements_b"),
            (faction_set_slot, ":var_0", slot_faction_reinforcements_c, "pt_kingdom_welsh_reinforcements_c"),
        (try_end),
    (try_end),

]),

("initialize_item_info",
[
    (item_set_slot, "itm_bread", slot_item_food_bonus, 8),
    (item_set_slot, "itm_grain", slot_item_food_bonus, 2),
    (item_set_slot, "itm_smoked_fish", slot_item_food_bonus, 4),
    (item_set_slot, "itm_dried_meat", slot_item_food_bonus, 5),
    (item_set_slot, "itm_cheese", slot_item_food_bonus, 5),
    (item_set_slot, "itm_sausages", slot_item_food_bonus, 5),
    (item_set_slot, "itm_butter", slot_item_food_bonus, 4),
    (item_set_slot, "itm_chicken", slot_item_food_bonus, 8),
    (item_set_slot, "itm_cattle_meat", slot_item_food_bonus, 7),
    (item_set_slot, "itm_pork", slot_item_food_bonus, 6),
    (item_set_slot, "itm_raw_olives", slot_item_food_bonus, 1),
    (item_set_slot, "itm_cabbages", slot_item_food_bonus, 2),
    (item_set_slot, "itm_raw_grapes", slot_item_food_bonus, 3),
    (item_set_slot, "itm_apples", slot_item_food_bonus, 4),
    (item_set_slot, "itm_raw_date_fruit", slot_item_food_bonus, 4),
    (item_set_slot, "itm_honey", slot_item_food_bonus, 6),
    (item_set_slot, "itm_wine", slot_item_food_bonus, 5),
    (item_set_slot, "itm_ale", slot_item_food_bonus, 4),
    (item_set_slot, "itm_grain", slot_item_urban_demand, 20),
    (item_set_slot, "itm_grain", slot_item_rural_demand, 20),
    (item_set_slot, "itm_grain", slot_item_desert_demand, 20),
    (item_set_slot, "itm_grain", slot_item_production_slot, 209),
    (item_set_slot, "itm_grain", slot_item_production_string, "str_acres_grain"),
    (item_set_slot, "itm_grain", slot_item_base_price, 30),
    (item_set_slot, "itm_bread", slot_item_urban_demand, 30),
    (item_set_slot, "itm_bread", slot_item_rural_demand, 30),
    (item_set_slot, "itm_bread", slot_item_desert_demand, 30),
    (item_set_slot, "itm_bread", slot_item_production_slot, 221),
    (item_set_slot, "itm_bread", slot_item_production_string, "str_mills"),
    (item_set_slot, "itm_bread", slot_item_primary_raw_material, "itm_grain"),
    (item_set_slot, "itm_bread", slot_item_input_number, 6),
    (item_set_slot, "itm_bread", slot_item_output_per_run, 6),
    (item_set_slot, "itm_bread", slot_item_overhead_per_run, 30),
    (item_set_slot, "itm_bread", slot_item_base_price, 50),
    (item_set_slot, "itm_bread", slot_item_enterprise_building_cost, 1500),
    (item_set_slot, "itm_ale", slot_item_urban_demand, 10),
    (item_set_slot, "itm_ale", slot_item_rural_demand, 15),
    (item_set_slot, "itm_ale", slot_item_desert_demand, 0),
    (item_set_slot, "itm_ale", slot_item_production_slot, 222),
    (item_set_slot, "itm_ale", slot_item_production_string, "str_breweries"),
    (item_set_slot, "itm_ale", slot_item_base_price, 120),
    (item_set_slot, "itm_ale", slot_item_primary_raw_material, "itm_grain"),
    (item_set_slot, "itm_ale", slot_item_input_number, 1),
    (item_set_slot, "itm_ale", slot_item_output_per_run, 2),
    (item_set_slot, "itm_ale", slot_item_overhead_per_run, 50),
    (item_set_slot, "itm_ale", slot_item_base_price, 120),
    (item_set_slot, "itm_ale", slot_item_enterprise_building_cost, 2500),
    (item_set_slot, "itm_wine", slot_item_urban_demand, 15),
    (item_set_slot, "itm_wine", slot_item_rural_demand, 10),
    (item_set_slot, "itm_wine", slot_item_desert_demand, 25),
    (item_set_slot, "itm_wine", slot_item_production_slot, 223),
    (item_set_slot, "itm_wine", slot_item_production_string, "str_presses"),
    (item_set_slot, "itm_wine", slot_item_primary_raw_material, "itm_raw_grapes"),
    (item_set_slot, "itm_wine", slot_item_input_number, 4),
    (item_set_slot, "itm_wine", slot_item_output_per_run, 2),
    (item_set_slot, "itm_wine", slot_item_overhead_per_run, 60),
    (item_set_slot, "itm_wine", slot_item_base_price, 220),
    (item_set_slot, "itm_wine", slot_item_enterprise_building_cost, 5000),
    (item_set_slot, "itm_raw_grapes", slot_item_urban_demand, 0),
    (item_set_slot, "itm_raw_grapes", slot_item_rural_demand, 0),
    (item_set_slot, "itm_raw_grapes", slot_item_desert_demand, 0),
    (item_set_slot, "itm_raw_grapes", slot_item_production_slot, 211),
    (item_set_slot, "itm_raw_grapes", slot_item_production_string, "str_acres_orchard"),
    (item_set_slot, "itm_raw_grapes", slot_item_is_raw_material_only_for, "itm_wine"),
    (item_set_slot, "itm_raw_grapes", slot_item_base_price, 75),
    (item_set_slot, "itm_apples", slot_item_urban_demand, 4),
    (item_set_slot, "itm_apples", slot_item_rural_demand, 4),
    (item_set_slot, "itm_apples", slot_item_desert_demand, 0),
    (item_set_slot, "itm_apples", slot_item_production_slot, 211),
    (item_set_slot, "itm_apples", slot_item_production_string, "str_acres_orchard"),
    (item_set_slot, "itm_apples", slot_item_base_price, 44),
    (item_set_slot, "itm_smoked_fish", slot_item_urban_demand, 16),
    (item_set_slot, "itm_smoked_fish", slot_item_rural_demand, 16),
    (item_set_slot, "itm_smoked_fish", slot_item_desert_demand, 16),
    (item_set_slot, "itm_smoked_fish", slot_item_production_slot, 214),
    (item_set_slot, "itm_smoked_fish", slot_item_production_string, "str_boats"),
    (item_set_slot, "itm_salt", slot_item_urban_demand, 5),
    (item_set_slot, "itm_salt", slot_item_rural_demand, 3),
    (item_set_slot, "itm_salt", slot_item_desert_demand, -1),
    (item_set_slot, "itm_salt", slot_item_production_slot, 215),
    (item_set_slot, "itm_salt", slot_item_production_string, "str_pans"),
    (item_set_slot, "itm_dried_meat", slot_item_urban_demand, 20),
    (item_set_slot, "itm_dried_meat", slot_item_rural_demand, 5),
    (item_set_slot, "itm_dried_meat", slot_item_desert_demand, -1),
    (item_set_slot, "itm_dried_meat", slot_item_production_slot, 205),
    (item_set_slot, "itm_dried_meat", slot_item_production_string, "str_head_cattle"),
    (item_set_slot, "itm_cattle_meat", slot_item_urban_demand, 12),
    (item_set_slot, "itm_cattle_meat", slot_item_rural_demand, 3),
    (item_set_slot, "itm_cattle_meat", slot_item_desert_demand, -1),
    (item_set_slot, "itm_cattle_meat", slot_item_production_slot, 205),
    (item_set_slot, "itm_cattle_meat", slot_item_production_string, "str_head_cattle"),
    (item_set_slot, "itm_cheese", slot_item_urban_demand, 10),
    (item_set_slot, "itm_cheese", slot_item_rural_demand, 10),
    (item_set_slot, "itm_cheese", slot_item_desert_demand, 10),
    (item_set_slot, "itm_cheese", slot_item_production_slot, 205),
    (item_set_slot, "itm_cheese", slot_item_production_string, "str_head_cattle"),
    (item_set_slot, "itm_butter", slot_item_urban_demand, 2),
    (item_set_slot, "itm_butter", slot_item_rural_demand, 2),
    (item_set_slot, "itm_butter", slot_item_desert_demand, 2),
    (item_set_slot, "itm_butter", slot_item_production_slot, 205),
    (item_set_slot, "itm_butter", slot_item_production_string, "str_head_cattle"),
    (item_set_slot, "itm_leatherwork", slot_item_urban_demand, 10),
    (item_set_slot, "itm_leatherwork", slot_item_rural_demand, 10),
    (item_set_slot, "itm_leatherwork", slot_item_desert_demand, 10),
    (item_set_slot, "itm_leatherwork", slot_item_production_slot, 230),
    (item_set_slot, "itm_leatherwork", slot_item_production_string, "str_tanneries"),
    (item_set_slot, "itm_leatherwork", slot_item_primary_raw_material, "itm_raw_leather"),
    (item_set_slot, "itm_leatherwork", slot_item_input_number, 3),
    (item_set_slot, "itm_leatherwork", slot_item_output_per_run, 3),
    (item_set_slot, "itm_leatherwork", slot_item_overhead_per_run, 50),
    (item_set_slot, "itm_leatherwork", slot_item_base_price, 220),
    (item_set_slot, "itm_leatherwork", slot_item_enterprise_building_cost, 8000),
    (item_set_slot, "itm_raw_leather", slot_item_urban_demand, 0),
    (item_set_slot, "itm_raw_leather", slot_item_rural_demand, 0),
    (item_set_slot, "itm_raw_leather", slot_item_desert_demand, 0),
    (item_set_slot, "itm_raw_leather", slot_item_production_slot, 205),
    (item_set_slot, "itm_raw_leather", slot_item_production_string, "str_head_cattle"),
    (item_set_slot, "itm_raw_leather", slot_item_is_raw_material_only_for, "itm_leatherwork"),
    (item_set_slot, "itm_raw_leather", slot_item_base_price, 120),
    (item_set_slot, "itm_sausages", slot_item_urban_demand, 12),
    (item_set_slot, "itm_sausages", slot_item_rural_demand, 3),
    (item_set_slot, "itm_sausages", slot_item_desert_demand, -1),
    (item_set_slot, "itm_sausages", slot_item_production_slot, 206),
    (item_set_slot, "itm_sausages", slot_item_production_string, "str_head_sheep"),
    (item_set_slot, "itm_wool", slot_item_urban_demand, 0),
    (item_set_slot, "itm_wool", slot_item_rural_demand, 0),
    (item_set_slot, "itm_wool", slot_item_desert_demand, 0),
    (item_set_slot, "itm_wool", slot_item_production_slot, 206),
    (item_set_slot, "itm_wool", slot_item_production_string, "str_head_sheep"),
    (item_set_slot, "itm_wool", slot_item_is_raw_material_only_for, "itm_wool_cloth"),
    (item_set_slot, "itm_wool", slot_item_base_price, 130),
    (item_set_slot, "itm_wool_cloth", slot_item_urban_demand, 15),
    (item_set_slot, "itm_wool_cloth", slot_item_rural_demand, 20),
    (item_set_slot, "itm_wool_cloth", slot_item_desert_demand, 5),
    (item_set_slot, "itm_wool_cloth", slot_item_production_slot, 227),
    (item_set_slot, "itm_wool_cloth", slot_item_production_string, "str_looms"),
    (item_set_slot, "itm_wool_cloth", slot_item_primary_raw_material, "itm_wool"),
    (item_set_slot, "itm_wool_cloth", slot_item_input_number, 2),
    (item_set_slot, "itm_wool_cloth", slot_item_output_per_run, 2),
    (item_set_slot, "itm_wool_cloth", slot_item_overhead_per_run, 120),
    (item_set_slot, "itm_wool_cloth", slot_item_base_price, 250),
    (item_set_slot, "itm_wool_cloth", slot_item_enterprise_building_cost, 6000),
    (item_set_slot, "itm_raw_flax", slot_item_urban_demand, 0),
    (item_set_slot, "itm_raw_flax", slot_item_rural_demand, 0),
    (item_set_slot, "itm_raw_flax", slot_item_desert_demand, 0),
    (item_set_slot, "itm_raw_flax", slot_item_production_slot, 212),
    (item_set_slot, "itm_raw_flax", slot_item_production_string, "str_acres_flax"),
    (item_set_slot, "itm_raw_flax", slot_item_is_raw_material_only_for, "itm_linen"),
    (item_set_slot, "itm_raw_flax", slot_item_base_price, 150),
    (item_set_slot, "itm_linen", slot_item_urban_demand, 7),
    (item_set_slot, "itm_linen", slot_item_rural_demand, 3),
    (item_set_slot, "itm_linen", slot_item_desert_demand, 15),
    (item_set_slot, "itm_linen", slot_item_production_slot, 225),
    (item_set_slot, "itm_linen", slot_item_production_string, "str_looms"),
    (item_set_slot, "itm_linen", slot_item_primary_raw_material, "itm_raw_flax"),
    (item_set_slot, "itm_linen", slot_item_input_number, 2),
    (item_set_slot, "itm_linen", slot_item_output_per_run, 2),
    (item_set_slot, "itm_linen", slot_item_overhead_per_run, 120),
    (item_set_slot, "itm_linen", slot_item_base_price, 250),
    (item_set_slot, "itm_linen", slot_item_enterprise_building_cost, 6000),
    (item_set_slot, "itm_iron", slot_item_urban_demand, 0),
    (item_set_slot, "itm_iron", slot_item_rural_demand, 0),
    (item_set_slot, "itm_iron", slot_item_desert_demand, 0),
    (item_set_slot, "itm_iron", slot_item_production_slot, 219),
    (item_set_slot, "itm_iron", slot_item_production_string, "str_deposits"),
    (item_set_slot, "itm_iron", slot_item_is_raw_material_only_for, "itm_tools"),
    (item_set_slot, "itm_iron", slot_item_base_price, 264),
    (item_set_slot, "itm_tools", slot_item_urban_demand, 7),
    (item_set_slot, "itm_tools", slot_item_rural_demand, 7),
    (item_set_slot, "itm_tools", slot_item_desert_demand, 7),
    (item_set_slot, "itm_tools", slot_item_production_slot, 229),
    (item_set_slot, "itm_tools", slot_item_production_string, "str_smithies"),
    (item_set_slot, "itm_tools", slot_item_primary_raw_material, "itm_iron"),
    (item_set_slot, "itm_tools", slot_item_input_number, 2),
    (item_set_slot, "itm_tools", slot_item_output_per_run, 2),
    (item_set_slot, "itm_tools", slot_item_overhead_per_run, 60),
    (item_set_slot, "itm_tools", slot_item_base_price, 410),
    (item_set_slot, "itm_tools", slot_item_enterprise_building_cost, 3500),
    (item_set_slot, "itm_pottery", slot_item_urban_demand, 15),
    (item_set_slot, "itm_pottery", slot_item_rural_demand, 5),
    (item_set_slot, "itm_pottery", slot_item_desert_demand, -1),
    (item_set_slot, "itm_pottery", slot_item_production_slot, 228),
    (item_set_slot, "itm_pottery", slot_item_production_string, "str_kilns"),
    (item_set_slot, "itm_oil", slot_item_urban_demand, 10),
    (item_set_slot, "itm_oil", slot_item_rural_demand, 5),
    (item_set_slot, "itm_oil", slot_item_desert_demand, -1),
    (item_set_slot, "itm_oil", slot_item_production_slot, 224),
    (item_set_slot, "itm_oil", slot_item_production_string, "str_presses"),
    (item_set_slot, "itm_oil", slot_item_primary_raw_material, "itm_raw_olives"),
    (item_set_slot, "itm_oil", slot_item_input_number, 6),
    (item_set_slot, "itm_oil", slot_item_output_per_run, 2),
    (item_set_slot, "itm_oil", slot_item_overhead_per_run, 80),
    (item_set_slot, "itm_oil", slot_item_base_price, 450),
    (item_set_slot, "itm_oil", slot_item_enterprise_building_cost, 4500),
    (item_set_slot, "itm_raw_olives", slot_item_urban_demand, 0),
    (item_set_slot, "itm_raw_olives", slot_item_rural_demand, 0),
    (item_set_slot, "itm_raw_olives", slot_item_desert_demand, 0),
    (item_set_slot, "itm_raw_olives", slot_item_production_slot, 210),
    (item_set_slot, "itm_raw_olives", slot_item_production_string, "str_olive_groves"),
    (item_set_slot, "itm_raw_olives", slot_item_is_raw_material_only_for, "itm_oil"),
    (item_set_slot, "itm_raw_olives", slot_item_base_price, 100),
    (item_set_slot, "itm_velvet", slot_item_urban_demand, 5),
    (item_set_slot, "itm_velvet", slot_item_rural_demand, 0),
    (item_set_slot, "itm_velvet", slot_item_desert_demand, -1),
    (item_set_slot, "itm_velvet", slot_item_production_slot, 226),
    (item_set_slot, "itm_velvet", slot_item_production_string, "str_looms"),
    (item_set_slot, "itm_velvet", slot_item_primary_raw_material, "itm_raw_silk"),
    (item_set_slot, "itm_velvet", slot_item_input_number, 2),
    (item_set_slot, "itm_velvet", slot_item_output_per_run, 2),
    (item_set_slot, "itm_velvet", slot_item_overhead_per_run, 160),
    (item_set_slot, "itm_velvet", slot_item_base_price, 1025),
    (item_set_slot, "itm_velvet", slot_item_secondary_raw_material, "itm_raw_dyes"),
    (item_set_slot, "itm_velvet", slot_item_enterprise_building_cost, 10000),
    (item_set_slot, "itm_raw_silk", slot_item_urban_demand, 0),
    (item_set_slot, "itm_raw_silk", slot_item_rural_demand, 0),
    (item_set_slot, "itm_raw_silk", slot_item_production_slot, 217),
    (item_set_slot, "itm_raw_silk", slot_item_production_string, "str_mulberry_groves"),
    (item_set_slot, "itm_raw_silk", slot_item_is_raw_material_only_for, "itm_velvet"),
    (item_set_slot, "itm_raw_silk", slot_item_base_price, 600),
    (item_set_slot, "itm_raw_dyes", slot_item_urban_demand, 3),
    (item_set_slot, "itm_raw_dyes", slot_item_rural_demand, 0),
    (item_set_slot, "itm_raw_dyes", slot_item_desert_demand, -1),
    (item_set_slot, "itm_raw_dyes", slot_item_production_string, "str_caravans"),
    (item_set_slot, "itm_raw_dyes", slot_item_base_price, 200),
    (item_set_slot, "itm_spice", slot_item_urban_demand, 5),
    (item_set_slot, "itm_spice", slot_item_rural_demand, 0),
    (item_set_slot, "itm_spice", slot_item_desert_demand, 5),
    (item_set_slot, "itm_spice", slot_item_production_string, "str_caravans"),
    (item_set_slot, "itm_furs", slot_item_urban_demand, 5),
    (item_set_slot, "itm_furs", slot_item_rural_demand, 0),
    (item_set_slot, "itm_furs", slot_item_desert_demand, -1),
    (item_set_slot, "itm_furs", slot_item_production_slot, 220),
    (item_set_slot, "itm_furs", slot_item_production_string, "str_traps"),
    (item_set_slot, "itm_honey", slot_item_urban_demand, 12),
    (item_set_slot, "itm_honey", slot_item_rural_demand, 3),
    (item_set_slot, "itm_honey", slot_item_desert_demand, -1),
    (item_set_slot, "itm_honey", slot_item_production_slot, 216),
    (item_set_slot, "itm_honey", slot_item_production_string, "str_hives"),
    (item_set_slot, "itm_cabbages", slot_item_urban_demand, 7),
    (item_set_slot, "itm_cabbages", slot_item_rural_demand, 7),
    (item_set_slot, "itm_cabbages", slot_item_desert_demand, 7),
    (item_set_slot, "itm_cabbages", slot_item_production_slot, 232),
    (item_set_slot, "itm_cabbages", slot_item_production_string, "str_gardens"),
    (item_set_slot, "itm_raw_date_fruit", slot_item_urban_demand, 7),
    (item_set_slot, "itm_raw_date_fruit", slot_item_rural_demand, 7),
    (item_set_slot, "itm_raw_date_fruit", slot_item_desert_demand, 7),
    (item_set_slot, "itm_raw_date_fruit", slot_item_production_slot, 232),
    (item_set_slot, "itm_raw_date_fruit", slot_item_production_string, "str_acres_oasis"),
    (item_set_slot, "itm_chicken", slot_item_urban_demand, 40),
    (item_set_slot, "itm_chicken", slot_item_rural_demand, 10),
    (item_set_slot, "itm_chicken", slot_item_desert_demand, -1),
    (item_set_slot, "itm_pork", slot_item_urban_demand, 40),
    (item_set_slot, "itm_pork", slot_item_rural_demand, 10),
    (item_set_slot, "itm_pork", slot_item_desert_demand, -1),
    (item_set_slot, "itm_book_tactics", slot_item_intelligence_requirement, 9),
    (item_set_slot, "itm_book_persuasion", slot_item_intelligence_requirement, 8),
    (item_set_slot, "itm_book_leadership", slot_item_intelligence_requirement, 7),
    (item_set_slot, "itm_book_intelligence", slot_item_intelligence_requirement, 10),
    (item_set_slot, "itm_book_trade", slot_item_intelligence_requirement, 11),
    (item_set_slot, "itm_book_weapon_mastery", slot_item_intelligence_requirement, 9),
    (item_set_slot, "itm_book_engineering", slot_item_intelligence_requirement, 12),
    (item_set_slot, "itm_book_wound_treatment_reference", slot_item_intelligence_requirement, 10),
    (item_set_slot, "itm_book_training_reference", slot_item_intelligence_requirement, 10),
    (item_set_slot, "itm_book_surgery_reference", slot_item_intelligence_requirement, 10),

]),

("initialize_town_arena_info",
[
    (try_for_range, ":var_0", "p_town_1_1", "p_castle_1_1"),
        (party_set_slot, ":var_0", slot_town_tournament_max_teams, 2),
        (party_set_slot, ":var_0", slot_town_tournament_max_team_size, 8),
    (try_end),
    (party_set_slot, "p_town_5_1", slot_town_arena_melee_1_num_teams, 2),
    (party_set_slot, "p_town_5_1", slot_town_arena_melee_1_team_size, 1),
    (party_set_slot, "p_town_5_1", slot_town_arena_melee_2_num_teams, 4),
    (party_set_slot, "p_town_5_1", slot_town_arena_melee_2_team_size, 1),
    (party_set_slot, "p_town_5_1", slot_town_arena_melee_3_num_teams, 4),
    (party_set_slot, "p_town_5_1", slot_town_arena_melee_3_team_size, 1),
    (party_set_slot, "p_town_5_2", slot_town_arena_melee_1_num_teams, 4),
    (party_set_slot, "p_town_5_2", slot_town_arena_melee_1_team_size, 4),
    (party_set_slot, "p_town_5_2", slot_town_arena_melee_2_num_teams, 4),
    (party_set_slot, "p_town_5_2", slot_town_arena_melee_2_team_size, 6),
    (party_set_slot, "p_town_5_2", slot_town_arena_melee_3_num_teams, 4),
    (party_set_slot, "p_town_5_2", slot_town_arena_melee_3_team_size, 8),
    (party_set_slot, "p_town_5_3", slot_town_arena_melee_1_num_teams, 2),
    (party_set_slot, "p_town_5_3", slot_town_arena_melee_1_team_size, 8),
    (party_set_slot, "p_town_5_3", slot_town_arena_melee_2_num_teams, 2),
    (party_set_slot, "p_town_5_3", slot_town_arena_melee_2_team_size, 8),
    (party_set_slot, "p_town_5_3", slot_town_arena_melee_3_num_teams, 2),
    (party_set_slot, "p_town_5_3", slot_town_arena_melee_3_team_size, 8),
    (party_set_slot, "p_town_5_4", slot_town_arena_melee_1_num_teams, 2),
    (party_set_slot, "p_town_5_4", slot_town_arena_melee_1_team_size, 8),
    (party_set_slot, "p_town_5_4", slot_town_arena_melee_2_num_teams, 3),
    (party_set_slot, "p_town_5_4", slot_town_arena_melee_2_team_size, 8),
    (party_set_slot, "p_town_5_4", slot_town_arena_melee_3_num_teams, 2),
    (party_set_slot, "p_town_5_4", slot_town_arena_melee_3_team_size, 5),
    (party_set_slot, "p_town_1_1", slot_town_arena_melee_1_num_teams, 2),
    (party_set_slot, "p_town_1_1", slot_town_arena_melee_1_team_size, 3),
    (party_set_slot, "p_town_1_1", slot_town_arena_melee_2_num_teams, 2),
    (party_set_slot, "p_town_1_1", slot_town_arena_melee_2_team_size, 5),
    (party_set_slot, "p_town_1_1", slot_town_arena_melee_3_num_teams, 2),
    (party_set_slot, "p_town_1_1", slot_town_arena_melee_3_team_size, 8),
    (party_set_slot, "p_town_1_2", slot_town_arena_melee_1_num_teams, 2),
    (party_set_slot, "p_town_1_2", slot_town_arena_melee_1_team_size, 4),
    (party_set_slot, "p_town_1_2", slot_town_arena_melee_2_num_teams, 3),
    (party_set_slot, "p_town_1_2", slot_town_arena_melee_2_team_size, 4),
    (party_set_slot, "p_town_1_2", slot_town_arena_melee_3_num_teams, 3),
    (party_set_slot, "p_town_1_2", slot_town_arena_melee_3_team_size, 6),
    (party_set_slot, "p_town_1_3", slot_town_arena_melee_1_num_teams, 4),
    (party_set_slot, "p_town_1_3", slot_town_arena_melee_1_team_size, 4),
    (party_set_slot, "p_town_1_3", slot_town_arena_melee_2_num_teams, 4),
    (party_set_slot, "p_town_1_3", slot_town_arena_melee_2_team_size, 6),
    (party_set_slot, "p_town_1_3", slot_town_arena_melee_3_num_teams, 4),
    (party_set_slot, "p_town_1_3", slot_town_arena_melee_3_team_size, 8),
    (party_set_slot, "p_town_1_4", slot_town_arena_melee_1_num_teams, 3),
    (party_set_slot, "p_town_1_4", slot_town_arena_melee_1_team_size, 1),
    (party_set_slot, "p_town_1_4", slot_town_arena_melee_2_num_teams, 3),
    (party_set_slot, "p_town_1_4", slot_town_arena_melee_2_team_size, 3),
    (party_set_slot, "p_town_1_4", slot_town_arena_melee_3_num_teams, 3),
    (party_set_slot, "p_town_1_4", slot_town_arena_melee_3_team_size, 7),
    (party_set_slot, "p_town_2_1", slot_town_arena_melee_1_num_teams, 2),
    (party_set_slot, "p_town_2_1", slot_town_arena_melee_1_team_size, 2),
    (party_set_slot, "p_town_2_1", slot_town_arena_melee_2_num_teams, 2),
    (party_set_slot, "p_town_2_1", slot_town_arena_melee_2_team_size, 5),
    (party_set_slot, "p_town_2_1", slot_town_arena_melee_3_num_teams, 2),
    (party_set_slot, "p_town_2_1", slot_town_arena_melee_3_team_size, 8),
    (party_set_slot, "p_town_2_2", slot_town_arena_melee_1_num_teams, 2),
    (party_set_slot, "p_town_2_2", slot_town_arena_melee_1_team_size, 3),
    (party_set_slot, "p_town_2_2", slot_town_arena_melee_2_num_teams, 2),
    (party_set_slot, "p_town_2_2", slot_town_arena_melee_2_team_size, 5),
    (party_set_slot, "p_town_2_2", slot_town_arena_melee_3_num_teams, 2),
    (party_set_slot, "p_town_2_2", slot_town_arena_melee_3_team_size, 8),
    (party_set_slot, "p_town_2_3", slot_town_arena_melee_1_num_teams, 2),
    (party_set_slot, "p_town_2_3", slot_town_arena_melee_1_team_size, 8),
    (party_set_slot, "p_town_2_3", slot_town_arena_melee_2_num_teams, 3),
    (party_set_slot, "p_town_2_3", slot_town_arena_melee_2_team_size, 4),
    (party_set_slot, "p_town_2_3", slot_town_arena_melee_3_num_teams, 3),
    (party_set_slot, "p_town_2_3", slot_town_arena_melee_3_team_size, 6),
    (party_set_slot, "p_town_2_4", slot_town_arena_melee_1_num_teams, 3),
    (party_set_slot, "p_town_2_4", slot_town_arena_melee_1_team_size, 8),
    (party_set_slot, "p_town_2_4", slot_town_arena_melee_2_num_teams, 4),
    (party_set_slot, "p_town_2_4", slot_town_arena_melee_2_team_size, 6),
    (party_set_slot, "p_town_2_4", slot_town_arena_melee_3_num_teams, 4),
    (party_set_slot, "p_town_2_4", slot_town_arena_melee_3_team_size, 5),
    (party_set_slot, "p_town_8_1", slot_town_arena_melee_1_num_teams, 2),
    (party_set_slot, "p_town_8_1", slot_town_arena_melee_1_team_size, 8),
    (party_set_slot, "p_town_8_1", slot_town_arena_melee_2_num_teams, 4),
    (party_set_slot, "p_town_8_1", slot_town_arena_melee_2_team_size, 5),
    (party_set_slot, "p_town_8_1", slot_town_arena_melee_3_num_teams, 4),
    (party_set_slot, "p_town_8_1", slot_town_arena_melee_3_team_size, 7),
    (party_set_slot, "p_town_3_2", slot_town_arena_melee_1_num_teams, 2),
    (party_set_slot, "p_town_3_2", slot_town_arena_melee_1_team_size, 4),
    (party_set_slot, "p_town_3_2", slot_town_arena_melee_2_num_teams, 2),
    (party_set_slot, "p_town_3_2", slot_town_arena_melee_2_team_size, 5),
    (party_set_slot, "p_town_3_2", slot_town_arena_melee_3_num_teams, 2),
    (party_set_slot, "p_town_3_2", slot_town_arena_melee_3_team_size, 6),
    (party_set_slot, "p_town_3_3", slot_town_arena_melee_1_num_teams, 2),
    (party_set_slot, "p_town_3_3", slot_town_arena_melee_1_team_size, 8),
    (party_set_slot, "p_town_3_3", slot_town_arena_melee_2_num_teams, 3),
    (party_set_slot, "p_town_3_3", slot_town_arena_melee_2_team_size, 4),
    (party_set_slot, "p_town_3_3", slot_town_arena_melee_3_num_teams, 3),
    (party_set_slot, "p_town_3_3", slot_town_arena_melee_3_team_size, 6),
    (party_set_slot, "p_town_3_4", slot_town_arena_melee_1_num_teams, 3),
    (party_set_slot, "p_town_3_4", slot_town_arena_melee_1_team_size, 8),
    (party_set_slot, "p_town_3_4", slot_town_arena_melee_2_num_teams, 4),
    (party_set_slot, "p_town_3_4", slot_town_arena_melee_2_team_size, 6),
    (party_set_slot, "p_town_3_4", slot_town_arena_melee_3_num_teams, 4),
    (party_set_slot, "p_town_3_4", slot_town_arena_melee_3_team_size, 5),
    (party_set_slot, "p_town_4_1", slot_town_arena_melee_1_num_teams, 2),
    (party_set_slot, "p_town_4_1", slot_town_arena_melee_1_team_size, 8),
    (party_set_slot, "p_town_4_1", slot_town_arena_melee_2_num_teams, 4),
    (party_set_slot, "p_town_4_1", slot_town_arena_melee_2_team_size, 5),
    (party_set_slot, "p_town_4_1", slot_town_arena_melee_3_num_teams, 4),
    (party_set_slot, "p_town_4_1", slot_town_arena_melee_3_team_size, 7),
    (party_set_slot, "p_town_14_1", slot_town_arena_melee_1_num_teams, 2),
    (party_set_slot, "p_town_14_1", slot_town_arena_melee_1_team_size, 4),
    (party_set_slot, "p_town_14_1", slot_town_arena_melee_2_num_teams, 2),
    (party_set_slot, "p_town_14_1", slot_town_arena_melee_2_team_size, 5),
    (party_set_slot, "p_town_14_1", slot_town_arena_melee_3_num_teams, 2),
    (party_set_slot, "p_town_14_1", slot_town_arena_melee_3_team_size, 6),
    (party_set_slot, "p_town_4_2", slot_town_arena_melee_1_num_teams, 2),
    (party_set_slot, "p_town_4_2", slot_town_arena_melee_1_team_size, 1),
    (party_set_slot, "p_town_4_2", slot_town_arena_melee_2_num_teams, 4),
    (party_set_slot, "p_town_4_2", slot_town_arena_melee_2_team_size, 1),
    (party_set_slot, "p_town_4_2", slot_town_arena_melee_3_num_teams, 4),
    (party_set_slot, "p_town_4_2", slot_town_arena_melee_3_team_size, 1),
    (party_set_slot, "p_town_11_1", slot_town_arena_melee_1_num_teams, 2),
    (party_set_slot, "p_town_11_1", slot_town_arena_melee_1_team_size, 1),
    (party_set_slot, "p_town_11_1", slot_town_arena_melee_2_num_teams, 4),
    (party_set_slot, "p_town_11_1", slot_town_arena_melee_2_team_size, 1),
    (party_set_slot, "p_town_11_1", slot_town_arena_melee_3_num_teams, 4),
    (party_set_slot, "p_town_11_1", slot_town_arena_melee_3_team_size, 1),
    (party_set_slot, "p_town_7_1", slot_town_arena_melee_1_num_teams, 2),
    (party_set_slot, "p_town_7_1", slot_town_arena_melee_1_team_size, 1),
    (party_set_slot, "p_town_7_1", slot_town_arena_melee_2_num_teams, 4),
    (party_set_slot, "p_town_7_1", slot_town_arena_melee_2_team_size, 1),
    (party_set_slot, "p_town_7_1", slot_town_arena_melee_3_num_teams, 4),
    (party_set_slot, "p_town_7_1", slot_town_arena_melee_3_team_size, 1),
    (party_set_slot, "p_town_7_2", slot_town_arena_melee_1_num_teams, 2),
    (party_set_slot, "p_town_7_2", slot_town_arena_melee_1_team_size, 1),
    (party_set_slot, "p_town_7_2", slot_town_arena_melee_2_num_teams, 4),
    (party_set_slot, "p_town_7_2", slot_town_arena_melee_2_team_size, 1),
    (party_set_slot, "p_town_7_2", slot_town_arena_melee_3_num_teams, 4),
    (party_set_slot, "p_town_7_2", slot_town_arena_melee_3_team_size, 1),
    (party_set_slot, "p_town_7_3", slot_town_arena_melee_1_num_teams, 2),
    (party_set_slot, "p_town_7_3", slot_town_arena_melee_1_team_size, 1),
    (party_set_slot, "p_town_7_3", slot_town_arena_melee_2_num_teams, 4),
    (party_set_slot, "p_town_7_3", slot_town_arena_melee_2_team_size, 1),
    (party_set_slot, "p_town_7_3", slot_town_arena_melee_3_num_teams, 4),
    (party_set_slot, "p_town_7_3", slot_town_arena_melee_3_team_size, 1),
    (party_set_slot, "p_town_7_4", slot_town_arena_melee_1_num_teams, 2),
    (party_set_slot, "p_town_7_4", slot_town_arena_melee_1_team_size, 1),
    (party_set_slot, "p_town_7_4", slot_town_arena_melee_2_num_teams, 4),
    (party_set_slot, "p_town_7_4", slot_town_arena_melee_2_team_size, 1),
    (party_set_slot, "p_town_7_4", slot_town_arena_melee_3_num_teams, 4),
    (party_set_slot, "p_town_7_4", slot_town_arena_melee_3_team_size, 1),
    (party_set_slot, "p_town_6_1", slot_town_arena_melee_1_num_teams, 2),
    (party_set_slot, "p_town_6_1", slot_town_arena_melee_1_team_size, 1),
    (party_set_slot, "p_town_6_1", slot_town_arena_melee_2_num_teams, 4),
    (party_set_slot, "p_town_6_1", slot_town_arena_melee_2_team_size, 1),
    (party_set_slot, "p_town_6_1", slot_town_arena_melee_3_num_teams, 4),
    (party_set_slot, "p_town_6_1", slot_town_arena_melee_3_team_size, 1),
    (party_set_slot, "p_town_6_2", slot_town_arena_melee_1_num_teams, 2),
    (party_set_slot, "p_town_6_2", slot_town_arena_melee_1_team_size, 1),
    (party_set_slot, "p_town_6_2", slot_town_arena_melee_2_num_teams, 4),
    (party_set_slot, "p_town_6_2", slot_town_arena_melee_2_team_size, 1),
    (party_set_slot, "p_town_6_2", slot_town_arena_melee_3_num_teams, 4),
    (party_set_slot, "p_town_6_2", slot_town_arena_melee_3_team_size, 1),
    (party_set_slot, "p_town_6_3", slot_town_arena_melee_1_num_teams, 2),
    (party_set_slot, "p_town_6_3", slot_town_arena_melee_1_team_size, 1),
    (party_set_slot, "p_town_6_3", slot_town_arena_melee_2_num_teams, 4),
    (party_set_slot, "p_town_6_3", slot_town_arena_melee_2_team_size, 1),
    (party_set_slot, "p_town_6_3", slot_town_arena_melee_3_num_teams, 4),
    (party_set_slot, "p_town_6_3", slot_town_arena_melee_3_team_size, 1),
    (party_set_slot, "p_town_3_1", slot_town_arena_melee_1_num_teams, 2),
    (party_set_slot, "p_town_3_1", slot_town_arena_melee_1_team_size, 1),
    (party_set_slot, "p_town_3_1", slot_town_arena_melee_2_num_teams, 4),
    (party_set_slot, "p_town_3_1", slot_town_arena_melee_2_team_size, 1),
    (party_set_slot, "p_town_3_1", slot_town_arena_melee_3_num_teams, 4),
    (party_set_slot, "p_town_3_1", slot_town_arena_melee_3_team_size, 1),
    (party_set_slot, "p_town_9_1", slot_town_arena_melee_1_num_teams, 2),
    (party_set_slot, "p_town_9_1", slot_town_arena_melee_1_team_size, 1),
    (party_set_slot, "p_town_9_1", slot_town_arena_melee_2_num_teams, 4),
    (party_set_slot, "p_town_9_1", slot_town_arena_melee_2_team_size, 1),
    (party_set_slot, "p_town_9_1", slot_town_arena_melee_3_num_teams, 4),
    (party_set_slot, "p_town_9_1", slot_town_arena_melee_3_team_size, 1),
    (party_set_slot, "p_town_9_2", slot_town_arena_melee_1_num_teams, 2),
    (party_set_slot, "p_town_9_2", slot_town_arena_melee_1_team_size, 1),
    (party_set_slot, "p_town_9_2", slot_town_arena_melee_2_num_teams, 4),
    (party_set_slot, "p_town_9_2", slot_town_arena_melee_2_team_size, 1),
    (party_set_slot, "p_town_9_2", slot_town_arena_melee_3_num_teams, 4),
    (party_set_slot, "p_town_9_2", slot_town_arena_melee_3_team_size, 1),
    (party_set_slot, "p_town_9_3", slot_town_arena_melee_1_num_teams, 2),
    (party_set_slot, "p_town_9_3", slot_town_arena_melee_1_team_size, 1),
    (party_set_slot, "p_town_9_3", slot_town_arena_melee_2_num_teams, 4),
    (party_set_slot, "p_town_9_3", slot_town_arena_melee_2_team_size, 1),
    (party_set_slot, "p_town_9_3", slot_town_arena_melee_3_num_teams, 4),
    (party_set_slot, "p_town_9_3", slot_town_arena_melee_3_team_size, 1),
    (party_set_slot, "p_town_9_4", slot_town_arena_melee_1_num_teams, 2),
    (party_set_slot, "p_town_9_4", slot_town_arena_melee_1_team_size, 1),
    (party_set_slot, "p_town_9_4", slot_town_arena_melee_2_num_teams, 4),
    (party_set_slot, "p_town_9_4", slot_town_arena_melee_2_team_size, 1),
    (party_set_slot, "p_town_9_4", slot_town_arena_melee_3_num_teams, 4),
    (party_set_slot, "p_town_9_4", slot_town_arena_melee_3_team_size, 1),
    (party_set_slot, "p_town_10_1", slot_town_arena_melee_1_num_teams, 2),
    (party_set_slot, "p_town_10_1", slot_town_arena_melee_1_team_size, 1),
    (party_set_slot, "p_town_10_1", slot_town_arena_melee_2_num_teams, 4),
    (party_set_slot, "p_town_10_1", slot_town_arena_melee_2_team_size, 1),
    (party_set_slot, "p_town_10_1", slot_town_arena_melee_3_num_teams, 4),
    (party_set_slot, "p_town_10_1", slot_town_arena_melee_3_team_size, 1),
    (party_set_slot, "p_town_10_2", slot_town_arena_melee_1_num_teams, 2),
    (party_set_slot, "p_town_10_2", slot_town_arena_melee_1_team_size, 1),
    (party_set_slot, "p_town_10_2", slot_town_arena_melee_2_num_teams, 4),
    (party_set_slot, "p_town_10_2", slot_town_arena_melee_2_team_size, 1),
    (party_set_slot, "p_town_10_2", slot_town_arena_melee_3_num_teams, 4),
    (party_set_slot, "p_town_10_2", slot_town_arena_melee_3_team_size, 1),
    (party_set_slot, "p_town_10_3", slot_town_arena_melee_1_num_teams, 2),
    (party_set_slot, "p_town_10_3", slot_town_arena_melee_1_team_size, 1),
    (party_set_slot, "p_town_10_3", slot_town_arena_melee_2_num_teams, 4),
    (party_set_slot, "p_town_10_3", slot_town_arena_melee_2_team_size, 1),
    (party_set_slot, "p_town_10_3", slot_town_arena_melee_3_num_teams, 4),
    (party_set_slot, "p_town_10_3", slot_town_arena_melee_3_team_size, 1),
    (party_set_slot, "p_town_10_4", slot_town_arena_melee_1_num_teams, 2),
    (party_set_slot, "p_town_10_4", slot_town_arena_melee_1_team_size, 1),
    (party_set_slot, "p_town_10_4", slot_town_arena_melee_2_num_teams, 4),
    (party_set_slot, "p_town_10_4", slot_town_arena_melee_2_team_size, 1),
    (party_set_slot, "p_town_10_4", slot_town_arena_melee_3_num_teams, 4),
    (party_set_slot, "p_town_10_4", slot_town_arena_melee_3_team_size, 1),
    (party_set_slot, "p_town_14_2", slot_town_arena_melee_1_num_teams, 2),
    (party_set_slot, "p_town_14_2", slot_town_arena_melee_1_team_size, 1),
    (party_set_slot, "p_town_14_2", slot_town_arena_melee_2_num_teams, 4),
    (party_set_slot, "p_town_14_2", slot_town_arena_melee_2_team_size, 1),
    (party_set_slot, "p_town_14_2", slot_town_arena_melee_3_num_teams, 4),
    (party_set_slot, "p_town_14_2", slot_town_arena_melee_3_team_size, 1),
    (party_set_slot, "p_town_11_2", slot_town_arena_melee_1_num_teams, 2),
    (party_set_slot, "p_town_11_2", slot_town_arena_melee_1_team_size, 1),
    (party_set_slot, "p_town_11_2", slot_town_arena_melee_2_num_teams, 4),
    (party_set_slot, "p_town_11_2", slot_town_arena_melee_2_team_size, 1),
    (party_set_slot, "p_town_11_2", slot_town_arena_melee_3_num_teams, 4),
    (party_set_slot, "p_town_11_2", slot_town_arena_melee_3_team_size, 1),
    (party_set_slot, "p_town_11_2", slot_town_arena_melee_1_num_teams, 2),
    (party_set_slot, "p_town_11_2", slot_town_arena_melee_1_team_size, 1),
    (party_set_slot, "p_town_11_2", slot_town_arena_melee_2_num_teams, 4),
    (party_set_slot, "p_town_11_2", slot_town_arena_melee_2_team_size, 1),
    (party_set_slot, "p_town_11_2", slot_town_arena_melee_3_num_teams, 4),
    (party_set_slot, "p_town_11_2", slot_town_arena_melee_3_team_size, 1),
    (party_set_slot, "p_town_12_1", slot_town_arena_melee_1_num_teams, 2),
    (party_set_slot, "p_town_12_1", slot_town_arena_melee_1_team_size, 1),
    (party_set_slot, "p_town_12_1", slot_town_arena_melee_2_num_teams, 4),
    (party_set_slot, "p_town_12_1", slot_town_arena_melee_2_team_size, 1),
    (party_set_slot, "p_town_12_1", slot_town_arena_melee_3_num_teams, 4),
    (party_set_slot, "p_town_12_1", slot_town_arena_melee_3_team_size, 1),
    (party_set_slot, "p_town_12_2", slot_town_arena_melee_1_num_teams, 2),
    (party_set_slot, "p_town_12_2", slot_town_arena_melee_1_team_size, 1),
    (party_set_slot, "p_town_12_2", slot_town_arena_melee_2_num_teams, 4),
    (party_set_slot, "p_town_12_2", slot_town_arena_melee_2_team_size, 1),
    (party_set_slot, "p_town_12_2", slot_town_arena_melee_3_num_teams, 4),
    (party_set_slot, "p_town_12_2", slot_town_arena_melee_3_team_size, 1),
    (party_set_slot, "p_town_13_1", slot_town_arena_melee_1_num_teams, 2),
    (party_set_slot, "p_town_13_1", slot_town_arena_melee_1_team_size, 1),
    (party_set_slot, "p_town_13_1", slot_town_arena_melee_2_num_teams, 4),
    (party_set_slot, "p_town_13_1", slot_town_arena_melee_2_team_size, 1),
    (party_set_slot, "p_town_13_1", slot_town_arena_melee_3_num_teams, 4),
    (party_set_slot, "p_town_13_1", slot_town_arena_melee_3_team_size, 1),
    (party_set_slot, "p_town_13_2", slot_town_arena_melee_1_num_teams, 2),
    (party_set_slot, "p_town_13_2", slot_town_arena_melee_1_team_size, 1),
    (party_set_slot, "p_town_13_2", slot_town_arena_melee_2_num_teams, 4),
    (party_set_slot, "p_town_13_2", slot_town_arena_melee_2_team_size, 1),
    (party_set_slot, "p_town_13_2", slot_town_arena_melee_3_num_teams, 4),
    (party_set_slot, "p_town_13_2", slot_town_arena_melee_3_team_size, 1),
    (party_set_slot, "p_town_8_2", slot_town_arena_melee_1_num_teams, 2),
    (party_set_slot, "p_town_8_2", slot_town_arena_melee_1_team_size, 1),
    (party_set_slot, "p_town_8_2", slot_town_arena_melee_2_num_teams, 4),
    (party_set_slot, "p_town_8_2", slot_town_arena_melee_2_team_size, 1),
    (party_set_slot, "p_town_8_2", slot_town_arena_melee_3_num_teams, 4),
    (party_set_slot, "p_town_8_2", slot_town_arena_melee_3_team_size, 1),
    (party_set_slot, "p_town_9_6", slot_town_arena_melee_1_num_teams, 2),
    (party_set_slot, "p_town_9_6", slot_town_arena_melee_1_team_size, 1),
    (party_set_slot, "p_town_9_6", slot_town_arena_melee_2_num_teams, 4),
    (party_set_slot, "p_town_9_6", slot_town_arena_melee_2_team_size, 1),
    (party_set_slot, "p_town_9_6", slot_town_arena_melee_3_num_teams, 4),
    (party_set_slot, "p_town_9_6", slot_town_arena_melee_3_team_size, 1),
    (party_set_slot, "p_town_15_1", slot_town_arena_melee_1_num_teams, 2),
    (party_set_slot, "p_town_15_1", slot_town_arena_melee_1_team_size, 1),
    (party_set_slot, "p_town_15_1", slot_town_arena_melee_2_num_teams, 4),
    (party_set_slot, "p_town_15_1", slot_town_arena_melee_2_team_size, 1),
    (party_set_slot, "p_town_15_1", slot_town_arena_melee_3_num_teams, 4),
    (party_set_slot, "p_town_15_1", slot_town_arena_melee_3_team_size, 1),
    (party_set_slot, "p_town_15_2", slot_town_arena_melee_1_num_teams, 2),
    (party_set_slot, "p_town_15_2", slot_town_arena_melee_1_team_size, 1),
    (party_set_slot, "p_town_15_2", slot_town_arena_melee_2_num_teams, 4),
    (party_set_slot, "p_town_15_2", slot_town_arena_melee_2_team_size, 1),
    (party_set_slot, "p_town_15_2", slot_town_arena_melee_3_num_teams, 4),
    (party_set_slot, "p_town_15_2", slot_town_arena_melee_3_team_size, 1),
    (party_set_slot, "p_town_15_3", slot_town_arena_melee_1_num_teams, 2),
    (party_set_slot, "p_town_15_3", slot_town_arena_melee_1_team_size, 1),
    (party_set_slot, "p_town_15_3", slot_town_arena_melee_2_num_teams, 4),
    (party_set_slot, "p_town_15_3", slot_town_arena_melee_2_team_size, 1),
    (party_set_slot, "p_town_15_3", slot_town_arena_melee_3_num_teams, 4),
    (party_set_slot, "p_town_15_3", slot_town_arena_melee_3_team_size, 1),

]),

("initialize_banner_info",
[
    (try_for_range, ":var_0", "trp_npc1", "trp_heroes_end"),
        (troop_set_slot, ":var_0", slot_troop_custom_banner_flag_type, -1),
        (troop_set_slot, ":var_0", slot_troop_custom_banner_map_flag_type, -1),
    (try_end),
    (troop_set_slot, "trp_player", slot_troop_custom_banner_flag_type, -1),
    (troop_set_slot, "trp_player", slot_troop_custom_banner_map_flag_type, -1),
    (store_random_in_range, "$g_election_date", 0, 45),
    (troop_set_slot, "trp_player", slot_troop_custom_banner_bg_color_1, 4294967295),
    (troop_set_slot, "trp_player", slot_troop_custom_banner_bg_color_2, 4294967295),
    (troop_set_slot, "trp_player", slot_troop_custom_banner_charge_color_1, 4294967295),
    (troop_set_slot, "trp_player", slot_troop_custom_banner_charge_color_2, 4294967295),
    (troop_set_slot, "trp_player", slot_troop_custom_banner_charge_color_3, 4294967295),
    (troop_set_slot, "trp_player", slot_troop_custom_banner_charge_color_4, 4294967295),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_relations_begin, 4287579441),
    (troop_set_slot, "trp_banner_background_color_array", 1, 4292466641),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_occupation, 4281808694),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_state, 4288973608),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_last_talk_time, 4283004725),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_met, 4286723629),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_party_template, 4286133033),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_renown, 4280689953),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_prisoner_of_party, 4292467409),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_present_at_event, 4283581795),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_leaded_party, 4287705388),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_wealth, 4289700401),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_cur_center, 4285558076),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_banner_scene_prop, 4292269006),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_original_faction, 4283571208),
    (troop_set_slot, "trp_banner_background_color_array", 15, 4281943428),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_player_order_state, 4282541614),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_player_order_object, 4292861654),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_age, 4280887076),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_age_appearance, 4283982107),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_does_not_give_quest, 4281416295),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_player_debt, 4288451146),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_player_relation, 4288252729),
    (troop_set_slot, "trp_banner_background_color_array", 23, 4281749864),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_last_quest, 4292269006),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_last_quest_betrayed, 4287931970),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_last_persuasion_time, 4287906097),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_last_comment_time, 4287183668),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_spawned_before, 4282537232),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_last_comment_slot, 4287907118),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_spouse, 4282866324),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_father, 4291932721),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_mother, 4292993759),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_guardian, 4288248862),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_betrothed, 4291213133),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_love_interest_1, 4289567256),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_love_interest_2, 4280362017),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_love_interest_3, 4287373345),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_love_interests_end, 4283265334),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_betrothal_time, 4281949572),
    (troop_set_slot, "trp_banner_background_color_array", slot_lady_used_tournament, 4283594041),
    (troop_set_slot, "trp_banner_background_color_array", 41, 4288429113),
    (troop_set_slot, "trp_banner_background_color_array", 42, 4282536332),
    (troop_set_slot, "trp_banner_background_color_array", 43, 4288965164),
    (troop_set_slot, "trp_banner_background_color_array", 44, 4288631105),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_current_rumor, 4281098633),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_temp_slot, 4283786273),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_promised_fief, 4288504350),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_set_decision_seed, 4292796118),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_temp_decision_seed, 4285417617),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_recruitment_random, 4286994985),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_intrigue_impatience, 4292796377),
    (troop_set_slot, "trp_banner_background_color_array", slot_lord_reputation_type, 4283581043),
    (troop_set_slot, "trp_banner_background_color_array", slot_lord_recruitment_argument, 4287379489),
    (troop_set_slot, "trp_banner_background_color_array", slot_lord_recruitment_candidate, 4291940038),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_change_to_faction, 4281413681),
    (troop_set_slot, "trp_banner_background_color_array", 56, 4282868237),
    (troop_set_slot, "trp_banner_background_color_array", 57, 4285219129),
    (troop_set_slot, "trp_banner_background_color_array", 58, 4292270038),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_first_encountered, 4281216812),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_home, 4284498563),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_morality_state, 4281947524),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_morality_type, 4281413681),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_morality_value, 4286463790),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_2ary_morality_type, 4281611316),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_2ary_morality_state, 4282141035),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_2ary_morality_value, 4292466897),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_town_with_contacts, 4288250428),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_town_contact_type, 4288643630),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_morality_penalties, 4281940025),
    (troop_set_slot, "trp_banner_background_color_array", 70, 4289022257),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_personalityclash_object, 4292861142),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_personalityclash_state, 4288629302),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_personalityclash2_object, 4287395105),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_personalityclash2_state, 4288628273),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_personalitymatch_object, 4286133028),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_personalitymatch_state, 4281946230),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_personalityclash_penalties, 4281084716),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_home_speech_delivered, 4284838177),
    (troop_set_slot, "trp_banner_background_color_array", 79, 4286460193),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_met_previously, 4285944110),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_turned_down_twice, 4293387230),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_playerparty_history, 4287920417),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_playerparty_history_string, 4283267964),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_return_renown, 4281611057),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_custom_banner_bg_color_1, 4289154358),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_custom_banner_bg_color_2, 4293387230),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_custom_banner_charge_color_1, 4292270286),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_custom_banner_charge_color_2, 4282273127),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_custom_banner_charge_color_3, 4288644142),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_custom_banner_charge_color_4, 4283263380),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_custom_banner_bg_type, 4283064600),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_custom_banner_charge_type_1, 4287904809),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_custom_banner_charge_type_2, 4281943161),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_custom_banner_charge_type_3, 4281611057),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_custom_banner_charge_type_4, 4282338653),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_custom_banner_flag_type, 4283065481),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_custom_banner_num_charges, 4281413681),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_custom_banner_positioning, 4292270030),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_custom_banner_map_flag_type, 4291206656),
    (troop_set_slot, "trp_banner_background_color_array", 100, 4284714578),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_intro, 4292664275),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_intro_response_1, 4292598995),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_intro_response_2, 4286855217),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_backstory_a, 4291743686),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_backstory_b, 4291009841),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_backstory_c, 4291540592),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_backstory_delayed, 4281944600),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_backstory_response_1, 4281804552),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_backstory_response_2, 4288309264),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_signup, 4289886480),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_signup_2, 4287399457),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_signup_response_1, 4288109059),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_signup_response_2, 4281084196),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_mentions_payment, 4289369644),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_payment_response, 4288840238),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_morality_speech, 4286286476),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_2ary_morality_speech, 4282124552),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_personalityclash_speech, 4294902015),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_personalityclash_speech_b, 4284947988),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_personalityclash2_speech, 4279251010),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_personalityclash2_speech_b, 4283057408),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_personalitymatch_speech, 4285543204),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_personalitymatch_speech_b, 4280559932),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_retirement_speech, 4284311910),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_rehire_speech, 4290614833),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_home_intro, 4291211883),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_home_description, 4281944344),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_home_description_2, 4280361505),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_home_recap, 4280361505),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_honorific, 4281219856),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_kingsupport_string_1, 4282539387),
    (troop_set_slot, "trp_banner_background_color_array", slot_troop_kingsupport_string_2, 4281943560),

]),

("initialize_economic_information",
[
    (try_for_range, ":var_0", "p_town_1_1", "p_castle_1_1"),
        (party_set_slot, ":var_0", slot_center_wool_looms, 20),
        (party_set_slot, ":var_0", slot_center_breweries, 2),
        (party_set_slot, ":var_0", slot_center_pottery_kilns, 10),
        (party_set_slot, ":var_0", slot_center_smithies, 15),
        (party_set_slot, ":var_0", slot_center_mills, 5),
        (party_set_slot, ":var_0", slot_center_tanneries, 2),
        (party_set_slot, ":var_0", slot_center_wine_presses, 1),
        (party_set_slot, ":var_0", slot_center_olive_presses, 2),
        (party_set_slot, ":var_0", slot_center_acres_grain, 1000),
        (party_set_slot, ":var_0", slot_center_acres_vineyard, 1000),
        (party_get_position, pos1, ":var_0"),
        (try_begin),
            (map_get_water_position_around_position, 2, pos1, pos3),
            (gt, 2, 0),
            (store_random, ":var_1", 0, 5),
            (try_begin),
                (eq, ":var_1", 0),
                (party_set_slot, ":var_0", slot_center_fishing_fleet, 30),
            (else_try),
                (eq, ":var_1", 1),
                (party_set_slot, ":var_0", slot_center_fishing_fleet, 40),
            (else_try),
                (eq, ":var_1", 2),
                (party_set_slot, ":var_0", slot_center_fishing_fleet, 45),
            (else_try),
                (eq, ":var_1", 3),
                (party_set_slot, ":var_0", slot_center_fishing_fleet, 50),
            (else_try),
                (eq, ":var_1", 4),
                (party_set_slot, ":var_0", slot_center_fishing_fleet, 60),
            (try_end),
        (try_end),
        (store_faction_of_party, ":var_2", ":var_0"),
        (try_begin),
            (this_or_next|eq, ":var_2", "fac_kingdom_1"),
            (this_or_next|eq, ":var_2", "fac_kingdom_33"),
            (this_or_next|eq, ":var_2", "fac_kingdom_34"),
            (this_or_next|eq, ":var_2", "fac_kingdom_35"),
            (this_or_next|eq, ":var_2", "fac_kingdom_36"),
            (eq, ":var_2", "fac_kingdom_2"),
            (party_set_slot, ":var_0", slot_center_linen_looms, 15),
        (try_end),
        (try_begin),
            (this_or_next|eq, ":var_2", "fac_kingdom_5"),
            (this_or_next|eq, ":var_2", "fac_kingdom_23"),
            (this_or_next|eq, ":var_2", "fac_kingdom_25"),
            (this_or_next|eq, ":var_2", "fac_kingdom_31"),
            (eq, ":var_2", "fac_kingdom_28"),
            (store_random_in_range, ":var_3", 2, 6),
            (party_set_slot, ":var_0", slot_center_salt_pans, ":var_3"),
        (try_end),
        (try_begin),
            (this_or_next|eq, ":var_2", "fac_kingdom_16"),
            (this_or_next|eq, ":var_2", "fac_kingdom_17"),
            (this_or_next|eq, ":var_2", "fac_kingdom_18"),
            (this_or_next|eq, ":var_2", "fac_kingdom_19"),
            (this_or_next|eq, ":var_2", "fac_papacy"),
            (this_or_next|eq, ":var_2", "fac_kingdom_38"),
            (this_or_next|eq, ":var_2", "fac_kingdom_39"),
            (this_or_next|eq, ":var_2", "fac_kingdom_40"),
            (this_or_next|eq, ":var_2", "fac_kingdom_41"),
            (this_or_next|eq, ":var_2", "fac_kingdom_32"),
            (eq, ":var_2", "fac_kingdom_24"),
            (store_random_in_range, ":var_3", 2, 6),
            (party_set_slot, ":var_0", slot_center_wine_presses, ":var_3"),
            (party_set_slot, ":var_0", slot_center_breweries, 0),
        (try_end),
        (try_begin),
            (this_or_next|eq, ":var_2", "fac_kingdom_22"),
            (this_or_next|eq, ":var_2", "fac_kingdom_26"),
            (this_or_next|eq, ":var_2", "fac_kingdom_27"),
            (this_or_next|eq, ":var_2", "fac_kingdom_31"),
            (eq, ":var_2", "fac_kingdom_30"),
            (store_random_in_range, ":var_3", 5, 11),
            (party_set_slot, ":var_0", slot_center_wine_presses, ":var_3"),
        (try_end),
        (try_begin),
            (this_or_next|eq, ":var_2", "fac_kingdom_4"),
            (this_or_next|eq, ":var_2", "fac_kingdom_5"),
            (this_or_next|eq, ":var_2", "fac_kingdom_6"),
            (this_or_next|eq, ":var_2", "fac_kingdom_7"),
            (this_or_next|eq, ":var_2", "fac_kingdom_9"),
            (this_or_next|eq, ":var_2", "fac_kingdom_37"),
            (this_or_next|eq, ":var_2", "fac_kingdom_11"),
            (this_or_next|eq, ":var_2", "fac_kingdom_12"),
            (this_or_next|eq, ":var_2", "fac_kingdom_13"),
            (this_or_next|eq, ":var_2", "fac_kingdom_42"),
            (eq, ":var_2", "fac_kingdom_14"),
            (store_random_in_range, ":var_3", 5, 11),
            (party_set_slot, ":var_0", slot_center_breweries, ":var_3"),
        (try_end),
        (try_begin),
            (this_or_next|eq, ":var_2", "fac_kingdom_4"),
            (this_or_next|eq, ":var_2", "fac_kingdom_5"),
            (this_or_next|eq, ":var_2", "fac_kingdom_6"),
            (this_or_next|eq, ":var_2", "fac_kingdom_7"),
            (this_or_next|eq, ":var_2", "fac_kingdom_9"),
            (this_or_next|eq, ":var_2", "fac_kingdom_37"),
            (this_or_next|eq, ":var_2", "fac_kingdom_11"),
            (this_or_next|eq, ":var_2", "fac_kingdom_12"),
            (this_or_next|eq, ":var_2", "fac_kingdom_13"),
            (this_or_next|eq, ":var_2", "fac_kingdom_42"),
            (eq, ":var_2", "fac_kingdom_14"),
            (store_random_in_range, ":var_3", 1, 6),
            (party_set_slot, ":var_0", slot_center_mills, ":var_3"),
        (try_end),
        (try_begin),
            (this_or_next|eq, ":var_2", "fac_kingdom_8"),
            (this_or_next|eq, ":var_2", "fac_kingdom_2"),
            (this_or_next|eq, ":var_2", "fac_kingdom_33"),
            (this_or_next|eq, ":var_2", "fac_kingdom_34"),
            (this_or_next|eq, ":var_2", "fac_kingdom_35"),
            (this_or_next|eq, ":var_2", "fac_kingdom_36"),
            (this_or_next|eq, ":var_2", "fac_kingdom_15"),
            (this_or_next|eq, ":var_2", "fac_kingdom_30"),
            (eq, ":var_2", "fac_kingdom_31"),
            (store_random_in_range, ":var_3", 1, 6),
            (party_set_slot, ":var_0", slot_center_tanneries, ":var_3"),
        (try_end),
        (try_begin),
            (this_or_next|eq, ":var_2", "fac_kingdom_9"),
            (this_or_next|eq, ":var_2", "fac_kingdom_37"),
            (this_or_next|eq, ":var_2", "fac_kingdom_12"),
            (this_or_next|eq, ":var_2", "fac_kingdom_13"),
            (this_or_next|eq, ":var_2", "fac_kingdom_26"),
            (eq, ":var_2", "fac_kingdom_22"),
            (store_random_in_range, ":var_3", 30, 36),
            (party_set_slot, ":var_0", slot_center_wool_looms, ":var_3"),
        (try_end),
        (try_begin),
            (this_or_next|eq, ":var_2", "fac_kingdom_4"),
            (this_or_next|eq, ":var_2", "fac_kingdom_5"),
            (this_or_next|eq, ":var_2", "fac_kingdom_6"),
            (this_or_next|eq, ":var_2", "fac_kingdom_7"),
            (this_or_next|eq, ":var_2", "fac_kingdom_9"),
            (this_or_next|eq, ":var_2", "fac_kingdom_37"),
            (this_or_next|eq, ":var_2", "fac_kingdom_10"),
            (this_or_next|eq, ":var_2", "fac_kingdom_11"),
            (this_or_next|eq, ":var_2", "fac_kingdom_12"),
            (this_or_next|eq, ":var_2", "fac_kingdom_13"),
            (this_or_next|eq, ":var_2", "fac_kingdom_42"),
            (eq, ":var_2", "fac_kingdom_14"),
            (store_random_in_range, ":var_3", 15, 30),
            (party_set_slot, ":var_0", slot_center_smithies, ":var_3"),
        (try_end),
        (try_begin),
            (eq, ":var_2", "fac_kingdom_3"),
            (store_random_in_range, ":var_3", 10, 21),
            (party_set_slot, "p_town_1_1", slot_center_silk_looms, ":var_3"),
        (try_end),
    (try_end),
    (try_for_range, ":var_4", "p_village_1_1", "p_salt_mine"),
        (store_random_in_range, ":var_5", 35, 65),
        (party_set_slot, ":var_4", slot_town_trade_routes_end, ":var_5"),
        (store_random_in_range, ":var_6", 90, 120),
        (party_set_slot, ":var_4", slot_center_head_sheep, ":var_6"),
        (party_set_slot, ":var_4", slot_center_acres_grain, 10000),
        (party_set_slot, ":var_4", slot_center_acres_vineyard, 500),
        (party_set_slot, ":var_4", slot_center_acres_olives, 200),
        (party_set_slot, ":var_4", slot_center_apiaries, 1),
        (party_set_slot, ":var_4", slot_center_mills, 1),
        (party_set_slot, ":var_4", slot_center_pottery_kilns, 1),
        (store_faction_of_party, ":var_2", ":var_4"),
        (try_begin),
            (this_or_next|eq, ":var_2", "fac_kingdom_1"),
            (this_or_next|eq, ":var_2", "fac_kingdom_33"),
            (this_or_next|eq, ":var_2", "fac_kingdom_34"),
            (this_or_next|eq, ":var_2", "fac_kingdom_35"),
            (this_or_next|eq, ":var_2", "fac_kingdom_36"),
            (eq, ":var_2", "fac_kingdom_2"),
            (party_set_slot, ":var_4", slot_center_acres_flax, 8000),
            (party_set_slot, ":var_4", slot_center_linen_looms, 30),
        (try_end),
        (try_begin),
            (this_or_next|eq, ":var_2", "fac_kingdom_5"),
            (this_or_next|eq, ":var_2", "fac_kingdom_23"),
            (this_or_next|eq, ":var_2", "fac_kingdom_25"),
            (this_or_next|eq, ":var_2", "fac_kingdom_31"),
            (eq, ":var_2", "fac_kingdom_28"),
            (party_set_slot, ":var_4", slot_center_salt_pans, 1),
        (try_end),
        (try_begin),
            (this_or_next|eq, ":var_2", "fac_kingdom_16"),
            (this_or_next|eq, ":var_2", "fac_kingdom_17"),
            (this_or_next|eq, ":var_2", "fac_kingdom_18"),
            (this_or_next|eq, ":var_2", "fac_kingdom_19"),
            (this_or_next|eq, ":var_2", "fac_kingdom_32"),
            (this_or_next|eq, ":var_2", "fac_kingdom_38"),
            (this_or_next|eq, ":var_2", "fac_kingdom_39"),
            (this_or_next|eq, ":var_2", "fac_kingdom_40"),
            (this_or_next|eq, ":var_2", "fac_kingdom_41"),
            (this_or_next|eq, ":var_2", "fac_papacy"),
            (eq, ":var_2", "fac_kingdom_24"),
            (party_set_slot, ":var_4", slot_center_acres_vineyard, 2000),
        (try_end),
        (try_begin),
            (this_or_next|eq, ":var_2", "fac_kingdom_22"),
            (this_or_next|eq, ":var_2", "fac_kingdom_26"),
            (this_or_next|eq, ":var_2", "fac_kingdom_27"),
            (this_or_next|eq, ":var_2", "fac_kingdom_31"),
            (eq, ":var_2", "fac_kingdom_30"),
            (party_set_slot, ":var_4", slot_center_acres_olives, 4000),
        (try_end),
        (try_begin),
            (this_or_next|eq, ":var_2", "fac_kingdom_4"),
            (this_or_next|eq, ":var_2", "fac_kingdom_5"),
            (this_or_next|eq, ":var_2", "fac_kingdom_6"),
            (this_or_next|eq, ":var_2", "fac_kingdom_7"),
            (this_or_next|eq, ":var_2", "fac_kingdom_9"),
            (this_or_next|eq, ":var_2", "fac_kingdom_37"),
            (this_or_next|eq, ":var_2", "fac_kingdom_11"),
            (this_or_next|eq, ":var_2", "fac_kingdom_12"),
            (this_or_next|eq, ":var_2", "fac_kingdom_13"),
            (this_or_next|eq, ":var_2", "fac_kingdom_42"),
            (eq, ":var_2", "fac_kingdom_14"),
            (party_set_slot, ":var_4", slot_center_acres_grain, 12000),
        (try_end),
        (try_begin),
            (this_or_next|eq, ":var_2", "fac_kingdom_8"),
            (this_or_next|eq, ":var_2", "fac_kingdom_2"),
            (this_or_next|eq, ":var_2", "fac_kingdom_33"),
            (this_or_next|eq, ":var_2", "fac_kingdom_34"),
            (this_or_next|eq, ":var_2", "fac_kingdom_35"),
            (this_or_next|eq, ":var_2", "fac_kingdom_36"),
            (this_or_next|eq, ":var_2", "fac_kingdom_15"),
            (this_or_next|eq, ":var_2", "fac_kingdom_30"),
            (eq, ":var_2", "fac_kingdom_31"),
            (party_set_slot, ":var_4", slot_center_fur_traps, 4),
        (try_end),
        (try_begin),
            (this_or_next|eq, ":var_2", "fac_kingdom_9"),
            (this_or_next|eq, ":var_2", "fac_kingdom_37"),
            (this_or_next|eq, ":var_2", "fac_kingdom_12"),
            (this_or_next|eq, ":var_2", "fac_kingdom_13"),
            (this_or_next|eq, ":var_2", "fac_kingdom_26"),
            (eq, ":var_2", "fac_kingdom_22"),
            (party_set_slot, ":var_4", slot_center_head_sheep, 150),
        (try_end),
        (try_begin),
            (this_or_next|eq, ":var_2", "fac_kingdom_4"),
            (this_or_next|eq, ":var_2", "fac_kingdom_5"),
            (this_or_next|eq, ":var_2", "fac_kingdom_6"),
            (this_or_next|eq, ":var_2", "fac_kingdom_7"),
            (this_or_next|eq, ":var_2", "fac_kingdom_9"),
            (this_or_next|eq, ":var_2", "fac_kingdom_37"),
            (this_or_next|eq, ":var_2", "fac_kingdom_10"),
            (this_or_next|eq, ":var_2", "fac_kingdom_11"),
            (this_or_next|eq, ":var_2", "fac_kingdom_12"),
            (this_or_next|eq, ":var_2", "fac_kingdom_13"),
            (this_or_next|eq, ":var_2", "fac_kingdom_42"),
            (eq, ":var_2", "fac_kingdom_14"),
            (party_set_slot, ":var_4", slot_center_iron_deposits, 10),
        (try_end),
        (try_begin),
            (this_or_next|eq, ":var_2", "fac_kingdom_20"),
            (this_or_next|eq, ":var_2", "fac_kingdom_25"),
            (this_or_next|eq, ":var_2", "fac_kingdom_28"),
            (this_or_next|eq, ":var_2", "fac_kingdom_31"),
            (eq, ":var_2", "fac_kingdom_17"),
            (party_set_slot, ":var_4", slot_center_acres_dates, 8000),
        (try_end),
        (try_begin),
            (eq, ":var_2", "fac_kingdom_3"),
            (party_set_slot, ":var_4", slot_center_silk_farms, 500),
        (try_end),
    (try_end),
    (try_for_range, ":var_7", "p_town_1_1", "p_salt_mine"),
        (party_get_slot, ":var_8", ":var_7", slot_town_trade_routes_end),
        (party_get_slot, ":var_9", ":var_7", slot_center_head_sheep),
        (store_mul, ":var_10", ":var_8", 4),
        (val_add, ":var_10", ":var_9"),
        (val_add, ":var_10", ":var_9"),
        (val_mul, ":var_10", 6),
        (val_div, ":var_10", 5),
        (party_set_slot, ":var_7", slot_center_acres_pasture, ":var_10"),
    (try_end),
    (try_for_range, ":var_11", 0, 15),
        (call_script, "script_update_trade_good_prices"),
        (call_script, "script_update_trade_good_prices"),
        (call_script, "script_update_trade_good_prices"),
        (call_script, "script_average_trade_good_prices"),
        (call_script, "script_average_trade_good_prices"),
    (try_end),
    (try_for_range, ":var_12", "p_town_1_1", "p_salt_mine"),
        (store_random_in_range, ":var_13", 1, 90),
        (party_set_slot, ":var_12", slot_town_prosperity, ":var_13"),
    (try_end),

]),

("initialize_all_scene_prop_slots",
[
    (call_script, "script_initialize_scene_prop_slots", "spr_siege_ladder_move_6m"),
    (call_script, "script_initialize_scene_prop_slots", "spr_siege_ladder_move_8m"),
    (call_script, "script_initialize_scene_prop_slots", "spr_siege_ladder_move_10m"),
    (call_script, "script_initialize_scene_prop_slots", "spr_siege_ladder_move_12m"),
    (call_script, "script_initialize_scene_prop_slots", "spr_siege_ladder_move_14m"),
    (call_script, "script_initialize_scene_prop_slots", "spr_castle_e_sally_door_a"),
    (call_script, "script_initialize_scene_prop_slots", "spr_castle_f_sally_door_a"),
    (call_script, "script_initialize_scene_prop_slots", "spr_earth_sally_gate_left"),
    (call_script, "script_initialize_scene_prop_slots", "spr_earth_sally_gate_right"),
    (call_script, "script_initialize_scene_prop_slots", "spr_viking_keep_destroy_sally_door_left"),
    (call_script, "script_initialize_scene_prop_slots", "spr_viking_keep_destroy_sally_door_right"),
    (call_script, "script_initialize_scene_prop_slots", "spr_castle_f_door_a"),
    (call_script, "script_initialize_scene_prop_slots", "spr_belfry_a"),
    (call_script, "script_initialize_scene_prop_slots", "spr_belfry_b"),
    (call_script, "script_initialize_scene_prop_slots", "spr_winch_b"),

]),

("initialize_scene_prop_slots",
[
    (store_script_param, ":var_0", 1),
    (scene_prop_get_num_instances, ":var_1", ":var_0"),
    (try_for_range, ":var_2", 0, ":var_1"),
        (scene_prop_get_instance, ":var_3", ":var_0", ":var_2"),
        (try_for_range, ":var_4", 0, 6),
            (scene_prop_set_slot, ":var_3", ":var_4", 0),
        (try_end),
    (try_end),

]),

("use_item",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (try_begin),
        (game_in_multiplayer_mode),
        (prop_instance_get_scene_prop_kind, ":var_2", ":var_0"),
        (eq, ":var_2", "spr_winch_b"),
        (multiplayer_get_my_player, ":var_3"),
        (this_or_next|gt, ":var_3", 0),
        (neg|multiplayer_is_dedicated_server),
        (ge, ":var_3", 0),
        (player_get_agent_id, ":var_4", ":var_3"),
        (ge, ":var_4", 0),
        (agent_is_active, ":var_4"),
        (agent_get_team, ":var_5", ":var_4"),
        (eq, ":var_5", 0),
        (scene_prop_get_slot, ":var_6", ":var_0", 1),
        (ge, ":var_1", 0),
        (agent_is_active, ":var_1"),
        (agent_get_player_id, ":var_7", ":var_1"),
        (str_store_player_username, s7, ":var_7"),
        (try_begin),
            (eq, ":var_6", 0),
            (display_message, "@{s7} opened the gate"),
        (else_try),
            (display_message, "@{s7} closed the gate"),
        (try_end),
    (try_end),
    (prop_instance_get_scene_prop_kind, ":var_2", ":var_0"),
    (try_begin),
        (this_or_next|eq, ":var_2", "spr_winch_b"),
        (eq, ":var_2", "spr_winch"),
        (assign, ":var_8", "spr_portcullis"),
    (else_try),
        (this_or_next|eq, ":var_2", "spr_door_destructible"),
        (this_or_next|eq, ":var_2", "spr_castle_f_door_b"),
        (this_or_next|eq, ":var_2", "spr_castle_e_sally_door_a"),
        (this_or_next|eq, ":var_2", "spr_castle_f_sally_door_a"),
        (this_or_next|eq, ":var_2", "spr_earth_sally_gate_left"),
        (this_or_next|eq, ":var_2", "spr_earth_sally_gate_right"),
        (this_or_next|eq, ":var_2", "spr_viking_keep_destroy_sally_door_left"),
        (this_or_next|eq, ":var_2", "spr_viking_keep_destroy_sally_door_right"),
        (this_or_next|eq, ":var_2", "spr_castle_f_door_a"),
        (this_or_next|eq, ":var_2", "spr_siege_ladder_move_6m"),
        (this_or_next|eq, ":var_2", "spr_siege_ladder_move_8m"),
        (this_or_next|eq, ":var_2", "spr_siege_ladder_move_10m"),
        (this_or_next|eq, ":var_2", "spr_siege_ladder_move_12m"),
        (eq, ":var_2", "spr_siege_ladder_move_14m"),
        (assign, ":var_8", ":var_2"),
    (try_end),
    (assign, ":var_9", -1),
    (prop_instance_get_position, pos0, ":var_0"),
    (scene_prop_get_num_instances, ":var_10", ":var_8"),
    (try_for_range, ":var_11", 0, ":var_10"),
        (scene_prop_get_instance, ":var_12", ":var_8", ":var_11"),
        (prop_instance_get_position, pos1, ":var_12"),
        (get_sq_distance_between_positions, ":var_13", pos0, pos1),
        (this_or_next|eq, ":var_9", -1),
        (neg|ge, ":var_13", ":var_9"),
        (assign, ":var_9", ":var_13"),
        (assign, ":var_14", ":var_12"),
    (try_end),
    (try_begin),
        (ge, ":var_0", 0),
        (ge, ":var_9", 0),
        (try_begin),
            (eq, ":var_8", "spr_portcullis"),
            (scene_prop_get_slot, ":var_6", ":var_0", 1),
            (try_begin),
                (eq, ":var_6", 0),
                (scene_prop_enable_after_time, ":var_0", 400),
                (try_begin),
                    (this_or_next|multiplayer_is_server),
                    (neg|game_in_multiplayer_mode),
                    (prop_instance_get_position, pos0, ":var_14"),
                    (position_move_z, pos0, 375),
                    (prop_instance_animate_to_position, ":var_14", 0, 400),
                (try_end),
                (scene_prop_set_slot, ":var_0", 1, 1),
                (try_begin),
                    (eq, ":var_2", "spr_winch_b"),
                    (this_or_next|multiplayer_is_server),
                    (neg|game_in_multiplayer_mode),
                    (prop_instance_get_position, pos1, ":var_0"),
                    (prop_instance_rotate_to_position, ":var_0", 1, 400, 72000),
                (try_end),
            (else_try),
                (scene_prop_enable_after_time, ":var_0", 400),
                (try_begin),
                    (this_or_next|multiplayer_is_server),
                    (neg|game_in_multiplayer_mode),
                    (prop_instance_get_position, pos0, ":var_14"),
                    (position_move_z, pos0, -375),
                    (prop_instance_animate_to_position, ":var_14", 0, 400),
                (try_end),
                (scene_prop_set_slot, ":var_0", 1, 0),
                (try_begin),
                    (eq, ":var_2", "spr_winch_b"),
                    (this_or_next|multiplayer_is_server),
                    (neg|game_in_multiplayer_mode),
                    (prop_instance_get_position, pos1, ":var_0"),
                    (prop_instance_rotate_to_position, ":var_0", 1, 400, -72000),
                (try_end),
            (try_end),
        (else_try),
            (this_or_next|eq, ":var_8", "spr_siege_ladder_move_6m"),
            (this_or_next|eq, ":var_8", "spr_siege_ladder_move_8m"),
            (this_or_next|eq, ":var_8", "spr_siege_ladder_move_10m"),
            (this_or_next|eq, ":var_8", "spr_siege_ladder_move_12m"),
            (eq, ":var_8", "spr_siege_ladder_move_14m"),
            (try_begin),
                (eq, ":var_8", "spr_siege_ladder_move_6m"),
                (assign, ":var_15", 120),
                (assign, ":var_16", 240),
            (else_try),
                (eq, ":var_8", "spr_siege_ladder_move_8m"),
                (assign, ":var_15", 140),
                (assign, ":var_16", 280),
            (else_try),
                (eq, ":var_8", "spr_siege_ladder_move_10m"),
                (assign, ":var_15", 160),
                (assign, ":var_16", 320),
            (else_try),
                (eq, ":var_8", "spr_siege_ladder_move_12m"),
                (assign, ":var_15", 190),
                (assign, ":var_16", 360),
            (else_try),
                (eq, ":var_8", "spr_siege_ladder_move_14m"),
                (assign, ":var_15", 230),
                (assign, ":var_16", 400),
            (try_end),
            (scene_prop_get_slot, ":var_6", ":var_0", 1),
            (try_begin),
                (scene_prop_enable_after_time, ":var_14", ":var_16"),
                (eq, ":var_6", 0),
                (prop_instance_get_starting_position, pos0, ":var_14"),
                (prop_instance_enable_physics, ":var_14", 0),
                (prop_instance_animate_to_position, ":var_14", 0, 300),
                (scene_prop_set_slot, ":var_14", 1, 1),
            (else_try),
                (scene_prop_enable_after_time, ":var_14", ":var_15"),
                (prop_instance_get_position, pos0, ":var_0"),
                (assign, ":var_9", -1),
                (try_for_range, ":var_17", 100, 110),
                    (entry_point_get_position, pos1, ":var_17"),
                    (get_sq_distance_between_positions, ":var_13", pos0, pos1),
                    (this_or_next|eq, ":var_9", -1),
                    (neg|ge, ":var_13", ":var_9"),
                    (assign, ":var_9", ":var_13"),
                    (assign, ":var_18", ":var_17"),
                (try_end),
                (try_begin),
                    (ge, ":var_9", 0),
                    (neg|ge, ":var_9", 22500),
                    (entry_point_get_position, pos1, ":var_18"),
                    (position_rotate_x, pos1, -90),
                    (scene_prop_set_slot, ":var_14", 2, 0),
                    (prop_instance_enable_physics, ":var_14", 0),
                    (prop_instance_animate_to_position, ":var_14", 1, 130),
                (try_end),
                (scene_prop_set_slot, ":var_14", 1, 0),
            (try_end),
        (else_try),
            (this_or_next|eq, ":var_8", "spr_door_destructible"),
            (this_or_next|eq, ":var_8", "spr_castle_f_door_b"),
            (this_or_next|eq, ":var_2", "spr_castle_e_sally_door_a"),
            (this_or_next|eq, ":var_2", "spr_castle_f_sally_door_a"),
            (this_or_next|eq, ":var_2", "spr_earth_sally_gate_left"),
            (this_or_next|eq, ":var_2", "spr_earth_sally_gate_right"),
            (this_or_next|eq, ":var_2", "spr_viking_keep_destroy_sally_door_left"),
            (this_or_next|eq, ":var_2", "spr_viking_keep_destroy_sally_door_right"),
            (eq, ":var_2", "spr_castle_f_door_a"),
            (assign, ":var_14", ":var_0"),
            (scene_prop_get_slot, ":var_6", ":var_14", 1),
            (try_begin),
                (eq, ":var_6", 0),
                (prop_instance_get_starting_position, pos0, ":var_14"),
                (scene_prop_enable_after_time, ":var_14", 100),
                (try_begin),
                    (neg|eq, ":var_2", "spr_viking_keep_destroy_sally_door_left"),
                    (neg|eq, ":var_2", "spr_earth_sally_gate_left"),
                    (position_rotate_z, pos0, -85),
                (else_try),
                    (position_rotate_z, pos0, 85),
                (try_end),
                (prop_instance_animate_to_position, ":var_14", 0, 100),
                (scene_prop_set_slot, ":var_14", 1, 1),
            (else_try),
                (prop_instance_get_starting_position, pos0, ":var_14"),
                (scene_prop_enable_after_time, ":var_14", 100),
                (prop_instance_animate_to_position, ":var_14", 0, 100),
                (scene_prop_set_slot, ":var_14", 1, 0),
            (try_end),
        (try_end),
    (try_end),

]),

("determine_team_flags",
[
    (store_script_param, ":var_0", 1),
    (try_begin),
        (eq, "$g_multiplayer_game_type", 4),
        (try_begin),
            (eq, ":var_0", 0),
            (team_get_faction, ":var_1", 0),
            (try_begin),
                (eq, ":var_1", "fac_kingdom_1"),
                (assign, "$team_1_flag_scene_prop", "spr_ctf_flag_kingdom_1"),
            (else_try),
                (eq, ":var_1", "fac_kingdom_2"),
                (assign, "$team_1_flag_scene_prop", "spr_ctf_flag_kingdom_2"),
            (else_try),
                (eq, ":var_1", "fac_kingdom_3"),
                (assign, "$team_1_flag_scene_prop", "spr_ctf_flag_kingdom_3"),
            (else_try),
                (eq, ":var_1", "fac_kingdom_4"),
                (assign, "$team_1_flag_scene_prop", "spr_ctf_flag_kingdom_4"),
            (else_try),
                (eq, ":var_1", "fac_kingdom_5"),
                (assign, "$team_1_flag_scene_prop", "spr_ctf_flag_kingdom_5"),
            (else_try),
                (eq, ":var_1", "fac_kingdom_6"),
                (assign, "$team_1_flag_scene_prop", "spr_ctf_flag_kingdom_6"),
            (try_end),
        (else_try),
            (team_get_faction, ":var_1", 1),
            (try_begin),
                (eq, ":var_1", "fac_kingdom_1"),
                (assign, "$team_2_flag_scene_prop", "spr_ctf_flag_kingdom_1"),
            (else_try),
                (eq, ":var_1", "fac_kingdom_2"),
                (assign, "$team_2_flag_scene_prop", "spr_ctf_flag_kingdom_2"),
            (else_try),
                (eq, ":var_1", "fac_kingdom_3"),
                (assign, "$team_2_flag_scene_prop", "spr_ctf_flag_kingdom_3"),
            (else_try),
                (eq, ":var_1", "fac_kingdom_4"),
                (assign, "$team_2_flag_scene_prop", "spr_ctf_flag_kingdom_4"),
            (else_try),
                (eq, ":var_1", "fac_kingdom_5"),
                (assign, "$team_2_flag_scene_prop", "spr_ctf_flag_kingdom_5"),
            (else_try),
                (eq, ":var_1", "fac_kingdom_6"),
                (assign, "$team_2_flag_scene_prop", "spr_ctf_flag_kingdom_6"),
            (try_end),
            (try_begin),
                (eq, "$team_1_flag_scene_prop", "$team_2_flag_scene_prop"),
                (assign, "$team_2_flag_scene_prop", "spr_ctf_flag_kingdom_7"),
            (try_end),
        (try_end),
    (else_try),
        (try_begin),
            (eq, ":var_0", 0),
            (team_get_faction, ":var_1", 0),
            (try_begin),
                (eq, ":var_1", "fac_kingdom_1"),
                (assign, "$team_1_flag_scene_prop", "spr_headquarters_flag_swadian"),
            (else_try),
                (eq, ":var_1", "fac_kingdom_2"),
                (assign, "$team_1_flag_scene_prop", "spr_headquarters_flag_vaegir"),
            (else_try),
                (eq, ":var_1", "fac_kingdom_3"),
                (assign, "$team_1_flag_scene_prop", "spr_headquarters_flag_khergit"),
            (else_try),
                (eq, ":var_1", "fac_kingdom_4"),
                (assign, "$team_1_flag_scene_prop", "spr_headquarters_flag_nord"),
            (else_try),
                (eq, ":var_1", "fac_kingdom_5"),
                (assign, "$team_1_flag_scene_prop", "spr_headquarters_flag_rhodok"),
            (else_try),
                (eq, ":var_1", "fac_kingdom_6"),
                (assign, "$team_1_flag_scene_prop", "spr_headquarters_flag_sarranid"),
            (try_end),
        (else_try),
            (team_get_faction, ":var_1", 1),
            (try_begin),
                (eq, ":var_1", "fac_kingdom_1"),
                (assign, "$team_2_flag_scene_prop", "spr_headquarters_flag_swadian"),
            (else_try),
                (eq, ":var_1", "fac_kingdom_2"),
                (assign, "$team_2_flag_scene_prop", "spr_headquarters_flag_vaegir"),
            (else_try),
                (eq, ":var_1", "fac_kingdom_3"),
                (assign, "$team_2_flag_scene_prop", "spr_headquarters_flag_khergit"),
            (else_try),
                (eq, ":var_1", "fac_kingdom_4"),
                (assign, "$team_2_flag_scene_prop", "spr_headquarters_flag_nord"),
            (else_try),
                (eq, ":var_1", "fac_kingdom_5"),
                (assign, "$team_2_flag_scene_prop", "spr_headquarters_flag_rhodok"),
            (else_try),
                (eq, ":var_1", "fac_kingdom_6"),
                (assign, "$team_2_flag_scene_prop", "spr_headquarters_flag_sarranid"),
            (try_end),
            (try_begin),
                (eq, "$team_1_flag_scene_prop", "$team_2_flag_scene_prop"),
                (assign, "$team_2_flag_scene_prop", "spr_headquarters_flag_rebel"),
            (try_end),
        (try_end),
    (try_end),

]),

("calculate_flag_move_time",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (try_begin),
        (eq, ":var_0", 0),
        (store_mul, reg0, ":var_1", 2500),
    (else_try),
        (eq, ":var_0", 1),
        (store_mul, reg0, ":var_1", 500),
    (else_try),
        (eq, ":var_0", 2),
        (store_mul, reg0, ":var_1", 300),
    (else_try),
        (eq, ":var_0", 3),
        (store_mul, reg0, ":var_1", 195),
    (else_try),
        (eq, ":var_0", 4),
        (store_mul, reg0, ":var_1", 137),
    (else_try),
        (eq, ":var_0", 5),
        (store_mul, reg0, ":var_1", 102),
    (else_try),
        (eq, ":var_0", 6),
        (store_mul, reg0, ":var_1", 82),
    (else_try),
        (eq, ":var_0", 7),
        (store_mul, reg0, ":var_1", 66),
    (else_try),
        (eq, ":var_0", 8),
        (store_mul, reg0, ":var_1", 59),
    (else_try),
        (store_mul, reg0, ":var_1", 56),
    (try_end),
    (assign, ":var_2", 0),
    (get_max_players, ":var_3"),
    (try_for_range, ":var_4", 0, ":var_3"),
        (player_is_active, ":var_4"),
        (val_add, ":var_2", 1),
    (try_end),
    (try_begin),
        (neg|ge, ":var_2", 10),
        (val_mul, reg0, 50),
    (else_try),
        (neg|ge, ":var_2", 35),
        (store_sub, ":var_5", 35, ":var_2"),
        (val_mul, ":var_5", 2),
        (store_sub, ":var_5", 100, ":var_5"),
        (val_mul, reg0, ":var_5"),
    (else_try),
        (val_mul, reg0, 100),
    (try_end),
    (try_begin),
        (eq, "$g_multiplayer_game_type", 6),
        (val_mul, reg0, 2),
    (try_end),
    (val_div, reg0, 10000),

]),

("move_death_mode_flags_down",
[
    (try_begin),
        (scene_prop_get_instance, ":var_0", "spr_headquarters_pole_code_only", 0),
        (prop_instance_get_position, pos0, ":var_0"),
        (position_move_z, pos0, -2000),
        (prop_instance_set_position, ":var_0", pos0),
    (try_end),
    (try_begin),
        (scene_prop_get_instance, ":var_1", "spr_headquarters_pole_code_only", 1),
        (prop_instance_get_position, pos1, ":var_1"),
        (position_move_z, pos1, -2000),
        (prop_instance_set_position, ":var_1", pos1),
    (try_end),
    (try_begin),
        (scene_prop_get_instance, ":var_0", "spr_headquarters_pole_code_only", 0),
        (prop_instance_get_position, pos0, ":var_0"),
        (scene_prop_get_instance, ":var_2", "$team_1_flag_scene_prop", 0),
        (prop_instance_stop_animating, ":var_2"),
        (position_move_z, pos0, 100),
        (prop_instance_set_position, ":var_2", pos0),
    (try_end),
    (try_begin),
        (scene_prop_get_instance, ":var_1", "spr_headquarters_pole_code_only", 1),
        (prop_instance_get_position, pos1, ":var_1"),
        (scene_prop_get_instance, ":var_3", "$team_2_flag_scene_prop", 0),
        (prop_instance_stop_animating, ":var_3"),
        (position_move_z, pos1, 100),
        (prop_instance_set_position, ":var_3", pos1),
    (try_end),

]),

("move_flag",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (try_begin),
        (multiplayer_is_server),
        (try_begin),
            (eq, ":var_1", 0),
            (prop_instance_stop_animating, ":var_0"),
        (else_try),
            (prop_instance_animate_to_position, ":var_0", 0, ":var_1"),
        (try_end),
    (try_end),

]),

("move_headquarters_flags",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (store_add, ":var_3", 146, ":var_0"),
    (troop_get_slot, ":var_4", "trp_multiplayer_data", ":var_3"),
    (scene_prop_get_num_instances, ":var_5", "spr_headquarters_flag_gray_code_only"),
    (try_begin),
        (assign, ":var_6", 0),
        (neg|ge, ":var_0", ":var_5"),
        (scene_prop_get_instance, ":var_7", "spr_headquarters_flag_gray_code_only", ":var_0"),
        (scene_prop_get_visibility, ":var_6", ":var_7"),
    (try_end),
    (try_begin),
        (eq, ":var_6", 1),
        (assign, ":var_8", 0),
        (assign, ":var_9", ":var_7"),
    (else_try),
        (scene_prop_get_num_instances, ":var_5", "$team_1_flag_scene_prop"),
        (try_begin),
            (assign, ":var_6", 0),
            (neg|ge, ":var_0", ":var_5"),
            (scene_prop_get_instance, ":var_7", "$team_1_flag_scene_prop", ":var_0"),
            (scene_prop_get_visibility, ":var_6", ":var_7"),
        (try_end),
        (try_begin),
            (eq, ":var_6", 1),
            (assign, ":var_8", 1),
            (assign, ":var_9", ":var_7"),
        (else_try),
            (scene_prop_get_num_instances, ":var_5", "$team_2_flag_scene_prop"),
            (try_begin),
                (assign, ":var_6", 0),
                (neg|ge, ":var_0", ":var_5"),
                (scene_prop_get_instance, ":var_7", "$team_2_flag_scene_prop", ":var_0"),
                (scene_prop_get_visibility, ":var_6", ":var_7"),
            (try_end),
            (try_begin),
                (eq, ":var_6", 1),
                (assign, ":var_8", 2),
                (assign, ":var_9", ":var_7"),
            (try_end),
        (try_end),
    (try_end),
    (try_begin),
        (scene_prop_get_instance, ":var_10", "spr_headquarters_pole_code_only", ":var_0"),
    (try_end),
    (try_begin),
        (eq, ":var_8", ":var_4"),
        (try_begin),
            (ge, ":var_1", 1),
            (ge, ":var_2", 1),
            (assign, ":var_11", 0),
        (else_try),
            (eq, ":var_1", 0),
            (eq, ":var_2", 0),
            (assign, ":var_11", 1),
        (else_try),
            (try_begin),
                (ge, ":var_1", 1),
                (eq, ":var_2", 0),
                (eq, ":var_4", 1),
                (assign, ":var_11", 1),
            (else_try),
                (eq, ":var_1", 0),
                (ge, ":var_2", 1),
                (eq, ":var_4", 2),
                (assign, ":var_11", 1),
            (else_try),
                (assign, ":var_11", -1),
            (try_end),
        (try_end),
    (else_try),
        (try_begin),
            (ge, ":var_1", 1),
            (ge, ":var_2", 1),
            (assign, ":var_11", 0),
        (else_try),
            (eq, ":var_1", 0),
            (eq, ":var_2", 0),
            (assign, ":var_11", -1),
        (else_try),
            (try_begin),
                (ge, ":var_1", 1),
                (eq, ":var_2", 0),
                (try_begin),
                    (eq, ":var_8", 1),
                    (assign, ":var_11", 1),
                (else_try),
                    (neg|eq, ":var_4", 1),
                    (assign, ":var_11", -1),
                (try_end),
            (else_try),
                (eq, ":var_1", 0),
                (ge, ":var_2", 1),
                (try_begin),
                    (eq, ":var_8", 2),
                    (assign, ":var_11", 1),
                (else_try),
                    (neg|eq, ":var_4", 2),
                    (assign, ":var_11", -1),
                (try_end),
            (try_end),
        (try_end),
    (try_end),
    (store_add, ":var_12", ":var_1", ":var_2"),
    (try_begin),
        (eq, ":var_11", 0),
        (assign, reg0, 0),
    (else_try),
        (eq, ":var_11", 1),
        (prop_instance_get_position, pos1, ":var_9"),
        (prop_instance_get_position, pos0, ":var_10"),
        (position_move_z, pos0, 900),
        (get_distance_between_positions, ":var_13", pos0, pos1),
        (call_script, "script_calculate_flag_move_time", ":var_12", ":var_13"),
    (else_try),
        (eq, ":var_11", -1),
        (prop_instance_get_position, pos1, ":var_9"),
        (prop_instance_get_position, pos0, ":var_10"),
        (get_distance_between_positions, ":var_13", pos0, pos1),
        (call_script, "script_calculate_flag_move_time", ":var_12", ":var_13"),
    (try_end),
    (call_script, "script_move_flag", ":var_9", reg0),

]),

("set_num_agents_around_flag",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_div, ":var_2", ":var_1", 100),
    (store_mod, ":var_3", ":var_1", 100),
    (store_add, ":var_4", 156, ":var_0"),
    (troop_set_slot, "trp_multiplayer_data", ":var_4", ":var_1"),
    (call_script, "script_move_headquarters_flags", ":var_0", ":var_2", ":var_3"),

]),

("change_flag_owner",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (try_begin),
        (neg|ge, ":var_1", 0),
        (val_add, ":var_1", 1),
        (val_mul, ":var_1", -1),
    (try_end),
    (store_div, ":var_2", ":var_1", 100),
    (store_mod, ":var_3", ":var_1", 100),
    (store_add, ":var_4", 146, ":var_0"),
    (troop_get_slot, ":var_5", "trp_multiplayer_data", ":var_4"),
    (store_add, ":var_4", 146, ":var_0"),
    (troop_set_slot, "trp_multiplayer_data", ":var_4", ":var_2"),
    (try_begin),
        (multiplayer_is_server),
        (scene_prop_get_instance, ":var_6", "spr_headquarters_pole_code_only", ":var_0"),
        (try_begin),
            (eq, ":var_2", 0),
            (neg|eq, ":var_5", -1),
            (assign, ":var_7", 1),
            (try_begin),
                (multiplayer_is_server),
                (eq, "$g_placing_initial_flags", 1),
                (assign, ":var_7", 0),
            (try_end),
            (eq, ":var_7", 1),
            (prop_instance_get_position, pos0, ":var_6"),
            (position_move_z, pos0, 200),
        (else_try),
            (prop_instance_get_position, pos0, ":var_6"),
            (position_move_z, pos0, 900),
        (try_end),
        (scene_prop_get_instance, ":var_8", "$team_1_flag_scene_prop", ":var_0"),
        (prop_instance_stop_animating, ":var_8"),
        (prop_instance_set_position, ":var_8", pos0),
        (scene_prop_get_instance, ":var_8", "$team_2_flag_scene_prop", ":var_0"),
        (prop_instance_stop_animating, ":var_8"),
        (prop_instance_set_position, ":var_8", pos0),
        (scene_prop_get_instance, ":var_8", "spr_headquarters_flag_gray_code_only", ":var_0"),
        (prop_instance_stop_animating, ":var_8"),
        (prop_instance_set_position, ":var_8", pos0),
    (try_end),
    (try_begin),
        (eq, ":var_3", 0),
        (scene_prop_get_instance, ":var_8", "$team_1_flag_scene_prop", ":var_0"),
        (scene_prop_set_visibility, ":var_8", 0),
        (scene_prop_get_instance, ":var_8", "$team_2_flag_scene_prop", ":var_0"),
        (scene_prop_set_visibility, ":var_8", 0),
        (scene_prop_get_instance, ":var_8", "spr_headquarters_flag_gray_code_only", ":var_0"),
        (scene_prop_set_visibility, ":var_8", 1),
    (else_try),
        (eq, ":var_3", 1),
        (scene_prop_get_instance, ":var_8", "$team_1_flag_scene_prop", ":var_0"),
        (scene_prop_set_visibility, ":var_8", 1),
        (scene_prop_get_instance, ":var_8", "$team_2_flag_scene_prop", ":var_0"),
        (scene_prop_set_visibility, ":var_8", 0),
        (scene_prop_get_instance, ":var_8", "spr_headquarters_flag_gray_code_only", ":var_0"),
        (scene_prop_set_visibility, ":var_8", 0),
    (else_try),
        (eq, ":var_3", 2),
        (scene_prop_get_instance, ":var_8", "$team_1_flag_scene_prop", ":var_0"),
        (scene_prop_set_visibility, ":var_8", 0),
        (scene_prop_get_instance, ":var_8", "$team_2_flag_scene_prop", ":var_0"),
        (scene_prop_set_visibility, ":var_8", 1),
        (scene_prop_get_instance, ":var_8", "spr_headquarters_flag_gray_code_only", ":var_0"),
        (scene_prop_set_visibility, ":var_8", 0),
    (try_end),
    (store_add, ":var_9", 156, ":var_0"),
    (troop_get_slot, ":var_10", "trp_multiplayer_data", ":var_9"),
    (store_div, ":var_11", ":var_10", 100),
    (store_mod, ":var_12", ":var_10", 100),
    (call_script, "script_move_headquarters_flags", ":var_0", ":var_11", ":var_12"),

]),

("move_object_to_nearest_entry_point",
[
    (store_script_param, ":var_0", 1),
    (scene_prop_get_num_instances, ":var_1", ":var_0"),
    (try_for_range, ":var_2", 0, ":var_1"),
        (scene_prop_get_instance, ":var_3", ":var_0", ":var_2"),
        (prop_instance_get_position, pos0, ":var_3"),
        (assign, ":var_4", -1),
        (try_for_range, ":var_5", 100, 110),
            (entry_point_get_position, pos1, ":var_5"),
            (get_sq_distance_between_positions, ":var_6", pos0, pos1),
            (this_or_next|eq, ":var_4", -1),
            (neg|ge, ":var_6", ":var_4"),
            (assign, ":var_4", ":var_6"),
            (assign, ":var_7", ":var_5"),
        (try_end),
        (try_begin),
            (ge, ":var_4", 0),
            (neg|ge, ":var_4", 22500),
            (entry_point_get_position, pos1, ":var_7"),
            (position_rotate_x, pos1, -90),
            (prop_instance_animate_to_position, ":var_3", 1, 1),
        (try_end),
    (try_end),

]),

("multiplayer_server_on_agent_spawn_common",
[
    (store_script_param, ":var_0", 1),
    (agent_set_slot, ":var_0", slot_agent_in_duel_with, -1),
    (try_begin),
        (agent_is_non_player, ":var_0"),
        (assign, "$g_multiplayer_ready_for_spawning_agent", 1),
    (try_end),

]),

("multiplayer_server_player_joined_common",
[
    (store_script_param, ":var_0", 1),
    (try_begin),
        (this_or_next|player_is_active, ":var_0"),
        (eq, ":var_0", 0),
        (call_script, "script_multiplayer_init_player_slots", ":var_0"),
        (store_mission_timer_a, ":var_1"),
        (player_set_slot, ":var_0", 21, ":var_1"),
        (player_set_slot, ":var_0", 24, 1),
        (player_set_slot, ":var_0", 32, 0),
        (player_set_slot, ":var_0", 33, 0),
        (try_begin),
            (multiplayer_is_server),
            (assign, ":var_2", 1000),
            (val_mul, ":var_2", "$g_multiplayer_initial_gold_multiplier"),
            (val_div, ":var_2", 100),
            (player_set_gold, ":var_0", ":var_2"),
            (call_script, "script_multiplayer_send_initial_information", ":var_0"),
        (try_end),
    (try_end),

]),

("multiplayer_server_before_mission_start_common",
[
    (try_begin),
        (scene_allows_mounted_units),
        (assign, "$g_horses_are_avaliable", 1),
    (else_try),
        (assign, "$g_horses_are_avaliable", 0),
    (try_end),
    (scene_set_day_time, 15),
    (assign, "$g_multiplayer_mission_end_screen", 0),
    (get_max_players, ":var_0"),
    (try_for_range, ":var_1", 0, ":var_0"),
        (player_is_active, ":var_1"),
        (call_script, "script_multiplayer_init_player_slots", ":var_1"),
        (assign, ":var_2", 1000),
        (val_mul, ":var_2", "$g_multiplayer_initial_gold_multiplier"),
        (val_div, ":var_2", 100),
        (player_set_gold, ":var_1", ":var_2"),
        (player_set_slot, ":var_1", 24, 1),
    (try_end),

]),

("multiplayer_server_on_agent_killed_or_wounded_common",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (call_script, "script_multiplayer_event_agent_killed_or_wounded", ":var_0", ":var_1"),
    (try_begin),
        (multiplayer_is_server),
        (try_begin),
            (neg|ge, ":var_1", 0),
            (ge, ":var_0", 0),
            (neg|agent_is_non_player, ":var_0"),
            (agent_get_player_id, ":var_2", ":var_0"),
            (player_is_active, ":var_2"),
            (player_get_score, ":var_3", ":var_2"),
            (val_add, ":var_3", -1),
            (player_set_score, ":var_2", ":var_3"),
        (else_try),
            (ge, ":var_1", 0),
            (ge, ":var_0", 0),
            (agent_get_team, ":var_4", ":var_1"),
            (agent_get_team, ":var_5", ":var_0"),
            (eq, ":var_4", ":var_5"),
            (neg|agent_is_non_player, ":var_1"),
            (agent_get_player_id, ":var_6", ":var_1"),
            (player_is_active, ":var_6"),
            (player_get_score, ":var_7", ":var_6"),
            (val_add, ":var_7", -1),
            (player_set_score, ":var_6", ":var_7"),
        (else_try),
            (ge, ":var_1", 0),
            (ge, ":var_0", 0),
            (agent_is_human, ":var_0"),
            (agent_is_human, ":var_1"),
            (try_begin),
                (eq, "$g_multiplayer_game_type", 2),
                (try_begin),
                    (eq, "$g_battle_death_mode_started", 1),
                    (neg|eq, ":var_0", ":var_1"),
                    (call_script, "script_calculate_new_death_waiting_time_at_death_mod"),
                (try_end),
            (try_end),
            (try_begin),
                (this_or_next|eq, "$g_multiplayer_game_type", 2),
                (eq, "$g_multiplayer_game_type", 3),
                (agent_get_player_id, ":var_8", ":var_0"),
                (try_begin),
                    (ge, ":var_8", 0),
                    (player_is_active, ":var_8"),
                    (neg|agent_is_non_player, ":var_0"),
                    (try_for_agents, ":var_9"),
                        (agent_is_non_player, ":var_9"),
                        (agent_is_human, ":var_9"),
                        (agent_is_alive, ":var_9"),
                        (agent_get_group, ":var_10", ":var_9"),
                        (try_begin),
                            (eq, ":var_8", ":var_10"),
                            (agent_set_group, ":var_9", -1),
                        (try_end),
                    (try_end),
                (try_end),
            (try_end),
            (neg|agent_is_non_player, ":var_1"),
            (agent_get_player_id, ":var_6", ":var_1"),
            (player_is_active, ":var_6"),
            (player_get_score, ":var_7", ":var_6"),
            (agent_get_team, ":var_11", ":var_1"),
            (agent_get_team, ":var_12", ":var_0"),
            (try_begin),
                (neg|eq, ":var_11", ":var_12"),
                (val_add, ":var_7", 1),
            (else_try),
                (val_add, ":var_7", -1),
            (try_end),
            (player_set_score, ":var_6", ":var_7"),
        (try_end),
    (try_end),
    (call_script, "script_add_kill_death_counts", ":var_1", ":var_0"),
    (call_script, "script_money_management_after_agent_death", ":var_1", ":var_0"),

]),

("multiplayer_close_gate_if_it_is_open",
[
    (scene_prop_get_num_instances, ":var_0", "spr_winch_b"),
    (try_for_range, ":var_1", 0, ":var_0"),
        (scene_prop_get_instance, ":var_2", "spr_winch_b", ":var_1"),
        (scene_prop_slot_eq, ":var_2", 1, 1),
        (scene_prop_get_instance, ":var_3", "spr_portcullis", ":var_1"),
        (prop_instance_get_starting_position, pos0, ":var_3"),
        (prop_instance_animate_to_position, ":var_3", 0, 1),
    (try_end),

]),

("multiplayer_move_moveable_objects_initial_positions",
[
    (call_script, "script_move_object_to_nearest_entry_point", "spr_siege_ladder_move_6m"),
    (call_script, "script_move_object_to_nearest_entry_point", "spr_siege_ladder_move_8m"),
    (call_script, "script_move_object_to_nearest_entry_point", "spr_siege_ladder_move_10m"),
    (call_script, "script_move_object_to_nearest_entry_point", "spr_siege_ladder_move_12m"),
    (call_script, "script_move_object_to_nearest_entry_point", "spr_siege_ladder_move_14m"),

]),

("move_belfries_to_their_first_entry_point",
[
    (store_script_param, ":var_0", 1),
    (set_fixed_point_multiplier, 100),
    (scene_prop_get_num_instances, ":var_1", ":var_0"),
    (try_for_range, ":var_2", 0, ":var_1"),
        (scene_prop_get_instance, ":var_3", ":var_0", ":var_2"),
        (prop_instance_get_position, pos0, ":var_3"),
        (try_begin),
            (eq, ":var_0", "spr_belfry_a"),
            (scene_prop_get_instance, ":var_4", "spr_belfry_platform_a", ":var_2"),
            (scene_prop_get_instance, ":var_5", "spr_belfry_platform_b", ":var_2"),
        (else_try),
            (scene_prop_get_instance, ":var_4", "spr_belfry_b_platform_a", ":var_2"),
        (try_end),
        (store_mul, ":var_6", ":var_2", 3),
        (try_begin),
            (eq, ":var_0", "spr_belfry_b"),
            (scene_prop_get_num_instances, ":var_7", "spr_belfry_a"),
            (store_mul, ":var_8", ":var_7", 3),
            (val_add, ":var_6", ":var_8"),
        (try_end),
        (scene_prop_get_instance, ":var_9", "spr_belfry_wheel", ":var_6"),
        (val_add, ":var_6", 1),
        (scene_prop_get_instance, ":var_10", "spr_belfry_wheel", ":var_6"),
        (val_add, ":var_6", 1),
        (scene_prop_get_instance, ":var_11", "spr_belfry_wheel", ":var_6"),
        (store_add, ":var_12", 11, ":var_2"),
        (try_begin),
            (eq, ":var_0", "spr_belfry_b"),
            (scene_prop_get_num_instances, ":var_7", "spr_belfry_a"),
            (val_add, ":var_12", ":var_7"),
        (try_end),
        (val_mul, ":var_12", 10),
        (entry_point_get_position, pos1, ":var_12"),
        (init_position, pos9),
        (position_set_y, pos9, -500),
        (position_set_x, pos9, -300),
        (position_transform_position_to_parent, pos10, pos1, pos9),
        (position_get_distance_to_terrain, ":var_13", pos10),
        (init_position, pos9),
        (position_set_y, pos9, -500),
        (position_set_x, pos9, 300),
        (position_transform_position_to_parent, pos10, pos1, pos9),
        (position_get_distance_to_terrain, ":var_14", pos10),
        (store_add, ":var_15", ":var_13", ":var_14"),
        (val_mul, ":var_15", 100),
        (store_div, ":var_16", ":var_15", 24),
        (init_position, pos20),
        (position_rotate_x_floating, pos20, ":var_16"),
        (position_transform_position_to_parent, pos23, pos1, pos20),
        (init_position, pos9),
        (position_set_x, pos9, -300),
        (position_transform_position_to_parent, pos10, pos1, pos9),
        (position_get_distance_to_terrain, ":var_17", pos10),
        (init_position, pos9),
        (position_set_x, pos9, 300),
        (position_transform_position_to_parent, pos10, pos1, pos9),
        (position_get_distance_to_terrain, ":var_18", pos10),
        (store_sub, ":var_13", ":var_17", ":var_18"),
        (init_position, pos9),
        (position_set_x, pos9, -300),
        (position_set_y, pos9, -500),
        (position_transform_position_to_parent, pos10, pos1, pos9),
        (position_get_distance_to_terrain, ":var_17", pos10),
        (init_position, pos9),
        (position_set_x, pos9, 300),
        (position_set_y, pos9, -500),
        (position_transform_position_to_parent, pos10, pos1, pos9),
        (position_get_distance_to_terrain, ":var_18", pos10),
        (store_sub, ":var_14", ":var_17", ":var_18"),
        (store_add, ":var_15", ":var_13", ":var_14"),
        (val_mul, ":var_15", 100),
        (store_div, ":var_16", ":var_15", 24),
        (val_mul, ":var_16", -1),
        (init_position, pos20),
        (position_rotate_y_floating, pos20, ":var_16"),
        (position_transform_position_to_parent, pos22, pos23, pos20),
        (copy_position, pos1, pos22),
        (prop_instance_stop_animating, ":var_3"),
        (prop_instance_set_position, ":var_3", pos1),
        (try_begin),
            (eq, ":var_0", "spr_belfry_a"),
            (prop_instance_get_position, pos6, ":var_4"),
            (position_transform_position_to_local, pos7, pos0, pos6),
            (position_transform_position_to_parent, pos8, pos1, pos7),
            (try_begin),
                (neg|scene_prop_slot_eq, ":var_3", 5, 0),
                (init_position, pos20),
                (position_rotate_x, pos20, 90),
                (position_transform_position_to_parent, pos8, pos8, pos20),
            (try_end),
            (prop_instance_stop_animating, ":var_4"),
            (prop_instance_set_position, ":var_4", pos8),
            (prop_instance_get_position, pos6, ":var_5"),
            (position_transform_position_to_local, pos7, pos0, pos6),
            (position_transform_position_to_parent, pos8, pos1, pos7),
            (prop_instance_stop_animating, ":var_5"),
            (prop_instance_set_position, ":var_5", pos8),
        (else_try),
            (prop_instance_get_position, pos6, ":var_4"),
            (position_transform_position_to_local, pos7, pos0, pos6),
            (position_transform_position_to_parent, pos8, pos1, pos7),
            (try_begin),
                (neg|scene_prop_slot_eq, ":var_3", 5, 0),
                (init_position, pos20),
                (position_rotate_x, pos20, 50),
                (position_transform_position_to_parent, pos8, pos8, pos20),
            (try_end),
            (prop_instance_stop_animating, ":var_4"),
            (prop_instance_set_position, ":var_4", pos8),
        (try_end),
        (store_mul, ":var_6", ":var_2", 3),
        (try_begin),
            (eq, ":var_0", "spr_belfry_b"),
            (scene_prop_get_num_instances, ":var_7", "spr_belfry_a"),
            (store_mul, ":var_8", ":var_7", 3),
            (val_add, ":var_6", ":var_8"),
        (try_end),
        (prop_instance_get_position, pos6, ":var_9"),
        (position_transform_position_to_local, pos7, pos0, pos6),
        (position_transform_position_to_parent, pos8, pos1, pos7),
        (prop_instance_stop_animating, ":var_9"),
        (prop_instance_set_position, ":var_9", pos8),
        (prop_instance_get_position, pos6, ":var_10"),
        (position_transform_position_to_local, pos7, pos0, pos6),
        (position_transform_position_to_parent, pos8, pos1, pos7),
        (prop_instance_stop_animating, ":var_10"),
        (prop_instance_set_position, ":var_10", pos8),
        (prop_instance_get_position, pos6, ":var_11"),
        (position_transform_position_to_local, pos7, pos0, pos6),
        (position_transform_position_to_parent, pos8, pos1, pos7),
        (prop_instance_stop_animating, ":var_11"),
        (prop_instance_set_position, ":var_11", pos8),
    (try_end),

]),

("team_set_score",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (team_set_score, ":var_0", ":var_1"),

]),

("player_set_score",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (player_set_score, ":var_0", ":var_1"),

]),

("player_set_kill_count",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (player_set_kill_count, ":var_0", ":var_1"),

]),

("player_set_death_count",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (player_set_death_count, ":var_0", ":var_1"),

]),

("set_attached_scene_prop",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (try_begin),
        (scene_prop_get_instance, ":var_2", "spr_tutorial_flag_red", 0),
        (scene_prop_get_instance, ":var_3", "spr_tutorial_flag_blue", 0),
        (assign, ":var_4", -1),
        (try_begin),
            (ge, ":var_2", 0),
            (eq, ":var_1", ":var_2"),
            (assign, ":var_4", 0),
        (else_try),
            (ge, ":var_3", 0),
            (eq, ":var_1", ":var_3"),
            (assign, ":var_4", 1),
        (try_end),
        (ge, ":var_4", 0),
        (team_set_slot, ":var_4", 0, 1),
    (try_end),
    (agent_set_attached_scene_prop, ":var_0", ":var_1"),
    (agent_set_attached_scene_prop_x, ":var_0", 20),
    (agent_set_attached_scene_prop_z, ":var_0", 50),

]),

("set_team_flag_situation",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (team_set_slot, ":var_0", 0, ":var_1"),

]),

("start_death_mode",
[
    (assign, "$g_multiplayer_message_type", 18),
    (start_presentation, "prsnt_multiplayer_message_1"),

]),

("calculate_new_death_waiting_time_at_death_mod",
[
    (assign, ":var_0", 0),
    (try_begin),
        (try_for_agents, ":var_1"),
            (agent_is_human, ":var_1"),
            (agent_is_alive, ":var_1"),
            (val_add, ":var_0", 1),
        (try_end),
    (try_end),
    (val_add, ":var_0", 15),
    (set_fixed_point_multiplier, 100),
    (store_mul, ":var_0", ":var_0", 100),
    (store_sqrt, ":var_2", ":var_0"),
    (store_div, "$g_battle_waiting_seconds", 18000, ":var_2"),
    (store_mission_timer_a, "$g_death_mode_part_1_start_time"),

]),

("calculate_number_of_targets_destroyed",
[
    (assign, "$g_number_of_targets_destroyed", 0),
    (scene_prop_get_num_instances, ":var_0", "spr_catapult_destructible"),
    (try_for_range, ":var_1", 0, ":var_0"),
        (scene_prop_get_instance, ":var_2", "spr_catapult_destructible", ":var_1"),
        (prop_instance_get_starting_position, pos0, ":var_2"),
        (prop_instance_get_position, pos1, ":var_2"),
        (get_sq_distance_between_positions_in_meters, ":var_3", pos0, pos1),
        (gt, ":var_3", 2),
        (val_add, "$g_number_of_targets_destroyed", 1),
    (try_end),
    (scene_prop_get_num_instances, ":var_0", "spr_trebuchet_destructible"),
    (try_for_range, ":var_1", 0, ":var_0"),
        (scene_prop_get_instance, ":var_2", "spr_trebuchet_destructible", ":var_1"),
        (prop_instance_get_starting_position, pos0, ":var_2"),
        (prop_instance_get_position, pos1, ":var_2"),
        (get_sq_distance_between_positions_in_meters, ":var_3", pos0, pos1),
        (gt, ":var_3", 2),
        (val_add, "$g_number_of_targets_destroyed", 1),
    (try_end),

]),

("initialize_objects",
[
    (assign, ":var_0", 0),
    (get_max_players, ":var_1"),
    (try_for_range, ":var_2", 0, ":var_1"),
        (player_is_active, ":var_2"),
        (val_add, ":var_0", 1),
    (try_end),
    (set_fixed_point_multiplier, 100),
    (val_mul, ":var_0", 100),
    (store_sqrt, ":var_0", ":var_0"),
    (val_sub, ":var_0", 100),
    (val_max, ":var_0", 0),
    (store_mul, ":var_3", ":var_0", 2),
    (store_add, ":var_4", 1200, ":var_3"),
    (store_mul, ":var_5", ":var_4", 15),
    (val_div, ":var_5", 10),
    (store_mul, ":var_6", ":var_4", 18),
    (val_div, ":var_6", 10),
    (store_mul, ":var_7", ":var_6", 2),
    (assign, "$g_number_of_targets_destroyed", 0),
    (scene_prop_get_num_instances, ":var_8", "spr_catapult_destructible"),
    (try_for_range, ":var_9", 0, ":var_8"),
        (scene_prop_get_instance, ":var_10", "spr_catapult_destructible", ":var_9"),
        (prop_instance_get_starting_position, pos0, ":var_10"),
        (prop_instance_stop_animating, ":var_10"),
        (prop_instance_set_position, ":var_10", pos0),
        (prop_instance_enable_physics, ":var_10", 1),
        (scene_prop_set_hit_points, ":var_10", ":var_4"),
    (try_end),
    (scene_prop_get_num_instances, ":var_8", "spr_trebuchet_destructible"),
    (try_for_range, ":var_9", 0, ":var_8"),
        (scene_prop_get_instance, ":var_10", "spr_trebuchet_destructible", ":var_9"),
        (prop_instance_get_starting_position, pos0, ":var_10"),
        (prop_instance_stop_animating, ":var_10"),
        (prop_instance_set_position, ":var_10", pos0),
        (prop_instance_enable_physics, ":var_10", 1),
        (scene_prop_set_hit_points, ":var_10", ":var_5"),
    (try_end),
    (scene_prop_get_num_instances, ":var_8", "spr_castle_e_sally_door_a"),
    (try_for_range, ":var_9", 0, ":var_8"),
        (scene_prop_get_instance, ":var_10", "spr_castle_e_sally_door_a", ":var_9"),
        (prop_instance_get_starting_position, pos0, ":var_10"),
        (prop_instance_stop_animating, ":var_10"),
        (prop_instance_set_position, ":var_10", pos0),
        (prop_instance_enable_physics, ":var_10", 1),
        (scene_prop_set_hit_points, ":var_10", ":var_6"),
    (try_end),
    (scene_prop_get_num_instances, ":var_8", "spr_castle_f_sally_door_a"),
    (try_for_range, ":var_9", 0, ":var_8"),
        (scene_prop_get_instance, ":var_10", "spr_castle_f_sally_door_a", ":var_9"),
        (prop_instance_get_starting_position, pos0, ":var_10"),
        (prop_instance_stop_animating, ":var_10"),
        (prop_instance_set_position, ":var_10", pos0),
        (prop_instance_enable_physics, ":var_10", 1),
        (scene_prop_set_hit_points, ":var_10", ":var_6"),
    (try_end),
    (scene_prop_get_num_instances, ":var_8", "spr_earth_sally_gate_left"),
    (try_for_range, ":var_9", 0, ":var_8"),
        (scene_prop_get_instance, ":var_10", "spr_earth_sally_gate_left", ":var_9"),
        (prop_instance_get_starting_position, pos0, ":var_10"),
        (prop_instance_stop_animating, ":var_10"),
        (prop_instance_set_position, ":var_10", pos0),
        (prop_instance_enable_physics, ":var_10", 1),
        (scene_prop_set_hit_points, ":var_10", ":var_7"),
    (try_end),
    (scene_prop_get_num_instances, ":var_8", "spr_earth_sally_gate_right"),
    (try_for_range, ":var_9", 0, ":var_8"),
        (scene_prop_get_instance, ":var_10", "spr_earth_sally_gate_right", ":var_9"),
        (prop_instance_get_starting_position, pos0, ":var_10"),
        (prop_instance_stop_animating, ":var_10"),
        (prop_instance_set_position, ":var_10", pos0),
        (prop_instance_enable_physics, ":var_10", 1),
        (scene_prop_set_hit_points, ":var_10", ":var_7"),
    (try_end),
    (scene_prop_get_num_instances, ":var_8", "spr_viking_keep_destroy_sally_door_left"),
    (try_for_range, ":var_9", 0, ":var_8"),
        (scene_prop_get_instance, ":var_10", "spr_viking_keep_destroy_sally_door_left", ":var_9"),
        (prop_instance_get_starting_position, pos0, ":var_10"),
        (prop_instance_stop_animating, ":var_10"),
        (prop_instance_set_position, ":var_10", pos0),
        (prop_instance_enable_physics, ":var_10", 1),
        (scene_prop_set_hit_points, ":var_10", ":var_6"),
    (try_end),
    (scene_prop_get_num_instances, ":var_8", "spr_viking_keep_destroy_sally_door_right"),
    (try_for_range, ":var_9", 0, ":var_8"),
        (scene_prop_get_instance, ":var_10", "spr_viking_keep_destroy_sally_door_right", ":var_9"),
        (prop_instance_get_starting_position, pos0, ":var_10"),
        (prop_instance_stop_animating, ":var_10"),
        (prop_instance_set_position, ":var_10", pos0),
        (prop_instance_enable_physics, ":var_10", 1),
        (scene_prop_set_hit_points, ":var_10", ":var_6"),
    (try_end),
    (store_div, ":var_11", ":var_6", 3),
    (scene_prop_get_num_instances, ":var_8", "spr_castle_f_door_a"),
    (try_for_range, ":var_9", 0, ":var_8"),
        (scene_prop_get_instance, ":var_10", "spr_castle_f_door_a", ":var_9"),
        (prop_instance_get_starting_position, pos0, ":var_10"),
        (prop_instance_stop_animating, ":var_10"),
        (prop_instance_set_position, ":var_10", pos0),
        (prop_instance_enable_physics, ":var_10", 1),
        (scene_prop_set_hit_points, ":var_10", ":var_11"),
    (try_end),
    (scene_prop_get_num_instances, ":var_8", "spr_castle_f_door_b"),
    (try_for_range, ":var_9", 0, ":var_8"),
        (scene_prop_get_instance, ":var_10", "spr_castle_f_door_b", ":var_9"),
        (prop_instance_get_starting_position, pos0, ":var_10"),
        (prop_instance_stop_animating, ":var_10"),
        (prop_instance_set_position, ":var_10", pos0),
        (prop_instance_enable_physics, ":var_10", 1),
        (scene_prop_set_hit_points, ":var_10", ":var_11"),
    (try_end),

]),

("initialize_objects_clients",
[
    (assign, ":var_0", 0),
    (get_max_players, ":var_1"),
    (try_for_range, ":var_2", 0, ":var_1"),
        (player_is_active, ":var_2"),
        (val_add, ":var_0", 1),
    (try_end),
    (set_fixed_point_multiplier, 100),
    (val_mul, ":var_0", 100),
    (store_sqrt, ":var_0", ":var_0"),
    (val_sub, ":var_0", 100),
    (val_max, ":var_0", 0),
    (store_mul, ":var_3", ":var_0", 2),
    (store_add, ":var_4", 1200, ":var_3"),
    (store_mul, ":var_5", ":var_4", 15),
    (val_div, ":var_5", 10),
    (store_mul, ":var_6", ":var_4", 18),
    (val_div, ":var_6", 10),
    (store_mul, ":var_7", ":var_6", 2),
    (assign, "$g_number_of_targets_destroyed", 0),
    (scene_prop_get_num_instances, ":var_8", "spr_catapult_destructible"),
    (try_for_range, ":var_9", 0, ":var_8"),
        (scene_prop_get_instance, ":var_10", "spr_catapult_destructible", ":var_9"),
        (prop_instance_enable_physics, ":var_10", 1),
        (scene_prop_set_hit_points, ":var_10", ":var_4"),
    (try_end),
    (scene_prop_get_num_instances, ":var_8", "spr_trebuchet_destructible"),
    (try_for_range, ":var_9", 0, ":var_8"),
        (scene_prop_get_instance, ":var_10", "spr_trebuchet_destructible", ":var_9"),
        (prop_instance_enable_physics, ":var_10", 1),
        (scene_prop_set_hit_points, ":var_10", ":var_5"),
    (try_end),
    (scene_prop_get_num_instances, ":var_8", "spr_castle_e_sally_door_a"),
    (try_for_range, ":var_9", 0, ":var_8"),
        (scene_prop_get_instance, ":var_10", "spr_castle_e_sally_door_a", ":var_9"),
        (prop_instance_enable_physics, ":var_10", 1),
        (scene_prop_set_hit_points, ":var_10", ":var_6"),
    (try_end),
    (scene_prop_get_num_instances, ":var_8", "spr_castle_f_sally_door_a"),
    (try_for_range, ":var_9", 0, ":var_8"),
        (scene_prop_get_instance, ":var_10", "spr_castle_f_sally_door_a", ":var_9"),
        (prop_instance_enable_physics, ":var_10", 1),
        (scene_prop_set_hit_points, ":var_10", ":var_6"),
    (try_end),
    (scene_prop_get_num_instances, ":var_8", "spr_earth_sally_gate_left"),
    (try_for_range, ":var_9", 0, ":var_8"),
        (scene_prop_get_instance, ":var_10", "spr_earth_sally_gate_left", ":var_9"),
        (prop_instance_enable_physics, ":var_10", 1),
        (scene_prop_set_hit_points, ":var_10", ":var_7"),
    (try_end),
    (scene_prop_get_num_instances, ":var_8", "spr_earth_sally_gate_right"),
    (try_for_range, ":var_9", 0, ":var_8"),
        (scene_prop_get_instance, ":var_10", "spr_earth_sally_gate_right", ":var_9"),
        (prop_instance_enable_physics, ":var_10", 1),
        (scene_prop_set_hit_points, ":var_10", ":var_7"),
    (try_end),
    (scene_prop_get_num_instances, ":var_8", "spr_viking_keep_destroy_sally_door_left"),
    (try_for_range, ":var_9", 0, ":var_8"),
        (scene_prop_get_instance, ":var_10", "spr_viking_keep_destroy_sally_door_left", ":var_9"),
        (prop_instance_enable_physics, ":var_10", 1),
        (scene_prop_set_hit_points, ":var_10", ":var_6"),
    (try_end),
    (scene_prop_get_num_instances, ":var_8", "spr_viking_keep_destroy_sally_door_right"),
    (try_for_range, ":var_9", 0, ":var_8"),
        (scene_prop_get_instance, ":var_10", "spr_viking_keep_destroy_sally_door_right", ":var_9"),
        (prop_instance_enable_physics, ":var_10", 1),
        (scene_prop_set_hit_points, ":var_10", ":var_6"),
    (try_end),
    (store_div, ":var_11", ":var_6", 3),
    (scene_prop_get_num_instances, ":var_8", "spr_castle_f_door_a"),
    (try_for_range, ":var_9", 0, ":var_8"),
        (scene_prop_get_instance, ":var_10", "spr_castle_f_door_a", ":var_9"),
        (prop_instance_enable_physics, ":var_10", 1),
        (scene_prop_set_hit_points, ":var_10", ":var_11"),
    (try_end),
    (scene_prop_get_num_instances, ":var_8", "spr_castle_f_door_b"),
    (try_for_range, ":var_9", 0, ":var_8"),
        (scene_prop_get_instance, ":var_10", "spr_castle_f_door_b", ":var_9"),
        (prop_instance_enable_physics, ":var_10", 1),
        (scene_prop_set_hit_points, ":var_10", ":var_11"),
    (try_end),

]),

("show_multiplayer_message",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (assign, "$g_multiplayer_message_type", ":var_0"),
    (try_begin),
        (eq, ":var_0", 12),
        (assign, "$g_multiplayer_message_value_1", ":var_1"),
        (start_presentation, "prsnt_multiplayer_message_1"),
        (try_begin),
            (neg|multiplayer_is_server),
            (assign, "$g_battle_death_mode_started", 0),
        (try_end),
    (else_try),
        (eq, ":var_0", 2),
        (assign, "$g_multiplayer_message_value_1", ":var_1"),
        (start_presentation, "prsnt_multiplayer_message_2"),
        (assign, "$g_team_balance_next_round", 0),
    (else_try),
        (eq, ":var_0", 3),
        (assign, "$g_team_balance_next_round", 1),
        (call_script, "script_warn_player_about_auto_team_balance"),
    (else_try),
        (eq, ":var_0", 11),
        (assign, "$g_team_balance_next_round", 0),
    (else_try),
        (eq, ":var_0", 4),
        (assign, "$g_multiplayer_message_value_1", ":var_1"),
        (start_presentation, "prsnt_multiplayer_message_1"),
    (else_try),
        (eq, ":var_0", 5),
        (assign, "$g_multiplayer_message_value_1", ":var_1"),
        (start_presentation, "prsnt_multiplayer_message_1"),
    (else_try),
        (eq, ":var_0", 6),
        (assign, "$g_multiplayer_message_value_1", ":var_1"),
        (start_presentation, "prsnt_multiplayer_message_1"),
    (else_try),
        (eq, ":var_0", 7),
        (assign, "$g_multiplayer_message_value_3", ":var_1"),
        (start_presentation, "prsnt_multiplayer_message_3"),
    (else_try),
        (eq, ":var_0", 8),
        (assign, "$g_multiplayer_message_value_1", ":var_1"),
        (start_presentation, "prsnt_multiplayer_message_1"),
    (else_try),
        (eq, ":var_0", 9),
        (assign, "$g_multiplayer_message_value_1", ":var_1"),
        (start_presentation, "prsnt_multiplayer_message_1"),
    (else_try),
        (eq, ":var_0", 10),
        (assign, "$g_multiplayer_message_value_1", ":var_1"),
        (start_presentation, "prsnt_multiplayer_message_1"),
    (else_try),
        (eq, ":var_0", 14),
        (start_presentation, "prsnt_multiplayer_message_1"),
    (else_try),
        (eq, ":var_0", 15),
        (try_begin),
            (eq, "$g_defender_team", 0),
            (assign, ":var_2", 1),
        (else_try),
            (assign, ":var_2", 0),
        (try_end),
        (team_get_score, ":var_3", ":var_2"),
        (val_add, ":var_3", 1),
        (call_script, "script_team_set_score", ":var_2", ":var_3"),
        (assign, "$g_multiplayer_message_value_1", ":var_1"),
        (start_presentation, "prsnt_multiplayer_message_1"),
    (else_try),
        (eq, ":var_0", 16),
        (assign, "$g_multiplayer_message_value_1", ":var_1"),
        (start_presentation, "prsnt_multiplayer_message_1"),
    (else_try),
        (eq, ":var_0", 17),
        (try_begin),
            (eq, "$g_defender_team", 0),
            (assign, "$g_multiplayer_message_value_1", 1),
        (else_try),
            (assign, "$g_multiplayer_message_value_1", 0),
        (try_end),
        (start_presentation, "prsnt_multiplayer_message_1"),
    (try_end),

]),

("get_headquarters_scores",
[
    (assign, ":var_0", 0),
    (assign, ":var_1", 0),
    (try_for_range, ":var_2", 0, "$g_number_of_flags"),
        (store_add, ":var_3", 146, ":var_2"),
        (troop_get_slot, ":var_4", "trp_multiplayer_data", ":var_3"),
        (neg|eq, ":var_4", 0),
        (try_begin),
            (eq, ":var_4", 1),
            (val_add, ":var_0", 1),
        (else_try),
            (val_add, ":var_1", 1),
        (try_end),
    (try_end),
    (assign, reg0, ":var_0"),
    (assign, reg1, ":var_1"),

]),

("draw_this_round",
[
    (store_script_param, ":var_0", 1),
    (try_begin),
        (eq, ":var_0", -9),
        (assign, "$g_round_ended", 1),
        (store_mission_timer_a, "$g_round_finish_time"),
    (else_try),
        (eq, ":var_0", -1),
        (assign, "$g_round_ended", 1),
        (store_mission_timer_a, "$g_round_finish_time"),
        (assign, "$g_multiplayer_message_value_1", -1),
        (assign, "$g_multiplayer_message_type", 14),
        (start_presentation, "prsnt_multiplayer_message_1"),
    (else_try),
        (eq, ":var_0", 0),
        (try_begin),
            (eq, "$g_multiplayer_game_type", 6),
            (multiplayer_get_my_player, ":var_1"),
            (is_between, ":var_1", 0, 1000),
            (player_get_agent_id, ":var_2", ":var_1"),
            (ge, ":var_2", 0),
            (agent_is_alive, ":var_2"),
            (agent_get_team, ":var_3", ":var_2"),
            (eq, ":var_3", 0),
            (unlock_achievement, 56),
        (try_end),
        (assign, "$g_round_ended", 1),
        (store_mission_timer_a, "$g_round_finish_time"),
        (team_get_faction, ":var_4", 0),
        (team_get_score, ":var_5", 0),
        (val_add, ":var_5", 1),
        (team_set_score, 0, ":var_5"),
        (assign, "$g_winner_team", 0),
        (str_store_faction_name, s1, ":var_4"),
        (assign, "$g_multiplayer_message_value_1", ":var_0"),
        (try_begin),
            (neg|eq, "$g_multiplayer_game_type", 2),
            (neg|eq, "$g_multiplayer_game_type", 3),
            (assign, "$g_multiplayer_message_type", 13),
        (else_try),
            (assign, "$g_multiplayer_message_type", 12),
        (try_end),
        (start_presentation, "prsnt_multiplayer_message_1"),
    (else_try),
        (eq, ":var_0", 1),
        (assign, "$g_round_ended", 1),
        (store_mission_timer_a, "$g_round_finish_time"),
        (team_get_faction, ":var_4", 1),
        (team_get_score, ":var_6", 1),
        (val_add, ":var_6", 1),
        (team_set_score, 1, ":var_6"),
        (assign, "$g_winner_team", 1),
        (str_store_faction_name, s1, ":var_4"),
        (assign, "$g_multiplayer_message_value_1", ":var_0"),
        (try_begin),
            (neg|eq, "$g_multiplayer_game_type", 2),
            (neg|eq, "$g_multiplayer_game_type", 3),
            (assign, "$g_multiplayer_message_type", 13),
        (else_try),
            (assign, "$g_multiplayer_message_type", 12),
        (try_end),
        (start_presentation, "prsnt_multiplayer_message_1"),
    (try_end),
    (try_begin),
        (is_between, ":var_0", 0, 2),
        (try_begin),
            (eq, "$g_multiplayer_game_type", 2),
            (multiplayer_get_my_player, ":var_1"),
            (is_between, ":var_1", 0, 1000),
            (player_get_agent_id, ":var_2", ":var_1"),
            (ge, ":var_2", 0),
            (agent_is_alive, ":var_2"),
            (agent_get_team, ":var_3", ":var_2"),
            (eq, ":var_3", ":var_0"),
            (unlock_achievement, 62),
        (try_end),
    (try_end),

]),

("check_achievement_last_man_standing",
[
    (try_begin),
        (store_script_param, ":var_0", 1),
        (is_between, ":var_0", 0, 2),
        (try_begin),
            (eq, "$g_multiplayer_game_type", 2),
            (multiplayer_get_my_player, ":var_1"),
            (is_between, ":var_1", 0, 1000),
            (player_get_agent_id, ":var_2", ":var_1"),
            (ge, ":var_2", 0),
            (agent_is_alive, ":var_2"),
            (agent_get_team, ":var_3", ":var_2"),
            (eq, ":var_3", ":var_0"),
            (unlock_achievement, 62),
        (try_end),
    (try_end),

]),

("find_most_suitable_bot_to_control",
[
    (set_fixed_point_multiplier, 100),
    (store_script_param, ":var_0", 1),
    (player_get_team_no, ":var_1", ":var_0"),
    (player_get_slot, ":var_2", ":var_0", 29),
    (player_get_slot, ":var_3", ":var_0", 30),
    (player_get_slot, ":var_4", ":var_0", 31),
    (init_position, pos0),
    (position_set_x, pos0, ":var_2"),
    (position_set_y, pos0, ":var_3"),
    (position_set_z, pos0, ":var_4"),
    (assign, ":var_5", -1),
    (assign, ":var_6", -1),
    (try_for_agents, ":var_7"),
        (agent_is_alive, ":var_7"),
        (agent_is_human, ":var_7"),
        (agent_is_non_player, ":var_7"),
        (agent_get_team, ":var_8", ":var_7"),
        (eq, ":var_8", ":var_1"),
        (agent_get_position, pos1, ":var_7"),
        (get_distance_between_positions_in_meters, ":var_9", pos0, pos1),
        (try_begin),
            (neg|ge, ":var_9", 500),
            (store_sub, ":var_10", 500, ":var_9"),
        (else_try),
            (assign, ":var_10", 0),
        (try_end),
        (val_mul, ":var_10", 6),
        (try_for_agents, ":var_11"),
            (agent_is_alive, ":var_11"),
            (agent_is_human, ":var_11"),
            (neg|eq, ":var_7", ":var_11"),
            (agent_get_team, ":var_12", ":var_11"),
            (try_begin),
                (neg|eq, ":var_12", ":var_1"),
                (agent_get_position, pos1, ":var_11"),
                (get_distance_between_positions, ":var_13", pos0, pos1),
                (try_begin),
                    (neg|ge, ":var_13", 300),
                    (assign, ":var_14", ":var_13"),
                (else_try),
                    (assign, ":var_14", 300),
                (try_end),
                (val_add, ":var_10", ":var_14"),
            (else_try),
                (agent_get_position, pos1, ":var_11"),
                (get_distance_between_positions, ":var_13", pos0, pos1),
                (try_begin),
                    (neg|ge, ":var_13", 300),
                    (assign, ":var_15", 300, ":var_13"),
                (else_try),
                    (assign, ":var_15", 0),
                (try_end),
                (val_add, ":var_10", ":var_15"),
            (try_end),
        (try_end),
        (store_agent_hit_points, ":var_16", ":var_7"),
        (val_mul, ":var_16", 2),
        (val_add, ":var_10", ":var_16"),
        (ge, ":var_10", ":var_6"),
        (assign, ":var_6", ":var_10"),
        (assign, ":var_5", ":var_7"),
    (try_end),
    (assign, reg0, ":var_5"),

]),

("game_receive_url_response",
[

]),

("game_get_cheat_mode",
[
    (assign, reg0, "$cheat_mode"),

]),

("game_receive_network_message",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (try_begin),
        (eq, ":var_1", 0),
        (store_script_param, ":var_2", 3),
        (store_script_param, ":var_3", 4),
        (try_begin),
            (is_between, ":var_2", 2, 11),
            (assign, ":var_4", 0),
            (try_begin),
                (eq, ":var_3", -1),
                (assign, ":var_4", 1),
            (else_try),
                (ge, ":var_3", 0),
                (player_get_troop_id, ":var_5", ":var_0"),
                (is_between, ":var_5", "trp_swadian_crossbowman_multiplayer", "trp_multiplayer_end"),
                (store_sub, ":var_6", ":var_5", "trp_swadian_crossbowman_multiplayer"),
                (val_add, ":var_6", 61),
                (item_get_slot, ":var_7", ":var_3", ":var_6"),
                (gt, ":var_7", 0),
                (assign, ":var_4", 1),
                (try_begin),
                    (neg|eq, "$g_horses_are_avaliable", 1),
                    (item_get_slot, ":var_8", ":var_3", slot_item_multiplayer_item_class),
                    (is_between, ":var_8", 18, 19),
                    (assign, ":var_4", 0),
                (try_end),
                (try_begin),
                    (eq, "$g_multiplayer_disallow_ranged_weapons", 1),
                    (item_get_slot, ":var_8", ":var_3", slot_item_multiplayer_item_class),
                    (is_between, ":var_8", 12, 18),
                    (assign, ":var_4", 0),
                (try_end),
            (try_end),
            (eq, ":var_4", 1),
            (player_set_slot, ":var_0", ":var_2", ":var_3"),
        (try_end),
    (else_try),
        (eq, ":var_1", 1),
        (store_script_param, ":var_2", 3),
        (store_script_param, ":var_3", 4),
        (try_begin),
            (is_between, ":var_2", 35, 39),
            (is_between, ":var_3", 0, 2),
            (player_set_slot, ":var_0", ":var_2", ":var_3"),
        (try_end),
    (else_try),
        (eq, ":var_1", 19),
        (store_script_param, ":var_3", 3),
        (try_begin),
            (player_get_team_no, ":var_9", ":var_0"),
            (neg|eq, ":var_9", ":var_3"),
            (try_begin),
                (call_script, "script_cf_multiplayer_team_is_available", ":var_0", ":var_3"),
                (player_set_troop_id, ":var_0", -1),
                (player_set_team_no, ":var_0", ":var_3"),
                (try_begin),
                    (neg|eq, ":var_3", 2),
                    (neg|eq, ":var_3", 3),
                    (store_mission_timer_a, ":var_10"),
                    (player_set_slot, ":var_0", 28, ":var_10"),
                    (multiplayer_send_message_to_player, ":var_0", 66),
                (try_end),
            (else_try),
                (multiplayer_send_message_to_player, ":var_0", 67),
            (try_end),
        (try_end),
    (else_try),
        (eq, ":var_1", 20),
        (store_script_param, ":var_3", 3),
        (try_begin),
            (eq, ":var_3", -1),
            (player_set_troop_id, ":var_0", -1),
        (else_try),
            (is_between, ":var_3", "trp_swadian_crossbowman_multiplayer", "trp_multiplayer_end"),
            (player_get_team_no, ":var_9", ":var_0"),
            (is_between, ":var_9", 0, 2),
            (team_get_faction, ":var_11", ":var_9"),
            (store_troop_faction, ":var_12", ":var_3"),
            (eq, ":var_12", ":var_11"),
            (player_set_troop_id, ":var_0", ":var_3"),
            (call_script, "script_multiplayer_clear_player_selected_items", ":var_0"),
        (try_end),
    (else_try),
        (eq, ":var_1", 2),
        (store_script_param, ":var_3", 3),
        (store_script_param, ":var_13", 4),
        (try_begin),
            (player_is_admin, ":var_0"),
            (is_between, ":var_3", "scn_multi_scene_1", "scn_multiplayer_maps_end"),
            (is_between, ":var_13", 0, 8),
            (server_get_changing_game_type_allowed, "$g_multiplayer_changing_game_type_allowed"),
            (this_or_next|eq, "$g_multiplayer_changing_game_type_allowed", 1),
            (eq, "$g_multiplayer_game_type", ":var_13"),
            (call_script, "script_multiplayer_fill_map_game_types", ":var_13"),
            (assign, ":var_14", reg0),
            (assign, ":var_15", 0),
            (store_add, ":var_16", 0, ":var_14"),
            (try_for_range, ":var_17", 0, ":var_16"),
                (troop_slot_eq, "trp_multiplayer_data", ":var_17", ":var_3"),
                (assign, ":var_15", 1),
                (assign, ":var_16", 0),
            (try_end),
            (eq, ":var_15", 1),
            (assign, "$g_multiplayer_game_type", ":var_13"),
            (assign, "$g_multiplayer_selected_map", ":var_3"),
            (team_set_faction, 0, "$g_multiplayer_next_team_1_faction"),
            (team_set_faction, 1, "$g_multiplayer_next_team_2_faction"),
            (call_script, "script_game_multiplayer_get_game_type_mission_template", "$g_multiplayer_game_type"),
            (start_multiplayer_mission, reg0, "$g_multiplayer_selected_map", 1),
        (try_end),
    (else_try),
        (eq, ":var_1", 3),
        (store_script_param, ":var_3", 3),
        (try_begin),
            (player_is_admin, ":var_0"),
            (is_between, ":var_3", 2, 201),
            (server_set_max_num_players, ":var_3"),
        (try_end),
    (else_try),
        (eq, ":var_1", 4),
        (store_script_param, ":var_3", 3),
        (store_script_param, ":var_13", 4),
        (try_begin),
            (player_is_admin, ":var_0"),
            (is_between, ":var_3", 1, 3),
            (is_between, ":var_13", 0, "$g_multiplayer_max_num_bots"),
            (try_begin),
                (eq, ":var_3", 1),
                (assign, "$g_multiplayer_num_bots_team_1", ":var_13"),
            (else_try),
                (assign, "$g_multiplayer_num_bots_team_2", ":var_13"),
            (try_end),
            (get_max_players, ":var_18"),
            (try_for_range, ":var_19", 1, ":var_18"),
                (player_is_active, ":var_19"),
                (multiplayer_send_2_int_to_player, ":var_19", 51, ":var_3", ":var_13"),
            (try_end),
        (try_end),
    (else_try),
        (eq, ":var_1", 44),
        (store_script_param, ":var_3", 3),
        (try_begin),
            (player_is_admin, ":var_0"),
            (is_between, ":var_3", 0, 2),
            (server_set_anti_cheat, ":var_3"),
        (try_end),
    (else_try),
        (eq, ":var_1", 5),
        (store_script_param, ":var_3", 3),
        (try_begin),
            (player_is_admin, ":var_0"),
            (is_between, ":var_3", 0, 2),
            (server_set_friendly_fire, ":var_3"),
        (try_end),
    (else_try),
        (eq, ":var_1", 39),
        (store_script_param, ":var_3", 3),
        (try_begin),
            (player_is_admin, ":var_0"),
            (is_between, ":var_3", 0, 2),
            (server_set_melee_friendly_fire, ":var_3"),
        (try_end),
    (else_try),
        (eq, ":var_1", 40),
        (store_script_param, ":var_3", 3),
        (try_begin),
            (player_is_admin, ":var_0"),
            (is_between, ":var_3", 0, 101),
            (server_set_friendly_fire_damage_self_ratio, ":var_3"),
        (try_end),
    (else_try),
        (eq, ":var_1", 41),
        (store_script_param, ":var_3", 3),
        (try_begin),
            (player_is_admin, ":var_0"),
            (is_between, ":var_3", 0, 101),
            (server_set_friendly_fire_damage_friend_ratio, ":var_3"),
        (try_end),
    (else_try),
        (eq, ":var_1", 6),
        (store_script_param, ":var_3", 3),
        (try_begin),
            (player_is_admin, ":var_0"),
            (is_between, ":var_3", 0, 4),
            (server_set_ghost_mode, ":var_3"),
        (try_end),
    (else_try),
        (eq, ":var_1", 7),
        (store_script_param, ":var_3", 3),
        (try_begin),
            (player_is_admin, ":var_0"),
            (is_between, ":var_3", 0, 2),
            (server_set_control_block_dir, ":var_3"),
        (try_end),
    (else_try),
        (eq, ":var_1", 29),
        (store_script_param, ":var_3", 3),
        (try_begin),
            (player_is_admin, ":var_0"),
            (is_between, ":var_3", 0, 5),
            (server_set_combat_speed, ":var_3"),
        (try_end),
    (else_try),
        (eq, ":var_1", 30),
        (store_script_param, ":var_3", 3),
        (player_is_admin, ":var_0"),
        (is_between, ":var_3", 0, 6),
        (assign, "$g_multiplayer_number_of_respawn_count", ":var_3"),
        (get_max_players, ":var_18"),
        (try_for_range, ":var_19", 1, ":var_18"),
            (player_is_active, ":var_19"),
            (multiplayer_send_int_to_player, ":var_19", 88, ":var_3"),
        (try_end),
    (else_try),
        (eq, ":var_1", 8),
        (store_script_param, ":var_3", 3),
        (try_begin),
            (player_is_admin, ":var_0"),
            (server_set_add_to_game_servers_list, ":var_3"),
        (try_end),
    (else_try),
        (eq, ":var_1", 9),
        (store_script_param, ":var_3", 3),
        (try_begin),
            (player_is_admin, ":var_0"),
            (is_between, ":var_3", 3, 31),
            (assign, "$g_multiplayer_respawn_period", ":var_3"),
            (get_max_players, ":var_18"),
            (try_for_range, ":var_19", 1, ":var_18"),
                (player_is_active, ":var_19"),
                (multiplayer_send_int_to_player, ":var_19", 57, ":var_3"),
            (try_end),
        (try_end),
    (else_try),
        (eq, ":var_1", 10),
        (store_script_param, ":var_3", 3),
        (try_begin),
            (player_is_admin, ":var_0"),
            (is_between, ":var_3", 5, 121),
            (assign, "$g_multiplayer_game_max_minutes", ":var_3"),
        (try_end),
    (else_try),
        (eq, ":var_1", 11),
        (store_script_param, ":var_3", 3),
        (try_begin),
            (player_is_admin, ":var_0"),
            (is_between, ":var_3", 60, 901),
            (assign, "$g_multiplayer_round_max_seconds", ":var_3"),
            (get_max_players, ":var_18"),
            (try_for_range, ":var_19", 1, ":var_18"),
                (player_is_active, ":var_19"),
                (multiplayer_send_int_to_player, ":var_19", 59, ":var_3"),
            (try_end),
        (try_end),
    (else_try),
        (eq, ":var_1", 28),
        (store_script_param, ":var_3", 3),
        (try_begin),
            (player_is_admin, ":var_0"),
            (is_between, ":var_3", 0, 2),
            (assign, "$g_multiplayer_player_respawn_as_bot", ":var_3"),
            (get_max_players, ":var_18"),
            (try_for_range, ":var_19", 1, ":var_18"),
                (player_is_active, ":var_19"),
                (multiplayer_send_int_to_player, ":var_19", 85, ":var_3"),
            (try_end),
        (try_end),
    (else_try),
        (eq, ":var_1", 12),
        (store_script_param, ":var_3", 3),
        (try_begin),
            (player_is_admin, ":var_0"),
            (is_between, ":var_3", 3, 1001),
            (assign, "$g_multiplayer_game_max_points", ":var_3"),
        (try_end),
    (else_try),
        (eq, ":var_1", 13),
        (store_script_param, ":var_3", 3),
        (try_begin),
            (player_is_admin, ":var_0"),
            (is_between, ":var_3", 25, 401),
            (assign, "$g_multiplayer_point_gained_from_flags", ":var_3"),
        (try_end),
    (else_try),
        (eq, ":var_1", 14),
        (store_script_param, ":var_3", 3),
        (try_begin),
            (player_is_admin, ":var_0"),
            (is_between, ":var_3", 0, 11),
            (assign, "$g_multiplayer_point_gained_from_capturing_flag", ":var_3"),
        (try_end),
    (else_try),
        (eq, ":var_1", 36),
        (store_script_param, ":var_3", 3),
        (try_begin),
            (player_is_admin, ":var_0"),
            (is_between, ":var_3", 0, 1001),
            (assign, "$g_multiplayer_initial_gold_multiplier", ":var_3"),
        (try_end),
    (else_try),
        (eq, ":var_1", 37),
        (store_script_param, ":var_3", 3),
        (try_begin),
            (player_is_admin, ":var_0"),
            (is_between, ":var_3", 0, 1001),
            (assign, "$g_multiplayer_battle_earnings_multiplier", ":var_3"),
        (try_end),
    (else_try),
        (eq, ":var_1", 38),
        (store_script_param, ":var_3", 3),
        (try_begin),
            (player_is_admin, ":var_0"),
            (is_between, ":var_3", 0, 1001),
            (assign, "$g_multiplayer_round_earnings_multiplier", ":var_3"),
        (try_end),
    (else_try),
        (eq, ":var_1", 15),
        (try_begin),
            (player_is_admin, ":var_0"),
            (server_get_renaming_server_allowed, "$g_multiplayer_renaming_server_allowed"),
            (eq, "$g_multiplayer_renaming_server_allowed", 1),
            (server_set_name, 0),
        (try_end),
    (else_try),
        (eq, ":var_1", 16),
        (try_begin),
            (player_is_admin, ":var_0"),
            (server_set_password, 0),
        (try_end),
    (else_try),
        (eq, ":var_1", 35),
        (try_begin),
            (player_is_admin, ":var_0"),
            (server_set_welcome_message, 0),
        (try_end),
    (else_try),
        (eq, ":var_1", 17),
        (store_script_param, ":var_3", 3),
        (store_script_param, ":var_13", 4),
        (try_begin),
            (player_is_admin, ":var_0"),
            (is_between, ":var_3", 1, 3),
            (is_between, ":var_13", "fac_kingdom_1", "fac_kingdoms_end"),
            (try_begin),
                (eq, ":var_3", 1),
                (assign, "$g_multiplayer_next_team_1_faction", ":var_13"),
            (else_try),
                (assign, "$g_multiplayer_next_team_2_faction", ":var_13"),
            (try_end),
        (try_end),
    (else_try),
        (eq, ":var_1", 45),
        (try_begin),
            (server_get_max_num_players, ":var_20"),
            (multiplayer_send_int_to_player, ":var_0", 50, ":var_20"),
            (multiplayer_send_2_int_to_player, ":var_0", 84, 1, "$g_multiplayer_next_team_1_faction"),
            (multiplayer_send_2_int_to_player, ":var_0", 84, 2, "$g_multiplayer_next_team_2_faction"),
            (multiplayer_send_2_int_to_player, ":var_0", 51, 1, "$g_multiplayer_num_bots_team_1"),
            (multiplayer_send_2_int_to_player, ":var_0", 51, 2, "$g_multiplayer_num_bots_team_2"),
            (server_get_anti_cheat, ":var_21"),
            (multiplayer_send_int_to_player, ":var_0", 104, ":var_21"),
            (server_get_friendly_fire, ":var_22"),
            (multiplayer_send_int_to_player, ":var_0", 52, ":var_22"),
            (server_get_melee_friendly_fire, ":var_23"),
            (multiplayer_send_int_to_player, ":var_0", 99, ":var_23"),
            (server_get_friendly_fire_damage_self_ratio, ":var_24"),
            (multiplayer_send_int_to_player, ":var_0", 100, ":var_24"),
            (server_get_friendly_fire_damage_friend_ratio, ":var_25"),
            (multiplayer_send_int_to_player, ":var_0", 101, ":var_25"),
            (server_get_ghost_mode, ":var_26"),
            (multiplayer_send_int_to_player, ":var_0", 53, ":var_26"),
            (server_get_control_block_dir, ":var_27"),
            (multiplayer_send_int_to_player, ":var_0", 54, ":var_27"),
            (server_get_combat_speed, ":var_28"),
            (multiplayer_send_int_to_player, ":var_0", 55, ":var_28"),
            (server_get_add_to_game_servers_list, ":var_29"),
            (multiplayer_send_int_to_player, ":var_0", 56, ":var_29"),
            (multiplayer_send_int_to_player, ":var_0", 57, "$g_multiplayer_respawn_period"),
            (multiplayer_send_int_to_player, ":var_0", 58, "$g_multiplayer_game_max_minutes"),
            (multiplayer_send_int_to_player, ":var_0", 59, "$g_multiplayer_round_max_seconds"),
            (multiplayer_send_int_to_player, ":var_0", 85, "$g_multiplayer_player_respawn_as_bot"),
            (multiplayer_send_int_to_player, ":var_0", 60, "$g_multiplayer_game_max_points"),
            (multiplayer_send_int_to_player, ":var_0", 61, "$g_multiplayer_point_gained_from_flags"),
            (multiplayer_send_int_to_player, ":var_0", 62, "$g_multiplayer_point_gained_from_capturing_flag"),
            (multiplayer_send_int_to_player, ":var_0", 94, "$g_multiplayer_initial_gold_multiplier"),
            (multiplayer_send_int_to_player, ":var_0", 95, "$g_multiplayer_battle_earnings_multiplier"),
            (multiplayer_send_int_to_player, ":var_0", 96, "$g_multiplayer_round_earnings_multiplier"),
            (multiplayer_send_int_to_player, ":var_0", 92, "$g_multiplayer_valid_vote_ratio"),
            (str_store_server_name, s0),
            (multiplayer_send_string_to_player, ":var_0", 63, 0),
            (multiplayer_send_message_to_player, ":var_0", 105),
        (try_end),
    (else_try),
        (eq, ":var_1", 18),
        (try_begin),
            (player_is_admin, ":var_0"),
            (server_get_renaming_server_allowed, "$g_multiplayer_renaming_server_allowed"),
            (multiplayer_send_int_to_player, ":var_0", 97, "$g_multiplayer_renaming_server_allowed"),
            (server_get_changing_game_type_allowed, "$g_multiplayer_changing_game_type_allowed"),
            (multiplayer_send_int_to_player, ":var_0", 98, "$g_multiplayer_changing_game_type_allowed"),
            (server_get_max_num_players, ":var_20"),
            (multiplayer_send_int_to_player, ":var_0", 50, ":var_20"),
            (multiplayer_send_2_int_to_player, ":var_0", 84, 1, "$g_multiplayer_next_team_1_faction"),
            (multiplayer_send_2_int_to_player, ":var_0", 84, 2, "$g_multiplayer_next_team_2_faction"),
            (multiplayer_send_2_int_to_player, ":var_0", 51, 1, "$g_multiplayer_num_bots_team_1"),
            (multiplayer_send_2_int_to_player, ":var_0", 51, 2, "$g_multiplayer_num_bots_team_2"),
            (server_get_anti_cheat, ":var_21"),
            (multiplayer_send_int_to_player, ":var_0", 104, ":var_21"),
            (server_get_friendly_fire, ":var_22"),
            (multiplayer_send_int_to_player, ":var_0", 52, ":var_22"),
            (server_get_melee_friendly_fire, ":var_23"),
            (multiplayer_send_int_to_player, ":var_0", 99, ":var_23"),
            (server_get_friendly_fire_damage_self_ratio, ":var_24"),
            (multiplayer_send_int_to_player, ":var_0", 100, ":var_24"),
            (server_get_friendly_fire_damage_friend_ratio, ":var_25"),
            (multiplayer_send_int_to_player, ":var_0", 101, ":var_25"),
            (server_get_ghost_mode, ":var_26"),
            (multiplayer_send_int_to_player, ":var_0", 53, ":var_26"),
            (server_get_control_block_dir, ":var_27"),
            (multiplayer_send_int_to_player, ":var_0", 54, ":var_27"),
            (server_get_combat_speed, ":var_28"),
            (multiplayer_send_int_to_player, ":var_0", 55, ":var_28"),
            (server_get_add_to_game_servers_list, ":var_29"),
            (multiplayer_send_int_to_player, ":var_0", 56, ":var_29"),
            (multiplayer_send_int_to_player, ":var_0", 57, "$g_multiplayer_respawn_period"),
            (multiplayer_send_int_to_player, ":var_0", 58, "$g_multiplayer_game_max_minutes"),
            (multiplayer_send_int_to_player, ":var_0", 59, "$g_multiplayer_round_max_seconds"),
            (multiplayer_send_int_to_player, ":var_0", 85, "$g_multiplayer_player_respawn_as_bot"),
            (multiplayer_send_int_to_player, ":var_0", 60, "$g_multiplayer_game_max_points"),
            (multiplayer_send_int_to_player, ":var_0", 61, "$g_multiplayer_point_gained_from_flags"),
            (multiplayer_send_int_to_player, ":var_0", 62, "$g_multiplayer_point_gained_from_capturing_flag"),
            (multiplayer_send_int_to_player, ":var_0", 94, "$g_multiplayer_initial_gold_multiplier"),
            (multiplayer_send_int_to_player, ":var_0", 95, "$g_multiplayer_battle_earnings_multiplier"),
            (multiplayer_send_int_to_player, ":var_0", 96, "$g_multiplayer_round_earnings_multiplier"),
            (multiplayer_send_int_to_player, ":var_0", 92, "$g_multiplayer_valid_vote_ratio"),
            (multiplayer_send_int_to_player, ":var_0", 106, "$g_multiplayer_max_num_bots"),
            (str_store_server_name, s0),
            (multiplayer_send_string_to_player, ":var_0", 63, 0),
            (str_store_server_password, s0),
            (multiplayer_send_string_to_player, ":var_0", 64, 0),
        (try_end),
    (else_try),
        (eq, ":var_1", 21),
        (try_begin),
            (store_script_param, ":var_3", 3),
            (store_script_param, ":var_13", 4),
            (eq, "$g_multiplayer_poll_running", 0),
            (store_mission_timer_a, ":var_30"),
            (player_get_slot, ":var_31", ":var_0", 26),
            (ge, ":var_30", ":var_31"),
            (assign, ":var_32", 0),
            (try_begin),
                (eq, ":var_3", 1),
                (try_begin),
                    (eq, "$g_multiplayer_kick_voteable", 1),
                    (player_is_active, ":var_13"),
                    (assign, ":var_32", 1),
                (try_end),
            (else_try),
                (eq, ":var_3", 2),
                (try_begin),
                    (eq, "$g_multiplayer_ban_voteable", 1),
                    (player_is_active, ":var_13"),
                    (save_ban_info_of_player, ":var_13"),
                    (assign, ":var_32", 1),
                (try_end),
            (else_try),
                (eq, ":var_3", 0),
                (try_begin),
                    (eq, "$g_multiplayer_maps_voteable", 1),
                    (call_script, "script_multiplayer_fill_map_game_types", "$g_multiplayer_game_type"),
                    (assign, ":var_14", reg0),
                    (try_for_range, ":var_17", 0, ":var_14"),
                        (store_add, ":var_33", ":var_17", 0),
                        (troop_slot_eq, "trp_multiplayer_data", ":var_33", ":var_13"),
                        (assign, ":var_32", 1),
                        (assign, ":var_14", 0),
                    (try_end),
                (try_end),
            (else_try),
                (eq, ":var_3", 3),
                (try_begin),
                    (eq, "$g_multiplayer_factions_voteable", 1),
                    (store_script_param, ":var_34", 5),
                    (store_script_param, ":var_35", 6),
                    (call_script, "script_multiplayer_fill_map_game_types", "$g_multiplayer_game_type"),
                    (assign, ":var_14", reg0),
                    (try_for_range, ":var_17", 0, ":var_14"),
                        (store_add, ":var_33", ":var_17", 0),
                        (troop_slot_eq, "trp_multiplayer_data", ":var_33", ":var_13"),
                        (assign, ":var_32", 1),
                        (assign, ":var_14", 0),
                    (try_end),
                    (try_begin),
                        (eq, ":var_32", 1),
                        (this_or_next|neg|is_between, ":var_34", "fac_kingdom_1", "fac_kingdoms_end"),
                        (this_or_next|neg|is_between, ":var_35", "fac_kingdom_1", "fac_kingdoms_end"),
                        (eq, ":var_34", ":var_35"),
                        (assign, ":var_32", 0),
                    (try_end),
                (try_end),
            (else_try),
                (eq, ":var_3", 4),
                (store_script_param, ":var_34", 5),
                (store_add, ":var_36", "$g_multiplayer_num_bots_voteable", 1),
                (is_between, ":var_13", 0, ":var_36"),
                (is_between, ":var_34", 0, ":var_36"),
                (assign, ":var_32", 1),
            (try_end),
            (eq, ":var_32", 1),
            (str_store_player_username, s0, ":var_0"),
            (try_begin),
                (eq, ":var_3", 1),
                (str_store_player_username, s1, ":var_13"),
                (server_add_message_to_log, "str_poll_kick_player_s1_by_s0"),
            (else_try),
                (eq, ":var_3", 2),
                (str_store_player_username, s1, ":var_13"),
                (server_add_message_to_log, "str_poll_ban_player_s1_by_s0"),
            (else_try),
                (eq, ":var_3", 0),
                (store_sub, ":var_37", ":var_13", "scn_multi_scene_1"),
                (val_add, ":var_37", "str_multi_scene_1"),
                (str_store_string, s1, ":var_37"),
                (server_add_message_to_log, "str_poll_change_map_to_s1_by_s0"),
            (else_try),
                (eq, ":var_3", 3),
                (store_sub, ":var_37", ":var_13", "scn_multi_scene_1"),
                (val_add, ":var_37", "str_multi_scene_1"),
                (str_store_string, s1, ":var_37"),
                (str_store_faction_name, s2, ":var_34"),
                (str_store_faction_name, s3, ":var_35"),
                (server_add_message_to_log, "str_poll_change_map_to_s1_and_factions_to_s2_and_s3_by_s0"),
            (else_try),
                (eq, ":var_3", 4),
                (assign, reg0, ":var_13"),
                (assign, reg1, ":var_34"),
                (server_add_message_to_log, "str_poll_change_number_of_bots_to_reg0_and_reg1_by_s0"),
            (try_end),
            (assign, "$g_multiplayer_poll_running", 1),
            (assign, "$g_multiplayer_poll_ended", 0),
            (assign, "$g_multiplayer_poll_num_sent", 0),
            (assign, "$g_multiplayer_poll_yes_count", 0),
            (assign, "$g_multiplayer_poll_no_count", 0),
            (assign, "$g_multiplayer_poll_to_show", ":var_3"),
            (assign, "$g_multiplayer_poll_value_to_show", ":var_13"),
            (try_begin),
                (eq, ":var_3", 3),
                (assign, "$g_multiplayer_poll_value_2_to_show", ":var_34"),
                (assign, "$g_multiplayer_poll_value_3_to_show", ":var_35"),
            (else_try),
                (eq, ":var_3", 4),
                (assign, "$g_multiplayer_poll_value_2_to_show", ":var_34"),
                (assign, "$g_multiplayer_poll_value_3_to_show", -1),
            (else_try),
                (assign, "$g_multiplayer_poll_value_2_to_show", -1),
                (assign, "$g_multiplayer_poll_value_3_to_show", -1),
            (try_end),
            (store_add, ":var_38", ":var_30", 900),
            (player_set_slot, ":var_0", 26, ":var_38"),
            (store_add, "$g_multiplayer_poll_end_time", ":var_30", 60),
            (get_max_players, ":var_18"),
            (try_for_range, ":var_19", 0, ":var_18"),
                (player_is_active, ":var_19"),
                (player_set_slot, ":var_19", 23, 1),
                (val_add, "$g_multiplayer_poll_num_sent", 1),
                (multiplayer_send_4_int_to_player, ":var_19", 74, "$g_multiplayer_poll_to_show", "$g_multiplayer_poll_value_to_show", "$g_multiplayer_poll_value_2_to_show", "$g_multiplayer_poll_value_3_to_show"),
            (try_end),
        (try_end),
    (else_try),
        (eq, ":var_1", 22),
        (try_begin),
            (store_script_param, ":var_3", 3),
            (eq, "$g_multiplayer_poll_running", 1),
            (is_between, ":var_3", 0, 2),
            (player_slot_eq, ":var_0", 23, 1),
            (player_set_slot, ":var_0", 23, 0),
            (try_begin),
                (eq, ":var_3", 0),
                (val_add, "$g_multiplayer_poll_no_count", 1),
            (else_try),
                (eq, ":var_3", 1),
                (val_add, "$g_multiplayer_poll_yes_count", 1),
            (try_end),
        (try_end),
    (else_try),
        (eq, ":var_1", 23),
        (try_begin),
            (store_script_param, ":var_3", 3),
            (player_is_admin, ":var_0"),
            (player_is_active, ":var_3"),
            (kick_player, ":var_3"),
        (try_end),
    (else_try),
        (eq, ":var_1", 24),
        (try_begin),
            (store_script_param, ":var_3", 3),
            (player_is_admin, ":var_0"),
            (player_is_active, ":var_3"),
            (ban_player, ":var_3", 0, ":var_0"),
        (try_end),
    (else_try),
        (eq, ":var_1", 33),
        (try_begin),
            (store_script_param, ":var_3", 3),
            (player_is_admin, ":var_0"),
            (is_between, ":var_3", 50, 101),
            (assign, "$g_multiplayer_valid_vote_ratio", ":var_3"),
        (try_end),
    (else_try),
        (eq, ":var_1", 34),
        (try_begin),
            (store_script_param, ":var_3", 3),
            (player_is_admin, ":var_0"),
            (this_or_next|is_between, ":var_3", 2, 7),
            (eq, ":var_3", 1000),
            (assign, "$g_multiplayer_auto_team_balance_limit", ":var_3"),
            (get_max_players, ":var_18"),
            (try_for_range, ":var_19", 1, ":var_18"),
                (player_is_active, ":var_19"),
                (multiplayer_send_int_to_player, ":var_19", 93, ":var_3"),
            (try_end),
        (try_end),
    (else_try),
        (eq, ":var_1", 25),
        (try_begin),
            (store_script_param, ":var_3", 3),
            (player_is_admin, ":var_0"),
            (is_between, ":var_3", 0, 51),
            (is_between, ":var_3", "$g_multiplayer_max_num_bots"),
            (assign, "$g_multiplayer_num_bots_voteable", ":var_3"),
            (get_max_players, ":var_18"),
            (try_for_range, ":var_19", 1, ":var_18"),
                (player_is_active, ":var_19"),
                (multiplayer_send_int_to_player, ":var_19", 81, ":var_3"),
            (try_end),
        (try_end),
    (else_try),
        (eq, ":var_1", 26),
        (try_begin),
            (store_script_param, ":var_3", 3),
            (player_is_admin, ":var_0"),
            (is_between, ":var_3", 0, 2),
            (assign, "$g_multiplayer_factions_voteable", ":var_3"),
            (get_max_players, ":var_18"),
            (try_for_range, ":var_19", 1, ":var_18"),
                (player_is_active, ":var_19"),
                (multiplayer_send_int_to_player, ":var_19", 82, ":var_3"),
            (try_end),
        (try_end),
    (else_try),
        (eq, ":var_1", 27),
        (try_begin),
            (store_script_param, ":var_3", 3),
            (player_is_admin, ":var_0"),
            (is_between, ":var_3", 0, 2),
            (assign, "$g_multiplayer_maps_voteable", ":var_3"),
            (get_max_players, ":var_18"),
            (try_for_range, ":var_19", 1, ":var_18"),
                (player_is_active, ":var_19"),
                (multiplayer_send_int_to_player, ":var_19", 83, ":var_3"),
            (try_end),
        (try_end),
    (else_try),
        (eq, ":var_1", 31),
        (try_begin),
            (store_script_param, ":var_3", 3),
            (player_is_admin, ":var_0"),
            (is_between, ":var_3", 0, 2),
            (assign, "$g_multiplayer_kick_voteable", ":var_3"),
            (get_max_players, ":var_18"),
            (try_for_range, ":var_19", 1, ":var_18"),
                (player_is_active, ":var_19"),
                (multiplayer_send_int_to_player, ":var_19", 90, ":var_3"),
            (try_end),
        (try_end),
    (else_try),
        (eq, ":var_1", 32),
        (try_begin),
            (store_script_param, ":var_3", 3),
            (player_is_admin, ":var_0"),
            (is_between, ":var_3", 0, 2),
            (assign, "$g_multiplayer_ban_voteable", ":var_3"),
            (get_max_players, ":var_18"),
            (try_for_range, ":var_19", 1, ":var_18"),
                (player_is_active, ":var_19"),
                (multiplayer_send_int_to_player, ":var_19", 91, ":var_3"),
            (try_end),
        (try_end),
    (else_try),
        (eq, ":var_1", 42),
        (try_begin),
            (store_script_param, ":var_3", 3),
            (player_is_admin, ":var_0"),
            (is_between, ":var_3", 0, 2),
            (assign, "$g_multiplayer_allow_player_banners", ":var_3"),
        (try_end),
    (else_try),
        (eq, ":var_1", 43),
        (try_begin),
            (store_script_param, ":var_3", 3),
            (player_is_admin, ":var_0"),
            (is_between, ":var_3", 0, 2),
            (assign, "$g_multiplayer_force_default_armor", ":var_3"),
        (try_end),
    (else_try),
        (eq, ":var_1", 46),
        (try_begin),
            (store_script_param, ":var_3", 3),
            (eq, "$g_multiplayer_game_type", 7),
            (agent_is_active, ":var_3"),
            (agent_is_alive, ":var_3"),
            (agent_is_human, ":var_3"),
            (player_get_agent_id, ":var_39", ":var_0"),
            (agent_is_active, ":var_39"),
            (agent_is_alive, ":var_39"),
            (agent_get_position, pos0, ":var_39"),
            (agent_get_position, pos1, ":var_3"),
            (get_sq_distance_between_positions_in_meters, ":var_40", pos0, pos1),
            (neg|gt, ":var_40", 49),
            (this_or_next|agent_check_offer_from_agent, ":var_39", ":var_3"),
            (agent_slot_eq, ":var_39", slot_agent_in_duel_with, -1),
            (neg|agent_slot_eq, ":var_39", slot_agent_in_duel_with, ":var_3"),
            (try_begin),
                (agent_check_offer_from_agent, ":var_39", ":var_3"),
                (call_script, "script_multiplayer_accept_duel", ":var_39", ":var_3"),
            (else_try),
                (assign, ":var_41", 1),
                (try_begin),
                    (agent_check_offer_from_agent, ":var_3", ":var_39"),
                    (assign, ":var_41", 0),
                (try_end),
                (agent_add_offer_with_timeout, ":var_3", ":var_39", 10000),
                (agent_get_player_id, ":var_42", ":var_3"),
                (try_begin),
                    (player_is_active, ":var_42"),
                    (try_begin),
                        (eq, ":var_41", 1),
                        (multiplayer_send_int_to_player, ":var_42", 108, ":var_39"),
                    (try_end),
                (else_try),
                    (call_script, "script_multiplayer_accept_duel", ":var_3", ":var_39"),
                (try_end),
            (try_end),
        (try_end),
    (else_try),
        (eq, ":var_1", 47),
        (try_begin),
            (store_script_param, ":var_3", 3),
            (player_is_admin, ":var_0"),
            (is_between, ":var_3", 0, 2),
            (assign, "$g_multiplayer_disallow_ranged_weapons", ":var_3"),
        (try_end),
    (else_try),
        (neg|multiplayer_is_dedicated_server),
        (try_begin),
            (eq, ":var_1", 97),
            (store_script_param, ":var_3", 3),
            (assign, "$g_multiplayer_renaming_server_allowed", ":var_3"),
        (else_try),
            (eq, ":var_1", 98),
            (store_script_param, ":var_3", 3),
            (assign, "$g_multiplayer_changing_game_type_allowed", ":var_3"),
        (else_try),
            (eq, ":var_1", 50),
            (store_script_param, ":var_3", 3),
            (server_set_max_num_players, ":var_3"),
        (else_try),
            (eq, ":var_1", 84),
            (store_script_param, ":var_3", 3),
            (store_script_param, ":var_13", 4),
            (try_begin),
                (eq, ":var_3", 1),
                (assign, "$g_multiplayer_next_team_1_faction", ":var_13"),
            (else_try),
                (assign, "$g_multiplayer_next_team_2_faction", ":var_13"),
            (try_end),
        (else_try),
            (eq, ":var_1", 51),
            (store_script_param, ":var_3", 3),
            (store_script_param, ":var_13", 4),
            (try_begin),
                (eq, ":var_3", 1),
                (assign, "$g_multiplayer_num_bots_team_1", ":var_13"),
            (else_try),
                (assign, "$g_multiplayer_num_bots_team_2", ":var_13"),
            (try_end),
        (else_try),
            (eq, ":var_1", 104),
            (store_script_param, ":var_3", 3),
            (server_set_anti_cheat, ":var_3"),
        (else_try),
            (eq, ":var_1", 52),
            (store_script_param, ":var_3", 3),
            (server_set_friendly_fire, ":var_3"),
        (else_try),
            (eq, ":var_1", 99),
            (store_script_param, ":var_3", 3),
            (server_set_melee_friendly_fire, ":var_3"),
        (else_try),
            (eq, ":var_1", 100),
            (store_script_param, ":var_3", 3),
            (server_set_friendly_fire_damage_self_ratio, ":var_3"),
        (else_try),
            (eq, ":var_1", 101),
            (store_script_param, ":var_3", 3),
            (server_set_friendly_fire_damage_friend_ratio, ":var_3"),
        (else_try),
            (eq, ":var_1", 53),
            (store_script_param, ":var_3", 3),
            (server_set_ghost_mode, ":var_3"),
        (else_try),
            (eq, ":var_1", 54),
            (store_script_param, ":var_3", 3),
            (server_set_control_block_dir, ":var_3"),
        (else_try),
            (eq, ":var_1", 56),
            (store_script_param, ":var_3", 3),
            (server_set_add_to_game_servers_list, ":var_3"),
        (else_try),
            (eq, ":var_1", 57),
            (store_script_param, ":var_3", 3),
            (assign, "$g_multiplayer_respawn_period", ":var_3"),
        (else_try),
            (eq, ":var_1", 58),
            (store_script_param, ":var_3", 3),
            (assign, "$g_multiplayer_game_max_minutes", ":var_3"),
        (else_try),
            (eq, ":var_1", 59),
            (store_script_param, ":var_3", 3),
            (assign, "$g_multiplayer_round_max_seconds", ":var_3"),
        (else_try),
            (eq, ":var_1", 85),
            (store_script_param, ":var_3", 3),
            (assign, "$g_multiplayer_player_respawn_as_bot", ":var_3"),
        (else_try),
            (eq, ":var_1", 60),
            (store_script_param, ":var_3", 3),
            (assign, "$g_multiplayer_game_max_points", ":var_3"),
        (else_try),
            (eq, ":var_1", 61),
            (store_script_param, ":var_3", 3),
            (assign, "$g_multiplayer_point_gained_from_flags", ":var_3"),
        (else_try),
            (eq, ":var_1", 62),
            (store_script_param, ":var_3", 3),
            (assign, "$g_multiplayer_point_gained_from_capturing_flag", ":var_3"),
        (else_try),
            (eq, ":var_1", 94),
            (store_script_param, ":var_3", 3),
            (assign, "$g_multiplayer_initial_gold_multiplier", ":var_3"),
        (else_try),
            (eq, ":var_1", 95),
            (store_script_param, ":var_3", 3),
            (assign, "$g_multiplayer_battle_earnings_multiplier", ":var_3"),
        (else_try),
            (eq, ":var_1", 96),
            (store_script_param, ":var_3", 3),
            (assign, "$g_multiplayer_round_earnings_multiplier", ":var_3"),
        (else_try),
            (eq, ":var_1", 88),
            (store_script_param, ":var_3", 3),
            (assign, "$g_multiplayer_number_of_respawn_count", ":var_3"),
        (else_try),
            (eq, ":var_1", 63),
            (server_set_name, 0),
        (else_try),
            (eq, ":var_1", 64),
            (server_set_password, 0),
            (start_presentation, "prsnt_game_multiplayer_admin_panel"),
        (else_try),
            (eq, ":var_1", 105),
            (assign, "$g_multiplayer_show_server_rules", 1),
            (start_presentation, "prsnt_multiplayer_welcome_message"),
        (else_try),
            (eq, ":var_1", 65),
            (store_script_param, ":var_3", 3),
            (assign, "$g_multiplayer_game_type", ":var_3"),
        (else_try),
            (eq, ":var_1", 92),
            (store_script_param, ":var_3", 3),
            (assign, "$g_multiplayer_valid_vote_ratio", ":var_3"),
        (else_try),
            (eq, ":var_1", 106),
            (store_script_param, ":var_3", 3),
            (assign, "$g_multiplayer_max_num_bots", ":var_3"),
        (else_try),
            (eq, ":var_1", 107),
            (store_script_param, ":var_3", 3),
            (assign, "$server_mission_timer_while_player_joined", ":var_3"),
        (else_try),
            (eq, ":var_1", 93),
            (store_script_param, ":var_3", 3),
            (assign, "$g_multiplayer_auto_team_balance_limit", ":var_3"),
        (else_try),
            (eq, ":var_1", 81),
            (store_script_param, ":var_3", 3),
            (assign, "$g_multiplayer_num_bots_voteable", ":var_3"),
        (else_try),
            (eq, ":var_1", 82),
            (store_script_param, ":var_3", 3),
            (assign, "$g_multiplayer_factions_voteable", ":var_3"),
        (else_try),
            (eq, ":var_1", 83),
            (store_script_param, ":var_3", 3),
            (assign, "$g_multiplayer_maps_voteable", ":var_3"),
        (else_try),
            (eq, ":var_1", 90),
            (store_script_param, ":var_3", 3),
            (assign, "$g_multiplayer_kick_voteable", ":var_3"),
        (else_try),
            (eq, ":var_1", 91),
            (store_script_param, ":var_3", 3),
            (assign, "$g_multiplayer_ban_voteable", ":var_3"),
        (else_try),
            (eq, ":var_1", 102),
            (store_script_param, ":var_3", 3),
            (assign, "$g_multiplayer_allow_player_banners", ":var_3"),
        (else_try),
            (eq, ":var_1", 103),
            (store_script_param, ":var_3", 3),
            (assign, "$g_multiplayer_force_default_armor", ":var_3"),
        (else_try),
            (eq, ":var_1", 112),
            (store_script_param, ":var_3", 3),
            (assign, "$g_multiplayer_disallow_ranged_weapons", ":var_3"),
        (else_try),
            (eq, ":var_1", 66),
            (assign, "$g_confirmation_result", 1),
        (else_try),
            (eq, ":var_1", 67),
            (assign, "$g_confirmation_result", -1),
        (else_try),
            (eq, ":var_1", 68),
            (store_script_param, ":var_3", 3),
            (store_script_param, ":var_13", 4),
            (call_script, "script_show_multiplayer_message", ":var_3", ":var_13"),
        (else_try),
            (eq, ":var_1", 69),
            (store_script_param, ":var_3", 3),
            (call_script, "script_draw_this_round", ":var_3"),
        (else_try),
            (eq, ":var_1", 70),
            (store_script_param, ":var_3", 3),
            (store_script_param, ":var_13", 4),
            (call_script, "script_set_attached_scene_prop", ":var_3", ":var_13"),
            (try_begin),
                (eq, "$g_multiplayer_game_type", 4),
                (try_begin),
                    (neg|eq, ":var_13", -1),
                    (agent_set_horse_speed_factor, ":var_3", 75),
                (else_try),
                    (agent_set_horse_speed_factor, ":var_3", 100),
                (try_end),
            (try_end),
        (else_try),
            (eq, ":var_1", 71),
            (store_script_param, ":var_3", 3),
            (store_script_param, ":var_13", 4),
            (call_script, "script_set_team_flag_situation", ":var_3", ":var_13"),
        (else_try),
            (eq, ":var_1", 72),
            (store_script_param, ":var_3", 3),
            (store_script_param, ":var_13", 4),
            (call_script, "script_team_set_score", ":var_3", ":var_13"),
        (else_try),
            (eq, ":var_1", 86),
            (store_script_param, ":var_3", 3),
            (store_script_param, ":var_13", 4),
            (store_script_param, ":var_34", 5),
            (store_script_param, ":var_35", 6),
            (call_script, "script_player_set_score", ":var_3", ":var_13"),
            (call_script, "script_player_set_kill_count", ":var_3", ":var_34"),
            (call_script, "script_player_set_death_count", ":var_3", ":var_35"),
        (else_try),
            (eq, ":var_1", 73),
            (store_script_param, ":var_43", 3),
            (store_script_param, ":var_44", 4),
            (call_script, "script_set_num_agents_around_flag", ":var_43", ":var_44"),
        (else_try),
            (eq, ":var_1", 74),
            (store_script_param, ":var_3", 3),
            (store_script_param, ":var_13", 4),
            (store_script_param, ":var_34", 5),
            (store_script_param, ":var_35", 6),
            (assign, ":var_45", 0),
            (try_begin),
                (this_or_next|eq, ":var_3", 1),
                (eq, ":var_3", 2),
                (player_is_active, ":var_13"),
                (assign, ":var_45", 1),
            (else_try),
                (assign, ":var_45", 1),
            (try_end),
            (try_begin),
                (eq, ":var_45", 1),
                (assign, "$g_multiplayer_poll_to_show", ":var_3"),
                (assign, "$g_multiplayer_poll_value_to_show", ":var_13"),
                (assign, "$g_multiplayer_poll_value_2_to_show", ":var_34"),
                (assign, "$g_multiplayer_poll_value_3_to_show", ":var_35"),
                (store_mission_timer_a, ":var_30"),
                (store_add, "$g_multiplayer_poll_client_end_time", ":var_30", 60),
                (start_presentation, "prsnt_multiplayer_poll"),
            (try_end),
        (else_try),
            (eq, ":var_1", 75),
            (store_script_param, ":var_43", 3),
            (store_script_param, ":var_46", 4),
            (call_script, "script_change_flag_owner", ":var_43", ":var_46"),
        (else_try),
            (eq, ":var_1", 76),
            (store_script_param, ":var_3", 3),
            (store_script_param, ":var_13", 4),
            (call_script, "script_use_item", ":var_3", ":var_13"),
        (else_try),
            (eq, ":var_1", 77),
            (store_script_param, ":var_47", 3),
            (scene_prop_set_slot, ":var_47", 1, 1),
            (prop_instance_get_scene_prop_kind, ":var_48", ":var_47"),
            (try_begin),
                (eq, ":var_48", "spr_winch_b"),
                (assign, ":var_49", "spr_portcullis"),
            (else_try),
                (this_or_next|eq, ":var_48", "spr_castle_e_sally_door_a"),
                (this_or_next|eq, ":var_48", "spr_castle_f_sally_door_a"),
                (this_or_next|eq, ":var_48", "spr_earth_sally_gate_left"),
                (this_or_next|eq, ":var_48", "spr_earth_sally_gate_right"),
                (this_or_next|eq, ":var_48", "spr_viking_keep_destroy_sally_door_left"),
                (this_or_next|eq, ":var_48", "spr_viking_keep_destroy_sally_door_right"),
                (this_or_next|eq, ":var_48", "spr_castle_f_door_a"),
                (this_or_next|eq, ":var_48", "spr_door_destructible"),
                (this_or_next|eq, ":var_48", "spr_castle_f_door_b"),
                (this_or_next|eq, ":var_48", "spr_siege_ladder_move_6m"),
                (this_or_next|eq, ":var_48", "spr_siege_ladder_move_8m"),
                (this_or_next|eq, ":var_48", "spr_siege_ladder_move_10m"),
                (this_or_next|eq, ":var_48", "spr_siege_ladder_move_12m"),
                (eq, ":var_48", "spr_siege_ladder_move_14m"),
                (assign, ":var_49", ":var_48"),
            (try_end),
            (try_begin),
                (eq, ":var_49", "spr_portcullis"),
                (assign, ":var_50", -1),
                (prop_instance_get_position, pos0, ":var_47"),
                (scene_prop_get_num_instances, ":var_51", ":var_49"),
                (try_for_range, ":var_52", 0, ":var_51"),
                    (scene_prop_get_instance, ":var_53", ":var_49", ":var_52"),
                    (prop_instance_get_position, pos1, ":var_53"),
                    (get_sq_distance_between_positions, ":var_54", pos0, pos1),
                    (this_or_next|eq, ":var_50", -1),
                    (neg|ge, ":var_54", ":var_50"),
                    (assign, ":var_50", ":var_54"),
                    (assign, ":var_55", ":var_53"),
                (try_end),
                (ge, ":var_50", 0),
                (prop_instance_is_animating, ":var_56", ":var_55"),
                (eq, ":var_56", 0),
                (prop_instance_get_starting_position, pos0, ":var_55"),
                (position_move_z, pos0, 375),
                (prop_instance_animate_to_position, ":var_55", 0, 1),
            (else_try),
                (this_or_next|eq, ":var_48", "spr_castle_e_sally_door_a"),
                (this_or_next|eq, ":var_48", "spr_castle_f_sally_door_a"),
                (this_or_next|eq, ":var_48", "spr_earth_sally_gate_left"),
                (this_or_next|eq, ":var_48", "spr_earth_sally_gate_right"),
                (this_or_next|eq, ":var_48", "spr_viking_keep_destroy_sally_door_left"),
                (this_or_next|eq, ":var_48", "spr_viking_keep_destroy_sally_door_right"),
                (this_or_next|eq, ":var_48", "spr_castle_f_door_a"),
                (this_or_next|eq, ":var_48", "spr_door_destructible"),
                (eq, ":var_48", "spr_castle_f_door_b"),
                (assign, ":var_55", ":var_47"),
                (prop_instance_get_starting_position, pos0, ":var_55"),
                (position_rotate_z, pos0, -80),
                (prop_instance_animate_to_position, ":var_55", 0, 1),
            (else_try),
                (assign, ":var_55", ":var_47"),
                (prop_instance_is_animating, ":var_56", ":var_55"),
                (eq, ":var_56", 0),
                (prop_instance_get_starting_position, pos0, ":var_55"),
                (prop_instance_animate_to_position, ":var_55", 0, 1),
            (try_end),
        (else_try),
            (eq, ":var_1", 78),
            (store_script_param, ":var_3", 3),
            (try_begin),
                (neg|eq, ":var_3", -9999),
                (assign, "$g_round_start_time", ":var_3"),
            (else_try),
                (store_mission_timer_a, "$g_round_start_time"),
                (call_script, "script_initialize_scene_prop_slots", "spr_siege_ladder_move_6m"),
                (call_script, "script_initialize_scene_prop_slots", "spr_siege_ladder_move_8m"),
                (call_script, "script_initialize_scene_prop_slots", "spr_siege_ladder_move_10m"),
                (call_script, "script_initialize_scene_prop_slots", "spr_siege_ladder_move_12m"),
                (call_script, "script_initialize_scene_prop_slots", "spr_siege_ladder_move_14m"),
                (call_script, "script_initialize_scene_prop_slots", "spr_winch_b"),
            (try_end),
        (else_try),
            (eq, ":var_1", 79),
            (try_begin),
                (is_presentation_active, "prsnt_multiplayer_item_select"),
                (assign, "$g_close_equipment_selection", 1),
            (try_end),
            (start_presentation, "prsnt_multiplayer_troop_select"),
        (else_try),
            (eq, ":var_1", 80),
            (assign, "$g_battle_death_mode_started", 2),
            (start_presentation, "prsnt_multiplayer_flag_projection_display_bt"),
            (call_script, "script_start_death_mode"),
        (else_try),
            (eq, ":var_1", 89),
            (store_script_param, ":var_3", 3),
            (try_begin),
                (gt, "$g_my_spawn_count", 0),
                (store_add, "$g_my_spawn_count", "$g_my_spawn_count", ":var_3"),
            (else_try),
                (assign, "$g_my_spawn_count", ":var_3"),
            (try_end),
        (else_try),
            (eq, ":var_1", 108),
            (store_script_param, ":var_3", 3),
            (try_begin),
                (agent_is_active, ":var_3"),
                (agent_get_player_id, ":var_57", ":var_3"),
                (try_begin),
                    (player_is_active, ":var_57"),
                    (str_store_player_username, s0, ":var_57"),
                (else_try),
                    (str_store_agent_name, s0, ":var_3"),
                (try_end),
                (display_message, "str_s0_offers_a_duel_with_you"),
                (try_begin),
                    (get_player_agent_no, ":var_58"),
                    (agent_is_active, ":var_58"),
                    (agent_add_offer_with_timeout, ":var_58", ":var_3", 10000),
                (try_end),
            (try_end),
        (else_try),
            (eq, ":var_1", 109),
            (store_script_param, ":var_3", 3),
            (store_mission_timer_a, ":var_30"),
            (try_begin),
                (agent_is_active, ":var_3"),
                (get_player_agent_no, ":var_58"),
                (agent_is_active, ":var_58"),
                (agent_get_player_id, ":var_57", ":var_3"),
                (try_begin),
                    (player_is_active, ":var_57"),
                    (str_store_player_username, s0, ":var_57"),
                (else_try),
                    (str_store_agent_name, s0, ":var_3"),
                (try_end),
                (display_message, "str_a_duel_between_you_and_s0_will_start_in_3_seconds"),
                (assign, "$g_multiplayer_duel_start_time", ":var_30"),
                (start_presentation, "prsnt_multiplayer_duel_start_counter"),
                (agent_set_slot, ":var_58", slot_agent_in_duel_with, ":var_3"),
                (agent_set_slot, ":var_3", slot_agent_in_duel_with, ":var_58"),
                (agent_set_slot, ":var_58", slot_agent_duel_start_time, ":var_30"),
                (agent_set_slot, ":var_3", slot_agent_duel_start_time, ":var_30"),
                (agent_clear_relations_with_agents, ":var_58"),
                (agent_clear_relations_with_agents, ":var_3"),
            (try_end),
        (else_try),
            (eq, ":var_1", 110),
            (store_script_param, ":var_3", 3),
            (try_begin),
                (agent_is_active, ":var_3"),
                (agent_get_player_id, ":var_57", ":var_3"),
                (try_begin),
                    (player_is_active, ":var_57"),
                    (str_store_player_username, s0, ":var_57"),
                (else_try),
                    (str_store_agent_name, s0, ":var_3"),
                (try_end),
                (display_message, "str_your_duel_with_s0_is_cancelled"),
            (try_end),
            (try_begin),
                (get_player_agent_no, ":var_58"),
                (agent_is_active, ":var_58"),
                (agent_set_slot, ":var_58", slot_agent_in_duel_with, -1),
                (agent_clear_relations_with_agents, ":var_58"),
            (try_end),
        (else_try),
            (eq, ":var_1", 111),
            (display_message, "str_server_s0", 0xFFFF6666),
        (try_end),

]),

("cf_multiplayer_evaluate_poll",
[
    (assign, ":var_0", 0),
    (assign, "$g_multiplayer_poll_ended", 1),
    (store_add, ":var_1", "$g_multiplayer_poll_yes_count", "$g_multiplayer_poll_no_count"),
    (store_sub, ":var_2", "$g_multiplayer_poll_num_sent", ":var_1"),
    (store_mul, ":var_3", 3, ":var_2"),
    (val_div, ":var_3", 10),
    (val_add, ":var_1", ":var_3"),
    (val_max, ":var_1", 1),
    (store_mul, ":var_4", 100, "$g_multiplayer_poll_yes_count"),
    (val_div, ":var_4", ":var_1"),
    (try_begin),
        (ge, ":var_4", "$g_multiplayer_valid_vote_ratio"),
        (assign, ":var_0", 1),
        (try_begin),
            (eq, "$g_multiplayer_poll_to_show", 1),
            (try_begin),
                (player_is_active, "$g_multiplayer_poll_value_to_show"),
                (kick_player, "$g_multiplayer_poll_value_to_show"),
            (try_end),
        (else_try),
            (eq, "$g_multiplayer_poll_to_show", 2),
            (ban_player_using_saved_ban_info),
        (else_try),
            (eq, "$g_multiplayer_poll_to_show", 3),
            (team_set_faction, 0, "$g_multiplayer_poll_value_2_to_show"),
            (team_set_faction, 1, "$g_multiplayer_poll_value_3_to_show"),
        (else_try),
            (eq, "$g_multiplayer_poll_to_show", 4),
            (assign, "$g_multiplayer_num_bots_team_1", "$g_multiplayer_poll_value_to_show"),
            (assign, "$g_multiplayer_num_bots_team_2", "$g_multiplayer_poll_value_2_to_show"),
            (get_max_players, ":var_5"),
            (try_for_range, ":var_6", 1, ":var_5"),
                (player_is_active, ":var_6"),
                (multiplayer_send_2_int_to_player, ":var_6", 51, 1, "$g_multiplayer_num_bots_team_1"),
                (multiplayer_send_2_int_to_player, ":var_6", 51, 2, "$g_multiplayer_num_bots_team_2"),
            (try_end),
        (try_end),
    (else_try),
        (assign, "$g_multiplayer_poll_running", 0),
    (try_end),
    (get_max_players, ":var_5"),
    (call_script, "script_show_multiplayer_message", 7, ":var_0"),
    (try_for_range, ":var_6", 1, ":var_5"),
        (player_is_active, ":var_6"),
        (multiplayer_send_2_int_to_player, ":var_6", 68, 7, ":var_0"),
    (try_end),
    (eq, ":var_0", 1),

]),

("multiplayer_accept_duel",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (try_begin),
        (agent_slot_ge, ":var_0", slot_agent_in_duel_with, 0),
        (agent_get_slot, ":var_2", ":var_0", slot_agent_in_duel_with),
        (agent_is_active, ":var_2"),
        (agent_clear_relations_with_agents, ":var_2"),
        (agent_set_slot, ":var_2", slot_agent_in_duel_with, -1),
        (agent_get_player_id, ":var_3", ":var_2"),
        (try_begin),
            (player_is_active, ":var_3"),
            (multiplayer_send_int_to_player, ":var_3", 110, ":var_0"),
        (else_try),
            (agent_force_rethink, ":var_2"),
        (try_end),
    (try_end),
    (try_begin),
        (agent_slot_ge, ":var_1", slot_agent_in_duel_with, 0),
        (agent_get_slot, ":var_2", ":var_1", slot_agent_in_duel_with),
        (agent_is_active, ":var_2"),
        (agent_clear_relations_with_agents, ":var_2"),
        (agent_set_slot, ":var_2", slot_agent_in_duel_with, -1),
        (try_begin),
            (player_is_active, ":var_3"),
            (multiplayer_send_int_to_player, ":var_3", 110, ":var_1"),
        (else_try),
            (agent_force_rethink, ":var_2"),
        (try_end),
    (try_end),
    (agent_set_slot, ":var_0", slot_agent_in_duel_with, ":var_1"),
    (agent_set_slot, ":var_1", slot_agent_in_duel_with, ":var_0"),
    (agent_clear_relations_with_agents, ":var_0"),
    (agent_clear_relations_with_agents, ":var_1"),
    (agent_get_player_id, ":var_3", ":var_0"),
    (store_mission_timer_a, ":var_4"),
    (try_begin),
        (player_is_active, ":var_3"),
        (multiplayer_send_int_to_player, ":var_3", 109, ":var_1"),
    (else_try),
        (agent_force_rethink, ":var_0"),
    (try_end),
    (agent_set_slot, ":var_0", slot_agent_duel_start_time, ":var_4"),
    (agent_get_player_id, ":var_5", ":var_1"),
    (try_begin),
        (player_is_active, ":var_5"),
        (multiplayer_send_int_to_player, ":var_5", 109, ":var_0"),
    (else_try),
        (agent_force_rethink, ":var_1"),
    (try_end),
    (agent_set_slot, ":var_1", slot_agent_duel_start_time, ":var_4"),

]),

("game_get_multiplayer_server_option_for_mission_template",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (try_begin),
        (eq, ":var_1", 0),
        (assign, reg0, "$g_multiplayer_team_1_faction"),
        (set_trigger_result, 1),
    (else_try),
        (eq, ":var_1", 1),
        (assign, reg0, "$g_multiplayer_team_2_faction"),
        (set_trigger_result, 1),
    (else_try),
        (eq, ":var_1", 2),
        (assign, reg0, "$g_multiplayer_num_bots_team_1"),
        (set_trigger_result, 1),
    (else_try),
        (eq, ":var_1", 3),
        (assign, reg0, "$g_multiplayer_num_bots_team_2"),
        (set_trigger_result, 1),
    (else_try),
        (eq, ":var_1", 4),
        (server_get_friendly_fire, reg0),
        (set_trigger_result, 1),
    (else_try),
        (eq, ":var_1", 5),
        (server_get_melee_friendly_fire, reg0),
        (set_trigger_result, 1),
    (else_try),
        (eq, ":var_1", 6),
        (server_get_friendly_fire_damage_self_ratio, reg0),
        (set_trigger_result, 1),
    (else_try),
        (eq, ":var_1", 7),
        (server_get_friendly_fire_damage_friend_ratio, reg0),
        (set_trigger_result, 1),
    (else_try),
        (eq, ":var_1", 8),
        (server_get_ghost_mode, reg0),
        (set_trigger_result, 1),
    (else_try),
        (eq, ":var_1", 9),
        (server_get_control_block_dir, reg0),
        (set_trigger_result, 1),
    (else_try),
        (eq, ":var_1", 10),
        (server_get_combat_speed, reg0),
        (set_trigger_result, 1),
    (else_try),
        (try_begin),
            (eq, ":var_0", "mt_multiplayer_hq"),
            (val_add, ":var_1", 1),
        (try_end),
        (eq, ":var_1", 11),
        (assign, reg0, "$g_multiplayer_game_max_minutes"),
        (set_trigger_result, 1),
    (else_try),
        (try_begin),
            (neg|eq, ":var_0", "mt_multiplayer_bt"),
            (neg|eq, ":var_0", "mt_multiplayer_fd"),
            (neg|eq, ":var_0", "mt_multiplayer_sg"),
            (val_add, ":var_1", 1),
        (try_end),
        (eq, ":var_1", 12),
        (assign, reg0, "$g_multiplayer_round_max_seconds"),
        (set_trigger_result, 1),
    (else_try),
        (try_begin),
            (neg|eq, ":var_0", "mt_multiplayer_bt"),
            (neg|eq, ":var_0", "mt_multiplayer_fd"),
            (val_add, ":var_1", 1),
        (try_end),
        (eq, ":var_1", 13),
        (assign, reg0, "$g_multiplayer_player_respawn_as_bot"),
        (set_trigger_result, 1),
    (else_try),
        (try_begin),
            (neg|eq, ":var_0", "mt_multiplayer_sg"),
            (val_add, ":var_1", 1),
        (try_end),
        (eq, ":var_1", 14),
        (assign, reg0, "$g_multiplayer_number_of_respawn_count"),
        (set_trigger_result, 1),
    (else_try),
        (eq, ":var_1", 15),
        (assign, reg0, "$g_multiplayer_game_max_points"),
        (set_trigger_result, 1),
    (else_try),
        (try_begin),
            (neg|eq, ":var_0", "mt_multiplayer_hq"),
            (val_add, ":var_1", 1),
        (try_end),
        (eq, ":var_1", 16),
        (assign, reg0, "$g_multiplayer_point_gained_from_flags"),
        (set_trigger_result, 1),
    (else_try),
        (try_begin),
            (neg|eq, ":var_0", "mt_multiplayer_cf"),
            (val_add, ":var_1", 1),
        (try_end),
        (eq, ":var_1", 17),
        (assign, reg0, "$g_multiplayer_point_gained_from_capturing_flag"),
        (set_trigger_result, 1),
    (else_try),
        (eq, ":var_1", 18),
        (assign, reg0, "$g_multiplayer_respawn_period"),
        (set_trigger_result, 1),
    (else_try),
        (eq, ":var_1", 19),
        (assign, reg0, "$g_multiplayer_initial_gold_multiplier"),
        (set_trigger_result, 1),
    (else_try),
        (eq, ":var_1", 20),
        (assign, reg0, "$g_multiplayer_battle_earnings_multiplier"),
        (set_trigger_result, 1),
    (else_try),
        (try_begin),
            (neg|eq, ":var_0", "mt_multiplayer_bt"),
            (neg|eq, ":var_0", "mt_multiplayer_fd"),
            (neg|eq, ":var_0", "mt_multiplayer_sg"),
            (val_add, ":var_1", 1),
        (try_end),
        (eq, ":var_1", 21),
        (assign, reg0, "$g_multiplayer_round_earnings_multiplier"),
        (set_trigger_result, 1),
    (try_end),

]),

("game_multiplayer_server_option_for_mission_template_to_string",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (str_clear, s0),
    (try_begin),
        (eq, ":var_1", 0),
        (assign, reg1, 1),
        (str_store_string, s0, "str_team_reg1_faction"),
        (str_store_faction_name, s1, ":var_2"),
        (str_store_string, s0, "str_s0_s1"),
    (else_try),
        (eq, ":var_1", 1),
        (assign, reg1, 2),
        (str_store_string, s0, "str_team_reg1_faction"),
        (str_store_faction_name, s1, ":var_2"),
        (str_store_string, s0, "str_s0_s1"),
    (else_try),
        (eq, ":var_1", 2),
        (assign, reg1, 1),
        (str_store_string, s0, "str_number_of_bots_in_team_reg1"),
        (assign, reg0, ":var_2"),
        (str_store_string, s0, "str_s0_reg0"),
    (else_try),
        (eq, ":var_1", 3),
        (assign, reg1, 2),
        (str_store_string, s0, "str_number_of_bots_in_team_reg1"),
        (assign, reg0, ":var_2"),
        (str_store_string, s0, "str_s0_reg0"),
    (else_try),
        (eq, ":var_1", 4),
        (str_store_string, s0, "str_allow_friendly_fire"),
        (try_begin),
            (eq, ":var_2", 0),
            (str_store_string, s1, "str_no_wo_dot"),
        (else_try),
            (str_store_string, s1, "str_yes_wo_dot"),
        (try_end),
        (str_store_string, s0, "str_s0_s1"),
    (else_try),
        (eq, ":var_1", 5),
        (str_store_string, s0, "str_allow_melee_friendly_fire"),
        (try_begin),
            (eq, ":var_2", 0),
            (str_store_string, s1, "str_no_wo_dot"),
        (else_try),
            (str_store_string, s1, "str_yes_wo_dot"),
        (try_end),
        (str_store_string, s0, "str_s0_s1"),
    (else_try),
        (eq, ":var_1", 6),
        (str_store_string, s0, "str_friendly_fire_damage_self_ratio"),
        (assign, reg0, ":var_2"),
        (str_store_string, s0, "str_s0_reg0"),
    (else_try),
        (eq, ":var_1", 7),
        (str_store_string, s0, "str_friendly_fire_damage_friend_ratio"),
        (assign, reg0, ":var_2"),
        (str_store_string, s0, "str_s0_reg0"),
    (else_try),
        (eq, ":var_1", 8),
        (str_store_string, s0, "str_spectator_camera"),
        (try_begin),
            (eq, ":var_2", 0),
            (str_store_string, s1, "str_free"),
        (else_try),
            (eq, ":var_2", 1),
            (str_store_string, s1, "str_stick_to_any_player"),
        (else_try),
            (eq, ":var_2", 2),
            (str_store_string, s1, "str_stick_to_team_members"),
        (else_try),
            (str_store_string, s1, "str_stick_to_team_members_view"),
        (try_end),
        (str_store_string, s0, "str_s0_s1"),
    (else_try),
        (eq, ":var_1", 9),
        (str_store_string, s0, "str_control_block_direction"),
        (try_begin),
            (eq, ":var_2", 0),
            (str_store_string, s1, "str_automatic"),
        (else_try),
            (str_store_string, s1, "str_by_mouse_movement"),
        (try_end),
        (str_store_string, s0, "str_s0_s1"),
    (else_try),
        (eq, ":var_1", 10),
        (str_store_string, s0, "str_combat_speed"),
        (try_begin),
            (eq, ":var_2", 0),
            (str_store_string, s1, "str_combat_speed_0"),
        (else_try),
            (eq, ":var_2", 1),
            (str_store_string, s1, "str_combat_speed_1"),
        (else_try),
            (eq, ":var_2", 2),
            (str_store_string, s1, "str_combat_speed_2"),
        (else_try),
            (eq, ":var_2", 3),
            (str_store_string, s1, "str_combat_speed_3"),
        (else_try),
            (str_store_string, s1, "str_combat_speed_4"),
        (try_end),
        (str_store_string, s0, "str_s0_s1"),
    (else_try),
        (try_begin),
            (eq, ":var_0", "mt_multiplayer_hq"),
            (val_add, ":var_1", 1),
        (try_end),
        (eq, ":var_1", 11),
        (str_store_string, s0, "str_map_time_limit"),
        (assign, reg0, ":var_2"),
        (str_store_string, s0, "str_s0_reg0"),
    (else_try),
        (try_begin),
            (neg|eq, ":var_0", "mt_multiplayer_bt"),
            (neg|eq, ":var_0", "mt_multiplayer_fd"),
            (neg|eq, ":var_0", "mt_multiplayer_sg"),
            (val_add, ":var_1", 1),
        (try_end),
        (eq, ":var_1", 12),
        (str_store_string, s0, "str_round_time_limit"),
        (assign, reg0, ":var_2"),
        (str_store_string, s0, "str_s0_reg0"),
    (else_try),
        (try_begin),
            (neg|eq, ":var_0", "mt_multiplayer_bt"),
            (neg|eq, ":var_0", "mt_multiplayer_fd"),
            (val_add, ":var_1", 1),
        (try_end),
        (eq, ":var_1", 13),
        (str_store_string, s0, "str_players_take_control_of_a_bot_after_death"),
        (try_begin),
            (eq, ":var_2", 0),
            (str_store_string, s1, "str_no_wo_dot"),
        (else_try),
            (str_store_string, s1, "str_yes_wo_dot"),
        (try_end),
        (str_store_string, s0, "str_s0_s1"),
    (else_try),
        (try_begin),
            (neg|eq, ":var_0", "mt_multiplayer_sg"),
            (val_add, ":var_1", 1),
        (try_end),
        (eq, ":var_1", 14),
        (str_store_string, s0, "str_defender_spawn_count_limit"),
        (try_begin),
            (eq, ":var_2", 0),
            (str_store_string, s1, "str_unlimited"),
        (else_try),
            (assign, reg1, ":var_2"),
            (str_store_string, s1, "str_reg1"),
        (try_end),
        (str_store_string, s0, "str_s0_s1"),
    (else_try),
        (eq, ":var_1", 15),
        (str_store_string, s0, "str_team_points_limit"),
        (assign, reg0, ":var_2"),
        (str_store_string, s0, "str_s0_reg0"),
    (else_try),
        (try_begin),
            (neg|eq, ":var_0", "mt_multiplayer_hq"),
            (val_add, ":var_1", 1),
        (try_end),
        (eq, ":var_1", 16),
        (str_store_string, s0, "str_point_gained_from_flags"),
        (assign, reg0, ":var_2"),
        (str_store_string, s0, "str_s0_reg0"),
    (else_try),
        (try_begin),
            (neg|eq, ":var_0", "mt_multiplayer_cf"),
            (val_add, ":var_1", 1),
        (try_end),
        (eq, ":var_1", 17),
        (str_store_string, s0, "str_point_gained_from_capturing_flag"),
        (assign, reg0, ":var_2"),
        (str_store_string, s0, "str_s0_reg0"),
    (else_try),
        (eq, ":var_1", 18),
        (str_store_string, s0, "str_respawn_period"),
        (assign, reg0, ":var_2"),
        (str_store_string, s0, "str_s0_reg0"),
    (else_try),
        (eq, ":var_1", 19),
        (str_store_string, s0, "str_initial_gold_multiplier"),
        (assign, reg0, ":var_2"),
        (str_store_string, s0, "str_s0_reg0"),
    (else_try),
        (eq, ":var_1", 20),
        (str_store_string, s0, "str_battle_earnings_multiplier"),
        (assign, reg0, ":var_2"),
        (str_store_string, s0, "str_s0_reg0"),
    (else_try),
        (try_begin),
            (neg|eq, ":var_0", "mt_multiplayer_bt"),
            (neg|eq, ":var_0", "mt_multiplayer_fd"),
            (neg|eq, ":var_0", "mt_multiplayer_sg"),
            (val_add, ":var_1", 1),
        (try_end),
        (eq, ":var_1", 21),
        (str_store_string, s0, "str_round_earnings_multiplier"),
        (assign, reg0, ":var_2"),
        (str_store_string, s0, "str_s0_reg0"),
    (try_end),

]),

("cf_multiplayer_team_is_available",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (assign, ":var_2", 1),
    (try_begin),
        (neg|eq, "$g_multiplayer_game_type", 0),
        (neg|eq, "$g_multiplayer_game_type", 7),
        (is_between, ":var_1", 0, 2),
        (neg|teams_are_enemies, ":var_1", ":var_1"),
        (assign, ":var_2", 0),
        (assign, ":var_3", 0),
        (assign, ":var_4", 0),
        (get_max_players, ":var_5"),
        (try_for_range, ":var_6", 0, ":var_5"),
            (player_is_active, ":var_6"),
            (neg|eq, ":var_6", ":var_0"),
            (player_get_team_no, ":var_7", ":var_6"),
            (try_begin),
                (eq, ":var_7", 0),
                (val_add, ":var_3", 1),
            (else_try),
                (eq, ":var_7", 1),
                (val_add, ":var_4", 1),
            (try_end),
        (try_end),
        (store_sub, ":var_8", ":var_3", ":var_4"),
        (try_begin),
            (ge, ":var_8", 0),
            (val_add, ":var_8", 1),
        (else_try),
            (val_add, ":var_8", -1),
        (try_end),
        (try_begin),
            (eq, ":var_1", 0),
            (neg|ge, ":var_8", "$g_multiplayer_auto_team_balance_limit"),
            (assign, ":var_2", 1),
        (else_try),
            (eq, ":var_1", 1),
            (store_mul, ":var_9", "$g_multiplayer_auto_team_balance_limit", -1),
            (gt, ":var_8", ":var_9"),
            (assign, ":var_2", 1),
        (try_end),
    (try_end),
    (eq, ":var_2", 1),

]),

("find_number_of_agents_constant",
[
    (assign, ":var_0", 0),
    (try_for_agents, ":var_1"),
        (agent_is_human, ":var_1"),
        (val_add, ":var_0", 1),
    (try_end),
    (try_begin),
        (neg|gt, ":var_0", 2),
        (assign, reg0, 100),
    (else_try),
        (neg|gt, ":var_0", 4),
        (assign, reg0, 140),
    (else_try),
        (neg|gt, ":var_0", 7),
        (assign, reg0, 180),
    (else_try),
        (neg|gt, ":var_0", 11),
        (assign, reg0, 220),
    (else_try),
        (neg|gt, ":var_0", 17),
        (assign, reg0, 260),
    (else_try),
        (neg|gt, ":var_0", 25),
        (assign, reg0, 300),
    (else_try),
        (neg|gt, ":var_0", 36),
        (assign, reg0, 340),
    (else_try),
        (neg|gt, ":var_0", 50),
        (assign, reg0, 380),
    (else_try),
        (neg|gt, ":var_0", 68),
        (assign, reg0, 420),
    (else_try),
        (neg|gt, ":var_0", 91),
        (assign, reg0, 460),
    (else_try),
        (assign, reg0, 500),
    (try_end),

]),

("game_multiplayer_event_duel_offered",
[
    (store_script_param, ":var_0", 1),
    (get_player_agent_no, ":var_1"),
    (try_begin),
        (agent_is_active, ":var_1"),
        (this_or_next|agent_slot_eq, ":var_1", slot_agent_in_duel_with, -1),
        (agent_check_offer_from_agent, ":var_1", ":var_0"),
        (neg|agent_slot_eq, ":var_1", slot_agent_in_duel_with, ":var_0"),
        (multiplayer_send_int_to_server, 46, ":var_0"),
        (agent_get_player_id, ":var_2", ":var_0"),
        (try_begin),
            (player_is_active, ":var_2"),
            (str_store_player_username, s0, ":var_2"),
        (else_try),
            (str_store_agent_name, s0, ":var_0"),
        (try_end),
        (display_message, "str_a_duel_request_is_sent_to_s0"),
    (try_end),

]),

("game_get_multiplayer_game_type_enum",
[
    (assign, reg0, 0),
    (assign, reg1, 8),

]),

("game_multiplayer_get_game_type_mission_template",
[
    (assign, ":var_0", -1),
    (store_script_param, ":var_1", 1),
    (try_begin),
        (eq, ":var_1", 0),
        (assign, ":var_0", "mt_multiplayer_dm"),
    (else_try),
        (eq, ":var_1", 1),
        (assign, ":var_0", "mt_multiplayer_tdm"),
    (else_try),
        (eq, ":var_1", 2),
        (assign, ":var_0", "mt_multiplayer_bt"),
    (else_try),
        (eq, ":var_1", 3),
        (assign, ":var_0", "mt_multiplayer_fd"),
    (else_try),
        (eq, ":var_1", 4),
        (assign, ":var_0", "mt_multiplayer_cf"),
    (else_try),
        (eq, ":var_1", 5),
        (assign, ":var_0", "mt_multiplayer_hq"),
    (else_try),
        (eq, ":var_1", 6),
        (assign, ":var_0", "mt_multiplayer_sg"),
    (else_try),
        (eq, ":var_1", 7),
        (assign, ":var_0", "mt_multiplayer_duel"),
    (try_end),
    (assign, reg0, ":var_0"),

]),

("multiplayer_get_mission_template_game_type",
[
    (store_script_param, ":var_0", 1),
    (assign, ":var_1", -1),
    (try_begin),
        (eq, ":var_0", "mt_multiplayer_dm"),
        (assign, ":var_1", 0),
    (else_try),
        (eq, ":var_0", "mt_multiplayer_tdm"),
        (assign, ":var_1", 1),
    (else_try),
        (eq, ":var_0", "mt_multiplayer_bt"),
        (assign, ":var_1", 2),
    (else_try),
        (eq, ":var_0", "mt_multiplayer_fd"),
        (assign, ":var_1", 3),
    (else_try),
        (eq, ":var_0", "mt_multiplayer_cf"),
        (assign, ":var_1", 4),
    (else_try),
        (eq, ":var_0", "mt_multiplayer_hq"),
        (assign, ":var_1", 5),
    (else_try),
        (eq, ":var_0", "mt_multiplayer_sg"),
        (assign, ":var_1", 6),
    (else_try),
        (eq, ":var_0", "mt_multiplayer_duel"),
        (assign, ":var_1", 7),
    (try_end),
    (assign, reg0, ":var_1"),

]),

("multiplayer_fill_available_factions_combo_button",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (try_for_range, ":var_2", "fac_kingdom_1", "fac_kingdoms_end"),
        (str_store_faction_name, s0, ":var_2"),
        (overlay_add_item, ":var_0", 0),
    (try_end),
    (val_sub, ":var_1", "fac_kingdom_1"),
    (overlay_set_val, ":var_0", ":var_1"),

]),

("multiplayer_get_troop_class",
[
    (store_script_param_1, ":var_0"),
    (assign, ":var_1", 0),
    (try_begin),
        (this_or_next|eq, ":var_0", "trp_vaegir_archer_multiplayer"),
        (this_or_next|eq, ":var_0", "trp_nord_archer_multiplayer"),
        (eq, ":var_0", "trp_sarranid_archer_multiplayer"),
        (assign, ":var_1", 4),
    (else_try),
        (this_or_next|eq, ":var_0", "trp_swadian_man_at_arms_multiplayer"),
        (this_or_next|eq, ":var_0", "trp_nord_scout_multiplayer"),
        (this_or_next|eq, ":var_0", "trp_rhodok_horseman_multiplayer"),
        (this_or_next|eq, ":var_0", "trp_sarranid_mamluke_multiplayer"),
        (eq, ":var_0", "trp_vaegir_horseman_multiplayer"),
        (assign, ":var_1", 3),
    (else_try),
        (eq, ":var_0", "trp_khergit_veteran_horse_archer_multiplayer"),
        (assign, ":var_1", 6),
    (else_try),
        (this_or_next|eq, ":var_0", "trp_swadian_crossbowman_multiplayer"),
        (eq, ":var_0", "trp_rhodok_veteran_crossbowman_multiplayer"),
        (assign, ":var_1", 5),
    (else_try),
        (this_or_next|eq, ":var_0", "trp_swadian_infantry_multiplayer"),
        (this_or_next|eq, ":var_0", "trp_sarranid_footman_multiplayer"),
        (eq, ":var_0", "trp_nord_veteran_multiplayer"),
        (assign, ":var_1", 1),
    (else_try),
        (eq, ":var_0", "trp_vaegir_spearman_multiplayer"),
        (assign, ":var_1", 2),
    (try_end),
    (assign, reg0, ":var_1"),

]),

("multiplayer_clear_player_selected_items",
[
    (store_script_param, ":var_0", 1),
    (try_for_range, ":var_1", 2, 11),
        (player_set_slot, ":var_0", ":var_1", -1),
    (try_end),

]),

("multiplayer_init_player_slots",
[
    (store_script_param, ":var_0", 1),
    (call_script, "script_multiplayer_clear_player_selected_items", ":var_0"),
    (player_set_slot, ":var_0", 0, 0),
    (player_set_slot, ":var_0", 1, 0),
    (player_set_slot, ":var_0", 26, 0),
    (player_set_slot, ":var_0", 35, 0),
    (player_set_slot, ":var_0", 36, 0),
    (player_set_slot, ":var_0", 37, 0),
    (player_set_slot, ":var_0", 38, 0),

]),

("multiplayer_initialize_belfry_wheel_rotations",
[
    (scene_prop_get_num_instances, ":var_0", "spr_belfry_wheel"),
    (try_for_range, ":var_1", 0, ":var_0"),
        (scene_prop_get_instance, ":var_2", "spr_belfry_wheel", ":var_1"),
        (prop_instance_initialize_rotation_angles, ":var_2"),
    (try_end),
    (scene_prop_get_num_instances, ":var_3", "spr_winch"),
    (try_for_range, ":var_4", 0, ":var_3"),
        (scene_prop_get_instance, ":var_5", "spr_winch", ":var_4"),
        (prop_instance_initialize_rotation_angles, ":var_5"),
    (try_end),
    (scene_prop_get_num_instances, ":var_6", "spr_winch_b"),
    (try_for_range, ":var_7", 0, ":var_6"),
        (scene_prop_get_instance, ":var_8", "spr_winch_b", ":var_7"),
        (prop_instance_initialize_rotation_angles, ":var_8"),
    (try_end),

]),

("send_open_close_information_of_object",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (scene_prop_get_num_instances, ":var_2", ":var_1"),
    (try_for_range, ":var_3", 0, ":var_2"),
        (scene_prop_get_instance, ":var_4", ":var_1", ":var_3"),
        (scene_prop_get_slot, ":var_5", ":var_4", 1),
        (try_begin),
            (eq, ":var_5", 1),
            (multiplayer_send_int_to_player, ":var_0", 77, ":var_4"),
        (try_end),
    (try_end),

]),

("multiplayer_send_initial_information",
[
    (store_script_param, ":var_0", 1),
    (multiplayer_send_2_int_to_player, ":var_0", 51, 1, "$g_multiplayer_num_bots_team_1"),
    (multiplayer_send_2_int_to_player, ":var_0", 51, 2, "$g_multiplayer_num_bots_team_2"),
    (multiplayer_send_int_to_player, ":var_0", 93, "$g_multiplayer_auto_team_balance_limit"),
    (multiplayer_send_int_to_player, ":var_0", 81, "$g_multiplayer_num_bots_voteable"),
    (multiplayer_send_int_to_player, ":var_0", 82, "$g_multiplayer_factions_voteable"),
    (multiplayer_send_int_to_player, ":var_0", 83, "$g_multiplayer_maps_voteable"),
    (multiplayer_send_int_to_player, ":var_0", 90, "$g_multiplayer_kick_voteable"),
    (multiplayer_send_int_to_player, ":var_0", 91, "$g_multiplayer_ban_voteable"),
    (multiplayer_send_int_to_player, ":var_0", 102, "$g_multiplayer_allow_player_banners"),
    (multiplayer_send_int_to_player, ":var_0", 103, "$g_multiplayer_force_default_armor"),
    (multiplayer_send_int_to_player, ":var_0", 112, "$g_multiplayer_disallow_ranged_weapons"),
    (multiplayer_send_int_to_player, ":var_0", 57, "$g_multiplayer_respawn_period"),
    (multiplayer_send_int_to_player, ":var_0", 59, "$g_multiplayer_round_max_seconds"),
    (multiplayer_send_int_to_player, ":var_0", 65, "$g_multiplayer_game_type"),
    (multiplayer_send_int_to_player, ":var_0", 85, "$g_multiplayer_player_respawn_as_bot"),
    (store_mission_timer_a, ":var_1"),
    (multiplayer_send_int_to_player, ":var_0", 107, ":var_1"),
    (try_begin),
        (eq, "$g_multiplayer_game_type", 6),
        (multiplayer_send_int_to_player, ":var_0", 88, "$g_multiplayer_number_of_respawn_count"),
    (try_end),
    (try_for_agents, ":var_2"),
        (agent_is_human, ":var_2"),
        (agent_get_attached_scene_prop, ":var_3", ":var_2"),
        (ge, ":var_3", 0),
        (multiplayer_send_2_int_to_player, ":var_0", 70, ":var_2", ":var_3"),
    (try_end),
    (call_script, "script_send_open_close_information_of_object", ":var_0", "spr_siege_ladder_move_6m"),
    (call_script, "script_send_open_close_information_of_object", ":var_0", "spr_siege_ladder_move_8m"),
    (call_script, "script_send_open_close_information_of_object", ":var_0", "spr_siege_ladder_move_10m"),
    (call_script, "script_send_open_close_information_of_object", ":var_0", "spr_siege_ladder_move_12m"),
    (call_script, "script_send_open_close_information_of_object", ":var_0", "spr_siege_ladder_move_14m"),
    (call_script, "script_send_open_close_information_of_object", ":var_0", "spr_winch_b"),
    (call_script, "script_send_open_close_information_of_object", ":var_0", "spr_castle_e_sally_door_a"),
    (call_script, "script_send_open_close_information_of_object", ":var_0", "spr_castle_f_sally_door_a"),
    (call_script, "script_send_open_close_information_of_object", ":var_0", "spr_earth_sally_gate_left"),
    (call_script, "script_send_open_close_information_of_object", ":var_0", "spr_earth_sally_gate_right"),
    (call_script, "script_send_open_close_information_of_object", ":var_0", "spr_viking_keep_destroy_sally_door_left"),
    (call_script, "script_send_open_close_information_of_object", ":var_0", "spr_viking_keep_destroy_sally_door_right"),
    (call_script, "script_send_open_close_information_of_object", ":var_0", "spr_castle_f_door_a"),
    (call_script, "script_send_open_close_information_of_object", ":var_0", "spr_door_destructible"),
    (call_script, "script_send_open_close_information_of_object", ":var_0", "spr_castle_f_door_b"),
    (try_begin),
        (this_or_next|eq, "$g_multiplayer_game_type", 2),
        (this_or_next|eq, "$g_multiplayer_game_type", 3),
        (eq, "$g_multiplayer_game_type", 6),
        (store_mission_timer_a, ":var_4"),
        (val_sub, ":var_4", "$g_round_start_time"),
        (val_mul, ":var_4", -1),
        (multiplayer_send_int_to_player, ":var_0", 78, ":var_4"),
    (else_try),
        (eq, "$g_multiplayer_game_type", 4),
        (team_get_slot, ":var_5", 0, 0),
        (multiplayer_send_2_int_to_player, ":var_0", 71, 0, ":var_5"),
        (team_get_slot, ":var_6", 1, 0),
        (multiplayer_send_2_int_to_player, ":var_0", 71, 1, ":var_6"),
    (else_try),
        (this_or_next|eq, "$g_multiplayer_game_type", 5),
        (eq, "$g_multiplayer_game_type", 6),
        (try_for_range, ":var_7", 0, "$g_number_of_flags"),
            (assign, ":var_8", 0),
            (assign, ":var_9", 0),
            (scene_prop_get_instance, ":var_10", "spr_headquarters_pole_code_only", ":var_7"),
            (prop_instance_get_position, pos0, ":var_10"),
            (try_for_agents, ":var_2"),
                (agent_is_human, ":var_2"),
                (agent_is_alive, ":var_2"),
                (neg|agent_is_non_player, ":var_2"),
                (agent_get_team, ":var_11", ":var_2"),
                (agent_get_position, pos1, ":var_2"),
                (get_sq_distance_between_positions, ":var_12", pos0, pos1),
                (get_sq_distance_between_position_heights, ":var_13", pos0, pos1),
                (val_add, ":var_12", ":var_13"),
                (neg|ge, ":var_12", 1600),
                (try_begin),
                    (eq, ":var_11", 0),
                    (val_add, ":var_8", 1),
                (else_try),
                    (eq, ":var_11", 1),
                    (val_add, ":var_9", 1),
                (try_end),
            (try_end),
            (store_mul, ":var_14", ":var_8", 100),
            (val_add, ":var_14", ":var_9"),
            (multiplayer_send_2_int_to_player, ":var_0", 73, ":var_7", ":var_14"),
        (try_end),
        (assign, "$g_placing_initial_flags", 1),
        (try_for_range, ":var_15", 0, "$g_number_of_flags"),
            (store_add, ":var_16", 146, ":var_15"),
            (troop_get_slot, ":var_17", "trp_multiplayer_data", ":var_16"),
            (store_mul, ":var_18", ":var_17", 100),
            (val_add, ":var_18", ":var_17"),
            (val_add, ":var_18", 1),
            (val_mul, ":var_18", -1),
            (multiplayer_send_2_int_to_player, ":var_0", 75, ":var_15", ":var_18"),
        (try_end),
        (assign, "$g_placing_initial_flags", 0),
    (try_end),

]),

("multiplayer_remove_headquarters_flags",
[
    (store_add, ":var_0", "spr_headquarters_flag_gray", 1),
    (try_for_range, ":var_1", "spr_headquarters_flag_red", ":var_0"),
        (replace_scene_props, ":var_1", "spr_empty"),
    (try_end),

]),

("multiplayer_remove_destroy_mod_targets",
[
    (replace_scene_props, "spr_catapult_destructible", "spr_empty"),
    (replace_scene_props, "spr_trebuchet_destructible", "spr_empty"),

]),

("multiplayer_init_mission_variables",
[
    (assign, "$g_multiplayer_team_1_first_spawn", 1),
    (assign, "$g_multiplayer_team_2_first_spawn", 1),
    (assign, "$g_multiplayer_poll_running", 0),
    (assign, "$g_waiting_for_confirmation_to_terminate", 0),
    (assign, "$g_confirmation_result", 0),
    (assign, "$g_team_balance_next_round", 0),
    (team_get_faction, "$g_multiplayer_team_1_faction", 0),
    (team_get_faction, "$g_multiplayer_team_2_faction", 1),
    (assign, "$g_multiplayer_next_team_1_faction", "$g_multiplayer_team_1_faction"),
    (assign, "$g_multiplayer_next_team_2_faction", "$g_multiplayer_team_2_faction"),
    (assign, "$g_multiplayer_bot_type_1_wanted", 0),
    (assign, "$g_multiplayer_bot_type_2_wanted", 0),
    (assign, "$g_multiplayer_bot_type_3_wanted", 0),
    (assign, "$g_multiplayer_bot_type_4_wanted", 0),
    (call_script, "script_music_set_situation_with_culture", 2048),

]),

("multiplayer_event_mission_end",
[
    (try_begin),
        (multiplayer_get_my_player, ":var_0"),
        (is_between, ":var_0", 0, 1000),
        (player_get_kill_count, ":var_1", ":var_0"),
        (player_get_death_count, ":var_2", ":var_0"),
        (gt, ":var_1", ":var_2"),
        (unlock_achievement, 63),
    (try_end),

]),

("multiplayer_event_agent_killed_or_wounded",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (multiplayer_get_my_player, ":var_2"),
    (try_begin),
        (is_between, ":var_2", 0, 1000),
        (player_get_agent_id, ":var_3", ":var_2"),
        (ge, ":var_3", 0),
        (try_begin),
            (eq, ":var_3", ":var_0"),
            (store_mission_timer_a, "$g_multiplayer_respawn_start_time"),
        (try_end),
        (try_begin),
            (eq, ":var_3", ":var_1"),
            (neg|eq, ":var_3", ":var_0"),
            (agent_is_human, ":var_0"),
            (agent_is_alive, ":var_3"),
            (neg|agent_is_ally, ":var_0"),
            (agent_get_horse, ":var_4", ":var_3"),
            (agent_get_wielded_item, ":var_5", ":var_3", 0),
            (assign, ":var_6", -1),
            (try_begin),
                (ge, ":var_5", 0),
                (item_get_slot, ":var_6", ":var_5", slot_item_multiplayer_item_class),
            (try_end),
            (try_begin),
                (neg|ge, ":var_4", 0),
                (agent_get_horse, ":var_7", ":var_0"),
                (ge, ":var_7", 0),
                (get_achievement_stat, ":var_8", 57, 0),
                (neg|ge, ":var_8", 50),
                (val_add, ":var_8", 1),
                (set_achievement_stat, 57, 0, ":var_8"),
                (ge, ":var_8", 50),
                (unlock_achievement, 57),
            (try_end),
            (try_begin),
                (ge, ":var_4", 0),
                (this_or_next|eq, ":var_6", 12),
                (this_or_next|eq, ":var_6", 13),
                (this_or_next|eq, ":var_6", 16),
                (eq, ":var_6", 17),
                (get_achievement_stat, ":var_8", 58, 0),
                (neg|ge, ":var_8", 100),
                (val_add, ":var_8", 1),
                (set_achievement_stat, 58, 0, ":var_8"),
                (ge, ":var_8", 100),
                (unlock_achievement, 58),
            (try_end),
            (try_begin),
                (this_or_next|eq, ":var_6", 16),
                (eq, ":var_6", 17),
                (get_achievement_stat, ":var_8", 59, 0),
                (neg|ge, ":var_8", 25),
                (val_add, ":var_8", 1),
                (set_achievement_stat, 59, 0, ":var_8"),
                (ge, ":var_8", 25),
                (unlock_achievement, 59),
            (try_end),
            (try_begin),
                (ge, ":var_4", 0),
                (eq, ":var_6", 9),
                (get_achievement_stat, ":var_8", 60, 0),
                (neg|ge, ":var_8", 25),
                (val_add, ":var_8", 1),
                (set_achievement_stat, 60, 0, ":var_8"),
                (ge, ":var_8", 25),
                (unlock_achievement, 60),
            (try_end),
            (try_begin),
                (this_or_next|eq, ":var_6", 1),
                (this_or_next|eq, ":var_6", 2),
                (this_or_next|eq, ":var_6", 5),
                (this_or_next|eq, ":var_6", 6),
                (this_or_next|eq, ":var_6", 7),
                (this_or_next|eq, ":var_5", "itm_sarranid_axe_a"),
                (eq, ":var_5", "itm_sarranid_axe_b"),
                (get_achievement_stat, ":var_8", 64, 0),
                (neg|ge, ":var_8", 50),
                (val_add, ":var_8", 1),
                (set_achievement_stat, 64, 0, ":var_8"),
                (ge, ":var_8", 50),
                (unlock_achievement, 64),
            (try_end),
            (try_begin),
                (this_or_next|eq, ":var_6", 3),
                (neg|eq, ":var_5", "itm_sarranid_axe_b"),
                (neg|eq, ":var_5", "itm_sarranid_axe_a"),
                (get_achievement_stat, ":var_8", 65, 0),
                (neg|ge, ":var_8", 25),
                (val_add, ":var_8", 1),
                (set_achievement_stat, 65, 0, ":var_8"),
                (ge, ":var_8", 25),
                (unlock_achievement, 65),
            (try_end),
            (try_begin),
                (eq, ":var_6", 17),
                (get_achievement_stat, ":var_8", 66, 0),
                (neg|ge, ":var_8", 50),
                (val_add, ":var_8", 1),
                (set_achievement_stat, 66, 0, ":var_8"),
                (ge, ":var_8", 50),
                (unlock_achievement, 66),
            (try_end),
        (try_end),
    (try_end),
    (try_begin),
        (is_between, ":var_2", 0, 1000),
        (player_get_agent_id, ":var_9", ":var_2"),
        (eq, ":var_0", ":var_9"),
        (assign, ":var_10", 0),
        (try_begin),
            (neg|eq, "$g_multiplayer_game_type", 2),
            (neg|eq, "$g_multiplayer_game_type", 3),
            (assign, ":var_10", 1),
        (else_try),
            (eq, "$g_multiplayer_player_respawn_as_bot", 1),
            (player_get_team_no, ":var_11", ":var_2"),
            (assign, ":var_12", 0),
            (try_for_agents, ":var_13"),
                (eq, ":var_12", 0),
                (agent_is_alive, ":var_13"),
                (agent_is_human, ":var_13"),
                (agent_is_non_player, ":var_13"),
                (agent_get_team, ":var_14", ":var_13"),
                (eq, ":var_14", ":var_11"),
                (assign, ":var_12", 1),
            (try_end),
            (eq, ":var_12", 1),
            (assign, ":var_10", 1),
        (try_end),
        (try_begin),
            (eq, "$g_multiplayer_game_type", 6),
            (gt, "$g_multiplayer_number_of_respawn_count", 0),
            (ge, "$g_my_spawn_count", "$g_multiplayer_number_of_respawn_count"),
            (multiplayer_get_my_player, ":var_2"),
            (player_get_team_no, ":var_11", ":var_2"),
            (this_or_next|eq, ":var_11", 0),
            (ge, "$g_my_spawn_count", 999),
            (assign, "$g_show_no_more_respawns_remained", 1),
        (else_try),
            (assign, "$g_show_no_more_respawns_remained", 0),
        (try_end),
        (eq, ":var_10", 1),
        (start_presentation, "prsnt_multiplayer_respawn_time_counter"),
    (try_end),

]),

("multiplayer_get_item_value_for_troop",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (try_begin),
        (call_script, "script_cf_multiplayer_is_item_default_for_troop", ":var_0", ":var_1"),
        (assign, ":var_2", 0),
    (else_try),
        (store_item_value, ":var_2", ":var_0"),
        (store_troop_faction, ":var_3", ":var_1"),
        (store_sub, ":var_4", ":var_3", "fac_kingdom_1"),
        (val_add, ":var_4", 30),
        (item_get_slot, ":var_5", ":var_0", ":var_4"),
        (val_mul, ":var_2", ":var_5"),
        (val_div, ":var_2", 100),
    (try_end),
    (assign, reg0, ":var_2"),

]),

("multiplayer_get_previous_item_for_item_and_troop",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (item_get_slot, ":var_2", ":var_0", slot_item_multiplayer_item_class),
    (call_script, "script_multiplayer_get_item_value_for_troop", ":var_0", ":var_1"),
    (assign, ":var_3", reg0),
    (store_sub, ":var_4", ":var_1", "trp_swadian_crossbowman_multiplayer"),
    (val_add, ":var_4", 61),
    (assign, ":var_5", -1),
    (assign, ":var_6", -1),
    (try_for_range, ":var_7", 0, "itm_pig_killer"),
        (item_slot_eq, ":var_7", slot_item_multiplayer_item_class, ":var_2"),
        (item_slot_ge, ":var_7", ":var_4", 1),
        (call_script, "script_multiplayer_get_item_value_for_troop", ":var_7", ":var_1"),
        (assign, ":var_8", reg0),
        (try_begin),
            (eq, ":var_8", 0),
            (eq, ":var_6", 0),
            (store_item_value, ":var_9", ":var_7"),
            (store_item_value, ":var_10", ":var_5"),
            (try_begin),
                (gt, ":var_9", ":var_10"),
                (assign, ":var_6", ":var_8"),
                (assign, ":var_5", ":var_7"),
            (try_end),
        (else_try),
            (gt, ":var_8", ":var_6"),
            (neg|ge, ":var_8", ":var_3"),
            (assign, ":var_6", ":var_8"),
            (assign, ":var_5", ":var_7"),
        (try_end),
    (try_end),
    (try_begin),
        (eq, ":var_5", -1),
        (assign, ":var_11", -1),
        (try_begin),
            (is_between, ":var_2", 1, 10),
            (assign, ":var_11", 0),
        (else_try),
            (is_between, ":var_2", 10, 12),
            (assign, ":var_11", 1),
        (else_try),
            (eq, ":var_2", 12),
            (assign, ":var_11", 2),
        (else_try),
            (eq, ":var_2", 13),
            (assign, ":var_11", 3),
        (else_try),
            (eq, ":var_2", 14),
            (assign, ":var_11", 4),
        (else_try),
            (eq, ":var_2", 15),
            (assign, ":var_11", 5),
        (else_try),
            (eq, ":var_2", 16),
            (assign, ":var_11", 6),
        (else_try),
            (is_between, ":var_2", 22, 24),
            (assign, ":var_11", 7),
        (else_try),
            (is_between, ":var_2", 19, 22),
            (assign, ":var_11", 8),
        (else_try),
            (is_between, ":var_2", 24, 26),
            (assign, ":var_11", 9),
        (else_try),
            (is_between, ":var_2", 26, 27),
            (assign, ":var_11", 10),
        (else_try),
            (is_between, ":var_2", 18, 19),
            (assign, ":var_11", 11),
        (try_end),
        (neg|eq, ":var_11", 0),
        (assign, ":var_12", "itm_pig_killer"),
        (try_for_range, ":var_7", 0, ":var_12"),
            (item_slot_ge, ":var_7", ":var_4", 1),
            (item_get_slot, ":var_13", ":var_7", slot_item_multiplayer_item_class),
            (try_begin),
                (is_between, ":var_13", 1, 10),
                (assign, ":var_14", 0),
            (else_try),
                (is_between, ":var_13", 10, 12),
                (assign, ":var_14", 1),
            (else_try),
                (eq, ":var_13", 12),
                (assign, ":var_14", 2),
            (else_try),
                (eq, ":var_13", 13),
                (assign, ":var_14", 3),
            (else_try),
                (eq, ":var_13", 14),
                (assign, ":var_14", 4),
            (else_try),
                (eq, ":var_13", 15),
                (assign, ":var_14", 5),
            (else_try),
                (eq, ":var_13", 16),
                (assign, ":var_14", 6),
            (else_try),
                (is_between, ":var_13", 22, 24),
                (assign, ":var_14", 7),
            (else_try),
                (is_between, ":var_13", 19, 22),
                (assign, ":var_14", 8),
            (else_try),
                (is_between, ":var_13", 24, 26),
                (assign, ":var_14", 9),
            (else_try),
                (is_between, ":var_13", 26, 27),
                (assign, ":var_14", 10),
            (else_try),
                (is_between, ":var_13", 18, 19),
                (assign, ":var_14", 11),
            (try_end),
            (eq, ":var_14", ":var_11"),
            (call_script, "script_cf_multiplayer_is_item_default_for_troop", ":var_7", ":var_1"),
            (assign, ":var_5", ":var_7"),
            (assign, ":var_12", 0),
        (try_end),
    (try_end),
    (assign, reg0, ":var_5"),

]),

("cf_multiplayer_is_item_default_for_troop",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (assign, ":var_2", 0),
    (try_begin),
        (neg|is_between, ":var_0", "itm_sumpter_horse", "itm_arrows"),
        (neg|eq, ":var_0", "itm_warhorse_sarranid"),
        (neg|eq, ":var_0", "itm_warhorse_steppe"),
        (troop_get_inventory_capacity, ":var_3", ":var_1"),
        (try_for_range, ":var_4", 0, ":var_3"),
            (troop_get_inventory_slot, ":var_5", ":var_1", ":var_4"),
            (eq, ":var_0", ":var_5"),
            (assign, ":var_2", 1),
            (assign, ":var_3", 0),
        (try_end),
    (try_end),
    (eq, ":var_2", 1),

]),

("multiplayer_calculate_cur_selected_items_cost",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (assign, ":var_2", 0),
    (player_get_troop_id, ":var_3", ":var_0"),
    (try_begin),
        (eq, ":var_1", 0),
        (assign, ":var_4", 11),
        (assign, ":var_5", 20),
    (else_try),
        (assign, ":var_4", 2),
        (assign, ":var_5", 11),
    (try_end),
    (try_for_range, ":var_6", ":var_4", ":var_5"),
        (player_get_slot, ":var_7", ":var_0", ":var_6"),
        (ge, ":var_7", 0),
        (call_script, "script_multiplayer_get_item_value_for_troop", ":var_7", ":var_3"),
        (val_add, ":var_2", reg0),
    (try_end),
    (assign, reg0, ":var_2"),

]),

("multiplayer_set_item_available_for_troop",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_sub, ":var_2", ":var_1", "trp_swadian_crossbowman_multiplayer"),
    (val_add, ":var_2", 61),
    (item_set_slot, ":var_0", ":var_2", 1),

]),

("multiplayer_send_item_selections",
[
    (multiplayer_get_my_player, ":var_0"),
    (try_for_range, ":var_1", 2, 11),
        (player_get_slot, ":var_2", ":var_0", ":var_1"),
        (multiplayer_send_2_int_to_server, 0, ":var_1", ":var_2"),
    (try_end),

]),

("multiplayer_set_default_item_selections_for_troop",
[
    (store_script_param, ":var_0", 1),
    (multiplayer_get_my_player, ":var_1"),
    (call_script, "script_multiplayer_clear_player_selected_items", ":var_1"),
    (assign, ":var_2", 0),
    (troop_get_inventory_capacity, ":var_3", ":var_0"),
    (try_for_range, ":var_4", 0, ":var_3"),
        (troop_get_inventory_slot, ":var_5", ":var_0", ":var_4"),
        (ge, ":var_5", 0),
        (item_get_slot, ":var_6", ":var_5", slot_item_multiplayer_item_class),
        (try_begin),
            (is_between, ":var_6", 1, 18),
            (this_or_next|eq, "$g_multiplayer_disallow_ranged_weapons", 0),
            (neg|is_between, ":var_6", 12, 18),
            (store_add, ":var_7", 2, ":var_2"),
            (player_set_slot, ":var_1", ":var_7", ":var_5"),
            (val_add, ":var_2", 1),
        (else_try),
            (is_between, ":var_6", 22, 24),
            (store_add, ":var_7", 2, 4),
            (player_set_slot, ":var_1", ":var_7", ":var_5"),
        (else_try),
            (is_between, ":var_6", 19, 22),
            (store_add, ":var_7", 2, 5),
            (player_set_slot, ":var_1", ":var_7", ":var_5"),
        (else_try),
            (is_between, ":var_6", 24, 26),
            (store_add, ":var_7", 2, 6),
            (player_set_slot, ":var_1", ":var_7", ":var_5"),
        (else_try),
            (is_between, ":var_6", 26, 27),
            (store_add, ":var_7", 2, 7),
            (player_set_slot, ":var_1", ":var_7", ":var_5"),
        (else_try),
            (is_between, ":var_6", 18, 19),
            (eq, "$g_horses_are_avaliable", 1),
            (store_add, ":var_7", 2, 8),
            (player_set_slot, ":var_1", ":var_7", ":var_5"),
        (try_end),
    (try_end),

]),

("multiplayer_display_available_items_for_troop_and_item_classes",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (store_script_param, ":var_3", 4),
    (store_script_param, ":var_4", 5),
    (assign, ":var_5", 100),
    (try_begin),
        (gt, ":var_3", 500),
        (assign, ":var_5", -100),
    (try_end),
    (store_sub, ":var_6", ":var_0", "trp_swadian_crossbowman_multiplayer"),
    (val_add, ":var_6", 61),
    (try_for_range, ":var_7", 46, 146),
        (troop_set_slot, "trp_multiplayer_data", ":var_7", -1),
    (try_end),
    (assign, ":var_8", 0),
    (try_for_range, ":var_9", 0, "itm_pig_killer"),
        (item_get_slot, ":var_10", ":var_9", slot_item_multiplayer_item_class),
        (is_between, ":var_10", ":var_1", ":var_2"),
        (this_or_next|eq, "$g_multiplayer_disallow_ranged_weapons", 0),
        (neg|is_between, ":var_10", 12, 18),
        (item_slot_ge, ":var_9", ":var_6", 1),
        (store_add, ":var_11", ":var_8", 46),
        (troop_set_slot, "trp_multiplayer_data", ":var_11", ":var_9"),
        (val_add, ":var_8", 1),
    (try_end),
    (store_add, ":var_12", ":var_8", 46),
    (store_sub, ":var_13", ":var_12", 1),
    (try_for_range, ":var_7", 46, ":var_13"),
        (store_add, ":var_14", ":var_7", 1),
        (try_for_range, ":var_15", ":var_14", ":var_12"),
            (troop_get_slot, ":var_16", "trp_multiplayer_data", ":var_7"),
            (troop_get_slot, ":var_17", "trp_multiplayer_data", ":var_15"),
            (call_script, "script_multiplayer_get_item_value_for_troop", ":var_16", ":var_0"),
            (assign, ":var_18", reg0),
            (call_script, "script_multiplayer_get_item_value_for_troop", ":var_17", ":var_0"),
            (assign, ":var_19", reg0),
            (item_get_slot, ":var_20", ":var_16", slot_item_multiplayer_item_class),
            (item_get_slot, ":var_21", ":var_17", slot_item_multiplayer_item_class),
            (val_mul, ":var_20", 1000000),
            (val_mul, ":var_21", 1000000),
            (val_add, ":var_18", ":var_20"),
            (val_add, ":var_19", ":var_21"),
            (neg|ge, ":var_19", ":var_18"),
            (troop_set_slot, "trp_multiplayer_data", ":var_7", ":var_17"),
            (troop_set_slot, "trp_multiplayer_data", ":var_15", ":var_16"),
        (try_end),
    (try_end),
    (troop_get_slot, ":var_22", "trp_multiplayer_data", slot_troop_temp_slot),
    (assign, ":var_23", 0),
    (try_begin),
        (ge, ":var_22", 0),
        (item_get_slot, ":var_24", ":var_22", slot_item_multiplayer_item_class),
        (try_for_range, ":var_7", 46, ":var_12"),
            (troop_get_slot, ":var_9", "trp_multiplayer_data", ":var_7"),
            (item_get_slot, ":var_10", ":var_9", slot_item_multiplayer_item_class),
            (neg|eq, ":var_10", ":var_24"),
            (val_add, ":var_23", 1),
            (assign, ":var_24", ":var_10"),
        (try_end),
        (try_begin),
            (store_mul, ":var_25", ":var_23", 100),
            (gt, ":var_25", ":var_4"),
            (store_sub, ":var_26", ":var_25", ":var_4"),
            (val_div, ":var_26", 100),
            (val_add, ":var_26", 1),
            (val_mul, ":var_26", 100),
            (val_add, ":var_4", ":var_26"),
        (try_end),
        (item_get_slot, ":var_24", ":var_22", slot_item_multiplayer_item_class),
    (try_end),
    (assign, ":var_27", ":var_3"),
    (assign, ":var_28", ":var_4"),
    (try_for_range, ":var_7", 46, ":var_12"),
        (troop_get_slot, ":var_9", "trp_multiplayer_data", ":var_7"),
        (item_get_slot, ":var_10", ":var_9", slot_item_multiplayer_item_class),
        (try_begin),
            (neg|eq, ":var_10", ":var_24"),
            (val_sub, ":var_28", 100),
            (assign, ":var_27", ":var_3"),
            (assign, ":var_24", ":var_10"),
        (try_end),
        (create_image_button_overlay, ":var_29", "mesh_mp_inventory_choose", "mesh_mp_inventory_choose"),
        (position_set_x, pos1, 800),
        (position_set_y, pos1, 800),
        (overlay_set_size, ":var_29", pos1),
        (position_set_x, pos1, ":var_27"),
        (position_set_y, pos1, ":var_28"),
        (overlay_set_position, ":var_29", pos1),
        (create_mesh_overlay_with_item_id, reg0, ":var_9"),
        (store_add, ":var_30", ":var_27", 50),
        (store_add, ":var_31", ":var_28", 50),
        (position_set_x, pos1, ":var_30"),
        (position_set_y, pos1, ":var_31"),
        (overlay_set_position, reg0, pos1),
        (val_add, ":var_27", ":var_5"),
    (try_end),

]),

("multiplayer_fill_map_game_types",
[
    (store_script_param, ":var_0", 1),
    (try_for_range, ":var_1", 0, 30),
        (troop_set_slot, "trp_multiplayer_data", ":var_1", -1),
    (try_end),
    (assign, ":var_2", 0),
    (try_begin),
        (this_or_next|eq, ":var_0", 0),
        (this_or_next|eq, ":var_0", 7),
        (eq, ":var_0", 1),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_relations_begin, "scn_multi_scene_1"),
        (troop_set_slot, "trp_multiplayer_data", 1, "scn_multi_scene_2"),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_occupation, "scn_multi_scene_4"),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_state, "scn_multi_scene_7"),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_last_talk_time, "scn_multi_scene_9"),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_met, "scn_multi_scene_11"),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_party_template, "scn_multi_scene_12"),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_renown, "scn_multi_scene_14"),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_prisoner_of_party, "scn_multi_scene_17"),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_present_at_event, "scn_multi_scene_18"),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_leaded_party, "scn_random_multi_plain_medium"),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_wealth, "scn_random_multi_plain_large"),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_cur_center, "scn_random_multi_steppe_medium"),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_banner_scene_prop, "scn_random_multi_steppe_large"),
        (assign, ":var_2", 14),
    (else_try),
        (eq, ":var_0", 2),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_relations_begin, "scn_multi_scene_1"),
        (troop_set_slot, "trp_multiplayer_data", 1, "scn_multi_scene_2"),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_occupation, "scn_multi_scene_4"),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_state, "scn_multi_scene_7"),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_last_talk_time, "scn_multi_scene_9"),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_met, "scn_multi_scene_11"),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_party_template, "scn_multi_scene_12"),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_renown, "scn_multi_scene_14"),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_prisoner_of_party, "scn_multi_scene_17"),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_present_at_event, "scn_multi_scene_18"),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_leaded_party, "scn_random_multi_plain_medium"),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_wealth, "scn_random_multi_plain_large"),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_cur_center, "scn_random_multi_steppe_medium"),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_banner_scene_prop, "scn_random_multi_steppe_large"),
        (assign, ":var_2", 14),
    (else_try),
        (eq, ":var_0", 3),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_relations_begin, "scn_multi_scene_1"),
        (troop_set_slot, "trp_multiplayer_data", 1, "scn_multi_scene_2"),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_occupation, "scn_multi_scene_4"),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_state, "scn_multi_scene_7"),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_last_talk_time, "scn_multi_scene_9"),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_met, "scn_multi_scene_12"),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_party_template, "scn_multi_scene_14"),
        (assign, ":var_2", 7),
    (else_try),
        (eq, ":var_0", 4),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_relations_begin, "scn_multi_scene_1"),
        (troop_set_slot, "trp_multiplayer_data", 1, "scn_multi_scene_2"),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_occupation, "scn_multi_scene_4"),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_state, "scn_multi_scene_7"),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_last_talk_time, "scn_multi_scene_9"),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_met, "scn_multi_scene_11"),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_party_template, "scn_multi_scene_12"),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_renown, "scn_multi_scene_14"),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_prisoner_of_party, "scn_multi_scene_17"),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_present_at_event, "scn_multi_scene_18"),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_leaded_party, "scn_random_multi_plain_medium"),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_wealth, "scn_random_multi_plain_large"),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_cur_center, "scn_random_multi_steppe_medium"),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_banner_scene_prop, "scn_random_multi_steppe_large"),
        (assign, ":var_2", 14),
    (else_try),
        (eq, ":var_0", 5),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_relations_begin, "scn_multi_scene_1"),
        (troop_set_slot, "trp_multiplayer_data", 1, "scn_multi_scene_2"),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_occupation, "scn_multi_scene_4"),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_state, "scn_multi_scene_7"),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_last_talk_time, "scn_multi_scene_9"),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_met, "scn_multi_scene_11"),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_party_template, "scn_multi_scene_12"),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_renown, "scn_multi_scene_14"),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_prisoner_of_party, "scn_multi_scene_17"),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_present_at_event, "scn_multi_scene_18"),
        (assign, ":var_2", 10),
    (else_try),
        (eq, ":var_0", 6),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_relations_begin, "scn_multi_scene_3"),
        (troop_set_slot, "trp_multiplayer_data", 1, "scn_multi_scene_8"),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_occupation, "scn_multi_scene_10"),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_state, "scn_multi_scene_13"),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_last_talk_time, "scn_multi_scene_15"),
        (troop_set_slot, "trp_multiplayer_data", slot_troop_met, "scn_multi_scene_16"),
        (assign, ":var_2", 6),
    (try_end),
    (assign, reg0, ":var_2"),

]),

("multiplayer_count_players_bots",
[
    (get_max_players, ":var_0"),
    (try_for_range, ":var_1", 0, ":var_0"),
        (player_is_active, ":var_1"),
        (player_set_slot, ":var_1", 34, 0),
    (try_end),
    (try_for_agents, ":var_2"),
        (agent_is_human, ":var_2"),
        (agent_is_alive, ":var_2"),
        (agent_get_player_id, ":var_3", ":var_2"),
        (neg|ge, ":var_3", 0),
        (agent_get_group, ":var_4", ":var_2"),
        (player_is_active, ":var_4"),
        (player_get_slot, ":var_5", ":var_4", 34),
        (val_add, ":var_5", 1),
        (player_set_slot, ":var_4", 34, ":var_5"),
    (try_end),

]),

("multiplayer_find_player_leader_for_bot",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (team_get_faction, ":var_2", ":var_0"),
    (assign, ":var_3", 0),
    (try_for_range, ":var_4", "trp_swadian_crossbowman_multiplayer_ai", "trp_swadian_crossbowman_multiplayer"),
        (store_troop_faction, ":var_5", ":var_4"),
        (eq, ":var_5", ":var_2"),
        (val_add, ":var_3", 1),
    (try_end),
    (call_script, "script_multiplayer_count_players_bots"),
    (assign, ":var_6", 0),
    (get_max_players, ":var_7"),
    (try_for_range, ":var_8", 0, ":var_7"),
        (assign, ":var_9", 0),
        (player_is_active, ":var_8"),
        (try_begin),
            (eq, ":var_1", 0),
            (assign, ":var_9", 1),
        (else_try),
            (neg|eq, ":var_1", 0),
            (player_get_agent_id, ":var_10", ":var_8"),
            (ge, ":var_10", 0),
            (agent_is_alive, ":var_10"),
            (assign, ":var_9", 1),
        (try_end),
        (eq, ":var_9", 1),
        (player_get_team_no, ":var_11", ":var_8"),
        (eq, ":var_0", ":var_11"),
        (val_add, ":var_6", 1),
    (try_end),
    (assign, ":var_12", -1),
    (try_begin),
        (gt, ":var_6", 0),
        (assign, ":var_13", "$g_multiplayer_num_bots_team_1"),
        (try_begin),
            (eq, ":var_0", 1),
            (assign, ":var_13", "$g_multiplayer_num_bots_team_2"),
        (try_end),
        (store_div, ":var_14", ":var_13", ":var_6"),
        (store_mul, ":var_15", ":var_14", ":var_6"),
        (try_begin),
            (neg|ge, ":var_15", ":var_13"),
            (val_add, ":var_14", 1),
        (try_end),
        (assign, ":var_16", 0),
        (try_for_range, ":var_8", 0, ":var_7"),
            (player_is_active, ":var_8"),
            (player_get_agent_id, ":var_10", ":var_8"),
            (ge, ":var_10", 0),
            (agent_is_alive, ":var_10"),
            (player_get_team_no, ":var_11", ":var_8"),
            (eq, ":var_0", ":var_11"),
            (assign, ":var_17", 0),
            (store_add, ":var_18", 35, ":var_3"),
            (try_for_range, ":var_19", 35, ":var_18"),
                (player_slot_ge, ":var_8", ":var_19", 1),
                (assign, ":var_17", 1),
                (assign, ":var_18", 0),
            (try_end),
            (eq, ":var_17", 1),
            (player_get_slot, ":var_20", ":var_8", 34),
            (neg|ge, ":var_20", ":var_14"),
            (val_add, ":var_16", ":var_14"),
            (val_sub, ":var_16", ":var_20"),
        (try_end),
        (gt, ":var_16", 0),
        (store_random_in_range, ":var_21", 0, ":var_16"),
        (try_for_range, ":var_8", 0, ":var_7"),
            (player_is_active, ":var_8"),
            (player_get_agent_id, ":var_10", ":var_8"),
            (ge, ":var_10", 0),
            (agent_is_alive, ":var_10"),
            (player_get_team_no, ":var_11", ":var_8"),
            (eq, ":var_0", ":var_11"),
            (assign, ":var_17", 0),
            (store_add, ":var_18", 35, ":var_3"),
            (try_for_range, ":var_19", 35, ":var_18"),
                (player_slot_ge, ":var_8", ":var_19", 1),
                (assign, ":var_17", 1),
                (assign, ":var_18", 0),
            (try_end),
            (eq, ":var_17", 1),
            (player_get_slot, ":var_20", ":var_8", 34),
            (neg|ge, ":var_20", ":var_14"),
            (val_sub, ":var_21", ":var_14"),
            (val_add, ":var_21", ":var_20"),
            (neg|ge, ":var_21", 0),
            (assign, ":var_12", ":var_8"),
            (assign, ":var_7", 0),
        (try_end),
    (try_end),
    (assign, reg0, ":var_12"),

]),

("multiplayer_find_bot_troop_and_group_for_spawn",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (call_script, "script_multiplayer_find_player_leader_for_bot", ":var_0", ":var_1"),
    (assign, ":var_2", reg0),
    (assign, ":var_3", 0),
    (assign, ":var_4", 0),
    (team_get_faction, ":var_5", ":var_0"),
    (try_for_range, ":var_6", "trp_swadian_crossbowman_multiplayer_ai", "trp_swadian_crossbowman_multiplayer"),
        (store_troop_faction, ":var_7", ":var_6"),
        (eq, ":var_7", ":var_5"),
        (store_add, ":var_8", 35, ":var_3"),
        (val_add, ":var_3", 1),
        (try_begin),
            (this_or_next|neg|ge, ":var_2", 0),
            (player_slot_ge, ":var_2", ":var_8", 1),
            (val_add, ":var_4", 1),
        (try_end),
    (try_end),
    (assign, ":var_3", 0),
    (store_random_in_range, ":var_9", 0, ":var_4"),
    (assign, ":var_10", "trp_swadian_crossbowman_multiplayer"),
    (try_for_range, ":var_6", "trp_swadian_crossbowman_multiplayer_ai", ":var_10"),
        (store_troop_faction, ":var_7", ":var_6"),
        (eq, ":var_7", ":var_5"),
        (store_add, ":var_8", 35, ":var_3"),
        (val_add, ":var_3", 1),
        (this_or_next|neg|ge, ":var_2", 0),
        (player_slot_ge, ":var_2", ":var_8", 1),
        (val_sub, ":var_9", 1),
        (neg|ge, ":var_9", 0),
        (assign, ":var_10", 0),
        (assign, ":var_11", ":var_6"),
    (try_end),
    (assign, reg0, ":var_11"),
    (assign, reg1, ":var_2"),

]),

("multiplayer_change_leader_of_bot",
[
    (store_script_param, ":var_0", 1),
    (agent_get_team, ":var_1", ":var_0"),
    (call_script, "script_multiplayer_find_player_leader_for_bot", ":var_1", 1),
    (assign, ":var_2", reg0),
    (agent_set_group, ":var_0", ":var_2"),

]),

("multiplayer_find_spawn_point",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (set_fixed_point_multiplier, 100),
    (assign, ":var_3", 0),
    (try_begin),
        (eq, ":var_1", 1),
        (val_or, ":var_3", 4),
    (try_end),
    (try_begin),
        (eq, ":var_2", 1),
        (val_or, ":var_3", 2),
    (try_end),
    (try_begin),
        (eq, "$g_multiplayer_game_type", 0),
        (eq, "$g_multiplayer_game_type", 7),
        (val_or, ":var_3", 1),
        (val_or, ":var_3", 2048),
    (else_try),
        (eq, "$g_multiplayer_game_type", 1),
        (val_or, ":var_3", 2048),
    (else_try),
        (eq, "$g_multiplayer_game_type", 6),
        (val_or, ":var_3", 32),
        (val_or, ":var_3", 512),
        (val_or, ":var_3", 128),
        (val_or, ":var_3", 4096),
    (else_try),
        (eq, "$g_multiplayer_game_type", 4),
        (val_or, ":var_3", 16),
        (val_or, ":var_3", 8),
        (val_or, ":var_3", 2048),
    (else_try),
        (eq, "$g_multiplayer_game_type", 5),
        (assign, ":var_4", 0),
        (store_sub, ":var_5", 900, 50),
        (store_mul, ":var_6", ":var_5", ":var_5"),
        (val_div, ":var_6", 100),
        (try_for_range, ":var_7", 0, "$g_number_of_flags"),
            (store_add, ":var_8", 146, ":var_7"),
            (troop_get_slot, ":var_9", "trp_multiplayer_data", ":var_8"),
            (scene_prop_get_instance, ":var_10", "spr_headquarters_pole_code_only", ":var_7"),
            (prop_instance_get_position, pos0, ":var_10"),
            (try_begin),
                (eq, ":var_9", 1),
                (scene_prop_get_instance, ":var_11", "$team_1_flag_scene_prop", ":var_7"),
                (prop_instance_get_position, pos1, ":var_11"),
                (get_sq_distance_between_positions, ":var_12", pos0, pos1),
                (ge, ":var_12", ":var_6"),
                (set_spawn_effector_scene_prop_id, ":var_4", ":var_11"),
                (val_add, ":var_4", 1),
            (else_try),
                (eq, ":var_9", 2),
                (scene_prop_get_instance, ":var_13", "$team_2_flag_scene_prop", ":var_7"),
                (prop_instance_get_position, pos1, ":var_13"),
                (get_sq_distance_between_positions, ":var_12", pos0, pos1),
                (ge, ":var_12", ":var_6"),
                (set_spawn_effector_scene_prop_id, ":var_4", ":var_13"),
                (val_add, ":var_4", 1),
            (try_end),
        (try_end),
        (set_spawn_effector_scene_prop_id, ":var_4", -1),
    (try_end),
    (multiplayer_find_spawn_point, reg0, ":var_0", ":var_3"),

]),

("multiplayer_find_spawn_point_2",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (assign, ":var_3", -10000000),
    (assign, ":var_4", 0),
    (assign, ":var_5", 0),
    (assign, ":var_6", 0),
    (try_begin),
        (this_or_next|eq, "$g_multiplayer_game_type", 4),
        (this_or_next|eq, "$g_multiplayer_game_type", 5),
        (eq, "$g_multiplayer_game_type", 6),
        (try_for_agents, ":var_7"),
            (agent_is_alive, ":var_7"),
            (agent_is_human, ":var_7"),
            (val_add, ":var_6", 1),
        (try_end),
    (try_end),
    (assign, ":var_8", ":var_6"),
    (try_begin),
        (neg|gt, ":var_8", 4),
        (assign, ":var_9", 2),
    (else_try),
        (neg|gt, ":var_8", 8),
        (assign, ":var_9", 2),
    (else_try),
        (neg|gt, ":var_8", 16),
        (assign, ":var_9", 3),
    (else_try),
        (neg|gt, ":var_8", 24),
        (assign, ":var_9", 4),
    (else_try),
        (neg|gt, ":var_8", 32),
        (assign, ":var_9", 5),
    (else_try),
        (neg|gt, ":var_8", 40),
        (assign, ":var_9", 6),
    (else_try),
        (assign, ":var_9", 7),
    (try_end),
    (val_div, ":var_6", 3),
    (val_add, ":var_6", 1),
    (store_mul, ":var_10", ":var_6", -1),
    (try_begin),
        (eq, ":var_1", 1),
        (assign, ":var_9", 1),
    (try_end),
    (try_begin),
        (eq, "$g_multiplayer_game_type", 5),
        (assign, ":var_11", 0),
        (assign, ":var_12", 0),
        (try_for_range, ":var_13", 0, "$g_number_of_flags"),
            (store_add, ":var_14", 146, ":var_13"),
            (troop_get_slot, ":var_15", "trp_multiplayer_data", ":var_14"),
            (neg|eq, ":var_15", 0),
            (val_sub, ":var_15", 1),
            (try_begin),
                (eq, ":var_15", ":var_0"),
                (val_add, ":var_11", 1),
            (else_try),
                (val_add, ":var_12", 1),
            (try_end),
        (try_end),
    (try_end),
    (assign, ":var_16", 0),
    (try_begin),
        (this_or_next|eq, "$g_multiplayer_game_type", 1),
        (this_or_next|eq, "$g_multiplayer_game_type", 4),
        (eq, "$g_multiplayer_game_type", 5),
        (try_begin),
            (eq, ":var_0", 0),
            (eq, "$g_multiplayer_team_1_first_spawn", 1),
            (assign, ":var_16", 1),
            (assign, "$g_multiplayer_team_1_first_spawn", 0),
        (else_try),
            (eq, ":var_0", 1),
            (eq, "$g_multiplayer_team_2_first_spawn", 1),
            (assign, ":var_16", 1),
            (assign, "$g_multiplayer_team_2_first_spawn", 0),
        (try_end),
    (try_end),
    (try_begin),
        (eq, ":var_16", 1),
        (store_mul, ":var_4", ":var_0", 32),
    (else_try),
        (try_for_range, ":var_17", 0, 64),
            (assign, ":var_18", 3000),
            (assign, ":var_19", 3000),
            (assign, ":var_20", 0),
            (store_random_in_range, ":var_21", 0, ":var_9"),
            (eq, ":var_21", 0),
            (entry_point_get_position, pos0, ":var_17"),
            (try_for_agents, ":var_7"),
                (agent_is_alive, ":var_7"),
                (agent_is_human, ":var_7"),
                (agent_get_team, ":var_22", ":var_7"),
                (try_begin),
                    (this_or_next|eq, "$g_multiplayer_game_type", 1),
                    (this_or_next|eq, "$g_multiplayer_game_type", 4),
                    (this_or_next|eq, "$g_multiplayer_game_type", 5),
                    (eq, "$g_multiplayer_game_type", 6),
                    (try_begin),
                        (teams_are_enemies, ":var_0", ":var_22"),
                        (assign, ":var_23", -2),
                    (else_try),
                        (assign, ":var_23", 1),
                    (try_end),
                (else_try),
                    (this_or_next|eq, "$g_multiplayer_game_type", 0),
                    (eq, "$g_multiplayer_game_type", 7),
                    (assign, ":var_23", -1),
                (try_end),
                (agent_get_position, pos1, ":var_7"),
                (get_distance_between_positions_in_meters, ":var_24", pos0, pos1),
                (val_add, ":var_5", 1),
                (try_begin),
                    (try_begin),
                        (neg|ge, ":var_23", 0),
                        (try_begin),
                            (neg|ge, ":var_24", ":var_18"),
                            (assign, ":var_19", ":var_18"),
                            (assign, ":var_18", ":var_24"),
                        (else_try),
                            (neg|ge, ":var_24", ":var_19"),
                            (assign, ":var_19", ":var_24"),
                        (try_end),
                    (try_end),
                    (neg|ge, ":var_24", 100),
                    (try_begin),
                        (neg|ge, ":var_24", 3),
                        (try_begin),
                            (this_or_next|eq, ":var_1", 0),
                            (this_or_next|neg|ge, ":var_23", 0),
                            (neg|eq, "$g_multiplayer_game_type", 6),
                            (try_begin),
                                (neg|ge, ":var_24", 1),
                                (assign, ":var_25", -1000000),
                            (else_try),
                                (neg|ge, ":var_24", 2),
                                (try_begin),
                                    (neg|ge, ":var_23", 0),
                                    (assign, ":var_25", -20000),
                                (else_try),
                                    (assign, ":var_25", -2000),
                                (try_end),
                            (else_try),
                                (try_begin),
                                    (neg|ge, ":var_23", 0),
                                    (assign, ":var_25", -10000),
                                (else_try),
                                    (assign, ":var_25", -1000),
                                (try_end),
                            (try_end),
                        (else_try),
                            (try_begin),
                                (neg|ge, ":var_24", 1),
                                (assign, ":var_25", -20000),
                            (else_try),
                                (neg|ge, ":var_24", 2),
                                (assign, ":var_25", -2000),
                            (else_try),
                                (assign, ":var_25", -1000),
                            (try_end),
                        (try_end),
                        (val_mul, ":var_25", ":var_6"),
                    (else_try),
                        (assign, ":var_25", 0),
                        (this_or_next|neg|eq, "$g_multiplayer_game_type", 6),
                        (this_or_next|neg|ge, ":var_23", 0),
                        (eq, ":var_0", 1),
                        (try_begin),
                            (this_or_next|eq, "$g_multiplayer_game_type", 6),
                            (this_or_next|eq, "$g_multiplayer_game_type", 0),
                            (this_or_next|eq, "$g_multiplayer_game_type", 7),
                            (eq, "$g_multiplayer_game_type", 1),
                            (store_sub, ":var_25", 45, ":var_24"),
                            (val_max, ":var_25", 0),
                            (val_mul, ":var_25", ":var_25"),
                        (else_try),
                            (store_mul, ":var_26", 45, 3),
                            (val_div, ":var_26", 2),
                            (store_sub, ":var_25", ":var_26", ":var_24"),
                            (val_mul, ":var_25", ":var_25"),
                        (try_end),
                        (val_mul, ":var_25", ":var_23"),
                    (try_end),
                    (val_add, ":var_20", ":var_25"),
                (try_end),
            (try_end),
            (try_begin),
                (eq, "$g_multiplayer_game_type", 6),
                (store_mul, ":var_27", 1000, ":var_6"),
                (ge, ":var_20", ":var_27"),
                (assign, ":var_20", ":var_27"),
            (try_end),
            (try_begin),
                (neg|eq, "$g_multiplayer_game_type", 6),
                (try_begin),
                    (neg|ge, ":var_18", 3000),
                    (try_begin),
                        (gt, ":var_18", 32),
                        (val_sub, ":var_18", 32),
                        (store_mul, ":var_28", ":var_18", -50),
                        (val_mul, ":var_28", ":var_6"),
                        (val_add, ":var_20", ":var_28"),
                    (try_end),
                (try_end),
                (try_begin),
                    (neg|ge, ":var_19", 3000),
                    (try_begin),
                        (gt, ":var_19", 32),
                        (val_sub, ":var_19", 32),
                        (store_mul, ":var_29", ":var_19", -50),
                        (val_mul, ":var_29", ":var_6"),
                        (val_add, ":var_20", ":var_29"),
                    (try_end),
                (try_end),
            (try_end),
            (try_begin),
                (neg|eq, ":var_2", -1),
                (position_get_distance_to_terrain, ":var_30", pos0),
                (val_max, ":var_30", 0),
                (val_min, ":var_30", 300),
                (ge, ":var_30", 40),
                (store_mul, ":var_31", ":var_30", ":var_6"),
                (try_begin),
                    (eq, "$g_multiplayer_game_type", 1),
                    (val_mul, ":var_31", 16),
                (else_try),
                    (val_mul, ":var_31", 4),
                (try_end),
                (try_begin),
                    (eq, ":var_2", 0),
                    (try_begin),
                        (eq, "$g_multiplayer_game_type", 6),
                        (eq, ":var_0", 0),
                        (val_add, ":var_20", ":var_31"),
                    (try_end),
                (else_try),
                    (val_mul, ":var_31", 5),
                    (val_sub, ":var_20", ":var_31"),
                (try_end),
            (try_end),
            (try_begin),
                (this_or_next|eq, "$g_multiplayer_game_type", 6),
                (this_or_next|eq, "$g_multiplayer_game_type", 0),
                (this_or_next|eq, "$g_multiplayer_game_type", 7),
                (this_or_next|eq, "$g_multiplayer_game_type", 4),
                (eq, "$g_multiplayer_game_type", 1),
                (try_begin),
                    (neg|eq, "$g_multiplayer_game_type", 6),
                    (store_random_in_range, ":var_21", 0, 400),
                    (try_begin),
                        (eq, "$g_multiplayer_game_type", 4),
                        (val_mul, ":var_21", 5),
                    (try_end),
                (else_try),
                    (eq, ":var_0", 1),
                    (store_random_in_range, ":var_21", 0, 600),
                (else_try),
                    (store_random_in_range, ":var_21", 0, 200),
                (try_end),
                (val_mul, ":var_21", ":var_6"),
                (val_add, ":var_20", ":var_21"),
            (try_end),
            (try_begin),
                (this_or_next|eq, "$g_multiplayer_game_type", 4),
                (eq, "$g_multiplayer_game_type", 6),
                (try_begin),
                    (eq, "$g_multiplayer_game_type", 4),
                    (try_begin),
                        (eq, ":var_0", 0),
                        (entry_point_get_position, pos1, 64),
                        (entry_point_get_position, pos2, 65),
                    (else_try),
                        (entry_point_get_position, pos1, 65),
                        (entry_point_get_position, pos2, 64),
                    (try_end),
                (else_try),
                    (try_begin),
                        (eq, ":var_0", 0),
                        (entry_point_get_position, pos1, 66),
                        (entry_point_get_position, pos2, 32),
                    (else_try),
                        (entry_point_get_position, pos1, 32),
                        (entry_point_get_position, pos2, 66),
                    (try_end),
                (try_end),
                (try_begin),
                    (eq, "$g_multiplayer_game_type", 6),
                    (position_get_z, ":var_32", pos0),
                    (position_set_z, pos1, ":var_32"),
                    (position_set_z, pos2, ":var_32"),
                (try_end),
                (get_sq_distance_between_positions_in_meters, ":var_33", pos0, pos1),
                (get_sq_distance_between_positions_in_meters, ":var_34", pos0, pos2),
                (get_distance_between_positions_in_meters, ":var_35", pos0, pos2),
                (assign, ":var_36", 0),
                (try_begin),
                    (eq, "$g_multiplayer_game_type", 4),
                    (get_distance_between_positions_in_meters, ":var_37", pos0, pos1),
                    (neg|ge, ":var_37", 100),
                    (store_sub, ":var_36", 100, ":var_37"),
                    (try_begin),
                        (gt, ":var_36", 75),
                        (assign, ":var_36", 75),
                    (try_end),
                    (val_mul, ":var_36", 50),
                    (val_mul, ":var_36", ":var_6"),
                (else_try),
                    (neg|ge, ":var_33", 10000),
                    (try_begin),
                        (eq, ":var_0", 0),
                        (try_begin),
                            (neg|ge, ":var_33", 2500),
                            (assign, ":var_33", 0),
                        (else_try),
                            (val_sub, ":var_33", 2500),
                            (val_mul, ":var_33", 2),
                        (try_end),
                    (try_end),
                    (store_sub, ":var_36", 10000, ":var_33"),
                    (val_add, ":var_36", 5000),
                    (try_begin),
                        (eq, ":var_0", 0),
                    (else_try),
                        (val_div, ":var_36", 45),
                    (try_end),
                    (val_mul, ":var_36", ":var_6"),
                (try_end),
                (val_add, ":var_20", ":var_36"),
                (assign, ":var_38", 0),
                (try_begin),
                    (eq, "$g_multiplayer_game_type", 4),
                    (neg|ge, ":var_35", 150),
                    (store_sub, ":var_38", 150, ":var_35"),
                    (try_begin),
                        (gt, ":var_38", 50),
                        (store_sub, ":var_39", ":var_38", 50),
                        (val_mul, ":var_39", 2),
                        (val_add, ":var_38", ":var_39"),
                    (try_end),
                    (val_mul, ":var_38", -50),
                    (val_mul, ":var_38", ":var_6"),
                (else_try),
                    (this_or_next|neg|eq, "$g_multiplayer_game_type", 6),
                    (eq, ":var_0", 1),
                    (assign, ":var_38", 0),
                    (try_begin),
                        (neg|eq, "$g_multiplayer_game_type", 6),
                        (try_begin),
                            (neg|ge, ":var_34", 10000),
                            (store_sub, ":var_38", 10000, ":var_34"),
                            (val_div, ":var_38", 4),
                            (val_mul, ":var_38", ":var_10"),
                        (try_end),
                    (else_try),
                        (val_max, ":var_35", 60),
                        (try_begin),
                            (eq, ":var_2", 1),
                            (assign, ":var_40", 120),
                        (else_try),
                            (assign, ":var_40", 80),
                        (try_end),
                        (try_begin),
                            (neg|gt, ":var_35", ":var_40"),
                            (store_sub, ":var_38", ":var_40", ":var_35"),
                            (val_mul, ":var_38", 180),
                        (else_try),
                            (store_sub, ":var_38", ":var_35", ":var_40"),
                            (val_mul, ":var_38", 30),
                        (try_end),
                        (val_sub, ":var_38", 600),
                        (val_max, ":var_38", 0),
                        (val_mul, ":var_38", ":var_10"),
                    (try_end),
                (try_end),
                (val_add, ":var_20", ":var_38"),
            (else_try),
                (eq, "$g_multiplayer_game_type", 5),
                (try_for_range, ":var_13", 0, "$g_number_of_flags"),
                    (store_add, ":var_14", 146, ":var_13"),
                    (troop_get_slot, ":var_15", "trp_multiplayer_data", ":var_14"),
                    (neg|eq, ":var_15", 0),
                    (val_sub, ":var_15", 1),
                    (scene_prop_get_instance, ":var_41", "spr_headquarters_pole_code_only", ":var_13"),
                    (prop_instance_get_position, pos1, ":var_41"),
                    (get_sq_distance_between_positions_in_meters, ":var_42", pos0, pos1),
                    (neg|ge, ":var_42", 6400),
                    (try_begin),
                        (eq, ":var_15", ":var_0"),
                        (store_sub, ":var_43", 6400, ":var_42"),
                        (val_mul, ":var_43", 2),
                        (val_div, ":var_43", ":var_11"),
                        (val_mul, ":var_43", ":var_6"),
                    (else_try),
                        (store_sub, ":var_43", 6400, ":var_42"),
                        (val_mul, ":var_43", 2),
                        (val_div, ":var_43", ":var_12"),
                        (val_mul, ":var_43", ":var_10"),
                    (try_end),
                    (val_add, ":var_20", ":var_43"),
                (try_end),
            (try_end),
            (gt, ":var_20", ":var_3"),
            (assign, ":var_3", ":var_20"),
            (assign, ":var_4", ":var_17"),
        (try_end),
    (try_end),
    (assign, reg0, ":var_4"),

]),

("multiplayer_buy_agent_equipment",
[
    (store_script_param, ":var_0", 1),
    (player_get_troop_id, ":var_1", ":var_0"),
    (player_get_gold, ":var_2", ":var_0"),
    (player_get_slot, ":var_3", ":var_0", 1),
    (player_set_slot, ":var_0", 1, 0),
    (val_add, ":var_2", ":var_3"),
    (assign, ":var_4", 0),
    (try_for_range, ":var_5", 2, 11),
        (player_get_slot, ":var_6", ":var_0", ":var_5"),
        (store_sub, ":var_7", ":var_5", 2),
        (try_begin),
            (player_item_slot_is_picked_up, ":var_0", ":var_7"),
            (assign, ":var_6", -1),
        (try_end),
        (val_add, ":var_7", 11),
        (player_set_slot, ":var_0", ":var_7", ":var_6"),
    (try_end),
    (assign, ":var_8", 1000),
    (try_for_range, ":var_9", 0, ":var_8"),
        (call_script, "script_multiplayer_calculate_cur_selected_items_cost", ":var_0", 0),
        (assign, ":var_10", reg0),
        (try_begin),
            (gt, ":var_10", ":var_2"),
            (call_script, "script_multiplayer_get_troop_class", ":var_1"),
            (assign, ":var_11", reg0),
            (assign, ":var_12", 0),
            (assign, ":var_13", -1),
            (try_for_range, ":var_5", 11, 20),
                (player_get_slot, ":var_14", ":var_0", ":var_5"),
                (ge, ":var_14", 0),
                (call_script, "script_multiplayer_get_item_value_for_troop", ":var_14", ":var_1"),
                (assign, ":var_15", reg0),
                (store_sub, ":var_16", ":var_5", 11),
                (try_begin),
                    (this_or_next|eq, ":var_16", 0),
                    (this_or_next|eq, ":var_16", 1),
                    (this_or_next|eq, ":var_16", 2),
                    (eq, ":var_16", 3),
                    (val_mul, ":var_15", 5),
                (else_try),
                    (eq, ":var_16", 4),
                    (val_mul, ":var_15", 4),
                (else_try),
                    (eq, ":var_16", 5),
                    (val_mul, ":var_15", 2),
                (else_try),
                    (eq, ":var_16", 6),
                    (val_mul, ":var_15", 8),
                (else_try),
                    (eq, ":var_16", 7),
                    (val_mul, ":var_15", 8),
                (else_try),
                (try_end),
                (item_get_slot, ":var_17", ":var_14", slot_item_multiplayer_item_class),
                (try_begin),
                    (eq, ":var_11", 1),
                    (this_or_next|eq, ":var_17", 1),
                    (this_or_next|eq, ":var_17", 2),
                    (this_or_next|eq, ":var_17", 3),
                    (this_or_next|eq, ":var_17", 4),
                    (this_or_next|eq, ":var_17", 6),
                    (this_or_next|eq, ":var_17", 10),
                    (eq, ":var_17", 7),
                    (val_div, ":var_15", 2),
                (else_try),
                    (eq, ":var_11", 2),
                    (this_or_next|eq, ":var_17", 8),
                    (eq, ":var_17", 11),
                    (val_div, ":var_15", 2),
                (else_try),
                    (eq, ":var_11", 3),
                    (this_or_next|eq, ":var_17", 9),
                    (this_or_next|eq, ":var_17", 1),
                    (eq, ":var_17", 18),
                    (val_div, ":var_15", 2),
                (else_try),
                    (eq, ":var_11", 4),
                    (this_or_next|eq, ":var_17", 12),
                    (eq, ":var_17", 14),
                    (val_div, ":var_15", 2),
                (else_try),
                    (eq, ":var_11", 5),
                    (this_or_next|eq, ":var_17", 13),
                    (eq, ":var_17", 15),
                    (val_div, ":var_15", 2),
                (else_try),
                    (eq, ":var_11", 6),
                    (this_or_next|eq, ":var_17", 12),
                    (this_or_next|eq, ":var_17", 14),
                    (eq, ":var_17", 18),
                    (val_div, ":var_15", 2),
                (else_try),
                    (eq, ":var_11", 7),
                    (this_or_next|eq, ":var_17", 13),
                    (this_or_next|eq, ":var_17", 15),
                    (eq, ":var_17", 18),
                    (val_div, ":var_15", 2),
                (try_end),
                (try_begin),
                    (gt, ":var_15", ":var_12"),
                    (assign, ":var_12", ":var_15"),
                    (assign, ":var_13", ":var_5"),
                (try_end),
            (try_end),
            (player_get_slot, ":var_14", ":var_0", ":var_13"),
            (call_script, "script_multiplayer_get_previous_item_for_item_and_troop", ":var_14", ":var_1"),
            (assign, ":var_14", reg0),
            (player_set_slot, ":var_0", ":var_13", ":var_14"),
        (else_try),
            (assign, ":var_8", 0),
            (val_sub, ":var_2", ":var_10"),
            (player_set_gold, ":var_0", ":var_2", 15000),
            (try_for_range, ":var_5", 11, 20),
                (player_get_slot, ":var_14", ":var_0", ":var_5"),
                (try_begin),
                    (ge, ":var_14", 0),
                (else_try),
                    (store_sub, ":var_18", ":var_5", 11),
                    (store_add, ":var_19", ":var_18", 2),
                    (player_get_slot, ":var_6", ":var_0", ":var_19"),
                    (this_or_next|eq, ":var_6", -1),
                    (player_item_slot_is_picked_up, ":var_0", ":var_18"),
                (else_try),
                    (item_get_slot, ":var_17", ":var_6", slot_item_multiplayer_item_class),
                    (is_between, ":var_17", 1, 18),
                    (assign, ":var_20", -1),
                    (try_for_range, ":var_21", 1, 10),
                        (neg|ge, ":var_20", 0),
                        (assign, ":var_22", 0),
                        (try_for_range, ":var_23", 11, 20),
                            (player_get_slot, ":var_24", ":var_0", ":var_23"),
                            (ge, ":var_24", 0),
                            (item_get_slot, ":var_25", ":var_24", slot_item_multiplayer_item_class),
                            (eq, ":var_25", ":var_21"),
                            (assign, ":var_22", 1),
                        (try_end),
                        (eq, ":var_22", 0),
                        (assign, ":var_26", "itm_pig_killer"),
                        (try_for_range, ":var_27", 0, ":var_26"),
                            (item_slot_eq, ":var_27", slot_item_multiplayer_item_class, ":var_21"),
                            (call_script, "script_cf_multiplayer_is_item_default_for_troop", ":var_27", ":var_1"),
                            (assign, ":var_26", 0),
                            (assign, ":var_20", ":var_27"),
                        (try_end),
                    (try_end),
                    (ge, ":var_20", 0),
                    (player_set_slot, ":var_0", ":var_5", ":var_20"),
                    (assign, ":var_14", ":var_20"),
                (try_end),
                (try_begin),
                    (ge, ":var_14", 0),
                    (store_sub, ":var_28", ":var_5", 11),
                    (player_add_spawn_item, ":var_0", ":var_28", ":var_14"),
                    (try_begin),
                        (eq, ":var_28", 5),
                        (assign, ":var_4", 1),
                    (try_end),
                (try_end),
            (try_end),
            (player_set_slot, ":var_0", 27, ":var_10"),
        (try_end),
    (try_end),
    (try_begin),
        (eq, ":var_4", 0),
        (eq, "$g_multiplayer_force_default_armor", 1),
        (assign, ":var_8", "itm_pig_killer"),
        (try_for_range, ":var_29", 0, ":var_8"),
            (this_or_next|item_slot_eq, ":var_29", slot_item_multiplayer_item_class, 19),
            (this_or_next|item_slot_eq, ":var_29", slot_item_multiplayer_item_class, 20),
            (item_slot_eq, ":var_29", slot_item_multiplayer_item_class, 21),
            (call_script, "script_cf_multiplayer_is_item_default_for_troop", ":var_29", ":var_1"),
            (assign, ":var_8", 0),
            (player_add_spawn_item, ":var_0", 5, ":var_29"),
        (try_end),
    (try_end),

]),

("party_get_ideal_size",
[
    (store_script_param_1, ":var_0"),
    (assign, ":var_1", 30),
    (try_begin),
        (party_slot_eq, ":var_0", slot_party_type, 13),
        (party_stack_get_troop_id, ":var_2", ":var_0", 0),
        (store_faction_of_party, ":var_3", ":var_0"),
        (assign, ":var_1", 30),
        (store_skill_level, ":var_4", "skl_leadership", ":var_2"),
        (store_attribute_level, ":var_5", ":var_2", ca_charisma),
        (val_mul, ":var_4", 5),
        (val_add, ":var_1", ":var_4"),
        (val_add, ":var_1", ":var_5"),
        (troop_get_slot, ":var_6", ":var_2", slot_troop_renown),
        (store_div, ":var_7", ":var_6", 25),
        (val_add, ":var_1", ":var_7"),
        (try_begin),
            (faction_slot_eq, ":var_3", slot_faction_leader, ":var_2"),
            (val_add, ":var_1", 100),
        (try_end),
        (try_begin),
            (faction_slot_eq, ":var_3", slot_faction_marshall, ":var_2"),
            (val_add, ":var_1", 20),
        (try_end),
        (try_for_range, ":var_8", "p_castle_1_1", "p_village_1_1"),
            (party_slot_eq, ":var_8", slot_town_lord, ":var_2"),
            (val_add, ":var_1", 20),
        (try_end),
    (try_end),
    (assign, ":var_9", 0),
    (try_for_range, ":var_10", "p_town_1_1", "p_village_1_1"),
        (store_faction_of_party, ":var_11", ":var_10"),
        (eq, ":var_3", ":var_11"),
        (val_add, ":var_9", 1),
        (ge, ":var_9", 2),
        (assign, ":var_10", 0),
    (try_end),
    (try_begin),
        (eq, ":var_9", 1),
        (faction_slot_eq, ":var_3", slot_faction_leader, ":var_2"),
        (val_add, ":var_1", 150),
    (else_try),
        (eq, ":var_9", 1),
        (val_add, ":var_1", 25),
    (try_end),
    (val_min, ":var_1", 350),
    (assign, reg0, ":var_1"),

]),

("game_get_party_prisoner_limit",
[
    (assign, ":var_0", "trp_player"),
    (assign, ":var_1", 0),
    (store_skill_level, ":var_2", "skl_prisoner_management", ":var_0"),
    (store_mul, ":var_1", ":var_2", 15),
    (assign, reg0, ":var_1"),
    (set_trigger_result, reg0),

]),

("game_get_item_extra_text",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (try_begin),
        (eq, "$cheat_mode", 1),
        (assign, reg0, ":var_0"),
        (set_result_string, "@ID {reg0}"),
        (set_trigger_result, 16711680),
    (try_end),
    (try_begin),
        (eq, ":var_2", 6),
        (eq, ":var_1", 0),
        (set_result_string, "@This item is severely damaged!"),
        (set_trigger_result, 16711680),
    (try_end),
    (try_begin),
        (is_between, ":var_0", "itm_smoked_fish", "itm_siege_supply"),
        (try_begin),
            (eq, ":var_1", 0),
            (assign, ":var_3", 1),
            (try_begin),
                (this_or_next|eq, ":var_0", "itm_cattle_meat"),
                (this_or_next|eq, ":var_0", "itm_pork"),
                (eq, ":var_0", "itm_chicken"),
                (eq, ":var_2", 41),
                (assign, ":var_3", 0),
            (try_end),
            (eq, ":var_3", 1),
            (item_get_slot, ":var_4", ":var_0", slot_item_food_bonus),
            (assign, reg1, ":var_4"),
            (set_result_string, "@+{reg1} to party morale"),
            (set_trigger_result, 4474111),
        (try_end),
    (else_try),
        (is_between, ":var_0", "itm_book_tactics", "itm_book_wound_treatment_reference"),
        (try_begin),
            (eq, ":var_1", 0),
            (item_get_slot, reg1, ":var_0", slot_item_intelligence_requirement),
            (set_result_string, "@Requires {reg1} intelligence to read"),
            (set_trigger_result, 16772829),
        (else_try),
            (eq, ":var_1", 1),
            (item_get_slot, ":var_5", ":var_0", slot_item_book_reading_progress),
            (val_div, ":var_5", 10),
            (assign, reg1, ":var_5"),
            (set_result_string, "@Reading Progress: {reg1}%"),
            (set_trigger_result, 16772829),
        (try_end),
    (else_try),
        (is_between, ":var_0", "itm_book_wound_treatment_reference", "itm_spice"),
        (try_begin),
            (eq, ":var_1", 0),
            (try_begin),
                (eq, ":var_0", "itm_book_wound_treatment_reference"),
                (str_store_string, s1, "@wound treament"),
            (else_try),
                (eq, ":var_0", "itm_book_training_reference"),
                (str_store_string, s1, "@trainer"),
            (else_try),
                (eq, ":var_0", "itm_book_surgery_reference"),
                (str_store_string, s1, "@surgery"),
            (try_end),
            (set_result_string, "@+1 to {s1} while in inventory"),
            (set_trigger_result, 16772829),
        (try_end),
    (try_end),

]),

("game_on_disembark",
[
    (jump_to_menu, "mnu_disembark"),

]),

("game_context_menu_get_buttons",
[
    (store_script_param, ":var_0", 1),
    (try_begin),
        (neg|eq, ":var_0", "p_main_party"),
        (context_menu_add_item, "@Move here", -7),
    (try_end),
    (try_begin),
        (is_between, ":var_0", "p_town_1_1", "p_salt_mine"),
        (context_menu_add_item, "@View notes", 1),
    (else_try),
        (party_get_num_companion_stacks, ":var_1", ":var_0"),
        (gt, ":var_1", 0),
        (party_stack_get_troop_id, ":var_2", ":var_0", 0),
        (is_between, ":var_2", "trp_npc1", "trp_knight_1_1_wife"),
        (context_menu_add_item, "@View notes", 2),
    (try_end),
    (try_begin),
        (neg|eq, ":var_0", "p_main_party"),
        (store_faction_of_party, ":var_3", ":var_0"),
        (store_relation, ":var_4", ":var_3", "fac_player_supporters_faction"),
        (this_or_next|ge, ":var_4", 0),
        (party_slot_eq, ":var_0", slot_party_type, 11),
        (neg|is_between, ":var_0", "p_town_1_1", "p_salt_mine"),
        (context_menu_add_item, "@Accompany", -6),
    (try_end),

]),

("game_event_context_menu_button_clicked",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (try_begin),
        (eq, ":var_1", 1),
        (change_screen_notes, 3, ":var_0"),
    (else_try),
        (eq, ":var_1", 2),
        (party_stack_get_troop_id, ":var_2", ":var_0", 0),
        (change_screen_notes, 1, ":var_2"),
    (try_end),

]),

("game_get_skill_modifier_for_troop",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (assign, ":var_2", 0),
    (try_begin),
        (eq, ":var_1", "skl_wound_treatment"),
        (call_script, "script_get_troop_item_amount", ":var_0", "itm_book_wound_treatment_reference"),
        (gt, reg0, 0),
        (val_add, ":var_2", 1),
    (else_try),
        (eq, ":var_1", "skl_trainer"),
        (call_script, "script_get_troop_item_amount", ":var_0", "itm_book_training_reference"),
        (gt, reg0, 0),
        (val_add, ":var_2", 1),
    (else_try),
        (eq, ":var_1", "skl_surgery"),
        (call_script, "script_get_troop_item_amount", ":var_0", "itm_book_surgery_reference"),
        (gt, reg0, 0),
        (val_add, ":var_2", 1),
    (try_end),
    (set_trigger_result, ":var_2"),

]),

("game_get_party_speed_multiplier",
[
    (store_script_param, ":var_0", 1),
    (party_get_current_terrain, ":var_1", ":var_0"),
    (assign, ":var_2", 10),
    (try_begin),
        (call_script, "script_cf_is_party_on_water", ":var_0"),
        (assign, ":var_2", 5),
        (get_global_cloud_amount, ":var_3"),
        (val_div, ":var_3", 10),
        (val_add, ":var_2", ":var_3"),
    (else_try),
        (eq, ":var_1", 2),
        (assign, ":var_2", 12),
    (try_end),
    (party_get_template_id, ":var_4", ":var_0"),
    (try_begin),
        (eq, ":var_4", "pt_merchant_caravan"),
        (val_add, ":var_2", 4),
    (else_try),
        (this_or_next|eq, ":var_4", "pt_steppe_bandits"),
        (this_or_next|eq, ":var_4", "pt_desert_bandits"),
        (this_or_next|eq, ":var_4", "pt_taiga_bandits"),
        (this_or_next|eq, ":var_4", "pt_forest_bandits"),
        (this_or_next|eq, ":var_4", "pt_sea_raiders"),
        (this_or_next|eq, ":var_4", "pt_robber_knights"),
        (this_or_next|eq, ":var_4", "pt_taiga_bandits"),
        (this_or_next|eq, ":var_4", "pt_looters"),
        (this_or_next|eq, ":var_4", "pt_village_farmers"),
        (eq, ":var_4", "pt_deserters"),
        (val_sub, ":var_2", 2),
    (try_end),
    (try_begin),
        (party_slot_eq, ":var_0", 251, 1),
        (assign, ":var_2", 0),
    (try_end),
    (try_begin),
        (party_slot_eq, ":var_0", 301, 1),
        (assign, ":var_2", 0),
    (try_end),
    (assign, ":var_5", "$g_travel_speed"),
    (val_mul, ":var_5", ":var_2"),
    (val_div, ":var_5", 10),
    (set_trigger_result, ":var_5"),

]),

("npc_get_troop_wage",
[
    (store_script_param_1, ":var_0"),
    (assign, ":var_1", 0),
    (try_begin),
        (troop_is_hero, ":var_0"),
    (else_try),
        (store_character_level, ":var_1", ":var_0"),
        (val_mul, ":var_1", ":var_1"),
        (val_add, ":var_1", 50),
        (val_div, ":var_1", 30),
        (troop_is_mounted, ":var_0"),
        (val_mul, ":var_1", 5),
        (val_div, ":var_1", 4),
    (try_end),
    (assign, reg0, ":var_1"),

]),

("setup_talk_info",
[
    (talk_info_set_relation_bar, "$g_talk_troop_relation"),
    (str_store_troop_name, s61, "$g_talk_troop"),
    (str_store_string, s61, "@{!} {s61}"),
    (assign, reg1, "$g_talk_troop_relation"),
    (str_store_string, s62, "str_relation_reg1"),
    (talk_info_set_line, 0, 61),
    (talk_info_set_line, 1, 62),
    (call_script, "script_describe_relation_to_s63", "$g_talk_troop_relation"),
    (talk_info_set_line, 3, 63),

]),

("setup_talk_info_companions",
[
    (call_script, "script_npc_morale", "$g_talk_troop"),
    (assign, ":var_0", reg0),
    (talk_info_set_relation_bar, ":var_0"),
    (str_store_troop_name, s61, "$g_talk_troop"),
    (str_store_string, s61, "@{!} {s61}"),
    (assign, reg1, ":var_0"),
    (str_store_string, s62, "str_morale_reg1"),
    (talk_info_set_line, 0, 61),
    (talk_info_set_line, 1, 62),
    (talk_info_set_line, 3, 63),

]),

("update_party_creation_random_limits",
[
    (store_character_level, ":var_0", "trp_player"),
    (store_mul, ":var_1", ":var_0", 3),
    (val_add, ":var_1", 25),
    (val_min, ":var_1", 100),
    (set_party_creation_random_limits, 0, ":var_1"),
    (assign, reg0, ":var_1"),

]),

("set_trade_route_between_centers",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (assign, ":var_2", 0),
    (assign, ":var_3", 0),
    (try_for_range, ":var_4", 190, 205),
        (try_begin),
            (eq, ":var_2", 0),
            (party_slot_eq, ":var_0", ":var_4", 0),
            (party_set_slot, ":var_0", ":var_4", ":var_1"),
            (assign, ":var_2", 1),
        (try_end),
        (try_begin),
            (eq, ":var_3", 0),
            (party_slot_eq, ":var_1", ":var_4", 0),
            (party_set_slot, ":var_1", ":var_4", ":var_0"),
            (assign, ":var_3", 1),
        (try_end),
    (try_end),
    (try_begin),
        (eq, ":var_2", 0),
        (str_store_party_name, s1, ":var_0"),
        (display_message, "@{!}DEBUG -- ERROR: More than 15 trade routes are given for {s1}."),
    (try_end),
    (try_begin),
        (eq, ":var_3", 0),
        (str_store_party_name, s1, ":var_1"),
        (display_message, "@{!}DEBUG -- ERROR: More than 15 trade routes are given for {s1}."),
    (try_end),

]),

("average_trade_good_prices",
[
    (store_sub, ":var_0", 250, "itm_spice"),
    (try_for_range, ":var_1", "p_town_1_1", "p_castle_1_1"),
        (this_or_next|is_between, ":var_1", "p_town_1_1", "p_castle_1_1"),
        (is_between, ":var_1", "p_village_1_1", "p_salt_mine"),
        (try_for_range, ":var_2", "p_town_1_1", "p_salt_mine"),
            (this_or_next|is_between, ":var_1", "p_town_1_1", "p_castle_1_1"),
            (is_between, ":var_1", "p_village_1_1", "p_salt_mine"),
            (neg|eq, ":var_2", ":var_1"),
            (store_distance_to_party_from_party, ":var_3", ":var_1", ":var_2"),
            (neg|ge, ":var_3", 50),
            (store_sub, ":var_4", 50, ":var_3"),
            (try_for_range, ":var_5", "itm_spice", "itm_siege_supply"),
                (store_add, ":var_6", ":var_5", ":var_0"),
                (party_get_slot, ":var_7", ":var_1", ":var_6"),
                (party_get_slot, ":var_8", ":var_2", ":var_6"),
                (store_sub, ":var_9", ":var_7", ":var_8"),
                (assign, ":var_10", ":var_9"),
                (val_mul, ":var_10", ":var_4"),
                (val_div, ":var_10", 1000),
                (val_add, ":var_8", ":var_10"),
                (party_set_slot, ":var_2", ":var_6", ":var_8"),
                (val_sub, ":var_7", ":var_10"),
                (party_set_slot, ":var_1", ":var_6", ":var_7"),
            (try_end),
        (try_end),
    (try_end),

]),

("average_trade_good_prices_2",
[
    (store_sub, ":var_0", 250, "itm_spice"),
    (try_for_range, ":var_1", "p_town_1_1", "p_castle_1_1"),
        (try_for_range, ":var_2", "p_town_1_1", "p_salt_mine"),
            (this_or_next|is_between, ":var_2", "p_town_1_1", "p_castle_1_1"),
            (is_between, ":var_2", "p_village_1_1", "p_salt_mine"),
            (this_or_next|party_slot_eq, ":var_2", slot_village_market_town, ":var_1"),
            (this_or_next|party_slot_eq, ":var_1", slot_town_trade_route_1, ":var_2"),
            (this_or_next|party_slot_eq, ":var_1", slot_town_trade_route_2, ":var_2"),
            (this_or_next|party_slot_eq, ":var_1", slot_town_trade_route_3, ":var_2"),
            (this_or_next|party_slot_eq, ":var_1", slot_town_trade_route_4, ":var_2"),
            (this_or_next|party_slot_eq, ":var_1", slot_town_trade_route_5, ":var_2"),
            (this_or_next|party_slot_eq, ":var_1", slot_town_trade_route_6, ":var_2"),
            (this_or_next|party_slot_eq, ":var_1", slot_town_trade_route_7, ":var_2"),
            (this_or_next|party_slot_eq, ":var_1", slot_town_trade_route_8, ":var_2"),
            (this_or_next|party_slot_eq, ":var_1", slot_town_trade_route_9, ":var_2"),
            (this_or_next|party_slot_eq, ":var_1", slot_town_trade_route_10, ":var_2"),
            (this_or_next|party_slot_eq, ":var_1", slot_town_trade_route_11, ":var_2"),
            (this_or_next|party_slot_eq, ":var_1", slot_town_trade_route_12, ":var_2"),
            (this_or_next|party_slot_eq, ":var_1", slot_town_trade_route_13, ":var_2"),
            (this_or_next|party_slot_eq, ":var_1", slot_town_trade_route_14, ":var_2"),
            (party_slot_eq, ":var_1", slot_town_trade_route_15, ":var_2"),
            (try_for_range, ":var_3", "itm_spice", "itm_siege_supply"),
                (store_add, ":var_4", ":var_3", ":var_0"),
                (party_get_slot, ":var_5", ":var_1", ":var_4"),
                (party_get_slot, ":var_6", ":var_2", ":var_4"),
                (store_sub, ":var_7", ":var_5", ":var_6"),
                (store_div, ":var_8", ":var_7", 5),
                (val_add, ":var_6", ":var_8"),
                (party_set_slot, ":var_2", ":var_4", ":var_6"),
                (val_sub, ":var_5", ":var_8"),
                (party_set_slot, ":var_1", ":var_4", ":var_5"),
            (try_end),
        (try_end),
    (try_end),

]),

("average_trade_good_productions",
[
    (store_sub, ":var_0", 500, "itm_spice"),
    (try_for_range, ":var_1", "p_town_1_1", "p_castle_1_1"),
        (this_or_next|is_between, ":var_1", "p_town_1_1", "p_castle_1_1"),
        (is_between, ":var_1", "p_village_1_1", "p_salt_mine"),
        (try_for_range, ":var_2", "p_town_1_1", "p_salt_mine"),
            (this_or_next|is_between, ":var_1", "p_town_1_1", "p_castle_1_1"),
            (is_between, ":var_1", "p_village_1_1", "p_salt_mine"),
            (neg|eq, ":var_2", ":var_1"),
            (store_distance_to_party_from_party, ":var_3", ":var_1", ":var_2"),
            (neg|ge, ":var_3", 110),
            (store_sub, ":var_4", 110, ":var_3"),
            (try_for_range, ":var_5", "itm_spice", "itm_siege_supply"),
                (store_add, ":var_6", ":var_5", ":var_0"),
                (party_get_slot, ":var_7", ":var_1", ":var_6"),
                (party_get_slot, ":var_8", ":var_2", ":var_6"),
                (store_sub, ":var_9", ":var_7", ":var_8"),
                (gt, ":var_9", 0),
                (store_mul, ":var_10", ":var_9", 1),
                (val_mul, ":var_10", ":var_4"),
                (val_div, ":var_10", 110),
                (val_add, ":var_8", ":var_10"),
                (party_set_slot, ":var_2", ":var_6", ":var_8"),
            (try_end),
        (try_end),
    (try_end),

]),

("normalize_trade_good_productions",
[
    (store_sub, ":var_0", 500, "itm_spice"),
    (try_for_range, ":var_1", "itm_spice", "itm_siege_supply"),
        (assign, ":var_2", 0),
        (assign, ":var_3", 0),
        (store_add, ":var_4", ":var_1", ":var_0"),
        (try_for_range, ":var_5", "p_town_1_1", "p_salt_mine"),
            (val_add, ":var_3", 1),
            (try_begin),
                (is_between, ":var_5", "p_town_1_1", "p_castle_1_1"),
                (val_add, ":var_3", 4),
            (try_end),
            (party_get_slot, ":var_6", ":var_5", ":var_4"),
            (val_add, ":var_2", ":var_6"),
        (try_end),
        (store_div, ":var_7", ":var_2", ":var_3"),
        (neg|eq, ":var_7", 0),
        (try_for_range, ":var_5", "p_town_1_1", "p_salt_mine"),
            (this_or_next|is_between, ":var_5", "p_town_1_1", "p_castle_1_1"),
            (is_between, ":var_5", "p_village_1_1", "p_salt_mine"),
            (party_get_slot, ":var_6", ":var_5", ":var_4"),
            (val_sub, ":var_6", ":var_7"),
            (party_set_slot, ":var_5", ":var_4", ":var_6"),
        (try_end),
    (try_end),

]),

("update_trade_good_prices",
[
    (try_for_range, ":var_0", "p_town_1_1", "p_salt_mine"),
        (this_or_next|is_between, ":var_0", "p_town_1_1", "p_castle_1_1"),
        (is_between, ":var_0", "p_village_1_1", "p_salt_mine"),
        (call_script, "script_update_trade_good_price_for_party", ":var_0"),
    (try_end),
    (try_for_range, ":var_1", "itm_spice", "itm_siege_supply"),
        (assign, ":var_2", 0),
        (assign, ":var_3", 0),
        (try_for_range, ":var_0", "p_town_1_1", "p_salt_mine"),
            (this_or_next|is_between, ":var_0", "p_town_1_1", "p_castle_1_1"),
            (is_between, ":var_0", "p_village_1_1", "p_salt_mine"),
            (store_sub, ":var_4", ":var_1", "itm_spice"),
            (val_add, ":var_4", 250),
            (party_get_slot, ":var_5", ":var_0", ":var_4"),
            (try_begin),
                (is_between, ":var_0", "p_town_1_1", "p_castle_1_1"),
                (assign, ":var_6", 5),
            (else_try),
                (assign, ":var_6", 1),
            (try_end),
            (val_mul, ":var_5", ":var_6"),
            (val_add, ":var_2", ":var_5"),
            (val_add, ":var_3", ":var_6"),
        (try_end),
        (try_for_range, ":var_0", "p_town_1_1", "p_salt_mine"),
            (this_or_next|is_between, ":var_0", "p_town_1_1", "p_castle_1_1"),
            (is_between, ":var_0", "p_village_1_1", "p_salt_mine"),
            (store_sub, ":var_4", ":var_1", "itm_spice"),
            (val_add, ":var_4", 250),
            (party_get_slot, ":var_5", ":var_0", ":var_4"),
            (val_mul, ":var_5", 1000),
            (val_mul, ":var_5", ":var_3"),
            (val_div, ":var_5", ":var_2"),
            (val_clamp, ":var_5", 100, 10000),
            (party_set_slot, ":var_0", ":var_4", ":var_5"),
        (try_end),
    (try_end),

]),

("update_trade_good_price_for_party",
[
    (store_script_param, ":var_0", 1),
    (try_for_range, ":var_1", "itm_spice", "itm_siege_supply"),
        (store_sub, ":var_2", ":var_1", "itm_spice"),
        (val_add, ":var_2", 250),
        (party_get_slot, ":var_3", ":var_0", ":var_2"),
        (call_script, "script_center_get_production", ":var_0", ":var_1"),
        (assign, ":var_4", reg0),
        (call_script, "script_center_get_consumption", ":var_0", ":var_1"),
        (assign, ":var_5", reg0),
        (val_sub, ":var_4", ":var_5"),
        (try_begin),
            (gt, ":var_4", 0),
            (store_mul, ":var_6", ":var_4", 1),
            (store_random_in_range, ":var_7", 0, ":var_6"),
            (val_add, ":var_7", ":var_6"),
            (val_add, ":var_7", ":var_6"),
            (store_sub, ":var_8", ":var_3", ":var_7"),
            (val_clamp, ":var_8", 100, 10000),
            (try_begin),
                (neg|ge, ":var_8", 1000),
                (store_add, ":var_9", ":var_8", 300),
                (val_mul, ":var_7", ":var_9"),
                (val_div, ":var_7", 1300),
            (try_end),
            (val_sub, ":var_3", ":var_7"),
        (else_try),
            (neg|ge, ":var_4", 0),
            (store_sub, ":var_6", 0, ":var_4"),
            (val_mul, ":var_6", 1),
            (store_random_in_range, ":var_7", 0, ":var_6"),
            (val_add, ":var_7", ":var_6"),
            (val_add, ":var_7", ":var_6"),
            (val_add, ":var_3", ":var_7"),
        (try_end),
        (try_begin),
            (is_between, ":var_0", "p_village_1_1", "p_salt_mine"),
            (store_sub, ":var_10", ":var_3", 1000),
            (val_mul, ":var_10", 96),
            (val_div, ":var_10", 100),
            (store_add, ":var_11", 1000, ":var_10"),
        (else_try),
            (store_sub, ":var_10", ":var_3", 1000),
            (val_mul, ":var_10", 96),
            (val_div, ":var_10", 100),
            (store_add, ":var_11", 1000, ":var_10"),
        (try_end),
        (try_begin),
            (item_get_slot, ":var_12", ":var_1", slot_item_primary_raw_material),
            (neg|eq, ":var_12", 0),
            (store_sub, ":var_13", ":var_12", "itm_spice"),
            (val_add, ":var_13", 250),
            (party_get_slot, ":var_14", ":var_0", ":var_13"),
            (val_mul, ":var_14", 3),
            (assign, ":var_15", 3),
            (try_for_range, ":var_16", "p_village_1_1", "p_salt_mine"),
                (party_slot_eq, ":var_16", slot_village_bound_center, ":var_0"),
                (party_get_slot, ":var_17", ":var_16", ":var_13"),
                (val_add, ":var_14", ":var_17"),
                (val_add, ":var_15", 1),
            (try_end),
            (store_div, ":var_18", ":var_14", ":var_15"),
            (gt, ":var_18", ":var_11"),
            (store_sub, ":var_19", ":var_18", ":var_11"),
            (val_div, ":var_19", 10),
            (val_add, ":var_11", ":var_19"),
        (try_end),
        (val_clamp, ":var_11", 100, 10000),
        (party_set_slot, ":var_0", ":var_2", ":var_11"),
    (try_end),

]),

("center_get_production",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (assign, ":var_2", 0),
    (try_begin),
        (eq, ":var_1", "itm_bread"),
        (party_get_slot, ":var_2", ":var_0", slot_center_mills),
        (val_mul, ":var_2", 20),
    (else_try),
        (eq, ":var_1", "itm_grain"),
        (party_get_slot, ":var_2", ":var_0", slot_center_acres_grain),
        (val_div, ":var_2", 125),
    (else_try),
        (eq, ":var_1", "itm_ale"),
        (party_get_slot, ":var_2", ":var_0", slot_center_breweries),
        (val_mul, ":var_2", 25),
    (else_try),
        (eq, ":var_1", "itm_smoked_fish"),
        (party_get_slot, ":var_2", ":var_0", slot_center_fishing_fleet),
        (val_mul, ":var_2", 4),
    (else_try),
        (eq, ":var_1", "itm_salt"),
        (party_get_slot, ":var_2", ":var_0", slot_center_salt_pans),
        (val_mul, ":var_2", 35),
    (else_try),
        (eq, ":var_1", "itm_cattle_meat"),
        (party_get_slot, ":var_2", ":var_0", slot_town_trade_routes_end),
        (val_div, ":var_2", 4),
    (else_try),
        (eq, ":var_1", "itm_dried_meat"),
        (party_get_slot, ":var_2", ":var_0", slot_town_trade_routes_end),
        (val_div, ":var_2", 2),
    (else_try),
        (eq, ":var_1", "itm_cheese"),
        (party_get_slot, ":var_2", ":var_0", slot_town_trade_routes_end),
        (party_get_slot, ":var_3", ":var_0", slot_center_head_sheep),
        (val_div, ":var_3", 2),
        (val_add, ":var_2", ":var_3"),
        (party_get_slot, ":var_4", ":var_0", slot_center_household_gardens),
        (val_mul, ":var_2", ":var_4"),
        (val_div, ":var_2", 10),
    (else_try),
        (eq, ":var_1", "itm_butter"),
        (party_get_slot, ":var_2", ":var_0", slot_town_trade_routes_end),
        (party_get_slot, ":var_4", ":var_0", slot_center_household_gardens),
        (val_mul, ":var_2", ":var_4"),
        (val_div, ":var_2", 15),
    (else_try),
        (eq, ":var_1", "itm_raw_leather"),
        (party_get_slot, ":var_2", ":var_0", slot_town_trade_routes_end),
        (val_div, ":var_2", 6),
        (party_get_slot, ":var_3", ":var_0", slot_center_head_sheep),
        (val_div, ":var_3", 12),
        (val_add, ":var_2", ":var_3"),
    (else_try),
        (eq, ":var_1", "itm_leatherwork"),
        (party_get_slot, ":var_2", ":var_0", slot_center_tanneries),
        (val_mul, ":var_2", 20),
    (else_try),
        (eq, ":var_1", "itm_honey"),
        (party_get_slot, ":var_2", ":var_0", slot_center_apiaries),
        (val_mul, ":var_2", 6),
    (else_try),
        (eq, ":var_1", "itm_cabbages"),
        (party_get_slot, ":var_2", ":var_0", slot_center_household_gardens),
        (val_mul, ":var_2", 10),
    (else_try),
        (eq, ":var_1", "itm_apples"),
        (party_get_slot, ":var_2", ":var_0", slot_center_household_gardens),
        (val_mul, ":var_2", 10),
    (else_try),
        (eq, ":var_1", "itm_sausages"),
        (party_get_slot, ":var_2", ":var_0", slot_center_head_sheep),
        (val_div, ":var_2", 15),
    (else_try),
        (eq, ":var_1", "itm_wool"),
        (party_get_slot, ":var_2", ":var_0", slot_center_head_sheep),
        (val_div, ":var_2", 5),
    (else_try),
        (eq, ":var_1", "itm_wool_cloth"),
        (party_get_slot, ":var_2", ":var_0", slot_center_wool_looms),
        (val_mul, ":var_2", 5),
    (else_try),
        (this_or_next|eq, ":var_1", "itm_pork"),
        (eq, ":var_1", "itm_chicken"),
        (try_begin),
            (is_between, ":var_0", "p_village_1_1", "p_salt_mine"),
            (assign, ":var_2", 30),
        (else_try),
            (assign, ":var_2", 0),
        (try_end),
    (else_try),
        (eq, ":var_1", "itm_iron"),
        (party_get_slot, ":var_2", ":var_0", slot_center_iron_deposits),
        (val_mul, ":var_2", 10),
    (else_try),
        (eq, ":var_1", "itm_tools"),
        (party_get_slot, ":var_2", ":var_0", slot_center_smithies),
        (val_mul, ":var_2", 3),
    (else_try),
        (eq, ":var_1", "itm_pottery"),
        (party_get_slot, ":var_2", ":var_0", slot_center_pottery_kilns),
        (val_mul, ":var_2", 5),
    (else_try),
        (eq, ":var_1", "itm_raw_grapes"),
        (party_get_slot, ":var_2", ":var_0", slot_center_acres_vineyard),
        (val_div, ":var_2", 100),
    (else_try),
        (eq, ":var_1", "itm_wine"),
        (party_get_slot, ":var_2", ":var_0", slot_center_wine_presses),
        (val_mul, ":var_2", 25),
    (else_try),
        (eq, ":var_1", "itm_raw_olives"),
        (party_get_slot, ":var_2", ":var_0", slot_center_acres_olives),
        (val_div, ":var_2", 150),
    (else_try),
        (eq, ":var_1", "itm_oil"),
        (party_get_slot, ":var_2", ":var_0", slot_center_olive_presses),
        (val_mul, ":var_2", 12),
    (else_try),
        (eq, ":var_1", "itm_linen"),
        (party_get_slot, ":var_2", ":var_0", slot_center_linen_looms),
        (val_mul, ":var_2", 5),
    (else_try),
        (eq, ":var_1", "itm_raw_flax"),
        (party_get_slot, ":var_2", ":var_0", slot_center_acres_flax),
        (val_div, ":var_2", 80),
    (else_try),
        (eq, ":var_1", "itm_velvet"),
        (party_get_slot, ":var_2", ":var_0", slot_center_silk_looms),
        (val_mul, ":var_2", 5),
    (else_try),
        (eq, ":var_1", "itm_raw_silk"),
        (party_get_slot, ":var_2", ":var_0", slot_center_silk_farms),
        (val_div, ":var_2", 20),
    (else_try),
        (eq, ":var_1", "itm_raw_dyes"),
        (party_get_slot, ":var_2", ":var_0", slot_center_kirmiz_farms),
        (val_div, ":var_2", 20),
    (else_try),
        (eq, ":var_1", "itm_raw_date_fruit"),
        (party_get_slot, ":var_2", ":var_0", slot_center_acres_dates),
        (val_div, ":var_2", 120),
    (else_try),
        (eq, ":var_1", "itm_furs"),
        (party_get_slot, ":var_2", ":var_0", slot_center_fur_traps),
        (val_mul, ":var_2", 25),
    (else_try),
        (eq, ":var_1", "itm_spice"),
        (try_begin),
            (eq, ":var_0", "p_town_2_2"),
            (assign, ":var_2", 100),
        (else_try),
            (eq, ":var_0", "p_town_4_1"),
            (assign, ":var_2", 50),
        (else_try),
            (eq, ":var_0", "p_town_4_2"),
            (assign, ":var_2", 50),
        (else_try),
            (eq, ":var_0", "p_town_7_2"),
            (assign, ":var_2", 50),
        (try_end),
    (try_end),
    (assign, ":var_5", ":var_2"),
    (try_begin),
        (eq, ":var_1", "itm_bread"),
        (call_script, "script_good_price_affects_good_production", ":var_0", "itm_grain", ":var_2", 1),
        (assign, ":var_5", reg0),
    (else_try),
        (eq, ":var_1", "itm_ale"),
        (call_script, "script_good_price_affects_good_production", ":var_0", "itm_grain", ":var_2", 2),
        (assign, ":var_5", reg0),
    (else_try),
        (eq, ":var_1", "itm_dried_meat"),
        (call_script, "script_good_price_affects_good_production", ":var_0", "itm_salt", ":var_2", 2),
        (assign, ":var_5", reg0),
    (else_try),
        (eq, ":var_1", "itm_smoked_fish"),
        (call_script, "script_good_price_affects_good_production", ":var_0", "itm_salt", ":var_2", 2),
        (assign, ":var_5", reg0),
    (else_try),
        (eq, ":var_1", "itm_tools"),
        (call_script, "script_good_price_affects_good_production", ":var_0", "itm_iron", ":var_2", 1),
        (assign, ":var_5", reg0),
    (else_try),
        (eq, ":var_1", "itm_wool_cloth"),
        (call_script, "script_good_price_affects_good_production", ":var_0", "itm_wool", ":var_2", 1),
        (assign, ":var_5", reg0),
    (else_try),
        (eq, ":var_1", "itm_wine"),
        (call_script, "script_good_price_affects_good_production", ":var_0", "itm_raw_grapes", ":var_2", 1),
        (assign, ":var_5", reg0),
    (else_try),
        (eq, ":var_1", "itm_oil"),
        (call_script, "script_good_price_affects_good_production", ":var_0", "itm_raw_olives", ":var_2", 1),
        (assign, ":var_5", reg0),
    (else_try),
        (eq, ":var_1", "itm_velvet"),
        (call_script, "script_good_price_affects_good_production", ":var_0", "itm_raw_silk", ":var_2", 1),
        (assign, ":var_6", reg0),
        (call_script, "script_good_price_affects_good_production", ":var_0", "itm_raw_dyes", ":var_6", 2),
        (assign, ":var_5", reg0),
    (else_try),
        (eq, ":var_1", "itm_leatherwork"),
        (call_script, "script_good_price_affects_good_production", ":var_0", "itm_raw_leather", ":var_2", 1),
        (assign, ":var_5", reg0),
    (else_try),
        (eq, ":var_1", "itm_linen"),
        (call_script, "script_good_price_affects_good_production", ":var_0", "itm_raw_flax", ":var_2", 1),
        (assign, ":var_5", reg0),
    (try_end),
    (assign, ":var_7", ":var_5"),
    (try_begin),
        (party_get_slot, ":var_8", ":var_0", slot_town_prosperity),
        (val_add, ":var_8", 75),
        (val_mul, ":var_5", ":var_8"),
        (val_div, ":var_5", 125),
    (try_end),
    (try_begin),
        (this_or_next|party_slot_eq, ":var_0", slot_village_state, 1),
        (party_slot_eq, ":var_0", slot_village_state, 2),
        (assign, ":var_5", 0),
    (try_end),
    (assign, reg0, ":var_5"),
    (assign, reg1, ":var_7"),
    (assign, reg2, ":var_2"),

]),

("center_get_consumption",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (assign, ":var_2", 0),
    (store_faction_of_party, ":var_3", ":var_0"),
    (call_script, "script_raf_aor_faction_to_region", ":var_3"),
    (try_begin),
        (this_or_next|eq, ":var_3", "fac_kingdom_23"),
        (this_or_next|eq, reg0, 10),
        (this_or_next|eq, reg0, 11),
        (eq, reg0, 12),
        (item_slot_ge, ":var_1", slot_item_desert_demand, 0),
        (item_get_slot, ":var_2", ":var_1", slot_item_desert_demand),
    (else_try),
        (is_between, ":var_0", "p_village_1_1", "p_salt_mine"),
        (item_get_slot, ":var_2", ":var_1", slot_item_rural_demand),
    (else_try),
        (is_between, ":var_0", "p_town_1_1", "p_castle_1_1"),
        (item_get_slot, ":var_2", ":var_1", slot_item_urban_demand),
    (try_end),
    (assign, ":var_4", 0),
    (try_begin),
        (eq, ":var_1", "itm_grain"),
        (party_get_slot, ":var_5", ":var_0", slot_center_mills),
        (val_mul, ":var_5", 20),
        (party_get_slot, ":var_6", ":var_0", slot_center_breweries),
        (val_mul, ":var_6", 5),
        (store_add, ":var_4", ":var_5", ":var_6"),
    (else_try),
        (eq, ":var_1", "itm_iron"),
        (party_get_slot, ":var_4", ":var_0", slot_center_smithies),
        (val_mul, ":var_4", 3),
    (else_try),
        (eq, ":var_1", "itm_wool"),
        (party_get_slot, ":var_4", ":var_0", slot_center_wool_looms),
        (val_mul, ":var_4", 5),
    (else_try),
        (eq, ":var_1", "itm_raw_flax"),
        (party_get_slot, ":var_4", ":var_0", slot_center_linen_looms),
        (val_mul, ":var_4", 5),
    (else_try),
        (eq, ":var_1", "itm_raw_leather"),
        (party_get_slot, ":var_4", ":var_0", slot_center_tanneries),
        (val_mul, ":var_4", 20),
    (else_try),
        (eq, ":var_1", "itm_raw_grapes"),
        (party_get_slot, ":var_4", ":var_0", slot_center_wine_presses),
        (val_mul, ":var_4", 30),
    (else_try),
        (eq, ":var_1", "itm_raw_olives"),
        (party_get_slot, ":var_4", ":var_0", slot_center_olive_presses),
        (val_mul, ":var_4", 12),
    (else_try),
        (eq, ":var_1", "itm_raw_dyes"),
        (party_get_slot, ":var_4", ":var_0", slot_center_silk_looms),
        (val_mul, ":var_4", 1),
    (else_try),
        (eq, ":var_1", "itm_raw_silk"),
        (party_get_slot, ":var_4", ":var_0", slot_center_silk_looms),
        (val_mul, ":var_4", 5),
    (else_try),
        (eq, ":var_1", "itm_salt"),
        (party_get_slot, ":var_7", ":var_0", slot_town_trade_routes_end),
        (val_div, ":var_7", 10),
        (party_get_slot, ":var_8", ":var_0", slot_center_fishing_fleet),
        (val_div, ":var_8", 5),
        (store_add, ":var_4", ":var_7", ":var_8"),
    (try_end),
    (try_begin),
        (gt, ":var_4", 0),
        (store_sub, ":var_9", 250, "itm_spice"),
        (store_add, ":var_10", ":var_1", ":var_9"),
        (party_get_slot, ":var_11", ":var_0", ":var_10"),
        (gt, ":var_11", 1000),
        (val_mul, ":var_4", 1000),
        (val_div, ":var_4", ":var_11"),
    (try_end),
    (store_add, ":var_12", ":var_2", ":var_4"),
    (try_begin),
        (party_get_slot, ":var_13", ":var_0", slot_town_prosperity),
        (val_add, ":var_13", 75),
        (val_mul, ":var_12", ":var_13"),
        (val_div, ":var_12", 125),
    (try_end),
    (assign, reg0, ":var_12"),
    (assign, reg1, ":var_4"),
    (assign, reg2, ":var_2"),

]),

("get_enterprise_name",
[
    (store_script_param_1, ":var_0"),
    (assign, ":var_1", "str_bread_site"),
    (try_begin),
        (eq, ":var_0", "itm_bread"),
        (assign, ":var_1", "str_bread_site"),
    (else_try),
        (eq, ":var_0", "itm_ale"),
        (assign, ":var_1", "str_ale_site"),
    (else_try),
        (eq, ":var_0", "itm_oil"),
        (assign, ":var_1", "str_oil_site"),
    (else_try),
        (eq, ":var_0", "itm_wine"),
        (assign, ":var_1", "str_wine_site"),
    (else_try),
        (eq, ":var_0", "itm_leatherwork"),
        (assign, ":var_1", "str_leather_site"),
    (else_try),
        (eq, ":var_0", "itm_wool_cloth"),
        (assign, ":var_1", "str_wool_cloth_site"),
    (else_try),
        (eq, ":var_0", "itm_linen"),
        (assign, ":var_1", "str_linen_site"),
    (else_try),
        (eq, ":var_0", "itm_velvet"),
        (assign, ":var_1", "str_velvet_site"),
    (else_try),
        (eq, ":var_0", "itm_tools"),
        (assign, ":var_1", "str_tool_site"),
    (try_end),
    (assign, reg0, ":var_1"),

]),

("do_merchant_town_trade",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (party_get_slot, ":var_2", ":var_0", slot_party_last_traded_center),
    (try_begin),
        (eq, "$cheat_mode", 2),
        (str_store_party_name, s4, ":var_1"),
        (str_store_party_name, s5, ":var_2"),
        (display_message, "@{!}DEBUG -- Caravan trades in {s4}, originally from {s5}"),
    (try_end),
    (call_script, "script_add_log_entry", 5, ":var_0", ":var_2", ":var_1", -1),
    (call_script, "script_do_party_center_trade", ":var_0", ":var_1", 4),
    (assign, ":var_3", reg0),
    (val_div, ":var_3", 2),
    (str_store_party_name, s1, ":var_0"),
    (str_store_party_name, s2, ":var_1"),
    (assign, reg1, ":var_3"),
    (party_get_slot, ":var_4", ":var_1", slot_center_accumulated_tariffs),
    (party_get_slot, ":var_5", ":var_1", slot_town_prosperity),
    (assign, ":var_6", ":var_3"),
    (val_mul, ":var_6", ":var_5"),
    (val_div, ":var_6", 100),
    (val_div, ":var_6", 10),
    (val_add, ":var_4", ":var_6"),
    (try_begin),
        (ge, "$cheat_mode", 3),
        (assign, reg4, ":var_6"),
        (str_store_party_name, s4, ":var_1"),
        (assign, reg5, ":var_4"),
        (display_message, "@{!}New tariffs at {s4} = {reg4}, total = {reg5}"),
    (try_end),
    (party_set_slot, ":var_1", slot_center_accumulated_tariffs, ":var_4"),
    (try_begin),
        (store_random_in_range, ":var_7", 0, 80),
        (call_script, "script_center_get_goods_availability", ":var_1"),
        (assign, ":var_8", reg0),
        (gt, ":var_7", ":var_8"),
        (try_begin),
            (store_random_in_range, ":var_7", 0, 100),
            (gt, ":var_7", 90),
            (call_script, "script_change_center_prosperity", ":var_1", 1),
            (val_add, "$newglob_total_prosperity_from_caravan_trade", 1),
        (try_end),
    (try_end),

]),

("party_calculate_regular_strength",
[
    (store_script_param_1, ":var_0"),
    (assign, reg0, 0),
    (party_get_num_companion_stacks, ":var_1", ":var_0"),
    (try_for_range, ":var_2", 0, ":var_1"),
        (party_stack_get_troop_id, ":var_3", ":var_0", ":var_2"),
        (neg|troop_is_hero, ":var_3"),
        (store_character_level, ":var_4", ":var_3"),
        (val_add, ":var_4", 12),
        (val_mul, ":var_4", ":var_4"),
        (val_div, ":var_4", 100),
        (party_stack_get_size, ":var_5", ":var_0", ":var_2"),
        (party_stack_get_num_wounded, ":var_6", ":var_0", ":var_2"),
        (val_sub, ":var_5", ":var_6"),
        (val_mul, ":var_4", ":var_5"),
        (val_add, reg0, ":var_4"),
    (try_end),

]),

("party_calculate_strength",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (assign, reg0, 0),
    (party_get_num_companion_stacks, ":var_2", ":var_0"),
    (assign, ":var_3", 0),
    (try_begin),
        (neg|eq, ":var_1", 0),
        (assign, ":var_3", 1),
    (try_end),
    (try_for_range, ":var_4", ":var_3", ":var_2"),
        (party_stack_get_troop_id, ":var_5", ":var_0", ":var_4"),
        (store_character_level, ":var_6", ":var_5"),
        (val_add, ":var_6", 4),
        (val_mul, ":var_6", ":var_6"),
        (val_mul, ":var_6", 2),
        (val_div, ":var_6", 100),
        (val_max, ":var_6", 1),
        (try_begin),
            (neg|troop_is_hero, ":var_5"),
            (party_stack_get_size, ":var_7", ":var_0", ":var_4"),
            (party_stack_get_num_wounded, ":var_8", ":var_0", ":var_4"),
            (val_sub, ":var_7", ":var_8"),
            (val_mul, ":var_6", ":var_7"),
        (else_try),
            (troop_is_wounded, ":var_5"),
            (assign, ":var_6", 0),
        (try_end),
        (val_add, reg0, ":var_6"),
    (try_end),
    (party_set_slot, ":var_0", slot_party_cached_strength, reg0),

]),

("loot_player_items",
[
    (store_script_param, ":var_0", 1),
    (troop_get_inventory_capacity, ":var_1", "trp_player"),
    (try_for_range, ":var_2", 0, ":var_1"),
        (troop_get_inventory_slot, ":var_3", "trp_player", ":var_2"),
        (ge, ":var_3", 0),
        (troop_get_inventory_slot_modifier, ":var_4", "trp_player", ":var_2"),
        (try_begin),
            (is_between, ":var_3", "itm_spice", "itm_siege_supply"),
            (assign, ":var_5", 20),
        (else_try),
            (this_or_next|is_between, ":var_3", "itm_sumpter_horse", "itm_arrows"),
            (this_or_next|eq, ":var_3", "itm_warhorse_sarranid"),
            (eq, ":var_3", "itm_warhorse_steppe"),
            (assign, ":var_5", 15),
        (else_try),
            (this_or_next|is_between, ":var_3", "itm_wooden_stick", "itm_wooden_shield"),
            (is_between, ":var_3", "itm_jarid", "itm_torch"),
            (assign, ":var_5", 5),
        (else_try),
            (this_or_next|is_between, ":var_3", "itm_leather_gloves", "itm_wooden_stick"),
            (is_between, ":var_3", "itm_wooden_shield", "itm_jarid"),
            (assign, ":var_5", 5),
        (try_end),
        (store_random_in_range, ":var_6", 0, 100),
        (neg|ge, ":var_6", ":var_5"),
        (troop_remove_item, "trp_player", ":var_3"),
        (try_begin),
            (gt, ":var_0", 0),
            (party_get_slot, ":var_7", ":var_0", slot_party_next_looted_item_slot),
            (val_add, ":var_7", 110),
            (party_set_slot, ":var_0", ":var_7", ":var_3"),
            (val_sub, ":var_7", 110),
            (val_add, ":var_7", 115),
            (party_set_slot, ":var_0", ":var_7", ":var_4"),
            (val_sub, ":var_7", 115),
            (val_add, ":var_7", 1),
            (val_mod, ":var_7", 5),
            (party_set_slot, ":var_0", slot_party_next_looted_item_slot, ":var_7"),
        (try_end),
    (try_end),
    (store_troop_gold, ":var_8", "trp_player"),
    (store_div, ":var_9", ":var_8", 5),
    (store_div, ":var_10", ":var_8", 10),
    (store_random_in_range, ":var_11", ":var_10", ":var_9"),
    (troop_remove_gold, "trp_player", ":var_11"),

]),

("party_calculate_loot",
[
    (store_script_param_1, ":var_0"),
    (call_script, "script_calculate_main_party_shares"),
    (assign, ":var_1", reg0),
    (try_for_range, ":var_2", 0, 5),
        (store_add, ":var_3", ":var_2", 110),
        (party_get_slot, ":var_4", "$g_enemy_party", ":var_3"),
        (gt, ":var_4", 0),
        (party_set_slot, "$g_enemy_party", ":var_3", 0),
        (val_sub, ":var_3", 110),
        (val_add, ":var_3", 115),
        (party_get_slot, ":var_5", "$g_enemy_party", ":var_3"),
        (troop_add_item, "trp_temp_troop", ":var_4", ":var_5"),
    (try_end),
    (party_set_slot, "$g_enemy_party", slot_party_next_looted_item_slot, 0),
    (assign, ":var_6", 0),
    (try_begin),
        (this_or_next|party_slot_eq, "$g_enemy_party", slot_party_type, 11),
        (this_or_next|party_slot_eq, "$g_enemy_party", slot_party_type, 18),
        (party_slot_eq, "$g_enemy_party", slot_party_type, 15),
        (store_mul, ":var_7", 10, 30),
        (val_mul, ":var_7", "$g_strength_contribution_of_player"),
        (val_div, ":var_7", 100),
        (val_div, ":var_7", ":var_1"),
        (try_begin),
            (party_slot_eq, "$g_enemy_party", slot_party_type, 11),
            (reset_item_probabilities, 100),
            (assign, ":var_8", "itm_spice"),
            (assign, ":var_9", "itm_siege_supply"),
        (else_try),
            (party_slot_eq, "$g_enemy_party", slot_party_type, 18),
            (val_div, ":var_7", 2),
            (reset_item_probabilities, 1),
            (assign, ":var_8", "itm_smoked_fish"),
            (assign, ":var_9", "itm_siege_supply"),
        (else_try),
            (val_div, ":var_7", 5),
            (reset_item_probabilities, 1),
            (assign, ":var_8", "itm_smoked_fish"),
            (assign, ":var_9", "itm_siege_supply"),
        (try_end),
        (store_sub, ":var_10", 250, "itm_spice"),
        (try_for_range, ":var_11", ":var_8", ":var_9"),
            (try_begin),
                (neg|party_slot_eq, "$g_enemy_party", slot_party_type, 18),
                (store_add, ":var_12", ":var_11", ":var_10"),
                (party_get_slot, ":var_13", "$g_enemy_party", ":var_12"),
            (else_try),
                (assign, ":var_13", 10000),
                (val_add, ":var_13", 1000),
                (val_div, ":var_13", 3),
            (try_end),
            (assign, ":var_14", 100),
            (val_mul, ":var_14", 1000),
            (val_div, ":var_14", ":var_13"),
            (assign, reg0, ":var_14"),
            (set_item_probability_in_merchandise, ":var_11", ":var_14"),
        (try_end),
        (troop_add_merchandise, "trp_temp_troop", 11, ":var_7"),
        (val_add, ":var_6", ":var_7"),
    (try_end),
    (store_mul, ":var_15", 10, 3),
    (val_mul, ":var_15", "$g_strength_contribution_of_player"),
    (party_get_skill_level, ":var_16", "p_main_party", "skl_looting"),
    (val_add, ":var_16", 10),
    (val_mul, ":var_15", ":var_16"),
    (val_div, ":var_15", 10),
    (val_div, ":var_15", ":var_1"),
    (party_get_num_companion_stacks, ":var_17", ":var_0"),
    (try_for_range, ":var_18", 0, ":var_17"),
        (party_stack_get_troop_id, ":var_19", ":var_0", ":var_18"),
        (neg|troop_is_hero, ":var_19"),
        (party_stack_get_size, ":var_20", ":var_0", ":var_18"),
        (try_for_range, ":var_21", 0, ":var_20"),
            (troop_loot_troop, "trp_temp_troop", ":var_19", ":var_15"),
        (try_end),
    (try_end),
    (troop_get_inventory_capacity, ":var_22", "trp_temp_troop"),
    (try_for_range, ":var_23", 0, ":var_22"),
        (troop_get_inventory_slot, ":var_24", "trp_temp_troop", ":var_23"),
        (ge, ":var_24", 0),
        (val_add, ":var_6", 1),
    (try_end),
    (assign, reg0, ":var_6"),

]),

("calculate_main_party_shares",
[
    (assign, ":var_0", 10),
    (party_get_num_companion_stacks, ":var_1", "p_main_party"),
    (try_for_range, ":var_2", 1, ":var_1"),
        (party_stack_get_troop_id, ":var_3", "p_main_party", ":var_2"),
        (try_begin),
            (neg|troop_is_hero, ":var_3"),
            (party_stack_get_size, ":var_4", "p_main_party", ":var_2"),
            (val_add, ":var_0", ":var_4"),
        (else_try),
            (val_add, ":var_0", 3),
        (try_end),
    (try_end),
    (assign, reg0, ":var_0"),

]),

("party_give_xp_and_gold",
[
    (store_script_param_1, ":var_0"),
    (call_script, "script_calculate_main_party_shares"),
    (assign, ":var_1", reg0),
    (assign, ":var_2", 0),
    (party_get_num_companion_stacks, ":var_3", ":var_0"),
    (try_for_range, ":var_4", 0, ":var_3"),
        (party_stack_get_troop_id, ":var_5", ":var_0", ":var_4"),
        (neg|troop_is_hero, ":var_5"),
        (party_stack_get_size, ":var_6", ":var_0", ":var_4"),
        (store_character_level, ":var_7", ":var_5"),
        (store_add, ":var_8", ":var_7", 10),
        (val_mul, ":var_8", ":var_8"),
        (val_div, ":var_8", 10),
        (store_mul, ":var_9", ":var_8", ":var_6"),
        (val_add, ":var_2", ":var_9"),
    (try_end),
    (val_mul, ":var_2", "$g_strength_contribution_of_player"),
    (val_div, ":var_2", 100),
    (val_min, ":var_2", 40000),
    (assign, ":var_10", ":var_2"),
    (store_random_in_range, ":var_11", 50, 100),
    (val_mul, ":var_10", ":var_11"),
    (val_div, ":var_10", 100),
    (party_add_xp, "p_main_party", ":var_10"),
    (store_mul, ":var_12", ":var_2", 10),
    (val_min, ":var_12", 60000),
    (store_random_in_range, ":var_11", 50, 100),
    (val_mul, ":var_12", ":var_11"),
    (val_div, ":var_12", 100),
    (val_div, ":var_12", ":var_1"),
    (party_get_num_companion_stacks, ":var_3", "p_main_party"),
    (try_for_range, ":var_4", 0, ":var_3"),
        (party_stack_get_troop_id, ":var_5", "p_main_party", ":var_4"),
        (try_begin),
            (troop_is_hero, ":var_5"),
            (call_script, "script_troop_add_gold", ":var_5", ":var_12"),
        (try_end),
    (try_end),

]),

("setup_troop_meeting",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (call_script, "script_get_meeting_scene"),
    (assign, ":var_2", reg0),
    (modify_visitors_at_site, ":var_2"),
    (reset_visitors),
    (set_visitor, 0, "trp_player"),
    (try_begin),
        (gt, ":var_1", -1),
        (set_visitor, 17, ":var_0", ":var_1"),
    (else_try),
        (set_visitor, 17, ":var_0"),
    (try_end),
    (set_jump_mission, "mt_conversation_encounter"),
    (jump_to_scene, ":var_2"),
    (change_screen_map_conversation, ":var_0"),

]),

("setup_party_meeting",
[
    (store_script_param_1, ":var_0"),
    (try_begin),
        (neg|ge, "$g_encountered_party_relation", 0),
    (try_end),
    (call_script, "script_get_meeting_scene"),
    (assign, ":var_1", reg0),
    (modify_visitors_at_site, ":var_1"),
    (reset_visitors),
    (set_visitor, 0, "trp_player"),
    (party_stack_get_troop_id, ":var_2", ":var_0", 0),
    (party_stack_get_troop_dna, ":var_3", ":var_0", 0),
    (set_visitor, 17, ":var_2", ":var_3"),
    (set_jump_mission, "mt_conversation_encounter"),
    (jump_to_scene, ":var_1"),
    (change_screen_map_conversation, ":var_2"),

]),

("get_meeting_scene",
[
    (party_get_current_terrain, ":var_0", "p_main_party"),
    (assign, ":var_1", "scn_random_scene"),
    (try_begin),
        (eq, ":var_0", 2),
        (assign, ":var_1", "scn_meeting_scene_steppe"),
    (else_try),
        (eq, ":var_0", 3),
        (assign, ":var_1", "scn_meeting_scene_plain"),
    (else_try),
        (eq, ":var_0", 4),
        (assign, ":var_1", "scn_meeting_scene_snow"),
    (else_try),
        (eq, ":var_0", 5),
        (assign, ":var_1", "scn_meeting_scene_desert"),
    (else_try),
        (eq, ":var_0", 10),
        (assign, ":var_1", "scn_meeting_scene_steppe"),
    (else_try),
        (eq, ":var_0", 11),
        (assign, ":var_1", "scn_meeting_scene_plain"),
    (else_try),
        (eq, ":var_0", 12),
        (assign, ":var_1", "scn_meeting_scene_snow"),
    (else_try),
        (eq, ":var_0", 13),
        (assign, ":var_1", "scn_meeting_scene_desert"),
    (else_try),
        (call_script, "script_cf_is_party_on_water", "p_main_party"),
        (assign, ":var_1", "scn_meeting_scene_sea"),
    (else_try),
        (assign, ":var_1", "scn_meeting_scene_plain"),
    (try_end),
    (assign, reg0, ":var_1"),

]),

("party_remove_all_companions",
[
    (store_script_param_1, ":var_0"),
    (party_get_num_companion_stacks, ":var_1", ":var_0"),
    (try_for_range_backwards, ":var_2", 0, ":var_1"),
        (party_stack_get_troop_id, ":var_3", ":var_0", ":var_2"),
        (party_stack_get_size, ":var_4", ":var_0", ":var_2"),
        (try_begin),
            (troop_is_hero, ":var_3"),
            (neg|is_between, ":var_3", "trp_kingdom_4_pretender", "trp_knight_1_1_wife"),
            (neg|eq, ":var_3", "trp_player"),
            (eq, "$g_prison_heroes", 1),
            (eq, ":var_0", "p_main_party"),
            (store_random_in_range, ":var_5", 0, 4),
            (neg|eq, ":var_5", 0),
            (troop_set_health, ":var_3", 100),
            (store_faction_of_party, ":var_6", "$g_enemy_party"),
            (assign, ":var_7", 99999),
            (assign, ":var_8", -1),
            (try_for_range, ":var_9", "p_town_1_1", "p_village_1_1"),
                (store_faction_of_party, ":var_10", ":var_9"),
                (eq, ":var_10", ":var_6"),
                (store_distance_to_party_from_party, ":var_11", ":var_9", "p_main_party"),
                (neg|ge, ":var_11", ":var_7"),
                (assign, ":var_7", ":var_11"),
                (assign, ":var_8", ":var_9"),
            (try_end),
            (assign, reg1, ":var_8"),
            (try_begin),
                (ge, ":var_8", 0),
                (store_random_in_range, ":var_5", 0, 4),
                (neg|eq, ":var_5", 0),
                (party_add_prisoners, ":var_8", ":var_3", ":var_4"),
                (troop_set_slot, ":var_3", slot_troop_prisoner_of_party, ":var_8"),
                (troop_set_slot, ":var_3", slot_troop_playerparty_history, 1),
                (troop_set_slot, ":var_3", slot_troop_turned_down_twice, 0),
                (troop_set_slot, ":var_3", slot_troop_occupation, 0),
                (party_remove_members, ":var_0", ":var_3", ":var_4"),
                (try_begin),
                    (eq, "$cheat_mode", 1),
                    (str_store_party_name, s1, ":var_8"),
                    (display_message, "str_your_hero_prisoned_at_s1"),
                (try_end),
            (else_try),
                (assign, ":var_12", 1000),
                (try_for_range, ":var_13", 0, ":var_12"),
                    (store_random_in_range, ":var_14", "p_town_1_1", "p_castle_1_1"),
                    (neg|troop_slot_eq, ":var_3", slot_troop_home, ":var_14"),
                    (neg|troop_slot_eq, ":var_3", slot_troop_first_encountered, ":var_14"),
                    (assign, ":var_12", -1),
                (try_end),
                (troop_set_slot, ":var_3", slot_troop_cur_center, ":var_14"),
                (troop_set_slot, ":var_3", slot_troop_playerparty_history, 1),
                (troop_set_slot, ":var_3", slot_troop_turned_down_twice, 0),
                (troop_set_slot, ":var_3", slot_troop_occupation, 0),
                (party_remove_members, ":var_0", ":var_3", ":var_4"),
                (try_begin),
                    (eq, "$cheat_mode", 1),
                    (str_store_troop_name, s4, ":var_3"),
                    (str_store_party_name, s5, ":var_14"),
                    (display_message, "@{!}{s4} is sent to {s5} after defeat"),
                (try_end),
            (try_end),
        (else_try),
            (this_or_next|neg|troop_is_hero, ":var_3"),
            (eq, "$g_move_heroes", 1),
            (party_remove_members, ":var_0", ":var_3", ":var_4"),
        (try_end),
    (try_end),

]),

("party_remove_all_prisoners",
[
    (store_script_param_1, ":var_0"),
    (party_get_num_prisoner_stacks, ":var_1", ":var_0"),
    (try_for_range_backwards, ":var_2", 0, ":var_1"),
        (party_prisoner_stack_get_troop_id, ":var_3", ":var_0", ":var_2"),
        (this_or_next|neg|troop_is_hero, ":var_3"),
        (eq, "$g_move_heroes", 1),
        (party_prisoner_stack_get_size, ":var_4", ":var_0", ":var_2"),
        (party_remove_prisoners, ":var_0", ":var_3", ":var_4"),
    (try_end),

]),

("party_add_party_companions",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (party_get_num_companion_stacks, ":var_2", ":var_1"),
    (try_for_range, ":var_3", 0, ":var_2"),
        (party_stack_get_troop_id, ":var_4", ":var_1", ":var_3"),
        (this_or_next|neg|troop_is_hero, ":var_4"),
        (eq, "$g_move_heroes", 1),
        (party_stack_get_size, ":var_5", ":var_1", ":var_3"),
        (party_add_members, ":var_0", ":var_4", ":var_5"),
        (party_stack_get_num_wounded, ":var_6", ":var_1", ":var_3"),
        (party_wound_members, ":var_0", ":var_4", ":var_6"),
    (try_end),

]),

("party_add_party_prisoners",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (party_get_num_prisoner_stacks, ":var_2", ":var_1"),
    (try_for_range, ":var_3", 0, ":var_2"),
        (party_prisoner_stack_get_troop_id, ":var_4", ":var_1", ":var_3"),
        (this_or_next|neg|troop_is_hero, ":var_4"),
        (eq, "$g_move_heroes", 1),
        (party_prisoner_stack_get_size, ":var_5", ":var_1", ":var_3"),
        (party_add_members, ":var_0", ":var_4", ":var_5"),
    (try_end),

]),

("party_prisoners_add_party_companions",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (party_get_num_companion_stacks, ":var_2", ":var_1"),
    (try_for_range, ":var_3", 0, ":var_2"),
        (party_stack_get_troop_id, ":var_4", ":var_1", ":var_3"),
        (this_or_next|neg|troop_is_hero, ":var_4"),
        (eq, "$g_move_heroes", 1),
        (party_stack_get_size, ":var_5", ":var_1", ":var_3"),
        (party_add_prisoners, ":var_0", ":var_4", ":var_5"),
    (try_end),

]),

("party_prisoners_add_party_prisoners",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (party_get_num_prisoner_stacks, ":var_2", ":var_1"),
    (try_for_range, ":var_3", 0, ":var_2"),
        (party_prisoner_stack_get_troop_id, ":var_4", ":var_1", ":var_3"),
        (this_or_next|neg|troop_is_hero, ":var_4"),
        (eq, "$g_move_heroes", 1),
        (party_prisoner_stack_get_size, ":var_5", ":var_1", ":var_3"),
        (party_add_prisoners, ":var_0", ":var_4", ":var_5"),
    (try_end),

]),

("party_add_party",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (call_script, "script_party_add_party_companions", ":var_0", ":var_1"),
    (call_script, "script_party_prisoners_add_party_prisoners", ":var_0", ":var_1"),

]),

("party_copy",
[
    (assign, "$g_move_heroes", 1),
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (party_clear, ":var_0"),
    (call_script, "script_party_add_party", ":var_0", ":var_1"),

]),

("clear_party_group",
[
    (store_script_param_1, ":var_0"),
    (party_clear, ":var_0"),
    (party_get_num_attached_parties, ":var_1", ":var_0"),
    (try_for_range, ":var_2", 0, ":var_1"),
        (party_get_attached_party_with_rank, ":var_3", ":var_0", ":var_2"),
        (call_script, "script_clear_party_group", ":var_3"),
    (try_end),

]),

("party_add_wounded_members_as_prisoners",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (party_get_num_companion_stacks, ":var_2", ":var_1"),
    (try_for_range, ":var_3", 0, ":var_2"),
        (party_stack_get_num_wounded, ":var_4", ":var_1", ":var_3"),
        (ge, ":var_4", 1),
        (party_stack_get_troop_id, ":var_5", ":var_1", ":var_3"),
        (this_or_next|neg|troop_is_hero, ":var_5"),
        (eq, "$g_move_heroes", 1),
        (party_add_prisoners, ":var_0", ":var_5", ":var_4"),
    (try_end),

]),

("get_nonempty_party_in_group",
[
    (store_script_param_1, ":var_0"),
    (party_get_num_companion_stacks, ":var_1", ":var_0"),
    (try_begin),
        (gt, ":var_1", 0),
        (assign, reg0, ":var_0"),
    (else_try),
        (assign, reg0, -1),
        (party_get_num_attached_parties, ":var_2", ":var_0"),
        (try_for_range, ":var_3", 0, ":var_2"),
            (neg|ge, reg0, 0),
            (party_get_attached_party_with_rank, ":var_4", ":var_0", ":var_3"),
            (call_script, "script_get_nonempty_party_in_group", ":var_4"),
        (try_end),
    (try_end),

]),

("collect_prisoners_from_empty_parties",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (party_get_num_companions, ":var_2", ":var_0"),
    (try_begin),
        (eq, ":var_2", 0),
        (party_get_num_prisoner_stacks, ":var_3", ":var_0"),
        (try_for_range, ":var_4", 0, ":var_3"),
            (party_prisoner_stack_get_troop_id, ":var_5", ":var_0", ":var_4"),
            (troop_is_hero, ":var_5"),
            (party_add_members, ":var_1", ":var_5", 1),
        (try_end),
    (try_end),
    (party_get_num_attached_parties, ":var_6", ":var_0"),
    (try_for_range, ":var_7", 0, ":var_6"),
        (party_get_attached_party_with_rank, ":var_8", ":var_0", ":var_7"),
        (call_script, "script_collect_prisoners_from_empty_parties", ":var_8", ":var_1"),
    (try_end),

]),

("change_party_morale",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (party_get_morale, ":var_2", ":var_0"),
    (store_add, ":var_3", ":var_2", ":var_1"),
    (val_clamp, ":var_3", 0, 100),
    (party_set_morale, ":var_0", ":var_3"),
    (str_store_party_name, s1, ":var_0"),
    (try_begin),
        (neg|ge, ":var_3", ":var_2"),
        (store_sub, reg1, ":var_2", ":var_3"),
    (else_try),
        (gt, ":var_3", ":var_2"),
        (store_sub, reg1, ":var_3", ":var_2"),
    (try_end),

]),

("count_casualties_and_adjust_morale",
[
    (call_script, "script_calculate_main_party_shares"),
    (assign, ":var_0", reg0),
    (assign, ":var_1", 0),
    (party_get_num_companion_stacks, ":var_2", "p_player_casualties"),
    (try_for_range, ":var_3", 0, ":var_2"),
        (party_stack_get_troop_id, ":var_4", "p_player_casualties", ":var_3"),
        (party_stack_get_size, ":var_5", "p_player_casualties", ":var_3"),
        (party_stack_get_num_wounded, ":var_6", "p_player_casualties", ":var_3"),
        (store_mul, ":var_7", ":var_5", 2),
        (store_sub, ":var_8", ":var_6"),
        (store_character_level, ":var_9", ":var_4"),
        (store_add, ":var_10", ":var_9", 3),
        (try_begin),
            (eq, ":var_4", "trp_player"),
            (val_add, ":var_9", 75),
        (else_try),
            (troop_is_hero, ":var_4"),
            (val_add, ":var_9", 50),
        (try_end),
        (val_mul, ":var_10", ":var_10"),
        (val_div, ":var_10", 10),
        (assign, reg0, ":var_10"),
        (val_mul, ":var_10", ":var_5"),
        (try_begin),
            (neg|troop_is_hero, ":var_4"),
            (val_mul, ":var_10", ":var_8"),
            (val_div, ":var_10", ":var_7"),
        (try_end),
        (try_begin),
            (eq, "$cheat_mode", 1),
            (assign, reg1, ":var_5"),
            (assign, reg2, ":var_10"),
            (display_message, "str_our_per_person__reg0_num_people__reg1_total_gain__reg2"),
        (try_end),
        (val_add, ":var_1", ":var_10"),
    (try_end),
    (assign, ":var_11", 0),
    (assign, ":var_12", 0),
    (party_get_num_companion_stacks, ":var_2", "p_enemy_casualties"),
    (try_for_range, ":var_3", 0, ":var_2"),
        (party_stack_get_troop_id, ":var_4", "p_enemy_casualties", ":var_3"),
        (party_stack_get_size, ":var_5", "p_enemy_casualties", ":var_3"),
        (party_stack_get_num_wounded, ":var_6", "p_enemy_casualties", ":var_3"),
        (store_mul, ":var_7", ":var_5", 2),
        (store_sub, ":var_8", ":var_7", ":var_6"),
        (store_character_level, ":var_9", ":var_4"),
        (store_add, ":var_10", ":var_9", 3),
        (try_begin),
            (troop_is_hero, ":var_4"),
            (val_add, ":var_9", 50),
        (try_end),
        (val_mul, ":var_10", ":var_10"),
        (val_div, ":var_10", 10),
        (assign, reg0, ":var_10"),
        (val_mul, ":var_10", ":var_5"),
        (try_begin),
            (neg|troop_is_hero, ":var_4"),
            (val_mul, ":var_10", ":var_8"),
            (val_div, ":var_10", ":var_7"),
        (try_end),
        (try_begin),
            (eq, "$cheat_mode", 1),
            (assign, reg1, ":var_5"),
            (assign, reg2, ":var_10"),
            (display_message, "str_ene_per_person__reg0_num_people__reg1_total_gain__reg2"),
        (try_end),
        (val_add, ":var_12", ":var_10"),
        (val_add, ":var_11", ":var_5"),
    (try_end),
    (assign, ":var_13", 0),
    (try_begin),
        (eq, "$any_allies_at_the_last_battle", 1),
        (party_get_num_companion_stacks, ":var_2", "p_ally_casualties"),
        (try_for_range, ":var_3", 0, ":var_2"),
            (party_stack_get_troop_id, ":var_4", "p_ally_casualties", ":var_3"),
            (party_stack_get_size, ":var_5", "p_ally_casualties", ":var_3"),
            (party_stack_get_num_wounded, ":var_6", "p_ally_casualties", ":var_3"),
            (store_mul, ":var_7", ":var_5", 2),
            (store_sub, ":var_8", ":var_6"),
            (store_character_level, ":var_9", ":var_4"),
            (store_add, ":var_10", ":var_9", 3),
            (try_begin),
                (troop_is_hero, ":var_4"),
                (val_add, ":var_9", 50),
            (try_end),
            (val_mul, ":var_10", ":var_10"),
            (val_div, ":var_10", 10),
            (assign, reg0, ":var_10"),
            (val_mul, ":var_10", ":var_5"),
            (try_begin),
                (neg|troop_is_hero, ":var_4"),
                (val_mul, ":var_10", ":var_8"),
                (val_div, ":var_10", ":var_7"),
            (try_end),
            (try_begin),
                (eq, "$cheat_mode", 1),
                (assign, reg1, ":var_5"),
                (assign, reg2, ":var_10"),
                (display_message, "str_all_per_person__reg0_num_people__reg1_total_gain__reg2"),
            (try_end),
            (val_add, ":var_13", ":var_10"),
        (try_end),
    (try_end),
    (store_add, ":var_14", ":var_1", ":var_13"),
    (assign, ":var_15", ":var_12"),
    (val_mul, ":var_14", 100),
    (try_begin),
        (eq, "$cheat_mode", 1),
        (assign, reg0, ":var_15"),
        (display_message, "@{!}DEBUGS : enemy loses : {reg0}"),
    (try_end),
    (try_begin),
        (gt, ":var_15", 0),
        (store_div, ":var_16", ":var_14", ":var_15"),
    (else_try),
        (assign, ":var_16", 1000),
    (try_end),
    (try_begin),
        (eq, "$cheat_mode", 1),
        (assign, reg1, ":var_16"),
        (display_message, "str_loss_ratio_is_reg1"),
    (try_end),
    (try_begin),
        (neg|is_between, "$g_enemy_party", "p_town_1_1", "p_salt_mine"),
        (store_sub, ":var_17", 60, ":var_16"),
    (else_try),
        (store_sub, ":var_17", 100, ":var_16"),
    (try_end),
    (try_begin),
        (neg|ge, ":var_17", 0),
        (val_div, ":var_17", 2),
    (try_end),
    (try_begin),
        (eq, "$cheat_mode", 1),
        (assign, reg0, ":var_17"),
        (display_message, "@{!}DEBUGS1 : total gain : {reg0}"),
    (try_end),
    (val_max, ":var_17", -60),
    (val_mul, ":var_17", ":var_15"),
    (val_div, ":var_17", 100),
    (store_mul, ":var_18", ":var_17", -1),
    (val_mul, ":var_17", "$g_strength_contribution_of_player"),
    (val_div, ":var_17", 100),
    (try_begin),
        (eq, "$cheat_mode", 1),
        (assign, reg0, ":var_17"),
        (display_message, "@{!}DEBUGS2 : total gain : {reg0}"),
    (try_end),
    (try_begin),
        (party_is_active, "$g_enemy_party"),
        (assign, ":var_19", 0),
        (val_add, ":var_19", 10),
        (party_get_num_companion_stacks, ":var_2", "$g_enemy_party"),
        (try_for_range, ":var_3", 0, ":var_2"),
            (party_stack_get_troop_id, ":var_4", "$g_enemy_party", ":var_3"),
            (party_stack_get_size, ":var_5", "$g_enemy_party", ":var_3"),
            (val_add, ":var_19", ":var_5"),
        (try_end),
        (assign, ":var_20", ":var_19"),
        (party_get_num_attached_parties, ":var_21", "$g_enemy_party"),
        (try_for_range, ":var_22", 0, ":var_21"),
            (val_add, ":var_19", 10),
            (party_get_attached_party_with_rank, ":var_23", "$g_enemy_party", ":var_22"),
            (party_get_num_companion_stacks, ":var_2", ":var_23"),
            (try_for_range, ":var_3", 0, ":var_2"),
                (party_stack_get_troop_id, ":var_4", ":var_23", ":var_3"),
                (party_stack_get_size, ":var_5", ":var_23", ":var_3"),
                (val_add, ":var_19", ":var_5"),
            (try_end),
        (try_end),
        (assign, ":var_24", ":var_19"),
        (assign, reg5, ":var_24"),
        (assign, reg6, ":var_18"),
        (set_fixed_point_multiplier, 100),
        (val_mul, ":var_24", 100),
        (store_sqrt, ":var_25", ":var_24"),
        (val_div, ":var_25", 100),
        (val_div, ":var_18", ":var_25"),
        (val_div, ":var_18", 4),
        (try_begin),
            (eq, "$cheat_mode", 1),
            (assign, reg7, ":var_18"),
            (display_message, "str_total_enemy_morale_gain__reg6_last_total_enemy_morale_gain__reg7_remaining_enemy_population__reg5"),
        (try_end),
        (store_mul, ":var_26", ":var_18", ":var_20"),
        (val_div, ":var_26", ":var_19"),
        (try_begin),
            (party_is_active, "$g_enemy_party"),
            (call_script, "script_change_party_morale", "$g_enemy_party", ":var_26"),
            (party_get_num_attached_parties, ":var_21", "$g_enemy_party"),
            (try_for_range, ":var_22", 0, ":var_21"),
                (party_get_attached_party_with_rank, ":var_23", "$g_enemy_party", ":var_22"),
                (party_get_num_companion_stacks, ":var_2", ":var_23"),
                (assign, ":var_27", 0),
                (try_for_range, ":var_3", 0, ":var_2"),
                    (party_stack_get_troop_id, ":var_4", ":var_23", ":var_3"),
                    (party_stack_get_size, ":var_5", ":var_23", ":var_3"),
                    (val_add, ":var_27", ":var_5"),
                (try_end),
                (store_mul, ":var_26", ":var_18", ":var_27"),
                (val_div, ":var_26", ":var_19"),
                (call_script, "script_change_party_morale", ":var_23", ":var_26"),
            (try_end),
        (try_end),
    (try_end),
    (assign, ":var_28", ":var_17"),
    (val_div, ":var_28", ":var_0"),
    (try_begin),
        (eq, "$cheat_mode", 1),
        (assign, reg0, ":var_0"),
        (assign, reg1, ":var_17"),
        (display_message, "@{!}DEBUGS3 : num player party shares:{reg0}, total gain:{reg1}"),
    (try_end),
    (call_script, "script_change_player_party_morale", ":var_28"),
    (store_mul, ":var_29", ":var_11", "$g_strength_contribution_of_player"),
    (store_div, ":var_30", ":var_29", 8),
    (try_begin),
        (gt, ":var_30", 2000),
        (assign, ":var_30", 2000),
    (try_end),
    (try_begin),
        (ge, "$g_ally_party", 0),
        (store_div, ":var_31", ":var_30", 3),
        (val_mul, ":var_31", 2),
        (store_faction_of_party, ":var_32", "$g_ally_party"),
        (faction_get_slot, ":var_33", ":var_32", slot_faction_morale_of_player_troops),
        (val_add, ":var_33", ":var_31"),
    (try_end),
    (try_begin),
        (neg|party_is_active, "$g_enemy_party"),
        (ge, "$current_town", 0),
        (val_mul, ":var_30", 2),
        (store_faction_of_party, ":var_32", "$current_town"),
        (faction_get_slot, ":var_33", ":var_32", slot_faction_morale_of_player_troops),
        (val_add, ":var_33", ":var_30"),
    (else_try),
        (party_is_active, "$g_enemy_party"),
        (assign, ":var_34", 0),
        (try_begin),
            (eq, "$players_kingdom", "fac_player_supporters_faction"),
            (neg|faction_slot_eq, "fac_player_supporters_faction", slot_faction_leader, "trp_player"),
            (assign, ":var_34", 1),
        (try_end),
        (eq, ":var_34", 0),
        (store_div, ":var_30", ":var_30", 3),
        (val_mul, ":var_30", 2),
        (store_faction_of_party, ":var_35", "$g_enemy_party"),
        (faction_get_slot, ":var_33", ":var_35", slot_faction_morale_of_player_troops),
        (val_sub, ":var_33", ":var_30"),
    (try_end),

]),

("print_casualties_to_s0",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (str_clear, s0),
    (assign, ":var_2", 0),
    (assign, ":var_3", 0),
    (assign, ":var_4", 0),
    (assign, ":var_5", 0),
    (party_get_num_companion_stacks, ":var_6", ":var_0"),
    (try_for_range, ":var_7", 0, ":var_6"),
        (party_stack_get_troop_id, ":var_8", ":var_0", ":var_7"),
        (party_stack_get_size, ":var_9", ":var_0", ":var_7"),
        (party_stack_get_num_wounded, ":var_10", ":var_0", ":var_7"),
        (try_begin),
            (this_or_next|eq, ":var_0", "p_main_party"),
            (eq, ":var_0", "p_player_casualties"),
            (troop_get_slot, ":var_11", ":var_8", slot_troop_player_routed_agents),
            (troop_set_slot, ":var_8", slot_troop_player_routed_agents, 0),
        (else_try),
            (party_get_attached_to, ":var_12", ":var_0"),
            (this_or_next|eq, ":var_0", "p_ally_casualties"),
            (ge, ":var_12", 0),
            (this_or_next|eq, ":var_0", "p_ally_casualties"),
            (eq, ":var_12", "p_main_party"),
            (troop_get_slot, ":var_11", ":var_8", slot_troop_ally_routed_agents),
            (troop_set_slot, ":var_8", slot_troop_ally_routed_agents, 0),
        (else_try),
            (troop_get_slot, ":var_11", ":var_8", slot_troop_enemy_routed_agents),
            (troop_set_slot, ":var_8", slot_troop_enemy_routed_agents, 0),
        (try_end),
        (store_sub, ":var_13", ":var_9", ":var_10"),
        (val_sub, ":var_13", ":var_11"),
        (val_add, ":var_4", ":var_13"),
        (val_add, ":var_3", ":var_10"),
        (val_add, ":var_5", ":var_11"),
        (try_begin),
            (this_or_next|gt, ":var_13", 0),
            (this_or_next|gt, ":var_10", 0),
            (gt, ":var_11", 0),
            (store_add, reg3, ":var_13", ":var_10"),
            (store_add, reg3, reg3, ":var_11"),
            (str_store_troop_name_by_count, s1, ":var_8", reg3),
            (try_begin),
                (troop_is_hero, ":var_8"),
                (assign, reg3, 0),
            (try_end),
            (try_begin),
                (gt, ":var_13", 0),
                (gt, ":var_10", 0),
                (gt, ":var_11", 0),
                (assign, reg4, ":var_13"),
                (assign, reg5, ":var_10"),
                (assign, reg6, ":var_11"),
                (str_store_string, s2, "str_reg4_killed_reg5_wounded_reg6_routed"),
            (else_try),
                (gt, ":var_13", 0),
                (gt, ":var_11", 0),
                (assign, reg4, ":var_13"),
                (assign, reg5, ":var_11"),
                (str_store_string, s2, "str_reg4_killed_reg5_routed"),
            (else_try),
                (gt, ":var_13", 0),
                (gt, ":var_10", 0),
                (assign, reg4, ":var_13"),
                (assign, reg5, ":var_10"),
                (str_store_string, s2, "str_reg4_killed_reg5_wounded"),
            (else_try),
                (gt, ":var_10", 0),
                (gt, ":var_11", 0),
                (assign, reg4, ":var_10"),
                (assign, reg5, ":var_11"),
                (str_store_string, s2, "str_reg4_wounded_reg5_routed"),
            (else_try),
                (gt, ":var_13", 0),
                (assign, reg1, ":var_13"),
                (str_store_string, s3, "@killed"),
                (str_store_string, s2, "str_reg1_blank_s3"),
            (else_try),
                (gt, ":var_10", 0),
                (assign, reg1, ":var_10"),
                (str_store_string, s3, "@wounded"),
                (str_store_string, s2, "str_reg1_blank_s3"),
            (else_try),
                (assign, reg1, ":var_11"),
                (str_store_string, s3, "str_routed"),
                (str_store_string, s2, "str_reg1_blank_s3"),
            (try_end),
            (try_begin),
                (eq, ":var_1", 1),
                (try_begin),
                    (eq, ":var_2", 0),
                    (str_store_string, s0, "@{!}{reg3?{reg3}:} {s1} ({s2})"),
                (else_try),
                    (str_store_string, s0, "@{!}{s0}, {reg3?{reg3}:} {s1} ({s2})"),
                (try_end),
            (else_try),
                (str_store_string, s0, "@{!}{s0}^{reg3?{reg3}:} {s1} ({s2})"),
            (try_end),
            (val_add, ":var_2", 1),
        (try_end),
    (try_end),
    (try_begin),
        (this_or_next|gt, ":var_4", 0),
        (this_or_next|gt, ":var_3", 0),
        (gt, ":var_5", 0),
        (store_add, ":var_14", ":var_4", ":var_3"),
        (val_add, ":var_14", ":var_5"),
        (assign, reg3, ":var_14"),
        (try_begin),
            (gt, ":var_4", 0),
            (gt, ":var_3", 0),
            (gt, ":var_5", 0),
            (assign, reg4, ":var_4"),
            (assign, reg5, ":var_3"),
            (assign, reg6, ":var_5"),
            (str_store_string, s2, "str_reg4_killed_reg5_wounded_reg6_routed"),
        (else_try),
            (gt, ":var_4", 0),
            (gt, ":var_5", 0),
            (assign, reg4, ":var_4"),
            (assign, reg5, ":var_5"),
            (str_store_string, s2, "str_reg4_killed_reg5_routed"),
        (else_try),
            (gt, ":var_4", 0),
            (gt, ":var_3", 0),
            (assign, reg4, ":var_4"),
            (assign, reg5, ":var_3"),
            (str_store_string, s2, "str_reg4_killed_reg5_wounded"),
        (else_try),
            (gt, ":var_3", 0),
            (gt, ":var_5", 0),
            (assign, reg4, ":var_3"),
            (assign, reg5, ":var_5"),
            (str_store_string, s2, "str_reg4_wounded_reg5_routed"),
        (else_try),
            (gt, ":var_4", 0),
            (str_store_string, s2, "@killed"),
        (else_try),
            (gt, ":var_3", 0),
            (str_store_string, s2, "@wounded"),
        (else_try),
            (str_store_string, s2, "str_routed"),
        (else_try),
        (try_end),
        (str_store_string, s0, "@{s0}^TOTAL: {reg3} ({s2})"),
    (else_try),
        (try_begin),
            (eq, ":var_1", 1),
            (str_store_string, s0, "@None"),
        (else_try),
            (str_store_string, s0, "@^None"),
        (try_end),
    (try_end),

]),

("write_fit_party_members_to_stack_selection",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (party_get_num_companion_stacks, ":var_2", ":var_0"),
    (assign, ":var_3", 2),
    (assign, ":var_4", 0),
    (try_for_range, ":var_5", 0, ":var_2"),
        (party_stack_get_troop_id, ":var_6", ":var_0", ":var_5"),
        (assign, ":var_7", 0),
        (try_begin),
            (troop_is_hero, ":var_6"),
            (try_begin),
                (neg|troop_is_wounded, ":var_6"),
                (this_or_next|eq, ":var_1", 0),
                (neg|eq, ":var_5", 0),
                (assign, ":var_7", 1),
            (try_end),
        (else_try),
            (party_stack_get_size, ":var_7", ":var_0", ":var_5"),
            (party_stack_get_num_wounded, ":var_8", ":var_0", ":var_5"),
            (val_sub, ":var_7", ":var_8"),
        (try_end),
        (try_begin),
            (gt, ":var_7", 0),
            (troop_set_slot, "trp_stack_selection_amounts", ":var_3", ":var_7"),
            (troop_set_slot, "trp_stack_selection_ids", ":var_3", ":var_6"),
            (val_add, ":var_3", 1),
        (try_end),
        (val_add, ":var_4", ":var_7"),
    (try_end),
    (val_sub, ":var_3", 2),
    (troop_set_slot, "trp_stack_selection_amounts", slot_troop_relations_begin, ":var_3"),
    (troop_set_slot, "trp_stack_selection_amounts", 1, ":var_4"),

]),

("remove_fit_party_member_from_stack_selection",
[
    (store_script_param, ":var_0", 1),
    (val_add, ":var_0", 2),
    (troop_get_slot, ":var_1", "trp_stack_selection_amounts", ":var_0"),
    (troop_get_slot, ":var_2", "trp_stack_selection_ids", ":var_0"),
    (val_sub, ":var_1", 1),
    (troop_set_slot, "trp_stack_selection_amounts", ":var_0", ":var_1"),
    (troop_get_slot, ":var_3", "trp_stack_selection_amounts", 1),
    (val_sub, ":var_3", 1),
    (troop_set_slot, "trp_stack_selection_amounts", 1, ":var_3"),
    (try_begin),
        (neg|gt, ":var_1", 0),
        (troop_get_slot, ":var_4", "trp_stack_selection_amounts", slot_troop_relations_begin),
        (store_add, ":var_5", ":var_4", 2),
        (store_add, ":var_6", ":var_0", 1),
        (try_for_range, ":var_7", ":var_6", ":var_5"),
            (store_sub, ":var_8", ":var_7", 1),
            (troop_get_slot, ":var_9", "trp_stack_selection_amounts", ":var_7"),
            (troop_set_slot, "trp_stack_selection_amounts", ":var_8", ":var_9"),
            (troop_get_slot, ":var_9", "trp_stack_selection_ids", ":var_7"),
            (troop_set_slot, "trp_stack_selection_ids", ":var_8", ":var_9"),
        (try_end),
        (val_sub, ":var_4", 1),
        (troop_set_slot, "trp_stack_selection_amounts", slot_troop_relations_begin, ":var_4"),
    (try_end),
    (assign, reg0, ":var_2"),

]),

("remove_random_fit_party_member_from_stack_selection",
[
    (troop_get_slot, ":var_0", "trp_stack_selection_amounts", 1),
    (store_random_in_range, ":var_1", 0, ":var_0"),
    (troop_get_slot, ":var_2", "trp_stack_selection_amounts", slot_troop_relations_begin),
    (store_add, ":var_3", ":var_2", 2),
    (try_for_range, ":var_4", 2, ":var_3"),
        (troop_get_slot, ":var_5", "trp_stack_selection_amounts", ":var_4"),
        (val_sub, ":var_1", ":var_5"),
        (neg|ge, ":var_1", 0),
        (assign, ":var_3", 0),
        (store_sub, ":var_6", ":var_4", 2),
    (try_end),
    (call_script, "script_remove_fit_party_member_from_stack_selection", ":var_6"),

]),

("add_routed_party",
[
    (party_get_num_companion_stacks, ":var_0", "p_routed_enemies"),
    (assign, ":var_1", 0),
    (assign, ":var_2", 0),
    (try_for_range, ":var_3", 0, ":var_0"),
        (store_sub, ":var_4", ":var_0", ":var_3"),
        (ge, ":var_4", ":var_2"),
        (store_sub, ":var_5", ":var_3", ":var_2"),
        (party_stack_get_troop_id, ":var_6", "p_routed_enemies", ":var_5"),
        (try_begin),
            (troop_is_hero, ":var_6"),
            (party_stack_get_size, ":var_7", "p_routed_enemies", ":var_5"),
            (party_remove_members, "p_routed_enemies", ":var_6", 1),
            (try_begin),
                (neg|gt, ":var_7", 1),
                (val_add, ":var_2", 1),
            (try_end),
        (else_try),
            (val_add, ":var_1", 1),
        (try_end),
    (try_end),
    (try_begin),
        (ge, ":var_1", 1),
        (set_spawn_radius, 2),
        (spawn_around_party, "p_main_party", "pt_routed_warriors"),
        (assign, ":var_8", reg0),
        (party_set_slot, ":var_8", slot_party_commander_party, -1),
        (assign, ":var_9", 0),
        (assign, ":var_10", "fac_neutral"),
        (try_for_range, ":var_11", 30, 72),
            (faction_get_slot, ":var_12", ":var_11", slot_faction_num_routed_agents),
            (gt, ":var_12", ":var_9"),
            (assign, ":var_9", ":var_12"),
            (assign, ":var_10", ":var_11"),
        (try_end),
        (party_set_faction, ":var_8", ":var_10"),
        (party_set_ai_behavior, ":var_8", 1),
        (assign, ":var_13", 1000000),
        (try_for_parties, ":var_14"),
            (party_is_active, ":var_14"),
            (party_get_slot, ":var_15", ":var_14", slot_party_type),
            (this_or_next|eq, ":var_15", 3),
            (eq, ":var_15", 2),
            (store_faction_of_party, ":var_11", ":var_14"),
            (this_or_next|eq, ":var_10", "fac_neutral"),
            (eq, ":var_11", ":var_10"),
            (party_get_position, pos1, ":var_14"),
            (store_distance_to_party_from_party, ":var_16", ":var_14", "p_main_party"),
            (try_begin),
                (neg|ge, ":var_16", ":var_13"),
                (assign, ":var_13", ":var_16"),
                (assign, ":var_17", ":var_14"),
            (try_end),
        (try_end),
        (party_get_position, pos1, "p_main_party"),
        (party_get_position, pos2, ":var_17"),
        (assign, ":var_13", 1000000),
        (try_for_range, ":var_18", 0, 10),
            (map_get_random_position_around_position, 3, pos1, pos2),
            (get_distance_between_positions, ":var_16", pos2, pos3),
            (try_begin),
                (neg|ge, ":var_16", ":var_13"),
                (assign, ":var_13", ":var_16"),
                (copy_position, pos63, pos3),
            (try_end),
        (try_end),
        (party_set_position, ":var_8", pos63),
        (party_set_ai_object, ":var_8", ":var_17"),
        (party_set_flags, ":var_8", 65536, 1),
        (party_clear, ":var_8"),
        (party_get_num_companion_stacks, ":var_0", "p_routed_enemies"),
        (try_for_range, ":var_3", 0, ":var_0"),
            (party_stack_get_troop_id, ":var_6", "p_routed_enemies", ":var_3"),
            (try_begin),
                (neg|troop_is_hero, ":var_6"),
                (party_stack_get_size, ":var_7", "p_routed_enemies", ":var_3"),
                (party_add_members, ":var_8", ":var_6", ":var_7"),
            (try_end),
        (try_end),
    (try_end),

]),

("cf_training_ground_sub_routine_1_for_melee_details",
[
    (store_script_param, ":var_0", 1),
    (ge, "$temp_3", ":var_0"),
    (val_add, ":var_0", 1),
    (troop_get_slot, ":var_1", "trp_stack_selection_ids", ":var_0"),
    (str_store_troop_name, s0, ":var_1"),

]),

("training_ground_sub_routine_2_for_melee_details",
[
    (store_script_param, ":var_0", 1),
    (val_sub, ":var_0", 1),
    (try_begin),
        (neg|ge, ":var_0", 0),
        (call_script, "script_remove_random_fit_party_member_from_stack_selection"),
    (else_try),
        (call_script, "script_remove_fit_party_member_from_stack_selection", ":var_0"),
    (try_end),
    (assign, ":var_1", reg0),
    (store_sub, ":var_2", "$temp_2", 1),
    (troop_set_slot, "trp_temp_array_a", ":var_2", ":var_1"),
    (try_begin),
        (eq, "$temp", "$temp_2"),
        (call_script, "script_start_training_at_training_ground", -1, "$temp"),
    (else_try),
        (val_add, "$temp_2", 1),
        (jump_to_menu, "mnu_training_ground_selection_details_melee_2"),
    (try_end),

]),

("cf_training_ground_sub_routine_for_training_result",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (store_script_param, ":var_3", 4),
    (store_character_level, ":var_4", ":var_0"),
    (store_add, ":var_5", ":var_4", 5),
    (store_mul, ":var_6", ":var_5", 3),
    (val_min, ":var_6", 100),
    (store_sub, ":var_7", ":var_6", "$g_training_ground_training_hardness"),
    (val_max, ":var_7", 0),
    (store_sub, ":var_7", 100, ":var_7"),
    (val_mul, ":var_7", ":var_7"),
    (val_div, ":var_7", 10),
    (store_mul, ":var_8", ":var_3", ":var_7"),
    (val_div, ":var_8", 1000),
    (try_begin),
        (eq, ":var_0", "trp_player"),
        (val_mul, ":var_8", 1),
    (else_try),
        (try_begin),
            (eq, "$g_mt_mode", 1),
            (try_begin),
                (this_or_next|troop_is_guarantee_ranged, ":var_0"),
                (troop_is_guarantee_horse, ":var_0"),
                (val_div, ":var_8", 4),
            (try_end),
        (else_try),
            (eq, "$g_mt_mode", 3),
            (try_begin),
                (neg|troop_is_guarantee_horse, ":var_0"),
                (assign, ":var_8", 0),
            (try_end),
        (else_try),
            (neg|troop_is_guarantee_ranged, ":var_0"),
            (assign, ":var_8", 0),
        (try_end),
    (try_end),
    (val_add, ":var_4", 1),
    (store_mul, ":var_9", 100, ":var_4"),
    (val_mul, ":var_9", ":var_2"),
    (val_div, ":var_9", 20),
    (val_mul, ":var_9", ":var_8"),
    (val_div, ":var_9", 1000),
    (store_mul, ":var_10", ":var_9", 3),
    (val_div, ":var_10", 2),
    (store_div, ":var_11", ":var_9", 2),
    (store_random_in_range, ":var_12", ":var_11", ":var_10"),
    (gt, ":var_12", 0),
    (try_begin),
        (troop_is_hero, ":var_0"),
        (add_xp_to_troop, ":var_12", ":var_0"),
        (store_div, ":var_13", ":var_12", 50),
        (try_begin),
            (gt, ":var_13", 0),
            (troop_raise_proficiency, ":var_0", "$g_training_ground_used_weapon_proficiency", ":var_13"),
        (try_end),
    (else_try),
        (party_add_xp_to_stack, "p_main_party", ":var_1", ":var_12"),
    (try_end),
    (assign, reg0, ":var_12"),

]),

("print_troop_owned_centers_in_numbers_to_s0",
[
    (store_script_param_1, ":var_0"),
    (str_store_string, s0, "@nothing"),
    (assign, ":var_1", 0),
    (assign, ":var_2", 0),
    (assign, ":var_3", 0),
    (try_for_range_backwards, ":var_4", "p_town_1_1", "p_salt_mine"),
        (party_slot_eq, ":var_4", slot_town_lord, ":var_0"),
        (try_begin),
            (party_slot_eq, ":var_4", slot_party_type, 3),
            (val_add, ":var_1", 1),
        (else_try),
            (party_slot_eq, ":var_4", slot_party_type, 2),
            (val_add, ":var_2", 1),
        (else_try),
            (val_add, ":var_3", 1),
        (try_end),
    (try_end),
    (assign, ":var_5", 0),
    (try_begin),
        (gt, ":var_3", 0),
        (assign, reg0, ":var_3"),
        (store_sub, reg1, reg0, 1),
        (str_store_string, s0, "@{reg0} village{reg1?s:}"),
        (val_add, ":var_5", 1),
    (try_end),
    (try_begin),
        (gt, ":var_2", 0),
        (assign, reg0, ":var_2"),
        (store_sub, reg1, reg0, 1),
        (try_begin),
            (eq, ":var_5", 0),
            (str_store_string, s0, "@{reg0} castle{reg1?s:}"),
        (else_try),
            (str_store_string, s0, "@{reg0} castle{reg1?s:} and {s0}"),
        (try_end),
        (val_add, ":var_5", 1),
    (try_end),
    (try_begin),
        (gt, ":var_1", 0),
        (assign, reg0, ":var_1"),
        (store_sub, reg1, reg0, 1),
        (try_begin),
            (eq, ":var_5", 0),
            (str_store_string, s0, "@{reg0} town{reg1?s:}"),
        (else_try),
            (eq, ":var_5", 1),
            (str_store_string, s0, "@{reg0} town{reg1?s:} and {s0}"),
        (else_try),
            (str_store_string, s0, "@{reg0} town{reg1?s:}, {s0}"),
        (try_end),
    (try_end),
    (store_add, reg0, ":var_3", ":var_2"),
    (val_add, reg0, ":var_1"),

]),

("get_random_melee_training_weapon",
[
    (assign, ":var_0", -1),
    (assign, ":var_1", -1),
    (store_random_in_range, ":var_2", 0, 3),
    (try_begin),
        (eq, ":var_2", 0),
        (assign, ":var_0", "itm_practice_staff"),
    (else_try),
        (eq, ":var_2", 1),
        (assign, ":var_0", "itm_practice_sword"),
        (assign, ":var_1", "itm_practice_shield"),
    (else_try),
        (assign, ":var_0", "itm_heavy_practice_sword"),
    (try_end),
    (assign, reg0, ":var_0"),
    (assign, reg1, ":var_1"),

]),

("start_training_at_training_ground",
[
    (val_add, "$g_training_ground_training_count", 1),
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (set_jump_mission, "mt_training_ground_training"),
    (assign, ":var_2", -1),
    (assign, ":var_3", -1),
    (assign, ":var_4", -1),
    (assign, "$scene_num_total_gourds_destroyed", 0),
    (try_begin),
        (eq, ":var_0", 8),
        (assign, "$g_training_ground_used_weapon_proficiency", 3),
        (assign, ":var_2", "itm_practice_bow"),
        (try_begin),
            (eq, "$g_mt_mode", 3),
            (assign, ":var_3", "itm_practice_arrows_100_amount"),
        (else_try),
            (assign, ":var_3", "itm_practice_arrows_10_amount"),
        (try_end),
    (else_try),
        (eq, ":var_0", 9),
        (assign, "$g_training_ground_used_weapon_proficiency", 4),
        (assign, ":var_2", "itm_practice_crossbow"),
        (assign, ":var_3", "itm_practice_bolts_9_amount"),
    (else_try),
        (eq, ":var_0", 10),
        (assign, "$g_training_ground_used_weapon_proficiency", 5),
        (try_begin),
            (eq, "$g_mt_mode", 3),
            (assign, ":var_3", "itm_practice_throwing_daggers_100_amount"),
        (else_try),
            (assign, ":var_3", "itm_practice_throwing_daggers"),
        (try_end),
    (else_try),
        (eq, ":var_0", 2),
        (assign, "$g_training_ground_used_weapon_proficiency", 0),
        (assign, ":var_2", "itm_practice_sword"),
    (else_try),
        (eq, ":var_0", 4),
        (assign, "$g_training_ground_used_weapon_proficiency", 2),
        (assign, ":var_2", "itm_practice_lance"),
    (else_try),
        (assign, "$g_training_ground_used_weapon_proficiency", 0),
        (call_script, "script_get_random_melee_training_weapon"),
        (assign, ":var_2", reg0),
        (assign, ":var_3", reg1),
    (try_end),
    (try_begin),
        (eq, "$g_mt_mode", 3),
        (assign, ":var_4", "itm_practice_horse"),
        (store_add, "$g_training_ground_training_scene", "scn_training_ground_horse_track_1", "$g_encountered_party"),
        (val_sub, "$g_training_ground_training_scene", "p_training_ground"),
    (else_try),
        (store_add, "$g_training_ground_training_scene", "scn_training_ground_ranged_melee_1", "$g_encountered_party"),
        (val_sub, "$g_training_ground_training_scene", "p_training_ground"),
    (try_end),
    (modify_visitors_at_site, "$g_training_ground_training_scene"),
    (reset_visitors),
    (set_visitor, 0, "trp_player"),
    (assign, ":var_5", -1),
    (try_for_range, ":var_6", 0, 4),
        (troop_get_inventory_slot, ":var_7", "trp_player", ":var_6"),
        (ge, ":var_7", 0),
        (item_get_type, ":var_8", ":var_7"),
        (try_begin),
            (eq, ":var_8", ":var_0"),
            (eq, ":var_5", -1),
            (assign, ":var_5", ":var_7"),
        (try_end),
    (try_end),
    (mission_tpl_entry_clear_override_items, "mt_training_ground_training", 0),
    (mission_tpl_entry_add_override_item, "mt_training_ground_training", 0, "itm_practice_boots"),
    (try_begin),
        (ge, ":var_2", 0),
        (try_begin),
            (ge, ":var_5", 0),
            (mission_tpl_entry_add_override_item, "mt_training_ground_training", 0, ":var_5"),
        (else_try),
            (mission_tpl_entry_add_override_item, "mt_training_ground_training", 0, ":var_2"),
        (try_end),
    (try_end),
    (try_begin),
        (ge, ":var_3", 0),
        (mission_tpl_entry_add_override_item, "mt_training_ground_training", 0, ":var_3"),
    (try_end),
    (try_begin),
        (ge, ":var_4", 0),
        (mission_tpl_entry_add_override_item, "mt_training_ground_training", 0, ":var_4"),
    (try_end),
    (assign, ":var_9", 5),
    (troop_get_slot, ":var_10", "trp_stack_selection_amounts", 1),
    (store_add, ":var_11", 5, ":var_10"),
    (val_min, ":var_11", 13),
    (try_for_range, ":var_9", 5, ":var_11"),
        (call_script, "script_remove_random_fit_party_member_from_stack_selection"),
        (set_visitor, ":var_9", reg0),
        (val_add, ":var_9", 1),
    (try_end),
    (try_begin),
        (eq, "$g_mt_mode", 1),
        (assign, ":var_12", 0),
        (try_for_range, ":var_13", 0, ":var_1"),
            (troop_get_slot, ":var_14", "trp_temp_array_a", ":var_13"),
            (store_add, ":var_15", ":var_13", 1),
            (set_visitor, ":var_15", ":var_14"),
            (try_begin),
                (ge, reg1, 0),
            (try_end),
            (store_character_level, ":var_16", ":var_14"),
            (val_add, ":var_16", 10),
            (val_mul, ":var_16", ":var_16"),
            (val_add, ":var_12", ":var_16"),
        (try_end),
        (assign, "$g_training_ground_training_num_enemies", ":var_1"),
        (assign, "$g_training_ground_training_hardness", ":var_12"),
        (store_add, ":var_17", "$g_training_ground_training_num_enemies", 4),
        (val_mul, "$g_training_ground_training_hardness", ":var_17"),
        (val_div, "$g_training_ground_training_hardness", 2400),
        (str_store_string, s0, "@Your opponents are ready for the fight."),
    (else_try),
        (eq, "$g_mt_mode", 3),
        (try_begin),
            (eq, ":var_0", 8),
            (assign, "$g_training_ground_training_hardness", 350),
            (assign, "$g_training_ground_training_num_gourds_to_destroy", 30),
        (else_try),
            (eq, ":var_0", 10),
            (assign, "$g_training_ground_training_hardness", 400),
            (assign, "$g_training_ground_training_num_gourds_to_destroy", 30),
        (else_try),
            (eq, ":var_0", 2),
            (assign, "$g_training_ground_training_hardness", 200),
            (assign, "$g_training_ground_training_num_gourds_to_destroy", 45),
        (else_try),
            (eq, ":var_0", 4),
            (assign, "$g_training_ground_training_hardness", 280),
            (assign, "$g_training_ground_training_num_gourds_to_destroy", 35),
        (try_end),
        (str_store_string, s0, "@Try to destroy as many targets as you can. You have two and a half minutes to clear the track."),
    (else_try),
        (eq, "$g_mt_mode", 2),
        (store_mul, "$g_training_ground_ranged_distance", ":var_1", 100),
        (assign, ":var_18", ":var_1"),
        (val_mul, ":var_18", ":var_18"),
        (try_begin),
            (eq, ":var_0", 8),
            (val_mul, ":var_18", 3),
            (val_div, ":var_18", 2),
        (else_try),
            (eq, ":var_0", 10),
            (val_mul, ":var_18", 5),
            (val_div, ":var_18", 2),
            (val_mul, ":var_18", ":var_1"),
            (val_div, ":var_18", 2),
        (try_end),
        (store_mul, "$g_training_ground_training_hardness", 100, ":var_18"),
        (val_div, "$g_training_ground_training_hardness", 6000),
        (str_store_string, s0, "@Stay behind the line on the ground and shoot the targets. Try not to waste any shots."),
    (try_end),
    (jump_to_menu, "mnu_training_ground_description"),

]),

("party_count_fit_regulars",
[
    (store_script_param_1, ":var_0"),
    (party_get_num_companion_stacks, ":var_1", ":var_0"),
    (assign, reg0, 0),
    (try_for_range, ":var_2", 0, ":var_1"),
        (party_stack_get_troop_id, ":var_3", ":var_0", ":var_2"),
        (neg|troop_is_hero, ":var_3"),
        (party_stack_get_size, ":var_4", ":var_0", ":var_2"),
        (party_stack_get_num_wounded, ":var_5", ":var_0", ":var_2"),
        (val_sub, ":var_4", ":var_5"),
        (val_add, reg0, ":var_4"),
    (try_end),

]),

("party_count_fit_for_battle",
[
    (store_script_param_1, ":var_0"),
    (party_get_num_companion_stacks, ":var_1", ":var_0"),
    (assign, reg0, 0),
    (try_for_range, ":var_2", 0, ":var_1"),
        (party_stack_get_troop_id, ":var_3", ":var_0", ":var_2"),
        (assign, ":var_4", 0),
        (try_begin),
            (troop_is_hero, ":var_3"),
            (try_begin),
                (neg|troop_is_wounded, ":var_3"),
                (assign, ":var_4", 1),
            (try_end),
        (else_try),
            (party_stack_get_size, ":var_4", ":var_0", ":var_2"),
            (party_stack_get_num_wounded, ":var_5", ":var_0", ":var_2"),
            (val_sub, ":var_4", ":var_5"),
        (try_end),
        (val_add, reg0, ":var_4"),
    (try_end),

]),

("party_count_members_with_full_health",
[
    (store_script_param_1, ":var_0"),
    (party_get_num_companion_stacks, ":var_1", ":var_0"),
    (assign, reg0, 0),
    (try_for_range, ":var_2", 0, ":var_1"),
        (party_stack_get_troop_id, ":var_3", ":var_0", ":var_2"),
        (assign, ":var_4", 0),
        (try_begin),
            (troop_is_hero, ":var_3"),
            (neg|eq, ":var_3", "trp_player"),
            (store_troop_health, ":var_5", ":var_3"),
            (try_begin),
                (ge, ":var_5", 80),
                (assign, ":var_4", 1),
            (try_end),
        (else_try),
            (party_stack_get_size, ":var_4", ":var_0", ":var_2"),
            (party_stack_get_num_wounded, ":var_6", ":var_0", ":var_2"),
            (val_sub, ":var_4", ":var_6"),
            (val_max, ":var_4", 0),
        (try_end),
        (val_add, reg0, ":var_4"),
    (try_end),

]),

("get_stack_with_rank",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (party_get_num_companion_stacks, ":var_2", ":var_0"),
    (assign, reg0, -1),
    (assign, ":var_3", 0),
    (try_for_range, ":var_4", 0, ":var_2"),
        (eq, reg0, -1),
        (party_stack_get_troop_id, ":var_5", ":var_0", ":var_4"),
        (neg|troop_is_hero, ":var_5"),
        (party_stack_get_size, ":var_6", ":var_0", ":var_4"),
        (party_stack_get_num_wounded, ":var_7", ":var_0", ":var_4"),
        (val_sub, ":var_6", ":var_7"),
        (val_add, ":var_3", ":var_6"),
        (try_begin),
            (neg|ge, ":var_1", ":var_3"),
            (assign, reg0, ":var_4"),
        (try_end),
    (try_end),

]),

("inflict_casualties_to_party",
[
    (party_clear, "p_temp_casualties"),
    (store_script_param_1, ":var_0"),
    (call_script, "script_party_count_fit_regulars", ":var_0"),
    (assign, ":var_1", reg0),
    (store_script_param_2, ":var_2"),
    (try_for_range, ":var_3", 0, ":var_2"),
        (gt, ":var_1", 0),
        (store_random_in_range, ":var_4", 0, ":var_1"),
        (assign, reg1, ":var_4"),
        (call_script, "script_get_stack_with_rank", ":var_0", ":var_4"),
        (assign, ":var_5", reg0),
        (party_stack_get_troop_id, ":var_6", ":var_0", ":var_5"),
        (store_character_level, ":var_7", ":var_6"),
        (val_add, ":var_7", 5),
        (assign, ":var_8", 10000),
        (val_div, ":var_8", ":var_7"),
        (try_begin),
            (store_random_in_range, ":var_9", 0, 10000),
            (neg|ge, ":var_9", ":var_8"),
            (store_random_in_range, ":var_10", 0, 2),
            (try_begin),
                (troop_is_hero, ":var_6"),
                (store_troop_health, ":var_11", ":var_6"),
                (val_sub, ":var_11", 45),
                (val_max, ":var_11", 1),
                (troop_set_health, ":var_6", ":var_11"),
            (else_try),
                (neg|ge, ":var_10", 1),
                (party_add_members, "p_temp_casualties", ":var_6", 1),
                (party_wound_members, "p_temp_casualties", ":var_6", 1),
                (party_wound_members, ":var_0", ":var_6", 1),
            (else_try),
                (party_add_members, "p_temp_casualties", ":var_6", 1),
                (party_remove_members, ":var_0", ":var_6", 1),
            (try_end),
            (val_sub, ":var_1", 1),
        (try_end),
    (try_end),

]),

("move_members_with_ratio",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (party_get_num_prisoner_stacks, ":var_2", ":var_0"),
    (try_for_range_backwards, ":var_3", 0, ":var_2"),
        (party_prisoner_stack_get_troop_id, ":var_4", ":var_0", ":var_3"),
        (party_prisoner_stack_get_size, ":var_5", ":var_0", ":var_3"),
        (store_mul, ":var_6", ":var_5", "$pin_number"),
        (val_div, ":var_6", 1000),
        (party_remove_prisoners, ":var_0", ":var_4", ":var_6"),
        (assign, ":var_7", reg0),
        (party_add_prisoners, ":var_1", ":var_4", ":var_7"),
    (try_end),
    (party_get_num_companion_stacks, ":var_2", ":var_0"),
    (try_for_range_backwards, ":var_3", 0, ":var_2"),
        (party_stack_get_troop_id, ":var_4", ":var_0", ":var_3"),
        (party_stack_get_size, ":var_5", ":var_0", ":var_3"),
        (store_mul, ":var_6", ":var_5", "$pin_number"),
        (val_div, ":var_6", 1000),
        (party_remove_members, ":var_0", ":var_4", ":var_6"),
        (assign, ":var_7", reg0),
        (party_add_members, ":var_1", ":var_4", ":var_7"),
    (try_end),

]),

("count_parties_of_faction_and_party_type",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (assign, reg0, 0),
    (try_for_parties, ":var_2"),
        (party_is_active, ":var_2"),
        (party_get_slot, ":var_3", ":var_2", slot_party_type),
        (store_faction_of_party, ":var_4", ":var_2"),
        (eq, ":var_3", ":var_1"),
        (eq, ":var_4", ":var_0"),
        (val_add, reg0, 1),
    (try_end),

]),

("faction_get_number_of_armies",
[
    (store_script_param_1, ":var_0"),
    (assign, ":var_1", 0),
    (try_for_range, ":var_2", "trp_npc1", "trp_knight_1_1_wife"),
        (troop_slot_eq, ":var_2", slot_troop_occupation, 2),
        (store_troop_faction, ":var_3", ":var_2"),
        (eq, ":var_3", ":var_0"),
        (troop_get_slot, ":var_4", ":var_2", slot_troop_leaded_party),
        (ge, ":var_4", 0),
        (party_is_active, ":var_4"),
        (call_script, "script_party_count_fit_regulars", ":var_4"),
        (assign, ":var_5", reg0),
        (call_script, "script_party_get_ideal_size", ":var_4"),
        (assign, ":var_6", reg0),
        (val_mul, ":var_6", 60),
        (val_div, ":var_6", 100),
        (gt, ":var_5", ":var_6"),
        (val_add, ":var_1", 1),
    (try_end),
    (assign, reg0, ":var_1"),

]),

("faction_recalculate_strength",
[
    (store_script_param_1, ":var_0"),
    (call_script, "script_faction_get_number_of_armies", ":var_0"),
    (assign, ":var_1", reg0),
    (assign, ":var_2", 0),
    (assign, ":var_3", 0),
    (try_for_range, ":var_4", "p_town_1_1", "p_salt_mine"),
        (store_faction_of_party, ":var_5", ":var_4"),
        (eq, ":var_5", ":var_0"),
        (try_begin),
            (party_slot_eq, ":var_4", slot_party_type, 2),
            (val_add, ":var_2", 1),
        (else_try),
            (party_slot_eq, ":var_4", slot_party_type, 3),
            (val_add, ":var_3", 1),
        (try_end),
    (try_end),
    (faction_set_slot, ":var_0", slot_faction_num_armies, ":var_1"),
    (faction_set_slot, ":var_0", slot_faction_num_castles, ":var_2"),
    (faction_set_slot, ":var_0", slot_faction_num_towns, ":var_3"),

]),

("cf_select_random_town_with_faction",
[
    (store_script_param_1, ":var_0"),
    (assign, ":var_1", -1),
    (assign, ":var_2", 0),
    (try_for_range, ":var_3", "p_town_1_1", "p_castle_1_1"),
        (store_faction_of_party, ":var_4", ":var_3"),
        (eq, ":var_4", ":var_0"),
        (val_add, ":var_2", 1),
    (try_end),
    (gt, ":var_2", 0),
    (store_random_in_range, ":var_5", 0, ":var_2"),
    (assign, ":var_2", 0),
    (try_for_range, ":var_3", "p_town_1_1", "p_castle_1_1"),
        (eq, ":var_1", -1),
        (store_faction_of_party, ":var_4", ":var_3"),
        (eq, ":var_4", ":var_0"),
        (val_add, ":var_2", 1),
        (gt, ":var_2", ":var_5"),
        (assign, ":var_1", ":var_3"),
    (try_end),
    (assign, reg0, ":var_1"),

]),

("cf_select_random_village_with_faction",
[
    (store_script_param_1, ":var_0"),
    (assign, ":var_1", -1),
    (assign, ":var_2", 0),
    (try_for_range, ":var_3", "p_village_1_1", "p_salt_mine"),
        (store_faction_of_party, ":var_4", ":var_3"),
        (eq, ":var_4", ":var_0"),
        (val_add, ":var_2", 1),
    (try_end),
    (gt, ":var_2", 0),
    (store_random_in_range, ":var_5", 0, ":var_2"),
    (assign, ":var_2", 0),
    (try_for_range, ":var_3", "p_village_1_1", "p_salt_mine"),
        (eq, ":var_1", -1),
        (store_faction_of_party, ":var_4", ":var_3"),
        (eq, ":var_4", ":var_0"),
        (val_add, ":var_2", 1),
        (gt, ":var_2", ":var_5"),
        (assign, ":var_1", ":var_3"),
    (try_end),
    (assign, reg0, ":var_1"),

]),

("cf_select_random_walled_center_with_faction",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (assign, ":var_2", -1),
    (assign, ":var_3", 0),
    (try_for_range, ":var_4", "p_town_1_1", "p_village_1_1"),
        (store_faction_of_party, ":var_5", ":var_4"),
        (eq, ":var_5", ":var_0"),
        (val_add, ":var_3", 1),
        (eq, ":var_4", ":var_1"),
        (val_add, ":var_3", 99),
    (try_end),
    (gt, ":var_3", 0),
    (store_random_in_range, ":var_6", 0, ":var_3"),
    (try_for_range, ":var_4", "p_town_1_1", "p_village_1_1"),
        (eq, ":var_2", -1),
        (store_faction_of_party, ":var_5", ":var_4"),
        (eq, ":var_5", ":var_0"),
        (val_sub, ":var_6", 1),
        (try_begin),
            (eq, ":var_4", ":var_1"),
            (val_sub, ":var_6", 99),
        (try_end),
        (neg|ge, ":var_6", 0),
        (assign, ":var_2", ":var_4"),
    (try_end),
    (assign, reg0, ":var_2"),

]),

("cf_select_random_walled_center_with_faction_and_owner_priority_no_siege",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (assign, ":var_2", -1),
    (assign, ":var_3", 0),
    (call_script, "script_lord_get_home_center", ":var_1"),
    (assign, ":var_4", reg0),
    (try_for_range, ":var_5", "p_town_1_1", "p_village_1_1"),
        (store_faction_of_party, ":var_6", ":var_5"),
        (eq, ":var_6", ":var_0"),
        (party_slot_eq, ":var_5", slot_center_is_besieged_by, -1),
        (val_add, ":var_3", 1),
        (eq, ":var_4", ":var_5"),
        (val_add, ":var_3", 1000),
    (try_end),
    (try_begin),
        (neg|gt, ":var_3", 0),
        (assign, "$g_there_is_no_avaliable_centers", 1),
        (try_for_range, ":var_5", "p_town_1_1", "p_village_1_1"),
            (party_slot_eq, ":var_5", slot_center_is_besieged_by, -1),
            (val_add, ":var_3", 1),
        (try_end),
    (else_try),
        (assign, "$g_there_is_no_avaliable_centers", 0),
    (try_end),
    (faction_get_slot, ":var_7", ":var_0", slot_faction_leader),
    (this_or_next|eq, "$g_there_is_no_avaliable_centers", 0),
    (neg|eq, ":var_1", ":var_7"),
    (store_random_in_range, ":var_8", 0, ":var_3"),
    (try_for_range, ":var_5", "p_town_1_1", "p_village_1_1"),
        (eq, ":var_2", -1),
        (store_faction_of_party, ":var_6", ":var_5"),
        (this_or_next|eq, "$g_there_is_no_avaliable_centers", 1),
        (eq, ":var_6", ":var_0"),
        (party_slot_eq, ":var_5", slot_center_is_besieged_by, -1),
        (val_sub, ":var_8", 1),
        (try_begin),
            (eq, ":var_4", ":var_5"),
            (eq, "$g_there_is_no_avaliable_centers", 0),
            (val_sub, ":var_8", 1000),
        (try_end),
        (neg|ge, ":var_8", 0),
        (assign, ":var_2", ":var_5"),
    (try_end),
    (assign, reg0, ":var_2"),

]),

("cf_select_random_walled_center_with_faction_and_less_strength_priority",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (assign, ":var_2", -1),
    (assign, ":var_3", 0),
    (try_for_range, ":var_4", "p_town_1_1", "p_village_1_1"),
        (store_faction_of_party, ":var_5", ":var_4"),
        (eq, ":var_5", ":var_0"),
        (party_slot_eq, ":var_4", slot_center_is_besieged_by, -1),
        (val_add, ":var_3", 1),
        (try_begin),
            (eq, ":var_4", ":var_1"),
            (val_add, ":var_3", 99),
        (try_end),
    (try_end),
    (gt, ":var_3", 0),
    (store_random_in_range, ":var_6", 0, ":var_3"),
    (try_for_range, ":var_4", "p_town_1_1", "p_village_1_1"),
        (eq, ":var_2", -1),
        (store_faction_of_party, ":var_5", ":var_4"),
        (eq, ":var_5", ":var_0"),
        (party_slot_eq, ":var_4", slot_center_is_besieged_by, -1),
        (val_sub, ":var_6", 1),
        (try_begin),
            (eq, ":var_4", ":var_1"),
            (val_sub, ":var_6", 99),
        (try_end),
        (neg|ge, ":var_6", 0),
        (assign, ":var_2", ":var_4"),
    (try_end),
    (assign, reg0, ":var_2"),

]),

("cf_select_random_town_at_peace_with_faction",
[
    (store_script_param_1, ":var_0"),
    (assign, ":var_1", -1),
    (assign, ":var_2", 0),
    (try_for_range, ":var_3", "p_town_1_1", "p_castle_1_1"),
        (store_faction_of_party, ":var_4", ":var_3"),
        (store_relation, ":var_5", ":var_4", ":var_0"),
        (ge, ":var_5", 0),
        (val_add, ":var_2", 1),
    (try_end),
    (gt, ":var_2", 0),
    (store_random_in_range, ":var_6", 0, ":var_2"),
    (assign, ":var_2", 0),
    (try_for_range, ":var_3", "p_town_1_1", "p_castle_1_1"),
        (eq, ":var_1", -1),
        (store_faction_of_party, ":var_4", ":var_3"),
        (store_relation, ":var_5", ":var_4", ":var_0"),
        (ge, ":var_5", 0),
        (val_add, ":var_2", 1),
        (gt, ":var_2", ":var_6"),
        (assign, ":var_1", ":var_3"),
    (try_end),
    (assign, reg0, ":var_1"),

]),

("cf_select_random_town_at_peace_with_faction_in_trade_route",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (assign, ":var_2", -1),
    (assign, ":var_3", 0),
    (try_for_range, ":var_4", 190, 205),
        (party_get_slot, ":var_5", ":var_0", ":var_4"),
        (gt, ":var_5", 0),
        (store_faction_of_party, ":var_6", ":var_5"),
        (store_relation, ":var_7", ":var_6", ":var_1"),
        (ge, ":var_7", 0),
        (val_add, ":var_3", 1),
    (try_end),
    (gt, ":var_3", 0),
    (store_random_in_range, ":var_8", 0, ":var_3"),
    (try_for_range, ":var_4", 190, 205),
        (eq, ":var_2", -1),
        (party_get_slot, ":var_5", ":var_0", ":var_4"),
        (gt, ":var_5", 0),
        (store_faction_of_party, ":var_6", ":var_5"),
        (store_relation, ":var_7", ":var_6", ":var_1"),
        (ge, ":var_7", 0),
        (val_sub, ":var_8", 1),
        (neg|ge, ":var_8", 0),
        (assign, ":var_2", ":var_5"),
    (try_end),
    (assign, reg0, ":var_2"),

]),

("cf_select_most_profitable_town_at_peace_with_faction_in_trade_route",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (assign, ":var_2", -1),
    (assign, ":var_3", 0),
    (store_sub, ":var_4", 250, "itm_spice"),
    (try_for_range, ":var_5", 190, 205),
        (party_get_slot, ":var_6", ":var_0", ":var_5"),
        (gt, ":var_6", 0),
        (store_faction_of_party, ":var_7", ":var_6"),
        (store_relation, ":var_8", ":var_7", ":var_1"),
        (ge, ":var_8", 0),
        (assign, ":var_9", 0),
        (try_for_range, ":var_10", "itm_spice", "itm_siege_supply"),
            (neg|eq, ":var_10", "itm_butter"),
            (neg|eq, ":var_10", "itm_cattle_meat"),
            (neg|eq, ":var_10", "itm_chicken"),
            (neg|eq, ":var_10", "itm_pork"),
            (store_add, ":var_11", ":var_10", ":var_4"),
            (party_get_slot, ":var_12", ":var_0", ":var_11"),
            (party_get_slot, ":var_13", ":var_6", ":var_11"),
            (gt, ":var_13", ":var_12"),
            (store_sub, ":var_14", ":var_13", ":var_12"),
            (try_begin),
                (this_or_next|eq, ":var_10", "itm_spice"),
                (eq, ":var_10", "itm_velvet"),
                (val_mul, ":var_14", 2),
            (try_end),
            (val_add, ":var_9", ":var_14"),
        (try_end),
        (gt, ":var_9", ":var_3"),
        (assign, ":var_3", ":var_9"),
        (assign, ":var_2", ":var_6"),
    (try_end),
    (gt, ":var_2", -1),
    (assign, reg0, ":var_2"),

]),

("shuffle_troop_slots",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (try_for_range, ":var_3", ":var_1", ":var_2"),
        (store_random_in_range, ":var_4", ":var_1", ":var_2"),
        (troop_get_slot, ":var_5", ":var_0", ":var_3"),
        (troop_get_slot, ":var_6", ":var_0", ":var_4"),
        (troop_set_slot, ":var_0", ":var_3", ":var_6"),
        (troop_set_slot, ":var_0", ":var_4", ":var_5"),
    (try_end),

]),

("get_quest",
[
    (store_script_param_1, ":var_0"),
    (store_character_level, ":var_1", "trp_player"),
    (store_troop_faction, ":var_2", ":var_0"),
    (troop_get_slot, ":var_3", ":var_0", slot_troop_leaded_party),
    (troop_get_slot, ":var_4", ":var_0", slot_lord_reputation_type),
    (assign, ":var_5", -1),
    (try_begin),
        (gt, ":var_3", 0),
        (party_get_attached_to, ":var_5", ":var_3"),
    (else_try),
        (is_between, "$g_encountered_party", "p_town_1_1", "p_salt_mine"),
        (assign, ":var_5", "$g_encountered_party"),
    (try_end),
    (try_begin),
        (troop_slot_eq, ":var_0", slot_troop_occupation, 2),
        (try_begin),
            (ge, "$g_talk_troop_faction_relation", 0),
            (assign, ":var_6", "qst_deliver_message"),
            (assign, ":var_7", "qst_follow_army"),
            (assign, ":var_8", "qst_destroy_bandit_lair"),
            (assign, ":var_9", "qst_blank_quest_2"),
        (else_try),
            (assign, ":var_6", "qst_lend_surgeon"),
            (assign, ":var_7", "qst_follow_army"),
            (assign, ":var_8", 0),
            (assign, ":var_9", 0),
        (try_end),
    (else_try),
        (is_between, ":var_0", "trp_village_1_elder", "trp_merchants_end"),
        (assign, ":var_6", "qst_deliver_grain"),
        (assign, ":var_7", "qst_eliminate_bandits_infesting_village"),
        (assign, ":var_8", "qst_blank_quest_6"),
        (assign, ":var_9", "qst_blank_quest_6"),
    (else_try),
        (is_between, ":var_0", "trp_town_1_mayor", "trp_village_1_elder"),
        (assign, ":var_6", "qst_move_cattle_herd"),
        (assign, ":var_7", "qst_deliver_grain"),
        (assign, ":var_8", "qst_blank_quest_11"),
        (assign, ":var_9", "qst_blank_quest_11"),
    (else_try),
        (assign, ":var_6", "qst_rescue_lord_by_replace"),
        (assign, ":var_7", "qst_move_cattle_herd"),
        (assign, ":var_8", "qst_blank_quest_16"),
        (assign, ":var_9", "qst_blank_quest_16"),
    (try_end),
    (assign, ":var_10", -1),
    (assign, ":var_11", -1),
    (assign, ":var_12", -1),
    (assign, ":var_13", -1),
    (assign, ":var_14", -1),
    (assign, ":var_15", -1),
    (assign, ":var_16", -1),
    (assign, ":var_17", -1),
    (assign, ":var_18", -1),
    (assign, ":var_19", -1),
    (assign, ":var_20", -1),
    (assign, ":var_21", -1),
    (assign, ":var_22", 1),
    (assign, ":var_23", 0),
    (assign, ":var_24", 0),
    (assign, ":var_25", 0),
    (assign, ":var_26", 0),
    (assign, ":var_27", 0),
    (try_begin),
        (call_script, "script_get_dynamic_quest", "$g_talk_troop"),
        (assign, ":var_10", reg0),
        (assign, ":var_28", reg1),
        (assign, ":var_29", reg2),
        (assign, ":var_30", reg3),
        (try_begin),
            (eq, ":var_10", "qst_track_down_bandits"),
            (assign, ":var_17", ":var_29"),
            (assign, ":var_26", 60),
            (assign, ":var_23", 1000),
            (assign, ":var_24", 1000),
        (else_try),
            (eq, ":var_10", "qst_retaliate_for_border_incident"),
            (assign, ":var_11", ":var_28"),
            (assign, ":var_13", ":var_30"),
            (assign, ":var_26", 30),
            (assign, ":var_23", 1000),
            (assign, ":var_24", 1000),
        (else_try),
            (eq, ":var_10", "qst_cause_provocation"),
            (assign, ":var_13", ":var_30"),
            (assign, ":var_26", 30),
            (assign, ":var_27", 100),
            (assign, ":var_23", 1000),
            (assign, ":var_24", 1000),
        (else_try),
            (eq, ":var_10", "qst_destroy_bandit_lair"),
            (assign, ":var_17", ":var_29"),
            (assign, ":var_26", 60),
            (assign, ":var_23", 3000),
            (assign, ":var_24", 1500),
        (else_try),
            (eq, ":var_10", "qst_rescue_prisoner"),
            (assign, ":var_11", ":var_28"),
            (assign, ":var_12", ":var_29"),
            (assign, ":var_26", 30),
            (assign, ":var_27", 5),
            (assign, ":var_23", 1500),
            (assign, ":var_24", 3000),
        (try_end),
    (try_end),
    (try_begin),
        (eq, ":var_10", -1),
        (try_for_range, ":var_31", 0, 20),
            (eq, ":var_10", -1),
            (assign, ":var_11", -1),
            (assign, ":var_12", -1),
            (assign, ":var_13", -1),
            (assign, ":var_14", -1),
            (assign, ":var_15", -1),
            (assign, ":var_16", -1),
            (assign, ":var_17", -1),
            (assign, ":var_18", -1),
            (assign, ":var_19", -1),
            (assign, ":var_20", -1),
            (assign, ":var_21", -1),
            (assign, ":var_22", 1),
            (assign, ":var_23", 0),
            (assign, ":var_24", 0),
            (assign, ":var_25", 0),
            (assign, ":var_26", 0),
            (assign, ":var_27", 0),
            (store_sub, ":var_32", ":var_7", ":var_6"),
            (store_sub, ":var_33", ":var_9", ":var_8"),
            (store_add, ":var_34", ":var_32", ":var_33"),
            (store_random_in_range, ":var_35", 0, ":var_34"),
            (try_begin),
                (neg|ge, ":var_35", ":var_32"),
                (store_random_in_range, ":var_35", ":var_6", ":var_7"),
            (else_try),
                (store_random_in_range, ":var_35", ":var_8", ":var_9"),
            (try_end),
            (neg|check_quest_active, ":var_35"),
            (neg|quest_slot_ge, ":var_35", 25, 1),
            (try_begin),
                (eq, ":var_35", "qst_deliver_grain"),
                (try_begin),
                    (is_between, ":var_5", "p_village_1_1", "p_salt_mine"),
                    (call_script, "script_get_troop_item_amount", ":var_0", "itm_grain"),
                    (eq, reg0, 0),
                    (neg|party_slot_ge, ":var_5", slot_town_prosperity, 40),
                    (assign, ":var_12", ":var_5"),
                    (store_random_in_range, ":var_19", 4, 8),
                    (assign, ":var_26", 30),
                    (assign, ":var_27", 20),
                    (assign, ":var_10", ":var_35"),
                (try_end),
            (else_try),
                (eq, ":var_35", "qst_deliver_cattle"),
                (try_begin),
                    (is_between, ":var_5", "p_village_1_1", "p_salt_mine"),
                    (party_get_slot, ":var_36", ":var_5", slot_town_trade_routes_end),
                    (neg|ge, ":var_36", 50),
                    (assign, ":var_12", ":var_5"),
                    (store_random_in_range, ":var_19", 5, 10),
                    (assign, ":var_26", 30),
                    (assign, ":var_27", 20),
                    (assign, ":var_10", ":var_35"),
                (try_end),
            (else_try),
                (eq, ":var_35", "qst_train_peasants_against_bandits"),
                (try_begin),
                    (is_between, ":var_5", "p_village_1_1", "p_salt_mine"),
                    (store_skill_level, ":var_37", "skl_trainer", "trp_player"),
                    (gt, ":var_37", 0),
                    (store_random_in_range, ":var_19", 5, 8),
                    (assign, ":var_12", ":var_5"),
                    (assign, ":var_26", 20),
                    (assign, ":var_27", 40),
                    (assign, ":var_10", ":var_35"),
                (try_end),
            (else_try),
                (eq, ":var_35", "qst_escort_merchant_caravan"),
                (is_between, ":var_5", "p_town_1_1", "p_salt_mine"),
                (store_random_party_in_range, ":var_12", "p_town_1_1", "p_castle_1_1"),
                (store_distance_to_party_from_party, ":var_38", ":var_5", ":var_12"),
                (assign, ":var_24", ":var_38"),
                (store_mul, ":var_24", ":var_38", 15),
                (store_random_in_range, ":var_19", 6, 12),
                (assign, "$escort_merchant_caravan_mode", 0),
                (assign, ":var_10", ":var_35"),
            (else_try),
                (eq, ":var_35", "qst_deliver_wine"),
                (is_between, ":var_5", "p_town_1_1", "p_salt_mine"),
                (store_random_party_in_range, ":var_12", "p_town_1_1", "p_castle_1_1"),
                (store_random_in_range, ":var_39", 0, 2),
                (try_begin),
                    (eq, ":var_39", 0),
                    (assign, ":var_21", "itm_quest_wine"),
                (else_try),
                    (assign, ":var_21", "itm_quest_ale"),
                (try_end),
                (store_random_in_range, ":var_19", 6, 12),
                (store_distance_to_party_from_party, ":var_38", ":var_5", ":var_12"),
                (assign, ":var_24", ":var_38"),
                (val_mul, ":var_24", 10),
                (store_item_value, "$qst_deliver_wine_debt", ":var_21"),
                (val_mul, "$qst_deliver_wine_debt", ":var_19"),
                (val_mul, "$qst_deliver_wine_debt", 6),
                (val_div, "$qst_deliver_wine_debt", 5),
                (assign, ":var_26", 7),
                (assign, ":var_27", 20),
                (assign, ":var_10", ":var_35"),
            (else_try),
                (eq, ":var_35", "qst_troublesome_bandits"),
                (is_between, ":var_5", "p_town_1_1", "p_salt_mine"),
                (store_character_level, ":var_24", "trp_player"),
                (val_add, ":var_24", 20),
                (val_mul, ":var_24", 35),
                (val_div, ":var_24", 100),
                (val_mul, ":var_24", 10),
                (assign, ":var_26", 30),
                (assign, ":var_27", 30),
                (assign, ":var_10", ":var_35"),
            (else_try),
                (eq, ":var_35", "qst_kidnapped_girl"),
                (is_between, ":var_5", "p_town_1_1", "p_salt_mine"),
                (assign, ":var_40", 99),
                (try_for_range, ":var_31", 0, ":var_40"),
                    (store_random_in_range, ":var_12", "p_village_1_1", "p_salt_mine"),
                    (store_distance_to_party_from_party, ":var_38", ":var_5", ":var_12"),
                    (neg|gt, ":var_38", 50),
                    (assign, ":var_40", 0),
                (try_end),
                (assign, reg21, ":var_38"),
                (str_store_party_name, s21, ":var_12"),
                (display_message, "@DEBUG -- {s21} distance {reg21}"),
                (store_character_level, ":var_19"),
                (val_add, ":var_19", 15),
                (store_distance_to_party_from_party, ":var_38", ":var_5", ":var_12"),
                (val_add, ":var_38", 15),
                (val_mul, ":var_38", 2),
                (val_mul, ":var_19", ":var_38"),
                (val_div, ":var_19", 100),
                (val_mul, ":var_19", 10),
                (assign, ":var_24", ":var_19"),
                (val_div, ":var_24", 40),
                (val_mul, ":var_24", 10),
                (assign, ":var_26", 15),
                (assign, ":var_27", 30),
                (assign, ":var_10", ":var_35"),
            (else_try),
                (eq, ":var_35", "qst_move_cattle_herd"),
                (is_between, ":var_5", "p_town_1_1", "p_salt_mine"),
                (call_script, "script_cf_select_random_town_at_peace_with_faction", ":var_2"),
                (neg|eq, ":var_5", reg0),
                (assign, ":var_12", reg0),
                (store_distance_to_party_from_party, ":var_38", ":var_5", ":var_12"),
                (store_mul, ":var_24", ":var_38", 10),
                (assign, ":var_26", 30),
                (assign, ":var_27", 20),
                (assign, ":var_10", ":var_35"),
            (else_try),
                (eq, ":var_35", "qst_persuade_lords_to_make_peace"),
                (is_between, ":var_5", "p_town_1_1", "p_salt_mine"),
                (store_faction_of_party, ":var_41", ":var_5"),
                (call_script, "script_cf_faction_get_random_enemy_faction", ":var_41"),
                (assign, ":var_42", reg0),
                (call_script, "script_cf_get_random_lord_except_king_with_faction", ":var_41"),
                (assign, ":var_43", reg0),
                (this_or_next|troop_slot_eq, ":var_43", slot_lord_reputation_type, 2),
                (this_or_next|troop_slot_eq, ":var_43", slot_lord_reputation_type, 3),
                (this_or_next|troop_slot_eq, ":var_43", slot_lord_reputation_type, 1),
                (troop_slot_eq, ":var_43", slot_lord_reputation_type, 5),
                (call_script, "script_cf_get_random_lord_except_king_with_faction", ":var_42"),
                (assign, ":var_11", reg0),
                (this_or_next|troop_slot_eq, ":var_11", slot_lord_reputation_type, 2),
                (this_or_next|troop_slot_eq, ":var_11", slot_lord_reputation_type, 3),
                (this_or_next|troop_slot_eq, ":var_11", slot_lord_reputation_type, 1),
                (troop_slot_eq, ":var_11", slot_lord_reputation_type, 5),
                (assign, ":var_15", ":var_43"),
                (assign, ":var_13", ":var_42"),
                (assign, ":var_14", ":var_41"),
                (assign, ":var_24", 12000),
                (assign, ":var_25", 7000),
                (assign, ":var_26", 30),
                (assign, ":var_27", 100),
                (assign, ":var_10", ":var_35"),
            (else_try),
                (eq, ":var_35", "qst_deal_with_looters"),
                (is_between, ":var_1", 0, 15),
                (is_between, ":var_5", "p_town_1_1", "p_salt_mine"),
                (store_faction_of_party, ":var_41", ":var_5"),
                (store_num_parties_destroyed_by_player, ":var_44", "pt_looters"),
                (party_template_set_slot, "pt_looters", slot_party_template_num_killed, ":var_44"),
                (quest_set_slot, ":var_35", 11, 0),
                (quest_set_slot, ":var_35", 9, "pt_looters"),
                (assign, ":var_24", 500),
                (assign, ":var_23", 500),
                (assign, ":var_26", 20),
                (assign, ":var_27", 30),
                (assign, ":var_10", ":var_35"),
            (else_try),
                (eq, ":var_35", "qst_deal_with_night_bandits"),
                (is_between, ":var_1", 0, 15),
                (is_between, ":var_5", "p_town_1_1", "p_salt_mine"),
                (party_slot_ge, ":var_5", slot_center_has_bandits, 1),
                (assign, ":var_12", ":var_5"),
                (assign, ":var_26", 4),
                (assign, ":var_27", 15),
                (assign, ":var_10", ":var_35"),
            (else_try),
                (eq, ":var_35", "qst_rescue_lord_by_replace"),
                (eq, 1, 0),
                (try_begin),
                    (ge, "$g_talk_troop_faction_relation", 0),
                    (is_between, ":var_1", 5, 25),
                    (assign, ":var_45", -1),
                    (try_begin),
                        (troop_get_slot, ":var_46", ":var_0", slot_troop_father),
                        (gt, ":var_46", 0),
                        (troop_slot_ge, ":var_46", slot_troop_prisoner_of_party, 0),
                        (assign, ":var_45", ":var_46"),
                    (try_end),
                    (try_begin),
                        (eq, ":var_45", -1),
                        (troop_get_slot, ":var_46", ":var_0", slot_troop_spouse),
                        (gt, ":var_46", 0),
                        (troop_slot_ge, ":var_46", slot_troop_prisoner_of_party, 0),
                        (assign, ":var_45", ":var_46"),
                    (try_end),
                    (try_begin),
                        (eq, ":var_45", -1),
                        (troop_get_slot, ":var_46", ":var_0", slot_troop_guardian),
                        (gt, ":var_46", 0),
                        (troop_slot_ge, ":var_46", slot_troop_prisoner_of_party, 0),
                        (assign, ":var_45", ":var_46"),
                    (try_end),
                    (try_begin),
                        (eq, "$cheat_mode", 1),
                        (assign, reg0, ":var_45"),
                        (display_message, "str_prisoner_relative_is_reg0"),
                    (try_end),
                    (gt, ":var_45", -1),
                    (call_script, "script_search_troop_prisoner_of_party", ":var_45"),
                    (assign, ":var_47", reg0),
                    (is_between, ":var_47", "p_town_1_1", "p_village_1_1"),
                    (assign, ":var_12", ":var_47"),
                    (assign, ":var_11", ":var_45"),
                    (assign, ":var_26", 30),
                    (assign, ":var_27", 73),
                    (assign, ":var_10", ":var_35"),
                (try_end),
            (else_try),
                (eq, ":var_35", "qst_deliver_message_to_prisoner_lord"),
                (eq, "$player_has_homage", 0),
                (try_begin),
                    (ge, "$g_talk_troop_faction_relation", 0),
                    (is_between, ":var_1", 5, 25),
                    (troop_get_slot, ":var_46", ":var_0", slot_troop_father),
                    (try_begin),
                        (eq, ":var_46", 0),
                        (troop_get_slot, ":var_46", ":var_0", slot_troop_spouse),
                    (try_end),
                    (gt, ":var_46", -1),
                    (troop_slot_ge, ":var_46", slot_troop_prisoner_of_party, 0),
                    (call_script, "script_search_troop_prisoner_of_party", ":var_46"),
                    (assign, ":var_47", reg0),
                    (is_between, ":var_47", "p_town_1_1", "p_castle_1_1"),
                    (assign, ":var_12", ":var_47"),
                    (assign, ":var_11", ":var_46"),
                    (assign, ":var_26", 30),
                    (assign, ":var_27", 30),
                    (assign, ":var_10", ":var_35"),
                (try_end),
            (else_try),
                (eq, ":var_35", "qst_duel_for_lady"),
                (try_begin),
                    (ge, "$g_talk_troop_faction_relation", 0),
                    (ge, ":var_1", 10),
                    (call_script, "script_cf_troop_get_random_enemy_troop_with_occupation", ":var_0", 2),
                    (assign, ":var_46", reg0),
                    (neg|troop_slot_eq, ":var_0", slot_troop_spouse, ":var_46"),
                    (neg|troop_slot_eq, ":var_0", slot_troop_father, ":var_46"),
                    (neg|troop_slot_ge, ":var_46", slot_troop_prisoner_of_party, 0),
                    (troop_slot_ge, ":var_46", slot_troop_leaded_party, 0),
                    (neg|troop_slot_eq, ":var_46", slot_lord_reputation_type, 6),
                    (neg|troop_slot_eq, ":var_46", slot_lord_reputation_type, 7),
                    (neg|troop_slot_eq, ":var_46", slot_lord_reputation_type, 1),
                    (assign, ":var_11", ":var_46"),
                    (assign, ":var_26", 30),
                    (assign, ":var_27", 50),
                    (assign, ":var_10", ":var_35"),
                (try_end),
            (else_try),
                (eq, ":var_35", "qst_lend_surgeon"),
                (try_begin),
                    (eq, "$g_defending_against_siege", 0),
                    (neg|eq, ":var_4", 2),
                    (neg|eq, ":var_4", 5),
                    (assign, ":var_48", 0),
                    (assign, ":var_49", -1),
                    (party_get_num_companion_stacks, ":var_50", "p_main_party"),
                    (try_for_range, ":var_51", 1, ":var_50"),
                        (party_stack_get_troop_id, ":var_52", "p_main_party", ":var_51"),
                        (troop_is_hero, ":var_52"),
                        (store_skill_level, ":var_53", skl_surgery, ":var_52"),
                        (gt, ":var_53", ":var_48"),
                        (assign, ":var_48", ":var_53"),
                        (assign, ":var_49", ":var_52"),
                    (try_end),
                    (store_character_level, ":var_54", "trp_player"),
                    (assign, ":var_55", 5),
                    (val_div, ":var_54", 10),
                    (val_add, ":var_55", ":var_54"),
                    (ge, ":var_48", ":var_55"),
                    (assign, ":var_15", ":var_49"),
                    (assign, ":var_22", 1),
                    (assign, ":var_23", 10),
                    (assign, ":var_24", 10),
                    (assign, ":var_27", 50),
                    (assign, ":var_10", ":var_35"),
                (try_end),
            (else_try),
                (eq, ":var_35", "qst_meet_spy_in_enemy_town"),
                (eq, "$player_has_homage", 0),
                (try_begin),
                    (eq, "$players_kingdom", ":var_2"),
                    (neg|eq, ":var_4", 6),
                    (neg|eq, ":var_4", 1),
                    (call_script, "script_troop_get_player_relation", ":var_0"),
                    (assign, ":var_56", reg0),
                    (gt, ":var_56", 3),
                    (call_script, "script_cf_faction_get_random_enemy_faction", ":var_2"),
                    (assign, ":var_57", reg0),
                    (store_relation, ":var_58", ":var_57", "fac_player_supporters_faction"),
                    (neg|ge, ":var_58", 0),
                    (call_script, "script_cf_select_random_town_with_faction", ":var_57"),
                    (assign, ":var_47", reg0),
                    (call_script, "script_cf_center_get_free_walker", ":var_47"),
                    (assign, ":var_12", ":var_47"),
                    (store_random_in_range, ":var_19", "str_secret_sign_1", "str_countersign_1"),
                    (assign, ":var_10", ":var_35"),
                    (assign, ":var_24", 500),
                    (assign, ":var_26", 30),
                    (assign, ":var_27", 50),
                    (quest_set_slot, "qst_meet_spy_in_enemy_town", 22, 500),
                (try_end),
            (else_try),
                (eq, ":var_35", "qst_raid_caravan_to_start_war"),
                (eq, 1, 0),
                (try_begin),
                    (eq, "$players_kingdom", ":var_2"),
                    (this_or_next|eq, ":var_4", 4),
                    (this_or_next|eq, ":var_4", 2),
                    (eq, ":var_4", 5),
                    (gt, ":var_1", 10),
                    (eq, 1, 0),
                    (neg|faction_slot_eq, ":var_2", slot_faction_leader, ":var_0"),
                    (call_script, "script_cf_faction_get_random_friendly_faction", ":var_2"),
                    (assign, ":var_13", reg0),
                    (store_troop_faction, ":var_14", ":var_0"),
                    (assign, ":var_18", "pt_kingdom_caravan_party"),
                    (assign, ":var_19", 2),
                    (assign, ":var_10", ":var_35"),
                    (assign, ":var_26", 30),
                    (assign, ":var_27", 100),
                (try_end),
            (else_try),
                (eq, ":var_35", "qst_deliver_message"),
                (eq, "$player_has_homage", 0),
                (try_begin),
                    (ge, "$g_talk_troop_faction_relation", 0),
                    (neg|ge, ":var_1", 20),
                    (neg|troop_slot_ge, "trp_player", slot_troop_renown, 125),
                    (call_script, "script_cf_get_random_lord_in_a_center_with_faction", ":var_2"),
                    (assign, ":var_46", reg0),
                    (neg|eq, ":var_46", ":var_0"),
                    (call_script, "script_get_troop_attached_party", ":var_46"),
                    (assign, ":var_47", reg0),
                    (neg|eq, ":var_5", ":var_47"),
                    (assign, ":var_12", ":var_47"),
                    (assign, ":var_11", ":var_46"),
                    (assign, ":var_23", 30),
                    (assign, ":var_24", 40),
                    (assign, ":var_27", 10),
                    (assign, ":var_10", ":var_35"),
                    (assign, ":var_26", 30),
                (try_end),
            (else_try),
                (eq, ":var_35", "qst_escort_lady"),
                (try_begin),
                    (ge, "$g_talk_troop_faction_relation", 0),
                    (ge, ":var_1", 10),
                    (ge, ":var_0", 0),
                    (assign, ":var_43", -1),
                    (try_for_range, ":var_59", "trp_knight_1_1_wife", "trp_heroes_end"),
                        (troop_slot_eq, ":var_59", slot_troop_father, ":var_0"),
                        (assign, ":var_43", ":var_59"),
                    (try_end),
                    (ge, ":var_43", 0),
                    (troop_get_slot, ":var_60", ":var_43", slot_troop_father),
                    (eq, ":var_0", ":var_60"),
                    (store_random_in_range, ":var_39", 0, 2),
                    (try_begin),
                        (eq, ":var_39", 0),
                        (troop_get_slot, ":var_61", ":var_0", slot_troop_spouse),
                        (is_between, ":var_61", "trp_knight_1_1_wife", "trp_heroes_end"),
                        (troop_get_slot, ":var_60", ":var_61", slot_troop_spouse),
                        (eq, ":var_0", ":var_60"),
                        (assign, ":var_43", ":var_61"),
                    (try_end),
                    (gt, ":var_43", 0),
                    (troop_get_type, ":var_62", ":var_43"),
                    (eq, ":var_62", 1),
                    (gt, ":var_5", 0),
                    (troop_slot_eq, ":var_43", slot_troop_cur_center, ":var_5"),
                    (call_script, "script_cf_select_random_town_with_faction", ":var_2"),
                    (assign, ":var_47", reg0),
                    (neg|eq, ":var_47", ":var_5"),
                    (hero_can_join),
                    (assign, ":var_15", ":var_43"),
                    (assign, ":var_12", ":var_47"),
                    (assign, ":var_26", 20),
                    (assign, ":var_27", 30),
                    (assign, ":var_10", ":var_35"),
                (try_end),
            (else_try),
                (eq, ":var_35", "qst_deliver_message_to_enemy_lord"),
                (try_begin),
                    (ge, "$g_talk_troop_faction_relation", 0),
                    (is_between, ":var_1", 5, 25),
                    (call_script, "script_cf_get_random_lord_from_another_faction_in_a_center", ":var_2"),
                    (assign, ":var_46", reg0),
                    (call_script, "script_get_troop_attached_party", ":var_46"),
                    (assign, ":var_12", reg0),
                    (assign, ":var_11", ":var_46"),
                    (assign, ":var_22", 1),
                    (assign, ":var_23", 200),
                    (assign, ":var_24", 0),
                    (assign, ":var_10", ":var_35"),
                    (assign, ":var_26", 40),
                (try_end),
            (else_try),
                (eq, ":var_35", "qst_deal_with_bandits_at_lords_village"),
                (try_begin),
                    (neg|eq, ":var_4", 5),
                    (neg|eq, ":var_4", 2),
                    (ge, "$g_talk_troop_faction_relation", 0),
                    (assign, ":var_63", "p_salt_mine"),
                    (assign, ":var_47", -1),
                    (try_for_range, ":var_64", "p_village_1_1", ":var_63"),
                        (party_slot_eq, ":var_64", slot_town_lord, ":var_0"),
                        (party_slot_eq, ":var_64", slot_village_infested_by_bandits, 1),
                        (party_slot_eq, ":var_64", slot_village_state, 0),
                        (assign, ":var_47", ":var_64"),
                        (assign, ":var_63", 0),
                    (try_end),
                    (ge, ":var_47", 0),
                    (neg|check_quest_active, "qst_eliminate_bandits_infesting_village"),
                    (assign, ":var_12", ":var_47"),
                    (assign, ":var_10", ":var_35"),
                    (assign, ":var_26", 30),
                (try_end),
            (else_try),
                (eq, ":var_35", "qst_raise_troops"),
                (try_begin),
                    (neg|eq, ":var_4", 1),
                    (neg|eq, ":var_2", "fac_player_supporters_faction"),
                    (ge, "$g_talk_troop_faction_relation", 0),
                    (store_character_level, ":var_54", "trp_player"),
                    (gt, ":var_54", 5),
                    (troop_slot_ge, "trp_player", slot_troop_renown, 100),
                    (store_random_in_range, ":var_19", 5, 8),
                    (party_get_free_companions_capacity, ":var_65", "p_main_party"),
                    (neg|gt, ":var_19", ":var_65"),
                    (faction_get_slot, ":var_15", ":var_2", slot_faction_quick_battle_tier_1_infantry),
                    (store_random_in_range, ":var_66", 20, 40),
                    (val_add, ":var_66", ":var_54"),
                    (val_div, ":var_66", 10),
                    (store_mul, ":var_24", ":var_19", 10),
                    (assign, ":var_11", ":var_15"),
                    (try_for_range, ":var_31", 0, ":var_66"),
                        (troop_get_upgrade_troop, ":var_67", ":var_11", 0),
                        (gt, ":var_67", 0),
                        (assign, ":var_11", ":var_67"),
                        (val_mul, ":var_24", ":var_24", 7),
                        (val_div, ":var_24", ":var_24", 4),
                    (try_end),
                    (assign, ":var_23", ":var_24"),
                    (val_mul, ":var_23", 3),
                    (val_div, ":var_23", 10),
                    (assign, ":var_10", ":var_35"),
                    (assign, ":var_26", 120),
                    (assign, ":var_27", 15),
                (try_end),
            (else_try),
                (eq, ":var_35", "qst_collect_taxes"),
                (eq, "$player_has_homage", 0),
                (try_begin),
                    (neg|eq, ":var_4", 6),
                    (neg|eq, ":var_4", 7),
                    (ge, "$g_talk_troop_faction_relation", 0),
                    (call_script, "script_cf_troop_get_random_leaded_town_or_village_except_center", ":var_0", ":var_5"),
                    (assign, ":var_12", reg0),
                    (assign, ":var_22", 1),
                    (assign, ":var_24", 0),
                    (assign, ":var_23", 100),
                    (assign, ":var_10", ":var_35"),
                    (assign, ":var_26", 50),
                    (assign, ":var_27", 20),
                (try_end),
            (else_try),
                (eq, ":var_35", "qst_hunt_down_fugitive"),
                (try_begin),
                    (ge, "$g_talk_troop_faction_relation", 0),
                    (call_script, "script_cf_select_random_village_with_faction", ":var_2"),
                    (assign, ":var_12", reg0),
                    (store_random_in_range, ":var_20", 0, 1000000),
                    (assign, ":var_10", ":var_35"),
                    (assign, ":var_26", 30),
                    (assign, ":var_27", 30),
                (try_end),
            (else_try),
                (eq, ":var_35", "qst_kill_local_merchant"),
                (eq, "$player_has_homage", 0),
                (try_begin),
                    (this_or_next|eq, ":var_4", 2),
                    (this_or_next|eq, ":var_4", 4),
                    (eq, ":var_4", 5),
                    (neg|faction_slot_eq, ":var_2", slot_faction_leader, ":var_0"),
                    (ge, "$g_talk_troop_faction_relation", 0),
                    (gt, ":var_1", 5),
                    (is_between, ":var_5", "p_town_1_1", "p_castle_1_1"),
                    (assign, ":var_22", 1),
                    (assign, ":var_23", 300),
                    (assign, ":var_24", 1000),
                    (assign, ":var_10", ":var_35"),
                    (assign, ":var_26", 10),
                    (assign, ":var_27", 30),
                (try_end),
            (else_try),
                (eq, ":var_35", "qst_bring_back_runaway_serfs"),
                (try_begin),
                    (neg|eq, ":var_4", 6),
                    (neg|eq, ":var_4", 7),
                    (ge, "$g_talk_troop_faction_relation", 0),
                    (ge, ":var_1", 5),
                    (gt, ":var_5", 0),
                    (eq, "$g_defending_against_siege", 0),
                    (assign, ":var_68", -1),
                    (try_for_range, ":var_64", "p_village_1_1", "p_salt_mine"),
                        (party_slot_eq, ":var_64", slot_town_lord, ":var_0"),
                        (store_distance_to_party_from_party, ":var_38", ":var_64", ":var_5"),
                        (neg|ge, ":var_38", 25),
                        (assign, ":var_68", ":var_64"),
                    (try_end),
                    (ge, ":var_68", 0),
                    (call_script, "script_cf_select_random_town_with_faction", ":var_2"),
                    (assign, ":var_47", reg0),
                    (neg|eq, ":var_47", ":var_5"),
                    (store_distance_to_party_from_party, ":var_38", ":var_47", ":var_5"),
                    (ge, ":var_38", 20),
                    (assign, ":var_18", "pt_runaway_serfs"),
                    (assign, ":var_16", ":var_68"),
                    (assign, ":var_12", ":var_47"),
                    (assign, ":var_22", 1),
                    (assign, ":var_23", 200),
                    (assign, ":var_24", 150),
                    (assign, ":var_10", ":var_35"),
                    (assign, ":var_26", 30),
                    (assign, ":var_27", 20),
                    (assign, "$qst_bring_back_runaway_serfs_num_parties_returned", 0),
                    (assign, "$qst_bring_back_runaway_serfs_num_parties_fleed", 0),
                (try_end),
            (else_try),
                (eq, ":var_35", "qst_follow_spy"),
                (eq, "$player_has_homage", 0),
                (try_begin),
                    (ge, "$g_talk_troop_faction_relation", 0),
                    (neg|eq, ":var_4", 6),
                    (party_get_skill_level, ":var_69", "p_main_party", "skl_tracking"),
                    (ge, ":var_69", 2),
                    (ge, ":var_1", 10),
                    (eq, "$g_defending_against_siege", 0),
                    (gt, ":var_3", 0),
                    (gt, ":var_5", 0),
                    (party_slot_eq, "$g_encountered_party", slot_party_type, 3),
                    (party_get_position, pos2, "p_main_party"),
                    (assign, ":var_70", 99999),
                    (assign, ":var_68", -1),
                    (try_for_range, ":var_71", 0, 10),
                        (call_script, "script_cf_get_random_enemy_center", ":var_3"),
                        (assign, ":var_72", reg0),
                        (party_get_position, pos3, ":var_72"),
                        (map_get_random_position_around_position, 4, pos3, pos6),
                        (get_distance_between_positions, ":var_73", pos2, pos4),
                        (neg|ge, ":var_73", ":var_70"),
                        (assign, ":var_70", ":var_73"),
                        (assign, ":var_68", ":var_72"),
                        (copy_position, pos63, pos4),
                    (try_end),
                    (gt, ":var_68", 0),
                    (assign, ":var_16", ":var_68"),
                    (assign, ":var_27", 50),
                    (assign, ":var_10", ":var_35"),
                    (assign, "$qst_follow_spy_run_away", 0),
                    (assign, "$qst_follow_spy_meeting_state", 0),
                    (assign, "$qst_follow_spy_meeting_counter", 0),
                    (assign, "$qst_follow_spy_spy_back_in_town", 0),
                    (assign, "$qst_follow_spy_partner_back_in_town", 0),
                    (assign, "$qst_follow_spy_no_active_parties", 0),
                (try_end),
            (else_try),
                (eq, ":var_35", "qst_capture_enemy_hero"),
                (try_begin),
                    (eq, "$players_kingdom", ":var_2"),
                    (neg|faction_slot_eq, "$players_kingdom", slot_faction_marshall, "trp_player"),
                    (ge, ":var_1", 15),
                    (call_script, "script_cf_faction_get_random_enemy_faction", ":var_2"),
                    (assign, ":var_13", reg0),
                    (assign, ":var_26", 30),
                    (assign, ":var_27", 80),
                    (assign, ":var_24", 2000),
                    (assign, ":var_10", ":var_35"),
                (try_end),
            (else_try),
                (eq, ":var_35", "qst_lend_companion"),
                (try_begin),
                    (ge, "$g_talk_troop_faction_relation", 0),
                    (assign, ":var_74", 0),
                    (party_get_num_companion_stacks, ":var_50", "p_main_party"),
                    (try_for_range, ":var_51", 0, ":var_50"),
                        (party_stack_get_troop_id, ":var_52", "p_main_party", ":var_51"),
                        (troop_is_hero, ":var_52"),
                        (is_between, ":var_52", "trp_npc1", "trp_kingdom_1_lord"),
                        (store_character_level, ":var_75", ":var_52"),
                        (ge, ":var_75", 15),
                        (assign, ":var_76", 0),
                        (try_for_range, ":var_77", 0, "qst_quests_end"),
                            (check_quest_active, ":var_77"),
                            (this_or_next|quest_slot_eq, ":var_77", 2, ":var_52"),
                            (quest_slot_eq, ":var_77", 4, ":var_52"),
                            (assign, ":var_76", 1),
                        (try_end),
                        (eq, ":var_76", 0),
                        (val_add, ":var_74", 1),
                    (try_end),
                    (gt, ":var_74", 0),
                    (store_random_in_range, ":var_78", 0, ":var_74"),
                    (assign, ":var_74", 0),
                    (assign, ":var_46", -1),
                    (try_for_range, ":var_51", 0, ":var_50"),
                        (eq, ":var_46", -1),
                        (party_stack_get_troop_id, ":var_52", "p_main_party", ":var_51"),
                        (troop_is_hero, ":var_52"),
                        (is_between, ":var_52", "trp_npc1", "trp_kingdom_1_lord"),
                        (neg|eq, ":var_52", "trp_player"),
                        (store_character_level, ":var_75", ":var_52"),
                        (ge, ":var_75", 15),
                        (assign, ":var_76", 0),
                        (try_for_range, ":var_77", 0, "qst_quests_end"),
                            (check_quest_active, ":var_77"),
                            (this_or_next|quest_slot_eq, ":var_77", 2, ":var_52"),
                            (quest_slot_eq, ":var_77", 4, ":var_52"),
                            (assign, ":var_76", 1),
                        (try_end),
                        (eq, ":var_76", 0),
                        (val_add, ":var_74", 1),
                        (gt, ":var_74", ":var_78"),
                        (assign, ":var_46", ":var_52"),
                    (try_end),
                    (is_between, ":var_46", "trp_npc1", "trp_kingdom_1_lord"),
                    (assign, ":var_11", ":var_46"),
                    (store_current_day, ":var_19"),
                    (val_add, ":var_19", 8),
                    (assign, ":var_22", 1),
                    (assign, ":var_23", 300),
                    (assign, ":var_24", 400),
                    (assign, ":var_10", ":var_35"),
                    (assign, ":var_27", 30),
                (try_end),
            (else_try),
                (eq, ":var_35", "qst_collect_debt"),
                (eq, 1, 0),
                (try_begin),
                    (ge, "$g_talk_troop_faction_relation", 0),
                    (call_script, "script_cf_get_random_lord_in_a_center_with_faction", ":var_2"),
                    (assign, ":var_11", reg0),
                    (neg|eq, ":var_11", ":var_0"),
                    (call_script, "script_get_troop_attached_party", ":var_11"),
                    (assign, ":var_12", reg0),
                    (neg|eq, ":var_5", ":var_12"),
                    (assign, ":var_23", 30),
                    (assign, ":var_24", 40),
                    (assign, ":var_10", ":var_35"),
                    (store_random_in_range, ":var_19", 6, 9),
                    (val_mul, ":var_19", 500),
                    (store_div, ":var_25", ":var_19", 5),
                    (assign, ":var_26", 90),
                    (assign, ":var_27", 20),
                (try_end),
            (else_try),
                (eq, ":var_35", "qst_incriminate_loyal_commander"),
                (eq, "$player_has_homage", 0),
                (try_begin),
                    (neg|eq, ":var_4", 7),
                    (neg|eq, ":var_4", 6),
                    (eq, "$players_kingdom", ":var_2"),
                    (ge, ":var_1", 10),
                    (faction_slot_eq, ":var_2", slot_faction_leader, ":var_0"),
                    (assign, ":var_79", 1),
                    (assign, ":var_80", 0),
                    (try_for_range, ":var_31", 0, ":var_79"),
                        (call_script, "script_cf_faction_get_random_enemy_faction", ":var_2"),
                        (assign, ":var_42", reg0),
                        (faction_get_slot, ":var_46", ":var_42", slot_faction_leader),
                        (assign, ":var_81", 0),
                        (try_for_range, ":var_82", "trp_npc1", "trp_knight_1_1_wife"),
                            (troop_slot_eq, ":var_82", slot_troop_occupation, 2),
                            (neg|troop_slot_ge, ":var_82", slot_troop_prisoner_of_party, 0),
                            (neg|eq, ":var_46", ":var_82"),
                            (store_troop_faction, ":var_83", ":var_82"),
                            (eq, ":var_42", ":var_83"),
                            (val_add, ":var_81", 1),
                        (try_end),
                        (gt, ":var_81", 0),
                        (assign, ":var_43", -1),
                        (store_random_in_range, ":var_84", 0, ":var_81"),
                        (try_for_range, ":var_82", "trp_npc1", "trp_knight_1_1_wife"),
                            (eq, ":var_43", -1),
                            (troop_slot_eq, ":var_82", slot_troop_occupation, 2),
                            (neg|eq, ":var_46", ":var_82"),
                            (store_troop_faction, ":var_83", ":var_82"),
                            (eq, ":var_42", ":var_83"),
                            (val_sub, ":var_84", 1),
                            (neg|ge, ":var_84", 0),
                            (assign, ":var_43", ":var_82"),
                        (try_end),
                        (assign, ":var_47", -1),
                        (call_script, "script_get_troop_attached_party", ":var_46"),
                        (is_between, reg0, "p_town_1_1", "p_castle_1_1"),
                        (party_slot_eq, reg0, slot_town_lord, ":var_46"),
                        (assign, ":var_47", reg0),
                        (assign, ":var_79", -1),
                        (assign, ":var_80", 1),
                    (try_end),
                    (eq, ":var_80", 1),
                    (assign, "$incriminate_quest_sacrificed_troop", 0),
                    (party_get_num_companion_stacks, ":var_50", "p_main_party"),
                    (try_for_range, ":var_51", 1, ":var_50"),
                        (eq, "$incriminate_quest_sacrificed_troop", 0),
                        (party_stack_get_troop_id, ":var_52", "p_main_party", ":var_51"),
                        (neg|troop_is_hero, ":var_52"),
                        (store_character_level, ":var_85", ":var_52"),
                        (ge, ":var_85", 25),
                        (assign, "$incriminate_quest_sacrificed_troop", ":var_52"),
                    (try_end),
                    (gt, "$incriminate_quest_sacrificed_troop", 0),
                    (assign, ":var_11", ":var_46"),
                    (assign, ":var_15", ":var_43"),
                    (assign, ":var_12", ":var_47"),
                    (assign, ":var_13", ":var_42"),
                    (assign, ":var_22", 1),
                    (assign, ":var_23", 700),
                    (assign, ":var_24", 1000),
                    (assign, ":var_10", ":var_35"),
                    (assign, ":var_26", 30),
                    (assign, ":var_27", 180),
                (try_end),
            (else_try),
                (eq, ":var_35", "qst_capture_prisoners"),
                (eq, "$player_has_homage", 0),
                (try_begin),
                    (eq, "$players_kingdom", ":var_2"),
                    (call_script, "script_cf_faction_get_random_enemy_faction", ":var_2"),
                    (assign, ":var_42", reg0),
                    (store_add, ":var_86", 45, 1),
                    (store_random_in_range, ":var_87", 42, ":var_86"),
                    (faction_get_slot, ":var_46", ":var_42", ":var_87"),
                    (gt, ":var_46", 0),
                    (store_random_in_range, ":var_19", 3, 7),
                    (assign, ":var_11", ":var_46"),
                    (assign, ":var_13", ":var_42"),
                    (assign, ":var_22", 1),
                    (store_character_level, ":var_24", ":var_46"),
                    (val_add, ":var_24", 5),
                    (val_mul, ":var_24", ":var_24"),
                    (val_div, ":var_24", 5),
                    (val_mul, ":var_24", ":var_19"),
                    (assign, ":var_23", ":var_24"),
                    (assign, ":var_10", ":var_35"),
                    (assign, ":var_26", 90),
                    (assign, ":var_27", 20),
                (try_end),
            (try_end),
        (try_end),
    (try_end),
    (try_begin),
        (neg|eq, ":var_10", -1),
        (try_begin),
            (party_is_active, ":var_12"),
            (store_faction_of_party, ":var_13", ":var_12"),
        (try_end),
        (quest_set_slot, ":var_10", 2, ":var_11"),
        (quest_set_slot, ":var_10", 1, ":var_12"),
        (quest_set_slot, ":var_10", 4, ":var_15"),
        (quest_set_slot, ":var_10", 3, ":var_13"),
        (quest_set_slot, ":var_10", 15, ":var_14"),
        (quest_set_slot, ":var_10", 7, ":var_16"),
        (quest_set_slot, ":var_10", 8, ":var_17"),
        (quest_set_slot, ":var_10", 9, ":var_18"),
        (quest_set_slot, ":var_10", 10, ":var_19"),
        (quest_set_slot, ":var_10", 20, ":var_22"),
        (quest_set_slot, ":var_10", 21, ":var_23"),
        (quest_set_slot, ":var_10", 22, ":var_24"),
        (quest_set_slot, ":var_10", 19, ":var_25"),
        (quest_set_slot, ":var_10", 23, ":var_26"),
        (quest_set_slot, ":var_10", 24, ":var_27"),
        (quest_set_slot, ":var_10", 11, 0),
        (quest_set_slot, ":var_10", 6, ":var_0"),
        (quest_set_slot, ":var_10", 12, ":var_5"),
        (quest_set_slot, ":var_10", 13, ":var_20"),
        (quest_set_slot, ":var_10", 14, ":var_21"),
    (try_end),
    (assign, reg0, ":var_10"),

]),

("get_dynamic_quest",
[
    (store_script_param_1, ":var_0"),
    (assign, ":var_1", -1),
    (assign, ":var_2", -1),
    (assign, ":var_3", -1),
    (assign, ":var_4", -1),
    (try_begin),
        (eq, ":var_0", -1),
    (else_try),
        (neg|check_quest_active, "qst_rescue_prisoner"),
        (this_or_next|troop_slot_eq, ":var_0", slot_troop_occupation, 2),
        (troop_slot_eq, ":var_0", slot_troop_occupation, 6),
        (assign, ":var_5", -1),
        (try_for_range, ":var_6", "trp_npc1", "trp_knight_1_1_wife"),
            (troop_get_slot, ":var_7", ":var_6", slot_troop_prisoner_of_party),
            (is_between, ":var_7", "p_town_1_1", "p_village_1_1"),
            (store_troop_faction, ":var_8", ":var_0"),
            (store_faction_of_party, ":var_9", ":var_7"),
            (store_relation, ":var_10", ":var_8", ":var_9"),
            (neg|ge, ":var_10", 0),
            (call_script, "script_troop_get_family_relation_to_troop", ":var_0", ":var_6"),
            (ge, reg0, 10),
            (assign, ":var_11", 0),
            (try_begin),
                (call_script, "script_cf_prisoner_offered_parole", ":var_6"),
                (assign, ":var_11", 1),
            (try_end),
            (eq, ":var_11", 0),
            (neg|party_slot_eq, ":var_7", slot_town_lord, "trp_player"),
            (assign, ":var_5", ":var_6"),
            (assign, ":var_12", ":var_7"),
        (try_end),
        (gt, ":var_5", -1),
        (assign, ":var_1", "qst_rescue_prisoner"),
        (assign, ":var_2", ":var_5"),
        (assign, ":var_3", ":var_12"),
    (else_try),
        (is_between, ":var_0", "trp_town_1_mayor", "trp_village_1_elder"),
        (store_troop_faction, ":var_13", ":var_0"),
        (neg|check_quest_active, "qst_retaliate_for_border_incident"),
        (quest_slot_eq, "qst_retaliate_for_border_incident", 25, 0),
        (assign, ":var_14", 0),
        (try_for_range, ":var_15", "fac_kingdom_1", "fac_kingdoms_end"),
            (call_script, "script_diplomacy_faction_get_diplomatic_status_with_faction", ":var_13", ":var_15"),
            (assign, ":var_16", reg0),
            (eq, ":var_16", -1),
            (assign, ":var_17", reg1),
            (ge, ":var_17", 10),
            (try_for_range, ":var_18", "trp_npc1", "trp_knight_1_1_wife"),
                (store_troop_faction, ":var_19", ":var_18"),
                (eq, ":var_19", ":var_15"),
                (troop_slot_eq, ":var_18", slot_lord_reputation_type, 5),
                (assign, ":var_14", ":var_18"),
                (assign, ":var_20", ":var_15"),
            (try_end),
        (try_end),
        (is_between, ":var_14", "trp_npc1", "trp_knight_1_1_wife"),
        (assign, ":var_1", "qst_retaliate_for_border_incident"),
        (assign, ":var_2", ":var_14"),
        (assign, ":var_4", ":var_20"),
    (else_try),
        (troop_slot_eq, ":var_0", slot_troop_occupation, 2),
        (neg|check_quest_active, "qst_destroy_bandit_lair"),
        (quest_slot_eq, "qst_destroy_bandit_lair", 25, 0),
        (assign, ":var_21", -1),
        (try_for_range, ":var_22", "pt_steppe_bandits", "pt_deserters"),
            (party_template_get_slot, ":var_23", ":var_22", slot_party_template_lair_party),
            (gt, ":var_23", "p_spawn_points_end"),
            (assign, ":var_24", -1),
            (assign, ":var_25", 99999),
            (try_for_range, ":var_26", "p_town_1_1", "p_castle_1_1"),
                (store_distance_to_party_from_party, ":var_27", ":var_23", ":var_26"),
                (neg|ge, ":var_27", ":var_25"),
                (assign, ":var_24", ":var_26"),
                (assign, ":var_25", ":var_27"),
            (try_end),
            (party_slot_eq, ":var_24", slot_town_lord, ":var_0"),
            (assign, ":var_21", ":var_23"),
        (try_end),
        (gt, ":var_21", "p_spawn_points_end"),
        (assign, ":var_1", "qst_destroy_bandit_lair"),
        (assign, ":var_3", ":var_21"),
    (else_try),
        (is_between, ":var_0", "trp_town_1_mayor", "trp_village_1_elder"),
        (neg|check_quest_active, "qst_track_down_bandits"),
        (quest_slot_eq, "qst_track_down_bandits", 25, 0),
        (assign, ":var_28", -1),
        (try_for_range, ":var_29", "p_town_1_1", "p_castle_1_1"),
            (party_slot_eq, ":var_29", slot_town_elder, ":var_0"),
            (assign, ":var_28", ":var_29"),
        (try_end),
        (gt, ":var_28", -1),
        (call_script, "script_merchant_road_info_to_s42", ":var_28"),
        (assign, ":var_30", reg0),
        (party_is_active, ":var_30"),
        (gt, ":var_30", 0),
        (try_begin),
            (eq, "$cheat_mode", 1),
            (display_message, "str_traveller_attack_found"),
        (try_end),
        (assign, ":var_1", "qst_track_down_bandits"),
        (assign, ":var_3", ":var_30"),
    (else_try),
        (troop_slot_eq, ":var_0", slot_lord_reputation_type, 5),
        (store_troop_faction, ":var_31", ":var_0"),
        (assign, ":var_32", -1),
        (try_for_range, ":var_33", "trp_npc1", "trp_knight_1_1_wife"),
            (troop_slot_eq, ":var_33", slot_lord_reputation_type, 5),
            (store_troop_faction, ":var_34", ":var_33"),
            (eq, ":var_34", ":var_31"),
            (assign, ":var_32", ":var_33"),
        (try_end),
        (eq, ":var_0", ":var_32"),
        (assign, ":var_35", 0),
        (assign, ":var_36", 0),
        (try_for_range, ":var_37", "fac_player_supporters_faction", "fac_kingdoms_end"),
            (neg|eq, ":var_35", -1),
            (neg|eq, ":var_37", ":var_31"),
            (faction_slot_eq, ":var_37", slot_faction_state, 0),
            (neg|eq, ":var_37", "$players_kingdom"),
            (store_relation, ":var_38", ":var_37", ":var_31"),
            (store_add, ":var_39", ":var_31", 170),
            (val_sub, ":var_39", "fac_player_supporters_faction"),
            (faction_get_slot, ":var_40", ":var_37", ":var_39"),
            (try_begin),
                (neg|ge, ":var_38", 0),
                (assign, ":var_35", -1),
            (else_try),
                (ge, ":var_40", 1),
                (assign, ":var_35", -1),
            (else_try),
                (ge, ":var_38", 0),
                (assign, ":var_41", 2),
                (gt, ":var_41", ":var_36"),
                (assign, ":var_35", ":var_37"),
                (assign, ":var_41", ":var_36"),
            (try_end),
        (try_end),
        (is_between, ":var_35", "fac_player_supporters_faction", "fac_kingdoms_end"),
        (assign, ":var_1", "qst_cause_provocation"),
        (assign, ":var_4", ":var_35"),
    (try_end),
    (assign, reg0, ":var_1"),
    (assign, reg1, ":var_2"),
    (assign, reg2, ":var_3"),
    (assign, reg3, ":var_4"),

]),

("get_political_quest",
[
    (store_script_param, ":var_0", 1),
    (assign, ":var_1", -1),
    (assign, ":var_2", -1),
    (assign, ":var_3", -1),
    (assign, ":var_4", 7),
    (try_begin),
        (neg|check_quest_active, "qst_denounce_lord"),
        (try_begin),
            (ge, "$cheat_mode", 1),
            (quest_get_slot, reg4, "qst_denounce_lord", 25),
            (display_message, "@{!}DEBUG -- Checking for denounce lord, eligible in {reg4} days"),
        (try_end),
        (neg|quest_slot_ge, "qst_denounce_lord", 25, 1),
        (neg|eq, ":var_0", "$g_player_minister"),
        (neg|troop_slot_eq, "trp_player", slot_troop_spouse, ":var_0"),
        (neg|faction_slot_eq, "$players_kingdom", slot_faction_leader, "trp_player"),
        (neg|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 2),
        (neg|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 6),
        (assign, ":var_5", -1),
        (assign, ":var_6", 1),
        (try_for_range, ":var_7", "trp_npc1", "trp_knight_1_1_wife"),
            (store_troop_faction, ":var_8", ":var_7"),
            (eq, ":var_8", "$players_kingdom"),
            (neg|eq, ":var_7", ":var_0"),
            (neg|faction_slot_eq, ":var_8", slot_faction_leader, ":var_7"),
            (this_or_next|neg|check_quest_active, "qst_intrigue_against_lord"),
            (neg|quest_slot_eq, "qst_intrigue_against_lord", 2, ":var_7"),
            (call_script, "script_troop_get_relation_with_troop", ":var_7", ":var_0"),
            (assign, ":var_9", reg0),
            (neg|ge, ":var_9", ":var_6"),
            (str_store_troop_name, s4, ":var_7"),
            (try_begin),
                (ge, "$cheat_mode", 1),
                (display_message, "@{!}DEBUG -- Rival found in {s4}"),
            (try_end),
            (try_begin),
                (troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 5),
                (assign, ":var_10", 15),
            (else_try),
                (troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 2),
                (assign, ":var_10", 10),
            (else_try),
                (assign, ":var_10", 5),
            (try_end),
            (call_script, "script_troop_get_relation_with_troop", ":var_7", "trp_player"),
            (assign, ":var_11", reg0),
            (neg|ge, ":var_11", ":var_10"),
            (str_store_troop_name, s4, ":var_7"),
            (try_begin),
                (ge, "$cheat_mode", 1),
                (display_message, "@{!}DEBUG -- {s4} is not close friend of player"),
            (try_end),
            (assign, ":var_12", 0),
            (try_for_range, ":var_13", "trp_npc1", "trp_knight_1_1_wife"),
                (store_troop_faction, ":var_14", ":var_13"),
                (eq, ":var_14", "$players_kingdom"),
                (call_script, "script_troop_get_relation_with_troop", ":var_7", ":var_13"),
                (neg|ge, reg0, 0),
                (val_add, ":var_12", 1),
            (try_end),
            (str_store_troop_name, s4, ":var_7"),
            (try_begin),
                (ge, "$cheat_mode", 1),
                (assign, reg3, ":var_12"),
                (display_message, "@{!}DEBUG -- {s4} has {reg3} rivals"),
            (try_end),
            (this_or_next|ge, ":var_12", 3),
            (ge, "$cheat_mode", 1),
            (assign, ":var_6", ":var_9"),
            (assign, ":var_5", ":var_7"),
        (try_end),
        (is_between, ":var_5", "trp_npc1", "trp_knight_1_1_wife"),
        (assign, ":var_1", "qst_denounce_lord"),
        (assign, ":var_2", ":var_5"),
    (else_try),
        (neg|check_quest_active, "qst_intrigue_against_lord"),
        (try_begin),
            (eq, "$cheat_mode", 1),
            (quest_get_slot, reg4, "qst_intrigue_against_lord", 25),
            (display_message, "@{!}DEBUG -- Checking for intrigue, eligible in {reg4} days"),
        (try_end),
        (neg|quest_slot_ge, "qst_intrigue_against_lord", 25, 1),
        (neg|eq, ":var_0", "$g_player_minister"),
        (neg|troop_slot_eq, "trp_player", slot_troop_spouse, ":var_0"),
        (neg|faction_slot_eq, "$players_kingdom", slot_faction_leader, "trp_player"),
        (try_begin),
            (ge, "$cheat_mode", 1),
            (display_message, "@{!}DEBUG -- Trying for intrigue against lord"),
        (try_end),
        (assign, ":var_5", -1),
        (assign, ":var_6", 10),
        (try_for_range, ":var_7", "trp_npc1", "trp_knight_1_1_wife"),
            (store_troop_faction, ":var_8", ":var_7"),
            (eq, ":var_8", "$players_kingdom"),
            (neg|eq, ":var_7", ":var_0"),
            (neg|faction_slot_eq, ":var_8", slot_faction_leader, ":var_7"),
            (this_or_next|neg|check_quest_active, "qst_denounce_lord"),
            (neg|quest_slot_eq, "qst_denounce_lord", 2, ":var_7"),
            (faction_get_slot, ":var_15", "$players_kingdom", slot_faction_leader),
            (call_script, "script_troop_get_relation_with_troop", ":var_7", ":var_15"),
            (assign, ":var_16", reg0),
            (neg|ge, ":var_16", ":var_6"),
            (str_store_troop_name, s4, ":var_7"),
            (try_begin),
                (ge, "$cheat_mode", 1),
                (display_message, "@{!}DEBUG -- {s4} has sufficiently low relation with liege"),
            (try_end),
            (call_script, "script_troop_get_relation_with_troop", ":var_7", ":var_0"),
            (assign, ":var_9", reg0),
            (neg|ge, ":var_9", 0),
            (str_store_troop_name, s4, ":var_7"),
            (try_begin),
                (ge, "$cheat_mode", 1),
                (display_message, "@{!}DEBUG -- {s4} has sufficiently low relation with giver troop"),
            (try_end),
            (call_script, "script_troop_get_relation_with_troop", ":var_7", "trp_player"),
            (assign, ":var_11", reg0),
            (neg|ge, ":var_11", 0),
            (str_store_troop_name, s4, ":var_7"),
            (try_begin),
                (ge, "$cheat_mode", 1),
                (display_message, "@{!}DEBUG -- {s4} has sufficiently low relation with player"),
            (try_end),
            (assign, ":var_6", ":var_16"),
            (assign, ":var_5", ":var_7"),
        (try_end),
        (is_between, ":var_5", "trp_npc1", "trp_knight_1_1_wife"),
        (assign, ":var_1", "qst_intrigue_against_lord"),
        (assign, ":var_2", ":var_5"),
    (else_try),
        (try_begin),
            (ge, "$cheat_mode", 1),
            (quest_get_slot, reg4, "qst_resolve_dispute", 25),
            (display_message, "@{!}DEBUG -- Checking for resolve dispute, eligible in {reg4} days"),
        (try_end),
        (neg|quest_slot_ge, "qst_resolve_dispute", 25, 1),
        (this_or_next|troop_slot_eq, "trp_player", slot_troop_spouse, "$g_talk_troop"),
        (eq, "$g_talk_troop", "$g_player_minister"),
        (assign, ":var_5", -1),
        (assign, ":var_17", -1),
        (assign, ":var_18", 20),
        (try_for_range, ":var_19", "trp_npc1", "trp_knight_1_1_wife"),
            (store_troop_faction, ":var_20", ":var_19"),
            (eq, ":var_20", "$players_kingdom"),
            (neg|eq, ":var_19", "$g_talk_troop"),
            (try_for_range, ":var_21", "trp_npc1", "trp_knight_1_1_wife"),
                (store_troop_faction, ":var_22", ":var_21"),
                (eq, ":var_22", "$players_kingdom"),
                (neg|eq, ":var_19", ":var_21"),
                (neg|eq, ":var_21", "$g_talk_troop"),
                (call_script, "script_troop_get_relation_with_troop", ":var_19", ":var_21"),
                (assign, ":var_23", reg0),
                (neg|ge, ":var_23", -5),
                (call_script, "script_troop_get_relation_with_troop", ":var_19", "trp_player"),
                (assign, ":var_24", reg0),
                (call_script, "script_troop_get_relation_with_troop", ":var_21", "trp_player"),
                (assign, ":var_25", reg0),
                (gt, ":var_24", 0),
                (gt, ":var_25", 0),
                (store_mul, ":var_26", ":var_24", ":var_25"),
                (gt, ":var_26", ":var_18"),
                (assign, ":var_18", ":var_26"),
                (assign, ":var_5", ":var_19"),
                (assign, ":var_17", ":var_21"),
            (try_end),
        (try_end),
        (is_between, ":var_5", "trp_npc1", "trp_knight_1_1_wife"),
        (assign, ":var_1", "qst_resolve_dispute"),
        (assign, ":var_2", ":var_5"),
        (assign, ":var_3", ":var_17"),
    (else_try),
        (try_begin),
            (ge, "$cheat_mode", 1),
            (quest_get_slot, reg4, "qst_offer_gift", 25),
            (display_message, "@{!}DEBUG -- Checking for offer gift, eligible in {reg4} days"),
        (try_end),
        (neg|quest_slot_ge, "qst_offer_gift", 25, 1),
        (assign, ":var_27", -1),
        (assign, ":var_6", 5),
        (try_for_range, ":var_28", "trp_npc1", "trp_knight_1_1_wife"),
            (store_troop_faction, ":var_29", ":var_28"),
            (eq, ":var_29", "$players_kingdom"),
            (neg|eq, ":var_28", ":var_0"),
            (neg|faction_slot_eq, ":var_29", slot_faction_leader, ":var_28"),
            (call_script, "script_troop_get_family_relation_to_troop", ":var_0", ":var_28"),
            (assign, ":var_30", reg0),
            (ge, ":var_30", ":var_6"),
            (store_sub, ":var_31", 0, ":var_30"),
            (call_script, "script_troop_get_relation_with_troop", "trp_player", ":var_28"),
            (assign, ":var_11", reg0),
            (is_between, ":var_11", ":var_31", 0),
            (assign, ":var_6", ":var_30"),
            (assign, ":var_27", ":var_28"),
        (try_end),
        (is_between, ":var_27", "trp_npc1", "trp_knight_1_1_wife"),
        (assign, ":var_1", "qst_offer_gift"),
        (assign, ":var_2", ":var_27"),
    (try_end),
    (try_begin),
        (gt, ":var_1", -1),
        (quest_set_slot, ":var_1", 2, ":var_2"),
        (quest_set_slot, ":var_1", 2, ":var_3"),
        (quest_set_slot, ":var_1", 6, ":var_0"),
        (quest_set_slot, ":var_1", 24, ":var_4"),
    (try_end),
    (assign, reg0, ":var_1"),
    (assign, reg1, ":var_2"),
    (assign, reg2, ":var_3"),

]),

("npc_find_quest_for_player_to_s11",
[
    (store_script_param, ":var_0", 1),
    (assign, ":var_1", -1),
    (try_for_range, ":var_2", "trp_npc1", "trp_village_1_elder"),
        (eq, ":var_1", -1),
        (neg|troop_slot_eq, "trp_player", slot_troop_spouse, ":var_2"),
        (gt, ":var_2", "$g_troop_list_no"),
        (assign, "$g_troop_list_no", ":var_2"),
        (this_or_next|troop_slot_eq, ":var_2", slot_troop_occupation, 2),
        (is_between, ":var_2", "trp_town_1_mayor", "trp_village_1_elder"),
        (neg|troop_slot_ge, ":var_2", slot_troop_prisoner_of_party, "p_town_1_1"),
        (try_begin),
            (is_between, ":var_2", "trp_town_1_mayor", "trp_village_1_elder"),
            (assign, ":var_3", -1),
            (try_for_range, ":var_4", "p_town_1_1", "p_castle_1_1"),
                (party_slot_eq, ":var_4", slot_town_elder, ":var_2"),
                (store_faction_of_party, ":var_3", ":var_4"),
            (try_end),
        (else_try),
            (store_troop_faction, ":var_3", ":var_2"),
        (try_end),
        (eq, ":var_0", ":var_3"),
        (call_script, "script_get_dynamic_quest", ":var_2"),
        (gt, reg0, -1),
        (assign, ":var_1", ":var_2"),
        (try_begin),
            (eq, "$cheat_mode", 1),
            (str_store_troop_name, s4, ":var_1"),
            (display_message, "str_test_diagnostic_quest_found_for_s4"),
        (try_end),
    (try_end),
    (assign, reg0, ":var_1"),

]),

("cf_get_random_enemy_center_within_range",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (assign, ":var_2", 0),
    (store_faction_of_party, ":var_3", ":var_0"),
    (try_for_range, ":var_4", "p_town_1_1", "p_salt_mine"),
        (store_faction_of_party, ":var_5", ":var_4"),
        (store_relation, ":var_6", ":var_3", ":var_5"),
        (neg|ge, ":var_6", 0),
        (store_distance_to_party_from_party, ":var_7", ":var_0", ":var_4"),
        (neg|gt, ":var_7", ":var_1"),
        (val_add, ":var_2", 1),
    (try_end),
    (gt, ":var_2", 0),
    (store_random_in_range, ":var_8", 0, ":var_2"),
    (assign, ":var_9", "p_salt_mine"),
    (try_for_range, ":var_4", "p_town_1_1", ":var_9"),
        (store_faction_of_party, ":var_5", ":var_4"),
        (store_relation, ":var_6", ":var_3", ":var_5"),
        (neg|ge, ":var_6", 0),
        (store_distance_to_party_from_party, ":var_7", ":var_0", ":var_4"),
        (neg|gt, ":var_7", ":var_1"),
        (val_sub, ":var_8", 1),
        (neg|ge, ":var_8", 0),
        (assign, ":var_10", ":var_4"),
        (assign, ":var_9", 0),
    (try_end),
    (assign, reg0, ":var_10"),

]),

("cf_faction_get_random_enemy_faction",
[
    (store_script_param_1, ":var_0"),
    (assign, ":var_1", -1),
    (assign, ":var_2", 0),
    (try_for_range, ":var_3", "fac_player_supporters_faction", "fac_kingdoms_end"),
        (faction_slot_eq, ":var_3", slot_faction_state, 0),
        (store_relation, ":var_4", ":var_0", ":var_3"),
        (neg|gt, ":var_4", -1),
        (val_add, ":var_2", 1),
    (try_end),
    (store_random_in_range, ":var_5", 0, ":var_2"),
    (assign, ":var_2", 0),
    (try_for_range, ":var_3", "fac_player_supporters_faction", "fac_kingdoms_end"),
        (eq, ":var_1", -1),
        (faction_slot_eq, ":var_3", slot_faction_state, 0),
        (store_relation, ":var_4", ":var_0", ":var_3"),
        (neg|gt, ":var_4", -1),
        (val_add, ":var_2", 1),
        (gt, ":var_2", ":var_5"),
        (assign, ":var_1", ":var_3"),
    (try_end),
    (neg|eq, ":var_1", -1),
    (assign, reg0, ":var_1"),

]),

("cf_faction_get_random_friendly_faction",
[
    (store_script_param_1, ":var_0"),
    (assign, ":var_1", -1),
    (assign, ":var_2", 0),
    (try_for_range, ":var_3", "fac_player_supporters_faction", "fac_kingdoms_end"),
        (faction_slot_eq, ":var_3", slot_faction_state, 0),
        (neg|eq, ":var_3", ":var_0"),
        (store_relation, ":var_4", ":var_0", ":var_3"),
        (ge, ":var_4", 0),
        (val_add, ":var_2", 1),
    (try_end),
    (store_random_in_range, ":var_5", 0, ":var_2"),
    (assign, ":var_2", 0),
    (try_for_range, ":var_3", "fac_player_supporters_faction", "fac_kingdoms_end"),
        (eq, ":var_1", -1),
        (faction_slot_eq, ":var_3", slot_faction_state, 0),
        (neg|eq, ":var_3", ":var_0"),
        (store_relation, ":var_4", ":var_0", ":var_3"),
        (ge, ":var_4", 0),
        (val_add, ":var_2", 1),
        (gt, ":var_2", ":var_5"),
        (assign, ":var_1", ":var_3"),
    (try_end),
    (neg|eq, ":var_1", -1),
    (assign, reg0, ":var_1"),

]),

("cf_troop_get_random_enemy_troop_with_occupation",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (assign, ":var_2", -1),
    (assign, ":var_3", 0),
    (try_for_range, ":var_4", "trp_npc1", "trp_knight_1_1_wife"),
        (troop_slot_eq, ":var_4", slot_troop_occupation, ":var_1"),
        (call_script, "script_troop_get_relation_with_troop", ":var_0", ":var_4"),
        (neg|ge, reg0, -10),
        (val_add, ":var_3", 1),
    (try_end),
    (gt, ":var_3", 0),
    (store_random_in_range, ":var_5", 0, ":var_3"),
    (assign, ":var_3", 0),
    (try_for_range, ":var_4", "trp_npc1", "trp_knight_1_1_wife"),
        (troop_slot_eq, ":var_4", slot_troop_occupation, ":var_1"),
        (call_script, "script_troop_get_relation_with_troop", ":var_0", ":var_4"),
        (neg|ge, reg0, -10),
        (val_add, ":var_3", 1),
        (eq, ":var_5", ":var_3"),
        (assign, ":var_2", ":var_4"),
    (try_end),
    (neg|eq, ":var_2", -1),
    (assign, reg0, ":var_2"),

]),

("cf_get_random_lord_in_a_center_with_faction",
[
    (store_script_param_1, ":var_0"),
    (assign, ":var_1", -1),
    (assign, ":var_2", 0),
    (try_for_range, ":var_3", "trp_npc1", "trp_heroes_end"),
        (store_troop_faction, ":var_4", ":var_3"),
        (eq, ":var_0", ":var_4"),
        (troop_slot_eq, ":var_3", slot_troop_occupation, 2),
        (neg|troop_slot_ge, ":var_3", slot_troop_prisoner_of_party, 0),
        (troop_get_slot, ":var_5", ":var_3", slot_troop_leaded_party),
        (ge, ":var_5", 0),
        (party_get_attached_to, ":var_6", ":var_5"),
        (is_between, ":var_6", "p_town_1_1", "p_salt_mine"),
        (val_add, ":var_2", 1),
    (try_end),
    (store_random_in_range, ":var_7", 0, ":var_2"),
    (assign, ":var_2", 0),
    (try_for_range, ":var_3", "trp_npc1", "trp_heroes_end"),
        (eq, ":var_1", -1),
        (store_troop_faction, ":var_4", ":var_3"),
        (eq, ":var_0", ":var_4"),
        (troop_slot_eq, ":var_3", slot_troop_occupation, 2),
        (neg|troop_slot_ge, ":var_3", slot_troop_prisoner_of_party, 0),
        (troop_get_slot, ":var_5", ":var_3", slot_troop_leaded_party),
        (ge, ":var_5", 0),
        (party_get_attached_to, ":var_6", ":var_5"),
        (is_between, ":var_6", "p_town_1_1", "p_salt_mine"),
        (val_add, ":var_2", 1),
        (neg|ge, ":var_7", ":var_2"),
        (assign, ":var_1", ":var_3"),
    (try_end),
    (neg|eq, ":var_1", -1),
    (assign, reg0, ":var_1"),

]),

("cf_get_random_lord_except_king_with_faction",
[
    (store_script_param_1, ":var_0"),
    (assign, ":var_1", -1),
    (assign, ":var_2", 0),
    (try_for_range, ":var_3", "trp_npc1", "trp_heroes_end"),
        (store_troop_faction, ":var_4", ":var_3"),
        (eq, ":var_0", ":var_4"),
        (neg|faction_slot_eq, ":var_0", slot_faction_leader, ":var_3"),
        (troop_slot_eq, ":var_3", slot_troop_occupation, 2),
        (neg|troop_slot_ge, ":var_3", slot_troop_prisoner_of_party, 0),
        (troop_get_slot, ":var_5", ":var_3", slot_troop_leaded_party),
        (ge, ":var_5", 0),
        (val_add, ":var_2", 1),
    (try_end),
    (store_random_in_range, ":var_6", 0, ":var_2"),
    (assign, ":var_2", 0),
    (try_for_range, ":var_3", "trp_npc1", "trp_heroes_end"),
        (eq, ":var_1", -1),
        (store_troop_faction, ":var_4", ":var_3"),
        (eq, ":var_0", ":var_4"),
        (neg|faction_slot_eq, ":var_0", slot_faction_leader, ":var_3"),
        (troop_slot_eq, ":var_3", slot_troop_occupation, 2),
        (neg|troop_slot_ge, ":var_3", slot_troop_prisoner_of_party, 0),
        (troop_get_slot, ":var_5", ":var_3", slot_troop_leaded_party),
        (ge, ":var_5", 0),
        (val_add, ":var_2", 1),
        (neg|ge, ":var_6", ":var_2"),
        (assign, ":var_1", ":var_3"),
    (try_end),
    (neg|eq, ":var_1", -1),
    (assign, reg0, ":var_1"),

]),

("cf_get_random_lord_from_another_faction_in_a_center",
[
    (store_script_param_1, ":var_0"),
    (assign, ":var_1", -1),
    (assign, ":var_2", 0),
    (try_for_range, ":var_3", "trp_npc1", "trp_heroes_end"),
        (store_troop_faction, ":var_4", ":var_3"),
        (neg|eq, ":var_4", ":var_0"),
        (store_relation, ":var_5", ":var_4", "fac_player_supporters_faction"),
        (store_relation, ":var_6", ":var_4", ":var_0"),
        (neg|ge, ":var_6", 0),
        (ge, ":var_5", 0),
        (troop_slot_eq, ":var_3", slot_troop_occupation, 2),
        (neg|troop_slot_ge, ":var_3", slot_troop_prisoner_of_party, 0),
        (troop_get_slot, ":var_7", ":var_3", slot_troop_leaded_party),
        (ge, ":var_7", 0),
        (party_get_attached_to, ":var_8", ":var_7"),
        (is_between, ":var_8", "p_town_1_1", "p_salt_mine"),
        (val_add, ":var_2", 1),
    (try_end),
    (store_random_in_range, ":var_9", 0, ":var_2"),
    (assign, ":var_2", 0),
    (try_for_range, ":var_3", "trp_npc1", "trp_heroes_end"),
        (eq, ":var_1", -1),
        (store_troop_faction, ":var_4", ":var_3"),
        (neg|eq, ":var_4", ":var_0"),
        (store_relation, ":var_5", ":var_4", "fac_player_supporters_faction"),
        (store_relation, ":var_6", ":var_4", ":var_0"),
        (neg|ge, ":var_6", 0),
        (ge, ":var_5", 0),
        (troop_slot_eq, ":var_3", slot_troop_occupation, 2),
        (neg|troop_slot_ge, ":var_3", slot_troop_prisoner_of_party, 0),
        (troop_get_slot, ":var_7", ":var_3", slot_troop_leaded_party),
        (ge, ":var_7", 0),
        (party_get_attached_to, ":var_8", ":var_7"),
        (is_between, ":var_8", "p_town_1_1", "p_salt_mine"),
        (val_add, ":var_2", 1),
        (neg|ge, ":var_9", ":var_2"),
        (assign, ":var_1", ":var_3"),
    (try_end),
    (neg|eq, ":var_1", -1),
    (assign, reg0, ":var_1"),

]),

("get_closest_walled_center",
[
    (store_script_param_1, ":var_0"),
    (assign, ":var_1", 9999999),
    (assign, reg0, -1),
    (try_for_range, ":var_2", "p_town_1_1", "p_village_1_1"),
        (store_distance_to_party_from_party, ":var_3", ":var_0", ":var_2"),
        (neg|ge, ":var_3", ":var_1"),
        (assign, ":var_1", ":var_3"),
        (assign, reg0, ":var_2"),
    (try_end),

]),

("get_closest_center",
[
    (store_script_param_1, ":var_0"),
    (assign, ":var_1", 9999999),
    (assign, reg0, -1),
    (try_for_range, ":var_2", "p_town_1_1", "p_salt_mine"),
        (store_distance_to_party_from_party, ":var_3", ":var_0", ":var_2"),
        (neg|ge, ":var_3", ":var_1"),
        (assign, ":var_1", ":var_3"),
        (assign, reg0, ":var_2"),
    (try_end),

]),

("get_closest_center_of_faction",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (assign, ":var_2", 99999),
    (assign, ":var_3", -1),
    (try_for_range, ":var_4", "p_town_1_1", "p_salt_mine"),
        (store_faction_of_party, ":var_5", ":var_4"),
        (eq, ":var_5", ":var_1"),
        (store_distance_to_party_from_party, ":var_6", ":var_0", ":var_4"),
        (neg|ge, ":var_6", ":var_2"),
        (assign, ":var_2", ":var_6"),
        (assign, ":var_3", ":var_4"),
    (try_end),
    (assign, reg0, ":var_3"),

]),

("get_closest_walled_center_of_faction",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (assign, ":var_2", 99999),
    (assign, ":var_3", -1),
    (try_for_range, ":var_4", "p_town_1_1", "p_village_1_1"),
        (store_faction_of_party, ":var_5", ":var_4"),
        (eq, ":var_5", ":var_1"),
        (store_distance_to_party_from_party, ":var_6", ":var_0", ":var_4"),
        (neg|ge, ":var_6", ":var_2"),
        (assign, ":var_2", ":var_6"),
        (assign, ":var_3", ":var_4"),
    (try_end),
    (assign, reg0, ":var_3"),

]),

("let_nearby_parties_join_current_battle",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_character_level, ":var_2", "trp_player"),
    (try_for_parties, ":var_3"),
        (party_is_active, ":var_3"),
        (party_get_battle_opponent, ":var_4", ":var_3"),
        (neg|ge, ":var_4", 0),
        (party_get_attached_to, ":var_5", ":var_3"),
        (neg|ge, ":var_5", 0),
        (get_party_ai_behavior, ":var_6", ":var_3"),
        (neg|eq, ":var_6", 8),
        (party_stack_get_troop_id, ":var_7", ":var_3", 0),
        (try_begin),
            (neg|is_between, ":var_7", "trp_looter", "trp_black_khergit_horseman"),
            (assign, ":var_8", 5),
            (try_begin),
                (is_currently_night),
                (assign, ":var_8", 3),
            (try_end),
        (else_try),
            (assign, ":var_8", 3),
            (try_begin),
                (is_currently_night),
                (assign, ":var_8", 2),
            (try_end),
        (try_end),
        (this_or_next|neg|check_quest_active, "qst_track_down_bandits"),
        (neg|quest_slot_eq, "qst_track_down_bandits", 8, ":var_3"),
        (this_or_next|neg|check_quest_active, "qst_troublesome_bandits"),
        (neg|quest_slot_eq, "qst_troublesome_bandits", 8, ":var_3"),
        (store_distance_to_party_from_party, ":var_9", ":var_3", "p_main_party"),
        (neg|ge, ":var_9", ":var_8"),
        (store_faction_of_party, ":var_10", ":var_3"),
        (store_faction_of_party, ":var_11", "$g_enemy_party"),
        (try_begin),
            (eq, ":var_10", "fac_player_supporters_faction"),
            (assign, ":var_12", 100),
        (else_try),
            (store_relation, ":var_12", ":var_10", "fac_player_supporters_faction"),
        (try_end),
        (try_begin),
            (eq, ":var_10", ":var_11"),
            (assign, ":var_13", 100),
        (else_try),
            (store_relation, ":var_13", ":var_10", ":var_11"),
        (try_end),
        (assign, ":var_14", 1),
        (try_begin),
            (neg|eq, "$g_enemy_party", "$g_encountered_party"),
            (assign, ":var_14", 2),
        (try_end),
        (try_begin),
            (eq, ":var_0", 0),
            (neg|ge, ":var_12", 0),
            (gt, ":var_13", 0),
            (party_get_slot, ":var_15", ":var_3"),
            (assign, ":var_16", 0),
            (try_begin),
                (party_stack_get_troop_id, ":var_7", ":var_3", 0),
                (is_between, ":var_7", "trp_looter", "trp_black_khergit_horseman"),
                (gt, ":var_2", 6),
                (assign, ":var_16", 1),
            (try_end),
            (party_get_template_id, ":var_17", ":var_3"),
            (this_or_next|eq, ":var_15", 13),
            (this_or_next|eq, ":var_15", 7),
            (this_or_next|eq, ":var_17", "pt_mongolian_camp"),
            (this_or_next|eq, ":var_17", "pt_welsh"),
            (this_or_next|eq, ":var_17", "pt_guelphs"),
            (this_or_next|eq, ":var_17", "pt_ghibellines"),
            (this_or_next|eq, ":var_17", "pt_crusaders"),
            (this_or_next|eq, ":var_17", "pt_crusader_raiders"),
            (this_or_next|eq, ":var_17", "pt_jihadist_raiders"),
            (this_or_next|eq, ":var_17", "pt_teutonic_raiders"),
            (this_or_next|eq, ":var_17", "pt_curonians"),
            (this_or_next|eq, ":var_17", "pt_prussians"),
            (this_or_next|eq, ":var_17", "pt_samogitians"),
            (this_or_next|eq, ":var_17", "pt_yotvingians"),
            (this_or_next|eq, ":var_15", 30),
            (eq, ":var_16", 1),
            (get_party_ai_behavior, ":var_18", ":var_3"),
            (neg|eq, ":var_18", 5),
            (party_relocate_near_party, ":var_3", "p_main_party", 3),
            (party_quick_attach_to_current_battle, ":var_3", ":var_14"),
            (str_store_party_name, s1, ":var_3"),
            (display_message, "str_s1_joined_battle_enemy"),
        (else_try),
            (try_begin),
                (party_slot_eq, ":var_3", slot_party_ai_state, 11),
                (party_slot_eq, ":var_3", slot_party_ai_object, "trp_player"),
                (assign, ":var_19", 1),
            (else_try),
                (assign, ":var_19", 0),
            (try_end),
            (this_or_next|eq, ":var_1", 0),
            (eq, ":var_19", 1),
            (gt, ":var_12", 0),
            (neg|ge, ":var_13", 0),
            (assign, ":var_20", 0),
            (try_begin),
                (party_slot_eq, ":var_3", slot_party_ai_state, 11),
                (party_slot_eq, ":var_3", slot_party_ai_object, "p_main_party"),
                (assign, ":var_20", 1),
            (try_end),
            (assign, ":var_21", 1),
            (try_begin),
                (eq, ":var_0", 1),
                (eq, ":var_20", 0),
                (assign, ":var_21", 0),
                (eq, ":var_10", "$players_kingdom"),
                (faction_slot_eq, "$players_kingdom", slot_faction_marshall, "trp_player"),
                (assign, ":var_21", 1),
            (try_end),
            (eq, ":var_21", 1),
            (party_get_slot, ":var_15", ":var_3"),
            (eq, ":var_15", 13),
            (party_stack_get_troop_id, ":var_22", ":var_3", 0),
            (call_script, "script_troop_get_player_relation", ":var_22"),
            (assign, ":var_23", reg0),
            (assign, ":var_24", 0),
            (try_begin),
                (faction_slot_eq, "$players_kingdom", slot_faction_marshall, "trp_player"),
                (eq, ":var_20", 1),
                (assign, ":var_24", 1),
            (try_end),
            (this_or_next|ge, ":var_23", 0),
            (eq, ":var_24", 1),
            (party_relocate_near_party, ":var_3", "p_main_party", 3),
            (party_quick_attach_to_current_battle, ":var_3", 0),
            (str_store_party_name, s1, ":var_3"),
            (display_message, "str_s1_joined_battle_friend"),
        (else_try),
            (party_get_template_id, ":var_17", ":var_3"),
            (this_or_next|eq, ":var_15", 7),
            (this_or_next|eq, ":var_17", "pt_mongolian_camp"),
            (this_or_next|eq, ":var_17", "pt_welsh"),
            (this_or_next|eq, ":var_17", "pt_guelphs"),
            (this_or_next|eq, ":var_17", "pt_ghibellines"),
            (this_or_next|eq, ":var_17", "pt_crusaders"),
            (this_or_next|eq, ":var_17", "pt_crusader_raiders"),
            (this_or_next|eq, ":var_17", "pt_jihadist_raiders"),
            (this_or_next|eq, ":var_17", "pt_teutonic_raiders"),
            (this_or_next|eq, ":var_17", "pt_curonians"),
            (this_or_next|eq, ":var_17", "pt_prussians"),
            (this_or_next|eq, ":var_17", "pt_samogitians"),
            (this_or_next|eq, ":var_17", "pt_yotvingians"),
            (eq, ":var_15", 30),
            (try_begin),
                (party_slot_eq, ":var_3", slot_party_ai_state, 11),
                (party_slot_eq, ":var_3", slot_party_ai_object, "trp_player"),
                (assign, ":var_19", 1),
            (else_try),
                (assign, ":var_19", 0),
            (try_end),
            (this_or_next|eq, ":var_1", 0),
            (eq, ":var_19", 1),
            (gt, ":var_12", 0),
            (neg|ge, ":var_13", 0),
            (party_relocate_near_party, ":var_3", "p_main_party", 3),
            (party_quick_attach_to_current_battle, ":var_3", 0),
            (str_store_party_name, s1, ":var_3"),
            (display_message, "str_s1_joined_battle_friend"),
        (try_end),
    (try_end),

]),

("party_wound_all_members_aux",
[
    (store_script_param_1, ":var_0"),
    (party_get_num_companion_stacks, ":var_1", ":var_0"),
    (try_for_range, ":var_2", 0, ":var_1"),
        (party_stack_get_troop_id, ":var_3", ":var_0", ":var_2"),
        (try_begin),
            (neg|troop_is_hero, ":var_3"),
            (party_stack_get_size, ":var_4", ":var_0", ":var_2"),
            (party_wound_members, ":var_0", ":var_3", ":var_4"),
        (else_try),
            (troop_set_health, ":var_3", 0),
        (try_end),
    (try_end),
    (party_get_num_attached_parties, ":var_5", ":var_0"),
    (try_for_range, ":var_6", 0, ":var_5"),
        (party_get_attached_party_with_rank, ":var_7", ":var_0", ":var_6"),
        (call_script, "script_party_wound_all_members_aux", ":var_7"),
    (try_end),

]),

("party_wound_all_members",
[
    (store_script_param_1, ":var_0"),
    (call_script, "script_party_wound_all_members_aux", ":var_0"),

]),

("calculate_battle_advantage",
[
    (call_script, "script_party_count_fit_for_battle", "p_collective_friends"),
    (assign, ":var_0", reg0),
    (party_get_skill_level, ":var_1", "p_main_party", skl_tactics),
    (party_get_skill_level, ":var_2", "p_collective_friends", skl_tactics),
    (val_max, ":var_1", ":var_2"),
    (call_script, "script_party_count_fit_for_battle", "p_collective_enemy"),
    (assign, ":var_3", reg0),
    (party_get_skill_level, ":var_4", "p_collective_enemy", skl_tactics),
    (val_add, ":var_0", 1),
    (val_add, ":var_3", 1),
    (try_begin),
        (ge, ":var_0", ":var_3"),
        (val_mul, ":var_0", 100),
        (store_div, ":var_5", ":var_0", ":var_3"),
        (store_sub, ":var_6", ":var_5", 100),
    (else_try),
        (val_mul, ":var_3", 100),
        (store_div, ":var_5", ":var_3", ":var_0"),
        (store_sub, ":var_6", 100, ":var_5"),
    (try_end),
    (val_mul, ":var_6", 2),
    (val_mul, ":var_1", 30),
    (val_mul, ":var_4", 30),
    (val_add, ":var_6", ":var_1"),
    (val_sub, ":var_6", ":var_4"),
    (val_div, ":var_6", 100),
    (assign, reg0, ":var_6"),
    (display_message, "@Battle Advantage = {reg0}.", 0xFFFFFFFF),

]),

("cf_check_enemies_nearby",
[
    (get_player_agent_no, ":var_0"),
    (agent_is_alive, ":var_0"),
    (agent_get_position, pos1, ":var_0"),
    (assign, ":var_1", 0),
    (set_fixed_point_multiplier, 100),
    (try_for_agents, ":var_2"),
        (neg|eq, ":var_2", ":var_0"),
        (agent_is_alive, ":var_2"),
        (agent_is_human, ":var_2"),
        (neg|agent_is_ally, ":var_2"),
        (agent_get_position, pos2, ":var_2"),
        (get_distance_between_positions, ":var_3", pos1, pos2),
        (neg|gt, ":var_3", 1500),
        (assign, ":var_1", 1),
    (try_end),
    (eq, ":var_1", 0),

]),

("get_heroes_attached_to_center_aux",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (party_get_num_companion_stacks, ":var_2", ":var_0"),
    (try_for_range, ":var_3", 0, ":var_2"),
        (party_stack_get_troop_id, ":var_4", ":var_0", ":var_3"),
        (troop_is_hero, ":var_4"),
        (party_add_members, ":var_1", ":var_4", 1),
    (try_end),
    (party_get_num_attached_parties, ":var_5", ":var_0"),
    (try_for_range, ":var_6", 0, ":var_5"),
        (party_get_attached_party_with_rank, ":var_7", ":var_0", ":var_6"),
        (call_script, "script_get_heroes_attached_to_center_aux", ":var_7", ":var_1"),
    (try_end),

]),

("get_heroes_attached_to_center",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (party_clear, ":var_1"),
    (call_script, "script_get_heroes_attached_to_center_aux", ":var_0", ":var_1"),
    (try_for_range, ":var_2", "trp_kingdom_4_pretender", "trp_knight_1_1_wife"),
        (neg|eq, ":var_2", "$supported_pretender"),
        (troop_slot_eq, ":var_2", slot_troop_cur_center, ":var_0"),
        (party_add_members, ":var_1", ":var_2", 1),
    (try_end),

]),

("get_heroes_attached_to_center_as_prisoner_aux",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (party_get_num_prisoner_stacks, ":var_2", ":var_0"),
    (try_for_range, ":var_3", 0, ":var_2"),
        (party_prisoner_stack_get_troop_id, ":var_4", ":var_0", ":var_3"),
        (troop_is_hero, ":var_4"),
        (party_add_members, ":var_1", ":var_4", 1),
    (try_end),
    (party_get_num_attached_parties, ":var_5", ":var_0"),
    (try_for_range, ":var_6", 0, ":var_5"),
        (party_get_attached_party_with_rank, ":var_7", ":var_0", ":var_6"),
        (call_script, "script_get_heroes_attached_to_center_as_prisoner_aux", ":var_7", ":var_1"),
    (try_end),

]),

("get_heroes_attached_to_center_as_prisoner",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (party_clear, ":var_1"),
    (call_script, "script_get_heroes_attached_to_center_as_prisoner_aux", ":var_0", ":var_1"),

]),

("give_center_to_faction",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (party_set_slot, ":var_0", 400, 0),
    (try_begin),
        (party_slot_eq, ":var_0", slot_village_infested_by_bandits, "trp_peasant_woman"),
        (party_set_slot, ":var_0", slot_village_infested_by_bandits, 0),
    (try_end),
    (try_begin),
        (eq, "$g_constable_training_center", ":var_0"),
        (assign, "$g_constable_training_center", -1),
    (try_end),
    (try_begin),
        (eq, ":var_1", "fac_player_supporters_faction"),
        (faction_get_slot, ":var_2", "fac_player_supporters_faction", slot_faction_leader),
        (eq, ":var_2", "trp_player"),
        (try_begin),
            (is_between, ":var_0", "p_town_1_1", "p_village_1_1"),
            (assign, ":var_3", 1),
        (else_try),
            (assign, ":var_3", 0),
        (try_end),
        (try_for_range, ":var_4", "p_town_1_1", "p_village_1_1"),
            (store_faction_of_party, ":var_5", ":var_4"),
            (eq, ":var_5", "fac_player_supporters_faction"),
            (val_add, ":var_3", 1),
        (try_end),
        (ge, ":var_3", 10),
        (unlock_achievement, 55),
    (try_end),
    (try_begin),
        (check_quest_active, "qst_join_siege_with_army"),
        (quest_slot_eq, "qst_join_siege_with_army", 1, ":var_0"),
        (call_script, "script_abort_quest", "qst_join_siege_with_army", 0),
        (faction_get_slot, ":var_6", "$players_kingdom", slot_faction_marshall),
        (str_store_troop_name_link, s9, ":var_6"),
        (setup_quest_text, "qst_follow_army"),
        (str_store_string, s2, "@{s9} wants you to resume following his army until further notice."),
        (call_script, "script_start_quest", "qst_follow_army", ":var_6"),
        (assign, "$g_player_follow_army_warnings", 0),
    (try_end),
    (call_script, "script_give_center_to_faction_aux", ":var_0", ":var_1"),
    (call_script, "script_update_village_market_towns"),
    (try_for_range, ":var_7", "fac_player_supporters_faction", "fac_kingdoms_end"),
        (call_script, "script_faction_recalculate_strength", ":var_7"),
    (try_end),
    (assign, "$g_recalculate_ais", 1),
    (try_begin),
        (eq, ":var_1", "fac_player_supporters_faction"),
        (faction_slot_eq, "fac_player_supporters_faction", slot_faction_state, 2),
        (call_script, "script_activate_player_faction", "trp_player"),
    (try_end),

]),

("give_center_to_faction_aux",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (store_faction_of_party, ":var_2", ":var_0"),
    (party_set_faction, ":var_0", ":var_1"),
    (try_begin),
        (party_slot_eq, ":var_0", slot_party_type, 4),
        (party_get_slot, ":var_3", ":var_0", slot_village_farmer_party),
        (gt, ":var_3", 0),
        (party_is_active, ":var_3"),
        (party_set_faction, ":var_3", ":var_1"),
    (try_end),
    (try_begin),
        (neg|eq, ":var_1", ":var_2"),
        (party_set_slot, ":var_0", slot_center_ex_faction, ":var_2"),
        (party_get_slot, ":var_4", ":var_0", slot_town_lord),
        (party_set_slot, ":var_0", slot_town_lord, -1),
        (party_set_banner_icon, ":var_0", 0),
        (call_script, "script_update_faction_notes", ":var_2"),
    (try_end),
    (call_script, "script_update_faction_notes", ":var_1"),
    (call_script, "script_update_center_notes", ":var_0"),
    (try_begin),
        (ge, ":var_4", 0),
        (neg|eq, ":var_1", "fac_player_supporters_faction"),
        (call_script, "script_update_troop_notes", ":var_4"),
    (try_end),
    (try_for_range, ":var_5", "p_town_1_1", "p_salt_mine"),
        (party_slot_eq, ":var_5", slot_village_bound_center, ":var_0"),
        (call_script, "script_give_center_to_faction_aux", ":var_5", ":var_1"),
    (try_end),

]),

("change_troop_faction",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (try_begin),
        (is_between, ":var_1", "fac_player_supporters_faction", "fac_kingdoms_end"),
        (neg|faction_slot_eq, ":var_1", slot_faction_state, 0),
        (faction_set_slot, ":var_1", slot_faction_state, 0),
    (try_end),
    (store_troop_faction, ":var_2", ":var_0"),
    (try_begin),
        (faction_slot_eq, ":var_2", slot_faction_marshall, ":var_0"),
        (call_script, "script_check_and_finish_active_army_quests_for_faction", ":var_2"),
        (try_begin),
            (faction_slot_eq, ":var_2", slot_faction_political_issue, 0),
            (faction_set_slot, ":var_2", slot_faction_political_issue, 1),
            (store_current_hours, ":var_3"),
            (val_max, ":var_3", 0),
            (faction_set_slot, ":var_2", slot_faction_political_issue_time, ":var_3"),
            (try_for_range, ":var_4", "trp_npc1", "trp_knight_1_1_wife"),
                (store_troop_faction, ":var_5", ":var_4"),
                (eq, ":var_5", ":var_2"),
                (troop_set_slot, ":var_4", slot_troop_stance_on_faction_issue, -1),
            (try_end),
            (try_begin),
                (eq, "$players_kingdom", ":var_2"),
                (troop_set_slot, "trp_player", slot_troop_stance_on_faction_issue, -1),
            (try_end),
        (try_end),
        (try_begin),
            (troop_get_slot, ":var_6", ":var_0", slot_troop_leaded_party),
            (party_is_active, ":var_6"),
            (party_set_marshall, ":var_6", 0),
        (try_end),
        (faction_set_slot, ":var_2", slot_faction_marshall, -1),
    (try_end),
    (troop_set_slot, ":var_0", slot_troop_stance_on_faction_issue, -1),
    (try_for_range, ":var_4", "trp_npc1", "trp_knight_1_1_wife"),
        (troop_slot_eq, ":var_4", slot_troop_stance_on_faction_issue, ":var_0"),
        (troop_set_slot, ":var_4", slot_troop_stance_on_faction_issue, -1),
    (try_end),
    (try_begin),
        (ge, "$cheat_mode", 1),
        (str_store_troop_name, s4, ":var_0"),
        (display_message, "@{!}DEBUG - {s4} faction changed in normal faction change"),
    (try_end),
    (troop_set_faction, ":var_0", ":var_1"),
    (troop_set_slot, ":var_0", slot_troop_recruitment_random, 0),
    (troop_set_slot, ":var_0", slot_lord_recruitment_argument, 0),
    (troop_set_slot, ":var_0", slot_lord_recruitment_candidate, 0),
    (troop_set_slot, ":var_0", slot_troop_promised_fief, 0),
    (call_script, "script_troop_set_title_according_to_faction", ":var_0", ":var_1"),
    (try_begin),
        (this_or_next|eq, ":var_1", "$players_kingdom"),
        (eq, ":var_1", "fac_player_supporters_faction"),
        (call_script, "script_check_concilio_calradi_achievement"),
    (try_end),
    (try_for_range, ":var_7", "p_town_1_1", "p_village_1_1"),
        (party_slot_eq, ":var_7", slot_town_lord, ":var_0"),
        (party_set_faction, ":var_7", ":var_1"),
        (try_for_range, ":var_8", "p_village_1_1", "p_salt_mine"),
            (party_slot_eq, ":var_8", slot_village_bound_center, ":var_7"),
            (party_set_faction, ":var_8", ":var_1"),
            (party_get_slot, ":var_9", ":var_8", slot_village_farmer_party),
            (try_begin),
                (gt, ":var_9", 0),
                (party_is_active, ":var_9"),
                (party_set_faction, ":var_9", ":var_1"),
            (try_end),
            (try_begin),
                (party_get_slot, ":var_10", ":var_8", slot_town_lord),
                (neg|eq, ":var_10", ":var_0"),
                (party_set_slot, ":var_8", slot_town_lord, -1),
            (try_end),
        (try_end),
    (try_end),
    (try_for_range, ":var_11", "trp_knight_1_1_wife", "trp_heroes_end"),
        (call_script, "script_get_kingdom_lady_social_determinants", ":var_11"),
        (assign, ":var_12", reg0),
        (assign, ":var_13", reg1),
        (eq, ":var_12", ":var_0"),
        (try_begin),
            (ge, "$cheat_mode", 1),
            (str_store_troop_name, s4, ":var_11"),
            (display_message, "@{!}DEBUG - {s4} faction changed by guardian moving"),
        (try_end),
        (troop_set_faction, ":var_11", ":var_1"),
        (troop_slot_eq, ":var_11", slot_troop_prisoner_of_party, -1),
        (troop_set_slot, ":var_11", slot_troop_cur_center, ":var_13"),
    (try_end),
    (try_for_range, ":var_8", "p_village_1_1", "p_salt_mine"),
        (party_slot_eq, ":var_8", slot_town_lord, ":var_0"),
        (store_faction_of_party, ":var_14", ":var_8"),
        (try_begin),
            (neg|eq, ":var_14", ":var_1"),
            (party_set_slot, ":var_8", slot_town_lord, -1),
        (try_end),
    (try_end),
    (try_begin),
        (troop_get_slot, ":var_15", ":var_0", slot_troop_leaded_party),
        (gt, ":var_15", 0),
        (party_set_faction, ":var_15", ":var_1"),
        (party_get_num_prisoner_stacks, ":var_16", ":var_15"),
        (try_for_range_backwards, ":var_17", 0, ":var_16"),
            (party_prisoner_stack_get_troop_id, ":var_18", ":var_15", ":var_17"),
            (store_troop_faction, ":var_19", ":var_18"),
            (troop_is_hero, ":var_18"),
            (eq, ":var_19", ":var_1"),
            (call_script, "script_remove_troop_from_prison", ":var_18"),
            (party_remove_prisoners, ":var_15", ":var_18", 1),
        (try_end),
    (try_end),
    (try_for_range, ":var_20", 0, "qst_quests_end"),
        (check_quest_active, ":var_20"),
        (quest_slot_eq, ":var_20", 6, ":var_0"),
        (str_store_troop_name, s4, ":var_0"),
        (try_begin),
            (eq, "$cheat_mode", 1),
            (display_message, "str_s4_changing_sides_aborts_quest"),
        (try_end),
        (call_script, "script_abort_quest", ":var_20", 0),
    (try_end),
    (try_for_range, ":var_21", "trp_npc1", "trp_knight_1_1_wife"),
        (troop_get_slot, ":var_22", ":var_21", slot_troop_leaded_party),
        (party_is_active, ":var_22"),
        (party_get_attached_to, ":var_23", ":var_22"),
        (is_between, ":var_23", "p_town_1_1", "p_village_1_1"),
        (store_faction_of_party, ":var_24", ":var_22"),
        (store_faction_of_party, ":var_25", ":var_23"),
        (neg|eq, ":var_24", ":var_25"),
        (party_detach, ":var_22"),
    (try_end),
    (faction_get_slot, ":var_26", ":var_1", slot_faction_leader),
    (try_begin),
        (eq, ":var_26", "trp_player"),
        (neg|eq, ":var_0", "$g_talk_troop"),
        (troop_set_slot, ":var_0", slot_troop_occupation, 0),
    (else_try),
        (is_between, ":var_26", "trp_npc1", "trp_knight_1_1_wife"),
        (is_between, ":var_0", "trp_npc1", "trp_knight_1_1_wife"),
        (call_script, "script_troop_change_relation_with_troop", ":var_26", ":var_0", 5),
        (val_add, "$total_indictment_changes", 5),
    (try_end),
    (try_begin),
        (troop_slot_ge, ":var_0", slot_troop_spouse, 0),
    (else_try),
        (is_between, ":var_0", "trp_npc1", "trp_knight_1_1_wife"),
        (try_for_range, ":var_27", 35, 38),
            (troop_get_slot, ":var_28", ":var_0", ":var_27"),
            (call_script, "script_courtship_event_lady_break_relation_with_suitor", ":var_28", ":var_0"),
        (try_end),
        (call_script, "script_assign_troop_love_interests", ":var_0"),
    (else_try),
        (is_between, ":var_0", "trp_knight_1_1_wife", "trp_heroes_end"),
        (try_for_range, ":var_4", "trp_npc1", "trp_knight_1_1_wife"),
            (try_for_range, ":var_27", 35, 38),
                (troop_slot_eq, ":var_4", ":var_27", ":var_0"),
                (call_script, "script_courtship_event_lady_break_relation_with_suitor", ":var_0", ":var_4"),
            (try_end),
        (try_end),
    (try_end),
    (troop_get_slot, ":var_29", ":var_0", slot_troop_leaded_party),
    (try_for_range, ":var_7", "p_town_1_1", "p_salt_mine"),
        (party_slot_eq, ":var_7", slot_party_type, 4),
        (party_get_slot, ":var_30", ":var_7", slot_village_raided_by),
        (eq, ":var_30", ":var_29"),
        (party_set_slot, ":var_7", slot_village_raided_by, -1),
        (try_begin),
            (party_slot_eq, ":var_7", slot_village_state, 1),
            (party_set_slot, ":var_7", slot_village_state, 0),
            (party_set_extra_text, ":var_7", "str_empty_string"),
        (try_end),
    (else_try),
        (party_get_slot, ":var_31", ":var_7", slot_center_is_besieged_by),
        (eq, ":var_31", ":var_29"),
        (party_set_slot, ":var_7", slot_center_is_besieged_by, -1),
        (try_begin),
            (party_slot_eq, ":var_7", slot_village_state, 5),
            (party_set_slot, ":var_7", slot_village_state, 0),
            (party_set_extra_text, ":var_7", "str_empty_string"),
        (try_end),
    (try_end),
    (call_script, "script_update_all_notes"),
    (call_script, "script_update_village_market_towns"),
    (assign, "$g_recalculate_ais", 1),

]),

("troop_set_title_according_to_faction",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (try_begin),
        (is_between, ":var_1", "fac_player_supporters_faction", "fac_kingdoms_end"),
        (str_store_troop_name_plural, s0, ":var_0"),
        (troop_get_type, ":var_2", ":var_0"),
        (store_sub, ":var_3", ":var_1", "fac_player_supporters_faction"),
        (try_begin),
            (eq, ":var_2", 0),
            (val_add, ":var_3", "str_faction_title_male_player"),
        (else_try),
            (val_add, ":var_3", "str_faction_title_female_player"),
        (try_end),
        (str_store_string, s1, ":var_3"),
        (troop_set_name, ":var_0", 1),
        (troop_get_slot, ":var_4", ":var_0", slot_troop_leaded_party),
        (gt, ":var_4", 0),
        (str_store_troop_name, s5, ":var_0"),
        (party_set_name, ":var_4", "str_s5_s_party"),
    (try_end),

]),

("give_center_to_lord",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (party_set_slot, ":var_0", 400, 0),
    (try_begin),
        (party_slot_eq, ":var_0", slot_village_infested_by_bandits, "trp_peasant_woman"),
        (party_set_slot, ":var_0", slot_village_infested_by_bandits, 0),
    (try_end),
    (try_begin),
        (eq, "$cheat_mode", 1),
        (ge, ":var_1", 0),
        (str_store_party_name, s4, ":var_0"),
        (str_store_troop_name, s5, ":var_1"),
        (display_message, "@{!}DEBUG -- {s4} awarded to {s5}"),
    (try_end),
    (try_begin),
        (eq, ":var_1", "trp_player"),
        (unlock_achievement, 50),
        (assign, ":var_3", 1),
        (try_for_range, ":var_4", "p_town_1_1", "p_salt_mine"),
            (neg|eq, ":var_4", ":var_0"),
            (party_slot_eq, ":var_4", slot_town_lord, "trp_player"),
            (val_add, ":var_3", 1),
        (try_end),
        (ge, ":var_3", 5),
        (unlock_achievement, 51),
    (try_end),
    (party_get_slot, ":var_5", ":var_0", slot_town_lord),
    (try_begin),
        (eq, ":var_1", -1),
        (assign, ":var_6", "fac_player_supporters_faction"),
        (party_set_banner_icon, ":var_0", 0),
    (else_try),
        (eq, ":var_1", "trp_player"),
        (assign, ":var_6", "$players_kingdom"),
    (else_try),
        (store_troop_faction, ":var_6", ":var_1"),
    (try_end),
    (faction_get_slot, ":var_7", ":var_6", slot_faction_leader),
    (try_begin),
        (eq, ":var_7", ":var_5"),
        (call_script, "script_add_log_entry", 22, ":var_7", ":var_0", ":var_1", ":var_6"),
        (troop_set_slot, ":var_1", slot_troop_promised_fief, 0),
    (try_end),
    (try_begin),
        (eq, ":var_1", -1),
        (party_set_faction, ":var_0", "$players_kingdom"),
    (else_try),
        (eq, ":var_1", "trp_player"),
        (gt, "$players_kingdom", 0),
        (party_set_faction, ":var_0", "$players_kingdom"),
    (else_try),
        (eq, ":var_1", "trp_player"),
        (neg|is_between, "$players_kingdom", "fac_player_supporters_faction", "fac_kingdoms_end"),
        (party_set_faction, ":var_0", "fac_player_supporters_faction"),
    (else_try),
        (party_set_faction, ":var_0", ":var_6"),
    (try_end),
    (party_set_slot, ":var_0", slot_town_lord, ":var_1"),
    (try_begin),
        (party_slot_eq, ":var_0", slot_party_type, 4),
        (party_get_slot, ":var_8", ":var_0", slot_village_farmer_party),
        (gt, ":var_8", 0),
        (party_is_active, ":var_8"),
        (store_faction_of_party, ":var_9", ":var_0"),
        (party_set_faction, ":var_8", ":var_9"),
    (try_end),
    (try_begin),
        (this_or_next|party_slot_eq, ":var_0", slot_party_type, 3),
        (party_slot_eq, ":var_0", slot_party_type, 2),
        (gt, ":var_1", -1),
        (troop_get_slot, ":var_10", ":var_1", slot_troop_banner_scene_prop),
        (gt, ":var_10", 0),
        (val_sub, ":var_10", "spr_banner_a"),
        (val_add, ":var_10", "icon_banner_01"),
        (party_set_banner_icon, ":var_0", ":var_10"),
    (try_end),
    (try_begin),
        (gt, ":var_1", -1),
        (call_script, "script_update_troop_notes", ":var_1"),
    (try_end),
    (call_script, "script_update_center_notes", ":var_0"),
    (try_begin),
        (gt, ":var_6", 0),
        (call_script, "script_update_faction_notes", ":var_6"),
    (try_end),
    (try_begin),
        (ge, ":var_5", 0),
        (call_script, "script_update_troop_notes", ":var_5"),
        (store_troop_faction, ":var_11", ":var_5"),
        (call_script, "script_update_faction_notes", ":var_11"),
    (try_end),
    (try_begin),
        (eq, ":var_2", 1),
        (this_or_next|party_slot_eq, ":var_0", slot_party_type, 3),
        (party_slot_eq, ":var_0", slot_party_type, 2),
        (assign, ":var_12", 3),
        (try_begin),
            (party_slot_eq, ":var_0", slot_party_type, 3),
            (assign, ":var_12", 9),
        (try_end),
        (try_for_range, ":var_13", 0, ":var_12"),
            (call_script, "script_cf_reinforce_party", ":var_0"),
        (try_end),
        (try_for_range, ":var_13", 0, 7),
            (store_mul, ":var_14", 150, ":var_12"),
            (store_mul, ":var_15", 200, ":var_12"),
            (store_random_in_range, ":var_16", ":var_14", ":var_15"),
            (party_upgrade_with_xp, ":var_0", ":var_16", 0),
        (try_end),
    (try_end),
    (faction_get_slot, ":var_7", ":var_6", slot_faction_leader),
    (store_current_hours, ":var_17"),
    (try_begin),
        (gt, ":var_17", 0),
        (gt, ":var_1", 0),
        (call_script, "script_troop_change_relation_with_troop", ":var_1", ":var_7", 10),
        (val_add, "$total_promotion_changes", 10),
        (try_for_range, ":var_18", "trp_npc1", "trp_knight_1_1_wife"),
            (troop_slot_eq, ":var_18", slot_troop_occupation, 2),
            (neg|eq, ":var_18", ":var_1"),
            (store_troop_faction, ":var_19", ":var_18"),
            (eq, ":var_6", ":var_19"),
            (neg|eq, ":var_18", ":var_7"),
            (call_script, "script_troop_get_relation_with_troop", ":var_18", ":var_1"),
            (assign, ":var_20", reg0),
            (store_div, ":var_21", ":var_20", 8),
            (val_sub, ":var_21", 2),
            (val_clamp, ":var_21", -5, 3),
            (try_begin),
                (this_or_next|troop_slot_eq, ":var_18", slot_lord_reputation_type, 7),
                (troop_slot_eq, ":var_18", slot_lord_reputation_type, 6),
                (ge, ":var_20", 0),
                (val_max, ":var_21", 0),
            (else_try),
                (this_or_next|troop_slot_eq, ":var_18", slot_lord_reputation_type, 3),
                (this_or_next|troop_slot_eq, ":var_18", slot_lord_reputation_type, 5),
                (troop_slot_eq, ":var_18", slot_lord_reputation_type, 2),
                (neg|ge, ":var_21", 0),
                (val_mul, ":var_21", 3),
                (val_div, ":var_21", 2),
            (try_end),
            (neg|eq, ":var_21", 0),
            (try_begin),
                (troop_slot_eq, ":var_18", slot_troop_stance_on_faction_issue, ":var_1"),
                (val_add, ":var_21", 1),
                (val_max, ":var_21", 1),
            (try_end),
            (call_script, "script_troop_change_relation_with_troop", ":var_18", ":var_7", ":var_21"),
            (val_add, "$total_promotion_changes", ":var_21"),
            (try_begin),
                (this_or_next|neg|gt, ":var_21", -4),
                (this_or_next|troop_slot_eq, ":var_18", slot_troop_promised_fief, 1),
                (troop_slot_eq, ":var_18", slot_troop_promised_fief, ":var_0"),
                (call_script, "script_add_log_entry", 26, ":var_18", ":var_0", ":var_1", ":var_6"),
            (try_end),
        (try_end),
    (try_end),
    (try_begin),
        (is_between, ":var_0", "p_town_1_1", "p_village_1_1"),
        (try_for_range, ":var_22", "p_village_1_1", "p_salt_mine"),
            (party_slot_eq, ":var_22", slot_village_bound_center, ":var_0"),
            (store_faction_of_party, ":var_23", ":var_22"),
            (neg|eq, ":var_23", ":var_6"),
            (call_script, "script_give_center_to_lord", ":var_22", ":var_1", 0),
        (try_end),
    (try_end),

]),

("get_number_of_hero_centers",
[
    (store_script_param_1, ":var_0"),
    (assign, ":var_1", 0),
    (try_for_range, ":var_2", "p_town_1_1", "p_salt_mine"),
        (party_slot_eq, ":var_2", slot_town_lord, ":var_0"),
        (val_add, ":var_1", 1),
    (try_end),
    (assign, reg0, ":var_1"),

]),

("cf_get_random_enemy_center",
[
    (store_script_param_1, ":var_0"),
    (assign, ":var_1", -1),
    (assign, ":var_2", 0),
    (store_faction_of_party, ":var_3", ":var_0"),
    (try_for_range, ":var_4", "p_town_1_1", "p_salt_mine"),
        (store_faction_of_party, ":var_5", ":var_4"),
        (store_relation, ":var_6", ":var_5", ":var_3"),
        (neg|ge, ":var_6", 0),
        (val_add, ":var_2", 1),
    (try_end),
    (gt, ":var_2", 0),
    (store_random_in_range, ":var_7", 0, ":var_2"),
    (assign, ":var_2", 0),
    (try_for_range, ":var_4", "p_town_1_1", "p_salt_mine"),
        (eq, ":var_1", -1),
        (store_faction_of_party, ":var_5", ":var_4"),
        (store_relation, ":var_6", ":var_5", ":var_3"),
        (neg|ge, ":var_6", 0),
        (val_sub, ":var_7", 1),
        (neg|ge, ":var_7", 0),
        (assign, ":var_1", ":var_4"),
    (try_end),
    (assign, reg0, ":var_1"),

]),

("find_travel_location",
[
    (store_script_param_1, ":var_0"),
    (store_faction_of_party, ":var_1", ":var_0"),
    (assign, ":var_2", 0),
    (try_for_range, ":var_3", "p_town_1_1", "p_salt_mine"),
        (neg|eq, ":var_0", ":var_3"),
        (store_faction_of_party, ":var_4", ":var_3"),
        (eq, ":var_1", ":var_4"),
        (store_distance_to_party_from_party, ":var_5", ":var_0", ":var_3"),
        (val_add, ":var_5", 1),
        (assign, ":var_6", 100000),
        (val_div, ":var_6", ":var_5"),
        (val_add, ":var_2", ":var_6"),
    (try_end),
    (assign, reg0, -1),
    (try_begin),
        (eq, ":var_2", 0),
    (else_try),
        (store_random_in_range, ":var_7", 0, ":var_2"),
        (assign, ":var_2", 0),
        (assign, ":var_8", 0),
        (try_for_range, ":var_3", "p_town_1_1", "p_salt_mine"),
            (eq, ":var_8", 0),
            (neg|eq, ":var_0", ":var_3"),
            (store_faction_of_party, ":var_4", ":var_3"),
            (eq, ":var_1", ":var_4"),
            (store_distance_to_party_from_party, ":var_5", ":var_0", ":var_3"),
            (val_add, ":var_5", 1),
            (assign, ":var_6", 100000),
            (val_div, ":var_6", ":var_5"),
            (val_add, ":var_2", ":var_6"),
            (neg|ge, ":var_7", ":var_2"),
            (assign, reg0, ":var_3"),
            (assign, ":var_8", 1),
        (try_end),
    (try_end),

]),

("get_relation_between_parties",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (store_faction_of_party, ":var_2", ":var_0"),
    (store_faction_of_party, ":var_3", ":var_1"),
    (try_begin),
        (eq, ":var_2", ":var_3"),
        (assign, reg0, 100),
    (else_try),
        (store_relation, ":var_4", ":var_2", ":var_3"),
        (assign, reg0, ":var_4"),
    (try_end),

]),

("calculate_weekly_party_wage",
[
    (store_script_param_1, ":var_0"),
    (assign, ":var_1", 0),
    (party_get_num_companion_stacks, ":var_2", ":var_0"),
    (try_for_range, ":var_3", 0, ":var_2"),
        (party_stack_get_troop_id, ":var_4", ":var_0", ":var_3"),
        (party_stack_get_size, ":var_5", ":var_0", ":var_3"),
        (call_script, "script_game_get_troop_wage", ":var_4", ":var_0"),
        (assign, ":var_6", reg0),
        (val_mul, ":var_6", ":var_5"),
        (val_add, ":var_1", ":var_6"),
    (try_end),
    (assign, reg0, ":var_1"),

]),

("calculate_player_faction_wage",
[
    (assign, ":var_0", 0),
    (assign, ":var_1", 0),
    (try_for_parties, ":var_2"),
        (assign, ":var_3", 0),
        (try_begin),
            (this_or_next|party_slot_eq, ":var_2", slot_party_type, 3),
            (party_slot_eq, ":var_2", slot_party_type, 2),
            (party_slot_eq, ":var_2", slot_town_lord, "trp_player"),
            (assign, ":var_3", 1),
        (try_end),
        (this_or_next|eq, ":var_2", "p_main_party"),
        (eq, ":var_3", 1),
        (party_get_num_companion_stacks, ":var_4", ":var_2"),
        (try_for_range, ":var_5", 0, ":var_4"),
            (party_stack_get_troop_id, ":var_6", ":var_2", ":var_5"),
            (party_stack_get_size, ":var_7", ":var_2", ":var_5"),
            (call_script, "script_game_get_troop_wage", ":var_6", ":var_2"),
            (assign, ":var_8", reg0),
            (val_mul, ":var_8", ":var_7"),
            (try_begin),
                (eq, ":var_3", 1),
                (val_add, ":var_1", ":var_8"),
            (else_try),
                (val_add, ":var_0", ":var_8"),
            (try_end),
        (try_end),
    (try_end),
    (val_div, ":var_1", 2),
    (store_sub, ":var_9", 14, "$g_cur_week_half_daily_wage_payments"),
    (val_mul, ":var_0", ":var_9"),
    (val_div, ":var_0", 14),
    (store_add, reg0, ":var_0", ":var_1"),

]),

("calculate_hero_weekly_net_income_and_add_to_wealth",
[
    (store_script_param_1, ":var_0"),
    (assign, ":var_1", 0),
    (assign, ":var_2", -1),
    (try_for_parties, ":var_3", "p_town_1_1", "p_salt_mine"),
        (party_slot_eq, ":var_3", slot_town_lord, ":var_0"),
        (val_add, ":var_1", 500),
        (assign, ":var_2", 1),
        (party_get_slot, ":var_4", ":var_3", slot_center_accumulated_rents),
        (party_get_slot, ":var_5", ":var_3", slot_center_accumulated_tariffs),
        (val_add, ":var_1", ":var_4"),
        (val_add, ":var_1", ":var_5"),
        (party_set_slot, ":var_3", slot_center_accumulated_rents, 0),
        (party_set_slot, ":var_3", slot_center_accumulated_tariffs, 0),
    (try_end),
    (try_begin),
        (eq, ":var_2", -1),
        (val_add, ":var_1", 2000),
    (try_end),
    (store_troop_faction, ":var_6", ":var_0"),
    (troop_get_slot, ":var_7", ":var_0", slot_troop_leaded_party),
    (troop_get_slot, ":var_8", ":var_0", slot_troop_wealth),
    (try_begin),
        (faction_slot_eq, ":var_6", slot_faction_leader, ":var_0"),
        (val_add, ":var_1", 2500),
    (try_end),
    (assign, ":var_9", 0),
    (try_begin),
        (gt, ":var_7", 0),
        (call_script, "script_calculate_weekly_party_wage", ":var_7"),
        (assign, ":var_9", reg0),
    (try_end),
    (assign, ":var_10", ":var_1"),
    (val_sub, ":var_1", ":var_9"),
    (val_add, ":var_8", ":var_1"),
    (try_begin),
        (neg|ge, ":var_8", 0),
        (store_sub, ":var_11", 0, ":var_8"),
        (val_mul, ":var_11", 100),
        (val_div, ":var_11", ":var_9"),
        (val_div, ":var_11", 5),
        (try_begin),
            (eq, "$cheat_mode", 1),
            (str_store_party_name, s25, ":var_7"),
            (assign, reg25, ":var_11"),
            (assign, reg1, ":var_9"),
            (assign, reg2, ":var_8"),
            (assign, reg3, ":var_10"),
            (display_message, "@!!!attrition {s25} - {reg25}, wage: {reg1}, wealth: {reg2}, weekly income: {reg3}"),
        (try_end),
    (try_end),
    (val_clamp, ":var_8", 0, 80000),
    (troop_set_slot, ":var_0", slot_troop_wealth, ":var_8"),

]),

("cf_reinforce_party",
[
    (store_script_param_1, ":var_0"),
    (store_faction_of_party, ":var_1", ":var_0"),
    (party_get_slot, ":var_1", ":var_0", slot_center_original_faction),
    (try_begin),
        (eq, ":var_0", "p_main_party"),
        (assign, ":var_1", "fac_kingdom_31"),
    (try_end),
    (faction_get_slot, ":var_2", ":var_1", slot_faction_reinforcements_a),
    (faction_get_slot, ":var_3", ":var_1", slot_faction_reinforcements_b),
    (faction_get_slot, ":var_4", ":var_1", slot_faction_reinforcements_c),
    (try_begin),
        (is_between, ":var_0", "p_town_1_1", "p_salt_mine"),
        (party_get_slot, ":var_5", ":var_0", 704),
        (party_get_slot, ":var_6", ":var_0", 705),
        (party_get_slot, ":var_7", ":var_0", 708),
        (store_random_in_range, ":var_8", 0, 3),
        (try_begin),
            (eq, ":var_8", 1),
            (gt, ":var_6", 0),
            (party_get_slot, ":var_5", ":var_0", 707),
        (else_try),
            (eq, ":var_8", 2),
            (gt, ":var_7", 0),
            (party_get_slot, ":var_5", ":var_0", 710),
        (try_end),
    (try_end),
    (try_begin),
        (is_between, ":var_0", "p_town_1_1", "p_salt_mine"),
        (store_random_in_range, ":var_9", 0, 2),
        (try_begin),
            (eq, ":var_9", 0),
            (call_script, "script_fill_lance", ":var_0", ":var_0"),
        (else_try),
            (eq, ":var_9", 1),
            (party_add_template, ":var_0", ":var_5"),
        (try_end),
    (else_try),
        (party_add_template, ":var_0", ":var_2"),
        (party_add_template, ":var_0", ":var_3"),
        (party_add_template, ":var_0", ":var_4"),
    (try_end),
    (call_script, "script_party_calculate_strength", ":var_0", 1, 0),

]),

("hire_men_to_kingdom_hero_party",
[
    (store_script_param_1, ":var_0"),
    (troop_get_slot, ":var_1", ":var_0", slot_troop_leaded_party),
    (troop_get_slot, ":var_2", ":var_0", slot_troop_wealth),
    (assign, ":var_3", ":var_2"),
    (val_mul, ":var_3", 3),
    (val_div, ":var_3", 4),
    (call_script, "script_party_get_ideal_size", ":var_1"),
    (assign, ":var_4", reg0),
    (store_mul, ":var_5", ":var_4", 3),
    (val_div, ":var_5", 2),
    (party_get_num_companions, ":var_6", ":var_1"),
    (assign, ":var_7", 0),
    (try_begin),
        (neg|ge, ":var_6", ":var_4"),
        (gt, ":var_1", 0),
        (try_begin),
            (call_script, "script_cf_recruit_lance_for_npc", ":var_1"),
        (else_try),
            (gt, ":var_3", 1000),
            (assign, ":var_7", 1000),
            (call_script, "script_cf_recruit_merc_lance_for_npc", ":var_1"),
            (val_sub, ":var_2", ":var_7"),
            (troop_set_slot, ":var_0", slot_troop_wealth, ":var_2"),
        (else_try),
            (call_script, "script_cf_recruit_individual_merc", ":var_1"),
        (try_end),
    (else_try),
        (gt, ":var_6", ":var_5"),
        (store_troop_faction, ":var_8", ":var_0"),
        (party_get_num_companion_stacks, ":var_9", ":var_1"),
        (assign, ":var_10", 0),
        (assign, ":var_11", 0),
        (try_for_range_backwards, ":var_12", 0, ":var_9"),
            (party_stack_get_troop_id, ":var_13", ":var_1", ":var_12"),
            (neg|troop_is_hero, ":var_13"),
            (party_stack_get_size, ":var_14", ":var_1", ":var_12"),
            (store_character_level, ":var_15", ":var_13"),
            (store_troop_faction, ":var_16", ":var_13"),
            (try_begin),
                (eq, ":var_8", ":var_16"),
                (val_mul, ":var_15", 3),
            (try_end),
            (val_mul, ":var_15", ":var_14"),
            (val_add, ":var_10", ":var_14"),
            (val_add, ":var_11", ":var_15"),
        (try_end),
        (gt, ":var_10", 0),
        (store_div, ":var_17", ":var_11", ":var_10"),
        (try_for_range_backwards, ":var_12", 0, ":var_9"),
            (party_stack_get_troop_id, ":var_13", ":var_1", ":var_12"),
            (neg|troop_is_hero, ":var_13"),
            (party_stack_get_size, ":var_14", ":var_1", ":var_12"),
            (store_character_level, ":var_15", ":var_13"),
            (store_troop_faction, ":var_16", ":var_13"),
            (try_begin),
                (eq, ":var_8", ":var_16"),
                (val_mul, ":var_15", 3),
            (try_end),
            (store_sub, ":var_18", ":var_17", ":var_15"),
            (val_div, ":var_18", 3),
            (store_add, ":var_19", 10, ":var_18"),
            (gt, ":var_19", 0),
            (call_script, "script_get_percentage_with_randomized_round", ":var_14", ":var_19"),
            (gt, reg0, 0),
            (party_remove_members, ":var_1", ":var_13", reg0),
        (try_end),
    (try_end),

]),

("get_percentage_with_randomized_round",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_mul, ":var_2", ":var_0", ":var_1"),
    (val_div, ":var_2", 100),
    (store_mul, ":var_3", ":var_2", 100),
    (val_div, ":var_3", ":var_1"),
    (store_sub, ":var_4", ":var_0", ":var_3"),
    (try_begin),
        (gt, ":var_4", 0),
        (store_mul, ":var_5", ":var_4", ":var_1"),
        (store_random_in_range, ":var_6", 0, 100),
        (neg|ge, ":var_6", ":var_5"),
        (val_add, ":var_2", 1),
    (try_end),
    (assign, reg0, ":var_2"),

]),

("create_cattle_herd",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (assign, ":var_2", -1),
    (set_spawn_radius, 1),
    (spawn_around_party, ":var_0", "pt_cattle_herd"),
    (assign, ":var_2", reg0),
    (party_get_position, pos1, ":var_0"),
    (call_script, "script_map_get_random_position_around_position_within_range", 1, 2),
    (party_set_position, ":var_2", pos2),
    (party_set_slot, ":var_2", slot_party_type, 17),
    (party_set_slot, ":var_2", slot_party_ai_state, -1),
    (party_set_ai_behavior, ":var_2", 0),
    (party_set_slot, ":var_2", slot_party_commander_party, -1),
    (try_begin),
        (gt, ":var_1", 0),
        (party_clear, ":var_2"),
        (party_add_members, ":var_2", "trp_cattle", ":var_1"),
    (try_end),
    (assign, reg0, ":var_2"),

]),

("buy_cattle_from_village",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (try_for_range, ":var_3", 0, ":var_1"),
        (call_script, "script_game_event_buy_item", "itm_cattle_meat", 0),
        (call_script, "script_game_event_buy_item", "itm_cattle_meat", 0),
    (try_end),
    (party_get_slot, ":var_4", ":var_0", slot_town_trade_routes_end),
    (val_sub, ":var_4", ":var_1"),
    (party_set_slot, ":var_0", slot_town_trade_routes_end, ":var_4"),
    (store_mul, ":var_5", ":var_2", ":var_1"),
    (troop_remove_gold, "trp_player", ":var_5"),
    (assign, ":var_6", 1),
    (try_for_parties, ":var_7"),
        (eq, ":var_6", 1),
        (party_slot_eq, ":var_7", slot_party_type, 17),
        (store_distance_to_party_from_party, ":var_8", ":var_0", ":var_7"),
        (neg|ge, ":var_8", 6),
        (assign, ":var_9", 1),
        (try_begin),
            (check_quest_active, "qst_move_cattle_herd"),
            (quest_slot_eq, "qst_move_cattle_herd", 8, ":var_7"),
            (assign, ":var_9", 0),
        (try_end),
        (eq, ":var_9", 1),
        (party_add_members, ":var_7", "trp_cattle", ":var_1"),
        (assign, ":var_6", 0),
        (assign, reg0, ":var_7"),
    (try_end),
    (try_begin),
        (eq, ":var_6", 1),
        (call_script, "script_create_cattle_herd", ":var_0", ":var_1"),
    (try_end),

]),

("kill_cattle_from_herd",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (troop_clear_inventory, "trp_temp_troop"),
    (store_mul, ":var_2", ":var_1", 2),
    (troop_add_items, "trp_temp_troop", "itm_cattle_meat", ":var_2"),
    (troop_get_inventory_capacity, ":var_3", "trp_temp_troop"),
    (try_for_range, ":var_4", 0, ":var_3"),
        (troop_get_inventory_slot, ":var_5", "trp_temp_troop", ":var_4"),
        (eq, ":var_5", "itm_cattle_meat"),
        (troop_set_inventory_slot_modifier, "trp_temp_troop", ":var_4", 37),
    (try_end),
    (party_get_num_companions, ":var_6", ":var_0"),
    (try_begin),
        (ge, ":var_1", ":var_6"),
        (remove_party, ":var_0"),
    (else_try),
        (party_remove_members, ":var_0", "trp_cattle", ":var_1"),
    (try_end),

]),

("create_kingdom_hero_party",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_troop_faction, ":var_2", ":var_0"),
    (assign, "$pout_party", -1),
    (set_spawn_radius, 0),
    (spawn_around_party, ":var_1", "pt_kingdom_hero_party"),
    (assign, "$pout_party", reg0),
    (party_set_faction, "$pout_party", ":var_2"),
    (party_set_slot, "$pout_party", slot_party_type, 13),
    (call_script, "script_party_set_ai_state", "$pout_party", -1, -1),
    (troop_set_slot, ":var_0", slot_troop_leaded_party, "$pout_party"),
    (party_add_leader, "$pout_party", ":var_0"),
    (str_store_troop_name, s5, ":var_0"),
    (party_set_name, "$pout_party", "str_s5_s_party"),
    (party_set_slot, "$pout_party", slot_party_commander_party, -1),
    (troop_get_slot, ":var_3", ":var_0", slot_troop_banner_scene_prop),
    (try_begin),
        (gt, ":var_3", 0),
        (val_sub, ":var_3", "spr_banner_a"),
        (val_add, ":var_3", "icon_banner_01"),
        (party_set_banner_icon, "$pout_party", ":var_3"),
    (try_end),
    (try_begin),
        (troop_slot_eq, ":var_0", slot_troop_spawned_before, 0),
        (troop_set_slot, ":var_0", slot_troop_spawned_before, 1),
        (assign, ":var_4", 20),
        (try_begin),
            (store_troop_faction, ":var_5", ":var_0"),
            (faction_slot_eq, ":var_5", slot_faction_leader, ":var_0"),
            (assign, ":var_4", 50),
        (try_end),
        (try_for_range, ":var_6", 0, ":var_4"),
            (call_script, "script_hire_men_to_kingdom_hero_party", ":var_0"),
        (try_end),
        (try_begin),
            (faction_get_slot, ":var_7", ":var_5", slot_faction_culture),
            (faction_get_slot, ":var_8", ":var_7", 101),
            (store_random_in_range, ":var_9", 2, 7),
            (party_add_members, "$pout_party", ":var_8", ":var_9"),
        (try_end),
    (try_end),

]),

("create_kingdom_party_if_below_limit",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (call_script, "script_count_parties_of_faction_and_party_type", ":var_0", ":var_1"),
    (assign, ":var_2", reg0),
    (assign, ":var_3", 0),
    (faction_get_slot, ":var_4", ":var_0", slot_faction_num_towns),
    (try_begin),
        (eq, ":var_1", 7),
        (try_begin),
            (eq, ":var_0", "fac_papacy"),
            (assign, ":var_3", 6),
        (else_try),
            (eq, ":var_4", 0),
            (assign, ":var_3", 0),
        (else_try),
            (eq, ":var_4", 1),
            (assign, ":var_3", 1),
        (else_try),
            (ge, ":var_4", 2),
            (assign, ":var_3", 0),
        (try_end),
    (else_try),
        (eq, ":var_1", 11),
        (try_begin),
            (eq, ":var_4", 0),
            (assign, ":var_3", 0),
        (else_try),
            (eq, ":var_4", 1),
            (assign, ":var_3", 1),
        (else_try),
            (store_mul, ":var_5", ":var_4", 1),
            (assign, ":var_3", ":var_5"),
        (try_end),
    (else_try),
        (eq, ":var_1", 12),
        (try_begin),
            (eq, ":var_4", 0),
            (assign, ":var_3", 0),
        (else_try),
            (eq, ":var_4", 1),
            (assign, ":var_3", 1),
        (else_try),
            (store_mul, ":var_5", ":var_4", 2),
            (assign, ":var_3", ":var_5"),
        (try_end),
    (try_end),
    (assign, reg0, -1),
    (try_begin),
        (neg|ge, ":var_2", ":var_3"),
        (call_script, "script_cf_create_kingdom_party", ":var_0", ":var_1"),
    (try_end),

]),

("cf_create_kingdom_party",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (str_store_faction_name, s7, ":var_0"),
    (assign, ":var_2", "str_no_string"),
    (faction_get_slot, ":var_3", ":var_0", slot_faction_reinforcements_a),
    (faction_get_slot, ":var_4", ":var_0", slot_faction_reinforcements_b),
    (try_begin),
        (eq, ":var_1", 7),
        (assign, ":var_5", "pt_patrol_party"),
    (else_try),
        (eq, ":var_1", 11),
        (assign, ":var_5", "pt_kingdom_caravan_party"),
    (else_try),
        (eq, ":var_1", 12),
        (assign, ":var_5", "pt_prisoner_train_party"),
    (try_end),
    (assign, ":var_6", -1),
    (try_begin),
        (try_begin),
            (eq, ":var_1", 11),
            (call_script, "script_cf_select_random_town_with_faction", ":var_0", -1),
            (set_spawn_radius, 0),
        (else_try),
            (call_script, "script_cf_select_random_walled_center_with_faction", ":var_0", -1),
            (set_spawn_radius, 1),
        (try_end),
        (assign, ":var_7", reg0),
        (is_between, ":var_7", "p_town_1_1", "p_salt_mine"),
        (spawn_around_party, ":var_7", ":var_5"),
        (assign, ":var_6", reg0),
        (party_set_faction, ":var_6", ":var_0"),
        (try_begin),
            (this_or_next|eq, ":var_1", 7),
            (this_or_next|eq, ":var_1", 12),
            (eq, ":var_1", 11),
            (party_set_slot, ":var_6", slot_party_home_center, ":var_7"),
            (party_set_slot, ":var_6", slot_party_last_traded_center, ":var_7"),
        (try_end),
        (party_set_slot, ":var_6", slot_party_type, ":var_1"),
        (party_set_slot, ":var_6", slot_party_ai_state, -1),
        (try_begin),
            (neg|eq, ":var_2", "str_no_string"),
            (party_set_name, ":var_6", ":var_2"),
        (try_end),
        (try_begin),
            (eq, ":var_1", 7),
            (try_begin),
                (eq, ":var_0", "fac_player_supporters_faction"),
                (party_get_slot, ":var_8", ":var_7", slot_center_original_faction),
                (faction_get_slot, ":var_3", ":var_8", slot_faction_reinforcements_a),
                (faction_get_slot, ":var_4", ":var_8", slot_faction_reinforcements_b),
            (try_end),
            (party_add_template, ":var_6", ":var_3"),
            (party_add_template, ":var_6", ":var_3"),
            (party_add_template, ":var_6", ":var_3"),
            (party_add_template, ":var_6", ":var_4"),
            (party_add_template, ":var_6", ":var_3"),
            (party_add_template, ":var_6", ":var_4"),
            (party_add_template, ":var_6", ":var_3"),
            (party_add_template, ":var_6", ":var_4"),
            (party_set_slot, ":var_6", slot_party_ai_object, ":var_7"),
        (else_try),
            (eq, ":var_1", 11),
            (try_begin),
                (eq, ":var_0", "fac_player_supporters_faction"),
                (party_get_slot, ":var_8", ":var_7", slot_center_original_faction),
                (faction_get_slot, ":var_4", ":var_8", slot_faction_reinforcements_b),
            (try_end),
            (call_script, "script_get_random_merc_company_from_center", ":var_7"),
            (assign, ":var_9", reg0),
            (party_add_template, ":var_6", ":var_9"),
            (party_add_template, ":var_6", ":var_9"),
            (party_set_ai_behavior, ":var_6", 1),
            (party_set_ai_object, ":var_6", ":var_7"),
            (party_set_flags, ":var_6", 65536, 1),
            (store_sub, ":var_10", 250, "itm_spice"),
            (try_for_range, ":var_11", "itm_spice", "itm_siege_supply"),
                (store_add, ":var_12", ":var_11", ":var_10"),
                (party_set_slot, ":var_6", ":var_12", 1000),
            (try_end),
        (else_try),
            (eq, ":var_1", 12),
            (party_add_template, ":var_6", ":var_4"),
            (party_add_template, ":var_6", ":var_3"),
            (party_add_template, ":var_6", ":var_3"),
            (try_begin),
                (call_script, "script_cf_faction_get_random_enemy_faction", ":var_0"),
                (store_random_in_range, ":var_13", 0, 3),
                (try_begin),
                    (neg|ge, ":var_13", 1),
                    (faction_get_slot, ":var_14", reg0, slot_faction_reinforcements_b),
                (else_try),
                    (faction_get_slot, ":var_14", reg0, slot_faction_reinforcements_a),
                (try_end),
                (party_add_template, ":var_6", ":var_14", 1),
            (else_try),
                (party_add_template, ":var_6", "pt_default_prisoners"),
            (try_end),
            (party_set_ai_behavior, ":var_6", 1),
            (party_set_ai_object, ":var_6", ":var_7"),
            (party_set_flags, ":var_6", 65536, 1),
        (try_end),
    (try_end),
    (ge, ":var_6", 0),
    (assign, reg0, ":var_6"),

]),

("get_troop_attached_party",
[
    (store_script_param_1, ":var_0"),
    (troop_get_slot, ":var_1", ":var_0", slot_troop_leaded_party),
    (assign, ":var_2", -1),
    (try_begin),
        (ge, ":var_1", 0),
        (party_get_attached_to, ":var_2", ":var_1"),
    (try_end),
    (assign, reg0, ":var_2"),

]),

("center_get_food_consumption",
[
    (store_script_param_1, ":var_0"),
    (assign, ":var_1", 0),
    (try_begin),
        (party_slot_eq, ":var_0", slot_party_type, 3),
        (assign, ":var_1", 500),
    (else_try),
        (party_slot_eq, ":var_0", slot_party_type, 2),
        (assign, ":var_1", 50),
    (try_end),
    (assign, reg0, ":var_1"),

]),

("center_get_food_store_limit",
[
    (store_script_param_1, ":var_0"),
    (assign, ":var_1", 0),
    (try_begin),
        (party_slot_eq, ":var_0", slot_party_type, 3),
        (assign, ":var_1", 50000),
    (else_try),
        (party_slot_eq, ":var_0", slot_party_type, 2),
        (assign, ":var_1", 1500),
    (try_end),
    (val_div, ":var_1", 4),
    (assign, reg0, ":var_1"),

]),

("refresh_village_merchant_inventory",
[
    (store_script_param_1, ":var_0"),
    (party_get_slot, ":var_1", ":var_0", slot_town_elder),
    (reset_item_probabilities, 0),
    (assign, ":var_2", 0),
    (try_for_range, ":var_3", "itm_spice", "itm_siege_supply"),
        (call_script, "script_center_get_production", ":var_0", ":var_3"),
        (assign, ":var_4", reg0),
        (val_max, ":var_4", 5),
        (val_add, ":var_2", ":var_4"),
    (try_end),
    (try_begin),
        (party_get_slot, ":var_5", ":var_0", slot_town_prosperity),
        (val_div, ":var_5", 15),
        (store_add, ":var_6", ":var_5", 1),
    (try_end),
    (try_for_range, ":var_3", "itm_spice", "itm_siege_supply"),
        (call_script, "script_center_get_production", ":var_0", ":var_3"),
        (assign, ":var_4", reg0),
        (val_max, ":var_4", 5),
        (val_mul, ":var_4", ":var_6"),
        (val_mul, ":var_4", 100),
        (val_div, ":var_4", ":var_2"),
        (set_item_probability_in_merchandise, ":var_3", ":var_4"),
    (try_end),
    (troop_clear_inventory, ":var_1"),
    (troop_add_merchandise, ":var_1", 11, ":var_6"),
    (troop_ensure_inventory_space, ":var_1", 80),
    (store_troop_gold, ":var_7", ":var_1"),
    (try_begin),
        (gt, ":var_7", 3500),
        (store_div, ":var_8", ":var_7", 3000),
        (store_mul, ":var_9", ":var_8", 3000),
        (troop_remove_gold, ":var_1", ":var_9"),
        (call_script, "script_change_center_prosperity", ":var_0", ":var_8"),
    (try_end),

]),

("refresh_village_defenders",
[
    (store_script_param_1, ":var_0"),
    (assign, ":var_1", 50),
    (try_begin),
        (party_get_num_companions, ":var_2", ":var_0"),
        (neg|ge, ":var_2", ":var_1"),
        (party_add_template, ":var_0", "pt_village_defenders"),
    (try_end),

]),

("village_set_state",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (try_begin),
        (eq, ":var_1", 0),
        (party_set_extra_text, ":var_0", "str_empty_string"),
        (party_set_slot, ":var_0", slot_village_raided_by, -1),
    (else_try),
        (eq, ":var_1", 1),
        (party_set_extra_text, ":var_0", "@(Being Raided)"),
    (else_try),
        (eq, ":var_1", 2),
        (party_set_extra_text, ":var_0", "@(Looted)"),
        (party_set_slot, ":var_0", slot_village_raided_by, -1),
        (call_script, "script_change_center_prosperity", ":var_0", -60),
        (val_add, "$newglob_total_prosperity_from_villageloot", -60),
        (party_get_slot, ":var_2", ":var_0", slot_village_bound_center),
        (try_begin),
            (is_between, ":var_2", "p_town_1_1", "p_castle_1_1"),
            (call_script, "script_change_center_prosperity", ":var_2", -30),
        (else_try),
            (gt, ":var_2", 0),
            (call_script, "script_change_center_prosperity", ":var_2", -20),
        (try_end),
        (try_begin),
            (eq, 5, 0),
            (party_get_slot, ":var_3", ":var_0", slot_town_lord),
            (is_between, ":var_3", "trp_npc1", "trp_knight_1_1_wife"),
            (store_troop_faction, ":var_4", ":var_3"),
            (faction_get_slot, ":var_5", ":var_4", slot_faction_leader),
            (call_script, "script_troop_change_relation_with_troop", ":var_3", ":var_5", -1),
            (val_add, "$total_battle_ally_changes", -1),
        (try_end),
    (else_try),
        (eq, ":var_1", 5),
        (party_set_extra_text, ":var_0", "@(Under Siege)"),
        (try_for_parties, ":var_6"),
            (gt, ":var_6", "p_spawn_points_end"),
            (party_slot_eq, ":var_6", slot_party_type, 11),
            (party_slot_eq, ":var_6", slot_party_ai_object, ":var_0"),
            (party_get_slot, ":var_7", ":var_6", slot_party_last_traded_center),
            (store_faction_of_party, ":var_8", ":var_6"),
            (call_script, "script_cf_select_most_profitable_town_at_peace_with_faction_in_trade_route", ":var_7", ":var_8"),
            (assign, ":var_9", reg0),
            (is_between, ":var_9", "p_town_1_1", "p_salt_mine"),
            (party_set_ai_behavior, ":var_6", 1),
            (party_set_ai_object, ":var_6", ":var_9"),
            (party_set_flags, ":var_6", 65536, 0),
            (party_set_slot, ":var_6", slot_party_ai_state, 13),
            (party_set_slot, ":var_6", slot_party_ai_object, ":var_9"),
        (try_end),
    (try_end),
    (party_set_slot, ":var_0", slot_village_state, ":var_1"),

]),

("process_village_raids",
[
    (try_for_range, ":var_0", "p_village_1_1", "p_salt_mine"),
        (party_get_slot, ":var_1", ":var_0", slot_village_raid_progress),
        (try_begin),
            (party_slot_eq, ":var_0", slot_village_state, 0),
            (val_sub, ":var_1", 5),
            (val_max, ":var_1", 0),
            (party_set_slot, ":var_0", slot_village_raid_progress, ":var_1"),
            (try_begin),
                (neg|ge, ":var_1", 50),
                (party_slot_ge, ":var_0", slot_village_smoke_added, 1),
                (party_set_slot, ":var_0", slot_village_smoke_added, 0),
                (party_clear_particle_systems, ":var_0"),
            (try_end),
        (else_try),
            (party_slot_eq, ":var_0", slot_village_state, 1),
            (assign, ":var_2", 1),
            (party_get_slot, ":var_3", ":var_0", slot_village_raided_by),
            (try_begin),
                (ge, ":var_3", 0),
                (party_is_active, ":var_3"),
                (this_or_next|neg|eq, ":var_3", "p_main_party"),
                (eq, "$g_player_is_captive", 0),
                (store_distance_to_party_from_party, ":var_4", ":var_0", ":var_3"),
                (neg|ge, ":var_4", 4),
                (assign, ":var_2", 0),
            (try_end),
            (try_begin),
                (eq, ":var_2", 1),
                (call_script, "script_village_set_state", ":var_0", 0),
                (party_set_slot, ":var_0", slot_village_smoke_added, 0),
                (party_clear_particle_systems, ":var_0"),
            (else_try),
                (assign, ":var_5", 11),
                (party_get_slot, ":var_6", ":var_0", slot_village_raided_by),
                (try_begin),
                    (party_get_skill_level, ":var_7", ":var_6", "skl_looting"),
                    (val_add, ":var_5", ":var_7"),
                (try_end),
                (try_begin),
                    (party_slot_eq, ":var_0", slot_center_has_watch_tower, 1),
                    (val_mul, ":var_5", 2),
                    (val_div, ":var_5", 3),
                (try_end),
                (val_add, ":var_1", ":var_5"),
                (party_set_slot, ":var_0", slot_village_raid_progress, ":var_1"),
                (try_begin),
                    (ge, ":var_1", 50),
                    (party_slot_eq, ":var_0", slot_village_smoke_added, 0),
                    (party_add_particle_system, ":var_0", "psys_map_village_fire"),
                    (party_add_particle_system, ":var_0", "psys_map_village_fire_smoke"),
                    (party_set_slot, ":var_0", slot_village_smoke_added, 1),
                (try_end),
                (try_begin),
                    (gt, ":var_1", 100),
                    (str_store_party_name_link, s1, ":var_0"),
                    (party_stack_get_troop_id, ":var_8", ":var_6", 0),
                    (ge, ":var_8", 0),
                    (str_store_party_name, s2, ":var_6"),
                    (store_troop_faction, ":var_9", ":var_8"),
                    (store_relation, ":var_10", ":var_9", "$players_kingdom"),
                    (try_begin),
                        (this_or_next|neg|ge, ":var_10", 0),
                        (eq, ":var_9", "$players_kingdom"),
                        (display_log_message, "@The village of {s1} has been looted by {s2}."),
                    (try_end),
                    (try_begin),
                        (party_get_slot, ":var_11", ":var_0", slot_town_lord),
                        (is_between, ":var_11", "trp_npc1", "trp_knight_1_1_wife"),
                        (call_script, "script_troop_change_relation_with_troop", ":var_8", ":var_11", -1),
                        (val_add, "$total_battle_enemy_changes", -1),
                    (try_end),
                    (troop_get_slot, ":var_12", ":var_8", slot_troop_wealth),
                    (party_get_slot, ":var_13", ":var_0"),
                    (store_mul, ":var_14", ":var_13", 60),
                    (val_add, ":var_12", ":var_14"),
                    (troop_set_slot, ":var_8", slot_troop_wealth, ":var_12"),
                    (try_begin),
                        (is_between, ":var_11", "trp_npc1", "trp_knight_1_1_wife"),
                        (troop_get_slot, ":var_15", ":var_11", slot_troop_wealth),
                        (val_sub, ":var_15", ":var_14"),
                        (val_max, ":var_15", 0),
                        (troop_set_slot, ":var_11", slot_troop_wealth, ":var_15"),
                    (try_end),
                    (call_script, "script_village_set_state", ":var_0", 2),
                    (party_set_slot, ":var_0", slot_center_accumulated_rents, 0),
                    (party_set_slot, ":var_0", slot_center_accumulated_tariffs, 0),
                    (party_set_slot, ":var_0", slot_village_raid_progress, 0),
                    (party_set_slot, ":var_0", slot_village_recover_progress, 0),
                    (try_begin),
                        (store_faction_of_party, ":var_16", ":var_0"),
                        (this_or_next|party_slot_eq, ":var_0", slot_town_lord, "trp_player"),
                        (eq, ":var_16", "fac_player_supporters_faction"),
                        (call_script, "script_add_notification_menu", "mnu_notification_village_raided", ":var_0", ":var_8"),
                    (try_end),
                    (call_script, "script_add_log_entry", 1, ":var_8", ":var_0", -1, -1),
                    (store_faction_of_party, ":var_17", ":var_6"),
                    (call_script, "script_faction_inflict_war_damage_on_faction", ":var_17", ":var_16", 15),
                (try_end),
            (try_end),
        (else_try),
            (party_slot_eq, ":var_0", slot_village_state, 2),
            (party_get_slot, ":var_18", ":var_0", slot_village_recover_progress),
            (val_add, ":var_18", 1),
            (party_set_slot, ":var_0", slot_village_recover_progress, ":var_18"),
            (try_begin),
                (ge, ":var_18", 10),
                (party_slot_eq, ":var_0", slot_village_smoke_added, 1),
                (party_clear_particle_systems, ":var_0"),
                (party_add_particle_system, ":var_0", "psys_map_village_looted_smoke"),
                (party_set_slot, ":var_0", slot_village_smoke_added, 2),
            (try_end),
            (try_begin),
                (gt, ":var_18", 50),
                (party_slot_eq, ":var_0", slot_village_smoke_added, 2),
                (party_clear_particle_systems, ":var_0"),
                (party_set_slot, ":var_0", slot_village_smoke_added, 3),
            (try_end),
            (try_begin),
                (gt, ":var_18", 100),
                (call_script, "script_village_set_state", ":var_0", 0),
                (party_set_slot, ":var_0", slot_village_recover_progress, 0),
                (party_clear_particle_systems, ":var_0"),
                (party_set_slot, ":var_0", slot_village_smoke_added, 0),
            (try_end),
        (try_end),
    (try_end),

]),

("process_sieges",
[
    (try_for_range, ":var_0", "p_town_1_1", "p_village_1_1"),
        (party_get_slot, ":var_1", ":var_0", slot_center_siege_hardness),
        (val_sub, ":var_1", 20),
        (val_max, ":var_1", 0),
        (party_set_slot, ":var_0", slot_center_siege_hardness, ":var_1"),
        (party_get_slot, ":var_2", ":var_0", slot_party_food_store),
        (call_script, "script_center_get_food_store_limit", ":var_0"),
        (assign, ":var_3", reg0),
        (try_begin),
            (party_get_slot, ":var_4", ":var_0", slot_center_is_besieged_by),
            (ge, ":var_4", 0),
            (try_begin),
                (try_begin),
                    (is_between, ":var_0", "p_castle_1_1", "p_village_1_1"),
                    (store_random_in_range, ":var_5", 0, 3),
                    (try_begin),
                        (eq, ":var_5", 0),
                        (assign, ":var_6", -1),
                    (else_try),
                        (assign, ":var_6", 0),
                    (try_end),
                (else_try),
                    (assign, ":var_6", -4),
                (try_end),
                (call_script, "script_change_center_prosperity", ":var_0", ":var_6"),
                (val_add, "$newglob_total_prosperity_from_townloot", ":var_6"),
            (try_end),
            (store_faction_of_party, ":var_7", ":var_0"),
            (assign, ":var_8", 0),
            (try_begin),
                (try_begin),
                    (neg|party_is_active, ":var_4"),
                    (assign, ":var_8", 1),
                (else_try),
                    (store_distance_to_party_from_party, ":var_9", ":var_0", ":var_4"),
                    (gt, ":var_9", 5),
                    (assign, ":var_8", 1),
                (else_try),
                    (neg|party_slot_eq, ":var_0", slot_village_infested_by_bandits, "trp_peasant_woman"),
                    (store_faction_of_party, ":var_10", ":var_4"),
                    (store_relation, ":var_11", ":var_10", ":var_7"),
                    (ge, ":var_11", 0),
                    (assign, ":var_8", 1),
                (try_end),
                (eq, ":var_8", 1),
                (try_for_range, ":var_12", "trp_npc1", "trp_knight_1_1_wife"),
                    (troop_slot_eq, ":var_12", slot_troop_occupation, 2),
                    (troop_get_slot, ":var_13", ":var_12", slot_troop_leaded_party),
                    (ge, ":var_13", 0),
                    (party_is_active, ":var_13"),
                    (store_faction_of_party, ":var_14", ":var_13"),
                    (store_relation, ":var_11", ":var_14", ":var_7"),
                    (neg|ge, ":var_11", 0),
                    (store_distance_to_party_from_party, ":var_15", ":var_0", ":var_13"),
                    (neg|ge, ":var_15", 4),
                    (assign, ":var_4", ":var_13"),
                    (party_set_slot, ":var_0", slot_center_is_besieged_by, ":var_13"),
                    (assign, ":var_8", 0),
                (try_end),
            (try_end),
            (try_begin),
                (eq, ":var_8", 1),
                (call_script, "script_lift_siege", ":var_0", 1),
            (else_try),
                (call_script, "script_center_get_food_consumption", ":var_0"),
                (assign, ":var_16", reg0),
                (val_sub, ":var_2", ":var_16"),
                (try_begin),
                    (neg|gt, ":var_2", 0),
                    (store_random_in_range, ":var_17", 0, 10),
                    (gt, ":var_17", 0),
                    (call_script, "script_party_inflict_attrition", ":var_0", ":var_17"),
                (try_end),
            (try_end),
        (else_try),
            (val_add, ":var_2", 30),
        (try_end),
        (val_min, ":var_2", ":var_3"),
        (val_max, ":var_2", 0),
        (party_set_slot, ":var_0", slot_party_food_store, ":var_2"),
    (try_end),

]),

("lift_siege",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (party_set_slot, ":var_0", slot_center_is_besieged_by, -1),
    (call_script, "script_village_set_state", ":var_0", 0),
    (try_begin),
        (eq, ":var_0", "$g_player_besiege_town"),
        (assign, "$g_siege_method", 0),
    (try_end),
    (try_begin),
        (eq, ":var_1", 1),
        (str_store_party_name_link, s3, ":var_0"),
        (display_message, "@{s3} is no longer under siege."),
    (try_end),

]),

("process_alarms_new",
[
    (store_script_param, ":var_0", 1),
    (try_begin),
        (party_set_slot, ":var_0", slot_center_last_spotted_enemy, -1),
        (party_set_slot, ":var_0", slot_center_sortie_strength, 0),
        (party_set_slot, ":var_0", slot_center_sortie_enemy_strength, 0),
        (assign, ":var_1", 3),
        (try_begin),
            (is_currently_night),
            (assign, ":var_1", 2),
        (try_end),
        (try_begin),
            (party_slot_eq, ":var_0", slot_center_has_watch_tower, 1),
            (val_mul, ":var_1", 2),
        (else_try),
            (neg|is_between, ":var_0", "p_village_1_1", "p_salt_mine"),
            (val_add, ":var_1", 1),
            (val_mul, ":var_1", 2),
        (try_end),
        (store_faction_of_party, ":var_2", ":var_0"),
        (try_for_parties, ":var_3"),
            (this_or_next|party_slot_eq, ":var_3", slot_party_type, 13),
            (eq, ":var_3", "p_main_party"),
            (store_faction_of_party, ":var_4", ":var_3"),
            (try_begin),
                (eq, ":var_3", "p_main_party"),
                (assign, ":var_4", "$players_kingdom"),
            (try_end),
            (try_begin),
                (eq, ":var_4", ":var_2"),
                (store_distance_to_party_from_party, ":var_5", ":var_3", ":var_0"),
                (neg|gt, ":var_5", ":var_1"),
                (party_get_slot, ":var_6", ":var_3", slot_party_cached_strength),
                (party_get_slot, ":var_7", ":var_0", slot_center_sortie_strength),
                (val_add, ":var_7", ":var_6"),
                (party_set_slot, ":var_0", slot_center_sortie_strength, ":var_7"),
            (else_try),
                (neg|eq, ":var_4", ":var_2"),
                (store_distance_to_party_from_party, ":var_5", ":var_3", ":var_0"),
                (try_begin),
                    (neg|ge, ":var_5", 10),
                    (store_current_hours, ":var_8"),
                    (store_sub, ":var_9", ":var_4", "fac_player_supporters_faction"),
                    (val_add, ":var_9", 350),
                    (party_set_slot, ":var_0", ":var_9", ":var_8"),
                (try_end),
                (store_relation, ":var_10", ":var_2", ":var_4"),
                (neg|ge, ":var_10", 0),
                (try_begin),
                    (neg|gt, ":var_5", ":var_1"),
                    (party_get_slot, ":var_6", ":var_3", slot_party_cached_strength),
                    (party_get_slot, ":var_11", ":var_0", slot_center_sortie_enemy_strength),
                    (val_add, ":var_11", ":var_6"),
                    (party_set_slot, ":var_0", slot_center_sortie_enemy_strength, ":var_11"),
                    (party_set_slot, ":var_0", slot_center_last_spotted_enemy, ":var_3"),
                (try_end),
            (try_end),
        (try_end),
    (try_end),
    (try_begin),
        (try_begin),
            (is_between, ":var_0", "p_town_1_1", "p_village_1_1"),
            (party_slot_ge, ":var_0", slot_center_last_spotted_enemy, 0),
            (party_get_slot, ":var_7", ":var_0", slot_center_sortie_strength),
            (party_get_slot, ":var_11", ":var_0", slot_center_sortie_enemy_strength),
            (party_get_battle_opponent, ":var_12", ":var_0"),
            (try_begin),
                (ge, "$cheat_mode", 1),
                (ge, ":var_12", 0),
                (str_store_party_name, s7, ":var_0"),
                (str_store_party_name, s6, ":var_12"),
                (display_message, "@{!}DEBUG : There are already enemies ({s6}) inside {s7}."),
            (try_end),
            (neg|ge, ":var_12", 0),
            (try_begin),
                (eq, "$cheat_mode", 1),
                (str_store_party_name, s4, ":var_0"),
                (assign, reg3, ":var_7"),
                (assign, reg4, ":var_11"),
                (display_message, "@{!}DEBUG -- Calculating sortie for {s4} strength of {reg3} vs {reg4} enemies"),
            (try_end),
            (store_mul, ":var_13", ":var_11", 14),
            (val_div, ":var_13", 10),
            (gt, ":var_7", ":var_13"),
            (assign, ":var_14", 0),
            (try_for_parties, ":var_15"),
                (party_get_attached_to, ":var_16", ":var_15"),
                (eq, ":var_16", ":var_0"),
                (party_slot_eq, ":var_15", slot_party_type, 13),
                (party_get_slot, ":var_6", ":var_15", slot_party_cached_strength),
                (ge, ":var_6", 100),
                (party_detach, ":var_15"),
                (call_script, "script_party_set_ai_state", ":var_15", 4, ":var_0"),
                (try_begin),
                    (eq, "$cheat_mode", 1),
                    (str_store_party_name, s4, ":var_15"),
                    (display_message, "str_s4_sorties"),
                (try_end),
                (eq, ":var_14", 0),
                (assign, ":var_14", ":var_15"),
            (try_end),
            (try_begin),
                (party_is_in_town, "p_main_party", ":var_0"),
                (eq, "$g_player_is_captive", 0),
                (gt, ":var_14", 0),
                (call_script, "script_add_notification_menu", "mnu_notification_sortie_possible", ":var_0", ":var_15"),
            (try_end),
        (try_end),
        (store_faction_of_party, ":var_2", ":var_0"),
        (this_or_next|eq, "$cheat_mode", 1),
        (this_or_next|party_slot_eq, ":var_0", slot_town_lord, "trp_player"),
        (eq, ":var_2", "$players_kingdom"),
        (party_get_slot, ":var_17", ":var_0", slot_center_last_spotted_enemy),
        (ge, ":var_17", 0),
        (store_distance_to_party_from_party, ":var_18", "p_main_party", ":var_0"),
        (assign, ":var_19", 0),
        (try_begin),
            (this_or_next|party_slot_eq, ":var_0", slot_town_lord, "trp_player"),
            (eq, ":var_2", "fac_player_supporters_faction"),
            (party_slot_eq, ":var_0", slot_center_has_messenger_post, 1),
            (assign, ":var_19", 1),
        (try_end),
        (this_or_next|eq, "$cheat_mode", 1),
        (this_or_next|neg|ge, ":var_18", 30),
        (eq, ":var_19", 1),
        (str_store_party_name_link, s1, ":var_0"),
        (party_get_slot, ":var_20", ":var_0", slot_center_sortie_enemy_strength),
        (val_div, ":var_20", 25),
        (try_begin),
            (neg|ge, ":var_20", 500),
            (display_message, "@Small bands of enemies spotted near {s1}."),
        (else_try),
            (neg|ge, ":var_20", 1000),
            (display_message, "@Enemy patrols spotted near {s1}."),
        (else_try),
            (neg|ge, ":var_20", 2000),
            (display_message, "@Medium-sized group of enemies spotted near {s1}."),
        (else_try),
            (neg|ge, ":var_20", 4000),
            (display_message, "@Significant group of enemies spotted near {s1}."),
        (else_try),
            (neg|ge, ":var_20", 8000),
            (display_message, "@Army of enemies spotted near {s1}."),
        (else_try),
            (neg|ge, ":var_20", 16000),
            (display_message, "@Large army of enemies spotted near {s1}."),
        (else_try),
            (display_message, "@Great host of enemies spotted near {s1}."),
        (try_end),
    (try_end),

]),

("process_alarms",
[
    (assign, ":var_0", 60),
    (assign, ":var_1", "$g_alarm_modula"),
    (val_add, "$g_alarm_modula", 1),
    (try_begin),
        (ge, "$g_alarm_modula", ":var_0"),
        (assign, "$g_alarm_modula", 0),
    (try_end),
    (try_for_range, ":var_2", "p_town_1_1", "p_salt_mine"),
        (store_mod, ":var_3", ":var_2", ":var_0"),
        (eq, ":var_3", ":var_1"),
        (party_set_slot, ":var_2", slot_center_last_spotted_enemy, -1),
        (party_set_slot, ":var_2", slot_center_sortie_strength, 0),
        (party_set_slot, ":var_2", slot_center_sortie_enemy_strength, 0),
        (assign, ":var_4", 3),
        (try_begin),
            (is_currently_night),
            (assign, ":var_4", 2),
        (try_end),
        (try_begin),
            (party_slot_eq, ":var_2", slot_center_has_watch_tower, 1),
            (val_mul, ":var_4", 2),
        (else_try),
            (neg|is_between, ":var_2", "p_village_1_1", "p_salt_mine"),
            (val_add, ":var_4", 1),
            (val_mul, ":var_4", 2),
        (try_end),
        (store_faction_of_party, ":var_5", ":var_2"),
        (try_for_parties, ":var_6"),
            (this_or_next|party_slot_eq, ":var_6", slot_party_type, 13),
            (eq, ":var_6", "p_main_party"),
            (store_faction_of_party, ":var_7", ":var_6"),
            (try_begin),
                (eq, ":var_6", "p_main_party"),
                (assign, ":var_7", "$players_kingdom"),
            (try_end),
            (try_begin),
                (eq, ":var_7", ":var_5"),
                (store_distance_to_party_from_party, ":var_8", ":var_6", ":var_2"),
                (neg|gt, ":var_8", ":var_4"),
                (party_get_slot, ":var_9", ":var_6", slot_party_cached_strength),
                (party_get_slot, ":var_10", ":var_2", slot_center_sortie_strength),
                (val_add, ":var_10", ":var_9"),
                (party_set_slot, ":var_2", slot_center_sortie_strength, ":var_10"),
            (else_try),
                (neg|eq, ":var_7", ":var_5"),
                (store_distance_to_party_from_party, ":var_8", ":var_6", ":var_2"),
                (try_begin),
                    (neg|ge, ":var_8", 10),
                    (store_current_hours, ":var_11"),
                    (store_sub, ":var_12", ":var_7", "fac_player_supporters_faction"),
                    (val_add, ":var_12", 350),
                    (party_set_slot, ":var_2", ":var_12", ":var_11"),
                (try_end),
                (store_relation, ":var_13", ":var_5", ":var_7"),
                (neg|ge, ":var_13", 0),
                (try_begin),
                    (neg|gt, ":var_8", ":var_4"),
                    (party_get_slot, ":var_9", ":var_6", slot_party_cached_strength),
                    (party_get_slot, ":var_14", ":var_2", slot_center_sortie_enemy_strength),
                    (val_add, ":var_14", ":var_9"),
                    (party_set_slot, ":var_2", slot_center_sortie_enemy_strength, ":var_14"),
                    (party_set_slot, ":var_2", slot_center_last_spotted_enemy, ":var_6"),
                (try_end),
            (try_end),
        (try_end),
    (try_end),
    (try_for_range, ":var_2", "p_town_1_1", "p_salt_mine"),
        (store_mod, ":var_3", ":var_2", ":var_0"),
        (eq, ":var_3", ":var_1"),
        (try_begin),
            (is_between, ":var_2", "p_town_1_1", "p_village_1_1"),
            (party_slot_ge, ":var_2", slot_center_last_spotted_enemy, 0),
            (party_get_slot, ":var_10", ":var_2", slot_center_sortie_strength),
            (party_get_slot, ":var_14", ":var_2", slot_center_sortie_enemy_strength),
            (party_get_battle_opponent, ":var_15", ":var_2"),
            (try_begin),
                (ge, "$cheat_mode", 1),
                (ge, ":var_15", 0),
                (str_store_party_name, s7, ":var_2"),
                (str_store_party_name, s6, ":var_15"),
                (display_message, "@{!}DEBUG : There are already enemies ({s6}) inside {s7}."),
            (try_end),
            (neg|ge, ":var_15", 0),
            (try_begin),
                (eq, "$cheat_mode", 1),
                (str_store_party_name, s4, ":var_2"),
                (assign, reg3, ":var_10"),
                (assign, reg4, ":var_14"),
                (display_message, "@{!}DEBUG -- Calculating sortie for {s4} strength of {reg3} vs {reg4} enemies"),
            (try_end),
            (store_mul, ":var_16", ":var_14", 14),
            (val_div, ":var_16", 10),
            (gt, ":var_10", ":var_16"),
            (assign, ":var_17", 0),
            (try_for_parties, ":var_18"),
                (party_get_attached_to, ":var_19", ":var_18"),
                (eq, ":var_19", ":var_2"),
                (party_slot_eq, ":var_18", slot_party_type, 13),
                (party_get_slot, ":var_9", ":var_18", slot_party_cached_strength),
                (ge, ":var_9", 100),
                (party_detach, ":var_18"),
                (call_script, "script_party_set_ai_state", ":var_18", 4, ":var_2"),
                (try_begin),
                    (eq, "$cheat_mode", 1),
                    (str_store_party_name, s4, ":var_18"),
                    (display_message, "str_s4_sorties"),
                (try_end),
                (eq, ":var_17", 0),
                (assign, ":var_17", ":var_18"),
            (try_end),
            (try_begin),
                (party_is_in_town, "p_main_party", ":var_2"),
                (eq, "$g_player_is_captive", 0),
                (gt, ":var_17", 0),
                (call_script, "script_add_notification_menu", "mnu_notification_sortie_possible", ":var_2", ":var_18"),
            (try_end),
        (try_end),
        (store_faction_of_party, ":var_5", ":var_2"),
        (this_or_next|eq, "$cheat_mode", 1),
        (this_or_next|party_slot_eq, ":var_2", slot_town_lord, "trp_player"),
        (eq, ":var_5", "$players_kingdom"),
        (party_get_slot, ":var_20", ":var_2", slot_center_last_spotted_enemy),
        (ge, ":var_20", 0),
        (store_distance_to_party_from_party, ":var_21", "p_main_party", ":var_2"),
        (assign, ":var_22", 0),
        (try_begin),
            (this_or_next|party_slot_eq, ":var_2", slot_town_lord, "trp_player"),
            (eq, ":var_5", "fac_player_supporters_faction"),
            (party_slot_eq, ":var_2", slot_center_has_messenger_post, 1),
            (assign, ":var_22", 1),
        (try_end),
        (this_or_next|eq, "$cheat_mode", 1),
        (this_or_next|neg|ge, ":var_21", 30),
        (eq, ":var_22", 1),
        (str_store_party_name_link, s1, ":var_2"),
        (party_get_slot, ":var_23", ":var_2", slot_center_sortie_enemy_strength),
        (val_div, ":var_23", 25),
        (try_begin),
            (neg|ge, ":var_23", 500),
            (display_message, "@Small bands of enemies spotted near {s1}."),
        (else_try),
            (neg|ge, ":var_23", 1000),
            (display_message, "@Enemy patrols spotted near {s1}."),
        (else_try),
            (neg|ge, ":var_23", 2000),
            (display_message, "@Medium-sized group of enemies spotted near {s1}."),
        (else_try),
            (neg|ge, ":var_23", 4000),
            (display_message, "@Significant group of enemies spotted near {s1}."),
        (else_try),
            (neg|ge, ":var_23", 8000),
            (display_message, "@Army of enemies spotted near {s1}."),
        (else_try),
            (neg|ge, ":var_23", 16000),
            (display_message, "@Large army of enemies spotted near {s1}."),
        (else_try),
            (display_message, "@Great host of enemies spotted near {s1}."),
        (try_end),
    (try_end),

]),

("allow_vassals_to_join_indoor_battle",
[
    (try_for_range, ":var_0", "trp_npc1", "trp_knight_1_1_wife"),
        (troop_slot_eq, ":var_0", slot_troop_occupation, 2),
        (neg|troop_slot_ge, ":var_0", slot_troop_prisoner_of_party, 0),
        (troop_get_slot, ":var_1", ":var_0", slot_troop_leaded_party),
        (gt, ":var_1", 0),
        (party_is_active, ":var_1"),
        (party_get_attached_to, ":var_2", ":var_1"),
        (neg|ge, ":var_2", 0),
        (store_troop_faction, ":var_3", ":var_0"),
        (try_begin),
            (party_slot_eq, ":var_1", slot_party_ai_state, 11),
            (party_get_slot, ":var_4", ":var_1", slot_party_ai_object),
            (gt, ":var_4", 0),
            (party_is_active, ":var_4"),
            (assign, ":var_5", -1),
            (try_begin),
                (party_slot_eq, ":var_4", slot_party_ai_state, 7),
                (party_get_slot, ":var_6", ":var_4", slot_party_ai_object),
                (party_get_battle_opponent, ":var_7", ":var_6"),
                (party_is_active, ":var_7"),
                (assign, ":var_5", ":var_6"),
                (assign, ":var_6", ":var_7"),
            (else_try),
                (party_slot_eq, ":var_4", slot_party_ai_state, 10),
                (party_get_slot, ":var_6", ":var_4", slot_party_ai_object),
                (ge, ":var_6", 0),
                (neg|is_between, ":var_6", "p_town_1_1", "p_salt_mine"),
                (party_is_active, ":var_6"),
                (party_get_battle_opponent, ":var_5", ":var_6"),
            (else_try),
                (assign, ":var_5", -1),
            (try_end),
            (is_between, ":var_5", "p_town_1_1", "p_village_1_1"),
            (party_get_attached_to, ":var_8", ":var_4"),
            (eq, ":var_8", ":var_5"),
            (store_faction_of_party, ":var_9", ":var_5"),
            (eq, ":var_9", ":var_3"),
            (party_is_active, ":var_6"),
            (call_script, "script_party_set_ai_state", ":var_1", 10, ":var_6"),
            (try_begin),
                (eq, "$cheat_mode", 1),
                (str_store_party_name, s7, ":var_1"),
                (str_store_party_name, s6, ":var_6"),
                (display_message, "@{!}DEBUG : {s7} is helping his commander by fighting with {s6}."),
            (try_end),
        (else_try),
            (party_slot_eq, ":var_1", slot_party_ai_state, 11),
            (party_get_slot, ":var_4", ":var_1", slot_party_ai_object),
            (gt, ":var_4", 0),
            (party_is_active, ":var_4"),
            (party_get_battle_opponent, ":var_5", ":var_4"),
            (is_between, ":var_5", "p_town_1_1", "p_village_1_1"),
            (party_get_attached_to, ":var_8", ":var_1"),
            (neg|eq, ":var_8", ":var_5"),
            (party_is_active, ":var_5"),
            (call_script, "script_party_set_ai_state", ":var_1", 10, ":var_5"),
        (try_end),
    (try_end),

]),

("party_set_ai_state",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (party_get_slot, ":var_3", ":var_0", slot_party_ai_state),
    (party_get_slot, ":var_4", ":var_0", slot_party_ai_object),
    (party_get_attached_to, ":var_5", ":var_0"),
    (assign, ":var_6", 0),
    (try_begin),
        (is_between, ":var_5", "p_town_1_1", "p_salt_mine"),
        (assign, ":var_6", ":var_5"),
    (try_end),
    (assign, ":var_7", -1),
    (try_begin),
        (party_is_active, ":var_0"),
        (party_stack_get_troop_id, ":var_7", ":var_0", 0),
        (store_faction_of_party, ":var_8", ":var_0"),
    (try_end),
    (try_begin),
        (neg|ge, ":var_7", 0),
    (else_try),
        (try_begin),
            (is_between, ":var_6", "p_town_1_1", "p_village_1_1"),
            (party_slot_eq, ":var_6", slot_center_is_besieged_by, -1),
            (call_script, "script_troop_does_business_in_center", ":var_7", ":var_6"),
        (else_try),
            (party_slot_eq, ":var_0", slot_party_ai_state, 16),
            (party_get_slot, ":var_9", ":var_0", slot_party_ai_object),
            (is_between, ":var_9", "p_village_1_1", "p_salt_mine"),
            (neg|party_slot_eq, ":var_9", slot_village_state, 1),
            (neg|party_slot_eq, ":var_9", slot_village_state, 2),
            (store_distance_to_party_from_party, ":var_10", ":var_0", ":var_9"),
            (neg|ge, ":var_10", 3),
            (call_script, "script_troop_does_business_in_center", ":var_7", ":var_9"),
        (try_end),
        (party_set_slot, ":var_0", slot_party_follow_me, 0),
        (try_begin),
            (eq, ":var_3", ":var_1"),
            (eq, ":var_4", ":var_2"),
        (else_try),
            (assign, ":var_11", 100),
            (assign, ":var_12", 8),
            (assign, ":var_13", 8),
            (try_begin),
                (this_or_next|eq, ":var_1", 11),
                (eq, ":var_1", 12),
                (party_set_ai_behavior, ":var_0", 10),
                (party_set_ai_object, ":var_0", ":var_2"),
                (party_set_flags, ":var_0", 65536, 0),
                (try_begin),
                    (gt, ":var_6", 0),
                    (party_detach, ":var_0"),
                (try_end),
                (try_begin),
                    (eq, ":var_1", 12),
                    (assign, ":var_12", 9),
                    (assign, ":var_13", 9),
                    (assign, ":var_11", 80),
                (else_try),
                    (assign, ":var_12", 6),
                    (assign, ":var_13", 9),
                    (assign, ":var_11", 10),
                (try_end),
            (else_try),
                (eq, ":var_1", 1),
                (party_get_position, pos1, ":var_2"),
                (map_get_random_position_around_position, 2, pos1, pos2),
                (party_set_ai_behavior, ":var_0", 6),
                (party_set_ai_target_position, ":var_0", pos2),
                (party_set_ai_object, ":var_0", ":var_2"),
                (party_set_flags, ":var_0", 65536, 0),
                (party_set_slot, ":var_0", slot_party_follow_me, 1),
                (party_set_slot, ":var_0", slot_party_ai_substate, 0),
                (try_begin),
                    (gt, ":var_6", 0),
                    (neg|eq, ":var_6", ":var_2"),
                    (party_detach, ":var_0"),
                (try_end),
                (assign, ":var_12", 1),
                (assign, ":var_13", 9),
                (assign, ":var_11", 20),
            (else_try),
                (eq, ":var_1", 7),
                (party_set_ai_behavior, ":var_0", 1),
                (party_set_ai_object, ":var_0", ":var_2"),
                (party_set_flags, ":var_0", 65536, 0),
                (try_begin),
                    (gt, ":var_6", 0),
                    (neg|eq, ":var_6", ":var_2"),
                    (party_detach, ":var_0"),
                (try_end),
                (assign, ":var_12", 7),
                (assign, ":var_13", 9),
                (assign, ":var_11", 100),
            (else_try),
                (eq, ":var_1", 4),
                (party_get_position, pos1, ":var_2"),
                (map_get_random_position_around_position, 2, pos1, pos1),
                (party_set_ai_behavior, ":var_0", 6),
                (party_set_ai_target_position, ":var_0", pos2),
                (party_set_ai_object, ":var_0", ":var_2"),
                (try_begin),
                    (faction_slot_eq, ":var_8", slot_faction_ai_state, 5),
                    (party_set_ai_patrol_radius, ":var_0", 1),
                (else_try),
                    (party_set_ai_patrol_radius, ":var_0", 5),
                (try_end),
                (party_set_flags, ":var_0", 65536, 0),
                (party_set_slot, ":var_0", slot_party_follow_me, 1),
                (party_set_slot, ":var_0", slot_party_ai_substate, 0),
                (try_begin),
                    (gt, ":var_6", 0),
                    (party_detach, ":var_0"),
                (try_end),
                (try_begin),
                    (ge, ":var_7", 0),
                    (faction_slot_eq, ":var_8", slot_faction_marshall, ":var_7"),
                    (faction_slot_eq, ":var_8", slot_faction_ai_state, 5),
                    (party_get_position, pos3, ":var_0"),
                    (get_distance_between_positions, ":var_14", pos1, pos3),
                    (try_begin),
                        (ge, ":var_14", 800),
                        (assign, ":var_11", 10),
                        (assign, ":var_12", 1),
                        (assign, ":var_13", 8),
                    (else_try),
                        (assign, ":var_11", 100),
                        (assign, ":var_12", 8),
                        (assign, ":var_13", 8),
                    (try_end),
                (else_try),
                    (assign, ":var_12", 8),
                    (assign, ":var_13", 8),
                    (assign, ":var_11", 100),
                (try_end),
            (else_try),
                (eq, ":var_1", 16),
                (party_get_position, pos1, ":var_2"),
                (map_get_random_position_around_position, 2, pos1, pos2),
                (party_set_ai_behavior, ":var_0", 6),
                (party_set_ai_target_position, ":var_0", pos2),
                (party_set_ai_object, ":var_0", ":var_2"),
                (party_set_flags, ":var_0", 65536, 0),
                (party_set_slot, ":var_0", slot_party_ai_substate, 0),
                (try_begin),
                    (gt, ":var_6", 0),
                    (neg|eq, ":var_6", ":var_2"),
                    (party_detach, ":var_0"),
                (try_end),
                (assign, ":var_12", 8),
                (assign, ":var_13", 8),
                (assign, ":var_11", 100),
            (else_try),
                (eq, ":var_1", 5),
                (party_get_position, pos1, ":var_2"),
                (map_get_random_position_around_position, 2, pos1, pos1),
                (party_set_ai_behavior, ":var_0", 2),
                (party_set_ai_patrol_radius, ":var_0", 10),
                (party_set_ai_target_position, ":var_0", pos2),
                (party_set_ai_object, ":var_0", ":var_2"),
                (party_set_flags, ":var_0", 65536, 0),
                (party_set_slot, ":var_0", slot_party_follow_me, 1),
                (party_set_slot, ":var_0", slot_party_ai_substate, 0),
                (try_begin),
                    (gt, ":var_6", 0),
                    (neg|eq, ":var_6", ":var_2"),
                    (party_detach, ":var_0"),
                (try_end),
                (try_begin),
                    (ge, ":var_7", 0),
                    (faction_slot_eq, ":var_8", slot_faction_marshall, ":var_7"),
                    (assign, ":var_12", 1),
                    (assign, ":var_13", 8),
                    (assign, ":var_11", 20),
                (else_try),
                    (assign, ":var_12", 7),
                    (assign, ":var_13", 8),
                    (assign, ":var_11", 100),
                (try_end),
            (else_try),
                (eq, ":var_1", 10),
                (party_set_ai_behavior, ":var_0", 4),
                (party_set_ai_object, ":var_0", ":var_2"),
                (party_set_flags, ":var_0", 65536, 0),
                (try_begin),
                    (gt, ":var_6", 0),
                    (party_detach, ":var_0"),
                (try_end),
                (try_begin),
                    (ge, ":var_7", 0),
                    (faction_slot_eq, ":var_8", slot_faction_marshall, ":var_7"),
                    (faction_slot_eq, ":var_8", slot_faction_ai_state, 5),
                    (assign, ":var_11", 10),
                    (assign, ":var_12", 1),
                    (assign, ":var_13", 8),
                (else_try),
                    (assign, ":var_12", 8),
                    (assign, ":var_13", 8),
                    (assign, ":var_11", 100),
                (try_end),
            (else_try),
                (eq, ":var_1", 14),
                (party_set_ai_behavior, ":var_0", 1),
                (party_set_ai_object, ":var_0", ":var_2"),
                (party_set_flags, ":var_0", 65536, 1),
                (party_set_slot, ":var_0", slot_party_commander_party, -1),
                (try_begin),
                    (gt, ":var_6", 0),
                    (neg|eq, ":var_6", ":var_2"),
                    (party_detach, ":var_0"),
                (try_end),
                (assign, ":var_12", 3),
                (assign, ":var_13", 4),
                (assign, ":var_11", 100),
            (else_try),
                (eq, ":var_1", -1),
                (party_set_ai_behavior, ":var_0", 0),
                (party_set_flags, ":var_0", 65536, 0),
            (try_end),
            (try_begin),
                (troop_slot_eq, ":var_7", slot_lord_reputation_type, 1),
                (val_add, ":var_12", 2),
                (val_add, ":var_13", 2),
            (else_try),
                (troop_slot_eq, ":var_7", slot_lord_reputation_type, 5),
                (val_sub, ":var_12", 1),
                (val_sub, ":var_13", 1),
            (try_end),
            (party_set_slot, ":var_0", slot_party_ai_state, ":var_1"),
            (party_set_slot, ":var_0", slot_party_ai_object, ":var_2"),
            (party_set_aggressiveness, ":var_0", ":var_12"),
            (party_set_courage, ":var_0", ":var_13"),
            (party_set_ai_initiative, ":var_0", ":var_11"),
        (try_end),
    (try_end),
    (try_begin),
        (ge, ":var_7", 0),
        (party_set_helpfulness, ":var_0", 101),
        (try_begin),
            (party_slot_eq, ":var_0", slot_party_ai_state, 11),
            (party_set_helpfulness, ":var_0", 10000),
        (else_try),
            (troop_slot_eq, ":var_7", slot_lord_reputation_type, 1),
            (party_set_helpfulness, ":var_0", 200),
        (else_try),
            (troop_slot_eq, ":var_7", slot_lord_reputation_type, 7),
            (party_set_helpfulness, ":var_0", 150),
        (else_try),
            (troop_slot_eq, ":var_7", slot_lord_reputation_type, 2),
            (party_set_helpfulness, ":var_0", 90),
        (else_try),
            (troop_slot_eq, ":var_7", slot_lord_reputation_type, 3),
            (party_set_helpfulness, ":var_0", 80),
        (else_try),
            (troop_slot_eq, ":var_7", slot_lord_reputation_type, 5),
            (party_set_helpfulness, ":var_0", 50),
        (try_end),
    (try_end),

]),

("cf_party_under_player_suggestion",
[
    (store_script_param, ":var_0", 1),
    (party_slot_eq, ":var_0", slot_party_following_orders_of_troop, "trp_kingdom_heroes_including_player_begin"),
    (party_get_slot, ":var_1", ":var_0", slot_party_ai_state),
    (party_slot_eq, ":var_0", slot_party_orders_type, ":var_1"),
    (party_get_slot, ":var_2", ":var_0", slot_party_ai_object),
    (party_slot_eq, ":var_0", slot_party_orders_object, ":var_2"),
    (store_current_hours, ":var_3"),
    (party_get_slot, ":var_4", ":var_0", slot_party_orders_time),
    (val_sub, ":var_3", ":var_4"),
    (neg|ge, ":var_3", 12),

]),

("troop_does_business_in_center",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (troop_get_slot, ":var_2", ":var_0", slot_troop_leaded_party),
    (store_current_hours, ":var_3"),
    (try_begin),
        (is_between, ":var_1", "p_town_1_1", "p_village_1_1"),
        (party_set_slot, ":var_2", slot_party_last_in_any_center, ":var_3"),
        (try_begin),
            (call_script, "script_lord_get_home_center", ":var_0"),
            (eq, ":var_1", reg0),
            (party_set_slot, ":var_2", slot_party_last_in_home_center, ":var_3"),
        (try_end),
    (try_end),
    (try_begin),
        (party_slot_eq, ":var_1", slot_town_lord, ":var_0"),
        (party_get_slot, ":var_4", ":var_1", slot_center_accumulated_rents),
        (party_get_slot, ":var_5", ":var_1", slot_center_accumulated_tariffs),
        (troop_get_slot, ":var_6", ":var_0", slot_troop_wealth),
        (val_add, ":var_6", ":var_4"),
        (val_add, ":var_6", ":var_5"),
        (troop_set_slot, ":var_0", slot_troop_wealth, ":var_6"),
        (party_set_slot, ":var_1", slot_center_accumulated_rents, 0),
        (party_set_slot, ":var_1", slot_center_accumulated_tariffs, 0),
        (try_begin),
            (this_or_next|eq, "$cheat_mode", 1),
            (eq, "$cheat_mode", 3),
            (assign, reg1, ":var_6"),
            (str_store_party_name, s4, ":var_1"),
            (add_troop_note_from_sreg, ":var_0", 1, "str_current_wealth_reg1_taxes_last_collected_from_s4", 0),
        (try_end),
    (try_end),
    (try_begin),
        (is_between, ":var_1", "p_village_1_1", "p_salt_mine"),
        (party_get_slot, ":var_7", ":var_1", 88),
        (party_get_slot, ":var_8", ":var_1", 89),
        (party_set_slot, ":var_1", 89, -1),
        (party_add_members, ":var_2", ":var_7", ":var_8"),
    (try_end),
    (try_begin),
        (party_get_slot, ":var_9", ":var_2", slot_party_leader_last_courted),
        (store_sub, ":var_10", ":var_3", ":var_9"),
        (gt, ":var_10", 72),
        (store_troop_faction, ":var_11", ":var_0"),
        (troop_slot_eq, ":var_0", slot_troop_spouse, -1),
        (try_for_range, ":var_12", 35, 38),
            (neg|eq, ":var_11", "fac_kingdom_1"),
            (troop_get_slot, ":var_13", ":var_0", ":var_12"),
            (gt, ":var_13", 0),
            (troop_get_slot, ":var_14", ":var_13", slot_troop_cur_center),
            (eq, ":var_1", ":var_14"),
            (call_script, "script_courtship_event_troop_court_lady", ":var_0", ":var_13"),
            (party_set_slot, ":var_2", slot_party_leader_last_courted, ":var_3"),
        (try_end),
    (try_end),

]),

("process_kingdom_parties_ai",
[
    (try_for_range, ":var_0", "trp_npc1", "trp_knight_1_1_wife"),
        (troop_slot_eq, ":var_0", slot_troop_occupation, 2),
        (neg|troop_slot_ge, ":var_0", slot_troop_prisoner_of_party, 0),
        (troop_get_slot, ":var_1", ":var_0", slot_troop_leaded_party),
        (gt, ":var_1", 0),
        (call_script, "script_process_hero_ai", ":var_0"),
    (try_end),

]),

("process_hero_ai",
[
    (store_script_param_1, ":var_0"),
    (troop_get_slot, ":var_1", ":var_0", slot_troop_leaded_party),
    (try_begin),
        (party_is_active, ":var_1"),
        (store_faction_of_party, ":var_2", ":var_1"),
        (party_get_slot, ":var_3", ":var_1", slot_party_ai_state),
        (party_get_slot, ":var_4", ":var_1", slot_party_ai_object),
        (try_begin),
            (eq, ":var_3", 1),
            (try_begin),
                (party_slot_eq, ":var_4", slot_center_is_besieged_by, -1),
                (store_distance_to_party_from_party, ":var_5", ":var_1", ":var_4"),
                (neg|ge, ":var_5", 3),
                (try_begin),
                    (party_slot_eq, ":var_1", slot_party_ai_state, 11),
                    (party_get_slot, ":var_6", ":var_1", slot_party_ai_object),
                    (party_set_slot, ":var_4", slot_center_is_besieged_by, ":var_6"),
                (else_try),
                    (party_set_slot, ":var_4", slot_center_is_besieged_by, ":var_1"),
                (try_end),
                (store_current_hours, ":var_7"),
                (party_set_slot, ":var_4", slot_center_siege_begin_hours, ":var_7"),
                (str_store_party_name_link, s1, ":var_4"),
                (str_store_troop_name_link, s2, ":var_0"),
                (str_store_faction_name_link, s3, ":var_2"),
                (store_faction_of_party, ":var_8", ":var_4"),
                (assign, ":var_9", "$g_ai_kingdom"),
                (assign, "$g_ai_kingdom", ":var_8"),
                (call_script, "script_recalculate_ais"),
                (assign, "$g_ai_kingdom", ":var_9"),
                (try_begin),
                    (store_faction_of_party, ":var_8", ":var_4"),
                    (this_or_next|party_slot_eq, ":var_4", slot_town_lord, "trp_player"),
                    (eq, ":var_8", "fac_player_supporters_faction"),
                    (call_script, "script_add_notification_menu", "mnu_notification_center_under_siege", ":var_4", ":var_0"),
                (try_end),
                (call_script, "script_village_set_state", ":var_4", 5),
                (store_faction_of_party, ":var_8", ":var_4"),
                (assign, "$g_recalculate_ais", 1),
            (try_end),
        (else_try),
            (eq, ":var_3", 5),
            (party_slot_eq, ":var_1", slot_party_ai_substate, 0),
            (assign, ":var_10", 0),
            (try_for_range, ":var_11", "p_village_1_1", "p_salt_mine"),
                (eq, ":var_10", 0),
                (store_faction_of_party, ":var_12", ":var_11"),
                (try_begin),
                    (party_slot_eq, ":var_11", slot_town_lord, "trp_player"),
                    (store_relation, ":var_13", "fac_player_supporters_faction", ":var_2"),
                (else_try),
                    (store_relation, ":var_13", ":var_12", ":var_2"),
                (try_end),
                (neg|ge, ":var_13", 0),
                (store_distance_to_party_from_party, ":var_14", ":var_11", ":var_1"),
                (neg|ge, ":var_14", 15),
                (party_slot_eq, ":var_11", slot_village_state, 0),
                (assign, ":var_10", ":var_11"),
            (try_end),
            (try_begin),
                (eq, ":var_10", 0),
                (is_between, ":var_4", "p_village_1_1", "p_salt_mine"),
                (assign, ":var_10", ":var_4"),
            (try_end),
            (try_begin),
                (gt, ":var_10", 0),
                (call_script, "script_party_set_ai_state", ":var_1", 5, ":var_10"),
                (try_begin),
                    (faction_slot_eq, ":var_2", slot_faction_marshall, ":var_0"),
                    (faction_slot_eq, ":var_2", slot_faction_ai_state, 3),
                    (faction_set_slot, ":var_2", slot_faction_ai_object, ":var_10"),
                (try_end),
                (party_get_position, pos1, ":var_10"),
                (map_get_random_position_around_position, 2, pos1, pos1),
                (party_set_ai_behavior, ":var_1", 6),
                (party_set_ai_target_position, ":var_1", pos2),
                (party_set_ai_object, ":var_1", ":var_10"),
                (party_set_slot, ":var_1", slot_party_ai_substate, 1),
            (try_end),
        (else_try),
            (eq, ":var_3", 5),
            (try_begin),
                (store_distance_to_party_from_party, ":var_5", ":var_1", ":var_4"),
                (neg|ge, ":var_5", 2),
                (try_begin),
                    (party_slot_eq, ":var_4", slot_village_state, 0),
                    (call_script, "script_village_set_state", ":var_4", 1),
                    (party_set_slot, ":var_4", slot_village_raided_by, ":var_1"),
                    (try_begin),
                        (store_faction_of_party, ":var_15", ":var_4"),
                        (this_or_next|party_slot_eq, ":var_4", slot_town_lord, "trp_player"),
                        (eq, ":var_15", "fac_player_supporters_faction"),
                        (store_distance_to_party_from_party, ":var_14", "p_main_party", ":var_4"),
                        (this_or_next|neg|ge, ":var_14", 30),
                        (party_slot_eq, ":var_4", slot_center_has_messenger_post, 1),
                        (call_script, "script_add_notification_menu", "mnu_notification_village_raid_started", ":var_4", ":var_0"),
                    (try_end),
                (else_try),
                    (party_slot_eq, ":var_4", slot_village_state, 1),
                (else_try),
                    (party_set_slot, ":var_1", slot_party_ai_substate, 0),
                (try_end),
            (try_end),
        (else_try),
            (eq, ":var_3", 14),
            (try_begin),
                (party_get_battle_opponent, ":var_16", ":var_1"),
                (ge, ":var_16", 0),
                (call_script, "script_party_set_ai_state", ":var_1", -1, -1),
                (party_set_flags, ":var_1", 65536, 0),
                (party_set_slot, ":var_1", slot_party_commander_party, -1),
            (try_end),
        (else_try),
            (eq, ":var_3", 4),
            (try_begin),
                (party_slot_eq, ":var_1", slot_party_ai_substate, 0),
                (store_distance_to_party_from_party, ":var_5", ":var_1", ":var_4"),
                (neg|ge, ":var_5", 6),
                (party_set_slot, ":var_1", slot_party_ai_substate, 1),
                (party_set_aggressiveness, ":var_1", 8),
                (party_set_courage, ":var_1", 8),
                (party_set_ai_initiative, ":var_1", 100),
                (party_set_ai_behavior, ":var_1", 3),
                (party_set_ai_object, ":var_1", ":var_4"),
            (try_end),
        (else_try),
            (eq, ":var_3", 7),
        (try_end),
    (try_end),

]),

("begin_assault_on_center",
[
    (store_script_param, ":var_0", 1),
    (try_for_range, ":var_1", "trp_npc1", "trp_knight_1_1_wife"),
        (troop_slot_eq, ":var_1", slot_troop_occupation, 2),
        (neg|troop_slot_ge, ":var_1", slot_troop_prisoner_of_party, 0),
        (troop_get_slot, ":var_2", ":var_1", slot_troop_leaded_party),
        (gt, ":var_2", 0),
        (party_is_active, ":var_2"),
        (assign, ":var_3", 0),
        (try_begin),
            (party_slot_eq, ":var_2", slot_party_ai_state, 1),
            (party_slot_eq, ":var_2", slot_party_ai_object, ":var_0"),
            (party_slot_eq, ":var_2", slot_party_ai_substate, 0),
            (assign, ":var_3", 1),
        (else_try),
            (party_slot_eq, ":var_2", slot_party_ai_state, 11),
            (party_get_slot, ":var_4", ":var_2", slot_party_ai_object),
            (gt, ":var_4", 0),
            (party_is_active, ":var_4"),
            (party_slot_eq, ":var_4", slot_party_ai_state, 1),
            (party_slot_eq, ":var_4", slot_party_ai_object, ":var_0"),
            (call_script, "script_party_set_ai_state", ":var_2", 1, ":var_0"),
            (assign, ":var_3", 1),
        (try_end),
        (eq, ":var_3", 1),
        (party_set_ai_behavior, ":var_2", 4),
        (party_set_ai_object, ":var_2", ":var_0"),
        (party_set_flags, ":var_2", 65536, 1),
        (party_set_slot, ":var_2", slot_party_ai_substate, 1),
    (try_end),

]),

("select_faction_marshall",
[

]),

("get_center_faction_relation_including_player",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_faction_of_party, ":var_2", ":var_0"),
    (store_relation, ":var_3", ":var_2", ":var_1"),
    (try_begin),
        (party_slot_eq, ":var_0", slot_town_lord, "trp_player"),
        (store_relation, ":var_3", "fac_player_supporters_faction", ":var_1"),
    (try_end),
    (assign, reg0, ":var_3"),

]),

("update_report_to_army_quest_note",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (try_begin),
        (neg|gt, "$number_of_report_to_army_quest_notes", 13),
        (faction_get_slot, ":var_3", ":var_0", slot_faction_marshall),
        (try_begin),
            (eq, ":var_0", "$players_kingdom"),
            (neg|eq, ":var_1", ":var_2"),
            (check_quest_active, "qst_report_to_army"),
            (ge, ":var_3", 0),
            (str_store_troop_name_link, s11, ":var_3"),
            (store_current_hours, ":var_4"),
            (call_script, "script_game_get_date_text", 0, ":var_4"),
            (try_begin),
                (this_or_next|eq, ":var_1", 5),
                (this_or_next|eq, ":var_1", 2),
                (eq, ":var_1", 1),
                (faction_get_slot, ":var_5", ":var_0", slot_faction_ai_object),
                (ge, ":var_5", 0),
                (str_store_party_name_link, s21, ":var_5"),
            (try_end),
            (try_begin),
                (eq, ":var_1", 1),
                (try_begin),
                    (ge, "$g_gathering_reason", 0),
                    (str_store_party_name_link, s21, "$g_gathering_reason"),
                    (str_store_string, s14, "str_we_should_prepare_to_defend_s21_but_we_should_gather_our_forces_until_we_are_strong_enough_to_engage_them"),
                (else_try),
                    (str_store_string, s14, "str_it_is_time_to_go_on_the_offensive_and_we_must_first_assemble_the_army"),
                (try_end),
                (str_store_string, s14, "@({s1}) {s11}: {s14}"),
                (add_quest_note_from_sreg, "qst_report_to_army", "$number_of_report_to_army_quest_notes", 14, 0),
                (val_add, "$number_of_report_to_army_quest_notes", 1),
            (else_try),
                (eq, ":var_1", 5),
                (try_begin),
                    (is_between, ":var_5", "p_town_1_1", "p_village_1_1"),
                    (str_store_string, s14, "str_we_should_ride_to_break_the_siege_of_s21"),
                    (str_store_string, s14, "@({s1}) {s11}: {s14}"),
                    (add_quest_note_from_sreg, "qst_report_to_army", "$number_of_report_to_army_quest_notes", 14, 0),
                    (val_add, "$number_of_report_to_army_quest_notes", 1),
                (else_try),
                    (is_between, ":var_5", "p_village_1_1", "p_salt_mine"),
                    (str_store_string, s14, "str_we_should_ride_to_defeat_the_enemy_gathered_near_s21"),
                    (str_store_string, s14, "@({s1}) {s11}: {s14}"),
                    (add_quest_note_from_sreg, "qst_report_to_army", "$number_of_report_to_army_quest_notes", 14, 0),
                    (val_add, "$number_of_report_to_army_quest_notes", 1),
                (try_end),
            (else_try),
                (this_or_next|eq, ":var_1", 2),
                (eq, ":var_1", 3),
                (try_begin),
                    (is_between, ":var_5", "p_town_1_1", "p_village_1_1"),
                    (str_store_string, s14, "str_we_believe_the_fortress_will_be_worth_the_effort_to_take_it"),
                    (str_store_string, s14, "@{s14} ({s21})"),
                    (str_store_string, s14, "@({s1}) {s11}: {s14}"),
                    (add_quest_note_from_sreg, "qst_report_to_army", "$number_of_report_to_army_quest_notes", 14, 0),
                    (val_add, "$number_of_report_to_army_quest_notes", 1),
                (else_try),
                    (is_between, ":var_5", "p_village_1_1", "p_salt_mine"),
                    (str_store_string, s14, "str_we_shall_leave_a_fiery_trail_through_the_heart_of_the_enemys_lands_targeting_the_wealthy_settlements_if_we_can"),
                    (str_store_string, s14, "@{s14} ({s21})"),
                    (str_store_string, s14, "@({s1}) {s11}: {s14}"),
                    (add_quest_note_from_sreg, "qst_report_to_army", "$number_of_report_to_army_quest_notes", 14, 0),
                    (val_add, "$number_of_report_to_army_quest_notes", 1),
                (try_end),
            (try_end),
        (try_end),
    (try_end),

]),

("decide_faction_ai",
[
    (store_script_param_1, ":var_0"),
    (faction_get_slot, ":var_1", ":var_0", slot_faction_ai_state),
    (faction_get_slot, ":var_2", ":var_0", slot_faction_ai_object),
    (faction_get_slot, ":var_3", ":var_0", slot_faction_marshall),
    (try_begin),
        (faction_slot_eq, ":var_0", slot_faction_state, 0),
        (neg|eq, ":var_0", "fac_player_supporters_faction"),
        (ge, ":var_3", "trp_player"),
        (store_troop_faction, ":var_4", ":var_3"),
        (try_begin),
            (eq, ":var_3", "trp_player"),
            (assign, ":var_4", "$players_kingdom"),
        (try_end),
        (assign, ":var_5", 0),
        (try_begin),
            (eq, ":var_3", "trp_player"),
            (eq, "$g_player_is_captive", 1),
            (assign, ":var_5", 1),
        (try_end),
        (this_or_next|neg|eq, ":var_4", ":var_0"),
        (this_or_next|troop_slot_ge, ":var_3", slot_troop_days_on_mission, 80),
        (this_or_next|eq, ":var_5", 1),
        (troop_slot_ge, ":var_3", slot_troop_prisoner_of_party, 0),
        (assign, ":var_6", 0),
        (try_begin),
            (eq, ":var_3", "trp_player"),
            (assign, ":var_7", 0),
            (gt, "$g_player_days_as_marshal", 1),
            (try_for_range, ":var_8", "trp_npc1", "trp_knight_1_1_wife"),
                (troop_slot_eq, ":var_8", slot_troop_occupation, 2),
                (store_troop_faction, ":var_9", ":var_8"),
                (eq, ":var_9", ":var_0"),
                (call_script, "script_npc_decision_checklist_troop_follow_or_not", ":var_8"),
                (eq, reg0, 1),
                (val_add, ":var_7", 1),
            (try_end),
            (neg|ge, ":var_7", 4),
            (assign, ":var_6", 1),
        (try_end),
        (this_or_next|eq, ":var_1", 0),
        (this_or_next|eq, ":var_1", 6),
        (this_or_next|neg|eq, ":var_4", ":var_0"),
        (this_or_next|eq, ":var_6", 1),
        (this_or_next|eq, ":var_5", 1),
        (troop_slot_ge, ":var_3", slot_troop_prisoner_of_party, 0),
        (this_or_next|faction_slot_eq, ":var_0", slot_faction_political_issue, 0),
        (this_or_next|eq, ":var_5", 1),
        (troop_slot_ge, ":var_3", slot_troop_prisoner_of_party, 0),
        (faction_set_slot, ":var_0", slot_faction_political_issue, 1),
        (store_current_hours, ":var_10"),
        (val_max, ":var_10", 0),
        (faction_set_slot, ":var_0", slot_faction_political_issue_time, ":var_10"),
        (faction_get_slot, ":var_11", ":var_0", slot_faction_marshall),
        (try_begin),
            (ge, ":var_11", 0),
            (troop_get_slot, ":var_12", ":var_11", slot_troop_leaded_party),
            (party_is_active, ":var_12"),
            (party_set_marshall, ":var_12", 0),
        (try_end),
        (try_begin),
            (eq, "$players_kingdom", ":var_0"),
            (faction_slot_eq, "$players_kingdom", slot_faction_marshall, "trp_player"),
            (call_script, "script_add_notification_menu", "mnu_notification_relieved_as_marshal", 0, 0),
        (else_try),
            (neg|eq, ":var_11", "trp_player"),
            (call_script, "script_change_troop_renown", ":var_11", 15),
        (try_end),
        (faction_set_slot, ":var_0", slot_faction_marshall, -1),
        (assign, ":var_3", -1),
        (try_for_range, ":var_13", "trp_npc1", "trp_knight_1_1_wife"),
            (store_troop_faction, ":var_14", ":var_13"),
            (eq, ":var_14", ":var_0"),
            (troop_set_slot, ":var_13", slot_troop_stance_on_faction_issue, -1),
        (try_end),
        (try_begin),
            (eq, "$players_kingdom", ":var_0"),
            (troop_set_slot, "trp_player", slot_troop_stance_on_faction_issue, -1),
        (try_end),
    (else_try),
        (eq, ":var_3", -1),
        (neg|faction_slot_ge, ":var_0", slot_faction_political_issue, 1),
        (faction_slot_eq, ":var_0", slot_faction_state, 0),
        (neg|eq, ":var_0", "fac_player_supporters_faction"),
        (faction_set_slot, ":var_0", slot_faction_political_issue, 1),
        (store_current_hours, ":var_10"),
        (val_max, ":var_10", 0),
        (faction_set_slot, ":var_0", slot_faction_political_issue_time, ":var_10"),
        (try_for_range, ":var_13", "trp_npc1", "trp_knight_1_1_wife"),
            (store_troop_faction, ":var_14", ":var_13"),
            (eq, ":var_14", ":var_0"),
            (troop_set_slot, ":var_13", slot_troop_stance_on_faction_issue, -1),
        (try_end),
        (try_begin),
            (eq, "$players_kingdom", ":var_0"),
            (troop_set_slot, "trp_player", slot_troop_stance_on_faction_issue, -1),
        (try_end),
    (else_try),
        (eq, ":var_3", "trp_player"),
        (neg|eq, "$players_kingdom", ":var_0"),
        (faction_set_slot, ":var_0", slot_faction_political_issue, 1),
        (store_current_hours, ":var_10"),
        (val_max, ":var_10", 0),
        (faction_set_slot, ":var_0", slot_faction_political_issue_time, ":var_10"),
        (faction_get_slot, ":var_11", ":var_0", slot_faction_marshall),
        (try_begin),
            (ge, ":var_11", 0),
            (troop_get_slot, ":var_12", ":var_11", slot_troop_leaded_party),
            (party_is_active, ":var_12"),
            (party_set_marshall, ":var_12", 0),
        (try_end),
        (faction_set_slot, ":var_0", slot_faction_marshall, -1),
        (assign, ":var_3", -1),
        (try_for_range, ":var_13", "trp_npc1", "trp_knight_1_1_wife"),
            (store_troop_faction, ":var_14", ":var_13"),
            (eq, ":var_14", ":var_0"),
            (troop_set_slot, ":var_13", slot_troop_stance_on_faction_issue, -1),
        (try_end),
        (try_begin),
            (eq, "$players_kingdom", ":var_0"),
            (troop_set_slot, "trp_player", slot_troop_stance_on_faction_issue, -1),
        (try_end),
    (try_end),
    (try_begin),
        (faction_get_slot, ":var_15", ":var_0", slot_faction_political_issue),
        (is_between, ":var_15", "p_town_1_1", "p_salt_mine"),
        (store_faction_of_party, ":var_16", ":var_15"),
        (neg|eq, ":var_16", ":var_0"),
        (try_begin),
            (eq, "$cheat_mode", 1),
            (str_store_faction_name, s4, ":var_0"),
            (str_store_party_name, s5, ":var_16"),
            (display_message, "@{!}DEBUG -- {s4} drops {s5} as issue as it has changed hands"),
        (try_end),
        (faction_set_slot, ":var_0", slot_faction_political_issue, 0),
        (try_for_range, ":var_13", "trp_npc1", "trp_knight_1_1_wife"),
            (store_troop_faction, ":var_14", ":var_13"),
            (eq, ":var_14", ":var_0"),
            (troop_set_slot, ":var_13", slot_troop_stance_on_faction_issue, -1),
        (try_end),
        (try_begin),
            (eq, "$players_kingdom", ":var_0"),
            (troop_set_slot, "trp_player", slot_troop_stance_on_faction_issue, -1),
        (try_end),
    (try_end),
    (try_begin),
        (faction_slot_ge, ":var_0", slot_faction_political_issue, 1),
        (neg|eq, ":var_0", "fac_player_supporters_faction"),
        (this_or_next|faction_slot_ge, ":var_0", slot_faction_political_issue, "p_town_1_1"),
        (this_or_next|faction_slot_eq, ":var_0", slot_faction_ai_state, 0),
        (faction_slot_eq, ":var_0", slot_faction_ai_state, 6),
        (faction_get_slot, ":var_17", ":var_0", slot_faction_leader),
        (assign, ":var_18", 0),
        (assign, ":var_19", 0),
        (assign, ":var_20", -1),
        (troop_set_slot, "trp_player", slot_troop_temp_slot, 0),
        (try_for_range, ":var_13", "trp_npc1", "trp_knight_1_1_wife"),
            (troop_set_slot, ":var_13", slot_troop_temp_slot, 0),
        (try_end),
        (try_for_range, ":var_21", "trp_npc1", "trp_knight_1_1_wife"),
            (store_troop_faction, ":var_22", ":var_21"),
            (eq, ":var_22", ":var_0"),
            (val_add, ":var_18", 1),
            (troop_get_slot, ":var_23", ":var_21", slot_troop_stance_on_faction_issue),
            (gt, ":var_23", -1),
            (val_add, ":var_19", 1),
            (troop_get_slot, ":var_24", ":var_23", slot_troop_temp_slot),
            (val_add, ":var_24", 1),
            (troop_set_slot, ":var_23", slot_troop_temp_slot, ":var_24"),
            (try_begin),
                (gt, ":var_20", -1),
                (troop_get_slot, ":var_25", ":var_20", slot_troop_temp_slot),
                (gt, ":var_24", ":var_25"),
                (assign, ":var_20", ":var_23"),
            (else_try),
                (eq, ":var_20", -1),
                (assign, ":var_20", ":var_23"),
            (try_end),
        (try_end),
        (store_div, ":var_26", ":var_18", 5),
        (val_mul, ":var_26", 4),
        (store_current_hours, ":var_27"),
        (faction_get_slot, ":var_28", ":var_0", slot_faction_political_issue_time),
        (val_sub, ":var_27", ":var_28"),
        (this_or_next|gt, ":var_19", ":var_26"),
        (ge, ":var_27", 120),
        (try_begin),
            (eq, "$cheat_mode", 1),
            (assign, reg4, ":var_19"),
            (assign, reg5, ":var_26"),
            (assign, reg7, ":var_27"),
            (str_store_faction_name, s4, ":var_0"),
            (display_message, "@{!}DEBUG -- Issue resolution for {s4}: {reg4} votes for a quorum of {reg5}, {reg7} hours on agenda"),
        (try_end),
        (try_begin),
            (eq, "$cheat_mode", 1),
            (display_message, "@{!}DEBUG -- Faction resolves political issue"),
        (try_end),
        (assign, ":var_29", -1),
        (try_begin),
            (call_script, "script_troop_get_relation_with_troop", ":var_17", ":var_20"),
            (this_or_next|ge, reg0, 10),
            (this_or_next|troop_slot_eq, ":var_17", slot_troop_stance_on_faction_issue, ":var_20"),
            (troop_slot_eq, ":var_17", slot_troop_stance_on_faction_issue, -1),
            (assign, ":var_29", ":var_20"),
        (else_try),
            (gt, ":var_17", -1),
            (troop_get_slot, ":var_30", ":var_17", slot_troop_stance_on_faction_issue),
            (ge, ":var_30", -1),
            (assign, ":var_29", ":var_30"),
        (try_end),
        (try_begin),
            (eq, ":var_29", -1),
        (else_try),
            (eq, ":var_29", "trp_player"),
            (eq, "$players_kingdom", ":var_0"),
            (call_script, "script_add_notification_menu", "mnu_notification_player_faction_political_issue_resolved_for_player", 0, 0),
        (else_try),
            (eq, ":var_29", "trp_player"),
            (neg|eq, "$players_kingdom", ":var_0"),
            (try_begin),
                (eq, "$cheat_mode", 1),
                (str_store_faction_name, s4, ":var_0"),
                (str_store_party_name, s5, ":var_29"),
                (display_message, "@{!}DEBUG -- {s4} drops {s5} as winner, for having changed sides"),
            (try_end),
            (try_for_range, ":var_13", "trp_npc1", "trp_knight_1_1_wife"),
                (store_troop_faction, ":var_14", ":var_13"),
                (eq, ":var_14", ":var_0"),
                (troop_set_slot, ":var_13", slot_troop_stance_on_faction_issue, -1),
            (try_end),
            (try_begin),
                (eq, "$players_kingdom", ":var_0"),
                (troop_set_slot, "trp_player", slot_troop_stance_on_faction_issue, -1),
            (try_end),
        (else_try),
            (store_troop_faction, ":var_31", ":var_29"),
            (neg|eq, ":var_31", ":var_0"),
            (try_begin),
                (eq, "$cheat_mode", 1),
                (str_store_faction_name, s4, ":var_0"),
                (str_store_party_name, s5, ":var_29"),
                (display_message, "@{!}DEBUG -- {s4} drops {s5} as winner, for having changed sides"),
            (try_end),
            (try_for_range, ":var_13", "trp_npc1", "trp_knight_1_1_wife"),
                (store_troop_faction, ":var_14", ":var_13"),
                (eq, ":var_14", ":var_0"),
                (troop_set_slot, ":var_13", slot_troop_stance_on_faction_issue, -1),
            (try_end),
            (try_begin),
                (eq, "$players_kingdom", ":var_0"),
                (troop_set_slot, "trp_player", slot_troop_stance_on_faction_issue, -1),
            (try_end),
        (else_try),
            (faction_get_slot, ":var_32", ":var_0", slot_faction_political_issue),
            (try_begin),
                (eq, ":var_32", 1),
                (is_between, ":var_29", "trp_npc1", "trp_knight_1_1_wife"),
                (this_or_next|is_between, ":var_29", "trp_npc1", "trp_knight_1_1_wife"),
                (eq, "$players_kingdom", ":var_0"),
                (assign, ":var_3", ":var_29"),
            (else_try),
                (is_between, ":var_32", "p_town_1_1", "p_salt_mine"),
                (call_script, "script_give_center_to_lord", ":var_32", ":var_29", 0),
                (try_begin),
                    (eq, ":var_32", "$g_castle_requested_by_player"),
                    (party_slot_ge, ":var_32", slot_town_lord, "trp_npc1"),
                    (store_faction_of_party, ":var_33", ":var_32"),
                    (eq, ":var_33", "$players_kingdom"),
                    (assign, "$g_center_to_give_to_player", ":var_32"),
                    (try_begin),
                        (troop_get_slot, ":var_34", "trp_player", slot_troop_spouse),
                        (is_between, ":var_34", "trp_npc1", "trp_knight_1_1_wife"),
                        (eq, "$g_castle_requested_for_troop", ":var_34"),
                        (neg|eq, ":var_29", ":var_34"),
                        (jump_to_menu, "mnu_requested_castle_granted_to_another_female"),
                    (else_try),
                        (jump_to_menu, "mnu_requested_castle_granted_to_another"),
                    (try_end),
                (try_end),
            (try_end),
            (try_begin),
                (eq, ":var_0", "$players_kingdom"),
                (call_script, "script_add_notification_menu", "mnu_notification_player_faction_political_issue_resolved", ":var_32", ":var_29"),
            (try_end),
            (faction_set_slot, ":var_0", slot_faction_political_issue, 0),
            (try_for_range, ":var_13", "trp_npc1", "trp_knight_1_1_wife"),
                (store_troop_faction, ":var_14", ":var_13"),
                (eq, ":var_14", ":var_0"),
                (troop_set_slot, ":var_13", slot_troop_stance_on_faction_issue, -1),
            (try_end),
            (try_begin),
                (eq, "$players_kingdom", ":var_0"),
                (troop_set_slot, "trp_player", slot_troop_stance_on_faction_issue, -1),
            (try_end),
        (try_end),
    (try_end),
    (try_begin),
        (faction_get_slot, ":var_35", ":var_0", slot_faction_political_issue),
        (neg|gt, ":var_35", 0),
        (assign, ":var_36", 0),
        (assign, ":var_37", 0),
        (assign, ":var_38", 0),
        (troop_set_slot, "trp_player", slot_troop_temp_slot, 0),
        (try_for_range, ":var_13", "trp_npc1", "trp_knight_1_1_wife"),
            (troop_set_slot, ":var_13", slot_troop_temp_slot, 0),
        (try_end),
        (try_for_range, ":var_39", "p_town_1_1", "p_salt_mine"),
            (store_faction_of_party, ":var_40", ":var_39"),
            (eq, ":var_40", ":var_0"),
            (party_get_slot, ":var_41", ":var_39", slot_town_lord),
            (try_begin),
                (neg|ge, ":var_41", 0),
                (val_add, ":var_37", 1),
                (try_begin),
                    (eq, ":var_38", 0),
                    (assign, ":var_38", ":var_39"),
                (try_end),
            (else_try),
                (troop_set_slot, ":var_41", slot_troop_temp_slot, 1),
            (try_end),
        (try_end),
        (store_add, ":var_42", ":var_36", ":var_37"),
        (ge, ":var_42", 2),
        (faction_set_slot, ":var_0", slot_faction_political_issue, ":var_38"),
        (store_current_hours, ":var_10"),
        (faction_set_slot, ":var_0", slot_faction_political_issue_time, ":var_10"),
        (try_for_range, ":var_13", "trp_npc1", "trp_knight_1_1_wife"),
            (store_troop_faction, ":var_14", ":var_13"),
            (eq, ":var_14", ":var_0"),
            (troop_set_slot, ":var_13", slot_troop_stance_on_faction_issue, -1),
        (try_end),
        (try_begin),
            (eq, "$players_kingdom", ":var_0"),
            (troop_set_slot, "trp_player", slot_troop_stance_on_faction_issue, -1),
        (try_end),
    (try_end),
    (try_begin),
        (neg|faction_slot_eq, ":var_0", slot_faction_marshall, ":var_3"),
        (eq, "$players_kingdom", ":var_0"),
        (str_store_troop_name_link, s1, ":var_3"),
        (str_store_faction_name_link, s2, ":var_0"),
        (display_message, "@{s1} is the new marshal of {s2}."),
        (call_script, "script_check_and_finish_active_army_quests_for_faction", ":var_0"),
    (try_end),
    (try_begin),
        (neg|faction_slot_eq, ":var_0", slot_faction_marshall, ":var_3"),
        (gt, ":var_3", -1),
        (call_script, "script_appoint_faction_marshall", ":var_0", ":var_3"),
    (try_end),
    (try_begin),
        (eq, ":var_0", "$players_kingdom"),
        (eq, ":var_3", "trp_player"),
        (assign, ":var_43", "trp_player"),
    (else_try),
        (is_between, ":var_3", "trp_npc1", "trp_knight_1_1_wife"),
        (assign, ":var_43", ":var_3"),
    (else_try),
        (faction_get_slot, ":var_43", ":var_0", slot_faction_leader),
    (try_end),
    (call_script, "script_npc_decision_checklist_faction_ai_alt", ":var_43"),
    (assign, ":var_44", reg0),
    (assign, ":var_45", reg1),
    (try_begin),
        (neg|eq, ":var_44", ":var_1"),
        (eq, ":var_44", 1),
        (faction_get_slot, ":var_3", ":var_0", slot_faction_marshall),
        (troop_get_slot, ":var_46", ":var_3", slot_troop_leaded_party),
        (party_set_slot, ":var_46", slot_party_ai_object, -1),
        (assign, "$g_gathering_new_started", 1),
        (call_script, "script_npc_decision_checklist_party_ai", ":var_3"),
        (call_script, "script_party_set_ai_state", ":var_46", reg0, reg1),
        (assign, "$g_gathering_new_started", 0),
        (try_begin),
            (eq, ":var_0", "$players_kingdom"),
            (str_store_faction_name, s21, ":var_0"),
            (str_store_troop_name, s22, ":var_3"),
            (str_store_party_name, s23, reg1),
            (display_message, "@{s22}, the marshal of {s21}, decides to gather the army around {s23}.", 0xFF5E8BFF),
        (try_end),
    (else_try),
        (eq, ":var_44", ":var_1"),
        (eq, ":var_44", 1),
        (faction_get_slot, ":var_3", ":var_0", slot_faction_marshall),
        (troop_get_slot, ":var_46", ":var_3", slot_troop_leaded_party),
        (party_get_slot, ":var_47", ":var_46", slot_party_ai_object),
        (ge, ":var_47", 0),
        (store_distance_to_party_from_party, ":var_48", ":var_46", ":var_47"),
        (neg|gt, ":var_48", 5),
        (party_set_slot, ":var_46", slot_party_ai_object, -1),
    (try_end),
    (faction_set_slot, ":var_0", slot_faction_ai_state, ":var_44"),
    (faction_set_slot, ":var_0", slot_faction_ai_object, ":var_45"),
    (call_script, "script_update_report_to_army_quest_note", ":var_0", ":var_44", ":var_1"),
    (try_begin),
        (eq, ":var_44", 6),
        (store_current_hours, ":var_10"),
        (faction_set_slot, ":var_0", slot_faction_last_feast_concluded, ":var_10"),
        (try_begin),
            (eq, "$g_player_eligible_feast_center_no", ":var_45"),
            (assign, "$g_player_eligible_feast_center_no", -1),
        (try_end),
        (try_begin),
            (is_between, ":var_45", "p_town_1_1", "p_castle_1_1"),
            (party_set_slot, ":var_45", slot_town_has_tournament, 2),
        (try_end),
    (try_end),
    (try_begin),
        (neg|eq, ":var_44", ":var_1"),
        (try_begin),
            (ge, "$cheat_mode", 1),
            (str_store_faction_name, s5, ":var_0"),
            (display_message, "str_s5_decides_s14"),
        (try_end),
        (store_current_hours, ":var_10"),
        (faction_set_slot, ":var_0", slot_faction_ai_current_state_started, ":var_10"),
        (try_begin),
            (eq, ":var_1", 6),
            (call_script, "script_faction_conclude_feast", ":var_0", ":var_2"),
        (try_end),
        (try_begin),
            (eq, ":var_44", 6),
            (faction_get_slot, ":var_49", ":var_0", slot_faction_ai_object),
            (party_get_slot, ":var_50", ":var_49", slot_town_lord),
            (try_begin),
                (check_quest_active, "qst_wed_betrothed"),
                (quest_slot_eq, "qst_wed_betrothed", 6, ":var_50"),
                (neg|quest_slot_ge, "qst_wed_betrothed", 23, 362),
                (call_script, "script_add_notification_menu", "mnu_notification_player_wedding_day", ":var_50", ":var_49"),
            (else_try),
                (check_quest_active, "qst_wed_betrothed_female"),
                (quest_get_slot, ":var_51", "qst_wed_betrothed", 6),
                (store_troop_faction, ":var_52", ":var_51"),
                (eq, ":var_52", ":var_0"),
                (neg|quest_slot_ge, "qst_wed_betrothed", 23, 362),
                (call_script, "script_add_notification_menu", "mnu_notification_player_kingdom_holds_feast", ":var_50", ":var_49"),
            (else_try),
                (eq, "$players_kingdom", ":var_0"),
                (troop_slot_ge, "trp_player", slot_troop_renown, 150),
                (party_get_slot, ":var_50", ":var_49", slot_town_lord),
                (call_script, "script_add_notification_menu", "mnu_notification_player_kingdom_holds_feast", ":var_50", ":var_49"),
            (try_end),
        (try_end),
        (try_begin),
            (eq, ":var_1", 1),
            (is_between, ":var_44", 2, 6),
            (try_begin),
                (str_store_faction_name, s5, ":var_0"),
                (faction_get_slot, ":var_53", ":var_0", slot_faction_ai_object),
                (gt, ":var_53", 0),
                (str_store_party_name, s22, ":var_53"),
                (this_or_next|eq, ":var_0", "fac_player_supporters_faction"),
                (eq, ":var_0", "$players_kingdom"),
                (display_message, "@{s5} begins an offensive.  Curret target is {s22}", 0x2D81FF),
            (try_end),
            (try_begin),
                (assign, ":var_54", 0),
                (assign, ":var_55", -1),
                (assign, ":var_56", 30),
                (troop_get_slot, ":var_57", ":var_3", slot_troop_leaded_party),
                (party_is_active, ":var_57"),
                (try_for_range, ":var_58", "trp_npc1", "trp_knight_1_1_wife"),
                    (store_troop_faction, ":var_59", ":var_58"),
                    (eq, ":var_59", ":var_0"),
                    (troop_get_slot, ":var_60", ":var_58", slot_troop_leaded_party),
                    (party_is_active, ":var_60"),
                    (party_slot_eq, ":var_60", slot_party_ai_state, 11),
                    (party_slot_eq, ":var_60", slot_party_ai_object, ":var_57"),
                    (val_add, ":var_54", 1),
                    (try_begin),
                        (ge, "$cheat_mode", 1),
                        (str_store_party_name, s4, ":var_60"),
                        (display_message, "@{!}DEBUG -- {s4} participates in offensive"),
                    (try_end),
                    (store_party_size_wo_prisoners, ":var_61", ":var_60"),
                    (val_sub, ":var_61", 50),
                    (val_abs, ":var_61"),
                    (neg|ge, ":var_61", ":var_56"),
                    (assign, ":var_55", ":var_60"),
                    (assign, ":var_56", ":var_61"),
                (try_end),
                (gt, ":var_54", 2),
                (party_is_active, ":var_55"),
                (party_is_active, ":var_57"),
                (call_script, "script_party_set_ai_state", ":var_55", 12, ":var_57"),
                (try_begin),
                    (ge, "$cheat_mode", 1),
                    (str_store_party_name, s4, ":var_55"),
                    (display_message, "@{!}DEBUG -- {s4} chosen as screen"),
                (try_end),
            (try_end),
        (else_try),
            (store_current_hours, ":var_10"),
            (this_or_next|eq, ":var_1", 1),
            (this_or_next|eq, ":var_1", 2),
            (this_or_next|eq, ":var_1", 3),
            (eq, ":var_1", 4),
            (this_or_next|eq, ":var_44", 0),
            (eq, ":var_44", 6),
            (call_script, "script_check_and_finish_active_army_quests_for_faction", ":var_0"),
            (faction_set_slot, ":var_0", slot_faction_ai_last_offensive_time, ":var_10"),
        (try_end),
    (try_end),
    (try_begin),
        (eq, "$players_kingdom", ":var_0"),
        (neg|faction_slot_eq, ":var_0", slot_faction_ai_state, 2),
        (check_quest_active, "qst_join_siege_with_army"),
        (call_script, "script_abort_quest", "qst_join_siege_with_army", 0),
    (try_end),
    (try_begin),
        (this_or_next|eq, ":var_44", 0),
        (eq, ":var_44", 6),
        (store_current_hours, ":var_62"),
        (faction_get_slot, ":var_63", ":var_0", slot_faction_ai_current_state_started),
        (val_sub, ":var_62", ":var_63"),
        (ge, ":var_62", 18),
        (store_current_hours, ":var_10"),
        (faction_set_slot, ":var_0", slot_faction_ai_last_rest_time, ":var_10"),
    (try_end),

]),

("check_and_finish_active_army_quests_for_faction",
[
    (store_script_param_1, ":var_0"),
    (try_begin),
        (eq, "$players_kingdom", ":var_0"),
        (try_begin),
            (check_quest_active, "qst_report_to_army"),
            (call_script, "script_cancel_quest", "qst_report_to_army"),
        (try_end),
        (assign, ":var_1", 0),
        (try_for_range, ":var_2", "qst_deliver_cattle_to_army", "qst_rescue_lord_by_replace"),
            (check_quest_active, ":var_2"),
            (call_script, "script_cancel_quest", ":var_2"),
            (troop_get_slot, ":var_3", ":var_2", slot_troop_party_template),
            (assign, ":var_1", 1),
        (try_end),
        (try_begin),
            (check_quest_active, "qst_follow_army"),
            (assign, ":var_1", 1),
            (troop_get_slot, ":var_3", "qst_follow_army", slot_troop_party_template),
            (call_script, "script_end_quest", "qst_follow_army"),
        (try_end),
        (eq, ":var_1", 1),
        (faction_get_slot, ":var_4", ":var_0", slot_faction_ai_last_offensive_time),
        (store_current_hours, ":var_5"),
        (store_sub, ":var_6", ":var_5", ":var_4"),
        (store_mul, ":var_7", ":var_6", 5),
        (val_div, ":var_7", 50),
        (val_mul, ":var_7", 50),
        (val_add, ":var_7", 50),
        (add_xp_as_reward, ":var_7"),
        (call_script, "script_troop_change_relation_with_troop", "trp_player", ":var_3", 2),
    (try_end),

]),

("troop_get_player_relation",
[
    (store_script_param_1, ":var_0"),
    (troop_get_slot, ":var_1", ":var_0", slot_lord_reputation_type),
    (troop_get_slot, ":var_2", ":var_0", slot_troop_player_relation),
    (assign, ":var_3", 0),
    (try_begin),
        (eq, ":var_1", 2),
        (val_add, ":var_2", -3),
    (try_end),
    (try_begin),
        (ge, "$player_honor", 0),
        (try_begin),
            (this_or_next|eq, ":var_1", 7),
            (eq, ":var_1", 6),
            (store_div, ":var_3", "$player_honor", 3),
        (try_end),
    (try_end),
    (try_begin),
        (neg|ge, "$player_honor", 0),
        (try_begin),
            (this_or_next|eq, ":var_1", 7),
            (eq, ":var_1", 6),
            (store_div, ":var_3", "$player_honor", 3),
        (else_try),
            (eq, ":var_1", 1),
            (store_div, ":var_3", "$player_honor", 5),
        (try_end),
    (try_end),
    (val_add, ":var_2", ":var_3"),
    (val_clamp, ":var_2", -100, 101),
    (assign, reg0, ":var_2"),

]),

("change_troop_renown",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (troop_get_slot, ":var_2", ":var_0", slot_troop_renown),
    (try_begin),
        (gt, ":var_1", 0),
        (assign, reg4, ":var_1"),
        (store_div, ":var_3", ":var_2", 200),
        (val_sub, ":var_1", ":var_3"),
        (val_max, ":var_1", 0),
        (eq, ":var_0", "trp_player"),
        (assign, reg5, ":var_1"),
        (eq, "$cheat_mode", 1),
        (display_message, "str_renown_change_of_reg4_reduced_to_reg5_because_of_high_existing_renown"),
    (try_end),
    (store_add, ":var_4", ":var_2", ":var_1"),
    (val_max, ":var_4", 0),
    (troop_set_slot, ":var_0", slot_troop_renown, ":var_4"),
    (try_begin),
        (eq, ":var_0", "trp_player"),
        (str_store_troop_name, s1, ":var_0"),
        (assign, reg12, ":var_1"),
        (val_abs, reg12),
        (try_begin),
            (gt, ":var_1", 0),
            (display_message, "@You gained {reg12} renown."),
        (else_try),
            (neg|ge, ":var_1", 0),
            (display_message, "@You lose {reg12} renown."),
        (try_end),
    (try_end),
    (call_script, "script_update_troop_notes", ":var_0"),

]),

("change_player_relation_with_troop",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (try_begin),
        (neg|eq, ":var_0", "trp_player"),
        (neg|is_between, ":var_0", "trp_farmer", "trp_town_walker_1"),
        (neg|eq, ":var_0", -1),
        (neg|eq, ":var_1", 0),
        (call_script, "script_troop_get_player_relation", ":var_0"),
        (assign, ":var_2", reg0),
        (troop_get_slot, ":var_3", ":var_0", slot_troop_player_relation),
        (val_add, ":var_3", ":var_1"),
        (val_clamp, ":var_3", -100, 101),
        (try_begin),
            (troop_set_slot, ":var_0", slot_troop_player_relation, ":var_3"),
            (try_begin),
                (neg|gt, ":var_3", -50),
                (unlock_achievement, 29),
            (try_end),
            (str_store_troop_name_link, s1, ":var_0"),
            (call_script, "script_troop_get_player_relation", ":var_0"),
            (assign, ":var_4", reg0),
            (neg|eq, ":var_2", ":var_4"),
            (assign, reg1, ":var_2"),
            (assign, reg2, ":var_4"),
            (try_begin),
                (gt, ":var_1", 0),
                (display_message, "str_troop_relation_increased"),
            (else_try),
                (neg|ge, ":var_1", 0),
                (display_message, "str_troop_relation_detoriated"),
            (try_end),
            (try_begin),
                (eq, ":var_0", "$g_talk_troop"),
                (assign, "$g_talk_troop_relation", ":var_4"),
                (call_script, "script_setup_talk_info"),
            (try_end),
            (call_script, "script_update_troop_notes", ":var_0"),
        (try_end),
    (try_end),

]),

("change_player_relation_with_center",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (party_get_slot, ":var_2", ":var_0", slot_center_player_relation),
    (assign, reg1, ":var_2"),
    (val_add, ":var_2", ":var_1"),
    (val_clamp, ":var_2", -100, 100),
    (assign, reg2, ":var_2"),
    (party_set_slot, ":var_0", slot_center_player_relation, ":var_2"),
    (try_begin),
        (neg|gt, ":var_2", -50),
        (unlock_achievement, 29),
    (try_end),
    (str_store_party_name_link, s1, ":var_0"),
    (try_begin),
        (gt, ":var_1", 0),
        (display_message, "@Your relation with {s1} has improved."),
    (else_try),
        (neg|ge, ":var_1", 0),
        (display_message, "@Your relation with {s1} has deteriorated."),
    (try_end),
    (try_begin),
        (eq, "$use_feudal_lance", 0),
        (party_slot_eq, ":var_0", slot_party_type, 4),
        (call_script, "script_update_volunteer_troops_in_village", ":var_0"),
    (try_end),
    (try_begin),
        (this_or_next|is_between, "$g_talk_troop", "trp_village_1_elder", "trp_merchants_end"),
        (is_between, "$g_talk_troop", "trp_town_1_mayor", "trp_village_1_elder"),
        (assign, "$g_talk_troop_relation", ":var_2"),
        (call_script, "script_setup_talk_info"),
    (try_end),

]),

("change_player_relation_with_faction",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (store_relation, ":var_2", ":var_0", "fac_player_supporters_faction"),
    (assign, reg1, ":var_2"),
    (val_add, ":var_2", ":var_1"),
    (assign, reg2, ":var_2"),
    (set_relation, ":var_0", "fac_player_faction", ":var_2"),
    (set_relation, ":var_0", "fac_player_supporters_faction", ":var_2"),
    (try_begin),
        (neg|gt, ":var_2", -50),
        (unlock_achievement, 29),
    (try_end),
    (str_store_faction_name_link, s1, ":var_0"),
    (try_begin),
        (gt, ":var_1", 0),
        (display_message, "str_faction_relation_increased"),
    (else_try),
        (neg|ge, ":var_1", 0),
        (display_message, "str_faction_relation_detoriated"),
    (try_end),
    (call_script, "script_update_all_notes"),

]),

("set_player_relation_with_faction",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (store_relation, ":var_2", ":var_0", "fac_player_supporters_faction"),
    (store_sub, ":var_3", ":var_1", ":var_2"),
    (call_script, "script_change_player_relation_with_faction", ":var_0", ":var_3"),

]),

("change_player_relation_with_faction_ex",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (store_relation, ":var_2", ":var_0", "fac_player_supporters_faction"),
    (assign, reg1, ":var_2"),
    (val_add, ":var_2", ":var_1"),
    (assign, reg2, ":var_2"),
    (set_relation, ":var_0", "fac_player_faction", ":var_2"),
    (set_relation, ":var_0", "fac_player_supporters_faction", ":var_2"),
    (str_store_faction_name_link, s1, ":var_0"),
    (try_begin),
        (gt, ":var_1", 0),
        (display_message, "str_faction_relation_increased"),
    (else_try),
        (neg|ge, ":var_1", 0),
        (display_message, "str_faction_relation_detoriated"),
    (try_end),
    (try_for_range, ":var_3", "fac_player_supporters_faction", "fac_kingdoms_end"),
        (faction_slot_eq, ":var_3", slot_faction_state, 0),
        (neg|eq, ":var_0", ":var_3"),
        (store_relation, ":var_4", ":var_0", ":var_3"),
        (store_relation, ":var_2", ":var_3", "fac_player_supporters_faction"),
        (store_mul, ":var_5", ":var_1", ":var_4"),
        (val_div, ":var_5", 100),
        (val_add, ":var_2", ":var_5"),
        (set_relation, ":var_3", "fac_player_faction", ":var_2"),
        (set_relation, ":var_3", "fac_player_supporters_faction", ":var_2"),
    (try_end),
    (try_begin),
        (faction_slot_eq, "fac_player_supporters_faction", slot_faction_state, 0),
        (try_for_range, ":var_6", "fac_player_supporters_faction", "fac_kingdoms_end"),
            (faction_slot_eq, ":var_6", slot_faction_state, 0),
            (call_script, "script_update_faction_notes", ":var_6"),
        (try_end),
    (try_end),

]),

("cf_get_random_active_faction_except_player_faction_and_faction",
[
    (store_script_param_1, ":var_0"),
    (assign, ":var_1", 0),
    (faction_get_slot, ":var_2", ":var_0", 102),
    (try_for_range, ":var_3", "fac_player_supporters_faction", "fac_kingdoms_end"),
        (neg|eq, ":var_3", "fac_player_supporters_faction"),
        (neg|eq, ":var_3", ":var_0"),
        (faction_slot_eq, ":var_3", slot_faction_state, 0),
        (val_add, ":var_1", 1),
    (try_end),
    (gt, ":var_1", 0),
    (assign, ":var_4", -1),
    (store_random_in_range, ":var_5", 0, ":var_1"),
    (try_for_range, ":var_3", "fac_player_supporters_faction", "fac_kingdoms_end"),
        (ge, ":var_5", 0),
        (neg|eq, ":var_3", "fac_player_supporters_faction"),
        (neg|eq, ":var_3", ":var_0"),
        (faction_slot_eq, ":var_3", slot_faction_state, 0),
        (faction_slot_eq, ":var_3", 102, ":var_2"),
        (val_sub, ":var_5", 1),
        (neg|ge, ":var_5", 0),
        (assign, ":var_4", ":var_3"),
    (try_end),
    (assign, reg0, ":var_4"),

]),

("make_kingdom_hostile_to_player",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (try_begin),
        (neg|ge, ":var_1", 0),
        (store_relation, ":var_2", ":var_0", "fac_player_supporters_faction"),
        (val_min, ":var_2", 0),
        (val_add, ":var_2", ":var_1"),
        (call_script, "script_set_player_relation_with_faction", ":var_0", ":var_2"),
    (try_end),

]),

("change_player_honor",
[
    (store_script_param_1, ":var_0"),
    (val_add, "$player_honor", ":var_0"),
    (try_begin),
        (gt, ":var_0", 0),
        (display_message, "@You gain honour."),
    (else_try),
        (neg|ge, ":var_0", 0),
        (display_message, "@You lose honour."),
    (try_end),

]),

("change_player_party_morale",
[
    (store_script_param_1, ":var_0"),
    (party_get_morale, ":var_1", "p_main_party"),
    (val_clamp, ":var_1", 0, 100),
    (store_add, ":var_2", ":var_1", ":var_0"),
    (val_clamp, ":var_2", 0, 100),
    (party_set_morale, "p_main_party", ":var_2"),
    (try_begin),
        (neg|ge, ":var_2", ":var_1"),
        (store_sub, reg1, ":var_1", ":var_2"),
        (display_message, "str_party_lost_morale"),
    (else_try),
        (gt, ":var_2", ":var_1"),
        (store_sub, reg1, ":var_2", ":var_1"),
        (display_message, "str_party_gained_morale"),
    (try_end),

]),

("cf_player_has_item_without_modifier",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (player_has_item, ":var_0"),
    (assign, ":var_2", 0),
    (troop_get_inventory_capacity, ":var_3", "trp_player"),
    (try_for_range, ":var_4", 0, ":var_3"),
        (troop_get_inventory_slot, ":var_5", "trp_player", ":var_4"),
        (eq, ":var_5", ":var_0"),
        (troop_get_inventory_slot_modifier, ":var_6", "trp_player", ":var_4"),
        (neg|eq, ":var_6", ":var_1"),
        (assign, ":var_2", 1),
        (assign, ":var_3", 0),
    (try_end),
    (eq, ":var_2", 1),

]),

("get_player_party_morale_values",
[
    (party_get_num_companion_stacks, ":var_0", "p_main_party"),
    (assign, ":var_1", 0),
    (try_for_range, ":var_2", 1, ":var_0"),
        (party_stack_get_troop_id, ":var_3", "p_main_party", ":var_2"),
        (try_begin),
            (troop_is_hero, ":var_3"),
            (val_add, ":var_1", 1),
        (else_try),
            (party_stack_get_size, ":var_4", "p_main_party", ":var_2"),
            (val_add, ":var_1", ":var_4"),
        (try_end),
    (try_end),
    (assign, "$g_player_party_morale_modifier_party_size", ":var_1"),
    (store_skill_level, ":var_5", "skl_leadership", "trp_player"),
    (try_begin),
        (eq, "$players_kingdom", "fac_player_supporters_faction"),
        (faction_get_slot, ":var_6", "$players_kingdom", slot_faction_leader),
        (eq, ":var_6", "trp_player"),
        (store_mul, "$g_player_party_morale_modifier_leadership", ":var_5", 18),
    (else_try),
        (store_mul, "$g_player_party_morale_modifier_leadership", ":var_5", 15),
    (try_end),
    (assign, ":var_7", "$g_player_party_morale_modifier_leadership"),
    (val_sub, ":var_7", "$g_player_party_morale_modifier_party_size"),
    (val_add, ":var_7", 50),
    (assign, "$g_player_party_morale_modifier_food", 0),
    (try_for_range, ":var_8", "itm_smoked_fish", "itm_siege_supply"),
        (call_script, "script_cf_player_has_item_without_modifier", ":var_8", 41),
        (item_get_slot, ":var_9", ":var_8", slot_item_food_bonus),
        (val_mul, ":var_9", 3),
        (val_div, ":var_9", 2),
        (val_add, "$g_player_party_morale_modifier_food", ":var_9"),
    (try_end),
    (val_add, ":var_7", "$g_player_party_morale_modifier_food"),
    (try_begin),
        (eq, "$g_player_party_morale_modifier_food", 0),
        (assign, "$g_player_party_morale_modifier_no_food", 30),
        (val_sub, ":var_7", "$g_player_party_morale_modifier_no_food"),
    (else_try),
        (assign, "$g_player_party_morale_modifier_no_food", 0),
    (try_end),
    (assign, "$g_player_party_morale_modifier_debt", 0),
    (try_begin),
        (gt, "$g_player_debt_to_party_members", 0),
        (call_script, "script_calculate_player_faction_wage"),
        (assign, ":var_10", reg0),
        (store_mul, "$g_player_party_morale_modifier_debt", "$g_player_debt_to_party_members", 10),
        (val_max, ":var_10", 1),
        (val_div, "$g_player_party_morale_modifier_debt", ":var_10"),
        (val_clamp, "$g_player_party_morale_modifier_debt", 1, 31),
        (val_sub, ":var_7", "$g_player_party_morale_modifier_debt"),
    (try_end),
    (val_clamp, ":var_7", 0, 100),
    (assign, reg0, ":var_7"),

]),

("diplomacy_start_war_between_kingdoms",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (call_script, "script_npc_decision_checklist_peace_or_war", ":var_0", ":var_1", -1),
    (assign, ":var_3", reg1),
    (try_begin),
        (eq, ":var_0", "fac_player_supporters_faction"),
        (assign, ":var_4", 90),
    (else_try),
        (eq, ":var_3", "str_s12s15_declared_war_to_control_calradia"),
        (assign, ":var_4", 90),
    (else_try),
        (eq, ":var_3", "str_s12s15_considers_s16_to_be_dangerous_and_untrustworthy_and_shehe_wants_to_bring_s16_down"),
        (assign, ":var_4", 91),
    (else_try),
        (eq, ":var_3", "str_s12s15_considers_s16_to_be_dangerous_and_untrustworthy_and_shehe_wants_to_bring_s16_down"),
        (assign, ":var_4", 91),
    (else_try),
        (eq, ":var_3", "str_s12s15_is_anxious_to_reclaim_old_lands_such_as_s18_now_held_by_s16"),
        (assign, ":var_4", 92),
    (else_try),
        (eq, ":var_3", "str_s12s15_faces_too_much_internal_discontent_to_feel_comfortable_ignoring_recent_provocations_by_s16s_subjects"),
        (assign, ":var_4", 94),
    (else_try),
        (eq, ":var_3", "str_s12s15_is_alarmed_by_the_growing_power_of_s16"),
        (assign, ":var_4", 93),
    (try_end),
    (call_script, "script_add_log_entry", ":var_4", ":var_0", 0, 0, ":var_1"),
    (call_script, "script_diplomacy_faction_get_diplomatic_status_with_faction", ":var_0", ":var_1"),
    (assign, ":var_5", reg0),
    (try_begin),
        (eq, ":var_2", 1),
        (eq, ":var_5", -1),
        (call_script, "script_faction_follows_controversial_policy", ":var_0", 83),
    (else_try),
        (eq, ":var_2", 1),
        (eq, ":var_5", 0),
        (call_script, "script_faction_follows_controversial_policy", ":var_0", 80),
    (else_try),
        (eq, ":var_5", 1),
        (call_script, "script_faction_follows_controversial_policy", ":var_0", 84),
    (try_end),
    (store_relation, ":var_6", ":var_0", ":var_1"),
    (val_min, ":var_6", -10),
    (val_add, ":var_6", -30),
    (set_relation, ":var_0", ":var_1", ":var_6"),
    (try_begin),
        (eq, "$players_kingdom", ":var_0"),
        (store_relation, ":var_6", "fac_player_supporters_faction", ":var_1"),
        (val_min, ":var_6", -30),
        (call_script, "script_set_player_relation_with_faction", ":var_1", ":var_6"),
    (else_try),
        (eq, "$players_kingdom", ":var_1"),
        (store_relation, ":var_6", "fac_player_supporters_faction", ":var_0"),
        (val_min, ":var_6", -30),
        (call_script, "script_set_player_relation_with_faction", ":var_0", ":var_6"),
    (try_end),
    (try_begin),
        (eq, ":var_2", 1),
        (str_store_faction_name_link, s1, ":var_0"),
        (str_store_faction_name_link, s2, ":var_1"),
        (display_log_message, "@{s1} has declared war against {s2}."),
        (store_current_hours, ":var_7"),
        (faction_set_slot, ":var_0", slot_faction_ai_last_decisive_event, ":var_7"),
        (faction_set_slot, ":var_1", slot_faction_ai_last_decisive_event, ":var_7"),
        (store_add, ":var_8", ":var_1", 120),
        (store_add, ":var_9", ":var_1", 170),
        (val_sub, ":var_8", "fac_player_supporters_faction"),
        (val_sub, ":var_9", "fac_player_supporters_faction"),
        (faction_set_slot, ":var_0", ":var_8", 0),
        (faction_set_slot, ":var_0", ":var_9", 0),
        (store_add, ":var_8", ":var_0", 120),
        (store_add, ":var_9", ":var_0", 170),
        (val_sub, ":var_8", "fac_player_supporters_faction"),
        (val_sub, ":var_9", "fac_player_supporters_faction"),
        (faction_set_slot, ":var_1", ":var_8", 0),
        (faction_set_slot, ":var_1", ":var_9", 0),
        (call_script, "script_add_notification_menu", "mnu_notification_war_declared", ":var_0", ":var_1"),
        (call_script, "script_update_faction_notes", ":var_0"),
        (call_script, "script_update_faction_notes", ":var_1"),
        (assign, "$g_recalculate_ais", 1),
    (try_end),
    (try_begin),
        (check_quest_active, "qst_cause_provocation"),
        (neg|check_quest_succeeded, "qst_cause_provocation"),
        (this_or_next|eq, "$players_kingdom", ":var_0"),
        (eq, "$players_kingdom", ":var_1"),
        (call_script, "script_abort_quest", "qst_cause_provocation", 0),
    (try_end),

]),

("diplomacy_party_attacks_neutral",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_faction_of_party, ":var_2", ":var_0"),
    (store_faction_of_party, ":var_3", ":var_1"),
    (party_stack_get_troop_id, ":var_4", ":var_0", 0),
    (try_begin),
        (eq, ":var_0", "p_main_party"),
        (neg|eq, ":var_2", "fac_player_supporters_faction"),
        (assign, ":var_2", "$players_kingdom"),
    (else_try),
        (eq, ":var_0", "p_main_party"),
        (eq, ":var_2", "fac_player_supporters_faction"),
    (try_end),
    (try_begin),
        (eq, ":var_0", "p_main_party"),
        (store_relation, ":var_5", ":var_2", ":var_3"),
        (ge, ":var_5", 0),
        (call_script, "script_change_player_honor", -2),
    (try_end),
    (try_begin),
        (check_quest_active, "qst_cause_provocation"),
        (quest_slot_eq, "qst_cause_provocation", 3, ":var_3"),
        (quest_get_slot, ":var_6", "qst_cause_provocation", 6),
        (store_troop_faction, ":var_2", ":var_6"),
        (call_script, "script_succeed_quest", "qst_cause_provocation"),
    (try_end),
    (call_script, "script_diplomacy_faction_get_diplomatic_status_with_faction", ":var_2", ":var_3"),
    (assign, ":var_7", reg0),
    (try_begin),
        (eq, ":var_2", "fac_player_supporters_faction"),
        (neg|faction_slot_eq, "fac_player_supporters_faction", slot_faction_state, 0),
    (else_try),
        (eq, ":var_7", -2),
    (else_try),
        (eq, ":var_2", "fac_player_supporters_faction"),
        (faction_slot_eq, ":var_2", slot_faction_leader, "trp_player"),
        (call_script, "script_faction_follows_controversial_policy", "fac_player_supporters_faction", 80),
    (else_try),
        (eq, ":var_7", 1),
        (party_stack_get_troop_id, ":var_8", ":var_1", 0),
        (try_begin),
            (neg|is_between, ":var_8", "trp_npc1", "trp_knight_1_1_wife"),
            (store_faction_of_party, ":var_9", ":var_1"),
            (faction_get_slot, ":var_8", ":var_9", slot_faction_leader),
        (try_end),
        (call_script, "script_add_log_entry", 77, ":var_4", -1, ":var_8", ":var_2"),
    (else_try),
        (party_stack_get_troop_id, ":var_8", ":var_1", 0),
        (try_begin),
            (neg|is_between, ":var_8", "trp_npc1", "trp_knight_1_1_wife"),
            (store_faction_of_party, ":var_9", ":var_1"),
            (faction_get_slot, ":var_8", ":var_9", slot_faction_leader),
        (try_end),
        (call_script, "script_add_log_entry", 76, ":var_4", -1, ":var_8", ":var_2"),
    (try_end),
    (try_begin),
        (is_between, ":var_1", "p_village_1_1", "p_salt_mine"),
        (call_script, "script_add_log_entry", 1, ":var_4", ":var_1", -1, ":var_3"),
    (else_try),
        (party_get_template_id, ":var_10", ":var_1"),
        (neg|eq, ":var_10", "pt_kingdom_hero_party"),
        (try_begin),
            (ge, "$cheat_mode", 1),
            (str_store_faction_name, s5, ":var_3"),
            (display_message, "@{!}DEbug - {s5} caravan attacked"),
        (try_end),
        (call_script, "script_add_log_entry", 3, ":var_4", -1, -1, ":var_3"),
    (try_end),
    (store_add, ":var_11", ":var_2", 170),
    (val_sub, ":var_11", "fac_player_supporters_faction"),
    (faction_set_slot, ":var_3", ":var_11", 0),
    (store_add, ":var_12", ":var_2", 170),
    (val_sub, ":var_12", "fac_player_supporters_faction"),
    (try_begin),
        (neg|eq, ":var_7", -2),
        (faction_slot_eq, ":var_3", ":var_12", 0),
        (faction_set_slot, ":var_3", ":var_12", 30),
    (try_end),

]),

("party_calculate_and_set_nearby_friend_enemy_follower_strengths",
[
    (store_script_param, ":var_0", 1),
    (assign, ":var_1", 0),
    (assign, ":var_2", 0),
    (assign, ":var_3", 0),
    (store_faction_of_party, ":var_4", ":var_0"),
    (store_add, ":var_5", "trp_knight_1_1_wife", 1),
    (try_for_range, ":var_6", "trp_npc1", ":var_5"),
        (try_begin),
            (eq, ":var_6", "trp_knight_1_1_wife"),
            (assign, ":var_7", "trp_player"),
        (else_try),
            (assign, ":var_7", ":var_6"),
        (try_end),
        (troop_slot_eq, ":var_7", slot_troop_occupation, 2),
        (troop_get_slot, ":var_8", ":var_7", slot_troop_leaded_party),
        (ge, ":var_8", 0),
        (party_is_active, ":var_8"),
        (store_troop_faction, ":var_9", ":var_7"),
        (store_relation, ":var_10", ":var_9", ":var_4"),
        (this_or_next|neg|eq, ":var_10", 0),
        (eq, ":var_9", ":var_4"),
        (neg|eq, ":var_0", ":var_8"),
        (party_get_slot, ":var_11", ":var_8", slot_party_cached_strength),
        (try_begin),
            (neg|is_between, ":var_0", "p_town_1_1", "p_salt_mine"),
            (party_slot_eq, ":var_8", slot_party_ai_state, 11),
            (party_get_slot, ":var_12", ":var_8", slot_party_ai_object),
            (eq, ":var_12", ":var_0"),
            (val_add, ":var_1", ":var_11"),
        (else_try),
            (store_distance_to_party_from_party, ":var_13", ":var_8", ":var_0"),
            (neg|ge, ":var_13", 20),
            (try_begin),
                (neg|ge, ":var_13", 5),
                (assign, ":var_14", ":var_11"),
            (else_try),
                (neg|ge, ":var_13", 10),
                (store_div, ":var_14", ":var_11", 2),
            (else_try),
                (neg|ge, ":var_13", 15),
                (store_div, ":var_14", ":var_11", 4),
            (else_try),
                (store_div, ":var_14", ":var_11", 8),
            (try_end),
            (try_begin),
                (this_or_next|eq, ":var_9", ":var_4"),
                (gt, ":var_10", 0),
                (val_add, ":var_2", ":var_14"),
            (else_try),
                (neg|ge, ":var_10", 0),
                (val_add, ":var_3", ":var_14"),
            (try_end),
        (try_end),
    (try_end),
    (party_set_slot, ":var_0", slot_party_follower_strength, ":var_1"),
    (party_set_slot, ":var_0", slot_party_nearby_friend_strength, ":var_2"),
    (party_set_slot, ":var_0", slot_party_nearby_enemy_strength, ":var_3"),

]),

("init_ai_calculation",
[
    (try_for_range, ":var_0", "trp_npc1", "trp_heroes_end"),
        (troop_slot_eq, ":var_0", slot_troop_occupation, 2),
        (troop_get_slot, ":var_1", ":var_0", slot_troop_leaded_party),
        (party_is_active, ":var_1"),
        (store_troop_faction, ":var_2", ":var_0"),
        (eq, ":var_2", "$g_ai_kingdom"),
        (call_script, "script_party_calculate_strength", ":var_1", 0),
    (try_end),
    (call_script, "script_party_calculate_strength", "p_main_party", 0),
    (try_for_range, ":var_3", "p_town_1_1", "p_village_1_1"),
        (store_faction_of_party, ":var_2", ":var_3"),
        (eq, ":var_2", "$g_ai_kingdom"),
        (call_script, "script_party_calculate_strength", ":var_3", 0),
    (try_end),
    (try_for_range, ":var_3", "p_town_1_1", "p_village_1_1"),
        (store_faction_of_party, ":var_2", ":var_3"),
        (eq, ":var_2", "$g_ai_kingdom"),
        (call_script, "script_party_calculate_and_set_nearby_friend_enemy_follower_strengths", ":var_3"),
    (try_end),
    (try_for_range, ":var_0", "trp_npc1", "trp_heroes_end"),
        (troop_get_slot, ":var_4", ":var_0", slot_troop_leaded_party),
        (gt, ":var_4", 0),
        (party_is_active, ":var_4"),
        (store_troop_faction, ":var_2", ":var_0"),
        (eq, ":var_2", "$g_ai_kingdom"),
        (call_script, "script_party_calculate_and_set_nearby_friend_enemy_follower_strengths", ":var_4"),
    (try_end),
    (call_script, "script_party_calculate_and_set_nearby_friend_enemy_follower_strengths", "p_main_party"),

]),

("recalculate_ais",
[
    (call_script, "script_init_ai_calculation"),
    (assign, ":var_0", "$g_ai_kingdom"),
    (try_begin),
        (assign, reg8, ":var_0"),
        (faction_slot_eq, ":var_0", slot_faction_state, 0),
        (store_current_hours, ":var_1"),
        (faction_set_slot, ":var_0", 106, ":var_1"),
        (call_script, "script_decide_faction_ai", ":var_0"),
    (try_end),
    (try_for_range, ":var_2", "trp_npc1", "trp_knight_1_1_wife"),
        (store_troop_faction, ":var_0", ":var_2"),
        (troop_slot_eq, ":var_2", slot_troop_occupation, 2),
        (eq, ":var_0", "$g_ai_kingdom"),
        (call_script, "script_calculate_troop_ai", ":var_2"),
    (try_end),

]),

("calculate_troop_ai",
[
    (store_script_param, ":var_0", 1),
    (try_begin),
        (troop_slot_eq, ":var_0", slot_troop_occupation, 2),
        (neg|troop_slot_ge, ":var_0", slot_troop_prisoner_of_party, 0),
        (troop_get_slot, ":var_1", ":var_0", slot_troop_leaded_party),
        (gt, ":var_1", 0),
        (party_is_active, ":var_1"),
        (call_script, "script_npc_decision_checklist_party_ai", ":var_0"),
        (call_script, "script_party_set_ai_state", ":var_1", reg0, reg1),
    (try_end),

]),

("diplomacy_start_peace_between_kingdoms",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (store_relation, ":var_3", ":var_0", ":var_1"),
    (val_max, ":var_3", 0),
    (set_relation, ":var_0", ":var_1", ":var_3"),
    (call_script, "script_exchange_prisoners_between_factions", ":var_0", ":var_1"),
    (try_begin),
        (eq, "$players_kingdom", ":var_0"),
        (store_relation, ":var_3", "fac_player_supporters_faction", ":var_1"),
        (val_max, ":var_3", 0),
        (call_script, "script_set_player_relation_with_faction", ":var_1", ":var_3"),
        (call_script, "script_event_kingdom_make_peace_with_kingdom", ":var_1", "fac_player_supporters_faction"),
    (else_try),
        (eq, "$players_kingdom", ":var_1"),
        (store_relation, ":var_3", "fac_player_supporters_faction", ":var_0"),
        (val_max, ":var_3", 0),
        (call_script, "script_set_player_relation_with_faction", ":var_0", ":var_3"),
        (call_script, "script_event_kingdom_make_peace_with_kingdom", ":var_0", "fac_player_supporters_faction"),
    (try_end),
    (try_for_range, ":var_4", "p_town_1_1", "p_salt_mine"),
        (store_faction_of_party, ":var_5", ":var_4"),
        (this_or_next|eq, ":var_5", ":var_0"),
        (eq, ":var_5", ":var_1"),
        (party_get_slot, ":var_6", ":var_4", slot_center_is_besieged_by),
        (ge, ":var_6", 0),
        (party_is_active, ":var_6"),
        (store_faction_of_party, ":var_7", ":var_6"),
        (this_or_next|eq, ":var_7", ":var_0"),
        (eq, ":var_7", ":var_1"),
        (call_script, "script_lift_siege", ":var_4", 0),
    (try_end),
    (try_begin),
        (this_or_next|eq, "$players_kingdom", ":var_0"),
        (eq, "$players_kingdom", ":var_1"),
        (ge, "$g_player_besiege_town", 0),
        (party_is_active, "$g_player_besiege_town"),
        (store_faction_of_party, ":var_8", "$g_player_besiege_town"),
        (this_or_next|eq, ":var_8", ":var_0"),
        (eq, ":var_8", ":var_1"),
        (call_script, "script_lift_siege", "$g_player_besiege_town", 0),
        (assign, "$g_player_besiege_town", -1),
    (try_end),
    (try_begin),
        (eq, ":var_2", 1),
        (str_store_faction_name_link, s1, ":var_0"),
        (str_store_faction_name_link, s2, ":var_1"),
        (display_log_message, "@{s1} and {s2} have made peace with each other."),
        (call_script, "script_add_notification_menu", "mnu_notification_peace_declared", ":var_0", ":var_1"),
        (call_script, "script_event_kingdom_make_peace_with_kingdom", ":var_0", ":var_1"),
        (call_script, "script_event_kingdom_make_peace_with_kingdom", ":var_1", ":var_0"),
        (assign, "$g_recalculate_ais", 1),
    (try_end),
    (try_begin),
        (store_add, ":var_9", ":var_0", 120),
        (val_sub, ":var_9", "fac_player_supporters_faction"),
        (faction_set_slot, ":var_1", ":var_9", 20),
        (store_add, ":var_9", ":var_1", 120),
        (val_sub, ":var_9", "fac_player_supporters_faction"),
        (faction_set_slot, ":var_0", ":var_9", 20),
        (store_add, ":var_10", ":var_1", 220),
        (val_sub, ":var_10", "fac_player_supporters_faction"),
        (faction_set_slot, ":var_0", ":var_10", 0),
        (store_add, ":var_11", ":var_0", 220),
        (val_sub, ":var_11", "fac_player_supporters_faction"),
        (faction_set_slot, ":var_1", ":var_11", 0),
    (try_end),

]),

("event_kingdom_make_peace_with_kingdom",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (try_begin),
        (check_quest_active, "qst_capture_prisoners"),
        (try_begin),
            (eq, "$players_kingdom", ":var_0"),
            (quest_slot_eq, "qst_capture_prisoners", 3, ":var_1"),
            (call_script, "script_cancel_quest", "qst_capture_prisoners"),
        (else_try),
            (eq, "$players_kingdom", ":var_1"),
            (quest_slot_eq, "qst_capture_prisoners", 3, ":var_0"),
            (call_script, "script_cancel_quest", "qst_capture_prisoners"),
        (try_end),
    (try_end),
    (try_begin),
        (check_quest_active, "qst_capture_enemy_hero"),
        (try_begin),
            (eq, "$players_kingdom", ":var_0"),
            (quest_slot_eq, "qst_capture_enemy_hero", 3, ":var_1"),
            (call_script, "script_cancel_quest", "qst_capture_enemy_hero"),
        (else_try),
            (eq, "$players_kingdom", ":var_1"),
            (quest_slot_eq, "qst_capture_enemy_hero", 3, ":var_0"),
            (call_script, "script_cancel_quest", "qst_capture_enemy_hero"),
        (try_end),
    (try_end),
    (try_begin),
        (check_quest_active, "qst_persuade_lords_to_make_peace"),
        (quest_get_slot, ":var_2", "qst_persuade_lords_to_make_peace", 2),
        (quest_get_slot, ":var_3", "qst_persuade_lords_to_make_peace", 4),
        (try_begin),
            (neg|ge, ":var_2", 0),
            (val_mul, ":var_2", -1),
        (try_end),
        (try_begin),
            (neg|ge, ":var_3", 0),
            (val_mul, ":var_3", -1),
        (try_end),
        (store_troop_faction, ":var_4", ":var_2"),
        (store_troop_faction, ":var_5", ":var_3"),
        (this_or_next|eq, ":var_4", ":var_0"),
        (eq, ":var_5", ":var_0"),
        (this_or_next|eq, ":var_4", ":var_1"),
        (eq, ":var_5", ":var_1"),
        (call_script, "script_cancel_quest", "qst_persuade_lords_to_make_peace"),
    (try_end),
    (try_begin),
        (this_or_next|faction_slot_eq, ":var_1", slot_faction_leader, "trp_player"),
        (faction_slot_eq, ":var_0", slot_faction_leader, "trp_player"),
        (call_script, "script_change_player_right_to_rule", 3),
    (try_end),

]),

("randomly_start_war_peace_new",
[
    (store_script_param_1, ":var_0"),
    (assign, ":var_1", 0),
    (try_begin),
        (is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
        (assign, ":var_1", 1),
    (try_end),
    (assign, ":var_2", "$g_diplo_kingdom"),
    (try_begin),
        (faction_slot_eq, ":var_2", slot_faction_state, 0),
        (neg|eq, ":var_2", "fac_player_supporters_faction"),
        (try_for_range, ":var_3", "fac_player_supporters_faction", "fac_kingdoms_end"),
            (neg|eq, ":var_2", ":var_3"),
            (faction_slot_eq, ":var_3", slot_faction_state, 0),
            (call_script, "script_npc_decision_checklist_peace_or_war", ":var_2", ":var_3", -1),
            (assign, ":var_4", reg0),
            (store_relation, ":var_5", ":var_2", ":var_3"),
            (call_script, "script_distance_between_factions", ":var_2", ":var_3"),
            (assign, ":var_6", reg0),
            (try_begin),
                (neg|ge, ":var_5", 0),
                (this_or_next|eq, ":var_3", "fac_player_supporters_faction"),
                (gt, ":var_6", 0),
                (try_begin),
                    (eq, ":var_2", "$players_kingdom"),
                    (assign, ":var_1", 0),
                (try_end),
                (ge, ":var_4", 1),
                (try_begin),
                    (eq, ":var_3", "fac_player_supporters_faction"),
                    (store_mul, ":var_7", ":var_4", 2),
                    (store_random_in_range, ":var_8", 0, 20),
                    (try_begin),
                        (neg|ge, ":var_8", ":var_7"),
                        (call_script, "script_add_notification_menu", "mnu_question_peace_offer", ":var_2", 0),
                    (try_end),
                (else_try),
                    (call_script, "script_npc_decision_checklist_peace_or_war", ":var_3", ":var_2", -1),
                    (assign, ":var_9", reg0),
                    (ge, ":var_9", 1),
                    (store_mul, ":var_7", ":var_4", ":var_9"),
                    (store_random_in_range, ":var_8", 0, 20),
                    (neg|ge, ":var_8", ":var_7"),
                    (try_begin),
                        (eq, "$g_include_diplo_explanation", 0),
                        (assign, "$g_include_diplo_explanation", ":var_2"),
                        (str_store_string, s57, "str_s14"),
                    (try_end),
                    (call_script, "script_diplomacy_start_peace_between_kingdoms", ":var_2", ":var_3", ":var_0"),
                (try_end),
            (else_try),
                (ge, ":var_5", 0),
                (call_script, "script_npc_decision_checklist_peace_or_war", ":var_2", ":var_3", -1),
                (neg|gt, reg0, 0),
                (assign, ":var_10", reg0),
                (call_script, "script_diplomacy_faction_get_diplomatic_status_with_faction", ":var_2", ":var_3"),
                (neg|gt, reg0, 0),
                (assign, ":var_11", 0),
                (try_begin),
                    (eq, reg0, -1),
                    (assign, ":var_11", 30),
                (try_end),
                (val_add, ":var_10", ":var_11"),
                (val_sub, ":var_10", 1),
                (val_add, ":var_10", ":var_0"),
                (store_mul, ":var_12", ":var_10", ":var_10"),
                (store_random_in_range, ":var_8", 0, 50),
                (neg|ge, ":var_8", ":var_12"),
                (try_begin),
                    (eq, "$g_include_diplo_explanation", 0),
                    (assign, "$g_include_diplo_explanation", ":var_2"),
                    (str_store_string, s57, "str_s14"),
                (try_end),
                (call_script, "script_diplomacy_start_war_between_kingdoms", ":var_2", ":var_3", ":var_0"),
                (try_begin),
                    (eq, ":var_0", 0),
                    (store_random_in_range, ":var_13", 10, 120),
                    (store_add, ":var_14", ":var_2", 220),
                    (val_sub, ":var_14", "fac_player_supporters_faction"),
                    (faction_set_slot, ":var_3", ":var_14", ":var_13"),
                    (store_add, ":var_14", ":var_3", 220),
                    (val_sub, ":var_14", "fac_player_supporters_faction"),
                    (faction_set_slot, ":var_2", ":var_14", ":var_13"),
                (try_end),
            (try_end),
        (try_end),
    (try_end),
    (try_begin),
        (eq, ":var_1", 1),
        (val_add, "$players_kingdom_days_at_peace", 1),
        (try_begin),
            (eq, "$cheat_mode", 1),
            (assign, reg3, "$players_kingdom_days_at_peace"),
            (display_message, "@{!}DEBUG -- Player's kingdom has had {reg3} days of peace"),
        (try_end),
    (else_try),
        (assign, "$players_kingdom_days_at_peace", 0),
    (try_end),

]),

("exchange_prisoners_between_factions",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (assign, ":var_2", -1),
    (assign, ":var_3", -1),
    (assign, ":var_4", 0),
    (try_begin),
        (this_or_next|eq, "$players_kingdom", ":var_0"),
        (eq, "$players_kingdom", ":var_1"),
        (assign, ":var_2", "fac_player_faction"),
        (assign, ":var_3", "fac_player_supporters_faction"),
        (assign, ":var_4", 1),
    (try_end),
    (try_for_parties, ":var_5"),
        (store_faction_of_party, ":var_6", ":var_5"),
        (this_or_next|eq, ":var_6", ":var_0"),
        (this_or_next|eq, ":var_6", ":var_1"),
        (this_or_next|eq, ":var_6", ":var_2"),
        (eq, ":var_6", ":var_3"),
        (party_get_num_prisoner_stacks, ":var_7", ":var_5"),
        (try_for_range_backwards, ":var_8", 0, ":var_7"),
            (party_prisoner_stack_get_troop_id, ":var_9", ":var_5", ":var_8"),
            (assign, ":var_10", 0),
            (try_begin),
                (is_between, ":var_9", "trp_npc1", "trp_kingdom_1_lord"),
                (eq, ":var_4", 1),
                (assign, ":var_10", 1),
            (else_try),
                (neg|is_between, ":var_9", "trp_npc1", "trp_kingdom_1_lord"),
                (store_troop_faction, ":var_11", ":var_9"),
                (this_or_next|eq, ":var_11", ":var_0"),
                (this_or_next|eq, ":var_11", ":var_1"),
                (this_or_next|eq, ":var_11", ":var_2"),
                (eq, ":var_11", ":var_3"),
                (assign, ":var_10", 1),
            (try_end),
            (eq, ":var_10", 1),
            (try_begin),
                (troop_is_hero, ":var_9"),
                (call_script, "script_remove_troop_from_prison", ":var_9"),
            (try_end),
            (party_prisoner_stack_get_size, ":var_12", ":var_5", ":var_8"),
            (party_remove_prisoners, ":var_5", ":var_9", ":var_12"),
        (try_end),
    (try_end),

]),

("add_notification_menu",
[
    (try_begin),
        (eq, "$g_infinite_camping", 0),
        (store_script_param, ":var_0", 1),
        (store_script_param, ":var_1", 2),
        (store_script_param, ":var_2", 3),
        (assign, ":var_3", 1),
        (try_for_range, ":var_4", 0, ":var_3"),
            (try_begin),
                (troop_slot_ge, "trp_notification_menu_types", ":var_4", 1),
                (val_add, ":var_3", 1),
            (else_try),
                (troop_set_slot, "trp_notification_menu_types", ":var_4", ":var_0"),
                (troop_set_slot, "trp_notification_menu_var1", ":var_4", ":var_1"),
                (troop_set_slot, "trp_notification_menu_var2", ":var_4", ":var_2"),
            (try_end),
        (try_end),
    (try_end),

]),

("finish_quest",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (quest_get_slot, ":var_2", ":var_0", 6),
    (quest_get_slot, ":var_3", ":var_0", 20),
    (quest_get_slot, ":var_4", ":var_0", 21),
    (quest_get_slot, ":var_5", ":var_0", 22),
    (try_begin),
        (neg|ge, ":var_1", 100),
        (val_mul, ":var_4", ":var_1"),
        (val_div, ":var_4", 100),
        (val_mul, ":var_5", ":var_1"),
        (val_div, ":var_5", 100),
        (assign, ":var_6", ":var_1"),
        (val_sub, ":var_6", 75),
        (val_mul, ":var_3", ":var_6"),
        (val_div, ":var_3", 100),
    (else_try),
        (val_div, ":var_3", 4),
        (val_add, ":var_3", 1),
        (call_script, "script_change_player_relation_with_troop", ":var_2", ":var_3"),
    (try_end),
    (add_xp_as_reward, ":var_4"),
    (call_script, "script_troop_add_gold", "trp_player", ":var_5"),
    (call_script, "script_end_quest", ":var_0"),

]),

("get_information_about_troops_position",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, reg3),
    (troop_get_type, reg4, ":var_0"),
    (str_store_troop_name, s2, ":var_0"),
    (assign, ":var_1", 0),
    (troop_get_slot, ":var_2", ":var_0", slot_troop_cur_center),
    (try_begin),
        (gt, ":var_2", 0),
        (is_between, ":var_2", "p_town_1_1", "p_salt_mine"),
        (str_store_party_name_link, s3, ":var_2"),
        (str_store_string, s1, "@{s2} {reg3?was:is currently} at {s3}."),
        (assign, ":var_1", 1),
    (else_try),
        (troop_get_slot, ":var_3", ":var_0", slot_troop_leaded_party),
        (gt, ":var_3", 0),
        (call_script, "script_get_troop_attached_party", ":var_0"),
        (assign, ":var_2", reg0),
        (try_begin),
            (is_between, ":var_2", "p_town_1_1", "p_salt_mine"),
            (str_store_party_name_link, s3, ":var_2"),
            (str_store_string, s1, "@{s2} {reg3?was:is currently} at {s3}."),
            (assign, ":var_1", 1),
        (else_try),
            (get_party_ai_behavior, ":var_4", ":var_3"),
            (eq, ":var_4", 1),
            (get_party_ai_object, ":var_5", ":var_3"),
            (is_between, ":var_5", "p_town_1_1", "p_salt_mine"),
            (call_script, "script_get_closest_center", ":var_3"),
            (str_store_party_name_link, s4, reg0),
            (str_store_party_name_link, s3, ":var_5"),
            (str_store_string, s1, "@{s2} {reg3?was:is} travelling to {s3} and {reg4?she:he} {reg3?was:should be} close to {s4}{reg3?: at the moment}."),
            (assign, ":var_1", 1),
        (else_try),
            (call_script, "script_get_closest_center", ":var_3"),
            (str_store_party_name_link, s3, reg0),
            (str_store_string, s1, "@{s2} {reg3?was:is} in the field and {reg4?she:he} {reg3?was:should be} close to {s3}{reg3?: at the moment}."),
            (assign, ":var_1", 1),
        (try_end),
    (else_try),
        (troop_slot_ge, ":var_0", slot_troop_prisoner_of_party, 0),
        (try_for_range, ":var_2", "p_town_1_1", "p_village_1_1"),
            (party_count_prisoners_of_type, ":var_6", ":var_2", ":var_0"),
            (gt, ":var_6", 0),
            (assign, ":var_1", 1),
            (str_store_party_name_link, s3, ":var_2"),
            (str_store_string, s1, "@{s2} {reg3?was:is} being held captive at {s3}."),
        (try_end),
        (try_begin),
            (eq, ":var_1", 0),
            (str_store_string, s1, "@{s2} {reg3?was:has been} taken captive by {reg4?her:his} enemies."),
            (assign, ":var_1", 1),
        (try_end),
    (try_end),
    (try_begin),
        (eq, ":var_1", 0),
        (str_store_string, s1, "@{reg3?{s2}'s location was unknown:I don't know where {s2} is}."),
    (try_end),
    (assign, reg0, ":var_1"),

]),

("recruit_troop_as_companion",
[
    (store_script_param_1, ":var_0"),
    (troop_set_slot, ":var_0", slot_troop_occupation, 5),
    (troop_set_slot, ":var_0", 400, -1),
    (troop_set_slot, ":var_0", slot_troop_cur_center, -1),
    (troop_set_auto_equip, ":var_0", 0),
    (party_add_members, "p_main_party", ":var_0", 1),
    (str_store_troop_name, s6, ":var_0"),
    (display_message, "@{s6} has joined your party."),
    (troop_set_note_available, ":var_0", 1),
    (try_begin),
        (is_between, ":var_0", "trp_npc1", "trp_kingdom_1_lord"),
        (store_sub, ":var_1", ":var_0", "trp_npc1"),
        (set_achievement_stat, 45, ":var_1", 1),
        (assign, ":var_2", 0),
        (try_for_range, ":var_3", 0, 16),
            (get_achievement_stat, ":var_4", 45, ":var_3"),
            (eq, ":var_4", 1),
            (val_add, ":var_2", 1),
        (try_end),
        (try_begin),
            (ge, ":var_2", 6),
            (unlock_achievement, 45),
        (try_end),
    (try_end),

]),

("setup_random_scene",
[
    (party_get_current_terrain, ":var_0", "p_main_party"),
    (assign, ":var_1", "scn_random_scene"),
    (call_script, "script_get_closest_center", "p_main_party"),
    (party_get_slot, ":var_2", reg0, slot_center_original_faction),
    (try_begin),
        (eq, ":var_0", 2),
        (assign, ":var_1", "scn_random_scene_steppe"),
    (else_try),
        (eq, ":var_0", 3),
        (assign, ":var_1", "scn_random_scene_plain"),
    (else_try),
        (eq, ":var_0", 4),
        (assign, ":var_1", "scn_random_scene_snow"),
    (else_try),
        (eq, ":var_0", 5),
        (assign, ":var_1", "scn_random_scene_desert"),
    (else_try),
        (eq, ":var_0", 10),
        (assign, ":var_1", "scn_random_scene_steppe_forest"),
    (else_try),
        (eq, ":var_0", 11),
        (assign, ":var_1", "scn_random_scene_plain_forest"),
    (else_try),
        (eq, ":var_0", 12),
        (assign, ":var_1", "scn_random_scene_snow_forest"),
    (else_try),
        (eq, ":var_0", 13),
        (assign, ":var_1", "scn_random_scene_desert_forest"),
    (else_try),
        (eq, ":var_0", 0),
        (assign, ":var_1", "scn_water"),
    (else_try),
        (eq, ":var_0", 7),
        (assign, ":var_1", "scn_scene_sea"),
    (try_end),
    (try_begin),
        (assign, "$tom_generate_swamp", 0),
        (assign, "$tom_generate_desert", 0),
        (assign, "$tom_generate_desertv2", 0),
        (assign, "$tom_generate_desertv3", 0),
        (assign, "$tom_generate_iberian", 0),
        (assign, "$tom_generate_iberian2", 0),
        (assign, "$tom_generate_snow", 0),
        (eq, "$tom_use_battlefields", 1),
        (try_begin),
            (eq, ":var_0", 11),
            (store_random_in_range, ":var_3", 0, 101),
            (ge, ":var_3", 60),
            (store_random_in_range, ":var_1", "scn_1257_combat_swamp_0", "scn_1257_combat_rocky_desert_0"),
            (assign, "$tom_generate_swamp", 1),
        (try_end),
        (try_begin),
            (eq, ":var_0", 4),
            (store_random_in_range, ":var_3", 0, 101),
            (ge, ":var_3", 20),
            (assign, "$tom_generate_snow", 1),
            (store_random_in_range, ":var_1", "scn_1257_combat_snow_0", "scn_manor"),
        (try_end),
        (try_begin),
            (eq, ":var_0", 12),
            (store_random_in_range, ":var_3", 0, 101),
            (ge, ":var_3", 20),
            (assign, "$tom_generate_snow", 2),
            (store_random_in_range, ":var_1", "scn_1257_combat_snow_0", "scn_manor"),
        (try_end),
        (try_begin),
            (eq, ":var_0", 3),
            (store_random_in_range, ":var_3", 0, 101),
            (ge, ":var_3", 80),
            (store_random_in_range, ":var_1", "scn_1257_combat_euro_0", "scn_1257_combat_iberian_hillside_0"),
        (try_end),
        (try_begin),
            (this_or_next|eq, ":var_0", 5),
            (eq, ":var_0", 13),
            (store_random_in_range, ":var_3", 0, 101),
            (try_begin),
                (ge, ":var_3", 80),
                (assign, "$tom_generate_desert", 1),
                (assign, ":var_1", "scn_1257_combat_rocky_desert_0"),
            (else_try),
                (ge, ":var_3", 30),
                (assign, "$tom_generate_desertv2", 1),
                (assign, ":var_1", "scn_1257_combat_rocky_desert_0"),
            (try_end),
        (try_end),
        (try_begin),
            (this_or_next|eq, ":var_0", 10),
            (eq, ":var_0", 2),
            (try_begin),
                (this_or_next|eq, ":var_2", "fac_kingdom_3"),
                (this_or_next|eq, ":var_2", "fac_kingdom_5"),
                (eq, ":var_2", "fac_kingdom_15"),
                (store_random_in_range, ":var_1", "scn_1257_combat_steppe_0", "scn_1257_combat_euro_0"),
            (else_try),
                (eq, ":var_0", 10),
                (assign, "$tom_generate_iberian2", 1),
                (assign, ":var_1", "scn_1257_combat_iberian_0"),
            (else_try),
                (assign, "$tom_generate_iberian", 1),
                (assign, ":var_1", "scn_1257_combat_iberian_0"),
            (try_end),
        (try_end),
        (set_fixed_point_multiplier, 100),
        (party_get_position, pos15, "p_main_party"),
        (position_get_x, ":var_4", pos15),
        (position_get_y, ":var_5", pos15),
        (try_begin),
            (assign, ":var_6", 0),
            (try_begin),
                (neg|ge, ":var_4", 18036),
                (neg|ge, ":var_5", -20834),
                (gt, ":var_4", 15890),
                (gt, ":var_5", -25502),
                (assign, ":var_6", 1),
            (else_try),
                (neg|ge, ":var_4", 22720),
                (neg|ge, ":var_5", -18627),
                (gt, ":var_4", 21597),
                (gt, ":var_5", -20013),
                (assign, ":var_6", 1),
            (try_end),
            (eq, ":var_6", 1),
            (store_random_in_range, ":var_1", "scn_sitd_battle_nile_1", "scn_1257_combat_snow_0"),
            (assign, "$tom_generate_desertv3", 1),
        (else_try),
            (neg|ge, ":var_4", -18195),
            (neg|ge, ":var_5", 13475),
            (gt, ":var_4", -19389),
            (gt, ":var_5", 10326),
            (store_random_in_range, ":var_1", "scn_1257_combat_euro_hillside_0", "scn_1257_combat_euro_hillside_4"),
            (assign, "$tom_generate_euro_hillside", 1),
            (assign, "$tom_generate_iberian2", 0),
            (assign, "$tom_generate_iberian", 0),
            (assign, "$tom_generate_swamp", 0),
        (else_try),
            (neg|ge, ":var_4", 21714),
            (neg|ge, ":var_5", -13331),
            (gt, ":var_4", 14265),
            (gt, ":var_5", -14667),
            (store_random_in_range, ":var_1", "scn_1257_combat_mountain_0", "scn_1257_combat_river_0"),
            (assign, "$tom_generate_iberian2", 0),
            (assign, "$tom_generate_iberian", 0),
            (assign, "$tom_generate_swamp", 0),
        (else_try),
            (neg|ge, ":var_4", 27256),
            (neg|ge, ":var_5", -7255),
            (gt, ":var_4", 4818),
            (gt, ":var_5", -14562),
            (store_random_in_range, ":var_1", "scn_1257_combat_iberian_hillside_0", "scn_1257_combat_euro_hillside_0"),
            (try_begin),
                (this_or_next|eq, ":var_0", 10),
                (eq, ":var_0", 11),
                (assign, "$tom_generate_iberian2", 1),
                (assign, "$tom_generate_iberian", 0),
                (assign, "$tom_generate_swamp", 0),
            (else_try),
                (assign, "$tom_generate_iberian", 1),
                (assign, "$tom_generate_iberian2", 0),
                (assign, "$tom_generate_swamp", 0),
            (try_end),
        (else_try),
            (neg|ge, ":var_4", -1149),
            (neg|ge, ":var_5", -2543),
            (gt, ":var_4", -5458),
            (gt, ":var_5", -5934),
            (store_random_in_range, ":var_1", "scn_1257_combat_iberian_hillside_0", "scn_1257_combat_euro_hillside_0"),
            (try_begin),
                (this_or_next|eq, ":var_0", 10),
                (eq, ":var_0", 11),
                (assign, "$tom_generate_iberian2", 1),
                (assign, "$tom_generate_iberian", 0),
                (assign, "$tom_generate_swamp", 0),
            (else_try),
                (assign, "$tom_generate_iberian", 1),
                (assign, "$tom_generate_iberian2", 0),
                (assign, "$tom_generate_swamp", 0),
            (try_end),
        (else_try),
            (neg|ge, ":var_4", 1953),
            (neg|ge, ":var_5", 405),
            (gt, ":var_4", -8779),
            (gt, ":var_5", -6290),
            (store_random_in_range, ":var_1", "scn_1257_combat_mountain_0", "scn_1257_combat_river_0"),
            (assign, "$tom_generate_iberian2", 0),
            (assign, "$tom_generate_iberian", 0),
            (assign, "$tom_generate_swamp", 0),
        (else_try),
            (neg|ge, ":var_4", -9696),
            (neg|ge, ":var_5", -2732),
            (gt, ":var_4", -11853),
            (gt, ":var_5", -4263),
            (store_random_in_range, ":var_1", "scn_1257_combat_mountain_0", "scn_1257_combat_river_0"),
            (assign, "$tom_generate_iberian2", 0),
            (assign, "$tom_generate_iberian", 0),
            (assign, "$tom_generate_swamp", 0),
        (else_try),
            (neg|ge, ":var_4", -11549),
            (neg|ge, ":var_5", -5660),
            (gt, ":var_4", -16034),
            (gt, ":var_5", -6883),
            (store_random_in_range, ":var_1", "scn_1257_combat_mountain_0", "scn_1257_combat_river_0"),
            (assign, "$tom_generate_iberian2", 0),
            (assign, "$tom_generate_iberian", 0),
            (assign, "$tom_generate_swamp", 0),
        (else_try),
            (neg|ge, ":var_4", 10894),
            (neg|ge, ":var_5", 2023),
            (gt, ":var_4", 4719),
            (gt, ":var_5", 450),
            (store_random_in_range, ":var_1", "scn_1257_combat_mountain_0", "scn_1257_combat_river_0"),
            (assign, "$tom_generate_iberian2", 0),
            (assign, "$tom_generate_iberian", 0),
            (assign, "$tom_generate_swamp", 0),
        (else_try),
            (neg|ge, ":var_4", 11784),
            (neg|ge, ":var_5", 253),
            (gt, ":var_4", 8089),
            (gt, ":var_5", -3882),
            (store_random_in_range, ":var_1", "scn_1257_combat_mountain_3", "scn_1257_combat_mountain_4"),
            (assign, "$tom_generate_iberian2", 0),
            (assign, "$tom_generate_iberian", 0),
            (assign, "$tom_generate_swamp", 0),
        (else_try),
            (neg|ge, ":var_4", -17860),
            (neg|ge, ":var_5", -5638),
            (gt, ":var_4", -21620),
            (gt, ":var_5", -7779),
            (store_random_in_range, ":var_1", "scn_1257_combat_iberian_hillside_0", "scn_1257_combat_euro_hillside_0"),
            (try_begin),
                (this_or_next|eq, ":var_0", 10),
                (eq, ":var_0", 11),
                (assign, "$tom_generate_iberian2", 1),
                (assign, "$tom_generate_iberian", 0),
                (assign, "$tom_generate_swamp", 0),
            (else_try),
                (assign, "$tom_generate_iberian", 1),
                (assign, "$tom_generate_iberian2", 0),
                (assign, "$tom_generate_swamp", 0),
            (try_end),
        (else_try),
            (neg|ge, ":var_4", -4636),
            (neg|ge, ":var_5", -6318),
            (gt, ":var_4", -5807),
            (gt, ":var_5", -8170),
            (store_random_in_range, ":var_1", "scn_1257_combat_iberian_hillside_0", "scn_1257_combat_euro_hillside_0"),
            (try_begin),
                (this_or_next|eq, ":var_0", 10),
                (eq, ":var_0", 11),
                (assign, "$tom_generate_iberian2", 1),
                (assign, "$tom_generate_iberian", 0),
                (assign, "$tom_generate_swamp", 0),
            (else_try),
                (assign, "$tom_generate_iberian", 1),
                (assign, "$tom_generate_iberian2", 0),
                (assign, "$tom_generate_swamp", 0),
            (try_end),
        (else_try),
            (neg|ge, ":var_4", 439),
            (neg|ge, ":var_5", -5315),
            (gt, ":var_4", -1729),
            (gt, ":var_5", -8618),
            (store_random_in_range, ":var_1", "scn_1257_combat_iberian_hillside_0", "scn_1257_combat_euro_hillside_0"),
            (try_begin),
                (this_or_next|eq, ":var_0", 10),
                (eq, ":var_0", 11),
                (assign, "$tom_generate_iberian2", 1),
            (else_try),
                (assign, "$tom_generate_iberian", 1),
            (try_end),
        (else_try),
            (neg|ge, ":var_4", 2532),
            (neg|ge, ":var_5", -8630),
            (gt, ":var_4", 1002),
            (gt, ":var_5", -11365),
            (store_random_in_range, ":var_1", "scn_1257_combat_iberian_hillside_0", "scn_1257_combat_euro_hillside_0"),
            (try_begin),
                (this_or_next|eq, ":var_0", 10),
                (eq, ":var_0", 11),
                (assign, "$tom_generate_iberian2", 1),
                (assign, "$tom_generate_iberian", 0),
                (assign, "$tom_generate_swamp", 0),
            (else_try),
                (assign, "$tom_generate_iberian", 1),
                (assign, "$tom_generate_iberian2", 0),
                (assign, "$tom_generate_swamp", 0),
            (try_end),
        (else_try),
            (neg|ge, ":var_4", 954),
            (neg|ge, ":var_5", -12249),
            (gt, ":var_4", -537),
            (gt, ":var_5", -13150),
            (store_random_in_range, ":var_1", "scn_1257_combat_iberian_hillside_0", "scn_1257_combat_euro_hillside_0"),
            (try_begin),
                (this_or_next|eq, ":var_0", 10),
                (eq, ":var_0", 11),
                (assign, "$tom_generate_iberian2", 1),
            (else_try),
                (assign, "$tom_generate_iberian", 1),
            (try_end),
        (try_end),
    (try_end),
    (jump_to_scene, ":var_1"),

]),

("enter_dungeon",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (set_jump_mission, ":var_1"),
    (mission_tpl_entry_set_override_flags, ":var_1", 0, 256),
    (try_begin),
        (eq, "$sneaked_into_town", 1),
        (mission_tpl_entry_set_override_flags, ":var_1", 0, 447),
        (mission_tpl_entry_clear_override_items, ":var_1", 0),
        (mission_tpl_entry_add_override_item, ":var_1", 0, "itm_pilgrim_hood"),
        (mission_tpl_entry_add_override_item, ":var_1", 0, "itm_pilgrim_disguise"),
        (mission_tpl_entry_add_override_item, ":var_1", 0, "itm_practice_staff"),
        (mission_tpl_entry_add_override_item, ":var_1", 0, "itm_throwing_daggers"),
    (try_end),
    (party_get_slot, ":var_2", ":var_0", slot_town_prison),
    (modify_visitors_at_site, ":var_2"),
    (reset_visitors),
    (assign, ":var_3", 16),
    (call_script, "script_get_heroes_attached_to_center_as_prisoner", ":var_0", "p_temp_party"),
    (party_get_num_companion_stacks, ":var_4", "p_temp_party"),
    (try_for_range, ":var_5", 0, ":var_4"),
        (party_stack_get_troop_id, ":var_6", "p_temp_party", ":var_5"),
        (assign, ":var_7", 0),
        (try_begin),
            (party_slot_eq, ":var_0", slot_town_lord, "trp_player"),
        (else_try),
            (call_script, "script_cf_prisoner_offered_parole", ":var_6"),
            (assign, ":var_7", 1),
        (else_try),
            (assign, ":var_7", 0),
        (try_end),
        (eq, ":var_7", 0),
        (neg|ge, ":var_3", 32),
        (set_visitor, ":var_3", ":var_6"),
        (val_add, ":var_3", 1),
    (try_end),
    (set_jump_entry, 0),
    (jump_to_scene, ":var_2"),
    (scene_set_slot, ":var_2", 0, 1),
    (change_screen_mission),

]),

("enter_court",
[
    (store_script_param_1, ":var_0"),
    (assign, "$talk_context", 1),
    (set_jump_mission, "mt_visit_town_castle"),
    (mission_tpl_entry_clear_override_items, "mt_visit_town_castle", 0),
    (party_get_slot, ":var_1", ":var_0", slot_town_castle),
    (modify_visitors_at_site, ":var_1"),
    (reset_visitors),
    (store_faction_of_party, ":var_2", ":var_0"),
    (faction_get_slot, ":var_3", ":var_2", slot_faction_guard_troop),
    (try_begin),
        (neg|gt, ":var_3", 0),
        (assign, ":var_3", "trp_euro_spearman_3"),
    (try_end),
    (set_visitor, 6, ":var_3"),
    (set_visitor, 7, ":var_3"),
    (assign, ":var_4", 16),
    (try_begin),
        (troop_get_slot, ":var_5", "trp_player", slot_troop_spouse),
        (gt, ":var_5", 0),
        (troop_slot_eq, ":var_5", slot_troop_cur_center, ":var_0"),
        (set_visitor, ":var_4", ":var_5"),
        (val_add, ":var_4", 1),
    (else_try),
        (troop_get_slot, ":var_6", "trp_player", slot_troop_betrothed),
        (gt, ":var_6", 0),
        (troop_slot_eq, ":var_6", slot_troop_cur_center, ":var_0"),
        (set_visitor, ":var_4", ":var_6"),
        (val_add, ":var_4", 1),
    (try_end),
    (try_begin),
        (eq, "$g_player_court", ":var_0"),
        (gt, "$g_player_minister", 0),
        (neg|troop_slot_eq, "trp_player", slot_troop_spouse, "$g_player_minister"),
        (set_visitor, ":var_4", "$g_player_minister"),
        (val_add, ":var_4", 1),
    (try_end),
    (try_begin),
        (gt, "$g_player_chamberlain", 0),
        (assign, "$g_player_chamberlain", "trp_dplmc_chamberlain"),
        (party_get_slot, ":var_7", ":var_0", slot_town_lord),
        (eq, ":var_7", "trp_player"),
        (set_visitor, ":var_4", "$g_player_chamberlain"),
        (val_add, ":var_4", 1),
    (try_end),
    (try_begin),
        (gt, "$g_player_constable", 0),
        (assign, "$g_player_constable", "trp_dplmc_constable"),
        (party_get_slot, ":var_7", ":var_0", slot_town_lord),
        (eq, ":var_7", "trp_player"),
        (set_visitor, ":var_4", "$g_player_constable"),
        (val_add, ":var_4", 1),
    (try_end),
    (try_begin),
        (gt, "$g_player_chancellor", 0),
        (assign, "$g_player_chancellor", "trp_dplmc_chancellor"),
        (party_get_slot, ":var_7", ":var_0", slot_town_lord),
        (eq, ":var_7", "trp_player"),
        (set_visitor, ":var_4", "$g_player_chancellor"),
        (val_add, ":var_4", 1),
    (try_end),
    (try_begin),
        (eq, "$g_player_court", ":var_0"),
        (faction_slot_eq, ":var_2", slot_faction_leader, "trp_player"),
        (try_for_range, ":var_8", "trp_npc1", "trp_knight_1_1_wife"),
            (store_troop_faction, ":var_9", ":var_8"),
            (eq, ":var_9", "fac_player_supporters_faction"),
            (troop_slot_eq, ":var_8", slot_troop_occupation, 0),
            (neg|troop_slot_ge, ":var_8", slot_troop_prisoner_of_party, 0),
            (neg|eq, ":var_8", "$g_player_minister"),
            (set_visitor, ":var_4", ":var_8"),
            (val_add, ":var_4", 1),
        (try_end),
    (try_end),
    (call_script, "script_get_heroes_attached_to_center", ":var_0", "p_temp_party"),
    (party_get_num_companion_stacks, ":var_10", "p_temp_party"),
    (try_for_range, ":var_11", 0, ":var_10"),
        (party_stack_get_troop_id, ":var_12", "p_temp_party", ":var_11"),
        (gt, ":var_12", 0),
        (neg|ge, ":var_4", 32),
        (set_visitor, ":var_4", ":var_12"),
        (val_add, ":var_4", 1),
    (try_end),
    (try_for_range, ":var_13", "trp_knight_1_1_wife", "trp_heroes_end"),
        (neg|eq, ":var_13", "trp_knight_1_1_wife"),
        (troop_slot_eq, ":var_13", slot_troop_cur_center, ":var_0"),
        (assign, ":var_14", 0),
        (try_begin),
            (this_or_next|troop_slot_eq, "trp_player", slot_troop_spouse, ":var_13"),
            (this_or_next|troop_slot_eq, "trp_player", slot_troop_betrothed, ":var_13"),
            (this_or_next|troop_slot_eq, ":var_13", slot_troop_spouse, "trp_player"),
            (troop_slot_eq, ":var_13", slot_troop_betrothed, "trp_player"),
            (assign, ":var_14", 0),
            (try_begin),
                (eq, "$cheat_mode", 1),
                (str_store_troop_name, s4, ":var_13"),
                (display_message, "str_s4_is_present_at_the_center_and_in_place_of_honor"),
            (try_end),
        (else_try),
            (store_troop_faction, ":var_15", ":var_13"),
            (neg|eq, ":var_15", ":var_2"),
            (assign, ":var_14", 1),
            (try_begin),
                (eq, "$cheat_mode", 1),
                (str_store_troop_name, s4, ":var_13"),
                (display_message, "str_s4_is_present_at_the_center_as_a_refugee"),
            (try_end),
        (else_try),
            (troop_slot_ge, ":var_13", slot_troop_spouse, 1),
            (try_begin),
                (faction_slot_eq, ":var_2", slot_faction_ai_state, 6),
                (faction_slot_eq, ":var_2", slot_faction_ai_object, ":var_0"),
                (assign, ":var_14", 0),
                (try_begin),
                    (eq, "$cheat_mode", 1),
                    (str_store_troop_name, s4, ":var_13"),
                    (display_message, "str_s4_is_present_at_the_center_and_not_attending_the_feast"),
                (try_end),
            (else_try),
                (assign, ":var_14", 1),
                (try_begin),
                    (eq, "$cheat_mode", 1),
                    (str_store_troop_name, s4, ":var_13"),
                    (display_message, "str_s4_is_present_at_the_center_and_is_married"),
                (try_end),
            (try_end),
        (else_try),
            (faction_slot_eq, ":var_2", slot_faction_ai_state, 6),
            (faction_slot_eq, ":var_2", slot_faction_ai_object, ":var_0"),
            (assign, ":var_14", 1),
            (try_begin),
                (eq, "$cheat_mode", 1),
                (str_store_troop_name, s4, ":var_13"),
                (display_message, "@{!}DEBUG -- {s4} is present at the center and is attending the feast"),
            (try_end),
        (else_try),
            (troop_slot_ge, ":var_13", slot_troop_met, 2),
            (assign, ":var_14", 0),
            (try_begin),
                (eq, "$cheat_mode", 1),
                (str_store_troop_name, s4, ":var_13"),
                (display_message, "@{!}DEBUG -- {s4} is present at the center and is awaiting the player in private"),
            (try_end),
        (else_try),
            (call_script, "script_get_kingdom_lady_social_determinants", ":var_13"),
            (call_script, "script_npc_decision_checklist_male_guardian_assess_suitor", reg0, "trp_player"),
            (gt, reg0, 0),
            (assign, ":var_14", 1),
            (try_begin),
                (eq, "$cheat_mode", 1),
                (str_store_troop_name, s4, ":var_13"),
                (display_message, "@{!}DEBUG -- {s4} is present at the center and is allowed to meet the player"),
            (try_end),
        (else_try),
            (try_begin),
                (eq, "$cheat_mode", 1),
                (str_store_troop_name, s4, ":var_13"),
                (display_message, "@{!}DEBUG -- {s4}is present at the center and is not allowed to meet the player"),
            (try_end),
        (try_end),
        (eq, ":var_14", 1),
        (neg|ge, ":var_4", 32),
        (set_visitor, ":var_4", ":var_13"),
        (val_add, ":var_4", 1),
    (try_end),
    (set_jump_entry, 0),
    (jump_to_scene, ":var_1"),
    (scene_set_slot, ":var_1", 0, 1),
    (change_screen_mission),

]),

("setup_meet_lady",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (troop_set_slot, ":var_0", slot_troop_love_interests_end, "trp_player"),
    (set_jump_mission, "mt_visit_town_castle"),
    (party_get_slot, ":var_2", ":var_1", slot_town_castle),
    (modify_visitors_at_site, ":var_2"),
    (reset_visitors),
    (troop_set_age, "trp_nurse_for_lady", 100),
    (set_visitor, 7, "trp_nurse_for_lady"),
    (assign, ":var_3", 16),
    (set_visitor, ":var_3", ":var_0"),
    (assign, "$talk_context", 16),
    (jump_to_scene, ":var_2"),
    (scene_set_slot, ":var_2", 0, 1),
    (change_screen_mission),

]),

("find_high_ground_around_pos1",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (val_mul, ":var_1", 100),
    (get_scene_boundaries, pos10, pos11),
    (team_get_leader, ":var_2", ":var_0"),
    (agent_get_position, pos1, ":var_2"),
    (set_fixed_point_multiplier, 100),
    (position_get_x, ":var_3", pos1),
    (position_get_y, ":var_4", pos1),
    (store_sub, ":var_5", ":var_3", ":var_1"),
    (store_sub, ":var_6", ":var_4", ":var_1"),
    (store_add, ":var_7", ":var_3", ":var_1"),
    (store_add, ":var_8", ":var_4", ":var_1"),
    (position_get_x, ":var_9", pos10),
    (position_get_x, ":var_10", pos11),
    (position_get_y, ":var_11", pos10),
    (position_get_y, ":var_12", pos11),
    (val_add, ":var_9", 2000),
    (val_sub, ":var_10", 2000),
    (val_add, ":var_11", 2000),
    (val_sub, ":var_12", 2000),
    (val_max, ":var_5", ":var_9"),
    (val_max, ":var_6", ":var_11"),
    (val_min, ":var_7", ":var_10"),
    (val_min, ":var_8", ":var_12"),
    (store_div, ":var_13", ":var_5", 100),
    (store_div, ":var_14", ":var_6", 100),
    (store_div, ":var_15", ":var_7", 100),
    (store_div, ":var_16", ":var_8", 100),
    (assign, ":var_17", -10000),
    (copy_position, pos52, pos1),
    (init_position, pos15),
    (try_for_range, ":var_18", ":var_13", ":var_15"),
        (store_mul, ":var_19", ":var_18", 100),
        (try_for_range, ":var_20", ":var_14", ":var_16"),
            (store_mul, ":var_21", ":var_20", 100),
            (position_set_x, pos15, ":var_19"),
            (position_set_y, pos15, ":var_21"),
            (position_set_z, pos15, 10000),
            (position_set_z_to_ground_level, pos15),
            (position_get_z, ":var_22", pos15),
            (try_begin),
                (gt, ":var_22", ":var_17"),
                (copy_position, pos52, pos15),
                (assign, ":var_17", ":var_22"),
            (try_end),
        (try_end),
    (try_end),

]),

("select_battle_tactic",
[
    (assign, "$ai_team_1_battle_tactic", 0),
    (get_player_agent_no, ":var_0"),
    (agent_get_team, ":var_1", ":var_0"),
    (try_begin),
        (num_active_teams_le, 2),
        (try_begin),
            (eq, ":var_1", 0),
            (assign, "$ai_team_1", 1),
        (else_try),
            (assign, "$ai_team_1", 0),
        (try_end),
        (assign, "$ai_team_2", -1),
    (else_try),
        (try_begin),
            (eq, ":var_1", 0),
            (assign, "$ai_team_1", 1),
        (else_try),
            (assign, "$ai_team_1", 0),
        (try_end),
        (store_add, "$ai_team_2", ":var_1", 2),
    (try_end),
    (call_script, "script_select_battle_tactic_aux", "$ai_team_1", 0),
    (assign, "$ai_team_1_battle_tactic", reg0),
    (try_begin),
        (ge, "$ai_team_2", 0),
        (assign, ":var_2", 0),
        (try_begin),
            (eq, "$ai_team_1_battle_tactic", 1),
            (assign, ":var_2", 1),
        (try_end),
        (call_script, "script_select_battle_tactic_aux", "$ai_team_2", ":var_2"),
        (assign, "$ai_team_2_battle_tactic", reg0),
    (try_end),

]),

("select_battle_tactic_aux",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (assign, ":var_2", 0),
    (get_player_agent_no, ":var_3"),
    (agent_get_team, ":var_4", ":var_3"),
    (try_begin),
        (eq, "$cant_leave_encounter", 1),
        (teams_are_enemies, ":var_0", ":var_4"),
        (assign, ":var_1", 1),
    (try_end),
    (call_script, "script_team_get_class_percentages", ":var_0", 0),
    (assign, ":var_5", reg1),
    (assign, ":var_6", reg2),
    (call_script, "script_team_get_class_percentages", ":var_0", 1),
    (store_random_in_range, ":var_7", 0, 100),
    (try_begin),
        (assign, ":var_8", 0),
        (try_begin),
            (teams_are_enemies, ":var_0", ":var_4"),
            (party_slot_eq, "$g_enemy_party", slot_party_type, 13),
            (assign, ":var_8", 1),
        (else_try),
            (neg|teams_are_enemies, ":var_0", ":var_4"),
            (gt, "$g_ally_party", 0),
            (party_slot_eq, "$g_ally_party", slot_party_type, 13),
            (assign, ":var_8", 1),
        (try_end),
        (eq, ":var_8", 1),
        (store_faction_of_party, ":var_9", "$g_enemy_party"),
        (neg|eq, ":var_9", "fac_kingdom_3"),
        (neg|eq, ":var_9", "fac_kingdom_27"),
        (try_begin),
            (eq, ":var_1", 0),
            (gt, ":var_5", 50),
            (neg|ge, ":var_6", 35),
            (assign, ":var_2", 1),
        (else_try),
            (neg|ge, ":var_7", 80),
            (assign, ":var_2", 2),
        (try_end),
    (try_end),
    (assign, reg0, ":var_2"),

]),

("battle_tactic_init",
[
    (call_script, "script_battle_tactic_init_aux", "$ai_team_1", "$ai_team_1_battle_tactic"),
    (try_begin),
        (ge, "$ai_team_2", 0),
        (call_script, "script_battle_tactic_init_aux", "$ai_team_2", "$ai_team_2_battle_tactic"),
    (try_end),
    (try_for_agents, ":var_0"),
        (agent_set_slot, ":var_0", slot_agent_is_running_away, 0),
    (try_end),

]),

("orig_battle_tactic_init_aux",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (team_get_leader, ":var_2", ":var_0"),
    (try_begin),
        (eq, ":var_1", 1),
        (agent_get_position, pos1, ":var_2"),
        (call_script, "script_find_high_ground_around_pos1", ":var_0", 30),
        (copy_position, pos1, pos52),
        (call_script, "script_find_high_ground_around_pos1", ":var_0", 30),
        (copy_position, pos1, pos52),
        (call_script, "script_find_high_ground_around_pos1", ":var_0", 30),
        (team_give_order, ":var_0", 9, 0),
        (team_set_order_position, ":var_0", 9, pos52),
        (team_give_order, ":var_0", 1, 5),
        (team_give_order, ":var_0", 1, 5),
    (else_try),
        (eq, ":var_1", 2),
        (team_get_leader, ":var_2", ":var_0"),
        (ge, ":var_2", 0),
        (agent_set_speed_limit, ":var_2", 8),
        (agent_get_position, pos60, ":var_2"),
        (team_give_order, ":var_0", 9, 0),
        (team_set_order_position, ":var_0", 9, pos60),
    (try_end),

]),

("calculate_team_powers",
[
    (store_script_param, ":var_0", 1),
    (try_begin),
        (assign, ":var_1", 0),
        (agent_is_ally, ":var_0"),
        (assign, ":var_1", 1),
    (try_end),
    (assign, ":var_2", 0),
    (assign, ":var_3", 0),
    (try_for_agents, ":var_4"),
        (agent_is_human, ":var_4"),
        (agent_is_alive, ":var_4"),
        (try_begin),
            (assign, ":var_5", 0),
            (agent_is_ally, ":var_4"),
            (assign, ":var_5", 1),
        (try_end),
        (try_begin),
            (agent_get_horse, ":var_6", ":var_4"),
            (neg|eq, ":var_6", -1),
            (assign, ":var_7", 2),
        (else_try),
            (assign, ":var_7", 1),
        (try_end),
        (try_begin),
            (eq, ":var_1", ":var_5"),
            (val_add, ":var_2", ":var_7"),
        (else_try),
            (val_add, ":var_3", ":var_7"),
        (try_end),
    (try_end),
    (assign, reg0, ":var_2"),
    (assign, reg1, ":var_3"),

]),

("apply_effect_of_other_people_on_courage_scores",
[
    (get_player_agent_no, ":var_0"),
    (try_for_agents, ":var_1"),
        (agent_is_human, ":var_1"),
        (agent_is_alive, ":var_1"),
        (neg|eq, ":var_1", ":var_0"),
        (agent_get_position, pos0, ":var_1"),
        (try_begin),
            (agent_is_ally, ":var_1"),
            (assign, ":var_2", 1),
        (else_try),
            (assign, ":var_2", 0),
        (try_end),
        (try_for_agents, ":var_3"),
            (agent_is_human, ":var_3"),
            (agent_is_alive, ":var_3"),
            (neg|eq, ":var_1", ":var_3"),
            (try_begin),
                (agent_is_ally, ":var_3"),
                (assign, ":var_4", 1),
            (else_try),
                (assign, ":var_4", 0),
            (try_end),
            (eq, ":var_2", ":var_4"),
            (agent_get_slot, ":var_5", ":var_3", slot_agent_is_running_away),
            (try_begin),
                (eq, ":var_3", ":var_0"),
                (assign, ":var_6", 6),
            (else_try),
                (agent_get_troop_id, ":var_7", ":var_3"),
                (troop_is_hero, ":var_7"),
                (try_begin),
                    (neg|eq, ":var_5", 1),
                    (store_agent_hit_points, ":var_8", ":var_3"),
                    (try_begin),
                        (eq, ":var_8", 100),
                        (assign, ":var_6", 6),
                    (else_try),
                        (ge, ":var_8", 75),
                        (assign, ":var_6", 5),
                    (else_try),
                        (ge, ":var_8", 60),
                        (assign, ":var_6", 4),
                    (else_try),
                        (ge, ":var_8", 45),
                        (assign, ":var_6", 3),
                    (else_try),
                        (ge, ":var_8", 30),
                        (assign, ":var_6", 2),
                    (else_try),
                        (ge, ":var_8", 15),
                        (assign, ":var_6", 1),
                    (try_end),
                (else_try),
                    (assign, ":var_6", 4),
                (try_end),
            (else_try),
                (try_begin),
                    (neg|eq, ":var_5", 1),
                    (store_agent_hit_points, ":var_8", ":var_3"),
                    (try_begin),
                        (eq, ":var_8", 100),
                        (assign, ":var_6", 4),
                    (else_try),
                        (ge, ":var_8", 75),
                        (assign, ":var_6", 3),
                    (else_try),
                        (ge, ":var_8", 50),
                        (assign, ":var_6", 2),
                    (else_try),
                        (ge, ":var_8", 25),
                        (assign, ":var_6", 1),
                    (try_end),
                    (try_begin),
                        (agent_is_ally, ":var_3"),
                        (val_sub, ":var_6", 1),
                    (try_end),
                (else_try),
                    (assign, ":var_6", 2),
                (try_end),
            (try_end),
            (try_begin),
                (neg|eq, ":var_5", 1),
                (val_mul, ":var_6", 1),
                (try_begin),
                    (agent_get_slot, ":var_5", ":var_1", slot_agent_is_running_away),
                    (eq, ":var_5", 0),
                    (val_mul, ":var_6", 0),
                (try_end),
            (else_try),
                (try_begin),
                    (agent_get_slot, ":var_5", ":var_3", slot_agent_is_running_away),
                    (eq, ":var_5", 0),
                    (val_mul, ":var_6", -2),
                (else_try),
                    (val_mul, ":var_6", -1),
                (try_end),
            (try_end),
            (neg|eq, ":var_6", 0),
            (agent_get_position, pos1, ":var_3"),
            (get_distance_between_positions, ":var_9", pos0, pos1),
            (try_begin),
                (ge, ":var_6", 0),
                (try_begin),
                    (neg|ge, ":var_9", 2000),
                    (agent_get_slot, ":var_10", ":var_1", slot_agent_courage_score),
                    (val_mul, ":var_6", 50),
                    (val_add, ":var_10", ":var_6"),
                    (agent_set_slot, ":var_1", slot_agent_courage_score, ":var_10"),
                (else_try),
                    (neg|ge, ":var_9", 4000),
                    (agent_get_slot, ":var_10", ":var_1", slot_agent_courage_score),
                    (val_mul, ":var_6", 40),
                    (val_add, ":var_10", ":var_6"),
                    (agent_set_slot, ":var_1", slot_agent_courage_score, ":var_10"),
                (else_try),
                    (neg|ge, ":var_9", 7000),
                    (agent_get_slot, ":var_10", ":var_1", slot_agent_courage_score),
                    (val_mul, ":var_6", 30),
                    (val_add, ":var_10", ":var_6"),
                    (agent_set_slot, ":var_1", slot_agent_courage_score, ":var_10"),
                (else_try),
                    (neg|ge, ":var_9", 11000),
                    (agent_get_slot, ":var_10", ":var_1", slot_agent_courage_score),
                    (val_mul, ":var_6", 20),
                    (val_add, ":var_10", ":var_6"),
                    (agent_set_slot, ":var_1", slot_agent_courage_score, ":var_10"),
                (else_try),
                    (neg|ge, ":var_9", 16000),
                    (agent_get_slot, ":var_10", ":var_1", slot_agent_courage_score),
                    (val_mul, ":var_6", 10),
                    (val_add, ":var_10", ":var_6"),
                    (agent_set_slot, ":var_1", slot_agent_courage_score, ":var_10"),
                (try_end),
            (else_try),
                (try_begin),
                    (neg|ge, ":var_9", 200),
                    (agent_get_slot, ":var_10", ":var_1", slot_agent_courage_score),
                    (val_mul, ":var_6", 15),
                    (val_add, ":var_10", ":var_6"),
                    (agent_set_slot, ":var_1", slot_agent_courage_score, ":var_10"),
                (else_try),
                    (neg|ge, ":var_9", 400),
                    (agent_get_slot, ":var_10", ":var_1", slot_agent_courage_score),
                    (val_mul, ":var_6", 13),
                    (val_add, ":var_10", ":var_6"),
                    (agent_set_slot, ":var_1", slot_agent_courage_score, ":var_10"),
                (else_try),
                    (neg|ge, ":var_9", 600),
                    (agent_get_slot, ":var_10", ":var_1", slot_agent_courage_score),
                    (val_mul, ":var_6", 11),
                    (val_add, ":var_10", ":var_6"),
                    (agent_set_slot, ":var_1", slot_agent_courage_score, ":var_10"),
                (else_try),
                    (neg|ge, ":var_9", 800),
                    (agent_get_slot, ":var_10", ":var_1", slot_agent_courage_score),
                    (val_mul, ":var_6", 9),
                    (val_add, ":var_10", ":var_6"),
                    (agent_set_slot, ":var_1", slot_agent_courage_score, ":var_10"),
                (else_try),
                    (neg|ge, ":var_9", 1200),
                    (agent_get_slot, ":var_10", ":var_1", slot_agent_courage_score),
                    (val_mul, ":var_6", 7),
                    (val_add, ":var_10", ":var_6"),
                    (agent_set_slot, ":var_1", slot_agent_courage_score, ":var_10"),
                (else_try),
                    (neg|ge, ":var_9", 2400),
                    (agent_get_slot, ":var_10", ":var_1", slot_agent_courage_score),
                    (val_mul, ":var_6", 5),
                    (val_add, ":var_10", ":var_6"),
                    (agent_set_slot, ":var_1", slot_agent_courage_score, ":var_10"),
                (else_try),
                    (neg|ge, ":var_9", 4800),
                    (agent_get_slot, ":var_10", ":var_1", slot_agent_courage_score),
                    (val_mul, ":var_6", 3),
                    (val_add, ":var_10", ":var_6"),
                    (agent_set_slot, ":var_1", slot_agent_courage_score, ":var_10"),
                (else_try),
                    (neg|ge, ":var_9", 9600),
                    (agent_get_slot, ":var_10", ":var_1", slot_agent_courage_score),
                    (val_mul, ":var_6", 1),
                    (val_add, ":var_10", ":var_6"),
                    (agent_set_slot, ":var_1", slot_agent_courage_score, ":var_10"),
                (try_end),
            (try_end),
        (try_end),
    (try_end),

]),

("apply_death_effect_on_courage_scores",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (try_begin),
        (agent_is_human, ":var_0"),
        (try_begin),
            (agent_is_ally, ":var_0"),
            (assign, ":var_2", 1),
        (else_try),
            (assign, ":var_2", 0),
        (try_end),
        (agent_get_position, pos0, ":var_0"),
        (assign, ":var_3", 0),
        (try_for_agents, ":var_4"),
            (agent_is_human, ":var_4"),
            (agent_is_alive, ":var_4"),
            (agent_get_position, pos1, ":var_4"),
            (get_distance_between_positions, ":var_5", pos0, pos1),
            (neg|gt, ":var_5", 1300),
            (try_begin),
                (agent_is_ally, ":var_4"),
                (assign, ":var_6", 1),
            (else_try),
                (assign, ":var_6", 0),
            (try_end),
            (try_begin),
                (eq, ":var_2", ":var_6"),
                (val_add, ":var_3", 1),
            (try_end),
        (try_end),
        (try_for_agents, ":var_4"),
            (agent_is_human, ":var_4"),
            (agent_is_alive, ":var_4"),
            (try_begin),
                (agent_is_ally, ":var_4"),
                (assign, ":var_6", 1),
            (else_try),
                (assign, ":var_6", 0),
            (try_end),
            (try_begin),
                (neg|eq, ":var_2", ":var_6"),
                (assign, ":var_7", 10),
            (else_try),
                (assign, ":var_7", -15),
                (val_add, ":var_7", ":var_3"),
                (try_begin),
                    (gt, ":var_7", -5),
                    (assign, ":var_7", -5),
                (try_end),
                (agent_get_slot, ":var_8", ":var_0", slot_agent_is_running_away),
                (try_begin),
                    (eq, ":var_8", 1),
                    (val_div, ":var_7", 3),
                (try_end),
            (try_end),
            (agent_get_position, pos1, ":var_4"),
            (get_distance_between_positions, ":var_5", pos0, pos1),
            (try_begin),
                (eq, ":var_1", ":var_4"),
                (agent_get_slot, ":var_9", ":var_4", slot_agent_courage_score),
                (val_mul, ":var_7", 20),
                (val_add, ":var_9", ":var_7"),
                (agent_set_slot, ":var_4", slot_agent_courage_score, ":var_9"),
            (try_end),
            (try_begin),
                (neg|ge, ":var_5", 100),
                (agent_get_slot, ":var_9", ":var_4", slot_agent_courage_score),
                (val_mul, ":var_7", 150),
                (val_add, ":var_9", ":var_7"),
                (agent_set_slot, ":var_4", slot_agent_courage_score, ":var_9"),
            (else_try),
                (neg|ge, ":var_5", 200),
                (agent_get_slot, ":var_9", ":var_4", slot_agent_courage_score),
                (val_mul, ":var_7", 120),
                (val_add, ":var_9", ":var_7"),
                (agent_set_slot, ":var_4", slot_agent_courage_score, ":var_9"),
            (else_try),
                (neg|ge, ":var_5", 300),
                (agent_get_slot, ":var_9", ":var_4", slot_agent_courage_score),
                (val_mul, ":var_7", 100),
                (val_add, ":var_9", ":var_7"),
                (agent_set_slot, ":var_4", slot_agent_courage_score, ":var_9"),
            (else_try),
                (neg|ge, ":var_5", 400),
                (agent_get_slot, ":var_9", ":var_4", slot_agent_courage_score),
                (val_mul, ":var_7", 90),
                (val_add, ":var_9", ":var_7"),
                (agent_set_slot, ":var_4", slot_agent_courage_score, ":var_9"),
            (else_try),
                (neg|ge, ":var_5", 600),
                (agent_get_slot, ":var_9", ":var_4", slot_agent_courage_score),
                (val_mul, ":var_7", 80),
                (val_add, ":var_9", ":var_7"),
                (agent_set_slot, ":var_4", slot_agent_courage_score, ":var_9"),
            (else_try),
                (neg|ge, ":var_5", 800),
                (agent_get_slot, ":var_9", ":var_4", slot_agent_courage_score),
                (val_mul, ":var_7", 70),
                (val_add, ":var_9", ":var_7"),
                (agent_set_slot, ":var_4", slot_agent_courage_score, ":var_9"),
            (else_try),
                (neg|ge, ":var_5", 1000),
                (agent_get_slot, ":var_9", ":var_4", slot_agent_courage_score),
                (val_mul, ":var_7", 60),
                (val_add, ":var_9", ":var_7"),
                (agent_set_slot, ":var_4", slot_agent_courage_score, ":var_9"),
            (else_try),
                (neg|ge, ":var_5", 1500),
                (agent_get_slot, ":var_9", ":var_4", slot_agent_courage_score),
                (val_mul, ":var_7", 50),
                (val_add, ":var_9", ":var_7"),
                (agent_set_slot, ":var_4", slot_agent_courage_score, ":var_9"),
            (else_try),
                (neg|ge, ":var_5", 2500),
                (agent_get_slot, ":var_9", ":var_4", slot_agent_courage_score),
                (val_mul, ":var_7", 40),
                (val_add, ":var_9", ":var_7"),
                (agent_set_slot, ":var_4", slot_agent_courage_score, ":var_9"),
            (else_try),
                (neg|ge, ":var_5", 4000),
                (agent_get_slot, ":var_9", ":var_4", slot_agent_courage_score),
                (val_mul, ":var_7", 30),
                (val_add, ":var_9", ":var_7"),
                (agent_set_slot, ":var_4", slot_agent_courage_score, ":var_9"),
            (else_try),
                (neg|ge, ":var_5", 6500),
                (agent_get_slot, ":var_9", ":var_4", slot_agent_courage_score),
                (val_mul, ":var_7", 20),
                (val_add, ":var_9", ":var_7"),
                (agent_set_slot, ":var_4", slot_agent_courage_score, ":var_9"),
            (else_try),
                (neg|ge, ":var_5", 10000),
                (agent_get_slot, ":var_9", ":var_4", slot_agent_courage_score),
                (val_mul, ":var_7", 10),
                (val_add, ":var_9", ":var_7"),
                (agent_set_slot, ":var_4", slot_agent_courage_score, ":var_9"),
            (try_end),
        (try_end),
    (try_end),

]),

("orig_decide_run_away_or_not",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (assign, ":var_2", 0),
    (agent_get_team, ":var_3", ":var_0"),
    (agent_get_division, ":var_4", ":var_0"),
    (try_begin),
        (neg|ge, ":var_4", 9),
        (team_get_movement_order, ":var_5", ":var_3", ":var_4"),
        (eq, ":var_5", 14),
        (assign, ":var_2", 1),
    (try_end),
    (agent_get_slot, ":var_6", ":var_0", slot_agent_is_running_away),
    (try_begin),
        (eq, ":var_6", 0),
        (try_begin),
            (eq, ":var_2", 1),
            (agent_clear_scripted_mode, ":var_0"),
            (agent_start_running_away, ":var_0"),
            (agent_set_slot, ":var_0", slot_agent_is_running_away, 1),
        (else_try),
            (ge, ":var_1", 45),
            (agent_get_slot, ":var_7", ":var_0", slot_agent_courage_score),
            (store_agent_hit_points, ":var_8", ":var_0"),
            (val_mul, ":var_8", 4),
            (try_begin),
                (agent_is_ally, ":var_0"),
                (val_sub, ":var_8", 100),
            (try_end),
            (val_mul, ":var_8", 10),
            (store_sub, ":var_9", 3500, ":var_8"),
            (neg|ge, ":var_7", ":var_9"),
            (agent_get_troop_id, ":var_10", ":var_0"),
            (neg|troop_is_hero, ":var_10"),
            (agent_clear_scripted_mode, ":var_0"),
            (agent_start_running_away, ":var_0"),
            (agent_set_slot, ":var_0", slot_agent_is_running_away, 1),
        (try_end),
    (else_try),
        (neg|eq, ":var_2", 1),
        (agent_get_slot, ":var_7", ":var_0", slot_agent_courage_score),
        (store_agent_hit_points, ":var_8", ":var_0"),
        (val_mul, ":var_8", 4),
        (try_begin),
            (agent_is_ally, ":var_0"),
            (val_sub, ":var_8", 100),
        (try_end),
        (val_mul, ":var_8", 10),
        (store_sub, ":var_11", 3700, ":var_8"),
        (ge, ":var_7", ":var_11"),
        (agent_stop_running_away, ":var_0"),
        (agent_set_slot, ":var_0", slot_agent_is_running_away, 0),
    (try_end),

]),

("battle_tactic_apply",
[
    (call_script, "script_battle_tactic_apply_aux", "$ai_team_1", "$ai_team_1_battle_tactic"),
    (assign, "$ai_team_1_battle_tactic", reg0),
    (try_begin),
        (ge, "$ai_team_2", 0),
        (call_script, "script_battle_tactic_apply_aux", "$ai_team_2", "$ai_team_2_battle_tactic"),
        (assign, "$ai_team_2_battle_tactic", reg0),
    (try_end),

]),

("orig_battle_tactic_apply_aux",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_mission_timer_a, ":var_2"),
    (try_begin),
        (eq, ":var_1", 1),
        (copy_position, pos1, pos52),
        (call_script, "script_get_closest3_distance_of_enemies_at_pos1", ":var_0", 1),
        (assign, ":var_3", reg0),
        (assign, ":var_4", reg1),
        (try_begin),
            (this_or_next|neg|ge, ":var_4", 1000),
            (neg|ge, ":var_3", 4000),
            (assign, ":var_1", 0),
            (team_give_order, ":var_0", 9, 2),
        (try_end),
    (else_try),
        (eq, ":var_1", 2),
        (team_get_leader, ":var_5", ":var_0"),
        (try_begin),
            (ge, ":var_5", 0),
            (agent_is_alive, ":var_5"),
            (agent_set_speed_limit, ":var_5", 9),
            (call_script, "script_team_get_average_position_of_enemies", ":var_0"),
            (copy_position, pos60, pos0),
            (agent_get_position, pos61, ":var_5"),
            (position_transform_position_to_local, pos62, pos61, pos60),
            (position_normalize_origin, ":var_6", pos62),
            (convert_from_fixed_point, ":var_6"),
            (assign, reg17, ":var_6"),
            (position_get_x, ":var_7", pos62),
            (position_get_y, ":var_8", pos62),
            (val_mul, ":var_7", 23),
            (val_mul, ":var_8", 23),
            (position_set_x, pos62, ":var_7"),
            (position_set_y, pos62, ":var_8"),
            (position_transform_position_to_parent, pos63, pos61, pos62),
            (position_set_z_to_ground_level, pos63),
            (team_give_order, ":var_0", 9, 0),
            (team_set_order_position, ":var_0", 9, pos63),
            (agent_get_position, pos1, ":var_5"),
            (try_begin),
                (neg|ge, ":var_6", 50),
                (ge, ":var_2", 30),
                (assign, ":var_1", 0),
                (team_give_order, ":var_0", 9, 2),
                (agent_set_speed_limit, ":var_5", 60),
            (try_end),
        (else_try),
            (assign, ":var_1", 0),
            (team_give_order, ":var_0", 9, 2),
        (try_end),
    (try_end),
    (try_begin),
        (neg|eq, ":var_1", 0),
        (ge, ":var_2", 300),
        (assign, ":var_1", 0),
        (team_give_order, ":var_0", 9, 2),
        (team_get_leader, ":var_5", ":var_0"),
        (agent_set_speed_limit, ":var_5", 60),
    (try_end),
    (assign, reg0, ":var_1"),

]),

("team_get_class_percentages",
[
    (assign, ":var_0", 0),
    (assign, ":var_1", 0),
    (assign, ":var_2", 0),
    (assign, ":var_3", 0),
    (store_script_param, ":var_4", 1),
    (store_script_param, ":var_5", 2),
    (try_for_agents, ":var_6"),
        (agent_is_alive, ":var_6"),
        (agent_is_human, ":var_6"),
        (agent_get_team, ":var_7", ":var_6"),
        (assign, ":var_8", 0),
        (try_begin),
            (eq, ":var_5", 1),
            (teams_are_enemies, ":var_7", ":var_4"),
            (assign, ":var_8", 1),
        (else_try),
            (eq, ":var_7", ":var_4"),
            (assign, ":var_8", 1),
        (try_end),
        (eq, ":var_8", 1),
        (val_add, ":var_3", 1),
        (agent_get_class, ":var_9", ":var_6"),
        (try_begin),
            (eq, ":var_9", 0),
            (val_add, ":var_0", 1),
        (else_try),
            (eq, ":var_9", 1),
            (val_add, ":var_1", 1),
        (else_try),
            (eq, ":var_9", 2),
            (val_add, ":var_2", 1),
        (try_end),
    (try_end),
    (try_begin),
        (eq, ":var_3", 0),
        (assign, ":var_3", 1),
    (try_end),
    (store_mul, ":var_10", ":var_0", 100),
    (val_div, ":var_10", ":var_3"),
    (store_mul, ":var_11", ":var_1", 100),
    (val_div, ":var_11", ":var_3"),
    (store_mul, ":var_12", ":var_2", 100),
    (val_div, ":var_12", ":var_3"),
    (assign, reg0, ":var_10"),
    (assign, reg1, ":var_11"),
    (assign, reg2, ":var_12"),

]),

("get_closest3_distance_of_enemies_at_pos1",
[
    (assign, ":var_0", 100000),
    (assign, ":var_1", 100000),
    (assign, ":var_2", 100000),
    (assign, ":var_3", -1),
    (store_script_param, ":var_4", 1),
    (try_for_agents, ":var_5"),
        (agent_is_alive, ":var_5"),
        (agent_is_human, ":var_5"),
        (agent_get_team, ":var_6", ":var_5"),
        (teams_are_enemies, ":var_6", ":var_4"),
        (agent_get_position, pos2, ":var_5"),
        (get_distance_between_positions, ":var_7", pos2, pos1),
        (try_begin),
            (neg|ge, ":var_7", ":var_0"),
            (assign, ":var_2", ":var_1"),
            (assign, ":var_1", ":var_0"),
            (assign, ":var_0", ":var_7"),
            (assign, ":var_3", ":var_5"),
        (else_try),
            (neg|ge, ":var_7", ":var_1"),
            (assign, ":var_2", ":var_1"),
            (assign, ":var_1", ":var_7"),
        (else_try),
            (neg|ge, ":var_7", ":var_2"),
            (assign, ":var_2", ":var_7"),
        (try_end),
    (try_end),
    (assign, ":var_8", 0),
    (assign, ":var_9", 0),
    (try_begin),
        (neg|ge, ":var_0", 100000),
        (val_add, ":var_8", ":var_0"),
        (val_add, ":var_9", 1),
    (try_end),
    (try_begin),
        (neg|ge, ":var_1", 100000),
        (val_add, ":var_8", ":var_1"),
        (val_add, ":var_9", 1),
    (try_end),
    (try_begin),
        (neg|ge, ":var_2", 100000),
        (val_add, ":var_8", ":var_2"),
        (val_add, ":var_9", 1),
    (try_end),
    (assign, ":var_10", 100000),
    (try_begin),
        (gt, ":var_9", 0),
        (store_div, ":var_10", ":var_8", ":var_9"),
    (try_end),
    (assign, reg0, ":var_10"),
    (assign, reg1, ":var_0"),
    (assign, reg2, ":var_1"),
    (assign, reg3, ":var_2"),
    (assign, reg4, ":var_3"),

]),

("team_get_average_position_of_enemies",
[
    (store_script_param_1, ":var_0"),
    (init_position, pos0),
    (assign, ":var_1", 0),
    (assign, ":var_2", 0),
    (assign, ":var_3", 0),
    (assign, ":var_4", 0),
    (try_for_agents, ":var_5"),
        (agent_is_alive, ":var_5"),
        (agent_is_human, ":var_5"),
        (agent_get_team, ":var_6", ":var_5"),
        (teams_are_enemies, ":var_0", ":var_6"),
        (agent_get_position, pos62, ":var_5"),
        (position_get_x, ":var_7", pos62),
        (position_get_y, ":var_8", pos62),
        (position_get_z, ":var_9", pos62),
        (val_add, ":var_2", ":var_7"),
        (val_add, ":var_3", ":var_8"),
        (val_add, ":var_4", ":var_9"),
        (val_add, ":var_1", 1),
    (try_end),
    (try_begin),
        (neg|gt, ":var_1", 0),
        (assign, ":var_1", 1),
    (try_end),
    (store_div, ":var_10", ":var_2", ":var_1"),
    (store_div, ":var_11", ":var_3", ":var_1"),
    (store_div, ":var_12", ":var_4", ":var_1"),
    (position_set_x, pos0, ":var_10"),
    (position_set_y, pos0, ":var_11"),
    (position_set_z, pos0, ":var_12"),
    (assign, reg0, ":var_1"),

]),

("search_troop_prisoner_of_party",
[
    (store_script_param_1, ":var_0"),
    (assign, ":var_1", -1),
    (try_for_parties, ":var_2"),
        (eq, ":var_1", -1),
        (this_or_next|eq, ":var_2", "p_main_party"),
        (ge, ":var_2", "p_town_1_1"),
        (party_count_prisoners_of_type, ":var_3", ":var_2", ":var_0"),
        (gt, ":var_3", 0),
        (assign, ":var_1", ":var_2"),
    (try_end),
    (assign, reg0, ":var_1"),

]),

("change_debt_to_troop",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (troop_get_slot, ":var_2", ":var_0", slot_troop_player_debt),
    (assign, reg1, ":var_2"),
    (val_add, ":var_2", ":var_1"),
    (assign, reg2, ":var_2"),
    (troop_set_slot, ":var_0", slot_troop_player_debt, ":var_2"),
    (str_store_troop_name_link, s1, ":var_0"),
    (display_message, "@You now owe {reg2} denars to {s1}."),

]),

("abort_quest",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (assign, ":var_2", -1),
    (assign, ":var_3", -2),
    (try_begin),
        (this_or_next|eq, ":var_0", "qst_deliver_message"),
        (eq, ":var_0", "qst_deliver_message_to_enemy_lord"),
        (assign, ":var_2", -2),
        (assign, ":var_3", -3),
    (else_try),
        (eq, ":var_0", "qst_kidnapped_girl"),
        (party_remove_members, "p_main_party", "trp_kidnapped_girl", 1),
        (quest_get_slot, ":var_4", "qst_kidnapped_girl", 8),
        (try_begin),
            (party_is_active, ":var_4"),
            (remove_party, ":var_4"),
        (try_end),
    (else_try),
        (eq, ":var_0", "qst_escort_lady"),
        (quest_get_slot, ":var_5", "qst_escort_lady", 4),
        (party_remove_members, "p_main_party", ":var_5", 1),
        (assign, ":var_2", -2),
        (assign, ":var_3", -3),
    (else_try),
        (eq, ":var_0", "qst_raise_troops"),
        (quest_get_slot, ":var_6", ":var_0", 6),
        (call_script, "script_change_debt_to_troop", ":var_6", 100),
        (assign, ":var_2", -4),
        (assign, ":var_3", -5),
    (else_try),
        (eq, ":var_0", "qst_deal_with_looters"),
        (try_for_parties, ":var_7"),
            (party_get_template_id, ":var_8", ":var_7"),
            (eq, ":var_8", "pt_looters"),
            (party_set_flags, ":var_7", 262144, 0),
        (try_end),
        (assign, ":var_2", -4),
        (assign, ":var_3", -5),
    (else_try),
        (eq, ":var_0", "qst_deal_with_bandits_at_lords_village"),
        (quest_get_slot, ":var_6", ":var_0", 6),
        (call_script, "script_change_debt_to_troop", ":var_6", 200),
        (assign, ":var_2", -5),
        (assign, ":var_3", -6),
    (else_try),
        (eq, ":var_0", "qst_collect_taxes"),
        (quest_get_slot, ":var_9", ":var_0", 22),
        (quest_set_slot, ":var_0", 22, 0),
        (quest_get_slot, ":var_6", ":var_0", 6),
        (call_script, "script_change_debt_to_troop", ":var_6", ":var_9"),
        (assign, ":var_2", -4),
        (assign, ":var_3", -6),
    (else_try),
        (eq, ":var_0", "qst_hunt_down_fugitive"),
        (assign, ":var_2", -3),
        (assign, ":var_3", -4),
    (else_try),
        (eq, ":var_0", "qst_kill_local_merchant"),
    (else_try),
        (eq, ":var_0", "qst_bring_back_runaway_serfs"),
        (assign, ":var_2", -1),
        (assign, ":var_3", -1),
    (else_try),
        (eq, ":var_0", "qst_lend_companion"),
    (else_try),
        (eq, ":var_0", "qst_collect_debt"),
        (try_begin),
            (quest_slot_eq, "qst_collect_debt", 11, 1),
            (quest_get_slot, ":var_10", "qst_collect_debt", 10),
            (quest_get_slot, ":var_11", "qst_collect_debt", 6),
            (call_script, "script_change_debt_to_troop", ":var_11", ":var_10"),
            (assign, ":var_2", -3),
            (assign, ":var_3", -6),
        (else_try),
            (assign, ":var_2", -3),
            (assign, ":var_3", -4),
        (try_end),
    (else_try),
        (eq, ":var_0", "qst_deal_with_bandits_at_lords_village"),
        (assign, ":var_2", -6),
        (assign, ":var_3", -6),
    (else_try),
        (eq, ":var_0", "qst_cause_provocation"),
        (assign, ":var_2", -10),
        (assign, ":var_3", -13),
    (else_try),
        (eq, ":var_0", "qst_persuade_lords_to_make_peace"),
        (assign, ":var_2", -10),
        (assign, ":var_3", -13),
    (else_try),
        (eq, ":var_0", "qst_deal_with_night_bandits"),
        (assign, ":var_2", -1),
        (assign, ":var_3", -1),
    (else_try),
        (eq, ":var_0", "qst_follow_spy"),
        (assign, ":var_2", -2),
        (assign, ":var_3", -3),
        (try_begin),
            (party_is_active, "$qst_follow_spy_spy_party"),
            (remove_party, "$qst_follow_spy_spy_party"),
        (try_end),
        (try_begin),
            (party_is_active, "$qst_follow_spy_spy_partners_party"),
            (remove_party, "$qst_follow_spy_spy_partners_party"),
        (try_end),
    (else_try),
        (eq, ":var_0", "qst_capture_enemy_hero"),
        (assign, ":var_2", -3),
        (assign, ":var_3", -4),
    (else_try),
        (eq, ":var_0", "qst_lend_companion"),
        (quest_get_slot, ":var_12", "qst_lend_companion", 2),
        (troop_set_slot, ":var_12", slot_troop_mission_object, 8),
        (troop_set_slot, ":var_12", slot_troop_current_mission, 0),
    (else_try),
        (eq, ":var_0", "qst_incriminate_loyal_commander"),
        (assign, ":var_2", -5),
        (assign, ":var_3", -6),
    (else_try),
        (eq, ":var_0", "qst_lend_surgeon"),
    (else_try),
        (eq, ":var_0", "qst_rescue_lord_by_replace"),
        (assign, ":var_2", -1),
        (assign, ":var_3", -1),
    (else_try),
        (eq, ":var_0", "qst_deliver_message_to_prisoner_lord"),
        (assign, ":var_2", 0),
        (assign, ":var_3", -1),
    (else_try),
        (eq, ":var_0", "qst_duel_for_lady"),
        (assign, ":var_2", -1),
        (assign, ":var_3", -1),
    (else_try),
        (eq, ":var_0", "qst_follow_army"),
        (assign, ":var_2", 0),
        (assign, ":var_3", 0),
    (else_try),
        (eq, ":var_0", "qst_deliver_cattle_to_army"),
        (assign, ":var_2", 0),
        (assign, ":var_3", 0),
    (else_try),
        (eq, ":var_0", "qst_join_siege_with_army"),
        (assign, ":var_2", -1),
        (assign, ":var_3", -2),
    (else_try),
        (eq, ":var_0", "qst_scout_waypoints"),
        (assign, ":var_2", 0),
        (assign, ":var_3", 0),
    (else_try),
        (eq, ":var_0", "qst_deliver_grain"),
        (assign, ":var_2", -6),
        (assign, ":var_3", -7),
    (else_try),
        (eq, ":var_0", "qst_deliver_cattle"),
        (assign, ":var_2", -3),
        (assign, ":var_3", -4),
    (else_try),
        (eq, ":var_0", "qst_train_peasants_against_bandits"),
        (assign, ":var_2", -4),
        (assign, ":var_3", -5),
    (else_try),
        (eq, ":var_0", "qst_deliver_wine"),
        (assign, ":var_2", -1),
        (assign, ":var_3", -3),
        (val_add, "$debt_to_merchants_guild", "$qst_deliver_wine_debt"),
    (else_try),
        (eq, ":var_0", "qst_move_cattle_herd"),
        (assign, ":var_2", -1),
        (assign, ":var_3", -3),
    (else_try),
        (eq, ":var_0", "qst_escort_merchant_caravan"),
        (assign, ":var_2", -1),
        (assign, ":var_3", -3),
    (else_try),
        (eq, ":var_0", "qst_troublesome_bandits"),
        (assign, ":var_2", -1),
        (assign, ":var_3", -2),
    (else_try),
        (eq, ":var_0", "qst_join_faction"),
        (assign, ":var_2", -3),
        (assign, ":var_3", -3),
        (try_begin),
            (call_script, "script_get_number_of_hero_centers", "trp_player"),
            (gt, reg0, 0),
            (call_script, "script_change_player_relation_with_faction", "$g_invite_faction", -10),
        (try_end),
        (try_begin),
            (quest_slot_eq, "qst_join_faction", 26, 1),
            (call_script, "script_diplomacy_start_war_between_kingdoms", "fac_player_supporters_faction", "$g_invite_faction", 0),
            (call_script, "script_change_player_honor", -5),
            (quest_set_slot, "qst_join_faction", 26, 0),
        (try_end),
        (assign, "$g_invite_faction", 0),
        (assign, "$g_invite_faction_lord", 0),
        (assign, "$g_invite_offered_center", 0),
    (else_try),
        (eq, ":var_0", "qst_eliminate_bandits_infesting_village"),
        (assign, ":var_2", -3),
        (assign, ":var_3", -3),
    (else_try),
        (ge, ":var_0", "qst_resolve_dispute"),
        (assign, ":var_13", -2),
        (assign, ":var_2", 0),
        (assign, ":var_3", 0),
    (else_try),
        (ge, ":var_0", "qst_consult_with_minister"),
        (assign, ":var_13", -2),
        (assign, ":var_2", 0),
        (assign, ":var_3", 0),
    (try_end),
    (try_begin),
        (gt, ":var_1", 0),
        (neg|ge, ":var_0", "qst_resolve_dispute"),
        (quest_get_slot, ":var_11", ":var_0", 6),
        (assign, ":var_14", ":var_2"),
        (try_begin),
            (eq, ":var_1", 2),
            (assign, ":var_14", ":var_3"),
        (try_end),
        (try_begin),
            (this_or_next|is_between, ":var_11", "trp_village_1_elder", "trp_merchants_end"),
            (is_between, ":var_11", "trp_town_1_mayor", "trp_village_1_elder"),
            (quest_get_slot, ":var_15", ":var_0", 12),
            (call_script, "script_change_player_relation_with_center", ":var_15", ":var_14"),
        (else_try),
            (call_script, "script_change_player_relation_with_troop", ":var_11", ":var_14"),
        (try_end),
    (try_end),
    (fail_quest, ":var_0"),
    (try_begin),
        (gt, ":var_1", 0),
        (neg|eq, ":var_0", "qst_consult_with_minister"),
        (neg|eq, ":var_0", "qst_resolve_dispute"),
        (neg|eq, ":var_0", "qst_visit_lady"),
        (neg|eq, ":var_0", "qst_formal_marriage_proposal"),
        (neg|eq, ":var_0", "qst_duel_courtship_rival"),
        (neg|eq, ":var_0", "qst_follow_army"),
        (neg|eq, ":var_0", "qst_denounce_lord"),
        (neg|eq, ":var_0", "qst_intrigue_against_lord"),
        (neg|eq, ":var_0", "qst_offer_gift"),
        (neg|eq, ":var_0", "qst_organize_feast"),
        (call_script, "script_objectionable_action", 4, "str_fail_quest"),
    (try_end),
    (try_begin),
        (eq, ":var_0", "qst_resolve_dispute"),
        (faction_slot_eq, "$players_kingdom", slot_faction_leader, "trp_player"),
        (call_script, "script_change_player_right_to_rule", ":var_13"),
        (try_for_range, ":var_16", "trp_npc1", "trp_knight_1_1_wife"),
            (store_troop_faction, ":var_17", ":var_16"),
            (eq, ":var_17", "fac_player_supporters_faction"),
            (call_script, "script_troop_change_relation_with_troop", ":var_16", "trp_player", ":var_13"),
        (try_end),
    (try_end),
    (try_begin),
        (eq, ":var_0", "qst_organize_feast"),
        (call_script, "script_add_notification_menu", "mnu_notification_feast_quest_expired", 0, 0),
    (try_end),
    (call_script, "script_end_quest", ":var_0"),

]),

("cf_is_quest_troop",
[
    (store_script_param_1, ":var_0"),
    (assign, ":var_1", 0),
    (try_for_range, ":var_2", 0, "qst_quests_end"),
        (check_quest_active, ":var_2"),
        (quest_get_slot, ":var_3", ":var_2", 2),
        (quest_get_slot, ":var_4", ":var_2", 4),
        (quest_get_slot, ":var_5", ":var_2", 6),
        (this_or_next|eq, ":var_3", ":var_0"),
        (this_or_next|eq, ":var_4", ":var_0"),
        (eq, ":var_5", ":var_0"),
        (assign, ":var_1", 1),
    (try_end),
    (eq, ":var_1", 1),

]),

("check_friendly_kills",
[
    (get_player_agent_own_troop_kill_count, ":var_0"),
    (try_begin),
        (neg|eq, "$g_player_current_own_troop_kills", ":var_0"),
        (val_sub, ":var_0", "$g_player_current_own_troop_kills"),
        (val_add, "$g_player_current_own_troop_kills", ":var_0"),
        (val_mul, ":var_0", -1),
        (call_script, "script_change_player_party_morale", ":var_0"),
    (try_end),

]),

("simulate_retreat",
[
    (call_script, "script_music_set_situation_with_culture", 32768),
    (set_show_messages, 0),
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (assign, ":var_3", 0),
    (assign, ":var_4", 0),
    (assign, ":var_5", 1),
    (try_begin),
        (try_for_agents, ":var_6"),
            (agent_is_human, ":var_6"),
            (agent_is_alive, ":var_6"),
            (agent_set_slot, ":var_6", slot_agent_is_alive_before_retreat, 1),
            (agent_get_troop_id, ":var_7", ":var_6"),
            (store_character_level, ":var_8", ":var_7"),
            (val_add, ":var_8", 5),
            (try_begin),
                (troop_is_hero, ":var_7"),
                (val_add, ":var_8", 5),
            (try_end),
            (try_begin),
                (agent_is_ally, ":var_6"),
                (val_add, ":var_3", ":var_8"),
            (else_try),
                (val_add, ":var_4", ":var_8"),
            (try_end),
        (try_end),
        (eq, "$pin_player_fallen", 0),
        (neg|ge, ":var_4", ":var_3"),
        (eq, ":var_2", 1),
        (assign, ":var_5", 0),
    (try_end),
    (try_begin),
        (eq, ":var_5", 1),
        (assign, "$g_last_mission_player_damage", 0),
        (party_clear, "p_temp_party"),
        (party_clear, "p_temp_party_2"),
        (call_script, "script_simulate_battle_with_agents_aux", 0, ":var_0"),
        (call_script, "script_simulate_battle_with_agents_aux", 1, ":var_1"),
        (assign, ":var_9", 0),
        (try_begin),
            (gt, "$g_last_mission_player_damage", 0),
            (assign, ":var_9", 1),
            (assign, reg1, "$g_last_mission_player_damage"),
            (str_store_string, s12, "str_casualty_display_hp"),
        (else_try),
            (str_clear, s12),
        (try_end),
        (call_script, "script_print_casualties_to_s0", "p_temp_party", 1),
        (try_begin),
            (party_get_num_companion_stacks, ":var_10", "p_temp_party"),
            (gt, ":var_10", 0),
            (assign, ":var_9", 1),
        (try_end),
        (str_store_string_reg, s10, 0),
        (call_script, "script_print_casualties_to_s0", "p_temp_party_2", 1),
        (try_begin),
            (party_get_num_companion_stacks, ":var_10", "p_temp_party_2"),
            (gt, ":var_10", 0),
            (assign, ":var_9", 1),
        (try_end),
        (str_store_string_reg, s11, 0),
        (try_begin),
            (eq, ":var_9", 1),
            (dialog_box, "str_casualty_display", 5),
        (try_end),
    (try_end),
    (set_show_messages, 1),
    (assign, ":var_11", 0),
    (assign, ":var_12", 0),
    (assign, ":var_13", 0),
    (try_for_agents, ":var_6"),
        (agent_is_human, ":var_6"),
        (try_begin),
            (agent_is_ally, ":var_6"),
            (val_add, ":var_13", 1),
            (try_begin),
                (neg|agent_is_alive, ":var_6"),
                (val_add, ":var_11", 1),
            (try_end),
        (else_try),
            (neg|agent_is_alive, ":var_6"),
            (val_add, ":var_12", 1),
        (try_end),
    (try_end),
    (store_add, ":var_14", ":var_11", ":var_12"),
    (try_begin),
        (gt, ":var_14", 0),
        (store_mul, ":var_15", ":var_11", 100),
        (val_div, ":var_15", ":var_14"),
        (val_mul, ":var_15", ":var_11"),
        (val_div, ":var_15", ":var_13"),
        (val_mul, ":var_15", -30),
        (val_div, ":var_15", 100),
        (call_script, "script_change_player_party_morale", ":var_15"),
    (try_end),

]),

("simulate_battle_with_agents_aux",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (get_player_agent_no, ":var_2"),
    (try_for_agents, ":var_3"),
        (neg|eq, ":var_2", ":var_3"),
        (agent_is_human, ":var_3"),
        (agent_slot_eq, ":var_3", slot_agent_is_alive_before_retreat, 1),
        (try_begin),
            (agent_is_ally, ":var_3"),
            (assign, ":var_4", 0),
        (else_try),
            (assign, ":var_4", 1),
        (try_end),
        (eq, ":var_4", ":var_0"),
        (agent_get_position, pos2, ":var_3"),
        (assign, ":var_5", -1),
        (assign, ":var_6", 100000),
        (try_for_agents, ":var_7"),
            (agent_is_human, ":var_7"),
            (agent_is_alive, ":var_7"),
            (try_begin),
                (agent_is_ally, ":var_7"),
                (assign, ":var_8", 0),
            (else_try),
                (assign, ":var_8", 1),
            (try_end),
            (this_or_next|neg|eq, ":var_7", ":var_2"),
            (eq, "$pin_player_fallen", 0),
            (neg|eq, ":var_0", ":var_8"),
            (agent_get_position, pos3, ":var_7"),
            (get_distance_between_positions, ":var_9", pos2, pos3),
            (neg|ge, ":var_9", ":var_6"),
            (assign, ":var_6", ":var_9"),
            (assign, ":var_5", ":var_7"),
        (try_end),
        (ge, ":var_5", 0),
        (agent_get_class, ":var_10", ":var_3"),
        (assign, ":var_11", 1),
        (assign, ":var_12", 0),
        (try_begin),
            (eq, ":var_10", 1),
            (assign, ":var_12", 2),
        (else_try),
            (eq, ":var_10", 2),
            (assign, ":var_11", 2),
        (try_end),
        (agent_get_class, ":var_10", ":var_5"),
        (assign, ":var_13", 1),
        (try_begin),
            (eq, ":var_10", 2),
            (assign, ":var_13", 2),
        (try_end),
        (assign, ":var_14", 18000),
        (val_add, ":var_6", 3000),
        (val_div, ":var_14", ":var_6"),
        (val_mul, ":var_14", 2),
        (val_mul, ":var_14", ":var_11"),
        (val_div, ":var_14", ":var_13"),
        (val_add, ":var_14", ":var_12"),
        (assign, ":var_15", ":var_1"),
        (agent_get_troop_id, ":var_16", ":var_5"),
        (agent_get_troop_id, ":var_17", ":var_3"),
        (store_character_level, ":var_18", ":var_16"),
        (store_character_level, ":var_19", ":var_17"),
        (store_sub, ":var_20", ":var_19", ":var_18"),
        (val_div, ":var_20", 5),
        (val_add, ":var_15", ":var_20"),
        (try_begin),
            (eq, ":var_5", ":var_2"),
            (val_div, ":var_15", 2),
            (store_agent_hit_points, ":var_21", ":var_2", 1),
        (try_end),
        (try_for_range, ":var_22", 0, ":var_14"),
            (store_random_in_range, ":var_23", 0, 100),
            (neg|ge, ":var_23", ":var_15"),
            (agent_deliver_damage_to_agent, ":var_3", ":var_5"),
        (try_end),
        (try_begin),
            (eq, ":var_5", ":var_2"),
            (store_agent_hit_points, ":var_24", ":var_2", 1),
            (store_sub, ":var_25", ":var_21", ":var_24"),
            (val_add, "$g_last_mission_player_damage", ":var_25"),
        (try_end),
        (neg|agent_is_alive, ":var_5"),
        (try_begin),
            (eq, ":var_0", 1),
            (party_add_members, "p_temp_party", ":var_16", 1),
            (try_begin),
                (agent_is_wounded, ":var_5"),
                (party_wound_members, "p_temp_party", ":var_16", 1),
            (try_end),
        (else_try),
            (party_add_members, "p_temp_party_2", ":var_16", 1),
            (try_begin),
                (agent_is_wounded, ":var_5"),
                (party_wound_members, "p_temp_party_2", ":var_16", 1),
            (try_end),
        (try_end),
    (try_end),

]),

("map_get_random_position_around_position_within_range",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (val_mul, ":var_0", 100),
    (assign, ":var_2", 1),
    (try_for_range, ":var_3", 0, 20),
        (eq, ":var_2", 1),
        (map_get_random_position_around_position, 2, pos1, ":var_1"),
        (get_distance_between_positions, ":var_4", pos2, pos1),
        (ge, ":var_4", ":var_0"),
        (assign, ":var_2", 0),
    (try_end),

]),

("get_number_of_unclaimed_centers_by_player",
[
    (assign, ":var_0", 0),
    (assign, reg1, -1),
    (try_for_range, ":var_1", "p_town_1_1", "p_salt_mine"),
        (store_faction_of_party, ":var_2", ":var_1"),
        (eq, ":var_2", "fac_player_supporters_faction"),
        (party_slot_eq, ":var_1", slot_town_claimed_by_player, 0),
        (party_get_num_companion_stacks, ":var_3", ":var_1"),
        (ge, ":var_3", 1),
        (assign, reg1, ":var_1"),
        (val_add, ":var_0", 1),
    (try_end),
    (assign, reg0, ":var_0"),

]),

("cf_troop_check_troop_is_enemy",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (call_script, "script_troop_get_relation_with_troop", ":var_0", ":var_1"),
    (neg|ge, reg0, -10),

]),

("troop_get_leaded_center_with_index",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (assign, ":var_2", -1),
    (assign, ":var_3", 0),
    (try_for_range, ":var_4", "p_town_1_1", "p_salt_mine"),
        (eq, ":var_2", -1),
        (party_slot_eq, ":var_4", slot_town_lord, ":var_0"),
        (val_add, ":var_3", 1),
        (gt, ":var_3", ":var_1"),
        (assign, ":var_2", ":var_4"),
    (try_end),
    (assign, reg0, ":var_2"),

]),

("cf_troop_get_random_leaded_walled_center_with_less_strength_priority",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (assign, ":var_2", 0),
    (try_for_range, ":var_3", "p_town_1_1", "p_village_1_1"),
        (party_slot_eq, ":var_3", slot_town_lord, ":var_0"),
        (party_slot_eq, ":var_3", slot_center_is_besieged_by, -1),
        (val_add, ":var_2", 1),
        (try_begin),
            (eq, ":var_3", ":var_1"),
            (val_add, ":var_2", 99),
        (try_end),
    (try_end),
    (gt, ":var_2", 0),
    (store_random_in_range, ":var_4", 0, ":var_2"),
    (assign, ":var_5", -1),
    (try_for_range, ":var_3", "p_town_1_1", "p_village_1_1"),
        (eq, ":var_5", -1),
        (party_slot_eq, ":var_3", slot_town_lord, ":var_0"),
        (party_slot_eq, ":var_3", slot_center_is_besieged_by, -1),
        (val_sub, ":var_4", 1),
        (try_begin),
            (eq, ":var_3", ":var_1"),
            (val_sub, ":var_4", 99),
        (try_end),
        (neg|ge, ":var_4", 0),
        (assign, ":var_5", ":var_3"),
    (try_end),
    (assign, reg0, ":var_5"),

]),

("cf_troop_get_random_leaded_town_or_village_except_center",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (assign, ":var_2", 0),
    (try_for_range, ":var_3", "p_town_1_1", "p_salt_mine"),
        (neg|party_slot_eq, ":var_3", slot_party_type, 2),
        (party_slot_eq, ":var_3", slot_town_lord, ":var_0"),
        (neg|eq, ":var_3", ":var_1"),
        (val_add, ":var_2", 1),
    (try_end),
    (gt, ":var_2", 0),
    (store_random_in_range, ":var_4", 0, ":var_2"),
    (assign, ":var_5", "p_salt_mine"),
    (try_for_range, ":var_3", "p_town_1_1", ":var_5"),
        (neg|party_slot_eq, ":var_3", slot_party_type, 2),
        (party_slot_eq, ":var_3", slot_town_lord, ":var_0"),
        (neg|eq, ":var_3", ":var_1"),
        (val_sub, ":var_4", 1),
        (neg|ge, ":var_4", 0),
        (assign, ":var_6", ":var_3"),
        (assign, ":var_5", 0),
    (try_end),
    (assign, reg0, ":var_6"),

]),

("troop_write_owned_centers_to_s2",
[
    (store_script_param_1, ":var_0"),
    (call_script, "script_get_number_of_hero_centers", ":var_0"),
    (assign, ":var_1", reg0),
    (str_store_troop_name, s5, ":var_0"),
    (try_begin),
        (gt, ":var_1", 1),
        (try_for_range, ":var_2", 1, ":var_1"),
            (call_script, "script_troop_get_leaded_center_with_index", ":var_0", ":var_2"),
            (str_store_party_name_link, s50, reg0),
            (try_begin),
                (eq, ":var_2", 1),
                (call_script, "script_troop_get_leaded_center_with_index", ":var_0", 0),
                (str_store_party_name_link, s51, reg0),
                (str_store_string, s51, "str_s50_and_s51"),
            (else_try),
                (str_store_string, s51, "str_s50_comma_s51"),
            (try_end),
        (try_end),
        (str_store_string, s2, "str_s5_is_the_ruler_of_s51"),
    (else_try),
        (eq, ":var_1", 1),
        (call_script, "script_troop_get_leaded_center_with_index", ":var_0", 0),
        (str_store_party_name_link, s51, reg0),
        (str_store_string, s2, "str_s5_is_the_ruler_of_s51"),
    (else_try),
        (store_troop_faction, ":var_3", ":var_0"),
        (str_store_faction_name_link, s6, ":var_3"),
        (str_store_string, s2, "str_s5_is_a_nobleman_of_s6"),
    (try_end),

]),

("troop_write_family_relations_to_s1",
[
    (str_clear, s1),

]),

("troop_get_family_relation_to_troop",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (troop_get_type, ":var_2", ":var_0"),
    (assign, ":var_3", 0),
    (troop_get_slot, ":var_4", ":var_0", slot_troop_spouse),
    (troop_get_slot, ":var_5", ":var_1", slot_troop_spouse),
    (try_begin),
        (gt, ":var_4", -1),
        (troop_get_slot, ":var_6", ":var_4", slot_troop_father),
    (else_try),
        (assign, ":var_6", -1),
    (try_end),
    (try_begin),
        (gt, ":var_5", -1),
        (troop_get_slot, ":var_7", ":var_5", slot_troop_father),
    (else_try),
        (assign, ":var_7", -1),
    (try_end),
    (try_begin),
        (gt, ":var_5", -1),
        (troop_get_slot, ":var_8", ":var_5", slot_troop_mother),
    (else_try),
        (assign, ":var_8", -1),
    (try_end),
    (troop_get_slot, ":var_9", ":var_0", slot_troop_father),
    (troop_get_slot, ":var_10", ":var_1", slot_troop_father),
    (troop_get_slot, ":var_11", ":var_0", slot_troop_mother),
    (troop_get_slot, ":var_12", ":var_1", slot_troop_mother),
    (try_begin),
        (is_between, ":var_9", "trp_npc1", "trp_heroes_end"),
        (troop_get_slot, ":var_13", ":var_9", slot_troop_father),
    (else_try),
        (assign, ":var_13", -1),
    (try_end),
    (try_begin),
        (is_between, ":var_10", "trp_npc1", "trp_heroes_end"),
        (troop_get_slot, ":var_14", ":var_10", slot_troop_father),
    (else_try),
        (assign, ":var_14", -1),
    (try_end),
    (troop_get_slot, ":var_15", ":var_0", slot_troop_guardian),
    (troop_get_slot, ":var_16", ":var_1", slot_troop_guardian),
    (str_store_string, s11, "str_no_relation"),
    (try_begin),
        (eq, ":var_0", ":var_1"),
    (else_try),
        (eq, ":var_4", ":var_1"),
        (assign, ":var_3", 20),
        (try_begin),
            (eq, ":var_2", 1),
            (str_store_string, s11, "str_wife"),
        (else_try),
            (str_store_string, s11, "str_husband"),
        (try_end),
    (else_try),
        (eq, ":var_10", ":var_0"),
        (assign, ":var_3", 15),
        (str_store_string, s11, "str_father"),
    (else_try),
        (eq, ":var_12", ":var_0"),
        (assign, ":var_3", 15),
        (str_store_string, s11, "str_mother"),
    (else_try),
        (this_or_next|eq, ":var_9", ":var_1"),
        (eq, ":var_11", ":var_1"),
        (assign, ":var_3", 15),
        (try_begin),
            (eq, ":var_2", 1),
            (str_store_string, s11, "str_daughter"),
        (else_try),
            (str_store_string, s11, "str_son"),
        (try_end),
    (else_try),
        (gt, ":var_9", -1),
        (eq, ":var_9", ":var_10"),
        (assign, ":var_3", 10),
        (try_begin),
            (eq, ":var_2", 1),
            (str_store_string, s11, "str_sister"),
        (else_try),
            (str_store_string, s11, "str_brother"),
        (try_end),
    (else_try),
        (eq, ":var_16", ":var_0"),
        (assign, ":var_3", 10),
        (try_begin),
            (eq, ":var_2", 1),
            (str_store_string, s11, "str_sister"),
        (else_try),
            (str_store_string, s11, "str_brother"),
        (try_end),
    (else_try),
        (eq, ":var_15", ":var_1"),
        (assign, ":var_3", 10),
        (try_begin),
            (eq, ":var_2", 1),
            (str_store_string, s11, "str_sister"),
        (else_try),
            (str_store_string, s11, "str_brother"),
        (try_end),
    (else_try),
        (gt, ":var_13", -1),
        (eq, ":var_13", ":var_10"),
        (assign, ":var_3", 4),
        (try_begin),
            (eq, ":var_2", 1),
            (str_store_string, s11, "str_niece"),
        (else_try),
            (str_store_string, s11, "str_nephew"),
        (try_end),
    (else_try),
        (gt, ":var_14", -1),
        (eq, ":var_14", ":var_9"),
        (assign, ":var_3", 4),
        (try_begin),
            (eq, ":var_2", 1),
            (str_store_string, s11, "str_aunt"),
        (else_try),
            (str_store_string, s11, "str_uncle"),
        (try_end),
    (else_try),
        (gt, ":var_13", 0),
        (eq, ":var_14", ":var_13"),
        (assign, ":var_3", 2),
        (str_store_string, s11, "str_cousin"),
    (else_try),
        (eq, ":var_6", ":var_1"),
        (assign, ":var_3", 5),
        (try_begin),
            (eq, ":var_2", 1),
            (str_store_string, s11, "str_daughterinlaw"),
        (else_try),
            (str_store_string, s11, "str_soninlaw"),
        (try_end),
    (else_try),
        (eq, ":var_7", ":var_0"),
        (assign, ":var_3", 5),
        (str_store_string, s11, "str_fatherinlaw"),
    (else_try),
        (eq, ":var_8", ":var_0"),
        (neg|eq, ":var_8", "trp_player"),
        (assign, ":var_3", 5),
        (str_store_string, s11, "str_motherinlaw"),
    (else_try),
        (gt, ":var_6", -1),
        (eq, ":var_6", ":var_10"),
        (assign, ":var_3", 5),
        (try_begin),
            (eq, ":var_2", 1),
            (str_store_string, s11, "str_sisterinlaw"),
        (else_try),
            (str_store_string, s11, "str_brotherinlaw"),
        (try_end),
    (else_try),
        (gt, ":var_7", -1),
        (eq, ":var_7", ":var_9"),
        (assign, ":var_3", 5),
        (try_begin),
            (eq, ":var_2", 1),
            (str_store_string, s11, "str_sisterinlaw"),
        (else_try),
            (str_store_string, s11, "str_brotherinlaw"),
        (try_end),
    (else_try),
        (gt, ":var_5", -1),
        (troop_slot_eq, ":var_5", slot_troop_guardian, ":var_0"),
        (assign, ":var_3", 5),
        (try_begin),
            (eq, ":var_2", 1),
            (str_store_string, s11, "str_sisterinlaw"),
        (else_try),
            (str_store_string, s11, "str_brotherinlaw"),
        (try_end),
    (else_try),
        (gt, ":var_4", -1),
        (troop_slot_eq, ":var_4", slot_troop_guardian, ":var_1"),
        (assign, ":var_3", 5),
        (try_begin),
            (eq, ":var_2", 1),
            (str_store_string, s11, "str_sisterinlaw"),
        (else_try),
            (str_store_string, s11, "str_brotherinlaw"),
        (try_end),
    (try_end),
    (assign, reg4, ":var_2"),
    (assign, reg0, ":var_3"),

]),

("collect_friendly_parties",
[
    (party_collect_attachments_to_party, "p_main_party", "p_collective_friends"),
    (try_begin),
        (gt, "$g_ally_party", 0),
        (party_collect_attachments_to_party, "$g_ally_party", "p_temp_party"),
        (assign, "$g_move_heroes", 1),
        (call_script, "script_party_add_party", "p_collective_friends", "p_temp_party"),
    (try_end),

]),

("encounter_calculate_fit",
[
    (call_script, "script_party_count_fit_for_battle", "p_main_party"),
    (call_script, "script_collect_friendly_parties"),
    (call_script, "script_party_count_fit_for_battle", "p_collective_friends"),
    (assign, "$g_friend_fit_for_battle", reg0),
    (party_clear, "p_collective_ally"),
    (try_begin),
        (gt, "$g_ally_party", 0),
        (party_is_active, "$g_ally_party"),
        (party_collect_attachments_to_party, "$g_ally_party", "p_collective_ally"),
    (try_end),
    (party_clear, "p_collective_enemy"),
    (try_begin),
        (party_is_active, "$g_enemy_party"),
        (party_collect_attachments_to_party, "$g_enemy_party", "p_collective_enemy"),
    (try_end),
    (call_script, "script_party_count_fit_for_battle", "p_collective_enemy"),
    (assign, "$g_enemy_fit_for_battle", reg0),
    (assign, reg11, "$g_enemy_fit_for_battle"),
    (assign, reg10, "$g_friend_fit_for_battle"),

]),

("encounter_init_variables",
[
    (assign, "$capture_screen_shown", 0),
    (assign, "$loot_screen_shown", 0),
    (assign, "$thanked_by_ally_leader", 0),
    (assign, "$g_battle_result", 0),
    (assign, "$cant_leave_encounter", 0),
    (assign, "$cant_talk_to_enemy", 0),
    (assign, "$last_defeated_hero", 0),
    (assign, "$last_freed_hero", 0),
    (call_script, "script_encounter_calculate_fit"),
    (call_script, "script_party_copy", "p_main_party_backup", "p_main_party"),
    (call_script, "script_party_calculate_strength", "p_main_party", 0),
    (assign, "$g_starting_strength_main_party", reg0),
    (call_script, "script_party_copy", "p_encountered_party_backup", "p_collective_enemy"),
    (call_script, "script_party_calculate_strength", "p_collective_enemy", 0),
    (assign, "$g_starting_strength_enemy_party", reg0),
    (assign, "$g_strength_contribution_of_player", 100),
    (call_script, "script_party_copy", "p_collective_friends_backup", "p_collective_friends"),
    (call_script, "script_party_calculate_strength", "p_collective_friends", 0),
    (assign, "$g_starting_strength_friends", reg0),
    (store_mul, "$g_strength_contribution_of_player", "$g_starting_strength_main_party", 100),
    (try_begin),
        (eq, "$freelancer_state", 1),
        (store_character_level, "$g_strength_contribution_of_player", "$player_cur_troop"),
        (val_div, "$g_strength_contribution_of_player", 2),
        (val_max, "$g_strength_contribution_of_player", 5),
    (else_try),
        (gt, "$g_starting_strength_friends", 0),
        (val_div, "$g_strength_contribution_of_player", "$g_starting_strength_friends"),
    (else_try),
        (assign, "$g_strength_contribution_of_player", 100),
    (try_end),
    (party_clear, "p_routed_enemies"),
    (assign, "$num_routed_us", 0),
    (assign, "$num_routed_allies", 0),
    (assign, "$num_routed_enemies", 0),
    (party_get_num_companion_stacks, ":var_0", "p_main_party"),
    (try_for_range, ":var_1", 0, ":var_0"),
        (party_stack_get_troop_id, ":var_2", "p_main_party", ":var_1"),
        (try_begin),
            (troop_set_slot, ":var_2", slot_troop_player_routed_agents, 0),
        (try_end),
    (try_end),
    (party_get_num_companion_stacks, ":var_0", "p_collective_friends"),
    (try_for_range, ":var_1", 0, ":var_0"),
        (party_stack_get_troop_id, ":var_2", "p_collective_friends", ":var_1"),
        (try_begin),
            (troop_set_slot, ":var_2", slot_troop_ally_routed_agents, 0),
        (try_end),
    (try_end),
    (party_get_num_companion_stacks, ":var_0", "p_collective_enemy"),
    (try_for_range, ":var_1", 0, ":var_0"),
        (party_stack_get_troop_id, ":var_2", "p_collective_enemy", ":var_1"),
        (try_begin),
            (troop_set_slot, ":var_2", slot_troop_enemy_routed_agents, 0),
        (try_end),
    (try_end),
    (try_for_range, ":var_3", 30, 72),
        (faction_set_slot, ":var_3", slot_faction_num_routed_agents, 0),
    (try_end),
    (assign, "$routed_party_added", 0),
    (party_clear, "p_total_enemy_casualties"),

]),

("calculate_renown_value",
[
    (call_script, "script_party_calculate_strength", "p_main_party", 0),
    (assign, ":var_0", reg0),
    (call_script, "script_party_calculate_strength", "p_collective_enemy", 0),
    (assign, ":var_1", reg0),
    (call_script, "script_party_calculate_strength", "p_collective_friends", 0),
    (assign, ":var_2", reg0),
    (val_add, ":var_2", 1),
    (store_mul, ":var_3", ":var_1", 100),
    (val_div, ":var_3", ":var_2"),
    (assign, ":var_4", ":var_1"),
    (val_mul, ":var_4", ":var_3"),
    (val_div, ":var_4", 100),
    (val_mul, ":var_4", ":var_0"),
    (val_div, ":var_4", ":var_2"),
    (store_div, "$battle_renown_value", ":var_4", 5),
    (val_min, "$battle_renown_value", 2500),
    (convert_to_fixed_point, "$battle_renown_value"),
    (store_sqrt, "$battle_renown_value", "$battle_renown_value"),
    (convert_from_fixed_point, "$battle_renown_value"),
    (assign, reg8, "$battle_renown_value"),
    (display_message, "@Renown value for this battle is {reg8}.", 0xFFFFFFFF),

]),

("cf_get_first_agent_with_troop_id",
[
    (store_script_param_1, ":var_0"),
    (assign, ":var_1", -1),
    (try_for_agents, ":var_2"),
        (eq, ":var_1", -1),
        (agent_get_troop_id, ":var_3", ":var_2"),
        (eq, ":var_3", ":var_0"),
        (assign, ":var_1", ":var_2"),
    (try_end),
    (assign, reg0, ":var_1"),
    (neg|eq, reg0, -1),

]),

("cf_team_get_average_position_of_agents_with_type_to_pos1",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (assign, ":var_2", 0),
    (assign, ":var_3", 0),
    (assign, ":var_4", 0),
    (assign, ":var_5", 0),
    (set_fixed_point_multiplier, 100),
    (try_for_agents, ":var_6"),
        (agent_is_alive, ":var_6"),
        (agent_is_human, ":var_6"),
        (agent_get_team, ":var_7", ":var_6"),
        (eq, ":var_7", ":var_0"),
        (agent_get_division, ":var_8", ":var_6"),
        (this_or_next|eq, ":var_1", 9),
        (eq, ":var_1", ":var_8"),
        (agent_get_position, pos1, ":var_6"),
        (position_get_x, ":var_9", pos1),
        (val_add, ":var_2", ":var_9"),
        (position_get_y, ":var_10", pos1),
        (val_add, ":var_3", ":var_10"),
        (position_get_z, ":var_11", pos1),
        (val_add, ":var_4", ":var_11"),
        (val_add, ":var_5", 1),
    (try_end),
    (gt, ":var_5", 1),
    (val_div, ":var_2", ":var_5"),
    (val_div, ":var_3", ":var_5"),
    (val_div, ":var_4", ":var_5"),
    (init_position, pos1),
    (position_move_x, pos1, ":var_2"),
    (position_move_y, pos1, ":var_3"),
    (position_move_z, pos1, ":var_4"),

]),

("cf_turn_windmill_fans",
[
    (store_script_param_1, ":var_0"),
    (scene_prop_get_instance, ":var_1", "spr_windmill_fan_turning", ":var_0"),
    (ge, ":var_1", 0),
    (prop_instance_get_position, pos1, ":var_1"),
    (position_rotate_y, pos1, 10),
    (prop_instance_animate_to_position, ":var_1", 1, 100),
    (val_add, ":var_0", 1),
    (call_script, "script_cf_turn_windmill_fans", ":var_0"),

]),

("print_party_members",
[
    (store_script_param_1, ":var_0"),
    (party_get_num_companion_stacks, ":var_1", ":var_0"),
    (assign, reg10, ":var_1"),
    (try_for_range, ":var_2", 0, ":var_1"),
        (party_stack_get_troop_id, ":var_3", ":var_0", ":var_2"),
        (troop_is_hero, ":var_3"),
        (try_begin),
            (eq, ":var_2", 0),
            (str_store_troop_name, s51, ":var_3"),
        (try_end),
        (str_store_troop_name, s52, ":var_3"),
        (try_begin),
            (eq, ":var_2", 1),
            (str_store_string, s51, "str_s52_and_s51"),
        (else_try),
            (gt, ":var_2", 1),
            (str_store_string, s51, "str_s52_comma_s51"),
        (try_end),
    (try_end),
    (try_begin),
        (eq, ":var_1", 0),
        (str_store_string, s51, "str_noone"),
    (try_end),

]),

("round_value",
[
    (store_script_param_1, ":var_0"),
    (try_begin),
        (neg|ge, ":var_0", 100),
        (neg|eq, ":var_0", 0),
        (val_add, ":var_0", 5),
        (val_div, ":var_0", 10),
        (val_mul, ":var_0", 10),
        (try_begin),
            (eq, ":var_0", 0),
            (assign, ":var_0", 5),
        (try_end),
    (else_try),
        (neg|ge, ":var_0", 300),
        (val_add, ":var_0", 25),
        (val_div, ":var_0", 50),
        (val_mul, ":var_0", 50),
    (else_try),
        (val_add, ":var_0", 50),
        (val_div, ":var_0", 100),
        (val_mul, ":var_0", 100),
    (try_end),
    (assign, reg0, ":var_0"),

]),

("change_banners_and_chest",
[
    (party_get_slot, ":var_0", "$g_encountered_party", slot_town_lord),
    (try_begin),
        (ge, ":var_0", 0),
        (troop_get_slot, ":var_1", ":var_0", slot_troop_banner_scene_prop),
        (gt, ":var_1", 0),
        (replace_scene_props, "spr_banner_a", ":var_1"),
    (else_try),
        (replace_scene_props, "spr_banner_a", "spr_empty"),
    (try_end),
    (try_begin),
        (neg|eq, ":var_0", "trp_player"),
        (replace_scene_props, "spr_player_chest", "spr_locked_player_chest"),
    (try_end),

]),

("remove_siege_objects",
[
    (replace_scene_props, "spr_eastroman_wall_destroyed", "spr_eastroman_wall"),
    (replace_scene_props, "spr_battlement_a_destroyed", "spr_battlement_a"),
    (replace_scene_props, "spr_snowy_castle_battlement_a_destroyed", "spr_snowy_castle_battlement_a"),
    (replace_scene_props, "spr_castle_e_battlement_a_destroyed", "spr_castle_e_battlement_a"),
    (replace_scene_props, "spr_castle_battlement_a_destroyed", "spr_castle_battlement_a"),
    (replace_scene_props, "spr_castle_battlement_b_destroyed", "spr_castle_battlement_b"),
    (replace_scene_props, "spr_earth_wall_a2", "spr_earth_wall_a"),
    (replace_scene_props, "spr_earth_wall_b2", "spr_earth_wall_b"),
    (replace_scene_props, "spr_belfry_platform_b", "spr_empty"),
    (replace_scene_props, "spr_belfry_platform_a", "spr_empty"),
    (replace_scene_props, "spr_belfry_a", "spr_empty"),
    (replace_scene_props, "spr_belfry_wheel", "spr_empty"),
    (replace_scene_props, "spr_siege_ladder_move_6m", "spr_empty"),
    (replace_scene_props, "spr_siege_ladder_move_8m", "spr_empty"),
    (replace_scene_props, "spr_siege_ladder_move_10m", "spr_empty"),
    (replace_scene_props, "spr_siege_ladder_move_12m", "spr_empty"),
    (replace_scene_props, "spr_siege_ladder_move_14m", "spr_empty"),
    (replace_scene_props, "spr_siege_ladder_12m", "spr_empty"),
    (replace_scene_props, "spr_siege_ladder_14m", "spr_empty"),
    (replace_scene_props, "spr_mangonel", "spr_empty"),
    (replace_scene_props, "spr_trebuchet_old", "spr_empty"),
    (replace_scene_props, "spr_trebuchet_new", "spr_empty"),
    (replace_scene_props, "spr_stone_ball", "spr_empty"),
    (replace_scene_props, "spr_Village_fire_big", "spr_empty"),
    (replace_scene_props, "spr_1257_earth_gate", "spr_empty"),
    (replace_scene_props, "spr_1257_portcullis", "spr_empty"),
    (replace_scene_props, "spr_1257_tavern_door_a", "spr_empty"),
    (replace_scene_props, "spr_1257_tavern_door_b", "spr_empty"),
    (replace_scene_props, "spr_1257_castle_f_door_a", "spr_empty"),

]),

("remove_manor_objects",
[
    (store_current_scene, ":var_0"),
    (try_begin),
        (eq, ":var_0", "scn_manor_fortified_teutonic"),
        (try_begin),
            (party_slot_eq, "$g_encountered_party", 302, 0),
            (replace_scene_props, "spr_earth_house_c", "spr_empty"),
            (replace_scene_props, "spr_chair_trunk_c", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 302, 2),
            (replace_scene_props, "spr_to_fake_house_f", "spr_empty"),
            (replace_scene_props, "spr_passage_house_a", "spr_empty"),
            (replace_scene_props, "spr_chair_trunk_a", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 306, 1),
            (replace_scene_props, "spr_1257_chapel", "spr_empty"),
            (replace_scene_props, "spr_village_wall_a", "spr_empty"),
            (replace_scene_props, "spr_village_wall_b", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 303, 1),
            (replace_scene_props, "spr_wooden_stand", "spr_empty"),
            (replace_scene_props, "spr_cart", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 304, 1),
            (replace_scene_props, "spr_to_town_house_u", "spr_empty"),
            (replace_scene_props, "spr_tavern_barrel", "spr_empty"),
            (replace_scene_props, "spr_tavern_sign", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 305, 1),
            (replace_scene_props, "spr_earth_house_a", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 316, 1),
            (replace_scene_props, "spr_town_house_aa", "spr_empty"),
            (replace_scene_props, "spr_stand_thatched", "spr_empty"),
            (replace_scene_props, "spr_smithy_forge", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 324, 1),
            (replace_scene_props, "spr_gatehouse_new_a", "spr_empty"),
            (replace_scene_props, "spr_smithy_forge", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 323, 1),
            (replace_scene_props, "spr_town_house_d", "spr_empty"),
            (replace_scene_props, "spr_smithy_grindstone_wheel", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 325, 1),
            (replace_scene_props, "spr_arena_archery_target_a", "spr_empty"),
            (replace_scene_props, "spr_archery_target_with_hit_a", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 315, 1),
            (replace_scene_props, "spr_to_castle_courtyard_house_b", "spr_empty"),
            (replace_scene_props, "spr_cup", "spr_empty"),
            (replace_scene_props, "spr_jug", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 312, 1),
            (replace_scene_props, "spr_to_town_house_t", "spr_empty"),
            (replace_scene_props, "spr_bread_a", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 317, 1),
            (replace_scene_props, "spr_to_castle_courtyard_house_c", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 314, 1),
            (replace_scene_props, "spr_brewery_big_bucket", "spr_empty"),
            (replace_scene_props, "spr_to_courtyard_gate_b", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 313, 1),
            (replace_scene_props, "spr_to_gatehouse_b", "spr_empty"),
            (replace_scene_props, "spr_winery_middle_barrel", "spr_empty"),
            (replace_scene_props, "spr_winery_wine_press", "spr_empty"),
            (replace_scene_props, "spr_winery_barrel_shelf", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 322, 1),
            (replace_scene_props, "spr_to_castle_h_house_b", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 326, 1),
            (replace_scene_props, "spr_to_castle_h_house_c", "spr_empty"),
            (replace_scene_props, "spr_feeding_trough_a", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 319, 1),
            (replace_scene_props, "spr_to_town_house_y", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 320, 1),
            (replace_scene_props, "spr_to_town_house_r", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 321, 1),
            (replace_scene_props, "spr_to_town_house_w", "spr_empty"),
            (replace_scene_props, "spr_tannery_hide_a", "spr_empty"),
            (replace_scene_props, "spr_to_passage_house_c", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 318, 1),
            (replace_scene_props, "spr_to_town_house_z", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 327, 1),
            (replace_scene_props, "spr_to_castle_gate_house_a", "spr_empty"),
            (replace_scene_props, "spr_to_castle_f_battlement_a", "spr_empty"),
            (replace_scene_props, "spr_to_castle_round_tower_a", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 308, 1),
            (replace_scene_props, "spr_farm_house_a", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 310, 1),
            (replace_scene_props, "spr_farm_house_b", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 309, 1),
            (replace_scene_props, "spr_farm_house_c", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 311, 1),
            (replace_scene_props, "spr_village_house_d", "spr_empty"),
            (replace_scene_props, "spr_net_a", "spr_empty"),
            (replace_scene_props, "spr_net_b", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 307, 1),
            (replace_scene_props, "spr_water_well_a", "spr_empty"),
        (try_end),
    (else_try),
        (try_begin),
            (party_slot_eq, "$g_encountered_party", 302, 0),
            (replace_scene_props, "spr_earth_house_c", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 302, 2),
            (replace_scene_props, "spr_village_house_g", "spr_empty"),
            (replace_scene_props, "spr_village_house_h", "spr_empty"),
            (replace_scene_props, "spr_village_house_i", "spr_empty"),
            (replace_scene_props, "spr_village_house_j", "spr_empty"),
            (replace_scene_props, "spr_small_wall_f", "spr_empty"),
            (replace_scene_props, "spr_chair_trunk_c", "spr_empty"),
            (replace_scene_props, "spr_barrel", "spr_empty"),
            (replace_scene_props, "spr_box_a", "spr_empty"),
            (replace_scene_props, "spr_chair_trunk_a", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 306, 1),
            (replace_scene_props, "spr_church_a", "spr_empty"),
            (replace_scene_props, "spr_church_tower_a", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 303, 1),
            (replace_scene_props, "spr_wooden_stand", "spr_empty"),
            (replace_scene_props, "spr_cart", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 304, 1),
            (replace_scene_props, "spr_timber_frame_house_b", "spr_empty"),
            (replace_scene_props, "spr_tavern_barrel", "spr_empty"),
            (replace_scene_props, "spr_tavern_sign", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 305, 1),
            (replace_scene_props, "spr_timber_frame_house_c", "spr_empty"),
            (replace_scene_props, "spr_tavern_chair_a", "spr_empty"),
            (replace_scene_props, "spr_tavern_chair_b", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 316, 1),
            (replace_scene_props, "spr_town_house_aa", "spr_empty"),
            (replace_scene_props, "spr_stand_thatched", "spr_empty"),
            (replace_scene_props, "spr_smithy_anvil", "spr_empty"),
            (replace_scene_props, "spr_smithy_forge", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 324, 1),
            (replace_scene_props, "spr_town_house_c", "spr_empty"),
            (replace_scene_props, "spr_smithy_grindstone_wheel", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 323, 1),
            (replace_scene_props, "spr_town_house_d", "spr_empty"),
            (replace_scene_props, "spr_smithy_forge_bellows", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 325, 1),
            (replace_scene_props, "spr_town_house_h", "spr_empty"),
            (replace_scene_props, "spr_arena_archery_target_a", "spr_empty"),
            (replace_scene_props, "spr_archery_target_with_hit_a", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 315, 1),
            (replace_scene_props, "spr_town_house_e", "spr_empty"),
            (replace_scene_props, "spr_table_small", "spr_empty"),
            (replace_scene_props, "spr_village_oven", "spr_empty"),
            (replace_scene_props, "spr_cup", "spr_empty"),
            (replace_scene_props, "spr_jug", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 312, 1),
            (replace_scene_props, "spr_town_house_f", "spr_empty"),
            (replace_scene_props, "spr_fireplace_a", "spr_empty"),
            (replace_scene_props, "spr_table_small_b", "spr_empty"),
            (replace_scene_props, "spr_bread_a", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 317, 1),
            (replace_scene_props, "spr_town_house_g", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 314, 1),
            (replace_scene_props, "spr_brewery_big_bucket", "spr_empty"),
            (replace_scene_props, "spr_brewery_pool", "spr_empty"),
            (replace_scene_props, "spr_town_house_o", "spr_empty"),
            (replace_scene_props, "spr_brewery_bucket_platform_b", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 313, 1),
            (replace_scene_props, "spr_town_house_za", "spr_empty"),
            (replace_scene_props, "spr_winery_middle_barrel", "spr_empty"),
            (replace_scene_props, "spr_winery_wine_press", "spr_empty"),
            (replace_scene_props, "spr_winery_wine_cart_loaded", "spr_empty"),
            (replace_scene_props, "spr_winery_wine_cart_small_loaded", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 322, 1),
            (replace_scene_props, "spr_torture_tool_a", "spr_empty"),
            (replace_scene_props, "spr_torture_tool_b", "spr_empty"),
            (replace_scene_props, "spr_torture_tool_c", "spr_empty"),
            (replace_scene_props, "spr_castle_courtyard_house_a", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 326, 1),
            (replace_scene_props, "spr_village_shed_b", "spr_empty"),
            (replace_scene_props, "spr_village_stable_a", "spr_empty"),
            (replace_scene_props, "spr_open_stable_a", "spr_empty"),
            (replace_scene_props, "spr_open_stable_b", "spr_empty"),
            (replace_scene_props, "spr_feeding_trough_a", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 319, 1),
            (replace_scene_props, "spr_town_house_y", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 320, 1),
            (replace_scene_props, "spr_town_house_z", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 321, 1),
            (replace_scene_props, "spr_town_house_i", "spr_empty"),
            (replace_scene_props, "spr_tannery_hide_a", "spr_empty"),
            (replace_scene_props, "spr_tannery_hide_b", "spr_empty"),
            (replace_scene_props, "spr_tannery_pools_a", "spr_empty"),
            (replace_scene_props, "spr_tannery_pools_b", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 318, 1),
            (replace_scene_props, "spr_town_house_a", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 327, 1),
            (replace_scene_props, "spr_castle_f_battlement_a", "spr_empty"),
            (replace_scene_props, "spr_castle_gate_house_a", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 308, 1),
            (replace_scene_props, "spr_farm_house_a", "spr_empty"),
            (replace_scene_props, "spr_angry_wheat", "spr_empty"),
            (replace_scene_props, "spr_cabbage_b", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 310, 1),
            (replace_scene_props, "spr_farm_house_b", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 309, 1),
            (replace_scene_props, "spr_farm_house_c", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 311, 1),
            (replace_scene_props, "spr_earth_house_b", "spr_empty"),
            (replace_scene_props, "spr_net_a", "spr_empty"),
            (replace_scene_props, "spr_net_b", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 307, 1),
            (replace_scene_props, "spr_water_well_a", "spr_empty"),
        (try_end),
    (try_end),
    (try_begin),
        (party_slot_eq, "$g_encountered_party", 303, 1),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 311, 1),
            (replace_scene_items_with_scene_props, "itm_smoked_fish", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 318, 1),
            (replace_scene_items_with_scene_props, "itm_oil", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 315, 1),
            (replace_scene_items_with_scene_props, "itm_pottery", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 319, 1),
            (replace_scene_items_with_scene_props, "itm_linen", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 320, 1),
            (replace_scene_items_with_scene_props, "itm_wool_cloth", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 316, 1),
            (replace_scene_items_with_scene_props, "itm_tools", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 321, 1),
            (replace_scene_items_with_scene_props, "itm_raw_leather", "spr_empty"),
            (replace_scene_items_with_scene_props, "itm_leatherwork", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 313, 1),
            (replace_scene_items_with_scene_props, "itm_wine", "spr_empty"),
            (replace_scene_items_with_scene_props, "itm_quest_wine", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 314, 1),
            (replace_scene_items_with_scene_props, "itm_ale", "spr_empty"),
            (replace_scene_items_with_scene_props, "itm_quest_ale", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 317, 1),
            (replace_scene_items_with_scene_props, "itm_dried_meat", "spr_empty"),
            (replace_scene_items_with_scene_props, "itm_sausages", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 312, 1),
            (replace_scene_items_with_scene_props, "itm_bread", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 344, "trp_manor_trader_furs"),
            (replace_scene_items_with_scene_props, "itm_furs", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 344, "trp_manor_trader_salt"),
            (replace_scene_items_with_scene_props, "itm_salt", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 344, "trp_manor_trader_silk"),
            (replace_scene_items_with_scene_props, "itm_raw_silk", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 344, "trp_manor_trader_dyes"),
            (replace_scene_items_with_scene_props, "itm_raw_dyes", "spr_empty"),
        (try_end),
        (try_begin),
            (neg|party_slot_eq, "$g_encountered_party", 344, "trp_manor_trader_spice"),
            (replace_scene_items_with_scene_props, "itm_spice", "spr_empty"),
        (try_end),
    (else_try),
        (replace_scene_items_with_scene_props, "itm_grain", "spr_empty"),
        (replace_scene_items_with_scene_props, "itm_honey", "spr_empty"),
        (replace_scene_items_with_scene_props, "itm_cabbages", "spr_empty"),
        (replace_scene_items_with_scene_props, "itm_apples", "spr_empty"),
        (replace_scene_items_with_scene_props, "itm_wool", "spr_empty"),
        (replace_scene_items_with_scene_props, "itm_butter", "spr_empty"),
        (replace_scene_items_with_scene_props, "itm_cheese", "spr_empty"),
        (replace_scene_items_with_scene_props, "itm_cattle_meat", "spr_empty"),
        (replace_scene_items_with_scene_props, "itm_smoked_fish", "spr_empty"),
        (replace_scene_items_with_scene_props, "itm_oil", "spr_empty"),
        (replace_scene_items_with_scene_props, "itm_pottery", "spr_empty"),
        (replace_scene_items_with_scene_props, "itm_linen", "spr_empty"),
        (replace_scene_items_with_scene_props, "itm_wool_cloth", "spr_empty"),
        (replace_scene_items_with_scene_props, "itm_tools", "spr_empty"),
        (replace_scene_items_with_scene_props, "itm_raw_leather", "spr_empty"),
        (replace_scene_items_with_scene_props, "itm_leatherwork", "spr_empty"),
        (replace_scene_items_with_scene_props, "itm_wine", "spr_empty"),
        (replace_scene_items_with_scene_props, "itm_quest_wine", "spr_empty"),
        (replace_scene_items_with_scene_props, "itm_ale", "spr_empty"),
        (replace_scene_items_with_scene_props, "itm_quest_ale", "spr_empty"),
        (replace_scene_items_with_scene_props, "itm_dried_meat", "spr_empty"),
        (replace_scene_items_with_scene_props, "itm_sausages", "spr_empty"),
        (replace_scene_items_with_scene_props, "itm_bread", "spr_empty"),
        (replace_scene_items_with_scene_props, "itm_furs", "spr_empty"),
        (replace_scene_items_with_scene_props, "itm_salt", "spr_empty"),
        (replace_scene_items_with_scene_props, "itm_raw_silk", "spr_empty"),
        (replace_scene_items_with_scene_props, "itm_raw_dyes", "spr_empty"),
        (replace_scene_items_with_scene_props, "itm_spice", "spr_empty"),
    (try_end),

]),

("describe_relation_to_s63",
[
    (store_script_param_1, ":var_0"),
    (store_add, ":var_1", ":var_0", 100),
    (val_add, ":var_1", 5),
    (store_div, ":var_2", ":var_1", 10),
    (val_clamp, ":var_2", 0, 20),
    (store_add, ":var_3", "str_relation_mnus_100", ":var_2"),
    (str_store_string, s63, ":var_3"),

]),

("describe_center_relation_to_s3",
[
    (store_script_param_1, ":var_0"),
    (store_add, ":var_1", ":var_0", 100),
    (val_add, ":var_1", 5),
    (store_div, ":var_2", ":var_1", 10),
    (val_clamp, ":var_2", 0, 20),
    (store_add, ":var_3", "str_center_relation_mnus_100", ":var_2"),
    (str_store_string, s3, ":var_3"),

]),

("center_ambiance_sounds",
[
    (assign, ":var_0", -1),
    (assign, ":var_1", -1),
    (assign, ":var_2", -1),
    (assign, ":var_3", -1),
    (assign, ":var_4", -1),
    (try_begin),
        (party_slot_eq, "$g_encountered_party", slot_party_type, 4),
        (try_begin),
            (neg|is_currently_night),
            (assign, ":var_2", "snd_distant_dog_bark"),
            (assign, ":var_2", "snd_distant_chicken"),
        (else_try),
            (assign, ":var_0", "snd_distant_dog_bark"),
            (assign, ":var_1", "snd_distant_owl"),
        (try_end),
    (else_try),
        (party_slot_eq, "$g_encountered_party", slot_party_type, 3),
        (try_begin),
            (neg|is_currently_night),
            (assign, ":var_0", "snd_distant_carpenter"),
            (assign, ":var_1", "snd_distant_blacksmith"),
            (assign, ":var_2", "snd_distant_dog_bark"),
        (else_try),
            (assign, ":var_0", "snd_distant_dog_bark"),
        (try_end),
    (try_end),
    (try_begin),
        (store_random_in_range, ":var_5", 0, 7),
        (try_begin),
            (eq, ":var_5", 1),
            (ge, ":var_0", 0),
            (play_sound, ":var_0"),
        (else_try),
            (eq, ":var_5", 2),
            (ge, ":var_1", 0),
            (play_sound, ":var_1"),
        (else_try),
            (eq, ":var_5", 3),
            (ge, ":var_2", 0),
            (play_sound, ":var_2"),
        (else_try),
            (eq, ":var_5", 4),
            (ge, ":var_3", 0),
            (play_sound, ":var_3"),
        (else_try),
            (eq, ":var_5", 5),
            (ge, ":var_4", 0),
            (play_sound, ":var_4"),
        (try_end),
    (try_end),

]),

("center_set_walker_to_type",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (store_add, ":var_3", 180, ":var_1"),
    (party_set_slot, ":var_0", ":var_3", ":var_2"),
    (party_get_slot, ":var_4", ":var_0", slot_center_original_faction),
    (faction_get_slot, ":var_5", ":var_4", slot_faction_culture),
    (store_random_in_range, ":var_6", 0, 2),
    (try_begin),
        (party_slot_eq, ":var_0", slot_party_type, 4),
        (val_add, ":var_6", 55),
    (else_try),
        (val_add, ":var_6", 53),
    (try_end),
    (try_begin),
        (eq, ":var_2", 3),
        (assign, ":var_7", ":var_6"),
        (val_add, ":var_6", 4),
    (try_end),
    (faction_get_slot, ":var_8", ":var_5", ":var_6"),
    (try_begin),
        (eq, ":var_2", 3),
        (faction_get_slot, ":var_9", ":var_5", ":var_7"),
        (try_for_range, ":var_10", "itm_horse_meat", "itm_wooden_stick"),
            (store_item_kind_count, ":var_11", ":var_10", ":var_9"),
            (ge, ":var_11", 1),
            (store_item_kind_count, ":var_11", ":var_10", ":var_8"),
            (neg|ge, ":var_11", 1),
            (troop_add_items, ":var_8", ":var_10", 1),
        (try_end),
        (store_random_in_range, ":var_12", 12, 15),
        (assign, ":var_13", 0),
        (try_for_range, ":var_10", "itm_horse_meat", "itm_wooden_stick"),
            (store_item_kind_count, ":var_11", ":var_10", ":var_8"),
            (ge, ":var_11", 1),
            (item_get_type, ":var_14", ":var_10"),
            (eq, ":var_14", ":var_12"),
            (val_add, ":var_13", 1),
            (troop_remove_items, ":var_8", ":var_10", ":var_11"),
        (try_end),
        (store_random_in_range, ":var_15", 0, ":var_13"),
        (assign, ":var_13", -1),
        (try_for_range, ":var_10", "itm_horse_meat", "itm_wooden_stick"),
            (store_item_kind_count, ":var_11", ":var_10", ":var_9"),
            (ge, ":var_11", 1),
            (item_get_type, ":var_14", ":var_10"),
            (eq, ":var_14", ":var_12"),
            (val_add, ":var_13", 1),
            (eq, ":var_13", ":var_15"),
            (troop_add_items, ":var_8", ":var_10", 1),
            (assign, ":var_16", ":var_10"),
        (try_end),
        (assign, "$spy_item_worn", ":var_16"),
        (assign, "$spy_quest_troop", ":var_8"),
        (troop_equip_items, ":var_8"),
    (try_end),
    (store_add, ":var_17", 160, ":var_1"),
    (party_set_slot, ":var_0", ":var_17", ":var_8"),
    (store_random_in_range, ":var_18", 0, 1000000),
    (store_add, ":var_19", 170, ":var_1"),
    (party_set_slot, ":var_0", ":var_19", ":var_18"),

]),

("cf_center_get_free_walker",
[
    (store_script_param, ":var_0", 1),
    (assign, ":var_1", 0),
    (try_for_range, ":var_2", 0, 8),
        (store_add, ":var_3", 180, ":var_2"),
        (party_slot_eq, ":var_0", ":var_3", 0),
        (val_add, ":var_1", 1),
    (try_end),
    (gt, ":var_1", 0),
    (assign, reg0, -1),
    (store_random_in_range, ":var_4", 0, ":var_1"),
    (try_for_range, ":var_2", 0, 8),
        (store_add, ":var_3", 180, ":var_2"),
        (party_slot_eq, ":var_0", ":var_3", 0),
        (val_sub, ":var_1", 1),
        (eq, ":var_1", ":var_4"),
        (assign, reg0, ":var_2"),
    (try_end),

]),

("center_remove_walker_type_from_walkers",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (try_for_range, ":var_2", 0, 8),
        (store_add, ":var_3", 180, ":var_2"),
        (party_slot_eq, ":var_0", ":var_3", ":var_1"),
        (call_script, "script_center_set_walker_to_type", ":var_0", ":var_2", 0),
    (try_end),

]),

("init_town_walkers",
[
    (try_begin),
        (eq, "$town_nighttime", 0),
        (try_for_range, ":var_0", 0, 8),
            (store_add, ":var_1", 160, ":var_0"),
            (party_get_slot, ":var_2", "$current_town", ":var_1"),
            (gt, ":var_2", 0),
            (store_add, ":var_3", 32, ":var_0"),
            (try_for_range, reg0, 0, 4),
                (set_visitor, ":var_3", ":var_2"),
            (try_end),
        (try_end),
    (try_end),

]),

("cf_enter_center_location_bandit_check",
[
    (eq, 0, 1),
    (neg|eq, "$town_nighttime", 0),
    (party_slot_ge, "$current_town", slot_center_has_bandits, 1),
    (eq, "$g_defending_against_siege", 0),
    (eq, "$sneaked_into_town", 0),
    (try_begin),
        (party_slot_eq, "$current_town", slot_party_type, 4),
        (party_get_slot, ":var_0", "$current_town", slot_town_center),
    (else_try),
        (party_get_slot, ":var_0", "$current_town", slot_town_center),
    (try_end),
    (modify_visitors_at_site, ":var_0"),
    (reset_visitors),
    (party_get_slot, ":var_1", "$current_town", slot_center_has_bandits),
    (store_character_level, ":var_2", "trp_player"),
    (set_jump_mission, "mt_bandits_at_night"),
    (try_begin),
        (party_slot_eq, "$current_town", slot_party_type, 4),
        (assign, ":var_3", 2),
        (store_div, ":var_4", ":var_2", 10),
        (val_add, ":var_3", ":var_4"),
        (try_for_range, ":var_5", 0, 3),
            (gt, ":var_2", 10),
            (store_random_in_range, ":var_6", 0, 100),
            (neg|ge, ":var_6", ":var_2"),
            (val_add, ":var_3", 1),
        (try_end),
        (set_visitors, 4, ":var_1", ":var_3"),
        (assign, "$num_center_bandits", ":var_3"),
        (set_jump_entry, 2),
    (else_try),
        (assign, ":var_3", 1),
        (assign, "$num_center_bandits", 0),
        (try_begin),
            (gt, ":var_2", 15),
            (store_random_in_range, ":var_6", 0, 100),
            (neg|ge, ":var_6", ":var_2"),
            (assign, ":var_3", 2),
        (try_end),
        (val_add, "$num_center_bandits", ":var_3"),
        (set_visitors, 11, ":var_1", ":var_3"),
        (assign, ":var_3", 1),
        (try_begin),
            (gt, ":var_2", 20),
            (store_random_in_range, ":var_6", 0, 100),
            (neg|ge, ":var_6", ":var_2"),
            (assign, ":var_3", 2),
        (try_end),
        (set_visitors, 27, ":var_1", ":var_3"),
        (val_add, "$num_center_bandits", ":var_3"),
        (try_begin),
            (gt, ":var_2", 9),
            (assign, ":var_3", 1),
            (try_begin),
                (gt, ":var_2", 25),
                (store_random_in_range, ":var_6", 0, 100),
                (neg|ge, ":var_6", ":var_2"),
                (assign, ":var_3", 2),
            (try_end),
            (set_visitors, 28, ":var_1", ":var_3"),
            (val_add, "$num_center_bandits", ":var_3"),
        (try_end),
        (assign, "$town_entered", 1),
        (assign, "$all_doors_locked", 1),
    (try_end),
    (display_message, "@You have run into a trap!", 0xFFFF2222),
    (display_message, "@You are attacked by a group of bandits!", 0xFFFF2222),
    (jump_to_scene, ":var_0"),
    (change_screen_mission),

]),

("init_town_agent",
[
    (store_script_param, ":var_0", 1),
    (agent_get_troop_id, ":var_1", ":var_0"),
    (set_fixed_point_multiplier, 100),
    (assign, ":var_2", -1),
    (try_begin),
        (this_or_next|is_between, ":var_1", "trp_town_1_armorer", "trp_town_1_weaponsmith"),
        (is_between, ":var_1", "trp_town_1_weaponsmith", "trp_town_1_tavernkeeper"),
        (try_begin),
            (troop_get_type, ":var_3", ":var_1"),
            (eq, ":var_3", 0),
            (agent_set_animation, ":var_0", "anim_stand_townguard"),
        (else_try),
            (agent_set_animation, ":var_0", "anim_stand_townguard"),
        (try_end),
    (else_try),
        (is_between, ":var_1", "trp_knight_1_1_wife", "trp_heroes_end"),
        (assign, ":var_2", "anim_stand_lady"),
    (else_try),
        (is_between, ":var_1", "trp_npc1", "trp_knight_1_1_wife"),
        (assign, ":var_2", "anim_stand_lord"),
    (else_try),
        (is_between, ":var_1", "trp_farmer", "trp_town_walker_1"),
        (assign, ":var_2", "anim_stand_townguard"),
    (try_end),
    (try_begin),
        (ge, ":var_2", 0),
        (agent_set_stand_animation, ":var_0", ":var_2"),
        (agent_set_animation, ":var_0", ":var_2"),
        (store_random_in_range, ":var_4", 0, 100),
        (agent_set_animation_progress, ":var_0", ":var_4"),
    (try_end),

]),

("init_town_walker_agents",
[
    (assign, ":var_0", 0),
    (try_for_agents, ":var_1"),
        (agent_get_troop_id, ":var_2", ":var_1"),
        (is_between, ":var_2", "trp_town_walker_1", "trp_tournament_master"),
        (val_add, ":var_0", 1),
        (agent_get_position, pos1, ":var_1"),
        (try_for_range, ":var_3", 9, 40),
            (entry_point_get_position, pos2, ":var_3"),
            (get_distance_between_positions, ":var_4", pos1, pos2),
            (neg|ge, ":var_4", 200),
            (agent_set_slot, ":var_1", slot_agent_target_entry_point, ":var_3"),
        (try_end),
        (call_script, "script_set_town_walker_destination", ":var_1"),
    (try_end),

]),

("agent_get_town_walker_details",
[
    (store_script_param, ":var_0", 1),
    (agent_get_entry_no, ":var_1", ":var_0"),
    (store_sub, ":var_2", ":var_1", 32),
    (store_add, ":var_3", 180, ":var_2"),
    (party_get_slot, ":var_4", "$current_town", ":var_3"),
    (store_add, ":var_5", 170, ":var_2"),
    (party_get_slot, ":var_6", "$current_town", ":var_5"),
    (assign, reg0, ":var_4"),
    (assign, reg1, ":var_6"),
    (assign, reg2, ":var_2"),

]),

("town_walker_occupation_string_to_s14",
[
    (store_script_param, ":var_0", 1),
    (assign, ":var_1", 0),
    (str_store_string, s14, "str_i_take_what_work_i_can_sirmadame_i_carry_water_or_help_the_merchants_with_their_loads_or_help_build_things_if_theres_things_to_be_built"),
    (call_script, "script_agent_get_town_walker_details", ":var_0"),
    (assign, ":var_2", reg0),
    (assign, ":var_3", reg1),
    (assign, ":var_4", -1),
    (assign, ":var_5", 0),
    (try_for_range, ":var_6", "itm_spice", "itm_siege_supply"),
        (call_script, "script_center_get_production", "$g_encountered_party", ":var_6"),
        (val_add, ":var_5", reg0),
    (try_end),
    (val_max, ":var_5", 1),
    (store_mod, ":var_7", ":var_3", ":var_5"),
    (try_begin),
        (eq, "$cheat_mode", 1),
        (assign, reg4, ":var_3"),
        (assign, reg5, ":var_5"),
        (assign, reg7, ":var_7"),
        (display_message, "str_dna_reg4_total_production_reg5_modula_reg7"),
    (try_end),
    (try_for_range, ":var_6", "itm_spice", "itm_siege_supply"),
        (gt, ":var_7", -1),
        (call_script, "script_center_get_production", "$g_encountered_party", ":var_6"),
        (val_sub, ":var_7", reg0),
        (neg|ge, ":var_7", 0),
        (try_begin),
            (eq, "$cheat_mode", 1),
            (str_store_item_name, s9, ":var_6"),
            (display_message, "str_agent_produces_s9"),
        (try_end),
        (assign, ":var_4", ":var_6"),
    (try_end),
    (try_begin),
        (eq, ":var_2", 1),
        (is_between, "$g_encountered_party", "p_town_1_1", "p_castle_1_1"),
        (str_store_string, s14, "str_im_not_doing_anything_sirmadame_theres_no_work_to_be_had_around_here_these_days"),
    (else_try),
        (eq, ":var_2", 1),
        (str_store_string, s14, "str_im_not_doing_anything_sirmadame_i_have_no_land_of_my_own_and_theres_no_work_to_be_had_around_here_these_days"),
    (else_try),
        (eq, ":var_2", 2),
        (str_store_string, s14, "str_why_im_still_living_off_of_your_kindness_and_goodness_sirmadame_hopefully_there_will_be_work_shortly"),
    (else_try),
        (eq, ":var_4", "itm_grain"),
        (is_between, "$g_encountered_party", "p_town_1_1", "p_castle_1_1"),
        (str_store_string, s14, "str_i_work_in_the_fields_just_outside_the_walls_where_they_grow_grain_we_dont_quite_grow_enough_to_meet_our_needs_though_and_have_to_import_grain_from_the_surrounding_countryside"),
        (assign, ":var_1", 1),
    (else_try),
        (eq, ":var_4", "itm_grain"),
        (str_store_string, s14, "str_i_work_mostly_in_the_fields_growing_grain_in_the_town_they_grind_it_to_make_bread_or_ale_and_we_can_also_boil_it_as_a_porridge"),
        (assign, ":var_1", 1),
    (else_try),
        (eq, ":var_4", "itm_ale"),
        (str_store_string, s14, "str_i_work_in_the_breweries_making_ale_the_poor_folk_drink_a_lot_of_it_as_its_cheaper_than_wine_we_make_it_with_grain_brought_in_from_the_countryside"),
        (assign, ":var_1", 1),
    (else_try),
        (eq, ":var_4", "itm_bread"),
        (str_store_string, s14, "str_i_work_in_a_mill_grinding_flour_to_make_bread_bread_is_cheap_keeps_well_and_fills_the_stomach"),
        (assign, ":var_1", 1),
    (else_try),
        (eq, ":var_4", "itm_dried_meat"),
        (str_store_string, s14, "str_i_tend_cattle_we_dry_and_salt_meat_to_preserve_it_and_make_cheese_from_the_milk"),
        (assign, ":var_1", 1),
    (else_try),
        (eq, ":var_4", "itm_cheese"),
        (str_store_string, s14, "str_i_tend_cattle_we_dry_and_salt_meat_to_preserve_it_and_make_cheese_from_the_milk_so_it_doesnt_spoil"),
        (assign, ":var_1", 1),
    (else_try),
        (eq, ":var_4", "itm_butter"),
        (str_store_string, s14, "str_i_tend_cattle_we_dry_and_salt_meat_to_preserve_it_and_make_cheese_from_the_milk_so_it_doesnt_spoil"),
        (assign, ":var_1", 1),
    (else_try),
        (eq, ":var_4", "itm_wool"),
        (str_store_string, s14, "str_i_tend_sheep_we_send_the_wool_to_the_cities_to_be_woven_into_cloth_and_make_mutton_sausage_when_we_cull_the_herds"),
        (assign, ":var_1", 1),
    (else_try),
        (eq, ":var_4", "itm_sausages"),
        (str_store_string, s14, "str_i_tend_sheep_we_send_the_wool_to_the_cities_to_be_woven_into_cloth_and_make_mutton_sausage_when_we_cull_the_herds"),
        (assign, ":var_1", 1),
    (else_try),
        (eq, ":var_4", "itm_wool_cloth"),
        (str_store_string, s14, "str_i_work_at_a_loom_spinning_cloth_from_wool_wool_is_some_of_the_cheapest_cloth_you_can_buy_but_it_will_still_keep_you_warm"),
        (assign, ":var_1", 1),
    (else_try),
        (eq, ":var_4", "itm_smoked_fish"),
        (str_store_string, s14, "str_i_crew_a_fishing_boat_we_salt_and_smoke_the_flesh_to_sell_it_far_inland"),
        (assign, ":var_1", 1),
    (else_try),
        (eq, ":var_4", "itm_salt"),
        (str_store_string, s14, "str_i_sift_salt_from_a_nearby_flat_they_need_salt_everywhere_to_preserve_meat_and_fish"),
        (assign, ":var_1", 1),
    (else_try),
        (eq, ":var_4", "itm_iron"),
        (str_store_string, s14, "str_i_mine_iron_from_a_vein_in_a_nearby_cliffside_they_use_it_to_make_tools_arms_and_other_goods"),
        (assign, ":var_1", 1),
    (else_try),
        (eq, ":var_4", "itm_pottery"),
        (str_store_string, s14, "str_i_make_pottery_which_people_use_to_store_grain_and_carry_water"),
        (assign, ":var_1", 1),
    (else_try),
        (eq, ":var_4", "itm_tools"),
        (str_store_string, s14, "str_trade_explanation_tools"),
        (assign, ":var_1", 1),
    (else_try),
        (eq, ":var_4", "itm_oil"),
        (str_store_string, s14, "str_trade_explanation_oil"),
        (assign, ":var_1", 1),
    (else_try),
        (eq, ":var_4", "itm_linen"),
        (str_store_string, s14, "str_trade_explanation_linen"),
        (assign, ":var_1", 1),
    (else_try),
        (eq, ":var_4", "itm_velvet"),
        (str_store_string, s14, "str_trade_explanation_velvet"),
        (assign, ":var_1", 1),
    (else_try),
        (eq, ":var_4", "itm_spice"),
        (str_store_string, s14, "str_trade_explanation_spice"),
        (assign, ":var_1", 1),
    (else_try),
        (eq, ":var_4", "itm_apples"),
        (str_store_string, s14, "str_trade_explanation_apples"),
        (assign, ":var_1", 1),
    (try_end),
    (try_begin),
        (eq, ":var_1", 1),
        (assign, ":var_8", -1),
        (store_skill_level, ":var_9", "skl_trade", "trp_player"),
        (try_begin),
            (is_between, "$g_encountered_party", "p_village_1_1", "p_salt_mine"),
            (party_get_slot, ":var_10", "$g_encountered_party", slot_village_market_town),
        (else_try),
            (assign, ":var_10", "$g_encountered_party"),
        (try_end),
        (store_sub, ":var_11", 250, "itm_spice"),
        (store_add, ":var_12", ":var_4", ":var_11"),
        (party_get_slot, ":var_13", ":var_10", ":var_12"),
        (val_add, ":var_13", 400),
        (store_mul, ":var_14", ":var_9", 35),
        (try_begin),
            (is_between, "$g_encountered_party", "p_village_1_1", "p_salt_mine"),
            (val_add, ":var_13", 200),
        (try_end),
        (val_sub, ":var_13", ":var_14"),
        (try_for_range, ":var_15", 190, 205),
            (party_get_slot, ":var_16", ":var_10", ":var_15"),
            (party_get_slot, ":var_17", ":var_16", ":var_12"),
            (try_begin),
                (eq, "$cheat_mode", 1),
                (assign, reg4, ":var_17"),
                (assign, reg5, ":var_13"),
                (str_store_party_name, s10, ":var_16"),
                (display_message, "str_s10_has_reg4_needs_reg5"),
            (try_end),
            (gt, ":var_17", ":var_13"),
            (assign, ":var_8", ":var_16"),
            (assign, ":var_13", ":var_17"),
        (try_end),
        (is_between, ":var_8", "p_town_1_1", "p_salt_mine"),
        (str_store_party_name, s15, ":var_8"),
        (str_store_string, s14, "str_s14_i_hear_that_you_can_find_a_good_price_for_it_in_s15"),
    (try_end),

]),

("tick_town_walkers",
[
    (try_for_agents, ":var_0"),
        (agent_get_troop_id, ":var_1", ":var_0"),
        (is_between, ":var_1", "trp_town_walker_1", "trp_tournament_master"),
        (agent_get_slot, ":var_2", ":var_0", slot_agent_target_entry_point),
        (entry_point_get_position, pos1, ":var_2"),
        (try_begin),
            (neg|ge, ":var_2", 32),
            (init_position, pos2),
            (position_set_y, pos2, 250),
            (position_transform_position_to_parent, pos1, pos1, pos2),
        (try_end),
        (agent_get_position, pos2, ":var_0"),
        (get_distance_between_positions, ":var_3", pos1, pos2),
        (neg|ge, ":var_3", 400),
        (assign, ":var_4", 0),
        (try_begin),
            (neg|ge, ":var_2", 32),
            (store_random_in_range, ":var_4", 0, 100),
        (try_end),
        (neg|ge, ":var_4", 20),
        (call_script, "script_set_town_walker_destination", ":var_0"),
    (try_end),

]),

("set_town_walker_destination",
[
    (store_script_param_1, ":var_0"),
    (store_random_in_range, ":var_1", 32, 40),
    (try_begin),
        (assign, ":var_2", ":var_1"),
    (try_end),
    (try_begin),
        (agent_set_slot, ":var_0", slot_agent_target_entry_point, ":var_2"),
        (entry_point_get_position, pos1, ":var_2"),
        (try_begin),
            (init_position, pos2),
            (position_set_y, pos2, 250),
            (position_transform_position_to_parent, pos1, pos1, pos2),
        (try_end),
        (agent_set_scripted_destination, ":var_0", pos1, 0),
        (agent_set_speed_limit, ":var_0", 5),
    (try_end),

]),

("town_init_doors",
[
    (store_script_param, ":var_0", 1),
    (try_begin),
        (assign, ":var_1", 0),
        (try_begin),
            (eq, ":var_0", 1),
            (assign, ":var_1", 1),
        (else_try),
            (eq, ":var_0", 0),
            (eq, "$town_nighttime", 0),
            (assign, ":var_1", 1),
        (try_end),
        (eq, ":var_1", 1),
        (assign, ":var_2", 1),
        (try_for_range, ":var_3", 0, ":var_2"),
            (scene_prop_get_instance, ":var_4", "spr_towngate_door_left", ":var_3"),
            (ge, ":var_4", 0),
            (val_add, ":var_2", 1),
            (prop_instance_get_position, pos1, ":var_4"),
            (position_rotate_z, pos1, -100),
            (prop_instance_animate_to_position, ":var_4", 1, 1),
        (try_end),
        (assign, ":var_2", 1),
        (try_for_range, ":var_3", 0, ":var_2"),
            (scene_prop_get_instance, ":var_4", "spr_towngate_rectangle_door_left", ":var_3"),
            (ge, ":var_4", 0),
            (val_add, ":var_2", 1),
            (prop_instance_get_position, pos1, ":var_4"),
            (position_rotate_z, pos1, -80),
            (prop_instance_animate_to_position, ":var_4", 1, 1),
        (try_end),
        (assign, ":var_2", 1),
        (try_for_range, ":var_3", 0, ":var_2"),
            (scene_prop_get_instance, ":var_4", "spr_towngate_door_right", ":var_3"),
            (ge, ":var_4", 0),
            (val_add, ":var_2", 1),
            (prop_instance_get_position, pos1, ":var_4"),
            (position_rotate_z, pos1, 100),
            (prop_instance_animate_to_position, ":var_4", 1, 1),
        (try_end),
        (assign, ":var_2", 1),
        (try_for_range, ":var_3", 0, ":var_2"),
            (scene_prop_get_instance, ":var_4", "spr_towngate_rectangle_door_right", ":var_3"),
            (ge, ":var_4", 0),
            (val_add, ":var_2", 1),
            (prop_instance_get_position, pos1, ":var_4"),
            (position_rotate_z, pos1, 80),
            (prop_instance_animate_to_position, ":var_4", 1, 1),
        (try_end),
    (try_end),

]),

("siege_init_ai_and_belfry",
[
    (assign, "$cur_belfry_pos", 50),
    (assign, ":var_0", 10),
    (store_current_scene, ":var_1"),
    (try_for_range, ":var_2", 0, 3),
        (scene_prop_get_instance, ":var_3", "spr_belfry_a", ":var_2"),
        (ge, ":var_3", 0),
        (scene_set_slot, ":var_1", ":var_0", ":var_3"),
        (val_add, ":var_0", 1),
    (try_end),
    (try_for_range, ":var_2", 0, 3),
        (scene_prop_get_instance, ":var_3", "spr_belfry_platform_a", ":var_2"),
        (ge, ":var_3", 0),
        (scene_set_slot, ":var_1", ":var_0", ":var_3"),
        (val_add, ":var_0", 1),
    (try_end),
    (try_for_range, ":var_2", 0, 3),
        (scene_prop_get_instance, ":var_3", "spr_belfry_platform_b", ":var_2"),
        (ge, ":var_3", 0),
        (scene_set_slot, ":var_1", ":var_0", ":var_3"),
        (val_add, ":var_0", 1),
    (try_end),
    (assign, "$belfry_rotating_objects_begin", ":var_0"),
    (try_for_range, ":var_2", 0, 5),
        (scene_prop_get_instance, ":var_3", "spr_belfry_wheel", ":var_2"),
        (ge, ":var_3", 0),
        (scene_set_slot, ":var_1", ":var_0", ":var_3"),
        (val_add, ":var_0", 1),
    (try_end),
    (assign, "$last_belfry_object_pos", ":var_0"),
    (try_begin),
        (scene_prop_get_instance, ":var_4", "spr_belfry_platform_a", 0),
    (try_end),
    (entry_point_get_position, pos1, 55),
    (entry_point_get_position, pos3, 50),
    (try_for_range, ":var_5", 10, "$last_belfry_object_pos"),
        (assign, ":var_6", 64),
        (val_add, ":var_6", ":var_5"),
        (val_sub, ":var_6", 10),
        (scene_get_slot, ":var_7", ":var_1", ":var_5"),
        (prop_instance_get_position, pos2, ":var_7"),
        (try_begin),
            (eq, ":var_7", ":var_4"),
            (position_rotate_x, pos2, 90),
        (try_end),
        (position_transform_position_to_local, ":var_6", pos1, pos2),
        (position_transform_position_to_parent, pos4, pos3, ":var_6"),
        (prop_instance_animate_to_position, ":var_7", 4, 1),
    (try_end),
    (assign, "$belfry_positioned", 0),
    (assign, "$belfry_num_slots_positioned", 0),
    (assign, "$belfry_num_men_pushing", 0),
    (set_show_messages, 0),
    (team_give_order, "$attacker_team", 9, 11),
    (team_give_order, "$attacker_team_2", 9, 11),
    (set_show_messages, 1),

]),

("cf_siege_move_belfry",
[
    (neg|eq, "$last_belfry_object_pos", 10),
    (entry_point_get_position, pos1, 50),
    (entry_point_get_position, pos4, 55),
    (get_distance_between_positions, ":var_0", pos4, pos1),
    (store_current_scene, ":var_1"),
    (scene_get_slot, ":var_2", ":var_1", 10),
    (prop_instance_get_position, pos2, ":var_2"),
    (entry_point_get_position, pos1, "$cur_belfry_pos"),
    (position_transform_position_to_parent, pos3, pos1, pos_belfry_begin),
    (position_transform_position_to_parent, pos5, pos4, pos_belfry_begin),
    (get_distance_between_positions, ":var_3", pos2, pos3),
    (get_distance_between_positions, ":var_4", pos2, pos5),
    (try_begin),
        (neg|gt, ":var_3", 10),
        (val_add, "$cur_belfry_pos", 1),
        (entry_point_get_position, pos1, "$cur_belfry_pos"),
        (position_transform_position_to_parent, pos3, pos1, pos_belfry_begin),
        (get_distance_between_positions, ":var_3", pos2, pos3),
    (try_end),
    (neg|eq, "$cur_belfry_pos", 50),
    (assign, ":var_5", 20),
    (store_div, ":var_6", ":var_0", 60),
    (store_sub, ":var_7", ":var_0", ":var_4"),
    (try_begin),
        (neg|ge, ":var_7", ":var_6"),
        (store_mul, ":var_5", ":var_7", -60),
        (val_div, ":var_5", ":var_6"),
        (val_add, ":var_5", 80),
    (else_try),
        (neg|ge, ":var_4", ":var_6"),
        (store_mul, ":var_5", ":var_4", -60),
        (val_div, ":var_5", ":var_6"),
        (val_add, ":var_5", 80),
    (try_end),
    (store_mul, ":var_8", ":var_3", ":var_5"),
    (try_begin),
        (eq, "$belfry_num_men_pushing", 0),
        (assign, ":var_8", 1000000),
    (else_try),
        (val_div, ":var_8", "$belfry_num_men_pushing"),
    (try_end),
    (try_begin),
        (neg|gt, "$cur_belfry_pos", 55),
        (init_position, pos3),
        (position_rotate_x, pos3, ":var_7"),
        (scene_get_slot, ":var_9", ":var_1", 10),
        (prop_instance_get_position, pos4, ":var_9"),
        (entry_point_get_position, pos1, "$cur_belfry_pos"),
        (try_for_range, ":var_10", 10, "$last_belfry_object_pos"),
            (scene_get_slot, ":var_11", ":var_1", ":var_10"),
            (try_begin),
                (ge, ":var_10", "$belfry_rotating_objects_begin"),
                (prop_instance_get_starting_position, pos5, ":var_9"),
                (prop_instance_get_starting_position, pos6, ":var_11"),
                (position_transform_position_to_local, pos7, pos5, pos6),
                (position_transform_position_to_parent, pos5, pos4, pos7),
                (position_transform_position_to_parent, pos6, pos5, pos3),
                (prop_instance_set_position, ":var_11", pos6),
            (else_try),
                (assign, ":var_12", 64),
                (val_add, ":var_12", ":var_10"),
                (val_sub, ":var_12", 10),
                (position_transform_position_to_parent, pos2, pos1, ":var_12"),
                (prop_instance_animate_to_position, ":var_11", 2, ":var_8"),
            (try_end),
        (try_end),
    (try_end),
    (gt, "$cur_belfry_pos", 55),
    (assign, "$belfry_positioned", 1),

]),

("cf_siege_rotate_belfry_platform",
[
    (eq, "$belfry_positioned", 1),
    (scene_prop_get_instance, ":var_0", "spr_belfry_platform_a", 0),
    (prop_instance_get_position, pos1, ":var_0"),
    (position_rotate_x, pos1, -90),
    (prop_instance_animate_to_position, ":var_0", 1, 400),
    (assign, "$belfry_positioned", 2),

]),

("cf_siege_assign_men_to_belfry",
[
    (neg|eq, "$last_belfry_object_pos", 10),
    (assign, ":var_0", 0),
    (try_begin),
        (neg|ge, "$belfry_positioned", 3),
        (get_player_agent_no, ":var_1"),
        (store_current_scene, ":var_2"),
        (scene_get_slot, ":var_3", ":var_2", 10),
        (prop_instance_get_position, pos2, ":var_3"),
        (assign, ":var_4", 0),
        (assign, ":var_5", 0),
        (assign, ":var_6", 0),
        (assign, ":var_7", 0),
        (assign, ":var_8", 0),
        (assign, ":var_9", 0),
        (assign, "$belfry_num_slots_positioned", 0),
        (assign, "$belfry_num_men_pushing", 0),
        (try_for_agents, ":var_10"),
            (agent_is_alive, ":var_10"),
            (agent_is_human, ":var_10"),
            (try_begin),
                (agent_get_slot, ":var_11", ":var_10", slot_agent_target_x_pos),
                (neg|eq, ":var_11", 0),
                (agent_get_slot, ":var_12", ":var_10", slot_agent_target_y_pos),
                (try_begin),
                    (eq, ":var_11", -600),
                    (try_begin),
                        (eq, ":var_12", 0),
                        (assign, ":var_4", 1),
                    (else_try),
                        (eq, ":var_12", -200),
                        (assign, ":var_5", 1),
                    (else_try),
                        (assign, ":var_6", 1),
                    (try_end),
                (else_try),
                    (try_begin),
                        (eq, ":var_12", 0),
                        (assign, ":var_7", 1),
                    (else_try),
                        (eq, ":var_12", -200),
                        (assign, ":var_8", 1),
                    (else_try),
                        (assign, ":var_9", 1),
                    (try_end),
                (try_end),
                (val_add, "$belfry_num_slots_positioned", 1),
                (init_position, pos1),
                (position_move_x, pos1, ":var_11"),
                (position_move_y, pos1, ":var_12"),
                (init_position, pos3),
                (position_move_x, pos3, ":var_11"),
                (position_move_y, pos3, -1000),
                (position_transform_position_to_parent, pos4, pos2, pos1),
                (position_transform_position_to_parent, pos5, pos2, pos3),
                (agent_get_position, pos6, ":var_10"),
                (get_distance_between_positions, ":var_13", pos6, pos4),
                (get_distance_between_positions, ":var_14", pos6, pos5),
                (try_begin),
                    (this_or_next|neg|ge, ":var_13", ":var_14"),
                    (neg|ge, ":var_14", 600),
                    (agent_set_scripted_destination, ":var_10", pos4, 1),
                (else_try),
                    (agent_set_scripted_destination, ":var_10", pos5, 1),
                (try_end),
                (try_begin),
                    (neg|gt, ":var_13", 300),
                    (val_add, "$belfry_num_men_pushing", 1),
                (try_end),
            (try_end),
        (try_end),
        (try_begin),
            (neg|ge, "$belfry_num_slots_positioned", 6),
            (try_for_agents, ":var_10"),
                (agent_is_alive, ":var_10"),
                (agent_get_team, ":var_15", ":var_10"),
                (this_or_next|eq, "$attacker_team", ":var_15"),
                (eq, "$attacker_team_2", ":var_15"),
                (neg|eq, ":var_1", ":var_10"),
                (agent_get_class, ":var_16", ":var_10"),
                (this_or_next|eq, ":var_16", 0),
                (eq, ":var_16", 2),
                (agent_get_slot, ":var_11", ":var_10", slot_agent_target_x_pos),
                (eq, ":var_11", 0),
                (assign, ":var_12", 0),
                (try_begin),
                    (eq, ":var_4", 0),
                    (assign, ":var_11", -600),
                    (assign, ":var_12", 0),
                    (val_add, ":var_4", 1),
                (else_try),
                    (eq, ":var_5", 0),
                    (assign, ":var_11", -600),
                    (assign, ":var_12", -200),
                    (val_add, ":var_5", 1),
                (else_try),
                    (eq, ":var_6", 0),
                    (assign, ":var_11", -600),
                    (assign, ":var_12", -400),
                    (val_add, ":var_6", 1),
                (else_try),
                    (eq, ":var_7", 0),
                    (assign, ":var_11", 600),
                    (assign, ":var_12", 0),
                    (val_add, ":var_7", 1),
                (else_try),
                    (eq, ":var_8", 0),
                    (assign, ":var_11", 600),
                    (assign, ":var_12", -200),
                    (val_add, ":var_8", 1),
                (else_try),
                    (eq, ":var_9", 0),
                    (assign, ":var_11", 600),
                    (assign, ":var_12", -400),
                    (val_add, ":var_9", 1),
                (try_end),
                (val_add, "$belfry_num_slots_positioned", 1),
                (agent_set_slot, ":var_10", slot_agent_target_x_pos, ":var_11"),
                (agent_set_slot, ":var_10", slot_agent_target_y_pos, ":var_12"),
            (try_end),
        (try_end),
        (try_begin),
            (store_mission_timer_a, ":var_17"),
            (gt, ":var_17", 20),
            (neg|ge, "$belfry_num_slots_positioned", 6),
            (try_for_agents, ":var_10"),
                (agent_is_alive, ":var_10"),
                (agent_get_team, ":var_15", ":var_10"),
                (this_or_next|eq, "$attacker_team", ":var_15"),
                (eq, "$attacker_team_2", ":var_15"),
                (neg|eq, ":var_1", ":var_10"),
                (agent_get_slot, ":var_11", ":var_10", slot_agent_target_x_pos),
                (eq, ":var_11", 0),
                (assign, ":var_12", 0),
                (try_begin),
                    (eq, ":var_4", 0),
                    (assign, ":var_11", -600),
                    (assign, ":var_12", 0),
                    (val_add, ":var_4", 1),
                (else_try),
                    (eq, ":var_5", 0),
                    (assign, ":var_11", -600),
                    (assign, ":var_12", -200),
                    (val_add, ":var_5", 1),
                (else_try),
                    (eq, ":var_6", 0),
                    (assign, ":var_11", -600),
                    (assign, ":var_12", -400),
                    (val_add, ":var_6", 1),
                (else_try),
                    (eq, ":var_7", 0),
                    (assign, ":var_11", 600),
                    (assign, ":var_12", 0),
                    (val_add, ":var_7", 1),
                (else_try),
                    (eq, ":var_8", 0),
                    (assign, ":var_11", 600),
                    (assign, ":var_12", -200),
                    (val_add, ":var_8", 1),
                (else_try),
                    (eq, ":var_9", 0),
                    (assign, ":var_11", 600),
                    (assign, ":var_12", -400),
                    (val_add, ":var_9", 1),
                (try_end),
                (val_add, "$belfry_num_slots_positioned", 1),
                (agent_set_slot, ":var_10", slot_agent_target_x_pos, ":var_11"),
                (agent_set_slot, ":var_10", slot_agent_target_y_pos, ":var_12"),
            (try_end),
        (try_end),
    (else_try),
        (assign, ":var_0", 1),
        (try_for_agents, ":var_10"),
            (agent_clear_scripted_mode, ":var_10"),
        (try_end),
        (set_show_messages, 0),
        (team_give_order, "$attacker_team", 9, 2),
        (set_show_messages, 1),
    (try_end),
    (eq, ":var_0", 1),

]),

("siege_move_archers_to_archer_positions",
[
    (try_for_agents, ":var_0"),
        (agent_is_alive, ":var_0"),
        (agent_slot_eq, ":var_0", slot_agent_is_not_reinforcement, 0),
        (agent_is_defender, ":var_0"),
        (agent_get_division, ":var_1", ":var_0"),
        (agent_get_troop_id, ":var_2", ":var_0"),
        (eq, ":var_1", 1),
        (str_store_troop_name, s1, ":var_2"),
        (try_begin),
            (agent_slot_eq, ":var_0", slot_agent_target_entry_point, 0),
            (store_random_in_range, ":var_3", 40, 47),
            (assign, reg20, ":var_3"),
            (agent_set_slot, ":var_0", slot_agent_target_entry_point, ":var_3"),
        (try_end),
        (try_begin),
            (agent_get_position, pos0, ":var_0"),
            (agent_get_slot, ":var_3", ":var_0", slot_agent_target_entry_point),
            (entry_point_get_position, pos1, ":var_3"),
            (get_distance_between_positions, ":var_4", pos0, pos1),
            (neg|ge, ":var_4", 50),
            (agent_clear_scripted_mode, ":var_0"),
            (agent_set_slot, ":var_0", slot_agent_is_in_scripted_mode, 0),
            (agent_set_slot, ":var_0", slot_agent_is_not_reinforcement, 1),
            (str_store_troop_name, s1, ":var_2"),
            (assign, reg0, ":var_0"),
            (display_message, "@{s1} ({reg0}) reached pos"),
        (else_try),
            (agent_get_simple_behavior, ":var_5", ":var_0"),
            (agent_get_combat_state, ":var_6", ":var_0"),
            (assign, reg21, ":var_6"),
            (this_or_next|eq, ":var_5", 5),
            (eq, ":var_5", 1),
            (this_or_next|eq, ":var_6", 0),
            (eq, ":var_6", 7),
            (try_begin),
                (agent_slot_eq, ":var_0", slot_agent_is_in_scripted_mode, 0),
                (agent_set_scripted_destination, ":var_0", pos1, 0),
                (agent_set_slot, ":var_0", slot_agent_is_in_scripted_mode, 1),
            (try_end),
        (else_try),
            (try_begin),
            (try_end),
        (try_end),
    (try_end),

]),

("siege_move_archers_to_archer_positions_new",
[
    (try_for_agents, ":var_0"),
        (agent_is_alive, ":var_0"),
        (agent_slot_eq, ":var_0", slot_agent_is_not_reinforcement, 0),
        (agent_is_defender, ":var_0"),
        (agent_get_class, ":var_1", ":var_0"),
        (agent_get_troop_id, ":var_2", ":var_0"),
        (eq, ":var_1", 1),
        (try_begin),
            (agent_slot_eq, ":var_0", slot_agent_target_entry_point, 0),
            (store_random_in_range, ":var_3", 40, 54),
            (agent_set_slot, ":var_0", slot_agent_target_entry_point, ":var_3"),
        (try_end),
        (try_begin),
            (agent_get_position, pos0, ":var_0"),
            (entry_point_get_position, pos1, ":var_3"),
            (get_distance_between_positions, ":var_4", pos0, pos1),
            (neg|ge, ":var_4", 300),
            (agent_clear_scripted_mode, ":var_0"),
            (agent_set_slot, ":var_0", slot_agent_is_in_scripted_mode, 0),
            (agent_set_slot, ":var_0", slot_agent_is_not_reinforcement, 1),
            (str_store_troop_name, s1, ":var_2"),
            (assign, reg0, ":var_0"),
        (else_try),
            (agent_get_simple_behavior, ":var_5", ":var_0"),
            (agent_get_combat_state, ":var_6", ":var_0"),
            (this_or_next|eq, ":var_5", 5),
            (eq, ":var_5", 1),
            (eq, ":var_6", 7),
            (try_begin),
                (agent_slot_eq, ":var_0", slot_agent_is_in_scripted_mode, 0),
                (agent_set_scripted_destination, ":var_0", pos1, 0),
                (agent_set_slot, ":var_0", slot_agent_is_in_scripted_mode, 1),
                (str_store_troop_name, s1, ":var_2"),
                (assign, reg0, ":var_0"),
            (try_end),
        (else_try),
            (try_begin),
                (agent_slot_eq, ":var_0", slot_agent_is_in_scripted_mode, 1),
                (agent_clear_scripted_mode, ":var_0"),
                (agent_set_slot, ":var_0", slot_agent_is_in_scripted_mode, 0),
                (str_store_troop_name, s1, ":var_2"),
                (assign, reg0, ":var_0"),
            (try_end),
        (try_end),
    (try_end),

]),

("siege_move_infantry_to_infantry_positions_new",
[
    (try_for_agents, ":var_0"),
        (agent_is_alive, ":var_0"),
        (agent_slot_eq, ":var_0", slot_agent_is_not_reinforcement, 0),
        (agent_get_team, ":var_1", ":var_0"),
        (this_or_next|eq, ":var_1", "$defender_team"),
        (eq, ":var_1", "$defender_team_2"),
        (agent_get_troop_id, ":var_2", ":var_0"),
        (try_begin),
            (agent_slot_eq, ":var_0", slot_agent_target_entry_point, 0),
            (store_random_in_range, ":var_3", 1, 4),
            (val_mul, ":var_3", 10),
            (agent_set_slot, ":var_0", slot_agent_target_entry_point, ":var_3"),
        (try_end),
        (try_begin),
            (agent_get_position, pos0, ":var_0"),
            (entry_point_get_position, pos1, ":var_3"),
            (get_distance_between_positions, ":var_4", pos0, pos1),
            (neg|ge, ":var_4", 200),
            (agent_clear_scripted_mode, ":var_0"),
            (agent_set_slot, ":var_0", slot_agent_is_in_scripted_mode, 0),
            (agent_set_slot, ":var_0", slot_agent_is_not_reinforcement, 1),
            (str_store_troop_name, s1, ":var_2"),
            (assign, reg0, ":var_0"),
        (else_try),
            (try_begin),
                (agent_slot_eq, ":var_0", slot_agent_is_in_scripted_mode, 1),
                (agent_clear_scripted_mode, ":var_0"),
                (agent_set_slot, ":var_0", slot_agent_is_in_scripted_mode, 0),
                (str_store_troop_name, s1, ":var_2"),
                (assign, reg0, ":var_0"),
            (try_end),
        (try_end),
    (try_end),

]),

("store_movement_order_name_to_s1",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (team_get_movement_order, ":var_2", ":var_0", ":var_1"),
    (try_begin),
        (eq, ":var_2", 0),
        (str_store_string, s1, "@Holding"),
    (else_try),
        (eq, ":var_2", 1),
        (str_store_string, s1, "@Following"),
    (else_try),
        (eq, ":var_2", 2),
        (str_store_string, s1, "@Charging"),
    (else_try),
        (eq, ":var_2", 5),
        (str_store_string, s1, "@Advancing"),
    (else_try),
        (eq, ":var_2", 6),
        (str_store_string, s1, "@Falling Back"),
    (else_try),
        (eq, ":var_2", 7),
        (str_store_string, s1, "@Standing Closer"),
    (else_try),
        (eq, ":var_2", 8),
        (str_store_string, s1, "@Spreading Out"),
    (else_try),
        (eq, ":var_2", 11),
        (str_store_string, s1, "@Standing"),
    (else_try),
        (str_store_string, s1, "@N/A"),
    (try_end),

]),

("store_riding_order_name_to_s1",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (team_get_riding_order, ":var_2", ":var_0", ":var_1"),
    (try_begin),
        (eq, ":var_2", 0),
        (str_store_string, s1, "@Free"),
    (else_try),
        (eq, ":var_2", 1),
        (str_store_string, s1, "@Mount"),
    (else_try),
        (eq, ":var_2", 2),
        (str_store_string, s1, "@Dismount"),
    (else_try),
        (str_store_string, s1, "@N/A"),
    (try_end),

]),

("store_weapon_usage_order_name_to_s1",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (team_get_weapon_usage_order, ":var_2", ":var_0", ":var_1"),
    (team_get_hold_fire_order, ":var_3", ":var_0", ":var_1"),
    (try_begin),
        (eq, ":var_2", 0),
        (eq, ":var_3", 0),
        (str_store_string, s1, "@Any Weapon"),
    (else_try),
        (eq, ":var_2", 1),
        (eq, ":var_3", 0),
        (str_store_string, s1, "@Blunt Weapons"),
    (else_try),
        (eq, ":var_2", 0),
        (eq, ":var_3", 1),
        (str_store_string, s1, "str_hold_fire"),
    (else_try),
        (eq, ":var_2", 1),
        (eq, ":var_3", 1),
        (str_store_string, s1, "str_blunt_hold_fire"),
    (else_try),
        (str_store_string, s1, "@N/A"),
    (try_end),

]),

("team_give_order_from_order_panel",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (agent_get_team, ":var_2", ":var_0"),
    (set_show_messages, 0),
    (try_begin),
        (eq, "$g_formation_group0_selected", 1),
        (team_give_order, ":var_2", 0, ":var_1"),
    (try_end),
    (try_begin),
        (eq, "$g_formation_group1_selected", 1),
        (team_give_order, ":var_2", 1, ":var_1"),
    (try_end),
    (try_begin),
        (eq, "$g_formation_group2_selected", 1),
        (team_give_order, ":var_2", 2, ":var_1"),
    (try_end),
    (try_begin),
        (eq, "$g_formation_group3_selected", 1),
        (team_give_order, ":var_2", 3, ":var_1"),
    (try_end),
    (try_begin),
        (eq, "$g_formation_group4_selected", 1),
        (team_give_order, ":var_2", 4, ":var_1"),
    (try_end),
    (try_begin),
        (eq, "$g_formation_group5_selected", 1),
        (team_give_order, ":var_2", 5, ":var_1"),
    (try_end),
    (try_begin),
        (eq, "$g_formation_group6_selected", 1),
        (team_give_order, ":var_2", 6, ":var_1"),
    (try_end),
    (try_begin),
        (eq, "$g_formation_group7_selected", 1),
        (team_give_order, ":var_2", 7, ":var_1"),
    (try_end),
    (try_begin),
        (eq, "$g_formation_group8_selected", 1),
        (team_give_order, ":var_2", 8, ":var_1"),
    (try_end),
    (try_begin),
        (eq, ":var_1", 0),
        (agent_get_position, pos1, ":var_0"),
        (try_begin),
            (eq, "$g_formation_group0_selected", 1),
            (team_set_order_position, ":var_2", 0, pos1),
        (try_end),
        (try_begin),
            (eq, "$g_formation_group1_selected", 1),
            (team_set_order_position, ":var_2", 1, pos1),
        (try_end),
        (try_begin),
            (eq, "$g_formation_group2_selected", 1),
            (team_set_order_position, ":var_2", 2, pos1),
        (try_end),
        (try_begin),
            (eq, "$g_formation_group3_selected", 1),
            (team_set_order_position, ":var_2", 3, pos1),
        (try_end),
        (try_begin),
            (eq, "$g_formation_group4_selected", 1),
            (team_set_order_position, ":var_2", 4, pos1),
        (try_end),
        (try_begin),
            (eq, "$g_formation_group5_selected", 1),
            (team_set_order_position, ":var_2", 5, pos1),
        (try_end),
        (try_begin),
            (eq, "$g_formation_group6_selected", 1),
            (team_set_order_position, ":var_2", 6, pos1),
        (try_end),
        (try_begin),
            (eq, "$g_formation_group7_selected", 1),
            (team_set_order_position, ":var_2", 7, pos1),
        (try_end),
        (try_begin),
            (eq, "$g_formation_group8_selected", 1),
            (team_set_order_position, ":var_2", 8, pos1),
        (try_end),
    (try_end),
    (set_show_messages, 1),

]),

("update_order_panel",
[
    (store_script_param_1, ":var_0"),
    (set_fixed_point_multiplier, 1000),
    (try_begin),
        (eq, "$group0_has_troops", 1),
        (call_script, "script_store_movement_order_name_to_s1", ":var_0", 0),
        (overlay_set_text, "$g_presentation_but0_movement", 1),
        (call_script, "script_store_riding_order_name_to_s1", ":var_0", 0),
        (overlay_set_text, "$g_presentation_but0_riding", 1),
        (call_script, "script_store_weapon_usage_order_name_to_s1", ":var_0", 0),
        (overlay_set_text, "$g_presentation_but0_weapon_usage", 1),
    (try_end),
    (try_begin),
        (eq, "$group1_has_troops", 1),
        (call_script, "script_store_movement_order_name_to_s1", ":var_0", 1),
        (overlay_set_text, "$g_presentation_but1_movement", 1),
        (call_script, "script_store_riding_order_name_to_s1", ":var_0", 1),
        (overlay_set_text, "$g_presentation_but1_riding", 1),
        (call_script, "script_store_weapon_usage_order_name_to_s1", ":var_0", 1),
        (overlay_set_text, "$g_presentation_but1_weapon_usage", 1),
    (try_end),
    (try_begin),
        (eq, "$group2_has_troops", 1),
        (call_script, "script_store_movement_order_name_to_s1", ":var_0", 2),
        (overlay_set_text, "$g_presentation_but2_movement", 1),
        (call_script, "script_store_riding_order_name_to_s1", ":var_0", 2),
        (overlay_set_text, "$g_presentation_but2_riding", 1),
        (call_script, "script_store_weapon_usage_order_name_to_s1", ":var_0", 2),
        (overlay_set_text, "$g_presentation_but2_weapon_usage", 1),
    (try_end),
    (try_begin),
        (eq, "$group3_has_troops", 1),
        (call_script, "script_store_movement_order_name_to_s1", ":var_0", 3),
        (overlay_set_text, "$g_presentation_but3_movement", 1),
        (call_script, "script_store_riding_order_name_to_s1", ":var_0", 3),
        (overlay_set_text, "$g_presentation_but3_riding", 1),
        (call_script, "script_store_weapon_usage_order_name_to_s1", ":var_0", 3),
        (overlay_set_text, "$g_presentation_but3_weapon_usage", 1),
    (try_end),
    (try_begin),
        (eq, "$group4_has_troops", 1),
        (call_script, "script_store_movement_order_name_to_s1", ":var_0", 4),
        (overlay_set_text, "$g_presentation_but4_movement", 1),
        (call_script, "script_store_riding_order_name_to_s1", ":var_0", 4),
        (overlay_set_text, "$g_presentation_but4_riding", 1),
        (call_script, "script_store_weapon_usage_order_name_to_s1", ":var_0", 4),
        (overlay_set_text, "$g_presentation_but4_weapon_usage", 1),
    (try_end),
    (try_begin),
        (eq, "$group5_has_troops", 1),
        (call_script, "script_store_movement_order_name_to_s1", ":var_0", 5),
        (overlay_set_text, "$g_presentation_but5_movement", 1),
        (call_script, "script_store_riding_order_name_to_s1", ":var_0", 5),
        (overlay_set_text, "$g_presentation_but5_riding", 1),
        (call_script, "script_store_weapon_usage_order_name_to_s1", ":var_0", 5),
        (overlay_set_text, "$g_presentation_but5_weapon_usage", 1),
    (try_end),
    (try_begin),
        (eq, "$group6_has_troops", 1),
        (call_script, "script_store_movement_order_name_to_s1", ":var_0", 6),
        (overlay_set_text, "$g_presentation_but6_movement", 1),
        (call_script, "script_store_riding_order_name_to_s1", ":var_0", 6),
        (overlay_set_text, "$g_presentation_but6_riding", 1),
        (call_script, "script_store_weapon_usage_order_name_to_s1", ":var_0", 6),
        (overlay_set_text, "$g_presentation_but6_weapon_usage", 1),
    (try_end),
    (try_begin),
        (eq, "$group7_has_troops", 1),
        (call_script, "script_store_movement_order_name_to_s1", ":var_0", 7),
        (overlay_set_text, "$g_presentation_but7_movement", 1),
        (call_script, "script_store_riding_order_name_to_s1", ":var_0", 7),
        (overlay_set_text, "$g_presentation_but7_riding", 1),
        (call_script, "script_store_weapon_usage_order_name_to_s1", ":var_0", 7),
        (overlay_set_text, "$g_presentation_but7_weapon_usage", 1),
    (try_end),
    (try_begin),
        (eq, "$group8_has_troops", 1),
        (call_script, "script_store_movement_order_name_to_s1", ":var_0", 8),
        (overlay_set_text, "$g_presentation_but8_movement", 1),
        (call_script, "script_store_riding_order_name_to_s1", ":var_0", 8),
        (overlay_set_text, "$g_presentation_but8_riding", 1),
        (call_script, "script_store_weapon_usage_order_name_to_s1", ":var_0", 8),
        (overlay_set_text, "$g_presentation_but8_weapon_usage", 1),
    (try_end),
    (assign, ":var_1", 660),
    (try_begin),
        (position_set_y, pos1, ":var_1"),
        (eq, "$group0_has_troops", 1),
        (position_set_x, pos1, 270),
        (overlay_set_position, "$g_presentation_but0_movement", pos1),
        (position_set_x, pos1, 410),
        (overlay_set_position, "$g_presentation_but0_riding", pos1),
        (position_set_x, pos1, 550),
        (overlay_set_position, "$g_presentation_but0_weapon_usage", pos1),
        (val_add, ":var_1", -40),
    (try_end),
    (try_begin),
        (position_set_y, pos1, ":var_1"),
        (eq, "$group1_has_troops", 1),
        (position_set_x, pos1, 270),
        (overlay_set_position, "$g_presentation_but1_movement", pos1),
        (position_set_x, pos1, 410),
        (overlay_set_position, "$g_presentation_but1_riding", pos1),
        (position_set_x, pos1, 550),
        (overlay_set_position, "$g_presentation_but1_weapon_usage", pos1),
        (val_add, ":var_1", -40),
    (try_end),
    (try_begin),
        (position_set_y, pos1, ":var_1"),
        (eq, "$group2_has_troops", 1),
        (position_set_x, pos1, 270),
        (overlay_set_position, "$g_presentation_but2_movement", pos1),
        (position_set_x, pos1, 410),
        (overlay_set_position, "$g_presentation_but2_riding", pos1),
        (position_set_x, pos1, 550),
        (overlay_set_position, "$g_presentation_but2_weapon_usage", pos1),
        (val_add, ":var_1", -40),
    (try_end),
    (try_begin),
        (position_set_y, pos1, ":var_1"),
        (eq, "$group3_has_troops", 1),
        (position_set_x, pos1, 270),
        (overlay_set_position, "$g_presentation_but3_movement", pos1),
        (position_set_x, pos1, 410),
        (overlay_set_position, "$g_presentation_but3_riding", pos1),
        (position_set_x, pos1, 550),
        (overlay_set_position, "$g_presentation_but3_weapon_usage", pos1),
        (val_add, ":var_1", -40),
    (try_end),
    (try_begin),
        (position_set_y, pos1, ":var_1"),
        (eq, "$group4_has_troops", 1),
        (position_set_x, pos1, 270),
        (overlay_set_position, "$g_presentation_but4_movement", pos1),
        (position_set_x, pos1, 410),
        (overlay_set_position, "$g_presentation_but4_riding", pos1),
        (position_set_x, pos1, 550),
        (overlay_set_position, "$g_presentation_but4_weapon_usage", pos1),
        (val_add, ":var_1", -40),
    (try_end),
    (try_begin),
        (position_set_y, pos1, ":var_1"),
        (eq, "$group5_has_troops", 1),
        (position_set_x, pos1, 270),
        (overlay_set_position, "$g_presentation_but5_movement", pos1),
        (position_set_x, pos1, 410),
        (overlay_set_position, "$g_presentation_but5_riding", pos1),
        (position_set_x, pos1, 550),
        (overlay_set_position, "$g_presentation_but5_weapon_usage", pos1),
        (val_add, ":var_1", -40),
    (try_end),
    (try_begin),
        (position_set_y, pos1, ":var_1"),
        (eq, "$group6_has_troops", 1),
        (position_set_x, pos1, 270),
        (overlay_set_position, "$g_presentation_but6_movement", pos1),
        (position_set_x, pos1, 410),
        (overlay_set_position, "$g_presentation_but6_riding", pos1),
        (position_set_x, pos1, 550),
        (overlay_set_position, "$g_presentation_but6_weapon_usage", pos1),
        (val_add, ":var_1", -40),
    (try_end),
    (try_begin),
        (position_set_y, pos1, ":var_1"),
        (eq, "$group7_has_troops", 1),
        (position_set_x, pos1, 270),
        (overlay_set_position, "$g_presentation_but7_movement", pos1),
        (position_set_x, pos1, 410),
        (overlay_set_position, "$g_presentation_but7_riding", pos1),
        (position_set_x, pos1, 550),
        (overlay_set_position, "$g_presentation_but7_weapon_usage", pos1),
        (val_add, ":var_1", -40),
    (try_end),
    (try_begin),
        (position_set_y, pos1, ":var_1"),
        (eq, "$group8_has_troops", 1),
        (position_set_x, pos1, 270),
        (overlay_set_position, "$g_presentation_but8_movement", pos1),
        (position_set_x, pos1, 410),
        (overlay_set_position, "$g_presentation_but8_riding", pos1),
        (position_set_x, pos1, 550),
        (overlay_set_position, "$g_presentation_but8_weapon_usage", pos1),
        (val_add, ":var_1", -40),
    (try_end),

]),

("update_agent_position_on_map",
[
    (store_script_param_1, ":var_0"),
    (agent_get_slot, ":var_1", ":var_0", slot_agent_map_overlay_id),
    (get_player_agent_no, ":var_2"),
    (try_begin),
        (neg|gt, ":var_1", 0),
        (set_fixed_point_multiplier, 1000),
        (try_begin),
            (eq, ":var_0", ":var_2"),
            (create_mesh_overlay, reg1, "mesh_player_dot"),
            (position_set_x, pos1, 500),
            (position_set_y, pos1, 500),
            (overlay_set_size, reg1, pos1),
        (else_try),
            (create_mesh_overlay, reg1, "mesh_white_dot"),
            (position_set_x, pos1, 200),
            (position_set_y, pos1, 200),
            (overlay_set_size, reg1, pos1),
        (try_end),
        (overlay_set_alpha, reg1, 136),
        (agent_set_slot, ":var_0", slot_agent_map_overlay_id, reg1),
        (assign, ":var_1", reg1),
    (try_end),
    (try_begin),
        (neg|eq, ":var_0", ":var_2"),
        (agent_get_party_id, ":var_3", ":var_0"),
        (try_begin),
            (eq, ":var_3", "p_main_party"),
            (agent_get_division, ":var_4", ":var_0"),
            (try_begin),
                (eq, ":var_4", 0),
                (overlay_set_color, ":var_1", 9261600),
            (else_try),
                (eq, ":var_4", 1),
                (overlay_set_color, ":var_1", 3458788),
            (else_try),
                (eq, ":var_4", 2),
                (overlay_set_color, ":var_1", 5674521),
            (else_try),
                (eq, ":var_4", 3),
                (overlay_set_color, ":var_1", 16770304),
            (else_try),
                (eq, ":var_4", 4),
                (overlay_set_color, ":var_1", 10027161),
            (else_try),
                (eq, ":var_4", 5),
                (overlay_set_color, ":var_1", 10092160),
            (else_try),
                (eq, ":var_4", 6),
                (overlay_set_color, ":var_1", 10350590),
            (else_try),
                (eq, ":var_4", 7),
                (overlay_set_color, ":var_1", 16698269),
            (else_try),
                (eq, ":var_4", 8),
                (overlay_set_color, ":var_1", 11639964),
            (try_end),
        (else_try),
            (agent_is_ally, ":var_0"),
            (overlay_set_color, ":var_1", 5592575),
        (else_try),
            (overlay_set_color, ":var_1", 16711680),
        (try_end),
    (try_end),
    (try_begin),
        (eq, ":var_0", ":var_2"),
        (agent_get_look_position, pos1, ":var_0"),
        (position_get_rotation_around_z, ":var_5", pos1),
        (init_position, pos10),
        (position_rotate_z, pos10, ":var_5"),
        (overlay_set_mesh_rotation, ":var_1", pos10),
        (call_script, "script_convert_3d_pos_to_map_pos"),
    (else_try),
        (agent_get_position, pos1, ":var_0"),
        (call_script, "script_convert_3d_pos_to_map_pos"),
    (try_end),
    (overlay_set_position, ":var_1", pos0),

]),

("convert_3d_pos_to_map_pos",
[
    (set_fixed_point_multiplier, 1000),
    (position_transform_position_to_local, pos3, pos2, pos1),
    (position_get_x, ":var_0", pos3),
    (position_get_y, ":var_1", pos3),
    (val_div, ":var_0", "$g_battle_map_scale"),
    (val_div, ":var_1", "$g_battle_map_scale"),
    (set_fixed_point_multiplier, 1000),
    (store_sub, ":var_2", 980, "$g_battle_map_width"),
    (store_sub, ":var_3", 730, "$g_battle_map_height"),
    (val_add, ":var_0", ":var_2"),
    (val_add, ":var_1", ":var_3"),
    (position_set_x, pos0, ":var_0"),
    (position_set_y, pos0, ":var_1"),

]),

("update_order_flags_on_map",
[
    (set_fixed_point_multiplier, 1000),
    (get_player_agent_no, ":var_0"),
    (agent_get_team, ":var_1", ":var_0"),
    (get_scene_boundaries, pos2, pos3),
    (team_get_movement_order, ":var_2", ":var_1", 0),
    (try_begin),
        (eq, ":var_2", 0),
        (team_get_order_position, pos1, ":var_1", 0),
        (call_script, "script_convert_3d_pos_to_map_pos"),
        (overlay_set_alpha, "$g_battle_map_infantry_order_flag", 255),
        (overlay_set_position, "$g_battle_map_infantry_order_flag", pos0),
    (else_try),
        (overlay_set_alpha, "$g_battle_map_infantry_order_flag", 0),
    (try_end),
    (team_get_movement_order, ":var_2", ":var_1", 1),
    (try_begin),
        (eq, ":var_2", 0),
        (team_get_order_position, pos1, ":var_1", 1),
        (call_script, "script_convert_3d_pos_to_map_pos"),
        (overlay_set_alpha, "$g_battle_map_archers_order_flag", 255),
        (overlay_set_position, "$g_battle_map_archers_order_flag", pos0),
    (else_try),
        (overlay_set_alpha, "$g_battle_map_archers_order_flag", 0),
    (try_end),
    (team_get_movement_order, ":var_2", ":var_1", 2),
    (try_begin),
        (eq, ":var_2", 0),
        (team_get_order_position, pos1, ":var_1", 2),
        (call_script, "script_convert_3d_pos_to_map_pos"),
        (overlay_set_alpha, "$g_battle_map_cavalry_order_flag", 255),
        (overlay_set_position, "$g_battle_map_cavalry_order_flag", pos0),
    (else_try),
        (overlay_set_alpha, "$g_battle_map_cavalry_order_flag", 0),
    (try_end),

]),

("update_order_panel_checked_classes",
[
    (get_player_agent_no, ":var_0"),
    (agent_get_team, ":var_1", ":var_0"),
    (try_begin),
        (eq, "$group0_has_troops", 1),
        (class_is_listening_order, ":var_1", 0),
        (overlay_set_val, "$g_presentation_obj_battle_check0", 1),
        (assign, "$g_formation_group0_selected", 1),
        (overlay_animate_to_alpha, "$g_presentation_obj_battle_but0", 250, 68),
    (else_try),
        (eq, "$group0_has_troops", 1),
        (overlay_set_val, "$g_presentation_obj_battle_check0", 0),
        (assign, "$g_formation_group0_selected", 0),
        (overlay_animate_to_alpha, "$g_presentation_obj_battle_but0", 250, 0),
    (try_end),
    (try_begin),
        (eq, "$group1_has_troops", 1),
        (class_is_listening_order, ":var_1", 1),
        (overlay_set_val, "$g_presentation_obj_battle_check1", 1),
        (assign, "$g_formation_group1_selected", 1),
        (overlay_animate_to_alpha, "$g_presentation_obj_battle_but1", 250, 68),
    (else_try),
        (eq, "$group1_has_troops", 1),
        (overlay_set_val, "$g_presentation_obj_battle_check1", 0),
        (assign, "$g_formation_group1_selected", 0),
        (overlay_animate_to_alpha, "$g_presentation_obj_battle_but1", 250, 0),
    (try_end),
    (try_begin),
        (eq, "$group2_has_troops", 1),
        (class_is_listening_order, ":var_1", 2),
        (overlay_set_val, "$g_presentation_obj_battle_check2", 1),
        (assign, "$g_formation_group2_selected", 1),
        (overlay_animate_to_alpha, "$g_presentation_obj_battle_but2", 250, 68),
    (else_try),
        (eq, "$group2_has_troops", 1),
        (overlay_set_val, "$g_presentation_obj_battle_check2", 0),
        (assign, "$g_formation_group2_selected", 0),
        (overlay_animate_to_alpha, "$g_presentation_obj_battle_but2", 250, 0),
    (try_end),
    (try_begin),
        (eq, "$group3_has_troops", 1),
        (class_is_listening_order, ":var_1", 3),
        (overlay_set_val, "$g_presentation_obj_battle_check3", 1),
        (assign, "$g_formation_group3_selected", 1),
        (overlay_animate_to_alpha, "$g_presentation_obj_battle_but3", 250, 68),
    (else_try),
        (eq, "$group3_has_troops", 1),
        (overlay_set_val, "$g_presentation_obj_battle_check3", 0),
        (assign, "$g_formation_group3_selected", 0),
        (overlay_animate_to_alpha, "$g_presentation_obj_battle_but3", 250, 0),
    (try_end),
    (try_begin),
        (eq, "$group4_has_troops", 1),
        (class_is_listening_order, ":var_1", 4),
        (overlay_set_val, "$g_presentation_obj_battle_check4", 1),
        (assign, "$g_formation_group4_selected", 1),
        (overlay_animate_to_alpha, "$g_presentation_obj_battle_but4", 250, 68),
    (else_try),
        (eq, "$group4_has_troops", 1),
        (overlay_set_val, "$g_presentation_obj_battle_check4", 0),
        (assign, "$g_formation_group4_selected", 0),
        (overlay_animate_to_alpha, "$g_presentation_obj_battle_but4", 250, 0),
    (try_end),
    (try_begin),
        (eq, "$group5_has_troops", 1),
        (class_is_listening_order, ":var_1", 5),
        (overlay_set_val, "$g_presentation_obj_battle_check5", 1),
        (assign, "$g_formation_group5_selected", 1),
        (overlay_animate_to_alpha, "$g_presentation_obj_battle_but5", 250, 68),
    (else_try),
        (eq, "$group5_has_troops", 1),
        (overlay_set_val, "$g_presentation_obj_battle_check5", 0),
        (assign, "$g_formation_group5_selected", 0),
        (overlay_animate_to_alpha, "$g_presentation_obj_battle_but5", 250, 0),
    (try_end),
    (try_begin),
        (eq, "$group6_has_troops", 1),
        (class_is_listening_order, ":var_1", 6),
        (overlay_set_val, "$g_presentation_obj_battle_check6", 1),
        (assign, "$g_formation_group6_selected", 1),
        (overlay_animate_to_alpha, "$g_presentation_obj_battle_but6", 250, 68),
    (else_try),
        (eq, "$group6_has_troops", 1),
        (overlay_set_val, "$g_presentation_obj_battle_check6", 0),
        (assign, "$g_formation_group6_selected", 0),
        (overlay_animate_to_alpha, "$g_presentation_obj_battle_but6", 250, 0),
    (try_end),
    (try_begin),
        (eq, "$group7_has_troops", 1),
        (class_is_listening_order, ":var_1", 7),
        (overlay_set_val, "$g_presentation_obj_battle_check7", 1),
        (assign, "$g_formation_group7_selected", 1),
        (overlay_animate_to_alpha, "$g_presentation_obj_battle_but7", 250, 68),
    (else_try),
        (eq, "$group7_has_troops", 1),
        (overlay_set_val, "$g_presentation_obj_battle_check7", 0),
        (assign, "$g_formation_group7_selected", 0),
        (overlay_animate_to_alpha, "$g_presentation_obj_battle_but7", 250, 0),
    (try_end),
    (try_begin),
        (eq, "$group8_has_troops", 1),
        (class_is_listening_order, ":var_1", 8),
        (overlay_set_val, "$g_presentation_obj_battle_check8", 1),
        (assign, "$g_formation_group8_selected", 1),
        (overlay_animate_to_alpha, "$g_presentation_obj_battle_but8", 250, 68),
    (else_try),
        (eq, "$group8_has_troops", 1),
        (overlay_set_val, "$g_presentation_obj_battle_check8", 0),
        (assign, "$g_formation_group8_selected", 0),
        (overlay_animate_to_alpha, "$g_presentation_obj_battle_but8", 250, 0),
    (try_end),

]),

("update_order_panel_statistics_and_map",
[
    (set_fixed_point_multiplier, 1000),
    (assign, ":var_0", 0),
    (assign, ":var_1", 0),
    (assign, ":var_2", 0),
    (assign, ":var_3", 0),
    (assign, ":var_4", 0),
    (assign, ":var_5", 0),
    (assign, ":var_6", 0),
    (assign, ":var_7", 0),
    (assign, ":var_8", 0),
    (assign, ":var_9", 0),
    (assign, ":var_10", 0),
    (assign, ":var_11", 0),
    (assign, ":var_12", 0),
    (assign, ":var_13", 0),
    (assign, ":var_14", 0),
    (assign, ":var_15", 0),
    (assign, ":var_16", 0),
    (assign, ":var_17", 0),
    (assign, ":var_18", 0),
    (assign, ":var_19", 0),
    (assign, ":var_20", 0),
    (get_scene_boundaries, pos2, pos3),
    (try_for_agents, ":var_21"),
        (agent_is_human, ":var_21"),
        (agent_get_division, ":var_22", ":var_21"),
        (agent_get_party_id, ":var_23", ":var_21"),
        (agent_get_slot, ":var_24", ":var_21", slot_agent_map_overlay_id),
        (try_begin),
            (eq, ":var_23", "p_main_party"),
            (try_begin),
                (agent_is_alive, ":var_21"),
                (call_script, "script_update_agent_position_on_map", ":var_21"),
                (try_begin),
                    (eq, ":var_22", 0),
                    (val_add, ":var_0", 1),
                    (eq, "$group0_has_troops", 1),
                (else_try),
                    (eq, ":var_22", 1),
                    (val_add, ":var_1", 1),
                    (eq, "$group1_has_troops", 1),
                (else_try),
                    (eq, ":var_22", 2),
                    (val_add, ":var_2", 1),
                    (eq, "$group2_has_troops", 1),
                (else_try),
                    (eq, ":var_22", 3),
                    (val_add, ":var_3", 1),
                    (eq, "$group3_has_troops", 1),
                (else_try),
                    (eq, ":var_22", 4),
                    (val_add, ":var_4", 1),
                    (eq, "$group4_has_troops", 1),
                (else_try),
                    (eq, ":var_22", 5),
                    (val_add, ":var_5", 1),
                    (eq, "$group5_has_troops", 1),
                (else_try),
                    (eq, ":var_22", 6),
                    (val_add, ":var_6", 1),
                    (eq, "$group6_has_troops", 1),
                (else_try),
                    (eq, ":var_22", 7),
                    (val_add, ":var_7", 1),
                    (eq, "$group7_has_troops", 1),
                (else_try),
                    (eq, ":var_22", 8),
                    (val_add, ":var_8", 1),
                    (eq, "$group8_has_troops", 1),
                (try_end),
                (val_add, ":var_9", 1),
            (else_try),
                (overlay_set_alpha, ":var_24", 0),
                (agent_is_wounded, ":var_21"),
                (val_add, ":var_10", 1),
            (else_try),
                (agent_is_routed, ":var_21"),
                (val_add, ":var_11", 1),
            (else_try),
                (val_add, ":var_12", 1),
            (try_end),
        (else_try),
            (agent_is_ally, ":var_21"),
            (try_begin),
                (agent_is_alive, ":var_21"),
                (call_script, "script_update_agent_position_on_map", ":var_21"),
                (val_add, ":var_13", 1),
            (else_try),
                (overlay_set_alpha, ":var_24", 0),
                (agent_is_wounded, ":var_21"),
                (val_add, ":var_14", 1),
            (else_try),
                (agent_is_routed, ":var_21"),
                (val_add, ":var_15", 1),
            (else_try),
                (val_add, ":var_16", 1),
            (try_end),
        (else_try),
            (try_begin),
                (agent_is_alive, ":var_21"),
                (call_script, "script_update_agent_position_on_map", ":var_21"),
                (val_add, ":var_17", 1),
            (else_try),
                (overlay_set_alpha, ":var_24", 0),
                (agent_is_wounded, ":var_21"),
                (val_add, ":var_18", 1),
            (else_try),
                (agent_is_routed, ":var_21"),
                (val_add, ":var_19", 1),
            (else_try),
                (val_add, ":var_20", 1),
            (try_end),
        (try_end),
    (try_end),
    (assign, reg1, ":var_0"),
    (assign, reg2, ":var_1"),
    (assign, reg3, ":var_2"),
    (assign, reg4, ":var_3"),
    (assign, reg5, ":var_4"),
    (assign, reg6, ":var_5"),
    (assign, reg7, ":var_6"),
    (assign, reg8, ":var_7"),
    (assign, reg9, ":var_8"),
    (assign, reg10, ":var_9"),
    (assign, reg11, ":var_10"),
    (assign, reg12, ":var_11"),
    (assign, reg13, ":var_12"),
    (assign, reg14, ":var_13"),
    (assign, reg15, ":var_14"),
    (assign, reg16, ":var_15"),
    (assign, reg17, ":var_16"),
    (assign, reg18, ":var_17"),
    (assign, reg19, ":var_18"),
    (assign, reg20, ":var_19"),
    (assign, reg21, ":var_20"),
    (try_begin),
        (eq, "$group0_has_troops", 1),
        (str_store_class_name, s1, 0),
        (overlay_set_text, "$g_presentation_obj_battle_name0", "str_s1_reg1"),
    (try_end),
    (try_begin),
        (eq, "$group1_has_troops", 1),
        (str_store_class_name, s1, 1),
        (overlay_set_text, "$g_presentation_obj_battle_name1", "str_s1_reg2"),
    (try_end),
    (try_begin),
        (eq, "$group2_has_troops", 1),
        (str_store_class_name, s1, 2),
        (overlay_set_text, "$g_presentation_obj_battle_name2", "str_s1_reg3"),
    (try_end),
    (try_begin),
        (eq, "$group3_has_troops", 1),
        (str_store_class_name, s1, 3),
        (overlay_set_text, "$g_presentation_obj_battle_name3", "str_s1_reg4"),
    (try_end),
    (try_begin),
        (eq, "$group4_has_troops", 1),
        (str_store_class_name, s1, 4),
        (overlay_set_text, "$g_presentation_obj_battle_name4", "str_s1_reg5"),
    (try_end),
    (try_begin),
        (eq, "$group5_has_troops", 1),
        (str_store_class_name, s1, 5),
        (overlay_set_text, "$g_presentation_obj_battle_name5", "str_s1_reg6"),
    (try_end),
    (try_begin),
        (eq, "$group6_has_troops", 1),
        (str_store_class_name, s1, 6),
        (overlay_set_text, "$g_presentation_obj_battle_name6", "str_s1_reg7"),
    (try_end),
    (try_begin),
        (eq, "$group7_has_troops", 1),
        (str_store_class_name, s1, 7),
        (overlay_set_text, "$g_presentation_obj_battle_name7", "str_s1_reg8"),
    (try_end),
    (try_begin),
        (eq, "$group8_has_troops", 1),
        (str_store_class_name, s1, 8),
        (overlay_set_text, "$g_presentation_obj_battle_name8", "str_s1_reg9"),
    (try_end),
    (overlay_set_text, "$g_battle_us_ready", "@{!}{reg10}"),
    (overlay_set_text, "$g_battle_us_wounded", "@{!}{reg11}"),
    (overlay_set_text, "$g_battle_us_routed", "@{!}{reg12}"),
    (overlay_set_text, "$g_battle_us_dead", "str_reg13"),
    (overlay_set_text, "$g_battle_allies_ready", "str_reg14"),
    (overlay_set_text, "$g_battle_allies_wounded", "str_reg15"),
    (overlay_set_text, "$g_battle_allies_routed", "str_reg16"),
    (overlay_set_text, "$g_battle_allies_dead", "str_reg17"),
    (overlay_set_text, "$g_battle_enemies_ready", "str_reg18"),
    (overlay_set_text, "$g_battle_enemies_wounded", "str_reg19"),
    (overlay_set_text, "$g_battle_enemies_routed", "str_reg20"),
    (overlay_set_text, "$g_battle_enemies_dead", "str_reg21"),
    (assign, ":var_25", 675),
    (assign, ":var_26", 280),
    (val_add, ":var_25", 70),
    (val_add, ":var_26", 60),
    (position_set_x, pos1, ":var_25"),
    (position_set_y, pos1, ":var_26"),
    (overlay_set_position, "$g_battle_us_ready", pos1),
    (val_add, ":var_25", 70),
    (position_set_x, pos1, ":var_25"),
    (overlay_set_position, "$g_battle_us_wounded", pos1),
    (val_add, ":var_25", 70),
    (position_set_x, pos1, ":var_25"),
    (overlay_set_position, "$g_battle_us_routed", pos1),
    (val_add, ":var_25", 70),
    (position_set_x, pos1, ":var_25"),
    (overlay_set_position, "$g_battle_us_dead", pos1),
    (val_add, ":var_25", -210),
    (val_add, ":var_26", -30),
    (position_set_x, pos1, ":var_25"),
    (position_set_y, pos1, ":var_26"),
    (overlay_set_position, "$g_battle_allies_ready", pos1),
    (val_add, ":var_25", 70),
    (position_set_x, pos1, ":var_25"),
    (overlay_set_position, "$g_battle_allies_wounded", pos1),
    (val_add, ":var_25", 70),
    (position_set_x, pos1, ":var_25"),
    (overlay_set_position, "$g_battle_allies_routed", pos1),
    (val_add, ":var_25", 70),
    (position_set_x, pos1, ":var_25"),
    (overlay_set_position, "$g_battle_allies_dead", pos1),
    (val_add, ":var_25", -210),
    (val_add, ":var_26", -30),
    (position_set_x, pos1, ":var_25"),
    (position_set_y, pos1, ":var_26"),
    (overlay_set_position, "$g_battle_enemies_ready", pos1),
    (val_add, ":var_25", 70),
    (position_set_x, pos1, ":var_25"),
    (overlay_set_position, "$g_battle_enemies_wounded", pos1),
    (val_add, ":var_25", 70),
    (position_set_x, pos1, ":var_25"),
    (overlay_set_position, "$g_battle_enemies_routed", pos1),
    (val_add, ":var_25", 70),
    (position_set_x, pos1, ":var_25"),
    (overlay_set_position, "$g_battle_enemies_dead", pos1),
    (call_script, "script_update_order_flags_on_map"),

]),

("set_town_picture",
[
    (party_get_slot, ":var_0", "$current_town", slot_center_culture),
    (try_begin),
        (this_or_next|eq, ":var_0", 7),
        (this_or_next|eq, ":var_0", 8),
        (this_or_next|eq, ":var_0", 10),
        (this_or_next|eq, ":var_0", 19),
        (this_or_next|eq, ":var_0", 20),
        (this_or_next|eq, ":var_0", 14),
        (this_or_next|eq, ":var_0", 22),
        (this_or_next|eq, ":var_0", 23),
        (this_or_next|eq, ":var_0", 25),
        (eq, ":var_0", 26),
        (try_begin),
            (is_between, "$current_town", "p_village_1_1", "p_salt_mine"),
            (set_background_mesh, "mesh_pic_cataholic_village"),
        (else_try),
            (is_between, "$current_town", "p_castle_1_1", "p_village_1_1"),
            (set_background_mesh, "mesh_pic_cataholic_castle"),
        (else_try),
            (set_background_mesh, "mesh_pic_cataholic_town"),
        (try_end),
    (else_try),
        (this_or_next|eq, ":var_0", 15),
        (eq, ":var_0", 11),
        (try_begin),
            (is_between, "$current_town", "p_village_1_1", "p_salt_mine"),
            (set_background_mesh, "mesh_pic_baltic_village"),
        (else_try),
            (is_between, "$current_town", "p_castle_1_1", "p_village_1_1"),
            (set_background_mesh, "mesh_pic_baltic_castle"),
        (else_try),
            (set_background_mesh, "mesh_pic_baltic_town"),
        (try_end),
    (else_try),
        (this_or_next|eq, ":var_0", 9),
        (this_or_next|eq, ":var_0", 12),
        (this_or_next|eq, ":var_0", 13),
        (this_or_next|eq, ":var_0", 18),
        (eq, ":var_0", 27),
        (try_begin),
            (is_between, "$current_town", "p_village_1_1", "p_salt_mine"),
            (set_background_mesh, "mesh_pic_orthodox_village"),
        (else_try),
            (is_between, "$current_town", "p_castle_1_1", "p_village_1_1"),
            (set_background_mesh, "mesh_pic_orthodox_castle"),
        (else_try),
            (set_background_mesh, "mesh_pic_orthodox_town"),
        (try_end),
    (else_try),
        (this_or_next|eq, ":var_0", 16),
        (this_or_next|eq, ":var_0", 17),
        (this_or_next|eq, ":var_0", 21),
        (eq, ":var_0", 24),
        (try_begin),
            (is_between, "$current_town", "p_village_1_1", "p_salt_mine"),
            (set_background_mesh, "mesh_pic_muslim_village"),
        (else_try),
            (is_between, "$current_town", "p_castle_1_1", "p_village_1_1"),
            (set_background_mesh, "mesh_pic_muslim_castle"),
        (else_try),
            (set_background_mesh, "mesh_pic_muslim_town"),
        (try_end),
    (else_try),
        (try_begin),
            (is_between, "$current_town", "p_village_1_1", "p_salt_mine"),
            (set_background_mesh, "mesh_pic_cataholic_village"),
        (else_try),
            (is_between, "$current_town", "p_castle_1_1", "p_village_1_1"),
            (set_background_mesh, "mesh_pic_cataholic_castle"),
        (else_try),
            (set_background_mesh, "mesh_pic_cataholic_town"),
        (try_end),
    (try_end),

]),

("consume_food",
[
    (store_script_param, ":var_0", 1),
    (troop_get_inventory_capacity, ":var_1", "trp_player"),
    (try_for_range, ":var_2", 0, ":var_1"),
        (troop_get_inventory_slot, ":var_3", "trp_player", ":var_2"),
        (is_between, ":var_3", "itm_smoked_fish", "itm_siege_supply"),
        (troop_get_inventory_slot_modifier, ":var_4", "trp_player", ":var_2"),
        (neg|eq, ":var_4", 41),
        (item_slot_eq, ":var_3", slot_item_is_checked, 0),
        (item_set_slot, ":var_3", slot_item_is_checked, 1),
        (val_sub, ":var_0", 1),
        (neg|ge, ":var_0", 0),
        (assign, ":var_1", 0),
        (troop_inventory_slot_get_item_amount, ":var_5", "trp_player", ":var_2"),
        (val_sub, ":var_5", 1),
        (troop_inventory_slot_set_item_amount, "trp_player", ":var_2", ":var_5"),
    (try_end),

]),

("calculate_troop_score_for_center",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (assign, ":var_2", 1),
    (try_for_range, ":var_3", "p_town_1_1", "p_salt_mine"),
        (assign, ":var_4", 0),
        (try_begin),
            (eq, ":var_0", "trp_player"),
            (party_slot_eq, ":var_3", slot_town_lord, -2),
            (assign, ":var_4", 1),
        (try_end),
        (this_or_next|party_slot_eq, ":var_3", slot_town_lord, ":var_0"),
        (eq, ":var_4", 1),
        (try_begin),
            (party_slot_eq, ":var_3", slot_party_type, 3),
            (val_add, ":var_2", 4),
        (else_try),
            (party_slot_eq, ":var_3", slot_party_type, 2),
            (val_add, ":var_2", 2),
        (else_try),
            (val_add, ":var_2", 1),
        (try_end),
    (try_end),
    (troop_get_slot, ":var_5", ":var_0", slot_troop_renown),
    (store_add, ":var_6", 500, ":var_5"),
    (val_div, ":var_6", ":var_2"),
    (store_random_in_range, ":var_7", 50, 100),
    (val_mul, ":var_6", ":var_7"),
    (try_begin),
        (party_slot_eq, ":var_1", slot_center_last_taken_by_troop, ":var_0"),
        (val_mul, ":var_6", 3),
        (val_div, ":var_6", 2),
    (try_end),
    (try_begin),
        (eq, ":var_0", "trp_player"),
        (faction_get_slot, ":var_8", "$players_kingdom"),
        (call_script, "script_troop_get_player_relation", ":var_8"),
        (assign, ":var_9", reg0),
        (val_mul, ":var_9", 2),
        (val_add, ":var_6", ":var_9"),
    (try_end),
    (assign, reg0, ":var_6"),

]),

("assign_lords_to_empty_centers",
[
    (try_begin),
        (eq, "$cheat_mode", 1),
        (display_message, "str_assigning_lords_to_empty_centers"),
        (str_store_string, s65, "str_assign_lords_to_empty_centers_just_happened"),
        (call_script, "script_add_notification_menu", "mnu_debug_alert_from_s65", 0, 0),
    (try_end),
    (try_for_range, ":var_0", "fac_player_supporters_faction", "fac_kingdoms_end"),
        (faction_set_slot, ":var_0", slot_faction_temp_slot, 0),
    (try_end),
    (try_for_range, ":var_1", 0, "trp_knight_1_1_wife"),
        (troop_set_slot, ":var_1", slot_troop_temp_slot, 0),
    (try_end),
    (try_for_range, ":var_2", "p_town_1_1", "p_salt_mine"),
        (party_get_slot, ":var_3", ":var_2", slot_town_lord),
        (try_begin),
            (this_or_next|eq, ":var_3", -1),
            (eq, ":var_3", -3),
            (store_faction_of_party, ":var_4", ":var_2"),
            (try_begin),
                (eq, "$cheat_mode", 1),
                (str_store_party_name, s4, ":var_2"),
                (str_store_faction_name, s5, ":var_4"),
                (display_message, "str_s4_of_the_s5_is_unassigned"),
            (try_end),
            (faction_get_slot, ":var_5", ":var_4", slot_faction_temp_slot),
            (val_add, ":var_5", 1),
            (faction_set_slot, ":var_4", slot_faction_temp_slot, ":var_5"),
        (else_try),
            (eq, ":var_3", -2),
            (try_begin),
                (eq, "$cheat_mode", 1),
                (str_store_party_name, s4, ":var_2"),
                (str_store_faction_name, s5, ":var_4"),
                (display_message, "str_s4_of_the_s5_is_reserved_for_player"),
            (try_end),
        (else_try),
            (ge, ":var_3", 0),
            (troop_set_slot, ":var_3", slot_troop_temp_slot, 1),
        (try_end),
    (try_end),
    (try_for_range, ":var_1", 0, "trp_knight_1_1_wife"),
        (troop_slot_eq, ":var_1", slot_troop_occupation, 2),
        (this_or_next|gt, ":var_1", "trp_player"),
        (eq, "$player_has_homage", 1),
        (troop_slot_eq, ":var_1", slot_troop_temp_slot, 0),
        (store_troop_faction, ":var_6", ":var_1"),
        (is_between, ":var_6", "fac_kingdom_1", "fac_kingdoms_end"),
        (try_begin),
            (eq, "$cheat_mode", 1),
            (str_store_troop_name, s4, ":var_1"),
            (str_store_faction_name, s5, ":var_6"),
            (display_message, "str_s4_of_the_s5_has_no_fiefs"),
        (try_end),
        (faction_get_slot, ":var_5", ":var_6", slot_faction_temp_slot),
        (val_add, ":var_5", 1),
        (faction_set_slot, ":var_6", slot_faction_temp_slot, ":var_5"),
    (try_end),
    (try_begin),
        (eq, "$cheat_mode", 1),
        (try_for_range, ":var_0", "fac_player_supporters_faction", "fac_kingdoms_end"),
            (faction_get_slot, reg4, ":var_0", slot_faction_temp_slot),
            (str_store_faction_name, s4, ":var_0"),
            (display_message, "str_s4_unassigned_centers_plus_landless_lords_=_reg4"),
        (try_end),
    (try_end),
    (try_for_range, ":var_2", "p_town_1_1", "p_salt_mine"),
        (party_get_slot, ":var_3", ":var_2", slot_town_lord),
        (this_or_next|eq, ":var_3", -1),
        (eq, ":var_3", -3),
        (store_faction_of_party, ":var_4", ":var_2"),
        (is_between, ":var_4", "fac_player_supporters_faction", "fac_kingdoms_end"),
        (neg|faction_slot_eq, ":var_4", slot_faction_leader, "trp_player"),
        (try_begin),
            (eq, "$cheat_mode", 1),
            (str_store_party_name, s5, ":var_2"),
            (try_begin),
                (neg|faction_slot_ge, ":var_4", slot_faction_temp_slot, 2),
                (str_store_faction_name, s4, ":var_4"),
                (display_message, "str_s4_holds_s5_in_reserve"),
            (try_end),
        (try_end),
        (faction_slot_ge, ":var_4", slot_faction_temp_slot, 2),
        (assign, ":var_7", -1),
        (assign, ":var_8", -1),
        (try_begin),
            (eq, ":var_3", -1),
            (try_begin),
                (eq, "$players_kingdom", ":var_4"),
                (eq, "$player_has_homage", 1),
                (assign, ":var_7", -2),
                (call_script, "script_calculate_troop_score_for_center", "trp_player", ":var_2"),
                (assign, ":var_8", reg0),
            (try_end),
        (try_end),
        (try_for_range, ":var_9", "trp_npc1", "trp_knight_1_1_wife"),
            (troop_slot_eq, ":var_9", slot_troop_occupation, 2),
            (store_troop_faction, ":var_10", ":var_9"),
            (eq, ":var_10", ":var_4"),
            (call_script, "script_calculate_troop_score_for_center", ":var_9", ":var_2"),
            (assign, ":var_11", reg0),
            (try_begin),
                (troop_slot_eq, ":var_9", slot_troop_temp_slot, 0),
                (is_between, ":var_2", "p_village_1_1", "p_salt_mine"),
                (val_mul, ":var_11", 10),
            (try_end),
            (gt, ":var_11", ":var_8"),
            (assign, ":var_8", ":var_11"),
            (assign, ":var_7", ":var_9"),
        (try_end),
        (try_begin),
            (this_or_next|ge, ":var_7", 0),
            (eq, ":var_7", -2),
            (faction_get_slot, ":var_12", ":var_4", slot_faction_temp_slot),
            (val_sub, ":var_12", 1),
            (try_begin),
                (eq, ":var_7", -2),
                (troop_slot_eq, "trp_player", slot_troop_temp_slot, 0),
                (troop_set_slot, "trp_player", slot_troop_temp_slot, 1),
                (val_sub, ":var_12", 1),
            (else_try),
                (troop_slot_eq, ":var_7", slot_troop_temp_slot, 0),
                (troop_set_slot, ":var_7", slot_troop_temp_slot, 1),
                (val_sub, ":var_12", 1),
            (try_end),
            (faction_set_slot, ":var_4", slot_faction_temp_slot, ":var_12"),
        (try_end),
        (try_begin),
            (ge, ":var_7", 0),
            (call_script, "script_give_center_to_lord", ":var_2", ":var_7", 1),
        (else_try),
            (eq, ":var_7", -2),
            (party_set_slot, ":var_2", slot_town_lord, -2),
            (try_begin),
                (party_slot_eq, ":var_2", slot_party_type, 2),
                (try_for_range, ":var_13", "p_village_1_1", "p_salt_mine"),
                    (party_slot_eq, ":var_13", slot_village_bound_center, ":var_2"),
                    (party_slot_eq, ":var_13", slot_town_lord, -1),
                    (party_set_slot, ":var_13", slot_town_lord, -2),
                (try_end),
            (try_end),
        (try_end),
    (try_end),

]),

("create_village_farmer_party",
[
    (store_script_param, ":var_0", 1),
    (party_get_slot, ":var_1", ":var_0", slot_village_market_town),
    (store_faction_of_party, ":var_2", ":var_1"),
    (try_begin),
        (is_between, ":var_2", "fac_player_supporters_faction", "fac_kingdoms_end"),
        (is_between, ":var_1", "p_town_1_1", "p_castle_1_1"),
        (set_spawn_radius, 0),
        (spawn_around_party, ":var_0", "pt_village_farmers"),
        (assign, ":var_3", reg0),
        (party_set_faction, ":var_3", ":var_2"),
        (party_set_slot, ":var_3", slot_party_home_center, ":var_0"),
        (party_set_slot, ":var_3", slot_party_last_traded_center, ":var_0"),
        (party_set_slot, ":var_3", slot_party_type, 15),
        (party_set_slot, ":var_3", slot_party_ai_state, 13),
        (party_set_slot, ":var_3", slot_party_ai_object, ":var_1"),
        (party_set_ai_behavior, ":var_3", 1),
        (party_set_ai_object, ":var_3", ":var_1"),
        (party_set_flags, ":var_3", 65536, 0),
        (store_sub, ":var_4", 250, "itm_spice"),
        (try_for_range, ":var_5", "itm_spice", "itm_siege_supply"),
            (store_add, ":var_6", ":var_5", ":var_4"),
            (party_get_slot, ":var_7", ":var_0", ":var_6"),
            (party_set_slot, ":var_3", ":var_6", ":var_7"),
        (try_end),
        (assign, reg0, ":var_3"),
    (try_end),

]),

("do_villager_center_trade",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (assign, ":var_2", 30),
    (assign, ":var_3", 0),
    (store_sub, ":var_4", 250, "itm_spice"),
    (try_for_range, ":var_5", "itm_spice", "itm_siege_supply"),
        (store_add, ":var_6", ":var_5", ":var_4"),
        (party_get_slot, ":var_7", ":var_0", ":var_6"),
        (party_get_slot, ":var_8", ":var_1", ":var_6"),
        (store_sub, ":var_9", ":var_7", ":var_8"),
        (assign, ":var_10", ":var_9"),
        (val_abs, ":var_10"),
        (val_add, ":var_3", ":var_10"),
        (val_mul, ":var_10", ":var_2"),
        (val_div, ":var_10", 100),
        (try_begin),
            (neg|ge, ":var_9", 0),
            (val_mul, ":var_10", -1),
        (try_end),
        (val_add, ":var_8", ":var_10"),
        (party_set_slot, ":var_1", ":var_6", ":var_8"),
    (try_end),
    (assign, reg0, ":var_3"),

]),

("do_party_center_trade",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (assign, ":var_2", 30),
    (party_get_slot, ":var_3", ":var_0", slot_party_last_traded_center),
    (party_set_slot, ":var_0", slot_party_last_traded_center, ":var_1"),
    (assign, ":var_4", 0),
    (store_sub, ":var_5", 250, "itm_spice"),
    (try_for_range, ":var_6", "itm_spice", "itm_siege_supply"),
        (store_add, ":var_7", ":var_6", ":var_5"),
        (party_get_slot, ":var_8", ":var_0", ":var_7"),
        (party_get_slot, ":var_9", ":var_1", ":var_7"),
        (store_sub, ":var_10", ":var_8", ":var_9"),
        (assign, ":var_11", ":var_10"),
        (val_abs, ":var_11"),
        (val_add, ":var_4", ":var_11"),
        (val_mul, ":var_11", ":var_2"),
        (val_div, ":var_11", 100),
        (try_begin),
            (neg|ge, ":var_10", 0),
            (val_mul, ":var_11", -1),
        (try_end),
        (party_set_slot, ":var_0", ":var_7", ":var_9"),
        (val_add, ":var_9", ":var_11"),
        (party_set_slot, ":var_1", ":var_7", ":var_9"),
        (try_begin),
            (eq, "$cheat_mode", 3),
            (str_store_party_name, s3, ":var_3"),
            (str_store_party_name, s4, ":var_1"),
            (str_store_item_name, s5, ":var_6"),
            (assign, reg4, ":var_11"),
            (assign, reg5, ":var_9"),
            (display_message, "@{!}DEBUG -- Trade of {s5} from {s3} to {s4} brings price from {reg4} to  {reg5}"),
        (try_end),
    (try_end),
    (assign, reg0, ":var_4"),

]),

("player_join_faction",
[
    (store_script_param, ":var_0", 1),
    (assign, "$players_kingdom", ":var_0"),
    (faction_set_slot, "fac_player_supporters_faction", slot_faction_ai_state, 0),
    (assign, "$players_oath_renounced_against_kingdom", 0),
    (assign, "$players_oath_renounced_given_center", 0),
    (assign, "$players_oath_renounced_begin_time", 0),
    (try_for_range, ":var_1", "fac_player_supporters_faction", "fac_kingdoms_end"),
        (faction_slot_eq, ":var_1", slot_faction_state, 0),
        (neg|eq, ":var_1", "fac_player_supporters_faction"),
        (try_begin),
            (neg|eq, ":var_1", ":var_0"),
            (store_relation, ":var_2", ":var_1", ":var_0"),
        (else_try),
            (store_relation, ":var_2", "fac_player_supporters_faction", ":var_1"),
            (val_max, ":var_2", 12),
        (try_end),
        (call_script, "script_set_player_relation_with_faction", ":var_1", ":var_2"),
    (try_end),
    (try_for_range, ":var_3", "p_town_1_1", "p_salt_mine"),
        (neg|gt, "$g_player_crusading", 0),
        (party_slot_eq, ":var_3", slot_town_lord, "trp_player"),
        (call_script, "script_give_center_to_faction_while_maintaining_lord", ":var_3", ":var_0"),
    (else_try),
        (neg|gt, "$g_player_crusading", 0),
        (store_faction_of_party, ":var_4", ":var_3"),
        (eq, ":var_4", "fac_player_supporters_faction"),
        (call_script, "script_give_center_to_faction_while_maintaining_lord", ":var_3", ":var_0"),
    (try_end),
    (try_for_range, ":var_5", "qst_deliver_message", "qst_follow_army"),
        (check_quest_active, ":var_5"),
        (quest_get_slot, ":var_6", ":var_5", 6),
        (store_troop_faction, ":var_7", ":var_6"),
        (store_relation, ":var_8", "fac_player_supporters_faction", ":var_7"),
        (neg|ge, ":var_8", 0),
        (call_script, "script_abort_quest", ":var_5", 0),
    (try_end),
    (try_for_range, ":var_5", "qst_destroy_bandit_lair", "qst_blank_quest_2"),
        (check_quest_active, ":var_5"),
        (quest_get_slot, ":var_6", ":var_5", 6),
        (store_troop_faction, ":var_7", ":var_6"),
        (store_relation, ":var_8", "fac_player_supporters_faction", ":var_7"),
        (neg|ge, ":var_8", 0),
        (call_script, "script_abort_quest", ":var_5", 0),
    (try_end),
    (try_begin),
        (neg|eq, ":var_0", "fac_player_supporters_faction"),
        (faction_set_slot, "fac_player_supporters_faction", slot_faction_state, 2),
        (faction_set_slot, "fac_player_supporters_faction", slot_faction_leader, "trp_player"),
    (try_end),
    (try_begin),
        (troop_get_slot, ":var_9", "trp_player", slot_troop_spouse),
        (is_between, ":var_9", "trp_knight_1_1_wife", "trp_heroes_end"),
        (try_begin),
            (ge, "$cheat_mode", 1),
            (str_store_troop_name, s4, ":var_9"),
            (display_message, "@{!}DEBUG - {s4} faction changed by marriage, case 1"),
        (try_end),
        (troop_set_faction, ":var_9", "$players_kingdom"),
    (try_end),
    (try_for_range, ":var_10", "p_town_1_1", "p_salt_mine"),
        (store_faction_of_party, ":var_11", ":var_0"),
        (neg|eq, ":var_11", "$players_kingdom"),
        (party_slot_eq, ":var_10", slot_town_lord, -2),
    (try_end),
    (troop_set_slot, "trp_player", slot_troop_stance_on_faction_issue, -1),
    (try_for_parties, ":var_12"),
        (store_faction_of_party, ":var_13", ":var_12"),
        (eq, ":var_13", ":var_0"),
        (party_get_num_prisoner_stacks, ":var_14", ":var_12"),
        (try_for_range_backwards, ":var_15", 0, ":var_14"),
            (party_prisoner_stack_get_troop_id, ":var_16", ":var_12", ":var_15"),
            (store_troop_faction, ":var_17", ":var_16"),
            (this_or_next|eq, ":var_17", "fac_player_supporters_faction"),
            (this_or_next|eq, ":var_17", ":var_0"),
            (is_between, ":var_16", "trp_npc1", "trp_kingdom_1_lord"),
            (try_begin),
                (troop_is_hero, ":var_16"),
                (call_script, "script_remove_troop_from_prison", ":var_16"),
            (try_end),
            (party_prisoner_stack_get_size, ":var_18", ":var_12", ":var_15"),
            (party_remove_prisoners, ":var_12", ":var_16", ":var_18"),
            (try_begin),
                (is_between, ":var_16", "trp_npc1", "trp_kingdom_1_lord"),
                (try_begin),
                    (is_between, ":var_12", "p_town_1_1", "p_castle_1_1"),
                    (troop_set_slot, ":var_16", slot_troop_cur_center, ":var_12"),
                (else_try),
                    (store_random_in_range, ":var_19", "p_town_1_1", "p_castle_1_1"),
                    (troop_set_slot, ":var_16", slot_troop_cur_center, ":var_19"),
                (try_end),
            (try_end),
        (try_end),
    (try_end),
    (call_script, "script_update_all_notes"),
    (assign, "$g_recalculate_ais", 1),

]),

("player_leave_faction",
[
    (store_script_param, ":var_0", 1),
    (call_script, "script_check_and_finish_active_army_quests_for_faction", "$players_kingdom"),
    (assign, ":var_1", "$players_kingdom"),
    (assign, ":var_2", "$player_has_homage"),
    (assign, "$players_kingdom", 0),
    (assign, "$player_has_homage", 0),
    (try_begin),
        (neg|eq, ":var_0", 0),
        (try_for_range, ":var_3", "p_town_1_1", "p_salt_mine"),
            (party_slot_eq, ":var_3", slot_town_lord, "trp_player"),
            (call_script, "script_give_center_to_faction", ":var_3", ":var_1"),
            (party_set_slot, ":var_3", slot_town_lord, -1),
        (try_end),
    (else_try),
        (neg|gt, "$g_player_crusading", 0),
        (try_for_range, ":var_3", "p_town_1_1", "p_salt_mine"),
            (party_slot_eq, ":var_3", slot_town_lord, "trp_player"),
            (call_script, "script_give_center_to_faction", ":var_3", "fac_player_supporters_faction"),
            (party_set_slot, ":var_3", slot_town_lord, "trp_player"),
            (troop_get_slot, ":var_4", "trp_player", slot_troop_banner_scene_prop),
            (gt, ":var_4", 0),
            (val_sub, ":var_4", "spr_banner_a"),
            (val_add, ":var_4", "icon_banner_01"),
            (party_set_banner_icon, ":var_3", ":var_4"),
        (try_end),
        (try_for_range, ":var_3", "p_village_1_1", "p_salt_mine"),
            (party_get_slot, ":var_5", ":var_3", slot_village_bound_center),
            (party_slot_eq, ":var_3", slot_town_lord, "trp_player"),
            (neg|party_slot_eq, ":var_5", slot_town_lord, "trp_player"),
            (call_script, "script_give_center_to_faction", ":var_3", ":var_1"),
        (try_end),
        (is_between, ":var_1", "fac_player_supporters_faction", "fac_kingdoms_end"),
        (neg|eq, ":var_1", "fac_player_supporters_faction"),
        (store_relation, ":var_6", "fac_player_supporters_faction", ":var_1"),
        (store_sub, ":var_7", -40, ":var_6"),
        (call_script, "script_change_player_relation_with_faction", ":var_1", ":var_7"),
    (try_end),
    (try_begin),
        (eq, ":var_2", 1),
        (faction_get_slot, ":var_8", ":var_1", slot_faction_leader),
        (call_script, "script_change_player_relation_with_troop", ":var_8", -20),
    (try_end),
    (try_begin),
        (troop_get_slot, ":var_9", "trp_player", slot_troop_spouse),
        (is_between, ":var_9", "trp_knight_1_1_wife", "trp_heroes_end"),
        (troop_set_faction, ":var_9", "fac_player_supporters_faction"),
    (try_end),
    (try_for_range, ":var_10", "fac_player_supporters_faction", "fac_kingdoms_end"),
        (neg|eq, ":var_10", "fac_player_supporters_faction"),
        (store_relation, ":var_11", ":var_1", ":var_10"),
        (store_relation, ":var_12", "fac_player_faction", ":var_10"),
        (try_begin),
            (eq, ":var_1", ":var_10"),
            (val_min, ":var_12", 0),
        (else_try),
            (neg|ge, ":var_11", 0),
            (val_max, ":var_12", 0),
        (try_end),
        (set_relation, "fac_player_faction", ":var_10", ":var_12"),
        (set_relation, "fac_player_supporters_faction", ":var_10", ":var_12"),
    (try_end),
    (call_script, "script_update_all_notes"),
    (assign, "$g_recalculate_ais", 1),

]),

("deactivate_player_faction",
[
    (faction_set_slot, "fac_player_supporters_faction", slot_faction_state, 2),
    (faction_set_slot, "fac_player_supporters_faction", slot_faction_leader, "trp_player"),
    (assign, "$players_kingdom", 0),
    (assign, "$players_oath_renounced_against_kingdom", 0),
    (assign, "$players_oath_renounced_given_center", 0),
    (assign, "$players_oath_renounced_begin_time", 0),
    (call_script, "script_update_all_notes"),
    (try_begin),
        (is_between, "$g_player_minister", "trp_npc1", "trp_kingdom_1_lord"),
        (assign, "$npc_to_rejoin_party", "$g_player_minister"),
    (try_end),
    (assign, "$g_player_minister", -1),
    (call_script, "script_add_notification_menu", "mnu_notification_player_faction_deactive", 0, 0),

]),

("activate_player_faction",
[
    (store_script_param, ":var_0", 1),
    (try_begin),
        (faction_slot_eq, "fac_player_supporters_faction", slot_faction_state, 2),
        (neg|is_between, ":var_0", "trp_kingdom_4_pretender", "trp_knight_1_1_wife"),
        (call_script, "script_add_notification_menu", "mnu_notification_player_faction_active", 0, 0),
    (try_end),
    (faction_set_slot, "fac_player_supporters_faction", slot_faction_state, 0),
    (faction_set_slot, "fac_player_supporters_faction", slot_faction_leader, ":var_0"),
    (faction_set_slot, "fac_player_supporters_faction", 102, 0),
    (assign, ":var_1", "$players_kingdom"),
    (try_begin),
        (is_between, ":var_1", "fac_kingdom_1", "fac_kingdoms_end"),
        (call_script, "script_player_leave_faction", 0),
    (try_end),
    (try_begin),
        (is_between, ":var_0", "trp_npc1", "trp_knight_1_1_wife"),
        (store_troop_faction, ":var_2"),
        (is_between, ":var_2", "fac_kingdom_1", "fac_kingdoms_end"),
        (faction_get_slot, ":var_3", ":var_2", slot_faction_adjective),
        (str_store_string, s1, ":var_3"),
        (faction_set_name, "fac_player_supporters_faction", "@{s1} Rebels"),
    (else_try),
        (str_store_troop_name, s2, ":var_0"),
        (str_store_string, s1, "str_s2s_rebellion"),
    (try_end),
    (assign, "$players_kingdom", "fac_player_supporters_faction"),
    (assign, "$g_player_banner_granted", 1),
    (try_begin),
        (is_between, ":var_1", "fac_kingdom_1", "fac_kingdoms_end"),
        (faction_get_slot, ":var_4", ":var_1", slot_faction_leader),
        (call_script, "script_add_log_entry", 23, "trp_player", -1, ":var_4", "$players_kingdom"),
        (assign, "$players_oath_renounced_against_kingdom", ":var_1"),
        (assign, "$players_oath_renounced_given_center", 0),
        (store_current_hours, "$players_oath_renounced_begin_time"),
        (try_for_range, ":var_5", "p_town_1_1", "p_village_1_1"),
            (store_faction_of_party, ":var_6", ":var_5"),
            (party_set_slot, ":var_5", slot_center_faction_when_oath_renounced, ":var_6"),
        (try_end),
        (party_set_slot, "$g_center_to_give_to_player", slot_center_faction_when_oath_renounced, "$players_oath_renounced_against_kingdom"),
        (store_relation, ":var_7", ":var_1", "fac_player_supporters_faction"),
        (ge, ":var_7", 0),
        (call_script, "script_diplomacy_start_war_between_kingdoms", ":var_1", "fac_player_supporters_faction", 1),
    (try_end),
    (try_begin),
        (troop_get_slot, ":var_8", "trp_player", slot_troop_spouse),
        (is_between, ":var_8", "trp_knight_1_1_wife", "trp_heroes_end"),
        (try_begin),
            (ge, "$cheat_mode", 1),
            (str_store_troop_name, s4, ":var_8"),
            (display_message, "@{!}DEBUG - {s4} faction changed by marriage, case 3"),
        (try_end),
        (troop_set_faction, ":var_8", "fac_player_supporters_faction"),
    (try_end),
    (call_script, "script_update_all_notes"),
    (assign, "$g_recalculate_ais", 1),

]),

("agent_reassign_team",
[
    (store_script_param, ":var_0", 1),
    (get_player_agent_no, ":var_1"),
    (try_begin),
        (ge, ":var_1", 0),
        (agent_is_human, ":var_0"),
        (agent_is_ally, ":var_0"),
        (agent_get_party_id, ":var_2", ":var_0"),
        (gt, ":var_2", "p_main_party"),
        (assign, ":var_3", 1),
        (store_faction_of_party, ":var_4", ":var_2"),
        (try_begin),
            (eq, ":var_4", "$players_kingdom"),
            (is_between, "$players_kingdom", "fac_player_supporters_faction", "fac_kingdoms_end"),
            (faction_slot_eq, "$players_kingdom", slot_faction_marshall, "trp_player"),
            (assign, ":var_3", 0),
        (else_try),
            (neg|eq, "$freelancer_state", 1),
            (party_stack_get_troop_id, ":var_5", ":var_2", 0),
            (neg|is_between, ":var_5", "trp_npc1", "trp_knight_1_1_wife"),
            (assign, ":var_3", 0),
        (try_end),
        (eq, ":var_3", 1),
        (agent_get_team, ":var_6", ":var_1"),
        (val_add, ":var_6", 2),
        (agent_set_team, ":var_0", ":var_6"),
    (try_end),

]),

("start_quest",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (quest_set_slot, ":var_0", 6, ":var_1"),
    (try_begin),
        (eq, ":var_1", -1),
        (str_store_string, s63, "str_political_suggestion"),
    (else_try),
        (is_between, ":var_1", "trp_npc1", "trp_knight_1_1_wife"),
        (str_store_troop_name_link, s62, ":var_1"),
        (str_store_string, s63, "@Given by: {s62}"),
    (else_try),
        (str_store_troop_name, s62, ":var_1"),
        (str_store_string, s63, "@Given by: {s62}"),
    (try_end),
    (store_current_hours, ":var_2"),
    (str_store_date, s60, ":var_2"),
    (str_store_string, s60, "@Given on: {s60}"),
    (add_quest_note_from_sreg, ":var_0", 0, 60, 0),
    (add_quest_note_from_sreg, ":var_0", 1, 63, 0),
    (add_quest_note_from_sreg, ":var_0", 2, 2, 0),
    (try_begin),
        (quest_slot_ge, ":var_0", 23, 1),
        (quest_get_slot, reg0, ":var_0", 23),
        (add_quest_note_from_sreg, ":var_0", 7, "@You have {reg0} days to finish this quest.", 0),
    (try_end),
    (try_begin),
        (quest_slot_ge, ":var_0", 24, 1),
        (quest_get_slot, ":var_3", ":var_0", 24),
        (quest_set_slot, ":var_0", 25, ":var_3"),
    (try_end),
    (start_quest, ":var_0", ":var_1"),
    (try_begin),
        (eq, ":var_0", "qst_report_to_army"),
        (assign, "$number_of_report_to_army_quest_notes", 8),
        (faction_get_slot, ":var_4", "$players_kingdom", slot_faction_ai_state),
        (call_script, "script_update_report_to_army_quest_note", "$players_kingdom", ":var_4", -1),
    (try_end),
    (display_message, "str_quest_log_updated"),

]),

("conclude_quest",
[
    (store_script_param, ":var_0", 1),
    (conclude_quest, ":var_0"),
    (quest_get_slot, ":var_1", ":var_0", 6),
    (str_store_troop_name, s59, ":var_1"),
    (add_quest_note_from_sreg, ":var_0", 7, "@This quest has been concluded. Talk to {s59} to finish it.", 0),

]),

("succeed_quest",
[
    (store_script_param, ":var_0", 1),
    (succeed_quest, ":var_0"),
    (quest_get_slot, ":var_1", ":var_0", 6),
    (str_store_troop_name, s59, ":var_1"),
    (add_quest_note_from_sreg, ":var_0", 7, "@This quest has been successfully completed. Talk to {s59} to claim your reward.", 0),

]),

("fail_quest",
[
    (store_script_param, ":var_0", 1),
    (fail_quest, ":var_0"),
    (quest_get_slot, ":var_1", ":var_0", 6),
    (str_store_troop_name, s59, ":var_1"),
    (add_quest_note_from_sreg, ":var_0", 7, "@This quest has failed. Talk to {s59} to explain the situation.", 0),

]),

("report_quest_troop_positions",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (call_script, "script_get_information_about_troops_position", ":var_1", 1),
    (str_store_string, s5, "@At the time quest was given:^{s1}"),
    (add_quest_note_from_sreg, ":var_0", ":var_2", 5, 1),
    (call_script, "script_update_troop_location_notes", ":var_1", 1),

]),

("end_quest",
[
    (store_script_param, ":var_0", 1),
    (str_clear, s1),
    (add_quest_note_from_sreg, ":var_0", 0, 1, 0),
    (add_quest_note_from_sreg, ":var_0", 1, 1, 0),
    (add_quest_note_from_sreg, ":var_0", 2, 1, 0),
    (add_quest_note_from_sreg, ":var_0", 3, 1, 0),
    (add_quest_note_from_sreg, ":var_0", 4, 1, 0),
    (add_quest_note_from_sreg, ":var_0", 5, 1, 0),
    (add_quest_note_from_sreg, ":var_0", 6, 1, 0),
    (add_quest_note_from_sreg, ":var_0", 7, 1, 0),
    (try_begin),
        (neg|check_quest_failed, ":var_0"),
        (val_add, "$g_total_quests_completed", 1),
    (try_end),
    (try_begin),
        (eq, ":var_0", "qst_consult_with_minister"),
        (assign, "$g_minister_notification_quest", 0),
    (try_end),
    (complete_quest, ":var_0"),
    (try_begin),
        (is_between, ":var_0", "qst_move_cattle_herd", "qst_deliver_grain"),
        (assign, "$merchant_quest_last_offerer", -1),
        (assign, "$merchant_offered_quest", -1),
    (try_end),

]),

("cancel_quest",
[
    (store_script_param, ":var_0", 1),
    (str_clear, s1),
    (add_quest_note_from_sreg, ":var_0", 0, 1, 0),
    (add_quest_note_from_sreg, ":var_0", 1, 1, 0),
    (add_quest_note_from_sreg, ":var_0", 2, 1, 0),
    (add_quest_note_from_sreg, ":var_0", 3, 1, 0),
    (add_quest_note_from_sreg, ":var_0", 4, 1, 0),
    (add_quest_note_from_sreg, ":var_0", 5, 1, 0),
    (add_quest_note_from_sreg, ":var_0", 6, 1, 0),
    (add_quest_note_from_sreg, ":var_0", 7, 1, 0),
    (cancel_quest, ":var_0"),
    (try_begin),
        (is_between, ":var_0", "qst_move_cattle_herd", "qst_deliver_grain"),
        (assign, "$merchant_quest_last_offerer", -1),
        (assign, "$merchant_offered_quest", -1),
    (try_end),

]),

("get_available_mercenary_troop_and_amount_of_center",
[
    (store_script_param, ":var_0", 1),
    (party_get_slot, ":var_1", ":var_0", slot_center_npc_volunteer_troop_type),
    (party_get_slot, ":var_2", ":var_0", slot_center_npc_volunteer_troop_amount),
    (party_get_free_companions_capacity, ":var_3", "p_main_party"),
    (val_min, ":var_2", ":var_3"),
    (store_troop_gold, ":var_4", "trp_player"),
    (call_script, "script_game_get_join_cost", ":var_1"),
    (assign, ":var_5", reg0),
    (try_begin),
        (gt, ":var_5", 0),
        (val_div, ":var_4", ":var_5"),
        (val_min, ":var_2", ":var_4"),
    (try_end),
    (assign, reg0, ":var_1"),
    (assign, reg1, ":var_2"),

]),

("update_village_market_towns",
[
    (try_for_range, ":var_0", "p_village_1_1", "p_salt_mine"),
        (store_faction_of_party, ":var_1", ":var_0"),
        (assign, ":var_2", 999999),
        (assign, ":var_3", -1),
        (try_for_range, ":var_4", "p_town_1_1", "p_castle_1_1"),
            (store_faction_of_party, ":var_5", ":var_4"),
            (eq, ":var_5", ":var_1"),
            (store_distance_to_party_from_party, ":var_6", ":var_0", ":var_4"),
            (neg|ge, ":var_6", ":var_2"),
            (assign, ":var_2", ":var_6"),
            (assign, ":var_3", ":var_4"),
        (try_end),
        (try_begin),
            (gt, ":var_3", -1),
            (party_set_slot, ":var_0", slot_village_market_town, ":var_3"),
        (else_try),
            (assign, ":var_2", 999999),
            (assign, ":var_3", -1),
            (try_for_range, ":var_4", "p_town_1_1", "p_castle_1_1"),
                (store_faction_of_party, ":var_5", ":var_4"),
                (store_relation, ":var_7", ":var_5", ":var_1"),
                (ge, ":var_7", 0),
                (store_distance_to_party_from_party, ":var_6", ":var_0", ":var_4"),
                (neg|ge, ":var_6", ":var_2"),
                (assign, ":var_2", ":var_6"),
                (assign, ":var_3", ":var_4"),
            (try_end),
            (gt, ":var_3", -1),
            (party_set_slot, ":var_0", slot_village_market_town, ":var_3"),
        (try_end),
    (try_end),

]),

("update_mercenary_units_of_towns",
[
    (try_for_range, ":var_0", "p_town_1_1", "p_castle_1_1"),
        (party_get_slot, ":var_1", ":var_0", 705),
        (party_get_slot, ":var_2", ":var_0", 708),
        (assign, ":var_3", 702),
        (try_begin),
            (gt, ":var_1", 0),
            (gt, ":var_2", 0),
            (store_random_in_range, ":var_4", 0, 3),
            (try_begin),
                (eq, ":var_4", 1),
                (assign, ":var_3", 705),
            (else_try),
                (eq, ":var_4", 2),
                (assign, ":var_3", 708),
            (try_end),
        (else_try),
            (gt, ":var_1", 0),
            (store_random_in_range, ":var_4", 0, 2),
            (try_begin),
                (eq, ":var_4", 1),
                (assign, ":var_3", 705),
            (try_end),
        (else_try),
            (gt, ":var_2", 0),
            (store_random_in_range, ":var_4", 0, 2),
            (try_begin),
                (eq, ":var_4", 1),
                (assign, ":var_3", 708),
            (try_end),
        (try_end),
        (assign, ":var_5", "trp_merc_euro_spearman"),
        (try_begin),
            (party_slot_eq, ":var_0", ":var_3", 1),
            (store_random_in_range, ":var_5", "trp_merc_euro_spearman", "trp_merc_balt_spearman"),
        (else_try),
            (party_slot_eq, ":var_0", ":var_3", 2),
            (store_random_in_range, ":var_5", "trp_merc_balt_spearman", "trp_merc_mamluke_spearman"),
        (else_try),
            (party_slot_eq, ":var_0", ":var_3", 4),
            (store_random_in_range, ":var_5", "trp_merc_maghreb_spearman", "trp_merc_rus_spearman"),
        (else_try),
            (party_slot_eq, ":var_0", ":var_3", 5),
            (store_random_in_range, ":var_5", "trp_merc_rus_spearman", "trp_merc_latin_spearman"),
        (else_try),
            (party_slot_eq, ":var_0", ":var_3", 6),
            (store_random_in_range, ":var_5", "trp_merc_latin_spearman", "trp_merc_balkan_spearman"),
        (else_try),
            (party_slot_eq, ":var_0", ":var_3", 7),
            (store_random_in_range, ":var_5", "trp_merc_balkan_spearman", "trp_merc_scan_spearman"),
        (else_try),
            (party_slot_eq, ":var_0", ":var_3", 8),
            (store_random_in_range, ":var_5", "trp_merc_scan_spearman", "trp_merc_gaelic_spearman"),
        (else_try),
            (party_slot_eq, ":var_0", ":var_3", 9),
            (store_random_in_range, ":var_5", "trp_merc_gaelic_spearman", "trp_genoese_crossbowman"),
        (else_try),
            (party_slot_eq, ":var_0", ":var_3", 10),
            (store_random_in_range, ":var_5", "trp_merc_mamluke_spearman", "trp_merc_maghreb_spearman"),
        (else_try),
            (party_slot_eq, ":var_0", ":var_3", 20),
            (store_random_in_range, ":var_5", "trp_merc_brabantine_spearman", "trp_merc_welsh_bowman"),
        (else_try),
            (party_slot_eq, ":var_0", ":var_3", 21),
            (store_random_in_range, ":var_5", "trp_georgian_lancer", "trp_mercenaries_end"),
        (else_try),
            (party_slot_eq, ":var_0", ":var_3", 22),
            (store_random_in_range, ":var_5", "trp_merc_sicily_foot_archer_1", "trp_cuman_tribesman"),
        (else_try),
            (party_slot_eq, ":var_0", ":var_3", 23),
            (assign, ":var_5", "trp_crusader_turkopole"),
        (else_try),
            (party_slot_eq, ":var_0", ":var_3", 24),
            (store_random_in_range, ":var_5", "trp_cuman_skirmisher", "trp_farmer"),
        (else_try),
            (party_slot_eq, ":var_0", ":var_3", 25),
            (store_random_in_range, ":var_5", "trp_kwarezmian_range", "trp_mordovian_foot"),
        (else_try),
            (party_slot_eq, ":var_0", ":var_3", 26),
            (store_random_in_range, ":var_5", "trp_mordovian_foot", "trp_kipchak_range"),
        (else_try),
            (party_slot_eq, ":var_0", ":var_3", 27),
            (store_random_in_range, ":var_5", "trp_kipchak_range", "trp_finn_village_recruit"),
        (else_try),
            (party_slot_eq, ":var_0", ":var_3", 28),
            (store_random_in_range, ":var_5", "trp_genoese_crossbowman", "trp_merc_brabantine_spearman"),
        (else_try),
            (party_slot_eq, ":var_0", ":var_3", 51),
            (store_random_in_range, ":var_5", "trp_merc_euro_spearman", "trp_merc_balt_spearman"),
        (else_try),
            (party_slot_eq, ":var_0", ":var_3", 52),
            (store_random_in_range, ":var_5", "trp_merc_euro_spearman", "trp_merc_balt_spearman"),
        (else_try),
            (party_slot_eq, ":var_0", ":var_3", 53),
            (store_random_in_range, ":var_5", "trp_merc_euro_spearman", "trp_merc_balt_spearman"),
        (else_try),
            (party_slot_eq, ":var_0", ":var_3", 54),
            (store_random_in_range, ":var_5", "trp_merc_euro_spearman", "trp_merc_balt_spearman"),
        (else_try),
            (party_slot_eq, ":var_0", ":var_3", 55),
            (store_random_in_range, ":var_5", "trp_merc_euro_spearman", "trp_merc_balt_spearman"),
        (else_try),
            (party_slot_eq, ":var_0", ":var_3", 56),
            (store_random_in_range, ":var_5", "trp_merc_euro_spearman", "trp_merc_balt_spearman"),
        (else_try),
            (party_slot_eq, ":var_0", ":var_3", 57),
            (store_random_in_range, ":var_5", "trp_merc_euro_spearman", "trp_merc_balt_spearman"),
        (else_try),
            (party_slot_eq, ":var_0", ":var_3", 50),
            (assign, ":var_5", "trp_varangian_guard"),
        (try_end),
        (party_set_slot, ":var_0", slot_center_npc_volunteer_troop_type, ":var_5"),
        (store_random_in_range, ":var_6", 3, 10),
        (party_set_slot, ":var_0", slot_center_npc_volunteer_troop_amount, ":var_6"),
    (try_end),

]),

("update_volunteer_troops_in_village",
[
    (store_script_param, ":var_0", 1),
    (party_get_slot, ":var_1", ":var_0", slot_center_player_relation),
    (party_get_slot, ":var_2", ":var_0", slot_center_culture),
    (party_get_slot, ":var_3", ":var_0", slot_center_original_faction),
    (store_faction_of_party, ":var_4", ":var_0"),
    (call_script, "script_get_orig_culture", ":var_3", ":var_4", ":var_2"),
    (assign, ":var_2", reg0),
    (try_begin),
        (neg|eq, "$players_kingdom", 30),
        (eq, ":var_2", 11),
        (party_get_slot, ":var_2", ":var_0", slot_center_culture),
    (try_end),
    (try_begin),
        (party_slot_eq, ":var_0", slot_party_type, 3),
        (faction_get_slot, ":var_5", ":var_2", 100),
    (else_try),
        (party_slot_eq, ":var_0", slot_party_type, 2),
        (faction_get_slot, ":var_5", ":var_2", 101),
    (else_try),
        (faction_get_slot, ":var_5", ":var_2", slot_faction_quick_battle_tier_1_infantry),
    (try_end),
    (assign, ":var_6", 1),
    (store_div, ":var_7", ":var_1", 10),
    (try_for_range, ":var_8", 0, ":var_7"),
        (store_random_in_range, ":var_9", 0, 100),
        (neg|ge, ":var_9", 10),
        (store_random_in_range, ":var_9", 0, 2),
        (troop_get_upgrade_troop, ":var_10", ":var_5", ":var_9"),
        (try_begin),
            (neg|gt, ":var_10", 0),
            (troop_get_upgrade_troop, ":var_10", ":var_5", 0),
        (try_end),
        (gt, ":var_10", 0),
        (val_add, ":var_6", 1),
        (assign, ":var_5", ":var_10"),
    (try_end),
    (assign, ":var_11", 14),
    (try_begin),
        (ge, ":var_1", 5),
        (assign, ":var_11", ":var_1"),
        (val_div, ":var_11", 2),
        (val_add, ":var_11", 10),
    (else_try),
        (neg|ge, ":var_1", 0),
        (assign, ":var_11", 0),
    (try_end),
    (val_mul, ":var_11", 3),
    (store_add, ":var_12", 2, ":var_6"),
    (val_div, ":var_11", ":var_12"),
    (store_random_in_range, ":var_13", 0, ":var_11"),
    (party_set_slot, ":var_0", slot_center_volunteer_troop_type, ":var_5"),
    (party_set_slot, ":var_0", slot_center_volunteer_troop_amount, ":var_13"),

]),

("update_npc_volunteer_troops_in_village",
[
    (store_script_param, ":var_0", 1),
    (call_script, "script_select_mercenary_troop", ":var_0"),
    (assign, ":var_1", reg0),
    (assign, ":var_2", 12),
    (store_random_in_range, ":var_3", 0, ":var_2"),
    (party_set_slot, ":var_0", 88, ":var_1"),
    (party_set_slot, ":var_0", 89, ":var_3"),

]),

("update_companion_candidates_in_taverns",
[
    (try_begin),
        (eq, "$cheat_mode", 1),
        (display_message, "str_shuffling_companion_locations"),
    (try_end),
    (try_for_range, ":var_0", "trp_npc1", "trp_kingdom_1_lord"),
        (neg|troop_slot_eq, ":var_0", 400, 1),
        (troop_set_slot, ":var_0", slot_troop_cur_center, -1),
        (troop_slot_eq, ":var_0", slot_troop_current_mission, 0),
        (troop_slot_eq, ":var_0", slot_troop_occupation, 0),
        (neg|troop_slot_ge, ":var_0", slot_troop_prisoner_of_party, 0),
        (store_random_in_range, ":var_1", "p_town_1_1", "p_castle_1_1"),
        (try_begin),
            (neg|troop_slot_eq, ":var_0", slot_troop_home, ":var_1"),
            (neg|troop_slot_eq, ":var_0", slot_troop_first_encountered, ":var_1"),
            (troop_set_slot, ":var_0", slot_troop_cur_center, ":var_1"),
            (try_begin),
                (eq, "$cheat_mode", 1),
                (str_store_troop_name, s4, ":var_0"),
                (str_store_party_name, s5, ":var_1"),
                (display_message, "@{!}{s4} is in {s5}"),
            (try_end),
        (try_end),
    (try_end),

]),

("update_ransom_brokers",
[
    (try_for_range, ":var_0", "p_town_1_1", "p_castle_1_1"),
        (party_set_slot, ":var_0", slot_center_ransom_broker, 0),
    (try_end),
    (try_for_range, ":var_1", "trp_ransom_broker_1", "trp_tavern_traveler_1"),
        (store_random_in_range, ":var_0", "p_town_1_1", "p_castle_1_1"),
        (party_set_slot, ":var_0", slot_center_ransom_broker, ":var_1"),
    (try_end),

]),

("update_tavern_travellers",
[
    (try_for_range, ":var_0", "p_town_1_1", "p_castle_1_1"),
        (party_set_slot, ":var_0", slot_center_tavern_traveler, 0),
    (try_end),
    (try_for_range, ":var_1", "trp_tavern_traveler_1", "trp_tavern_bookseller_1"),
        (store_random_in_range, ":var_0", "p_town_1_1", "p_castle_1_1"),
        (party_set_slot, ":var_0", slot_center_tavern_traveler, ":var_1"),
        (assign, ":var_2", 15),
        (try_for_range, ":var_3", 0, ":var_2"),
            (store_random_in_range, ":var_4", "fac_player_supporters_faction", "fac_kingdoms_end"),
            (faction_slot_eq, ":var_4", slot_faction_state, 0),
            (neg|eq, ":var_4", "$players_kingdom"),
            (neg|eq, ":var_4", "fac_player_supporters_faction"),
            (party_set_slot, ":var_0", slot_center_traveler_info_faction, ":var_4"),
            (assign, ":var_2", 0),
        (try_end),
    (try_end),
    (troop_set_slot, "trp_belligerent_drunk", slot_troop_cur_center, "p_town_1_1"),

]),

("update_villages_infested_by_bandits",
[
    (try_for_range, ":var_0", "p_village_1_1", "p_salt_mine"),
        (try_begin),
            (check_quest_active, "qst_eliminate_bandits_infesting_village"),
            (quest_slot_eq, "qst_eliminate_bandits_infesting_village", 1, ":var_0"),
            (quest_get_slot, ":var_1", "qst_eliminate_bandits_infesting_village", 11),
            (val_add, ":var_1", 1),
            (try_begin),
                (neg|ge, ":var_1", 3),
                (quest_set_slot, "qst_eliminate_bandits_infesting_village", 11, ":var_1"),
            (else_try),
                (party_set_slot, ":var_0", slot_village_infested_by_bandits, 0),
                (call_script, "script_abort_quest", "qst_eliminate_bandits_infesting_village", 2),
            (try_end),
        (else_try),
            (check_quest_active, "qst_deal_with_bandits_at_lords_village"),
            (quest_slot_eq, "qst_deal_with_bandits_at_lords_village", 1, ":var_0"),
            (quest_get_slot, ":var_1", "qst_deal_with_bandits_at_lords_village", 11),
            (val_add, ":var_1", 1),
            (try_begin),
                (neg|ge, ":var_1", 3),
                (quest_set_slot, "qst_deal_with_bandits_at_lords_village", 11, ":var_1"),
            (else_try),
                (party_set_slot, ":var_0", slot_village_infested_by_bandits, 0),
                (call_script, "script_abort_quest", "qst_deal_with_bandits_at_lords_village", 2),
            (try_end),
        (else_try),
            (party_set_slot, ":var_0", slot_village_infested_by_bandits, 0),
            (store_random_in_range, ":var_2", 0, 100),
            (assign, ":var_3", 1),
            (try_begin),
                (check_quest_active, "qst_collect_taxes"),
                (quest_slot_eq, "qst_collect_taxes", 1, ":var_0"),
                (assign, ":var_3", 0),
            (else_try),
                (check_quest_active, "qst_train_peasants_against_bandits"),
                (quest_slot_eq, "qst_train_peasants_against_bandits", 1, ":var_0"),
                (assign, ":var_3", 0),
            (try_end),
            (eq, ":var_3", 1),
            (neg|ge, ":var_2", 3),
            (store_random_in_range, ":var_2", 0, 3),
            (try_begin),
                (eq, ":var_2", 0),
                (assign, ":var_4", "trp_bandit"),
            (else_try),
                (eq, ":var_2", 1),
                (assign, ":var_4", "trp_mountain_bandit"),
            (else_try),
                (assign, ":var_4", "trp_forest_bandit"),
            (try_end),
            (party_set_slot, ":var_0", slot_village_infested_by_bandits, ":var_4"),
            (call_script, "script_change_center_prosperity", ":var_0", -1),
            (val_add, "$newglob_total_prosperity_from_bandits", -1),
            (try_begin),
                (eq, "$cheat_mode", 2),
                (str_store_party_name, s1, ":var_0"),
                (display_message, "@{!}DEBUG --{s1} is infested by bandits."),
            (try_end),
        (try_end),
    (try_end),

]),

("update_booksellers",
[
    (try_for_range, ":var_0", "p_town_1_1", "p_castle_1_1"),
        (party_set_slot, ":var_0", slot_center_tavern_bookseller, 0),
    (try_end),
    (try_for_range, ":var_1", "trp_tavern_bookseller_1", "trp_tavern_minstrel_1"),
        (store_random_in_range, ":var_0", "p_town_1_1", "p_castle_1_1"),
        (party_set_slot, ":var_0", slot_center_tavern_bookseller, ":var_1"),
    (try_end),

]),

("update_tavern_minstrels",
[
    (try_for_range, ":var_0", "p_town_1_1", "p_castle_1_1"),
        (party_set_slot, ":var_0", slot_center_tavern_minstrel, 0),
    (try_end),
    (try_for_range, ":var_1", "trp_tavern_minstrel_1", "trp_kingdom_heroes_including_player_begin"),
        (store_random_in_range, ":var_0", "p_town_1_1", "p_castle_1_1"),
        (party_set_slot, ":var_0", slot_center_tavern_minstrel, ":var_1"),
        (try_begin),
            (eq, "$cheat_mode", 1),
            (str_store_troop_name, s4, ":var_1"),
            (str_store_party_name, s5, ":var_0"),
            (display_message, "str_s4_is_at_s5"),
        (try_end),
    (try_end),

]),

("update_other_taverngoers",
[
    (store_random_in_range, ":var_0", "p_town_1_1", "p_castle_1_1"),
    (troop_set_slot, "trp_fight_promoter", slot_troop_cur_center, ":var_0"),
    (store_random_in_range, ":var_1", "p_town_1_1", "p_castle_1_1"),
    (troop_set_slot, "trp_belligerent_drunk", slot_troop_cur_center, ":var_1"),

]),

("update_faction_notes",
[
    (store_script_param, ":var_0", 1),
    (try_begin),
        (this_or_next|faction_slot_eq, ":var_0", slot_faction_state, 2),
        (eq, ":var_0", "fac_player_faction"),
        (faction_set_note_available, ":var_0", 0),
    (else_try),
        (faction_set_note_available, ":var_0", 1),
    (try_end),

]),

("update_faction_political_notes",
[
    (store_script_param, ":var_0", 1),
    (call_script, "script_evaluate_realm_stability", ":var_0"),
    (add_faction_note_from_sreg, ":var_0", 2, "str_instability_reg0_of_lords_are_disgruntled_reg1_are_restless", 0),

]),

("update_faction_traveler_notes",
[
    (store_script_param, ":var_0", 1),
    (assign, ":var_1", 0),
    (try_for_parties, ":var_2"),
        (store_faction_of_party, ":var_3", ":var_2"),
        (eq, ":var_3", ":var_0"),
        (party_get_num_companions, ":var_4", ":var_2"),
        (val_add, ":var_1", ":var_4"),
    (try_end),
    (str_store_faction_name, s5, ":var_0"),
    (assign, reg1, ":var_1"),
    (add_faction_note_from_sreg, ":var_0", 1, "@{s5} has a strength of {reg1} men in total.", 1),

]),

("update_troop_notes",
[

]),

("update_troop_location_notes",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (try_begin),
        (call_script, "script_get_information_about_troops_position", ":var_0", 1),
        (neg|eq, reg0, 0),
        (call_script, "script_search_troop_prisoner_of_party", ":var_0"),
        (eq, reg0, -1),
        (troop_get_type, reg1, ":var_0"),
        (try_begin),
            (eq, ":var_1", 0),
            (add_troop_note_from_sreg, ":var_0", 2, "@The last time you saw {reg1?her:him}, {s1}", 1),
        (else_try),
            (add_troop_note_from_sreg, ":var_0", 2, "@The last time you heard about {reg1?her:him}, {s1}", 1),
        (try_end),
    (try_end),

]),

("update_troop_location_notes_prisoned",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (troop_get_type, reg1, ":var_0"),
    (str_store_faction_name_link, s1, ":var_1"),
    (add_troop_note_from_sreg, ":var_0", 2, "str_reg1shehe_is_prisoner_of_s1", 1),

]),

("update_troop_political_notes",
[
    (store_script_param, ":var_0", 1),
    (try_begin),
        (str_clear, s47),
        (store_troop_faction, ":var_1", ":var_0"),
        (faction_get_slot, ":var_2", ":var_1", slot_faction_leader),
        (str_clear, s40),
        (assign, ":var_3", 0),
        (try_for_range, ":var_4", "trp_npc1", "trp_knight_1_1_wife"),
            (call_script, "script_troop_get_relation_with_troop", ":var_0", ":var_4"),
            (neg|ge, reg0, -10),
            (str_store_troop_name_link, s39, ":var_4"),
            (try_begin),
                (eq, ":var_3", 0),
                (str_store_string, s40, "str_s39_rival"),
                (assign, ":var_3", 1),
            (else_try),
                (str_store_string, s41, "str_s40"),
                (str_store_string, s40, "str_s41_s39_rival"),
            (try_end),
        (try_end),
        (str_clear, s46),
        (try_begin),
            (ge, "$cheat_mode", 1),
            (try_begin),
                (troop_slot_eq, ":var_0", slot_lord_reputation_type, 1),
                (str_store_string, s46, "str_reputation_cheat_mode_only_martial_"),
            (else_try),
                (troop_slot_eq, ":var_0", slot_lord_reputation_type, 5),
                (str_store_string, s46, "str_reputation_cheat_mode_only_debauched_"),
            (else_try),
                (troop_slot_eq, ":var_0", slot_lord_reputation_type, 3),
                (str_store_string, s46, "str_reputation_cheat_mode_only_pitiless_"),
            (else_try),
                (troop_slot_eq, ":var_0", slot_lord_reputation_type, 4),
                (str_store_string, s46, "str_reputation_cheat_mode_only_calculating_"),
            (else_try),
                (troop_slot_eq, ":var_0", slot_lord_reputation_type, 2),
                (str_store_string, s46, "str_reputation_cheat_mode_only_quarrelsome_"),
            (else_try),
                (troop_slot_eq, ":var_0", slot_lord_reputation_type, 6),
                (str_store_string, s46, "str_reputation_cheat_mode_only_goodnatured_"),
            (else_try),
                (troop_slot_eq, ":var_0", slot_lord_reputation_type, 7),
                (str_store_string, s46, "str_reputation_cheat_mode_only_upstanding_"),
            (else_try),
                (troop_slot_eq, ":var_0", slot_lord_reputation_type, 21),
                (str_store_string, s46, "str_reputation_cheat_mode_only_conventional_"),
            (else_try),
                (troop_slot_eq, ":var_0", slot_lord_reputation_type, 22),
                (str_store_string, s46, "str_reputation_cheat_mode_only_adventurous_"),
            (else_try),
                (troop_slot_eq, ":var_0", slot_lord_reputation_type, 23),
                (str_store_string, s46, "str_reputation_cheat_mode_only_romantic_"),
            (else_try),
                (troop_slot_eq, ":var_0", slot_lord_reputation_type, 25),
                (str_store_string, s46, "str_reputation_cheat_mode_only_moralist_"),
            (else_try),
                (troop_slot_eq, ":var_0", slot_lord_reputation_type, 24),
                (str_store_string, s46, "str_reputation_cheat_mode_only_ambitious_"),
            (else_try),
                (troop_get_slot, reg11, ":var_0", slot_lord_reputation_type),
                (str_store_string, s46, "str_reputation_cheat_mode_only_reg11_"),
            (try_end),
            (try_begin),
                (eq, "$cheat_mode", 1),
                (try_for_range, ":var_5", 35, 38),
                    (troop_get_slot, ":var_6", ":var_0", ":var_5"),
                    (is_between, ":var_6", "trp_knight_1_1_wife", "trp_heroes_end"),
                    (str_store_troop_name_link, s39, ":var_6"),
                    (call_script, "script_troop_get_relation_with_troop", ":var_0", ":var_6"),
                    (str_store_string, s2, "str_love_interest"),
                    (try_begin),
                        (troop_slot_eq, ":var_0", slot_troop_betrothed, ":var_6"),
                        (str_store_string, s2, "str_betrothed"),
                    (try_end),
                    (str_store_string, s40, "str_s40_s39_s2_reg0"),
                (try_end),
            (try_end),
        (try_end),
        (str_store_string, s45, "str_other_relations_s40_"),
        (str_clear, s44),
        (try_begin),
            (neg|eq, ":var_0", ":var_2"),
            (call_script, "script_troop_get_relation_with_troop", ":var_0", ":var_2"),
            (str_store_string, s44, "str_relation_with_liege_reg0_"),
        (try_end),
        (str_clear, s48),
        (try_begin),
            (eq, "$cheat_mode", 1),
            (store_current_hours, ":var_7"),
            (gt, ":var_7", 0),
            (call_script, "script_calculate_troop_political_factors_for_liege", ":var_0", ":var_2"),
            (str_store_string, s48, "str_sense_of_security_military_reg1_court_position_reg3_"),
        (try_end),
        (str_store_string, s47, "str_s46s45s44s48"),
        (add_troop_note_from_sreg, ":var_0", 3, "str_political_details_s47_", 1),
    (try_end),

]),

("update_center_notes",
[

]),

("update_center_recon_notes",
[
    (store_script_param, ":var_0", 1),
    (try_begin),
        (this_or_next|is_between, ":var_0", "p_town_1_1", "p_castle_1_1"),
        (is_between, ":var_0", "p_castle_1_1", "p_village_1_1"),
        (party_get_slot, ":var_1", ":var_0", slot_party_food_store),
        (call_script, "script_center_get_food_consumption", ":var_0"),
        (assign, ":var_2", reg0),
        (store_div, reg6, ":var_1", ":var_2"),
        (party_collect_attachments_to_party, ":var_0", "p_collective_ally"),
        (party_get_num_companions, reg5, "p_collective_ally"),
        (add_party_note_from_sreg, ":var_0", 1, "@Current garrison consists of {reg5} men.^Has food stock for {reg6} days.", 1),
    (try_end),

]),

("update_all_notes",
[
    (call_script, "script_update_troop_notes", "trp_player"),
    (try_for_range, ":var_0", "trp_npc1", "trp_knight_1_1_wife"),
        (this_or_next|troop_slot_eq, ":var_0", slot_troop_occupation, 2),
        (this_or_next|troop_slot_eq, ":var_0", slot_troop_occupation, 6),
        (troop_slot_eq, ":var_0", slot_troop_occupation, 9),
        (call_script, "script_update_troop_notes", ":var_0"),
    (try_end),
    (try_for_range, ":var_1", "p_town_1_1", "p_salt_mine"),
        (call_script, "script_update_center_notes", ":var_1"),
    (try_end),
    (try_for_range, ":var_2", "fac_player_supporters_faction", "fac_kingdoms_end"),
        (call_script, "script_update_faction_notes", ":var_2"),
    (try_end),

]),

("agent_troop_get_banner_mesh",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (assign, ":var_2", -1),
    (assign, ":var_3", "mesh_banners_default_b"),
    (try_begin),
        (neg|ge, ":var_0", 0),
        (try_begin),
            (ge, ":var_1", 0),
            (this_or_next|troop_slot_ge, ":var_1", slot_troop_banner_scene_prop, 1),
            (eq, ":var_1", "trp_player"),
            (assign, ":var_2", ":var_1"),
        (else_try),
            (is_between, ":var_1", "trp_npc1", "trp_kingdom_1_lord"),
            (assign, ":var_2", "trp_player"),
        (else_try),
            (assign, ":var_3", "mesh_banners_default_a"),
        (try_end),
    (else_try),
        (eq, "$g_is_quick_battle", 1),
        (agent_get_team, ":var_4", ":var_0"),
        (try_begin),
            (eq, ":var_4", 0),
            (assign, ":var_3", "$g_quick_battle_team_0_banner"),
        (else_try),
            (assign, ":var_3", "$g_quick_battle_team_1_banner"),
        (try_end),
    (else_try),
        (game_in_multiplayer_mode),
        (agent_get_group, ":var_5", ":var_0"),
        (try_begin),
            (neg|player_is_active, ":var_5"),
            (agent_get_player_id, ":var_5", ":var_0"),
        (try_end),
        (try_begin),
            (eq, "$g_multiplayer_allow_player_banners", 1),
            (player_is_active, ":var_5"),
            (player_get_banner_id, ":var_6", ":var_5"),
            (ge, ":var_6", 0),
            (store_add, ":var_3", ":var_6", "mesh_arms_a01"),
            (assign, ":var_7", 0),
            (try_for_range, ":var_8", "fac_kingdom_1", "fac_kingdoms_end"),
                (faction_slot_eq, ":var_8", slot_faction_banner, ":var_3"),
                (assign, ":var_7", 1),
            (try_end),
            (eq, ":var_7", 0),
        (else_try),
            (agent_get_team, ":var_4", ":var_0"),
            (team_get_faction, ":var_9", ":var_4"),
            (try_begin),
                (agent_is_human, ":var_0"),
                (faction_get_slot, ":var_3", ":var_9", slot_faction_banner),
            (else_try),
                (agent_get_rider, ":var_10", ":var_0"),
                (try_begin),
                    (ge, ":var_10", 0),
                    (agent_is_active, ":var_10"),
                    (agent_get_team, ":var_11", ":var_10"),
                    (team_get_faction, ":var_12", ":var_11"),
                    (faction_get_slot, ":var_3", ":var_12", slot_faction_banner),
                (else_try),
                    (assign, ":var_3", "mesh_banners_default_c"),
                (try_end),
            (try_end),
        (try_end),
    (else_try),
        (agent_get_troop_id, ":var_13", ":var_0"),
        (this_or_next|troop_slot_ge, ":var_13", slot_troop_banner_scene_prop, 1),
        (eq, ":var_1", "trp_player"),
        (assign, ":var_2", ":var_13"),
    (else_try),
        (agent_get_party_id, ":var_14", ":var_0"),
        (try_begin),
            (neg|ge, ":var_14", 0),
            (is_between, ":var_13", "trp_npc1", "trp_kingdom_1_lord"),
            (main_party_has_troop, ":var_13"),
            (assign, ":var_14", "p_main_party"),
        (try_end),
        (ge, ":var_14", 0),
        (party_get_template_id, ":var_15", ":var_14"),
        (try_begin),
            (eq, ":var_15", "pt_deserters"),
            (assign, ":var_3", "mesh_banners_default_c"),
        (else_try),
            (is_between, ":var_14", "p_town_1_1", "p_salt_mine"),
            (is_between, ":var_13", "trp_npc1", "trp_kingdom_1_lord"),
            (neg|eq, "$talk_context", 14),
            (assign, ":var_2", "trp_player"),
        (else_try),
            (is_between, ":var_14", "p_town_1_1", "p_salt_mine"),
            (party_get_slot, ":var_16", "$g_encountered_party", slot_town_lord),
            (ge, ":var_16", 0),
            (assign, ":var_2", ":var_16"),
        (else_try),
            (this_or_next|party_slot_eq, ":var_14", slot_party_type, 13),
            (eq, ":var_14", "p_main_party"),
            (party_get_num_companion_stacks, ":var_17", ":var_14"),
            (gt, ":var_17", 0),
            (party_stack_get_troop_id, ":var_18", ":var_14", 0),
            (this_or_next|troop_slot_ge, ":var_18", slot_troop_banner_scene_prop, 1),
            (eq, ":var_18", "trp_player"),
            (assign, ":var_2", ":var_18"),
        (try_end),
    (else_try),
        (eq, "$talk_context", 14),
        (neg|eq, ":var_1", "trp_player"),
        (assign, ":var_3", "mesh_banners_default_d"),
    (else_try),
        (neg|eq, ":var_1", "trp_player"),
        (is_between, "$g_encountered_party", "p_town_1_1", "p_village_1_1"),
        (party_get_slot, ":var_16", "$g_encountered_party", slot_town_lord),
        (ge, ":var_16", 0),
        (assign, ":var_2", ":var_16"),
    (try_end),
    (try_begin),
        (neg|eq, ":var_1", "trp_player"),
        (neg|is_between, ":var_1", "trp_templar_half_brother", "trp_mercenaries_end"),
        (ge, ":var_0", 0),
        (agent_get_party_id, ":var_14", ":var_0"),
        (ge, ":var_14", 0),
        (party_get_template_id, ":var_15", ":var_14"),
        (try_begin),
            (this_or_next|eq, ":var_15", "pt_patrol_party"),
            (eq, ":var_15", "pt_kingdom_caravan_party"),
            (party_get_slot, ":var_19", ":var_14", slot_party_home_center),
            (party_get_slot, ":var_16", ":var_19", slot_town_lord),
            (ge, ":var_16", 0),
            (assign, ":var_2", ":var_16"),
        (else_try),
            (eq, ":var_15", "pt_guelphs"),
            (assign, ":var_3", "mesh_banner_a20"),
            (assign, ":var_2", -1),
        (else_try),
            (eq, ":var_15", "pt_ghibellines"),
            (assign, ":var_3", "mesh_banner_a19"),
            (assign, ":var_2", -1),
        (else_try),
            (this_or_next|eq, ":var_15", "pt_crusaders"),
            (eq, ":var_15", "pt_crusader_raiders"),
            (store_random_in_range, ":var_20", 0, 2),
            (assign, ":var_2", -1),
            (try_begin),
                (eq, ":var_20", 0),
                (assign, ":var_3", "mesh_banner_f21"),
            (else_try),
                (store_random_in_range, ":var_3", "mesh_banner_x17", "mesh_banner_x19"),
            (try_end),
        (try_end),
    (else_try),
        (try_begin),
            (eq, ":var_1", "trp_player"),
            (gt, "$freelancer_state", 0),
            (assign, ":var_1", "$player_cur_troop"),
        (try_end),
        (is_between, ":var_1", "trp_templar_half_brother", "trp_mercenaries_end"),
        (try_begin),
            (is_between, ":var_1", "trp_templar_half_brother", "trp_hospitaller_half_brother"),
            (assign, ":var_3", "mesh_banner_x18"),
            (assign, ":var_2", -1),
        (else_try),
            (is_between, ":var_1", "trp_hospitaller_half_brother", "trp_saint_lazarus_half_brother"),
            (assign, ":var_3", "mesh_banner_x17"),
            (assign, ":var_2", -1),
        (else_try),
            (is_between, ":var_1", "trp_saint_lazarus_half_brother", "trp_santiago_half_brother"),
            (assign, ":var_3", "mesh_banner_o07"),
            (assign, ":var_2", -1),
        (else_try),
            (is_between, ":var_1", "trp_santiago_half_brother", "trp_calatrava_half_brother"),
            (assign, ":var_3", "mesh_banner_e21"),
            (assign, ":var_2", -1),
        (else_try),
            (is_between, ":var_1", "trp_calatrava_half_brother", "trp_saint_thomas_half_brother"),
            (assign, ":var_3", "mesh_banner_e18"),
            (assign, ":var_2", -1),
        (else_try),
            (is_between, ":var_1", "trp_saint_thomas_half_brother", "trp_varangian_guard"),
            (assign, ":var_3", "mesh_banner_o08"),
            (assign, ":var_2", -1),
        (try_end),
    (try_end),
    (try_begin),
        (ge, ":var_2", 0),
        (try_begin),
            (neg|troop_slot_ge, ":var_2", slot_troop_banner_scene_prop, 1),
            (assign, ":var_3", "mesh_banners_default_b"),
        (else_try),
            (troop_get_slot, ":var_21", ":var_2", slot_troop_banner_scene_prop),
            (store_add, ":var_22", "spr_banner_x21", 1),
            (is_between, ":var_21", "spr_banner_a", ":var_22"),
            (val_sub, ":var_21", "spr_banner_a"),
            (store_add, ":var_3", ":var_21", "mesh_arms_a01"),
        (try_end),
    (try_end),
    (assign, reg0, ":var_3"),

]),

("shield_item_set_banner_old",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (call_script, "script_agent_troop_get_banner_mesh", ":var_1", ":var_2"),
    (cur_item_set_tableau_material, ":var_0", reg0),

]),

("shield_item_set_banner",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (try_begin),
        (eq, "$historical_banners", 1),
        (call_script, "script_agent_troop_get_historical_mesh", ":var_1", ":var_2"),
    (else_try),
        (call_script, "script_agent_troop_get_banner_mesh", ":var_1", ":var_2"),
    (try_end),
    (cur_item_set_tableau_material, ":var_0", reg0),

]),

("troop_agent_set_banner",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (call_script, "script_agent_troop_get_banner_mesh", ":var_1", ":var_2"),
    (cur_agent_set_banner_tableau_material, ":var_0", reg0),

]),

("agent_troop_get_historical_mesh",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (assign, ":var_2", -1),
    (try_begin),
        (ge, ":var_0", 0),
        (agent_get_item_slot, ":var_3", ":var_0", 5),
        (gt, ":var_3", 0),
        (item_get_slot, ":var_4", ":var_3", 222),
    (try_end),
    (store_random_in_range, ":var_5", 0, 3),
    (try_begin),
        (eq, ":var_1", "trp_player"),
        (neg|eq, "$randomize_player_shield", 1),
        (assign, ":var_6", "mesh_banners_default_b"),
    (else_try),
        (gt, ":var_4", 0),
        (assign, ":var_6", ":var_4"),
    (else_try),
        (neg|eq, ":var_5", 0),
        (store_random_in_range, ":var_6", "mesh_banner_t15", "mesh_banner_u01"),
    (else_try),
        (store_random_in_range, ":var_6", "mesh_banners_default_a", "mesh_troop_label_banner"),
    (try_end),
    (try_begin),
        (ge, ":var_1", 0),
        (troop_slot_ge, ":var_1", slot_troop_banner_scene_prop, 1),
        (assign, ":var_2", ":var_1"),
    (else_try),
        (assign, ":var_7", 0),
        (try_begin),
            (gt, "$freelancer_state", 0),
            (is_between, "$player_cur_troop", "trp_teu_village_recruit", "trp_tatar_tribesman"),
            (neg|is_between, "$player_cur_troop", "trp_teu_balt_1", "trp_teu_ger_1"),
            (assign, ":var_7", 1),
        (try_end),
        (this_or_next|eq, ":var_7", 1),
        (is_between, ":var_1", "trp_teu_village_recruit", "trp_tatar_tribesman"),
        (try_begin),
            (is_between, ":var_1", "trp_teu_horse_1", "trp_tatar_tribesman"),
            (store_random_in_range, ":var_6", "mesh_banner_q01", "mesh_banner_r01"),
        (else_try),
            (store_random_in_range, ":var_5", 0, 2),
            (eq, ":var_5", 0),
            (store_random_in_range, ":var_6", "mesh_banner_q01", "mesh_banner_r01"),
        (try_end),
    (else_try),
        (assign, ":var_7", 0),
        (try_begin),
            (gt, "$freelancer_state", 0),
            (is_between, "$player_cur_troop", "trp_templar_half_brother", "trp_mercenaries_end"),
            (assign, ":var_7", 1),
        (try_end),
        (this_or_next|eq, ":var_7", 1),
        (is_between, ":var_1", "trp_templar_half_brother", "trp_mercenaries_end"),
        (try_begin),
            (is_between, ":var_1", "trp_templar_half_brother", "trp_hospitaller_half_brother"),
            (assign, ":var_6", "mesh_banner_x18"),
            (assign, ":var_2", -1),
        (else_try),
            (is_between, ":var_1", "trp_hospitaller_half_brother", "trp_saint_lazarus_half_brother"),
            (assign, ":var_6", "mesh_banner_x17"),
            (assign, ":var_2", -1),
        (else_try),
            (is_between, ":var_1", "trp_saint_lazarus_half_brother", "trp_santiago_half_brother"),
            (assign, ":var_6", "mesh_banner_o07"),
            (assign, ":var_2", -1),
        (else_try),
            (is_between, ":var_1", "trp_santiago_half_brother", "trp_calatrava_half_brother"),
            (assign, ":var_6", "mesh_banner_e21"),
            (assign, ":var_2", -1),
        (else_try),
            (is_between, ":var_1", "trp_calatrava_half_brother", "trp_saint_thomas_half_brother"),
            (assign, ":var_6", "mesh_banner_e18"),
            (assign, ":var_2", -1),
        (else_try),
            (is_between, ":var_1", "trp_saint_thomas_half_brother", "trp_varangian_guard"),
            (assign, ":var_6", "mesh_banner_o08"),
            (assign, ":var_2", -1),
        (try_end),
    (else_try),
        (gt, ":var_0", 0),
        (agent_get_party_id, ":var_8", ":var_0"),
        (ge, ":var_8", 0),
        (party_get_template_id, ":var_9", ":var_8"),
        (this_or_next|eq, ":var_9", "pt_crusaders"),
        (eq, ":var_9", "pt_crusader_raiders"),
        (store_random_in_range, ":var_5", 0, 2),
        (assign, ":var_2", -1),
        (try_begin),
            (eq, ":var_5", 0),
            (assign, ":var_6", "mesh_banner_f21"),
        (else_try),
            (store_random_in_range, ":var_6", "mesh_banner_x17", "mesh_banner_x19"),
        (try_end),
    (try_end),
    (try_begin),
        (ge, ":var_2", 0),
        (troop_slot_ge, ":var_2", slot_troop_banner_scene_prop, 1),
        (try_begin),
            (troop_get_slot, ":var_10", ":var_2", slot_troop_banner_scene_prop),
            (store_add, ":var_11", "spr_banner_x21", 1),
            (is_between, ":var_10", "spr_banner_a", ":var_11"),
            (val_sub, ":var_10", "spr_banner_a"),
            (store_add, ":var_6", ":var_10", "mesh_arms_a01"),
        (try_end),
    (try_end),
    (try_begin),
        (neg|is_between, ":var_6", "mesh_banner_a01", "mesh_troop_label_banner"),
        (store_random_in_range, ":var_6", "mesh_banner_t15", "mesh_banner_u01"),
    (try_end),
    (assign, reg0, ":var_6"),

]),

("initialize_item_banners",
[
    (item_set_slot, "itm_rnd_surcoat_01", 222, "mesh_banner_h06"),
    (item_set_slot, "itm_rnd_surcoat_02", 222, "mesh_banner_b01"),
    (item_set_slot, "itm_rnd_surcoat_03", 222, "mesh_banner_g06"),
    (item_set_slot, "itm_rnd_surcoat_04", 222, "mesh_banner_f17"),
    (item_set_slot, "itm_rnd_surcoat_05", 222, "mesh_banner_h11"),
    (item_set_slot, "itm_rnd_surcoat_06", 222, "mesh_banner_s21"),
    (item_set_slot, "itm_rnd_surcoat_07", 222, "mesh_banner_s02"),
    (item_set_slot, "itm_rnd_surcoat_08", 222, "mesh_banner_h05"),
    (item_set_slot, "itm_rnd_surcoat_09", 222, "mesh_banner_t03"),
    (item_set_slot, "itm_rnd_surcoat_10", 222, "mesh_banner_f05"),
    (item_set_slot, "itm_rnd_surcoat_11", 222, "mesh_banner_v13"),
    (item_set_slot, "itm_rnd_surcoat_12", 222, "mesh_banner_b01"),
    (item_set_slot, "itm_rnd_surcoat_13", 222, "mesh_banner_s04"),
    (item_set_slot, "itm_rnd_surcoat_14", 222, "mesh_banner_c17"),
    (item_set_slot, "itm_rnd_surcoat_15", 222, "mesh_banner_u13"),
    (item_set_slot, "itm_rnd_surcoat_16", 222, "mesh_banner_e05"),
    (item_set_slot, "itm_rnd_surcoat_17", 222, "mesh_banner_i16"),
    (item_set_slot, "itm_rnd_surcoat_18", 222, "mesh_banner_g05"),
    (item_set_slot, "itm_rnd_surcoat_19", 222, "mesh_banner_b19"),
    (item_set_slot, "itm_rnd_surcoat_20", 222, "mesh_banner_r02"),
    (item_set_slot, "itm_rnd_surcoat_21", 222, "mesh_banner_v02"),
    (item_set_slot, "itm_rnd_surcoat_22", 222, "mesh_banner_v06"),
    (item_set_slot, "itm_rnd_surcoat_23", 222, "mesh_banner_e11"),

]),

("add_troop_to_cur_tableau",
[
    (store_script_param, ":var_0", 1),
    (set_fixed_point_multiplier, 100),
    (assign, ":var_1", -1),
    (troop_get_slot, ":var_2", ":var_0", slot_troop_banner_scene_prop),
    (store_add, ":var_3", "spr_banner_x21", 1),
    (try_begin),
        (is_between, ":var_2", "spr_banner_a", ":var_3"),
        (val_sub, ":var_2", "spr_banner_a"),
        (store_add, ":var_1", ":var_2", "mesh_banner_a01"),
    (try_end),
    (cur_tableau_clear_override_items),
    (cur_tableau_set_override_flags, 31),
    (init_position, pos2),
    (cur_tableau_set_camera_parameters, 1, 6, 6, 10, 10000),
    (init_position, pos5),
    (assign, ":var_4", 162),
    (store_mul, ":var_5", ":var_0", 87323),
    (assign, ":var_5", 139),
    (store_mul, ":var_6", ":var_0", 124337),
    (val_mod, ":var_6", 50),
    (val_add, ":var_6", -25),
    (store_mul, ":var_7", ":var_0", 98123),
    (val_mod, ":var_7", 20),
    (val_add, ":var_7", -14),
    (assign, ":var_8", "anim_stand_man"),
    (position_set_z, pos5, ":var_4"),
    (position_rotate_x, pos5, -90),
    (position_rotate_z, pos5, 180),
    (position_rotate_y, pos5, ":var_6"),
    (position_rotate_x, pos5, ":var_7"),
    (position_move_z, pos5, ":var_5", 0),
    (position_move_x, pos5, 5, 0),
    (try_begin),
        (ge, ":var_1", 0),
        (init_position, pos1),
        (position_set_z, pos1, -1500),
        (position_set_x, pos1, 265),
        (position_set_y, pos1, 400),
        (position_transform_position_to_parent, pos3, pos5, pos1),
        (cur_tableau_add_mesh, ":var_1", 3, 400, 0),
    (try_end),
    (cur_tableau_add_troop, ":var_0", 2, ":var_8", 0),
    (cur_tableau_set_camera_position, 5),
    (copy_position, pos8, pos5),
    (position_rotate_x, pos8, -90),
    (position_rotate_z, pos8, 30),
    (position_rotate_x, pos8, -60),
    (cur_tableau_add_sun_light, 8, 175, 150, 125),

]),

("add_troop_to_cur_tableau_for_character",
[
    (store_script_param, ":var_0", 1),
    (set_fixed_point_multiplier, 100),
    (cur_tableau_clear_override_items),
    (cur_tableau_set_override_flags, 512),
    (init_position, pos2),
    (cur_tableau_set_camera_parameters, 1, 4, 8, 10, 10000),
    (init_position, pos5),
    (assign, ":var_1", 150),
    (assign, ":var_2", 360),
    (assign, ":var_3", -15),
    (assign, ":var_4", -18),
    (assign, ":var_5", 1),
    (position_set_z, pos5, ":var_1"),
    (position_rotate_x, pos5, -90),
    (position_rotate_z, pos5, 180),
    (position_rotate_y, pos5, ":var_3"),
    (position_rotate_x, pos5, ":var_4"),
    (position_move_z, pos5, ":var_2", 0),
    (position_move_x, pos5, 5, 0),
    (try_begin),
        (troop_is_hero, ":var_0"),
        (cur_tableau_add_troop, ":var_0", 2, ":var_5", -1),
    (else_try),
        (store_mul, ":var_6", ":var_0", 126233),
        (val_mod, ":var_6", 1000),
        (val_add, ":var_6", 1),
        (cur_tableau_add_troop, ":var_0", 2, ":var_5", ":var_6"),
    (try_end),
    (cur_tableau_set_camera_position, 5),
    (copy_position, pos8, pos5),
    (position_rotate_x, pos8, -90),
    (position_rotate_z, pos8, 30),
    (position_rotate_x, pos8, -60),
    (cur_tableau_add_sun_light, 8, 175, 150, 125),

]),

("add_troop_to_cur_tableau_for_inventory",
[
    (store_script_param, ":var_0", 1),
    (store_mod, ":var_1", ":var_0", 4),
    (val_div, ":var_0", 4),
    (val_mul, ":var_1", 90),
    (set_fixed_point_multiplier, 100),
    (cur_tableau_clear_override_items),
    (init_position, pos2),
    (position_rotate_z, pos2, ":var_1"),
    (cur_tableau_set_camera_parameters, 1, 4, 6, 10, 10000),
    (init_position, pos5),
    (assign, ":var_2", 105),
    (assign, ":var_3", 380),
    (assign, ":var_4", -15),
    (assign, ":var_5", -18),
    (assign, ":var_6", 1),
    (position_set_z, pos5, ":var_2"),
    (position_rotate_x, pos5, -90),
    (position_rotate_z, pos5, 180),
    (position_rotate_y, pos5, ":var_4"),
    (position_rotate_x, pos5, ":var_5"),
    (position_move_z, pos5, ":var_3", 0),
    (position_move_x, pos5, 5, 0),
    (try_begin),
        (troop_is_hero, ":var_0"),
        (cur_tableau_add_troop, ":var_0", 2, ":var_6", -1),
    (else_try),
        (store_mul, ":var_7", ":var_0", 126233),
        (val_mod, ":var_7", 1000),
        (val_add, ":var_7", 1),
        (cur_tableau_add_troop, ":var_0", 2, ":var_6", ":var_7"),
    (try_end),
    (cur_tableau_set_camera_position, 5),
    (copy_position, pos8, pos5),
    (position_rotate_x, pos8, -90),
    (position_rotate_z, pos8, 30),
    (position_rotate_x, pos8, -60),
    (cur_tableau_add_sun_light, 8, 175, 150, 125),

]),

("add_troop_to_cur_tableau_for_profile",
[
    (store_script_param, ":var_0", 1),
    (set_fixed_point_multiplier, 100),
    (cur_tableau_clear_override_items),
    (cur_tableau_set_camera_parameters, 1, 4, 6, 10, 10000),
    (init_position, pos5),
    (assign, ":var_1", 105),
    (assign, ":var_2", 380),
    (assign, ":var_3", -15),
    (assign, ":var_4", -18),
    (assign, ":var_5", 1),
    (position_set_z, pos5, ":var_1"),
    (position_rotate_x, pos5, -90),
    (position_rotate_z, pos5, 180),
    (position_rotate_y, pos5, ":var_3"),
    (position_rotate_x, pos5, ":var_4"),
    (position_move_z, pos5, ":var_2", 0),
    (position_move_x, pos5, 5, 0),
    (profile_get_banner_id, ":var_6"),
    (try_begin),
        (ge, ":var_6", 0),
        (init_position, pos2),
        (val_add, ":var_6", "mesh_banner_a01"),
        (position_set_x, pos2, -175),
        (position_set_y, pos2, -300),
        (position_set_z, pos2, 180),
        (position_rotate_x, pos2, 90),
        (position_rotate_y, pos2, -15),
        (cur_tableau_add_mesh, ":var_6", 2, 0, 0),
    (try_end),
    (init_position, pos2),
    (try_begin),
        (troop_is_hero, ":var_0"),
        (cur_tableau_add_troop, ":var_0", 2, ":var_5", -1),
    (else_try),
        (store_mul, ":var_7", ":var_0", 126233),
        (val_mod, ":var_7", 1000),
        (val_add, ":var_7", 1),
        (cur_tableau_add_troop, ":var_0", 2, ":var_5", ":var_7"),
    (try_end),
    (cur_tableau_set_camera_position, 5),
    (copy_position, pos8, pos5),
    (position_rotate_x, pos8, -90),
    (position_rotate_z, pos8, 30),
    (position_rotate_x, pos8, -60),
    (cur_tableau_add_sun_light, 8, 175, 150, 125),

]),

("add_troop_to_cur_tableau_for_retirement",
[
    (store_script_param, ":var_0", 1),
    (cur_tableau_set_override_flags, 511),
    (try_begin),
        (eq, ":var_0", 0),
        (cur_tableau_add_override_item, "itm_pilgrim_hood"),
        (cur_tableau_add_override_item, "itm_pilgrim_disguise"),
        (cur_tableau_add_override_item, "itm_wrapping_boots"),
        (assign, ":var_1", "anim_pose_1"),
    (else_try),
        (eq, ":var_0", 1),
        (cur_tableau_add_override_item, "itm_pilgrim_hood"),
        (cur_tableau_add_override_item, "itm_wrapping_boots"),
        (cur_tableau_add_override_item, "itm_dagger"),
        (assign, ":var_1", "anim_pose_1"),
    (else_try),
        (eq, ":var_0", 2),
        (cur_tableau_add_override_item, "itm_linen_tunic"),
        (cur_tableau_add_override_item, "itm_wrapping_boots"),
        (assign, ":var_1", "anim_pose_2"),
    (else_try),
        (eq, ":var_0", 3),
        (cur_tableau_add_override_item, "itm_nomad_vest"),
        (cur_tableau_add_override_item, "itm_nomad_boots"),
        (assign, ":var_1", "anim_pose_2"),
    (else_try),
        (eq, ":var_0", 4),
        (cur_tableau_add_override_item, "itm_tunic_with_green_cape"),
        (cur_tableau_add_override_item, "itm_leather_boots"),
        (assign, ":var_1", "anim_pose_3"),
    (else_try),
        (eq, ":var_0", 5),
        (cur_tableau_add_override_item, "itm_red_shirt"),
        (cur_tableau_add_override_item, "itm_woolen_hose"),
        (cur_tableau_add_override_item, "itm_fur_hat"),
        (assign, ":var_1", "anim_pose_3"),
    (else_try),
        (eq, ":var_0", 6),
        (cur_tableau_add_override_item, "itm_gambeson_a"),
        (cur_tableau_add_override_item, "itm_leather_boots"),
        (cur_tableau_add_override_item, "itm_sword_type_xiiib"),
        (assign, ":var_1", "anim_pose_4"),
    (else_try),
        (eq, ":var_0", 7),
        (cur_tableau_add_override_item, "itm_merchant_outfit"),
        (cur_tableau_add_override_item, "itm_blue_hose"),
        (cur_tableau_add_override_item, "itm_sword_type_xiiib"),
        (assign, ":var_1", "anim_pose_4"),
    (else_try),
        (eq, ":var_0", 8),
        (cur_tableau_add_override_item, "itm_merchant_outfit"),
        (cur_tableau_add_override_item, "itm_woolen_hose"),
        (cur_tableau_add_override_item, "itm_sword_type_xiiib"),
        (assign, ":var_1", "anim_pose_4"),
    (else_try),
        (cur_tableau_add_override_item, "itm_heraldic_mail_with_surcoat_for_tableau"),
        (cur_tableau_add_override_item, "itm_mail_boots"),
        (cur_tableau_add_override_item, "itm_sword_type_xiiib"),
        (assign, ":var_1", "anim_pose_5"),
    (try_end),
    (set_fixed_point_multiplier, 100),
    (cur_tableau_set_camera_parameters, 1, 6, 6, 10, 10000),
    (assign, ":var_2", 155),
    (assign, ":var_3", 575),
    (assign, ":var_4", -5),
    (assign, ":var_5", 10),
    (init_position, pos5),
    (position_set_z, pos5, ":var_2"),
    (position_rotate_x, pos5, -90),
    (position_rotate_z, pos5, 180),
    (position_rotate_y, pos5, ":var_4"),
    (position_rotate_x, pos5, ":var_5"),
    (position_move_z, pos5, ":var_3", 0),
    (position_move_x, pos5, 60, 0),
    (init_position, pos2),
    (cur_tableau_add_troop, "trp_player", 2, ":var_1", 0),
    (cur_tableau_set_camera_position, 5),
    (copy_position, pos8, pos5),
    (position_rotate_x, pos8, -90),
    (position_rotate_z, pos8, 30),
    (position_rotate_x, pos8, -60),
    (cur_tableau_add_sun_light, 8, 175, 150, 125),

]),

("add_troop_to_cur_tableau_for_party",
[
    (store_script_param, ":var_0", 1),
    (store_mod, ":var_1", ":var_0", 2),
    (val_div, ":var_0", 2),
    (set_fixed_point_multiplier, 100),
    (cur_tableau_clear_override_items),
    (try_begin),
        (eq, ":var_1", 1),
        (cur_tableau_set_override_flags, 543),
    (try_end),
    (init_position, pos2),
    (cur_tableau_set_camera_parameters, 1, 6, 6, 10, 10000),
    (init_position, pos5),
    (assign, ":var_2", 105),
    (assign, ":var_3", 450),
    (assign, ":var_4", 15),
    (assign, ":var_5", -18),
    (assign, ":var_6", 1),
    (troop_get_inventory_slot, ":var_7", ":var_0", 8),
    (try_begin),
        (gt, ":var_7", 0),
        (eq, ":var_1", 0),
        (cur_tableau_add_horse, ":var_7", 2, "anim_horse_stand", 0),
        (assign, ":var_6", "anim_ride_0"),
        (assign, ":var_4", 23),
        (assign, ":var_2", 150),
        (assign, ":var_3", 550),
    (try_end),
    (position_set_z, pos5, ":var_2"),
    (position_rotate_x, pos5, -90),
    (position_rotate_z, pos5, 180),
    (position_rotate_y, pos5, ":var_4"),
    (position_rotate_x, pos5, ":var_5"),
    (position_move_z, pos5, ":var_3", 0),
    (position_move_x, pos5, 5, 0),
    (try_begin),
        (troop_is_hero, ":var_0"),
        (cur_tableau_add_troop, ":var_0", 2, ":var_6", -1),
    (else_try),
        (store_mul, ":var_8", ":var_0", 126233),
        (val_mod, ":var_8", 1000),
        (val_add, ":var_8", 1),
        (cur_tableau_add_troop, ":var_0", 2, ":var_6", ":var_8"),
    (try_end),
    (cur_tableau_set_camera_position, 5),
    (copy_position, pos8, pos5),
    (position_rotate_x, pos8, -90),
    (position_rotate_z, pos8, 30),
    (position_rotate_x, pos8, -60),
    (cur_tableau_add_sun_light, 8, 175, 150, 125),

]),

("get_prosperity_text_to_s50",
[
    (store_script_param, ":var_0", 1),
    (party_get_slot, ":var_1", ":var_0", slot_town_prosperity),
    (val_div, ":var_1", 20),
    (try_begin),
        (eq, ":var_1", 0),
        (str_store_string, s50, "@Very Poor"),
    (else_try),
        (eq, ":var_1", 1),
        (str_store_string, s50, "@Poor"),
    (else_try),
        (eq, ":var_1", 2),
        (str_store_string, s50, "@Average"),
    (else_try),
        (eq, ":var_1", 3),
        (str_store_string, s50, "@Rich"),
    (else_try),
        (str_store_string, s50, "@Very Rich"),
    (try_end),

]),

("spawn_bandit_lairs",
[
    (party_template_set_slot, "pt_steppe_bandits", slot_party_template_lair_type, "pt_steppe_bandit_lair"),
    (party_template_set_slot, "pt_taiga_bandits", slot_party_template_lair_type, "pt_taiga_bandit_lair"),
    (party_template_set_slot, "pt_mountain_bandits", slot_party_template_lair_type, "pt_mountain_bandit_lair"),
    (party_template_set_slot, "pt_forest_bandits", slot_party_template_lair_type, "pt_forest_bandit_lair"),
    (party_template_set_slot, "pt_sea_raiders", slot_party_template_lair_type, "pt_sea_raider_lair"),
    (party_template_set_slot, "pt_desert_bandits", slot_party_template_lair_type, "pt_desert_bandit_lair"),
    (party_template_set_slot, "pt_robber_knights", slot_party_template_lair_type, "pt_robber_knight_lair"),
    (set_spawn_radius, 4),
    (assign, ":var_0", 0),
    (try_for_range, ":var_1", "pt_steppe_bandit_lair", "pt_looter_lair"),
        (store_num_parties_of_template, ":var_2", ":var_1"),
        (val_add, ":var_0", ":var_2"),
    (try_end),
    (assign, ":var_3", 32),
    (try_begin),
        (neg|ge, ":var_0", ":var_3"),
        (val_sub, ":var_3", ":var_0"),
        (gt, ":var_3", 0),
        (try_for_range, reg1, 0, ":var_3"),
            (store_random_in_range, ":var_4", 0, 101),
            (try_begin),
                (neg|gt, ":var_4", 5),
                (store_random_in_range, ":var_5", "p_town_1_1", "p_village_1_1"),
                (spawn_around_party, ":var_5", "pt_robber_knight_lair"),
            (else_try),
                (neg|gt, ":var_4", 75),
                (store_random_in_range, ":var_5", "p_town_1_1", "p_village_1_1"),
                (assign, ":var_6", 0),
                (party_get_current_terrain, ":var_6", ":var_5"),
                (try_begin),
                    (this_or_next|eq, ":var_6", 2),
                    (eq, ":var_6", 10),
                    (assign, ":var_7", "pt_steppe_bandit_lair"),
                (else_try),
                    (this_or_next|eq, ":var_6", 4),
                    (eq, ":var_6", 12),
                    (assign, ":var_7", "pt_taiga_bandit_lair"),
                (else_try),
                    (this_or_next|eq, ":var_6", 5),
                    (eq, ":var_6", 13),
                    (assign, ":var_7", "pt_desert_bandit_lair"),
                (else_try),
                    (store_random_in_range, ":var_4", 0, 101),
                    (try_begin),
                        (neg|ge, ":var_4", 50),
                        (assign, ":var_7", "pt_forest_bandit_lair"),
                    (else_try),
                        (assign, ":var_7", "pt_mountain_bandit_lair"),
                    (try_end),
                (try_end),
                (spawn_around_party, ":var_5", ":var_7"),
            (else_try),
                (store_random_in_range, ":var_5", "p_ship_1", "p_looter_spawn_point"),
                (spawn_around_party, ":var_5", "pt_sea_raider_lair"),
            (try_end),
        (try_end),
    (try_end),

]),

("spawn_bandits2",
[
    (set_spawn_radius, 3),
    (assign, ":var_0", 0),
    (try_for_range, ":var_1", 0, 7),
        (store_add, ":var_2", ":var_1", "pt_steppe_bandit_lair"),
        (store_add, ":var_3", ":var_1", "pt_steppe_bandits"),
        (store_num_parties_of_template, ":var_4", ":var_2"),
        (store_num_parties_of_template, ":var_0", ":var_3"),
        (store_mul, ":var_5", ":var_4", 2),
        (neg|ge, ":var_0", ":var_5"),
        (val_sub, ":var_5", ":var_0"),
        (try_for_range, reg2, 0, ":var_5"),
            (store_random_party_of_template, ":var_6", ":var_2"),
            (spawn_around_party, ":var_6", ":var_3"),
            (party_set_slot, reg0, slot_party_ai_object, ":var_6"),
        (try_end),
    (try_end),
    (assign, ":var_7", 40),
    (store_num_parties_of_template, ":var_0", "pt_looters"),
    (try_begin),
        (neg|ge, ":var_0", ":var_7"),
        (val_sub, ":var_7", ":var_0"),
        (try_for_range, reg2, 0, ":var_7"),
            (store_random_in_range, ":var_8", "p_village_1_1", "p_salt_mine"),
            (spawn_around_party, ":var_8", "pt_looters"),
            (try_begin),
                (check_quest_active, "qst_deal_with_looters"),
                (party_set_flags, reg0, 262144, 1),
            (else_try),
                (party_set_flags, reg0, 262144, 0),
            (try_end),
        (try_end),
    (try_end),

]),

("spawn_bandits",
[
    (set_spawn_radius, 1),
    (try_begin),
        (eq, "$cheat_mode", 1),
        (store_num_parties_of_template, ":var_0", "pt_mountain_bandits"),
        (assign, reg20, ":var_0"),
        (store_num_parties_of_template, ":var_0", "pt_forest_bandits"),
        (assign, reg21, ":var_0"),
        (store_num_parties_of_template, ":var_0", "pt_sea_raiders"),
        (assign, reg22, ":var_0"),
        (store_num_parties_of_template, ":var_0", "pt_robber_knights"),
        (assign, reg23, ":var_0"),
        (store_num_parties_of_template, ":var_0", "pt_desert_bandits"),
        (assign, reg24, ":var_0"),
        (store_num_parties_of_template, ":var_0", "pt_steppe_bandits"),
        (assign, reg25, ":var_0"),
        (store_num_parties_of_template, ":var_0", "pt_taiga_bandits"),
        (assign, reg26, ":var_0"),
        (store_num_parties_of_template, ":var_0", "pt_steppe_bandit_lair"),
        (assign, reg27, ":var_0"),
        (store_num_parties_of_template, ":var_0", "pt_mountain_bandit_lair"),
        (assign, reg28, ":var_0"),
        (store_num_parties_of_template, ":var_0", "pt_sea_raider_lair"),
        (assign, reg29, ":var_0"),
        (store_num_parties_of_template, ":var_0", "pt_forest_bandit_lair"),
        (assign, reg30, ":var_0"),
        (store_num_parties_of_template, ":var_0", "pt_desert_bandit_lair"),
        (assign, reg31, ":var_0"),
        (store_num_parties_of_template, ":var_0", "pt_robber_knight_lair"),
        (assign, reg32, ":var_0"),
        (store_num_parties_of_template, ":var_0", "pt_taiga_bandit_lair"),
        (assign, reg33, ":var_0"),
        (display_message, "@{!}DEBUG : Doing spawn bandit script"),
        (display_message, "@common bandits: {reg20}"),
        (display_message, "@forest bandits: {reg21}"),
        (display_message, "@sea raiders: {reg22}"),
        (display_message, "@robber knights: {reg23}"),
        (display_message, "@desert bandits: {reg24}"),
        (display_message, "@steppe bandits: {reg25}"),
        (display_message, "@taiga bandits: {reg25}"),
        (display_message, "@Lairs"),
        (display_message, "@steppe: {reg27}"),
        (display_message, "@common:{reg28}"),
        (display_message, "@sea raider:{reg29}"),
        (display_message, "@forest:{reg30}"),
        (display_message, "@desert:{reg31}"),
        (display_message, "@knights:{reg32}"),
        (display_message, "@taiga:{reg33}"),
    (try_end),
    (party_template_set_slot, "pt_steppe_bandits", slot_party_template_lair_type, "pt_steppe_bandit_lair"),
    (party_template_set_slot, "pt_taiga_bandits", slot_party_template_lair_type, "pt_taiga_bandit_lair"),
    (party_template_set_slot, "pt_mountain_bandits", slot_party_template_lair_type, "pt_mountain_bandit_lair"),
    (party_template_set_slot, "pt_forest_bandits", slot_party_template_lair_type, "pt_forest_bandit_lair"),
    (party_template_set_slot, "pt_sea_raiders", slot_party_template_lair_type, "pt_sea_raider_lair"),
    (party_template_set_slot, "pt_desert_bandits", slot_party_template_lair_type, "pt_desert_bandit_lair"),
    (party_template_set_slot, "pt_robber_knights", slot_party_template_lair_type, "pt_robber_knight_lair"),
    (store_random_in_range, ":var_1", "p_taiga_bandit_spawn_point_1", "p_steppe_bandit_spawn_point_1"),
    (party_template_set_slot, "pt_taiga_bandits", slot_party_template_lair_spawnpoint, ":var_1"),
    (store_random_in_range, ":var_1", "p_steppe_bandit_spawn_point_1", "p_forest_bandit_spawn_point_1"),
    (party_template_set_slot, "pt_steppe_bandits", slot_party_template_lair_spawnpoint, ":var_1"),
    (store_random_in_range, ":var_1", "p_mountain_bandit_spawn_point_1", "p_sea_raider_spawn_point_1"),
    (party_template_set_slot, "pt_mountain_bandits", slot_party_template_lair_spawnpoint, ":var_1"),
    (store_random_in_range, ":var_1", "p_forest_bandit_spawn_point_1", "p_mountain_bandit_spawn_point_1"),
    (party_template_set_slot, "pt_forest_bandits", slot_party_template_lair_spawnpoint, ":var_1"),
    (store_random_in_range, ":var_1", "p_sea_raider_spawn_point_1", "p_desert_bandit_spawn_point_1"),
    (party_template_set_slot, "pt_sea_raiders", slot_party_template_lair_spawnpoint, ":var_1"),
    (store_random_in_range, ":var_1", "p_village_1_1", "p_salt_mine"),
    (party_template_set_slot, "pt_robber_knights", slot_party_template_lair_spawnpoint, ":var_1"),
    (store_random_in_range, ":var_1", "p_desert_bandit_spawn_point_1", "p_spawn_points_end"),
    (party_template_set_slot, "pt_desert_bandits", slot_party_template_lair_spawnpoint, ":var_1"),
    (assign, ":var_2", 1),
    (try_begin),
        (store_sub, ":var_3", "p_village_1_1", "p_castle_1_1"),
        (val_div, ":var_3", 4),
        (val_mul, ":var_3", ":var_2"),
        (assign, ":var_4", 0),
        (store_num_parties_of_template, ":var_0", "pt_mountain_bandits"),
        (val_add, ":var_4", ":var_0"),
        (store_num_parties_of_template, ":var_0", "pt_forest_bandits"),
        (val_add, ":var_4", ":var_0"),
        (store_num_parties_of_template, ":var_0", "pt_desert_bandits"),
        (val_add, ":var_4", ":var_0"),
        (store_num_parties_of_template, ":var_0", "pt_taiga_bandits"),
        (val_add, ":var_4", ":var_0"),
        (store_num_parties_of_template, ":var_0", "pt_steppe_bandits"),
        (val_add, ":var_4", ":var_0"),
        (neg|ge, ":var_0", ":var_3"),
        (store_sub, ":var_5", ":var_3", ":var_0"),
        (val_mul, ":var_5", 2),
        (set_spawn_radius, 5),
        (try_for_range, ":var_6", 0, ":var_5"),
            (store_random_in_range, ":var_1", "p_castle_1_1", "p_village_1_1"),
            (party_get_current_terrain, ":var_7", ":var_1"),
            (try_begin),
                (eq, ":var_7", 3),
                (spawn_around_party, ":var_1", "pt_mountain_bandits"),
            (else_try),
                (eq, ":var_7", 11),
                (spawn_around_party, ":var_1", "pt_forest_bandits"),
            (else_try),
                (this_or_next|eq, ":var_7", 13),
                (eq, ":var_7", 5),
                (spawn_around_party, ":var_1", "pt_desert_bandits"),
            (else_try),
                (this_or_next|eq, ":var_7", 10),
                (eq, ":var_7", 2),
                (spawn_around_party, ":var_1", "pt_steppe_bandits"),
            (else_try),
                (this_or_next|eq, ":var_7", 12),
                (eq, ":var_7", 4),
                (spawn_around_party, ":var_1", "pt_taiga_bandits"),
            (else_try),
                (spawn_around_party, ":var_1", "pt_mountain_bandits"),
            (try_end),
            (party_set_slot, reg0, slot_party_ai_object, ":var_1"),
        (try_end),
    (try_end),
    (try_begin),
        (store_sub, ":var_3", "p_looter_spawn_point", "p_ship_1"),
        (val_mul, ":var_3", ":var_2"),
        (store_num_parties_of_template, ":var_0", "pt_sea_raiders"),
        (neg|ge, ":var_0", ":var_3"),
        (store_sub, ":var_5", ":var_3", ":var_0"),
        (val_div, ":var_5", 4),
        (try_for_range, ":var_6", 0, ":var_5"),
            (store_random_in_range, ":var_1", "p_ship_1", "p_looter_spawn_point"),
            (set_spawn_radius, 0),
            (spawn_around_party, ":var_1", "pt_sea_raiders"),
            (party_set_slot, reg0, slot_party_ai_object, ":var_1"),
        (try_end),
    (try_end),
    (try_begin),
        (store_num_parties_of_template, ":var_0", "pt_looters"),
        (neg|ge, ":var_0", 11),
        (store_random_in_range, ":var_1", "p_village_1_1", "p_salt_mine"),
        (set_spawn_radius, 25),
        (spawn_around_party, ":var_1", "pt_looters"),
        (assign, ":var_8", reg0),
        (try_begin),
            (check_quest_active, "qst_deal_with_looters"),
            (party_set_flags, ":var_8", 262144, 1),
        (else_try),
            (party_set_flags, ":var_8", 262144, 0),
        (try_end),
    (try_end),
    (try_begin),
        (store_num_parties_of_template, ":var_0", "pt_robber_knights"),
        (neg|ge, ":var_0", 20),
        (store_random_in_range, ":var_1", "p_village_1_1", "p_salt_mine"),
        (set_spawn_radius, 25),
        (spawn_around_party, ":var_1", "pt_robber_knights"),
    (try_end),
    (try_begin),
        (store_num_parties_of_template, ":var_0", "pt_deserters"),
        (neg|ge, ":var_0", 5),
        (set_spawn_radius, 4),
        (try_for_range, ":var_9", "trp_npc1", "trp_knight_1_1_wife"),
            (troop_slot_eq, ":var_9", slot_troop_occupation, 2),
            (store_random_in_range, ":var_10", 0, 100),
            (neg|ge, ":var_10", 5),
            (troop_get_slot, ":var_11", ":var_9", slot_troop_leaded_party),
            (store_troop_faction, ":var_12", ":var_9"),
            (neg|eq, ":var_12", "fac_player_supporters_faction"),
            (gt, ":var_11", 0),
            (neg|party_is_in_any_town, ":var_11"),
            (spawn_around_party, ":var_11", "pt_deserters"),
            (assign, ":var_13", reg0),
            (store_troop_faction, ":var_14", ":var_9"),
            (faction_get_slot, ":var_15", ":var_14", slot_faction_quick_battle_tier_1_infantry),
            (store_character_level, ":var_16", "trp_player"),
            (store_mul, ":var_17", ":var_16", 2),
            (val_add, ":var_17", 11),
            (store_random_in_range, ":var_18", 10, ":var_17"),
            (party_add_members, ":var_13", ":var_15", ":var_18"),
            (store_random_in_range, ":var_10", 1, 4),
            (try_for_range, ":var_6", 0, ":var_10"),
                (party_upgrade_with_xp, ":var_13", 1000000, 0),
            (try_end),
        (try_end),
    (try_end),
    (try_for_range, ":var_19", "pt_steppe_bandits", "pt_deserters"),
        (party_template_get_slot, ":var_20", ":var_19", slot_party_template_lair_party),
        (neg|gt, ":var_20", 1),
        (party_template_get_slot, ":var_21", ":var_19", slot_party_template_lair_type),
        (party_template_get_slot, ":var_22", ":var_19", slot_party_template_lair_spawnpoint),
        (set_spawn_radius, 20),
        (spawn_around_party, ":var_22", ":var_21"),
        (assign, ":var_23", reg0),
        (party_set_slot, ":var_23", slot_party_type, 18),
        (str_store_party_name, s4, ":var_23"),
        (party_get_position, pos4, ":var_23"),
        (party_get_current_terrain, ":var_24", ":var_23"),
        (position_get_z, ":var_25", pos4),
        (position_get_y, ":var_26", pos4),
        (assign, ":var_27", 0),
        (try_for_range, ":var_28", "p_town_1_1", "p_salt_mine"),
            (eq, ":var_27", 0),
            (store_distance_to_party_from_party, ":var_29", ":var_23", ":var_28"),
            (neg|ge, ":var_29", 3),
            (assign, ":var_27", 1),
        (try_end),
        (try_begin),
            (eq, ":var_27", 1),
            (party_is_active, ":var_23"),
            (remove_party, ":var_23"),
            (party_template_set_slot, ":var_19", slot_party_template_lair_party, 0),
        (else_try),
            (eq, ":var_19", "pt_sea_raiders"),
            (eq, ":var_24", 3),
            (map_get_water_position_around_position, 5, pos4, pos4),
            (party_template_set_slot, ":var_19", slot_party_template_lair_party, ":var_23"),
            (party_set_flags, ":var_23", 256, 1),
        (else_try),
            (eq, ":var_19", "pt_mountain_bandits"),
            (party_template_set_slot, ":var_19", slot_party_template_lair_party, ":var_23"),
            (party_set_flags, ":var_23", 256, 1),
        (else_try),
            (eq, ":var_19", "pt_desert_bandits"),
            (eq, ":var_24", 5),
            (gt, ":var_26", -9000),
            (gt, ":var_25", 125),
            (party_template_set_slot, ":var_19", slot_party_template_lair_party, ":var_23"),
            (party_set_flags, ":var_23", 256, 1),
        (else_try),
            (eq, ":var_19", "pt_steppe_bandits"),
            (this_or_next|eq, ":var_24", 2),
            (eq, ":var_24", 10),
            (this_or_next|eq, ":var_24", 10),
            (gt, ":var_25", 200),
            (party_template_set_slot, ":var_19", slot_party_template_lair_party, ":var_23"),
            (party_set_flags, ":var_23", 256, 1),
        (else_try),
            (eq, ":var_19", "pt_taiga_bandits"),
            (eq, ":var_24", 12),
            (party_template_set_slot, ":var_19", slot_party_template_lair_party, ":var_23"),
            (party_set_flags, ":var_23", 256, 1),
        (else_try),
            (eq, ":var_19", "pt_forest_bandits"),
            (eq, ":var_24", 11),
            (party_template_set_slot, ":var_19", slot_party_template_lair_party, ":var_23"),
            (party_set_flags, ":var_23", 256, 1),
        (else_try),
            (eq, ":var_19", "pt_robber_knights"),
            (party_template_set_slot, ":var_19", slot_party_template_lair_party, ":var_23"),
            (party_set_flags, ":var_23", 256, 1),
        (else_try),
            (party_is_active, ":var_23"),
            (str_store_party_name, s4, ":var_23"),
            (remove_party, ":var_23"),
            (party_template_set_slot, ":var_19", slot_party_template_lair_party, 0),
        (else_try),
        (try_end),
    (try_end),
    (try_begin),
        (eq, "$cheat_mode", 1),
        (store_num_parties_of_template, ":var_0", "pt_mountain_bandits"),
        (assign, reg20, ":var_0"),
        (store_num_parties_of_template, ":var_0", "pt_forest_bandits"),
        (assign, reg21, ":var_0"),
        (store_num_parties_of_template, ":var_0", "pt_sea_raiders"),
        (assign, reg22, ":var_0"),
        (store_num_parties_of_template, ":var_0", "pt_robber_knights"),
        (assign, reg23, ":var_0"),
        (store_num_parties_of_template, ":var_0", "pt_desert_bandits"),
        (assign, reg24, ":var_0"),
        (store_num_parties_of_template, ":var_0", "pt_steppe_bandits"),
        (assign, reg25, ":var_0"),
        (store_num_parties_of_template, ":var_0", "pt_taiga_bandits"),
        (assign, reg26, ":var_0"),
        (store_num_parties_of_template, ":var_0", "pt_steppe_bandit_lair"),
        (assign, reg27, ":var_0"),
        (store_num_parties_of_template, ":var_0", "pt_mountain_bandit_lair"),
        (assign, reg28, ":var_0"),
        (store_num_parties_of_template, ":var_0", "pt_sea_raider_lair"),
        (assign, reg29, ":var_0"),
        (store_num_parties_of_template, ":var_0", "pt_forest_bandit_lair"),
        (assign, reg30, ":var_0"),
        (store_num_parties_of_template, ":var_0", "pt_desert_bandit_lair"),
        (assign, reg31, ":var_0"),
        (store_num_parties_of_template, ":var_0", "pt_robber_knight_lair"),
        (assign, reg32, ":var_0"),
        (store_num_parties_of_template, ":var_0", "pt_taiga_bandit_lair"),
        (assign, reg33, ":var_0"),
        (display_message, "@{!}DEBUG : Doing spawn bandit script"),
        (display_message, "@common bandits: {reg20}"),
        (display_message, "@forest bandits: {reg21}"),
        (display_message, "@sea raiders: {reg22}"),
        (display_message, "@robber knights: {reg23}"),
        (display_message, "@desert bandits: {reg24}"),
        (display_message, "@steppe bandits: {reg25}"),
        (display_message, "@taiga bandits: {reg25}"),
        (display_message, "@Lairs"),
        (display_message, "@steppe: {reg27}"),
        (display_message, "@common:{reg28}"),
        (display_message, "@sea raider:{reg29}"),
        (display_message, "@forest:{reg30}"),
        (display_message, "@desert:{reg31}"),
        (display_message, "@knights:{reg32}"),
        (display_message, "@taiga:{reg33}"),
    (try_end),

]),

("count_mission_casualties_from_agents",
[
    (party_clear, "p_player_casualties"),
    (party_clear, "p_enemy_casualties"),
    (party_clear, "p_ally_casualties"),
    (assign, "$any_allies_at_the_last_battle", 0),
    (try_for_agents, ":var_0"),
        (agent_is_human, ":var_0"),
        (agent_get_party_id, ":var_1", ":var_0"),
        (agent_get_troop_id, ":var_2", ":var_0"),
        (troop_set_slot, ":var_2", slot_troop_player_routed_agents, 0),
        (troop_set_slot, ":var_2", slot_troop_ally_routed_agents, 0),
        (troop_set_slot, ":var_2", slot_troop_enemy_routed_agents, 0),
    (try_end),
    (try_for_agents, ":var_0"),
        (agent_is_human, ":var_0"),
        (neg|agent_slot_eq, ":var_0", 100, 1),
        (agent_get_party_id, ":var_1", ":var_0"),
        (try_begin),
            (neg|eq, ":var_1", "p_main_party"),
            (agent_slot_eq, ":var_0", 100, 0),
            (agent_is_ally, ":var_0"),
            (assign, "$any_allies_at_the_last_battle", 1),
        (try_end),
        (try_begin),
            (agent_is_routed, ":var_0"),
            (agent_get_slot, ":var_3", ":var_0", slot_agent_is_running_away),
            (eq, ":var_3", 1),
            (try_begin),
                (agent_get_troop_id, ":var_4", ":var_0"),
                (agent_get_party_id, ":var_5", ":var_0"),
                (store_faction_of_party, ":var_6", ":var_5"),
                (try_begin),
                    (eq, ":var_1", "p_main_party"),
                    (val_add, "$num_routed_us", 1),
                (else_try),
                    (agent_is_ally, ":var_0"),
                    (val_add, "$num_routed_allies", 1),
                (else_try),
                    (val_add, "$num_routed_enemies", 1),
                    (faction_get_slot, ":var_7", ":var_6", slot_faction_num_routed_agents),
                    (val_add, ":var_7", 1),
                    (faction_set_slot, ":var_6", slot_faction_num_routed_agents, ":var_7"),
                    (party_add_members, "p_routed_enemies", ":var_4", 1),
                (try_end),
            (try_end),
            (agent_get_troop_id, ":var_2", ":var_0"),
            (try_begin),
                (eq, ":var_1", "p_main_party"),
                (troop_get_slot, ":var_8", ":var_2", slot_troop_player_routed_agents),
                (val_add, ":var_8", 1),
                (troop_set_slot, ":var_2", slot_troop_player_routed_agents, ":var_8"),
            (else_try),
                (agent_is_ally, ":var_0"),
                (troop_get_slot, ":var_9", ":var_2", slot_troop_ally_routed_agents),
                (val_add, ":var_9", 1),
                (troop_set_slot, ":var_2", slot_troop_ally_routed_agents, ":var_9"),
            (else_try),
                (troop_get_slot, ":var_10", ":var_2", slot_troop_enemy_routed_agents),
                (val_add, ":var_10", 1),
                (troop_set_slot, ":var_2", slot_troop_enemy_routed_agents, ":var_10"),
            (try_end),
        (try_end),
        (neg|agent_is_alive, ":var_0"),
        (agent_get_troop_id, ":var_2", ":var_0"),
        (try_begin),
            (eq, ":var_1", "p_main_party"),
            (party_add_members, "p_player_casualties", ":var_2", 1),
            (try_begin),
                (agent_is_wounded, ":var_0"),
                (party_wound_members, "p_player_casualties", ":var_2", 1),
            (try_end),
        (else_try),
            (agent_slot_eq, ":var_0", 100, 2),
            (agent_get_slot, ":var_11", ":var_0", 101),
            (party_add_members, "p_player_casualties", ":var_11", 1),
            (try_begin),
                (agent_is_wounded, ":var_0"),
                (party_wound_members, "p_player_casualties", ":var_11", 1),
            (try_end),
        (else_try),
            (agent_is_ally, ":var_0"),
            (party_add_members, "p_ally_casualties", ":var_2", 1),
            (try_begin),
                (agent_is_wounded, ":var_0"),
                (party_wound_members, "p_ally_casualties", ":var_2", 1),
            (try_end),
        (else_try),
            (party_add_members, "p_enemy_casualties", ":var_2", 1),
            (try_begin),
                (agent_is_wounded, ":var_0"),
                (party_wound_members, "p_enemy_casualties", ":var_2", 1),
            (try_end),
        (try_end),
    (try_end),
    (try_begin),
        (call_script, "script_check_agents_for_lances"),
    (try_end),

]),

("get_max_skill_of_player_party",
[
    (store_script_param, ":var_0", 1),
    (party_get_num_companion_stacks, ":var_1", "p_main_party"),
    (store_skill_level, ":var_2", ":var_0", "trp_player"),
    (assign, ":var_3", "trp_player"),
    (try_for_range, ":var_4", 0, ":var_1"),
        (party_stack_get_troop_id, ":var_5", "p_main_party", ":var_4"),
        (troop_is_hero, ":var_5"),
        (neg|troop_is_wounded, ":var_5"),
        (store_skill_level, ":var_6", ":var_0", ":var_5"),
        (gt, ":var_6", ":var_2"),
        (assign, ":var_2", ":var_6"),
        (assign, ":var_3", ":var_5"),
    (try_end),
    (party_get_skill_level, reg0, "p_main_party", ":var_0"),
    (assign, reg1, ":var_3"),

]),

("upgrade_hero_party",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (party_upgrade_with_xp, ":var_0", ":var_1", 0),

]),

("get_improvement_details",
[
    (store_script_param, ":var_0", 1),
    (try_begin),
        (eq, ":var_0", 130),
        (str_store_string, s0, "@Manor"),
        (str_store_string, s1, "@A manor lets you rest at the village and pay your troops half wages while you rest."),
        (assign, reg0, 8000),
    (else_try),
        (eq, ":var_0", 248),
        (str_store_string, s0, "@Fortified manor house"),
        (str_store_string, s1, "@A fortified manor house provides basic fortifications."),
        (assign, reg0, 60000),
    (else_try),
        (eq, ":var_0", 131),
        (str_store_string, s0, "@Mill"),
        (str_store_string, s1, "@A mill increases village prosperity by 5%."),
        (assign, reg0, 6000),
    (else_try),
        (eq, ":var_0", 132),
        (str_store_string, s0, "@Watch Tower"),
        (str_store_string, s1, "@A watch tower lets the villagers raise alarm earlier. The time it takes for enemies to loot the village increases by 50%."),
        (assign, reg0, 5000),
    (else_try),
        (eq, ":var_0", 133),
        (str_store_string, s0, "@School"),
        (str_store_string, s1, "@A shool increases the loyality of the villagers to you by +1 every month."),
        (assign, reg0, 9000),
    (else_try),
        (eq, ":var_0", 134),
        (str_store_string, s0, "@Messenger Post"),
        (str_store_string, s1, "@A messenger post lets the inhabitants send you a message whenever enemies are nearby, even if you are far away from here."),
        (assign, reg0, 4000),
    (else_try),
        (eq, ":var_0", 135),
        (str_store_string, s0, "@Prison Tower"),
        (str_store_string, s1, "@A prison tower reduces the chance of captives held here running away successfully."),
        (assign, reg0, 7000),
    (else_try),
        (eq, ":var_0", 252),
        (str_store_string, s0, "@Improved fortifications 1"),
        (str_store_string, s1, "@Surrounds your castle with walls 1"),
        (assign, reg0, 100000),
    (else_try),
        (eq, ":var_0", 253),
        (str_store_string, s0, "@Improved fortifications 2"),
        (str_store_string, s1, "@Surrounds your castle with walls 2"),
        (assign, reg0, 140000),
    (try_end),

]),

("cf_troop_agent_is_alive",
[
    (store_script_param, ":var_0", 1),
    (assign, ":var_1", 0),
    (try_for_agents, ":var_2"),
        (agent_get_troop_id, ":var_3", ":var_2"),
        (eq, ":var_0", ":var_3"),
        (agent_is_alive, ":var_2"),
        (val_add, ":var_1", 1),
    (try_end),
    (gt, ":var_1", 0),

]),

("cf_village_recruit_volunteers_cond",
[
    (try_begin),
        (eq, "$cheat_mode", 1),
        (display_message, "str_checking_volunteer_availability_script"),
    (try_end),
    (neg|party_slot_eq, "$current_town", slot_village_state, 2),
    (neg|party_slot_eq, "$current_town", slot_village_state, 1),
    (neg|party_slot_ge, "$current_town", slot_village_infested_by_bandits, 1),
    (store_faction_of_party, ":var_0", "$current_town"),
    (party_get_slot, ":var_1", "$current_town", slot_center_player_relation),
    (store_relation, ":var_2", ":var_0", "fac_player_faction"),
    (ge, ":var_1", 0),
    (try_begin),
        (eq, "$cheat_mode", 1),
        (display_message, "str_center_relation_at_least_zero"),
    (try_end),
    (this_or_next|ge, ":var_1", 5),
    (this_or_next|eq, ":var_0", "$players_kingdom"),
    (this_or_next|ge, ":var_2", 0),
    (this_or_next|eq, ":var_0", "$supported_pretender_old_faction"),
    (eq, "$players_kingdom", 0),
    (try_begin),
        (eq, "$cheat_mode", 1),
        (display_message, "str_relationfaction_conditions_met"),
    (try_end),
    (party_slot_ge, "$current_town", slot_center_volunteer_troop_amount, 0),
    (party_slot_ge, "$current_town", slot_center_volunteer_troop_type, 1),
    (try_begin),
        (eq, "$cheat_mode", 1),
        (display_message, "str_troops_available"),
    (try_end),
    (party_get_free_companions_capacity, ":var_3", "p_main_party"),
    (ge, ":var_3", 1),
    (try_begin),
        (eq, "$cheat_mode", 1),
        (display_message, "str_party_has_capacity"),
    (try_end),

]),

("village_recruit_volunteers_recruit",
[
    (store_script_param, ":var_0", 1),
    (party_get_slot, ":var_1", "$current_town", slot_center_volunteer_troop_type),
    (party_get_slot, ":var_2", "$current_town", slot_center_volunteer_troop_amount),
    (try_begin),
        (gt, ":var_0", 0),
        (neg|ge, ":var_0", ":var_2"),
        (assign, ":var_2", ":var_0"),
    (try_end),
    (party_get_free_companions_capacity, ":var_3", "p_main_party"),
    (val_min, ":var_2", ":var_3"),
    (store_troop_gold, ":var_4", "trp_player"),
    (assign, ":var_5", 10),
    (try_begin),
        (party_slot_eq, "$current_town", slot_party_type, 2),
        (assign, ":var_5", 75),
    (else_try),
        (party_slot_eq, "$current_town", slot_party_type, 3),
        (assign, ":var_5", 12),
    (try_end),
    (store_div, ":var_6", ":var_4", ":var_5"),
    (val_min, ":var_2", ":var_6"),
    (party_add_members, "p_main_party", ":var_1", ":var_2"),
    (try_begin),
        (gt, ":var_0", 0),
        (party_get_slot, ":var_7", "$current_town", slot_center_volunteer_troop_amount),
        (val_sub, ":var_7", ":var_0"),
        (try_begin),
            (neg|gt, ":var_7", 0),
            (party_set_slot, "$current_town", slot_center_volunteer_troop_amount, -1),
        (else_try),
            (party_set_slot, "$current_town", slot_center_volunteer_troop_amount, ":var_7"),
        (try_end),
    (else_try),
        (party_set_slot, "$current_town", slot_center_volunteer_troop_amount, -1),
    (try_end),
    (store_mul, ":var_8", ":var_2", ":var_5"),
    (troop_remove_gold, "trp_player", ":var_8"),

]),

("get_troop_item_amount",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (troop_get_inventory_capacity, ":var_2", ":var_0"),
    (assign, ":var_3", 0),
    (try_for_range, ":var_4", 0, ":var_2"),
        (troop_get_inventory_slot, ":var_5", ":var_0", ":var_4"),
        (eq, ":var_5", ":var_1"),
        (val_add, ":var_3", 1),
    (try_end),
    (assign, reg0, ":var_3"),

]),

("get_name_from_dna_to_s50",
[
    (store_script_param, ":var_0", 1),
    (store_sub, ":var_1", "str_surname_1", "str_name_1"),
    (store_sub, ":var_2", "str_surnames_end", "str_surname_1"),
    (assign, ":var_3", ":var_0"),
    (val_mod, ":var_3", ":var_1"),
    (assign, ":var_4", ":var_0"),
    (val_div, ":var_4", ":var_1"),
    (val_mod, ":var_4", ":var_2"),
    (val_add, ":var_3", "str_name_1"),
    (val_add, ":var_4", "str_surname_1"),
    (str_store_string, s50, ":var_3"),
    (str_store_string, s50, ":var_4"),

]),

("change_center_prosperity",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (party_get_slot, ":var_2", ":var_0", slot_town_prosperity),
    (store_add, ":var_3", ":var_2", ":var_1"),
    (val_clamp, ":var_3", 0, 100),
    (store_div, ":var_4", ":var_2", 20),
    (store_div, ":var_5", ":var_3", 20),
    (try_begin),
        (neg|eq, ":var_4", ":var_5"),
        (neg|is_between, ":var_0", "p_castle_1_1", "p_village_1_1"),
        (str_store_party_name_link, s2, ":var_0"),
        (call_script, "script_get_prosperity_text_to_s50", ":var_0"),
        (str_store_string, s3, 50),
        (party_set_slot, ":var_0", slot_town_prosperity, ":var_3"),
        (call_script, "script_get_prosperity_text_to_s50", ":var_0"),
        (str_store_string, s4, 50),
        (try_begin),
            (party_slot_eq, ":var_0", slot_town_lord, "trp_player"),
            (display_message, "@Prosperity of {s2} has changed from {s3} to {s4}."),
        (try_end),
        (call_script, "script_update_center_notes", ":var_0"),
    (else_try),
        (party_set_slot, ":var_0", slot_town_prosperity, ":var_3"),
    (try_end),
    (try_begin),
        (store_current_hours, ":var_6"),
        (gt, ":var_6", 1),
        (store_sub, ":var_7", ":var_3", ":var_2"),
        (try_begin),
            (neg|ge, ":var_7", 0),
            (val_add, "$newglob_total_prosperity_losses", ":var_7"),
        (else_try),
            (gt, ":var_7", 0),
            (val_add, "$newglob_total_prosperity_gains", ":var_7"),
        (try_end),
    (try_end),
    (try_begin),
        (eq, "$cheat_mode", 3),
        (assign, reg4, "$newglob_total_prosperity_from_bandits"),
        (assign, reg5, "$newglob_total_prosperity_from_caravan_trade"),
        (assign, reg7, "$newglob_total_prosperity_from_villageloot"),
        (assign, reg8, "$newglob_total_prosperity_from_townloot"),
        (assign, reg9, "$newglob_total_prosperity_from_village_trade"),
        (assign, reg10, "$newglob_total_prosperity_from_convergence"),
        (assign, reg11, "$newglob_total_prosperity_losses"),
        (assign, reg12, "$newglob_total_prosperity_gains"),
        (display_message, "@{!}DEBUG: Total prosperity actual losses: {reg11}"),
        (display_message, "@{!}DEBUG: Total prosperity actual gains: {reg12}"),
        (display_message, "@{!}DEBUG: Prosperity changes from random bandits: {reg4}"),
        (display_message, "@{!}DEBUG: Prosperity changes from caravan trades: {reg5}"),
        (display_message, "@{!}DEBUG: Prosperity changes from farmer trades: {reg9}"),
        (display_message, "@{!}DEBUG: Prosperity changes from looted villages: {reg7}"),
        (display_message, "@{!}DEBUG: Prosperity changes from sieges: {reg8}"),
        (display_message, "@{!}DEBUG: Theoretical prosperity changes from convergence: {reg10}"),
    (try_end),

]),

("get_center_ideal_prosperity",
[
    (store_script_param, ":var_0", 1),
    (assign, ":var_1", 100),
    (call_script, "script_center_get_goods_availability", ":var_0"),
    (store_mul, ":var_2", reg0, 2),
    (val_sub, ":var_1", ":var_2"),
    (val_max, ":var_1", 0),
    (try_begin),
        (is_between, ":var_0", "p_village_1_1", "p_salt_mine"),
        (party_slot_eq, ":var_0", slot_center_has_fish_pond, 1),
        (val_add, ":var_1", 5),
    (try_end),
    (assign, reg0, ":var_1"),

]),

("good_price_affects_good_production",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (store_script_param, ":var_3", 4),
    (assign, reg4, ":var_2"),
    (try_begin),
        (gt, ":var_2", 0),
        (store_sub, ":var_4", ":var_1", "itm_spice"),
        (val_add, ":var_4", 250),
        (party_get_slot, ":var_5", ":var_0", ":var_4"),
        (try_begin),
            (neg|ge, ":var_5", 1000),
            (val_mul, ":var_3", 2),
        (try_end),
        (try_begin),
            (gt, ":var_3", 1),
            (val_sub, ":var_5", 1000),
            (val_div, ":var_5", ":var_3"),
            (val_add, ":var_5", 1000),
        (try_end),
        (val_mul, ":var_2", 1000),
        (val_div, ":var_2", ":var_5"),
    (try_end),
    (assign, reg0, ":var_2"),

]),

("get_poorest_village_of_faction",
[
    (store_script_param, ":var_0", 1),
    (assign, ":var_1", -1),
    (assign, ":var_2", 101),
    (try_for_range, ":var_3", "p_village_1_1", "p_salt_mine"),
        (store_faction_of_party, ":var_4", ":var_3"),
        (eq, ":var_4", ":var_0"),
        (party_get_slot, ":var_5", ":var_3", slot_town_prosperity),
        (neg|ge, ":var_5", ":var_2"),
        (assign, ":var_2", ":var_5"),
        (assign, ":var_1", ":var_3"),
    (try_end),
    (assign, reg0, ":var_1"),

]),

("troop_add_gold",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (troop_add_gold, ":var_0", ":var_1"),
    (try_begin),
        (eq, ":var_0", "trp_player"),
        (play_sound, "snd_money_received"),
    (try_end),

]),

("initialize_npcs",
[
    (troop_set_slot, "trp_npc1", slot_troop_home, "p_town_1_1"),
    (troop_set_slot, "trp_npc1", slot_troop_town_with_contacts, "p_town_1_2"),
    (troop_set_slot, "trp_npc1", slot_troop_original_faction, "fac_kingdom_1"),
    (troop_set_slot, "trp_npc2", slot_troop_home, "p_town_2_2"),
    (troop_set_slot, "trp_npc2", slot_troop_town_with_contacts, "p_town_2_1"),
    (troop_set_slot, "trp_npc2", slot_troop_original_faction, "fac_kingdom_2"),
    (troop_set_slot, "trp_npc3", slot_troop_home, "p_town_3_2"),
    (troop_set_slot, "trp_npc3", slot_troop_town_with_contacts, "p_town_3_1"),
    (troop_set_slot, "trp_npc3", slot_troop_original_faction, "fac_kingdom_3"),
    (troop_set_slot, "trp_npc4", slot_troop_home, "p_town_4_2"),
    (troop_set_slot, "trp_npc4", slot_troop_town_with_contacts, "p_town_4_1"),
    (troop_set_slot, "trp_npc4", slot_troop_original_faction, "fac_kingdom_4"),
    (troop_set_slot, "trp_npc5", slot_troop_home, "p_town_5_2"),
    (troop_set_slot, "trp_npc5", slot_troop_town_with_contacts, "p_town_5_1"),
    (troop_set_slot, "trp_npc5", slot_troop_original_faction, "fac_kingdom_5"),
    (troop_set_slot, "trp_npc6", slot_troop_home, "p_town_6_2"),
    (troop_set_slot, "trp_npc6", slot_troop_town_with_contacts, "p_town_6_1"),
    (troop_set_slot, "trp_npc6", slot_troop_original_faction, "fac_kingdom_6"),
    (troop_set_slot, "trp_npc7", slot_troop_home, "p_town_7_2"),
    (troop_set_slot, "trp_npc7", slot_troop_town_with_contacts, "p_town_7_1"),
    (troop_set_slot, "trp_npc7", slot_troop_original_faction, "fac_kingdom_7"),
    (troop_set_slot, "trp_npc8", slot_troop_home, "p_town_8_2"),
    (troop_set_slot, "trp_npc8", slot_troop_town_with_contacts, "p_town_8_1"),
    (troop_set_slot, "trp_npc8", slot_troop_original_faction, "fac_kingdom_8"),
    (troop_set_slot, "trp_npc9", slot_troop_home, "p_town_9_2"),
    (troop_set_slot, "trp_npc9", slot_troop_town_with_contacts, "p_town_9_1"),
    (troop_set_slot, "trp_npc9", slot_troop_original_faction, "fac_kingdom_9"),
    (troop_set_slot, "trp_npc10", slot_troop_home, "p_town_10_2"),
    (troop_set_slot, "trp_npc10", slot_troop_town_with_contacts, "p_town_10_1"),
    (troop_set_slot, "trp_npc10", slot_troop_original_faction, "fac_kingdom_10"),
    (troop_set_slot, "trp_npc11", slot_troop_home, "p_town_11_2"),
    (troop_set_slot, "trp_npc11", slot_troop_town_with_contacts, "p_town_11_1"),
    (troop_set_slot, "trp_npc11", slot_troop_original_faction, "fac_kingdom_11"),
    (troop_set_slot, "trp_npc12", slot_troop_home, "p_town_12_2"),
    (troop_set_slot, "trp_npc12", slot_troop_town_with_contacts, "p_town_12_1"),
    (troop_set_slot, "trp_npc12", slot_troop_original_faction, "fac_kingdom_12"),
    (troop_set_slot, "trp_npc13", slot_troop_home, "p_town_13_2"),
    (troop_set_slot, "trp_npc13", slot_troop_town_with_contacts, "p_town_13_1"),
    (troop_set_slot, "trp_npc13", slot_troop_original_faction, "fac_kingdom_13"),
    (troop_set_slot, "trp_npc14", slot_troop_home, "p_town_14_2"),
    (troop_set_slot, "trp_npc14", slot_troop_town_with_contacts, "p_town_14_1"),
    (troop_set_slot, "trp_npc14", slot_troop_original_faction, "fac_kingdom_14"),
    (troop_set_slot, "trp_npc15", slot_troop_home, "p_town_15_2"),
    (troop_set_slot, "trp_npc15", slot_troop_town_with_contacts, "p_town_15_1"),
    (troop_set_slot, "trp_npc15", slot_troop_original_faction, "fac_kingdom_15"),
    (troop_set_slot, "trp_npc16", slot_troop_home, "p_town_16_2"),
    (troop_set_slot, "trp_npc16", slot_troop_town_with_contacts, "p_town_16_1"),
    (troop_set_slot, "trp_npc16", slot_troop_original_faction, "fac_kingdom_16"),
    (troop_set_slot, "trp_npc17", slot_troop_home, "p_town_17_2"),
    (troop_set_slot, "trp_npc17", slot_troop_town_with_contacts, "p_town_17_1"),
    (troop_set_slot, "trp_npc17", slot_troop_original_faction, "fac_kingdom_17"),
    (troop_set_slot, "trp_npc18", slot_troop_home, "p_town_18_2"),
    (troop_set_slot, "trp_npc18", slot_troop_town_with_contacts, "p_town_18_1"),
    (troop_set_slot, "trp_npc18", slot_troop_original_faction, "fac_kingdom_18"),
    (troop_set_slot, "trp_npc20", slot_troop_home, "p_town_20_2"),
    (troop_set_slot, "trp_npc20", slot_troop_town_with_contacts, "p_town_20_1"),
    (troop_set_slot, "trp_npc20", slot_troop_original_faction, "fac_kingdom_20"),
    (troop_set_slot, "trp_npc22", slot_troop_home, "p_town_22_2"),
    (troop_set_slot, "trp_npc22", slot_troop_town_with_contacts, "p_town_22_1"),
    (troop_set_slot, "trp_npc22", slot_troop_original_faction, "fac_kingdom_22"),
    (troop_set_slot, "trp_npc23", slot_troop_home, "p_town_23_2"),
    (troop_set_slot, "trp_npc23", slot_troop_town_with_contacts, "p_town_23_1"),
    (troop_set_slot, "trp_npc23", slot_troop_original_faction, "fac_kingdom_23"),
    (troop_set_slot, "trp_npc24", slot_troop_home, "p_town_24_2"),
    (troop_set_slot, "trp_npc24", slot_troop_town_with_contacts, "p_town_24_1"),
    (troop_set_slot, "trp_npc24", slot_troop_original_faction, "fac_kingdom_24"),
    (troop_set_slot, "trp_npc25", slot_troop_home, "p_town_25_2"),
    (troop_set_slot, "trp_npc25", slot_troop_town_with_contacts, "p_town_25_1"),
    (troop_set_slot, "trp_npc25", slot_troop_original_faction, "fac_kingdom_25"),
    (troop_set_slot, "trp_npc26", slot_troop_home, "p_town_26_2"),
    (troop_set_slot, "trp_npc26", slot_troop_town_with_contacts, "p_town_26_1"),
    (troop_set_slot, "trp_npc26", slot_troop_original_faction, "fac_kingdom_26"),
    (try_for_range, ":var_0", "trp_npc1", "trp_kingdom_1_lord"),
        (store_random_in_range, ":var_1", 1, 26),
        (troop_set_slot, ":var_0", slot_lord_reputation_type, ":var_1"),
        (troop_set_slot, ":var_0", slot_troop_strings_end, 300),
        (try_begin),
            (is_between, ":var_0", "trp_npc1", "trp_npc16"),
            (assign, ":var_2", 1),
        (else_try),
            (store_random_in_range, ":var_2", 1, 4),
        (try_end),
        (troop_set_slot, ":var_0", slot_troop_morality_type, ":var_2"),
        (store_random_in_range, ":var_2", 2, 5),
        (troop_set_slot, ":var_0", slot_troop_morality_value, ":var_2"),
        (store_random_in_range, ":var_2", 1, 4),
        (troop_set_slot, ":var_0", slot_troop_2ary_morality_type, ":var_2"),
        (troop_set_slot, ":var_0", slot_troop_2ary_morality_value, -1),
        (store_random_in_range, ":var_2", 1, 6),
        (troop_set_slot, ":var_0", slot_troop_kingsupport_argument, ":var_2"),
        (assign, ":var_3", 99999),
        (try_for_range, ":var_4", 0, ":var_3"),
            (store_random_in_range, ":var_5", "trp_npc1", "trp_kingdom_1_lord"),
            (neg|eq, ":var_5", ":var_0"),
            (neg|troop_slot_eq, ":var_5", slot_troop_personalitymatch_object, ":var_0"),
            (neg|troop_slot_eq, ":var_0", slot_troop_personalitymatch_object, ":var_5"),
            (neg|troop_slot_eq, ":var_5", slot_troop_personalityclash2_object, ":var_0"),
            (neg|troop_slot_eq, ":var_0", slot_troop_personalityclash2_object, ":var_5"),
            (troop_set_slot, ":var_0", slot_troop_personalityclash_object, ":var_5"),
            (assign, ":var_3", 0),
        (try_end),
        (assign, ":var_3", 99999),
        (try_for_range, ":var_4", 0, ":var_3"),
            (store_random_in_range, ":var_5", "trp_npc1", "trp_kingdom_1_lord"),
            (neg|eq, ":var_5", ":var_0"),
            (neg|troop_slot_eq, ":var_5", slot_troop_personalitymatch_object, ":var_0"),
            (neg|troop_slot_eq, ":var_0", slot_troop_personalitymatch_object, ":var_5"),
            (neg|troop_slot_eq, ":var_5", slot_troop_personalityclash_object, ":var_0"),
            (neg|troop_slot_eq, ":var_0", slot_troop_personalityclash_object, ":var_5"),
            (troop_set_slot, ":var_0", slot_troop_personalityclash2_object, ":var_5"),
            (assign, ":var_3", 0),
        (try_end),
        (assign, ":var_3", 99999),
        (try_for_range, ":var_4", 0, ":var_3"),
            (store_random_in_range, ":var_5", "trp_npc1", "trp_kingdom_1_lord"),
            (neg|eq, ":var_5", ":var_0"),
            (neg|troop_slot_eq, ":var_5", slot_troop_personalityclash_object, ":var_0"),
            (neg|troop_slot_eq, ":var_0", slot_troop_personalityclash_object, ":var_5"),
            (neg|troop_slot_eq, ":var_5", slot_troop_personalityclash2_object, ":var_0"),
            (neg|troop_slot_eq, ":var_0", slot_troop_personalityclash2_object, ":var_5"),
            (troop_set_slot, ":var_0", slot_troop_personalitymatch_object, ":var_5"),
            (assign, ":var_3", 0),
        (try_end),
        (assign, ":var_3", 99999),
        (try_for_range, ":var_4", 0, ":var_3"),
            (store_random_in_range, ":var_5", "trp_npc1", "trp_kingdom_1_lord"),
            (neg|eq, ":var_5", ":var_0"),
            (neg|troop_slot_eq, ":var_5", slot_troop_personalitymatch_object, ":var_0"),
            (neg|troop_slot_eq, ":var_0", slot_troop_personalitymatch_object, ":var_5"),
            (troop_set_slot, ":var_0", slot_troop_kingsupport_opponent, ":var_5"),
            (assign, ":var_3", 0),
        (try_end),
    (try_end),
    (store_sub, "$number_of_npc_slots", 141, 101),
    (try_for_range, ":var_6", "trp_npc1", "trp_kingdom_1_lord"),
        (try_for_range, ":var_7", 0, "$number_of_npc_slots"),
            (store_add, ":var_8", ":var_7", 101),
            (store_mul, ":var_9", ":var_7", 29),
            (store_add, ":var_10", "str_npc1_intro", ":var_9"),
            (val_add, ":var_10", ":var_6"),
            (val_sub, ":var_10", "trp_npc1"),
            (troop_set_slot, ":var_6", ":var_8", ":var_10"),
        (try_end),
    (try_end),
    (try_for_range, ":var_6", "trp_npc1", "trp_kingdom_1_lord"),
        (str_store_troop_name, s10, ":var_6"),
        (troop_get_slot, ":var_11", ":var_6", slot_troop_personalityclash_object),
        (str_store_troop_name, s11, ":var_11"),
        (troop_get_slot, ":var_11", ":var_6", slot_troop_personalityclash2_object),
        (str_store_troop_name, s12, ":var_11"),
        (troop_get_slot, ":var_11", ":var_6", slot_troop_kingsupport_opponent),
        (str_store_troop_name, s13, ":var_11"),
        (troop_get_slot, reg10, ":var_6", slot_troop_morality_type),
        (troop_get_slot, reg11, ":var_6", slot_troop_morality_value),
        (troop_get_slot, reg12, ":var_6", slot_troop_2ary_morality_type),
        (troop_get_slot, reg13, ":var_6", slot_troop_2ary_morality_value),
        (troop_get_slot, reg14, ":var_6", slot_lord_reputation_type),
        (troop_get_slot, ":var_12", ":var_6", slot_troop_home),
        (str_store_party_name, s14, ":var_12"),
        (troop_get_slot, ":var_12", ":var_6", slot_troop_town_with_contacts),
        (str_store_party_name, s15, ":var_12"),
        (troop_get_slot, ":var_13", ":var_6", slot_troop_original_faction),
        (str_store_faction_name, s16, ":var_13"),
        (troop_set_slot, ":var_6", slot_troop_intro, "str_npc_intro"),
        (troop_set_slot, ":var_6", slot_troop_intro_response_1, "str_npc_intro_recruit"),
        (troop_set_slot, ":var_6", slot_troop_intro_response_2, "str_npc_intro_disband"),
        (troop_set_slot, ":var_6", slot_troop_signup_response_1, "str_npc_intro_recruit"),
        (troop_set_slot, ":var_6", slot_troop_signup_response_2, "str_npc_intro_disband"),
    (try_end),
    (call_script, "script_add_log_entry", 45, "trp_player", -1, -1, -1),
    (troop_set_slot, "trp_kingdom_2_pretender", slot_troop_original_faction, "fac_kingdom_2"),
    (troop_set_slot, "trp_kingdom_4_pretender", slot_troop_original_faction, "fac_kingdom_4"),
    (troop_set_slot, "trp_kingdom_9_pretender", slot_troop_original_faction, "fac_kingdom_9"),
    (troop_set_slot, "trp_kingdom_12_pretender", slot_troop_original_faction, "fac_kingdom_12"),
    (troop_set_slot, "trp_kingdom_13_pretender", slot_troop_original_faction, "fac_kingdom_13"),
    (try_for_range, ":var_14", "trp_kingdom_4_pretender", "trp_knight_1_1_wife"),
        (troop_set_slot, ":var_14", slot_lord_reputation_type, 0),
    (try_end),

]),

("objectionable_action",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (assign, ":var_2", -2),
    (try_for_range, ":var_3", "trp_npc1", "trp_kingdom_1_lord"),
        (main_party_has_troop, ":var_3"),
        (eq, 0, 1),
        (try_begin),
            (troop_slot_eq, ":var_3", slot_troop_morality_type, ":var_0"),
            (troop_get_slot, ":var_4", ":var_3", slot_troop_morality_value),
            (try_begin),
                (troop_slot_eq, ":var_3", slot_troop_morality_state, 1),
                (troop_get_slot, ":var_5", ":var_3", slot_troop_morality_penalties),
                (val_mul, ":var_4", 2),
                (val_add, ":var_5", ":var_4"),
                (troop_set_slot, ":var_3", slot_troop_morality_penalties, ":var_5"),
            (else_try),
                (this_or_next|troop_slot_eq, ":var_3", slot_troop_morality_state, 2),
                (eq, "$disable_npc_complaints", 1),
                (troop_get_slot, ":var_5", ":var_3", slot_troop_morality_penalties),
                (val_add, ":var_5", ":var_4"),
                (troop_set_slot, ":var_3", slot_troop_morality_penalties, ":var_5"),
            (else_try),
                (troop_slot_eq, ":var_3", slot_troop_morality_state, 0),
                (gt, ":var_4", ":var_2"),
                (assign, "$npc_with_grievance", ":var_3"),
                (assign, "$npc_grievance_string", ":var_1"),
                (assign, "$npc_grievance_slot", 61),
                (assign, ":var_2", ":var_4"),
                (assign, "$npc_praise_not_complaint", 0),
                (try_begin),
                    (neg|ge, ":var_4", 0),
                    (assign, "$npc_praise_not_complaint", 1),
                (try_end),
            (try_end),
        (else_try),
            (troop_slot_eq, ":var_3", slot_troop_2ary_morality_type, ":var_0"),
            (troop_get_slot, ":var_4", ":var_3", slot_troop_2ary_morality_value),
            (try_begin),
                (troop_slot_eq, ":var_3", slot_troop_2ary_morality_state, 1),
                (troop_get_slot, ":var_5", ":var_3", slot_troop_morality_penalties),
                (val_mul, ":var_4", 2),
                (val_add, ":var_5", ":var_4"),
                (troop_set_slot, ":var_3", slot_troop_morality_penalties, ":var_5"),
            (else_try),
                (this_or_next|troop_slot_eq, ":var_3", slot_troop_2ary_morality_state, 2),
                (eq, "$disable_npc_complaints", 1),
                (troop_get_slot, ":var_5", ":var_3", slot_troop_morality_penalties),
                (val_add, ":var_5", ":var_4"),
                (troop_set_slot, ":var_3", slot_troop_morality_penalties, ":var_5"),
            (else_try),
                (troop_slot_eq, ":var_3", slot_troop_2ary_morality_state, 0),
                (gt, ":var_4", ":var_2"),
                (assign, "$npc_with_grievance", ":var_3"),
                (assign, "$npc_grievance_string", ":var_1"),
                (assign, "$npc_grievance_slot", 65),
                (assign, ":var_2", ":var_4"),
                (assign, "$npc_praise_not_complaint", 0),
                (try_begin),
                    (neg|ge, ":var_4", 0),
                    (assign, "$npc_praise_not_complaint", 1),
                (try_end),
            (try_end),
        (try_end),
        (try_begin),
            (gt, "$npc_with_grievance", 0),
            (eq, "$npc_praise_not_complaint", 0),
            (str_store_troop_name, s4, "$npc_with_grievance"),
            (display_message, "@{s4} looks upset."),
        (try_end),
    (try_end),

]),

("post_battle_personality_clash_check",
[
    (try_for_range, ":var_0", "trp_npc1", "trp_kingdom_1_lord"),
        (eq, "$disable_npc_complaints", 0),
        (main_party_has_troop, ":var_0"),
        (neg|troop_is_wounded, ":var_0"),
        (troop_get_slot, ":var_1", ":var_0", slot_troop_personalityclash2_object),
        (main_party_has_troop, ":var_1"),
        (neg|troop_is_wounded, ":var_1"),
        (try_begin),
            (troop_slot_eq, ":var_0", slot_troop_personalityclash2_state, 0),
            (try_begin),
                (assign, "$npc_with_personality_clash_2", ":var_0"),
            (try_end),
        (try_end),
    (try_end),
    (try_for_range, ":var_0", "trp_npc1", "trp_kingdom_1_lord"),
        (troop_slot_eq, ":var_0", slot_troop_personalitymatch_state, 0),
        (eq, "$disable_npc_complaints", 0),
        (main_party_has_troop, ":var_0"),
        (neg|troop_is_wounded, ":var_0"),
        (troop_get_slot, ":var_1", ":var_0", slot_troop_personalitymatch_object),
        (main_party_has_troop, ":var_1"),
        (neg|troop_is_wounded, ":var_1"),
        (assign, "$npc_with_personality_match", ":var_0"),
    (try_end),
    (try_begin),
        (gt, "$npc_with_personality_clash_2", 0),
        (try_begin),
            (eq, "$cheat_mode", 1),
            (display_message, "str_personality_clash_conversation_begins"),
        (try_end),
        (try_begin),
            (main_party_has_troop, "$npc_with_personality_clash_2"),
            (assign, "$npc_map_talk_context", 74),
            (start_map_conversation, "$npc_with_personality_clash_2"),
        (else_try),
            (assign, "$npc_with_personality_clash_2", 0),
        (try_end),
    (else_try),
        (gt, "$npc_with_personality_match", 0),
        (try_begin),
            (eq, "$cheat_mode", 1),
            (display_message, "str_personality_match_conversation_begins"),
        (try_end),
        (try_begin),
            (main_party_has_troop, "$npc_with_personality_match"),
            (assign, "$npc_map_talk_context", 76),
            (start_map_conversation, "$npc_with_personality_match"),
        (else_try),
            (assign, "$npc_with_personality_match", 0),
        (try_end),
    (try_end),

]),

("event_player_defeated_enemy_party",
[
    (try_begin),
        (check_quest_active, "qst_raid_caravan_to_start_war"),
        (neg|check_quest_concluded, "qst_raid_caravan_to_start_war"),
        (party_slot_eq, "$g_enemy_party", slot_party_type, 11),
        (store_faction_of_party, ":var_0", "$g_enemy_party"),
        (quest_slot_eq, "qst_raid_caravan_to_start_war", 3, ":var_0"),
        (quest_get_slot, ":var_1", "qst_raid_caravan_to_start_war", 11),
        (quest_get_slot, ":var_2", "qst_raid_caravan_to_start_war", 10),
        (val_add, ":var_1", 1),
        (quest_set_slot, "qst_raid_caravan_to_start_war", 11, ":var_1"),
        (try_begin),
            (ge, ":var_1", ":var_2"),
            (quest_get_slot, ":var_3", "qst_raid_caravan_to_start_war", 3),
            (quest_get_slot, ":var_4", "qst_raid_caravan_to_start_war", 6),
            (store_troop_faction, ":var_5", ":var_4"),
            (call_script, "script_diplomacy_start_war_between_kingdoms", ":var_3", ":var_5", 1),
            (call_script, "script_succeed_quest", "qst_raid_caravan_to_start_war"),
        (try_end),
    (try_end),

]),

("event_player_captured_as_prisoner",
[
    (try_begin),
        (check_quest_active, "qst_raid_caravan_to_start_war"),
        (neg|check_quest_concluded, "qst_raid_caravan_to_start_war"),
        (quest_get_slot, ":var_0", "qst_raid_caravan_to_start_war", 3),
        (store_faction_of_party, ":var_1", "$capturer_party"),
        (eq, ":var_0", ":var_1"),
        (call_script, "script_fail_quest", "qst_raid_caravan_to_start_war"),
    (try_end),
    (try_for_range, ":var_2", "trp_npc1", "trp_knight_1_1_wife"),
        (troop_slot_eq, ":var_2", slot_troop_occupation, 2),
        (troop_get_slot, ":var_3", ":var_2", slot_troop_leaded_party),
        (gt, ":var_3", 0),
        (party_is_active, ":var_3"),
        (party_slot_eq, ":var_3", slot_party_ai_state, 11),
        (party_slot_eq, ":var_3", slot_party_ai_object, "p_main_party"),
        (call_script, "script_party_set_ai_state", ":var_3", -1, -1),
        (assign, "$g_recalculate_ais", 1),
    (try_end),

]),

("npc_morale",
[
    (store_script_param_1, ":var_0"),
    (troop_get_slot, ":var_1", ":var_0", slot_troop_morality_penalties),
    (troop_get_slot, ":var_2", ":var_0", slot_troop_personalityclash_penalties),
    (party_get_morale, ":var_3", "p_main_party"),
    (store_sub, ":var_4", ":var_3", ":var_1"),
    (val_sub, ":var_4", ":var_2"),
    (val_add, ":var_4", 50),
    (assign, reg8, ":var_4"),
    (val_mul, ":var_4", 3),
    (val_div, ":var_4", 4),
    (val_clamp, ":var_4", 0, 100),
    (assign, reg5, ":var_3"),
    (assign, reg6, ":var_1"),
    (assign, reg7, ":var_2"),
    (assign, reg9, ":var_4"),
    (try_begin),
        (neg|ge, ":var_1", 3),
        (str_store_string, s7, "str_happy"),
    (else_try),
        (neg|ge, ":var_1", 15),
        (str_store_string, s7, "str_content"),
    (else_try),
        (neg|ge, ":var_1", 30),
        (str_store_string, s7, "str_concerned"),
    (else_try),
        (neg|ge, ":var_1", 45),
        (str_store_string, s7, "str_not_happy"),
    (else_try),
        (str_store_string, s7, "str_miserable"),
    (try_end),
    (try_begin),
        (neg|ge, ":var_2", 3),
        (str_store_string, s6, "str_happy"),
    (else_try),
        (neg|ge, ":var_2", 15),
        (str_store_string, s6, "str_content"),
    (else_try),
        (neg|ge, ":var_2", 30),
        (str_store_string, s6, "str_concerned"),
    (else_try),
        (neg|ge, ":var_2", 45),
        (str_store_string, s6, "str_not_happy"),
    (else_try),
        (str_store_string, s6, "str_miserable"),
    (try_end),
    (try_begin),
        (gt, ":var_4", 80),
        (str_store_string, s8, "str_happy"),
        (str_store_string, s63, "str_bar_enthusiastic"),
    (else_try),
        (gt, ":var_4", 60),
        (str_store_string, s8, "str_content"),
        (str_store_string, s63, "str_bar_content"),
    (else_try),
        (gt, ":var_4", 40),
        (str_store_string, s8, "str_concerned"),
        (str_store_string, s63, "str_bar_weary"),
    (else_try),
        (gt, ":var_4", 20),
        (str_store_string, s8, "str_not_happy"),
        (str_store_string, s63, "str_bar_disgruntled"),
    (else_try),
        (str_store_string, s8, "str_miserable"),
        (str_store_string, s63, "str_bar_miserable"),
    (try_end),
    (str_store_string, s21, "str_npc_morale_report"),
    (assign, reg0, ":var_4"),

]),

("retire_companion",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (remove_member_from_party, ":var_0", "p_main_party"),
    (troop_set_slot, ":var_0", slot_troop_personalityclash_penalties, 0),
    (troop_set_slot, ":var_0", slot_troop_morality_penalties, 0),
    (troop_get_slot, ":var_2", "trp_player", slot_troop_renown),
    (store_add, ":var_3", ":var_2", ":var_1"),
    (troop_set_slot, ":var_0", slot_troop_occupation, 11),
    (troop_set_slot, ":var_0", slot_troop_return_renown, ":var_3"),

]),

("reduce_companion_morale_for_clash",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (troop_get_slot, ":var_3", ":var_0", ":var_2"),
    (troop_get_slot, ":var_4", ":var_0", slot_troop_personalityclash_penalties),
    (troop_get_slot, ":var_5", ":var_1", slot_troop_personalityclash_penalties),
    (try_begin),
        (eq, ":var_3", 1),
        (val_add, ":var_4", 5),
    (else_try),
        (eq, ":var_3", 2),
        (val_add, ":var_5", 5),
    (else_try),
        (eq, ":var_3", 3),
        (val_add, ":var_4", 3),
        (val_add, ":var_5", 3),
    (try_end),
    (troop_set_slot, ":var_0", slot_troop_personalityclash_penalties, ":var_4"),
    (troop_set_slot, ":var_1", slot_troop_personalityclash_penalties, ":var_5"),

]),

("calculate_ransom_amount_for_troop",
[
    (store_script_param, ":var_0", 1),
    (store_troop_faction, ":var_1", ":var_0"),
    (assign, ":var_2", 400),
    (assign, ":var_3", -9),
    (try_begin),
        (faction_slot_eq, ":var_1", slot_faction_leader, ":var_0"),
        (val_add, ":var_2", 4000),
    (else_try),
        (troop_slot_eq, ":var_0", slot_troop_occupation, 6),
        (val_add, ":var_2", 2500),
        (call_script, "script_get_kingdom_lady_social_determinants", ":var_0"),
        (assign, ":var_3", reg0),
    (try_end),
    (assign, ":var_4", 0),
    (try_for_range, ":var_5", "p_town_1_1", "p_salt_mine"),
        (this_or_next|party_slot_eq, ":var_5", slot_town_lord, ":var_0"),
        (party_slot_eq, ":var_5", slot_town_lord, ":var_3"),
        (try_begin),
            (party_slot_eq, ":var_5", slot_party_type, 3),
            (val_add, ":var_4", 4),
        (else_try),
            (party_slot_eq, ":var_5", slot_party_type, 2),
            (val_add, ":var_4", 2),
        (else_try),
            (val_add, ":var_4", 1),
        (try_end),
    (try_end),
    (val_mul, ":var_4", 500),
    (val_add, ":var_2", ":var_4"),
    (troop_get_slot, ":var_6", ":var_0", slot_troop_renown),
    (val_mul, ":var_6", 2),
    (val_add, ":var_2", ":var_6"),
    (store_mul, ":var_7", ":var_2", 3),
    (val_div, ":var_7", 2),
    (store_random_in_range, ":var_8", ":var_2", ":var_7"),
    (val_div, ":var_8", 100),
    (val_mul, ":var_8", 100),
    (val_mul, ":var_8", 2),
    (assign, reg0, ":var_8"),

]),

("offer_ransom_amount_to_player_for_prisoners_in_party",
[
    (store_script_param, ":var_0", 1),
    (assign, ":var_1", 0),
    (party_get_num_prisoner_stacks, ":var_2", ":var_0"),
    (try_for_range, ":var_3", 0, ":var_2"),
        (eq, ":var_1", 0),
        (party_prisoner_stack_get_troop_id, ":var_4", ":var_0", ":var_3"),
        (troop_is_hero, ":var_4"),
        (this_or_next|troop_slot_eq, ":var_4", slot_troop_occupation, 2),
        (troop_slot_eq, ":var_4", slot_troop_occupation, 6),
        (store_troop_faction, ":var_5", ":var_4"),
        (store_random_in_range, ":var_6", 0, 100),
        (try_begin),
            (faction_slot_eq, ":var_5", slot_faction_state, 0),
            (neg|gt, ":var_6", 5),
            (neg|eq, "$g_ransom_offer_rejected", 1),
            (assign, ":var_2", 0),
            (assign, ":var_1", 1),
            (assign, "$g_ransom_offer_troop", ":var_4"),
            (assign, "$g_ransom_offer_party", ":var_0"),
            (jump_to_menu, "mnu_enemy_offer_ransom_for_prisoner"),
        (try_end),
    (try_end),
    (assign, reg0, ":var_1"),

]),

("event_hero_taken_prisoner_by_player",
[
    (store_script_param_1, ":var_0"),
    (try_begin),
        (check_quest_active, "qst_persuade_lords_to_make_peace"),
        (try_begin),
            (quest_slot_eq, "qst_persuade_lords_to_make_peace", 2, ":var_0"),
            (val_mul, ":var_0", -1),
            (quest_set_slot, "qst_persuade_lords_to_make_peace", 2, ":var_0"),
            (val_mul, ":var_0", -1),
        (else_try),
            (quest_slot_eq, "qst_persuade_lords_to_make_peace", 4, ":var_0"),
            (val_mul, ":var_0", -1),
            (quest_set_slot, "qst_persuade_lords_to_make_peace", 4, ":var_0"),
            (val_mul, ":var_0", -1),
        (try_end),
        (neg|check_quest_concluded, "qst_persuade_lords_to_make_peace"),
        (neg|quest_slot_ge, "qst_persuade_lords_to_make_peace", 2, 0),
        (neg|quest_slot_ge, "qst_persuade_lords_to_make_peace", 4, 0),
        (call_script, "script_succeed_quest", "qst_persuade_lords_to_make_peace"),
    (try_end),
    (call_script, "script_update_troop_location_notes", ":var_0", 0),

]),

("cf_check_hero_can_escape_from_player",
[
    (store_script_param_1, ":var_0"),
    (assign, ":var_1", 0),
    (try_begin),
        (check_quest_active, "qst_persuade_lords_to_make_peace"),
        (this_or_next|quest_slot_eq, "qst_persuade_lords_to_make_peace", 2, ":var_0"),
        (quest_slot_eq, "qst_persuade_lords_to_make_peace", 4, ":var_0"),
        (assign, ":var_1", 1),
    (else_try),
        (ge, ":var_0", "trp_sea_raider_leader"),
        (neg|ge, ":var_0", "trp_bandit_leaders_end"),
        (try_begin),
            (check_quest_active, "qst_learn_where_merchant_brother_is"),
            (assign, ":var_1", 1),
        (else_try),
            (assign, ":var_1", -1),
        (try_end),
    (try_end),
    (assign, ":var_2", 0),
    (try_begin),
        (eq, ":var_1", 0),
        (store_random_in_range, ":var_3", 0, 100),
        (neg|ge, ":var_3", 70),
        (assign, ":var_2", 1),
    (else_try),
        (eq, ":var_1", -1),
        (assign, ":var_2", 1),
    (try_end),
    (eq, ":var_2", 1),

]),

("cf_party_remove_random_regular_troop",
[
    (store_script_param_1, ":var_0"),
    (party_get_num_companion_stacks, ":var_1", ":var_0"),
    (assign, ":var_2", 0),
    (try_for_range, ":var_3", 0, ":var_1"),
        (party_stack_get_troop_id, ":var_4", ":var_0", ":var_3"),
        (neg|troop_is_hero, ":var_4"),
        (party_stack_get_size, ":var_5", ":var_0", ":var_3"),
        (val_add, ":var_2", ":var_5"),
    (try_end),
    (assign, reg0, -1),
    (gt, ":var_2", 0),
    (store_random_in_range, ":var_6", 0, ":var_2"),
    (try_for_range, ":var_3", 0, ":var_1"),
        (party_stack_get_troop_id, ":var_4", ":var_0", ":var_3"),
        (neg|troop_is_hero, ":var_4"),
        (party_stack_get_size, ":var_5", ":var_0", ":var_3"),
        (val_sub, ":var_6", ":var_5"),
        (neg|ge, ":var_6", 0),
        (assign, ":var_1", 0),
        (party_remove_members, ":var_0", ":var_4", 1),
        (assign, reg0, ":var_4"),
    (try_end),

]),

("place_player_banner_near_inventory",
[
    (troop_get_slot, ":var_0", "trp_player", slot_troop_banner_scene_prop),
    (try_begin),
        (gt, ":var_0", 0),
        (scene_prop_get_instance, ":var_1", ":var_0", 0),
        (try_begin),
            (ge, ":var_1", 0),
            (get_player_agent_no, ":var_2"),
            (agent_get_look_position, pos1, ":var_2"),
            (position_move_y, pos1, -500),
            (position_rotate_z, pos1, 180),
            (position_set_z_to_ground_level, pos1),
            (position_move_z, pos1, 300),
            (prop_instance_set_position, ":var_1", pos1),
        (try_end),
        (scene_prop_get_instance, ":var_3", "spr_banner_pole", 0),
        (try_begin),
            (ge, ":var_3", 0),
            (position_move_z, pos1, -320),
            (prop_instance_set_position, ":var_3", pos1),
        (try_end),
    (else_try),
        (init_position, pos1),
        (position_move_z, pos1, -1000000),
        (scene_prop_get_instance, ":var_1", "spr_banner_a", 0),
        (try_begin),
            (ge, ":var_1", 0),
            (prop_instance_set_position, ":var_1", pos1),
        (try_end),
        (scene_prop_get_instance, ":var_3", "spr_banner_pole", 0),
        (try_begin),
            (ge, ":var_3", 0),
            (prop_instance_set_position, ":var_3", pos1),
        (try_end),
    (try_end),

]),

("place_player_banner_near_inventory_bms",
[
    (troop_get_slot, ":var_0", "trp_player", slot_troop_banner_scene_prop),
    (try_begin),
        (gt, ":var_0", 0),
        (replace_scene_props, "spr_banner_a", ":var_0"),
    (try_end),

]),

("stay_captive_for_hours",
[
    (store_script_param, ":var_0", 1),
    (store_current_hours, ":var_1"),
    (val_add, ":var_1", ":var_0"),
    (val_max, "$g_check_autos_at_hour", ":var_1"),
    (val_add, ":var_0", 1),
    (rest_for_hours, ":var_0", 3, 0),

]),

("set_parties_around_player_ignore_player",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (try_for_parties, ":var_2"),
        (party_is_active, ":var_2"),
        (store_distance_to_party_from_party, ":var_3", "p_main_party", ":var_2"),
        (neg|ge, ":var_3", ":var_0"),
        (party_ignore_player, ":var_2", ":var_1"),
    (try_end),

]),

("randomly_make_prisoner_heroes_escape_from_party",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (assign, ":var_2", -1),
    (assign, ":var_3", -1),
    (try_begin),
        (check_quest_active, "qst_rescue_lord_by_replace"),
        (quest_get_slot, ":var_2", "qst_rescue_lord_by_replace", 2),
    (try_end),
    (try_begin),
        (check_quest_active, "qst_deliver_message_to_prisoner_lord"),
        (quest_get_slot, ":var_3", "qst_deliver_message_to_prisoner_lord", 2),
    (try_end),
    (party_get_num_prisoner_stacks, ":var_4", ":var_0"),
    (try_for_range_backwards, ":var_5", 0, ":var_4"),
        (party_prisoner_stack_get_troop_id, ":var_6", ":var_0", ":var_5"),
        (troop_is_hero, ":var_6"),
        (neg|eq, ":var_6", ":var_2"),
        (neg|eq, ":var_6", ":var_3"),
        (troop_slot_eq, ":var_6", slot_troop_occupation, 2),
        (store_random_in_range, ":var_7", 0, 1000),
        (neg|ge, ":var_7", ":var_1"),
        (party_remove_prisoners, ":var_0", ":var_6", 1),
        (call_script, "script_remove_troop_from_prison", ":var_6"),
        (str_store_troop_name_link, s1, ":var_6"),
        (try_begin),
            (eq, ":var_0", "p_main_party"),
            (str_store_string, s2, "@your party"),
        (else_try),
            (str_store_party_name, s2, ":var_0"),
        (try_end),
        (assign, reg0, 0),
        (try_begin),
            (this_or_next|eq, ":var_0", "p_main_party"),
            (party_slot_eq, ":var_0", slot_town_lord, "trp_player"),
            (assign, reg0, 1),
        (try_end),
        (store_troop_faction, ":var_8", ":var_6"),
        (str_store_faction_name_link, s3, ":var_8"),
        (display_message, "@{reg0?One of your prisoners, :}{s1} of {s3} has escaped from captivity!"),
    (try_end),

]),

("fill_tournament_participants_troop",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (assign, ":var_2", 0),
    (try_begin),
        (eq, ":var_1", 1),
        (party_get_num_companion_stacks, ":var_3", "p_main_party"),
        (try_for_range, ":var_4", 0, ":var_3"),
            (party_stack_get_troop_id, ":var_5", "p_main_party", ":var_4"),
            (troop_is_hero, ":var_5"),
            (neg|eq, ":var_5", "trp_kidnapped_girl"),
            (troop_set_slot, "trp_tournament_participants", ":var_2", ":var_5"),
            (val_add, ":var_2", 1),
        (try_end),
    (try_end),
    (party_collect_attachments_to_party, ":var_0", "p_temp_party"),
    (party_get_num_companion_stacks, ":var_3", "p_temp_party"),
    (try_for_range, ":var_4", 0, ":var_3"),
        (party_stack_get_troop_id, ":var_5", "p_temp_party", ":var_4"),
        (troop_is_hero, ":var_5"),
        (troop_set_slot, "trp_tournament_participants", ":var_2", ":var_5"),
        (val_add, ":var_2", 1),
    (try_end),
    (try_for_range, ":var_5", "trp_xerina", "trp_tutorial_trainer"),
        (store_random_in_range, ":var_6", 0, 100),
        (neg|ge, ":var_6", 25),
        (troop_set_slot, "trp_tournament_participants", ":var_2", ":var_5"),
        (val_add, ":var_2", 1),
    (try_end),
    (store_faction_of_party, ":var_7", ":var_0"),
    (call_script, "script_raf_aor_faction_to_region", ":var_7"),
    (assign, ":var_8", ":var_2"),
    (try_for_range, ":var_2", ":var_8", 64),
        (store_random_in_range, ":var_6", 0, 3),
        (try_begin),
            (eq, ":var_6", 0),
            (try_begin),
                (eq, reg0, 10),
                (assign, ":var_9", "trp_andalus_horse_4"),
            (else_try),
                (eq, reg0, 11),
                (assign, ":var_9", "trp_marinid_mounted_skirmisher_3"),
            (else_try),
                (eq, reg0, 12),
                (assign, ":var_9", "trp_mamluke_heavy_horse_archer"),
            (else_try),
                (eq, reg0, 1),
                (assign, ":var_9", "trp_balt_noble_1"),
            (else_try),
                (eq, reg0, 9),
                (assign, ":var_9", "trp_byz_castle_2"),
            (else_try),
                (eq, reg0, 8),
                (assign, ":var_9", "trp_euro_horse_2"),
            (else_try),
                (eq, reg0, 3),
                (assign, ":var_9", "trp_rus_horse_2"),
            (else_try),
                (eq, reg0, 5),
                (assign, ":var_9", "trp_euro_horse_4"),
            (else_try),
                (eq, reg0, 13),
                (assign, ":var_9", "trp_iberian_medium_cavalry"),
            (else_try),
                (eq, reg0, 14),
                (assign, ":var_9", "trp_iberian_medium_cavalry"),
            (else_try),
                (eq, reg0, 7),
                (assign, ":var_9", "trp_gaelic_knight"),
            (else_try),
                (eq, reg0, 4),
                (assign, ":var_9", "trp_tatar_veteran_horse_archer"),
            (else_try),
                (eq, reg0, 2),
                (assign, ":var_9", "trp_nordic_medium_cavalry"),
            (else_try),
                (eq, reg0, 6),
                (assign, ":var_9", "trp_euro_horse_4"),
            (else_try),
                (assign, ":var_9", "trp_euro_horse_4"),
            (try_end),
            (troop_set_slot, "trp_tournament_participants", ":var_2", ":var_9"),
        (else_try),
            (eq, ":var_6", 1),
            (try_begin),
                (eq, reg0, 10),
                (assign, ":var_9", "trp_andalus_horse_4"),
            (else_try),
                (eq, reg0, 11),
                (assign, ":var_9", "trp_marinid_mounted_skirmisher_3"),
            (else_try),
                (eq, reg0, 12),
                (assign, ":var_9", "trp_mamluke_heavy_horse_archer"),
            (else_try),
                (eq, reg0, 1),
                (assign, ":var_9", "trp_balt_noble_2"),
            (else_try),
                (eq, reg0, 9),
                (assign, ":var_9", "trp_byz_castle_3"),
            (else_try),
                (eq, reg0, 8),
                (assign, ":var_9", "trp_euro_horse_4"),
            (else_try),
                (eq, reg0, 3),
                (assign, ":var_9", "trp_rus_horse_3"),
            (else_try),
                (eq, reg0, 5),
                (assign, ":var_9", "trp_euro_horse_4"),
            (else_try),
                (eq, reg0, 13),
                (assign, ":var_9", "trp_iberian_squire"),
            (else_try),
                (eq, reg0, 14),
                (assign, ":var_9", "trp_iberian_squire"),
            (else_try),
                (eq, reg0, 7),
                (assign, ":var_9", "trp_gaelic_knight"),
            (else_try),
                (eq, reg0, 4),
                (assign, ":var_9", "trp_tatar_lancer"),
            (else_try),
                (eq, reg0, 2),
                (assign, ":var_9", "trp_nordic_squire"),
            (else_try),
                (eq, reg0, 6),
                (assign, ":var_9", "trp_euro_horse_4"),
            (else_try),
                (assign, ":var_9", "trp_euro_horse_4"),
            (try_end),
            (troop_set_slot, "trp_tournament_participants", ":var_2", ":var_9"),
        (else_try),
            (eq, ":var_6", 2),
            (try_begin),
                (eq, reg0, 10),
                (assign, ":var_9", "trp_andalus_horse_4"),
            (else_try),
                (eq, reg0, 11),
                (assign, ":var_9", "trp_marinid_lancer"),
            (else_try),
                (eq, reg0, 12),
                (assign, ":var_9", "trp_mamluke_elite_horse_archer"),
            (else_try),
                (eq, reg0, 1),
                (assign, ":var_9", "trp_balt_noble_3"),
            (else_try),
                (eq, reg0, 9),
                (assign, ":var_9", "trp_byz_castle_4"),
            (else_try),
                (eq, reg0, 8),
                (assign, ":var_9", "trp_euro_horse_4"),
            (else_try),
                (eq, reg0, 3),
                (assign, ":var_9", "trp_rus_horse_4"),
            (else_try),
                (eq, reg0, 14),
                (assign, ":var_9", "trp_rus_horse_4"),
            (else_try),
                (eq, reg0, 5),
                (assign, ":var_9", "trp_euro_horse_4"),
            (else_try),
                (eq, reg0, 13),
                (assign, ":var_9", "trp_iberian_knight"),
            (else_try),
                (eq, reg0, 7),
                (assign, ":var_9", "trp_gaelic_knight"),
            (else_try),
                (eq, reg0, 4),
                (assign, ":var_9", "trp_tatar_heavy_lancer"),
            (else_try),
                (eq, reg0, 2),
                (assign, ":var_9", "trp_nordic_knight"),
            (else_try),
                (eq, reg0, 6),
                (assign, ":var_9", "trp_euro_horse_4"),
            (else_try),
                (assign, ":var_9", "trp_euro_horse_4"),
            (try_end),
            (troop_set_slot, "trp_tournament_participants", ":var_2", ":var_9"),
        (else_try),
            (troop_set_slot, "trp_tournament_participants", ":var_2", "trp_euro_horse_4"),
        (try_end),
    (try_end),

]),

("get_num_tournament_participants",
[
    (assign, ":var_0", 0),
    (try_for_range, ":var_1", 0, 64),
        (troop_slot_ge, "trp_tournament_participants", ":var_1", 0),
        (val_add, ":var_0", 1),
    (try_end),
    (assign, reg0, ":var_0"),

]),

("get_random_tournament_participant",
[
    (call_script, "script_get_num_tournament_participants"),
    (assign, ":var_0", reg0),
    (store_random_in_range, ":var_1", 0, ":var_0"),
    (assign, ":var_2", 1),
    (try_for_range, ":var_3", 0, 64),
        (eq, ":var_2", 1),
        (troop_slot_ge, "trp_tournament_participants", ":var_3", 0),
        (val_sub, ":var_1", 1),
        (neg|ge, ":var_1", 0),
        (assign, ":var_2", 0),
        (troop_get_slot, ":var_4", "trp_tournament_participants", ":var_3"),
        (troop_set_slot, "trp_tournament_participants", ":var_3", -1),
    (try_end),
    (assign, reg0, ":var_4"),

]),

("add_tournament_participant",
[
    (store_script_param, ":var_0", 1),
    (assign, ":var_1", 1),
    (try_for_range, ":var_2", 0, 64),
        (eq, ":var_1", 1),
        (troop_slot_eq, "trp_tournament_participants", ":var_2", -1),
        (troop_set_slot, "trp_tournament_participants", ":var_2", ":var_0"),
        (assign, ":var_1", 0),
    (try_end),

]),

("get_random_tournament_team_amount_and_size",
[
    (call_script, "script_get_num_tournament_participants"),
    (assign, ":var_0", reg0),
    (party_get_slot, ":var_1", "$current_town", slot_town_tournament_max_teams),
    (val_add, ":var_1", 1),
    (party_get_slot, ":var_2", "$current_town", slot_town_tournament_max_team_size),
    (val_add, ":var_2", 1),
    (assign, ":var_3", ":var_0"),
    (val_min, ":var_3", ":var_1"),
    (assign, ":var_4", ":var_0"),
    (val_min, ":var_4", ":var_2"),
    (assign, ":var_5", 1),
    (try_begin),
        (ge, ":var_0", 32),
        (assign, ":var_5", 2),
        (val_min, ":var_5", ":var_2"),
    (try_end),
    (assign, ":var_6", 500),
    (try_for_range, ":var_7", 0, ":var_6"),
        (store_random_in_range, ":var_8", 2, ":var_3"),
        (store_random_in_range, ":var_9", ":var_5", ":var_4"),
        (store_mul, ":var_10", ":var_8", ":var_9"),
        (neg|gt, ":var_10", ":var_0"),
        (store_sub, ":var_11", ":var_0", ":var_10"),
        (neg|eq, ":var_11", 1),
        (assign, ":var_6", 0),
    (try_end),
    (try_begin),
        (gt, ":var_6", 0),
        (assign, ":var_8", 2),
        (assign, ":var_9", 1),
    (try_end),
    (assign, reg0, ":var_8"),
    (assign, reg1, ":var_9"),

]),

("get_troop_priority_point_for_tournament",
[
    (store_script_param, ":var_0", 1),
    (assign, ":var_1", 0),
    (try_begin),
        (ge, ":var_0", 0),
        (val_add, ":var_1", 40000),
        (try_begin),
            (eq, ":var_0", "trp_player"),
            (val_add, ":var_1", 80000),
        (try_end),
        (try_begin),
            (troop_is_hero, ":var_0"),
            (val_add, ":var_1", 20000),
        (try_end),
        (try_begin),
            (troop_slot_eq, ":var_0", slot_troop_occupation, 5),
            (val_add, ":var_1", 10000),
        (else_try),
            (troop_slot_eq, ":var_0", slot_troop_occupation, 2),
            (troop_get_slot, ":var_2", ":var_0", slot_troop_renown),
            (val_add, ":var_1", ":var_2"),
            (val_add, ":var_1", 1000),
        (else_try),
            (store_character_level, ":var_3", ":var_0"),
            (val_add, ":var_1", ":var_3"),
        (try_end),
    (try_end),
    (assign, reg0, ":var_1"),

]),

("sort_tournament_participant_troops",
[
    (try_for_range, ":var_0", 0, 63),
        (store_add, ":var_1", ":var_0", 1),
        (try_for_range, ":var_2", ":var_1", 64),
            (troop_get_slot, ":var_3", "trp_tournament_participants", ":var_0"),
            (troop_get_slot, ":var_4", "trp_tournament_participants", ":var_2"),
            (call_script, "script_get_troop_priority_point_for_tournament", ":var_3"),
            (assign, ":var_5", reg0),
            (call_script, "script_get_troop_priority_point_for_tournament", ":var_4"),
            (assign, ":var_6", reg0),
            (gt, ":var_6", ":var_5"),
            (troop_set_slot, "trp_tournament_participants", ":var_0", ":var_4"),
            (troop_set_slot, "trp_tournament_participants", ":var_2", ":var_3"),
        (try_end),
    (try_end),

]),

("remove_tournament_participants_randomly",
[
    (store_script_param, ":var_0", 1),
    (try_for_range, ":var_1", 0, ":var_0"),
        (assign, ":var_2", 0),
        (try_for_range, ":var_3", 0, 64),
            (troop_get_slot, ":var_4", "trp_tournament_participants", ":var_3"),
            (ge, ":var_4", 0),
            (store_character_level, ":var_5", ":var_4"),
            (val_min, ":var_5", 38),
            (store_sub, ":var_6", 40, ":var_5"),
            (val_add, ":var_2", ":var_6"),
        (try_end),
        (store_random_in_range, ":var_7", 0, ":var_2"),
        (assign, ":var_8", 1),
        (try_for_range, ":var_3", 0, 64),
            (eq, ":var_8", 1),
            (troop_get_slot, ":var_4", "trp_tournament_participants", ":var_3"),
            (ge, ":var_4", 0),
            (store_character_level, ":var_5", ":var_4"),
            (val_min, ":var_5", 38),
            (store_sub, ":var_6", 40, ":var_5"),
            (val_sub, ":var_7", ":var_6"),
            (neg|ge, ":var_7", 0),
            (troop_set_slot, "trp_tournament_participants", ":var_3", -1),
            (assign, ":var_8", 0),
        (try_end),
    (try_end),

]),

("end_tournament_fight",
[
    (store_script_param, ":var_0", 1),
    (call_script, "script_get_num_tournament_participants"),
    (assign, ":var_1", reg0),
    (store_div, ":var_2", ":var_1", 2),
    (call_script, "script_remove_tournament_participants_randomly", ":var_2"),
    (assign, ":var_3", "$g_tournament_num_participants_for_fight"),
    (val_div, ":var_3", 2),
    (get_player_agent_no, ":var_4"),
    (agent_get_team, ":var_5", ":var_4"),
    (try_for_agents, ":var_6"),
        (agent_is_human, ":var_6"),
        (agent_get_troop_id, ":var_7", ":var_6"),
        (neg|is_between, ":var_7", "trp_town_1_arena_master", "trp_town_1_armorer"),
        (agent_get_team, ":var_8", ":var_6"),
        (assign, ":var_9", 0),
        (try_begin),
            (eq, ":var_0", 1),
            (eq, ":var_8", ":var_5"),
            (val_add, ":var_9", 5000000),
        (try_end),
        (agent_get_kill_count, ":var_10", ":var_6", 1),
        (store_mul, ":var_11", ":var_10", 160000),
        (val_add, ":var_9", ":var_11"),
        (call_script, "script_get_troop_priority_point_for_tournament", ":var_7"),
        (val_add, ":var_9", reg0),
        (try_begin),
            (eq, ":var_6", ":var_4"),
            (eq, ":var_0", 0),
            (assign, ":var_12", 1),
            (try_begin),
                (ge, ":var_10", 2),
                (assign, ":var_12", 0),
            (else_try),
                (eq, ":var_10", 1),
                (neg|gt, "$g_tournament_cur_tier", 1),
                (assign, ":var_12", 0),
            (try_end),
            (eq, ":var_12", 1),
            (assign, ":var_9", 0),
        (try_end),
        (agent_set_slot, ":var_6", slot_agent_tournament_point, ":var_9"),
    (try_end),
    (try_for_range, ":var_13", 0, ":var_3"),
        (assign, ":var_14", 0),
        (assign, ":var_15", -1),
        (try_for_agents, ":var_6"),
            (agent_is_human, ":var_6"),
            (agent_get_slot, ":var_16", ":var_6", slot_agent_tournament_point),
            (gt, ":var_16", ":var_14"),
            (assign, ":var_15", ":var_6"),
            (assign, ":var_14", ":var_16"),
        (try_end),
        (agent_set_slot, ":var_15", slot_agent_tournament_point, 0),
        (agent_get_troop_id, ":var_7", ":var_15"),
        (call_script, "script_add_tournament_participant", ":var_7"),
    (try_end),
    (assign, "$g_tournament_player_team_won", ":var_0"),
    (jump_to_menu, "mnu_town_tournament"),

]),

("get_win_amount_for_tournament_bet",
[
    (party_get_slot, ":var_0", "$current_town", slot_town_player_odds),
    (try_begin),
        (eq, "$g_tournament_cur_tier", 0),
        (assign, ":var_1", 120),
    (else_try),
        (eq, "$g_tournament_cur_tier", 1),
        (assign, ":var_1", 90),
    (else_try),
        (eq, "$g_tournament_cur_tier", 2),
        (assign, ":var_1", 60),
    (else_try),
        (eq, "$g_tournament_cur_tier", 3),
        (assign, ":var_1", 40),
    (else_try),
        (eq, "$g_tournament_cur_tier", 4),
        (assign, ":var_1", 20),
    (else_try),
        (assign, ":var_1", 8),
    (try_end),
    (val_mul, ":var_1", ":var_0"),
    (val_div, ":var_1", 100),
    (val_add, ":var_1", 100),
    (assign, reg0, ":var_1"),

]),

("tournament_place_bet",
[
    (store_script_param, ":var_0", 1),
    (call_script, "script_get_win_amount_for_tournament_bet"),
    (assign, ":var_1", reg0),
    (val_mul, ":var_1", ":var_0"),
    (val_div, ":var_1", 100),
    (val_sub, ":var_1", ":var_0"),
    (val_add, "$g_tournament_bet_placed", ":var_0"),
    (val_add, "$g_tournament_bet_win_amount", ":var_1"),
    (troop_remove_gold, "trp_player", ":var_0"),
    (assign, "$g_tournament_last_bet_tier", "$g_tournament_cur_tier"),

]),

("calculate_amount_of_cattle_can_be_stolen",
[
    (store_script_param, ":var_0", 1),
    (call_script, "script_get_max_skill_of_player_party", "skl_looting"),
    (assign, ":var_1", reg0),
    (store_mul, ":var_2", ":var_1", 2),
    (call_script, "script_party_count_fit_for_battle", "p_main_party"),
    (store_add, ":var_3", reg0, 10),
    (val_div, ":var_3", 10),
    (val_add, ":var_2", ":var_3"),
    (party_get_slot, ":var_4", ":var_0", slot_town_trade_routes_end),
    (val_min, ":var_2", ":var_4"),
    (assign, reg0, ":var_2"),

]),

("draw_banner_to_region",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (store_script_param, ":var_3", 4),
    (store_script_param, ":var_4", 5),
    (store_script_param, ":var_5", 6),
    (store_script_param, ":var_6", 7),
    (store_script_param, ":var_7", 8),
    (store_script_param, ":var_8", 9),
    (store_script_param, ":var_9", 10),
    (troop_get_slot, ":var_10", ":var_0", slot_troop_custom_banner_bg_type),
    (val_add, ":var_10", "mesh_custom_banner_bg"),
    (troop_get_slot, ":var_11", ":var_0", slot_troop_custom_banner_bg_color_1),
    (troop_get_slot, ":var_12", ":var_0", slot_troop_custom_banner_bg_color_2),
    (troop_get_slot, ":var_13", ":var_0", slot_troop_custom_banner_num_charges),
    (troop_get_slot, ":var_14", ":var_0", slot_troop_custom_banner_positioning),
    (call_script, "script_get_troop_custom_banner_num_positionings", ":var_0"),
    (assign, ":var_15", reg0),
    (val_mod, ":var_14", ":var_15"),
    (init_position, pos2),
    (position_set_x, pos2, ":var_3"),
    (position_set_y, pos2, ":var_4"),
    (assign, ":var_16", 1),
    (convert_to_fixed_point, ":var_16"),
    (position_set_z, pos2, ":var_16"),
    (init_position, pos1),
    (position_set_x, pos1, ":var_1"),
    (position_set_y, pos1, ":var_2"),
    (position_move_z, pos1, -20),
    (init_position, pos3),
    (position_set_x, pos3, ":var_7"),
    (position_set_y, pos3, ":var_7"),
    (position_set_z, pos3, ":var_16"),
    (try_begin),
        (this_or_next|eq, ":var_10", "mesh_custom_banner_bg"),
        (this_or_next|eq, ":var_10", "mesh_custom_banner_fg01"),
        (this_or_next|eq, ":var_10", "mesh_custom_banner_fg02"),
        (this_or_next|eq, ":var_10", "mesh_custom_banner_fg03"),
        (this_or_next|eq, ":var_10", "mesh_custom_banner_fg08"),
        (this_or_next|eq, ":var_10", "mesh_custom_banner_fg09"),
        (this_or_next|eq, ":var_10", "mesh_custom_banner_fg10"),
        (this_or_next|eq, ":var_10", "mesh_custom_banner_fg11"),
        (this_or_next|eq, ":var_10", "mesh_custom_banner_fg12"),
        (this_or_next|eq, ":var_10", "mesh_custom_banner_fg13"),
        (this_or_next|eq, ":var_10", "mesh_custom_banner_fg16"),
        (eq, ":var_10", "mesh_custom_banner_fg17"),
        (cur_tableau_add_mesh_with_scale_and_vertex_color, ":var_10", 1, 2, 0, ":var_11"),
    (else_try),
        (cur_tableau_add_mesh_with_scale_and_vertex_color, ":var_10", 1, 3, 0, ":var_11"),
    (try_end),
    (position_move_z, pos1, -20),
    (position_move_x, pos2, ":var_3"),
    (position_move_y, pos2, ":var_4"),
    (cur_tableau_add_mesh_with_scale_and_vertex_color, "mesh_custom_banner_bg", 1, 2, 0, ":var_12"),
    (assign, ":var_17", ":var_5"),
    (val_min, ":var_17", ":var_6"),
    (val_min, ":var_17", ":var_8"),
    (call_script, "script_get_custom_banner_charge_type_position_scale_color", "trp_player", ":var_14"),
    (try_begin),
        (this_or_next|eq, ":var_9", 2),
        (eq, ":var_9", 3),
        (assign, ":var_18", 0),
        (try_begin),
            (eq, ":var_13", 1),
            (assign, ":var_18", 1),
        (else_try),
            (eq, ":var_13", 2),
            (eq, ":var_14", 1),
            (assign, ":var_18", 1),
        (else_try),
            (eq, ":var_13", 3),
            (eq, ":var_14", 1),
            (assign, ":var_18", 1),
        (try_end),
        (try_begin),
            (eq, ":var_18", 1),
            (val_add, ":var_2", 30),
        (try_end),
    (try_end),
    (try_begin),
        (ge, ":var_13", 1),
        (val_mul, reg1, ":var_17"),
        (val_div, reg1, 10000),
        (position_get_x, ":var_19", pos0),
        (position_get_y, ":var_20", pos0),
        (val_mul, ":var_19", ":var_5"),
        (val_mul, ":var_20", ":var_6"),
        (val_div, ":var_19", 10000),
        (val_div, ":var_20", 10000),
        (val_add, ":var_19", ":var_1"),
        (val_add, ":var_20", ":var_2"),
        (position_set_x, pos0, ":var_19"),
        (position_set_y, pos0, ":var_20"),
        (assign, ":var_21", reg1),
        (convert_to_fixed_point, ":var_21"),
        (store_mul, ":var_22", ":var_21", -1),
        (init_position, pos4),
        (position_set_x, pos4, ":var_21"),
        (position_set_y, pos4, ":var_21"),
        (position_set_z, pos4, ":var_21"),
        (store_div, ":var_23", reg0, 256),
        (try_begin),
            (this_or_next|eq, ":var_23", 1),
            (eq, ":var_23", 3),
            (position_set_x, pos4, ":var_22"),
        (try_end),
        (try_begin),
            (this_or_next|eq, ":var_23", 2),
            (eq, ":var_23", 3),
            (position_set_y, pos4, ":var_22"),
        (try_end),
        (val_mod, reg0, 256),
        (cur_tableau_add_mesh_with_scale_and_vertex_color, reg0, 0, 4, 0, reg2),
    (try_end),
    (try_begin),
        (ge, ":var_13", 2),
        (val_mul, reg4, ":var_17"),
        (val_div, reg4, 10000),
        (position_get_x, ":var_19", pos1),
        (position_get_y, ":var_20", pos1),
        (val_mul, ":var_19", ":var_5"),
        (val_mul, ":var_20", ":var_6"),
        (val_div, ":var_19", 10000),
        (val_div, ":var_20", 10000),
        (val_add, ":var_19", ":var_1"),
        (val_add, ":var_20", ":var_2"),
        (position_set_x, pos1, ":var_19"),
        (position_set_y, pos1, ":var_20"),
        (assign, ":var_21", reg4),
        (convert_to_fixed_point, ":var_21"),
        (store_mul, ":var_22", ":var_21", -1),
        (init_position, pos4),
        (position_set_x, pos4, ":var_21"),
        (position_set_y, pos4, ":var_21"),
        (position_set_z, pos4, ":var_21"),
        (store_div, ":var_23", reg3, 256),
        (try_begin),
            (this_or_next|eq, ":var_23", 1),
            (eq, ":var_23", 3),
            (position_set_x, pos4, ":var_22"),
        (try_end),
        (try_begin),
            (this_or_next|eq, ":var_23", 2),
            (eq, ":var_23", 3),
            (position_set_y, pos4, ":var_22"),
        (try_end),
        (val_mod, reg3, 256),
        (cur_tableau_add_mesh_with_scale_and_vertex_color, reg3, 1, 4, 0, reg5),
    (try_end),
    (try_begin),
        (ge, ":var_13", 3),
        (val_mul, reg7, ":var_17"),
        (val_div, reg7, 10000),
        (position_get_x, ":var_19", pos2),
        (position_get_y, ":var_20", pos2),
        (val_mul, ":var_19", ":var_5"),
        (val_mul, ":var_20", ":var_6"),
        (val_div, ":var_19", 10000),
        (val_div, ":var_20", 10000),
        (val_add, ":var_19", ":var_1"),
        (val_add, ":var_20", ":var_2"),
        (position_set_x, pos2, ":var_19"),
        (position_set_y, pos2, ":var_20"),
        (assign, ":var_21", reg7),
        (convert_to_fixed_point, ":var_21"),
        (store_mul, ":var_22", ":var_21", -1),
        (init_position, pos4),
        (position_set_x, pos4, ":var_21"),
        (position_set_y, pos4, ":var_21"),
        (position_set_z, pos4, ":var_21"),
        (store_div, ":var_23", reg6, 256),
        (try_begin),
            (this_or_next|eq, ":var_23", 1),
            (eq, ":var_23", 3),
            (position_set_x, pos4, ":var_22"),
        (try_end),
        (try_begin),
            (this_or_next|eq, ":var_23", 2),
            (eq, ":var_23", 3),
            (position_set_y, pos4, ":var_22"),
        (try_end),
        (val_mod, reg6, 256),
        (cur_tableau_add_mesh_with_scale_and_vertex_color, reg6, 2, 4, 0, reg8),
    (try_end),
    (try_begin),
        (ge, ":var_13", 4),
        (val_mul, reg10, ":var_17"),
        (val_div, reg10, 10000),
        (position_get_x, ":var_19", pos3),
        (position_get_y, ":var_20", pos3),
        (val_mul, ":var_19", ":var_5"),
        (val_mul, ":var_20", ":var_6"),
        (val_div, ":var_19", 10000),
        (val_div, ":var_20", 10000),
        (val_add, ":var_19", ":var_1"),
        (val_add, ":var_20", ":var_2"),
        (position_set_x, pos3, ":var_19"),
        (position_set_y, pos3, ":var_20"),
        (assign, ":var_21", reg10),
        (convert_to_fixed_point, ":var_21"),
        (store_mul, ":var_22", ":var_21", -1),
        (init_position, pos4),
        (position_set_x, pos4, ":var_21"),
        (position_set_y, pos4, ":var_21"),
        (position_set_z, pos4, ":var_21"),
        (store_div, ":var_23", reg9, 256),
        (try_begin),
            (this_or_next|eq, ":var_23", 1),
            (eq, ":var_23", 3),
            (position_set_x, pos4, ":var_22"),
        (try_end),
        (try_begin),
            (this_or_next|eq, ":var_23", 2),
            (eq, ":var_23", 3),
            (position_set_y, pos4, ":var_22"),
        (try_end),
        (val_mod, reg9, 256),
        (cur_tableau_add_mesh_with_scale_and_vertex_color, reg9, 3, 4, 0, reg11),
    (try_end),

]),

("get_troop_custom_banner_num_positionings",
[
    (store_script_param, ":var_0", 1),
    (troop_get_slot, ":var_1", ":var_0", slot_troop_custom_banner_num_charges),
    (try_begin),
        (eq, ":var_1", 1),
        (assign, ":var_2", 2),
    (else_try),
        (eq, ":var_1", 2),
        (assign, ":var_2", 4),
    (else_try),
        (eq, ":var_1", 3),
        (assign, ":var_2", 6),
    (else_try),
        (assign, ":var_2", 2),
    (try_end),
    (assign, reg0, ":var_2"),

]),

("get_custom_banner_charge_type_position_scale_color",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (troop_get_slot, ":var_2", ":var_0", slot_troop_custom_banner_num_charges),
    (init_position, pos0),
    (init_position, pos1),
    (init_position, pos2),
    (init_position, pos3),
    (troop_get_slot, reg0, ":var_0", slot_troop_custom_banner_charge_type_1),
    (val_add, reg0, "mesh_custom_banner_charge_01"),
    (troop_get_slot, reg2, ":var_0", slot_troop_custom_banner_charge_color_1),
    (troop_get_slot, reg3, ":var_0", slot_troop_custom_banner_charge_type_2),
    (val_add, reg3, "mesh_custom_banner_charge_01"),
    (troop_get_slot, reg5, ":var_0", slot_troop_custom_banner_charge_color_2),
    (troop_get_slot, reg6, ":var_0", slot_troop_custom_banner_charge_type_3),
    (val_add, reg6, "mesh_custom_banner_charge_01"),
    (troop_get_slot, reg8, ":var_0", slot_troop_custom_banner_charge_color_3),
    (troop_get_slot, reg9, ":var_0", slot_troop_custom_banner_charge_type_4),
    (val_add, reg9, "mesh_custom_banner_charge_01"),
    (troop_get_slot, reg11, ":var_0", slot_troop_custom_banner_charge_color_4),
    (try_begin),
        (eq, ":var_2", 1),
        (try_begin),
            (eq, ":var_1", 0),
            (assign, reg1, 100),
        (else_try),
            (assign, reg1, 50),
        (try_end),
    (else_try),
        (eq, ":var_2", 2),
        (try_begin),
            (eq, ":var_1", 0),
            (position_set_y, pos0, 25),
            (position_set_y, pos1, -25),
            (assign, reg1, 40),
            (assign, reg4, 40),
        (else_try),
            (eq, ":var_1", 1),
            (position_set_x, pos0, -25),
            (position_set_x, pos1, 25),
            (assign, reg1, 40),
            (assign, reg4, 40),
        (else_try),
            (eq, ":var_1", 2),
            (position_set_x, pos0, -25),
            (position_set_y, pos0, 25),
            (position_set_x, pos1, 25),
            (position_set_y, pos1, -25),
            (assign, reg1, 50),
            (assign, reg4, 50),
        (else_try),
            (position_set_x, pos0, -25),
            (position_set_y, pos0, -25),
            (position_set_x, pos1, 25),
            (position_set_y, pos1, 25),
            (assign, reg1, 50),
            (assign, reg4, 50),
        (try_end),
    (else_try),
        (eq, ":var_2", 3),
        (try_begin),
            (eq, ":var_1", 0),
            (position_set_y, pos0, 33),
            (position_set_y, pos2, -33),
            (assign, reg1, 30),
            (assign, reg4, 30),
            (assign, reg7, 30),
        (else_try),
            (eq, ":var_1", 1),
            (position_set_x, pos0, -33),
            (position_set_x, pos2, 33),
            (assign, reg1, 30),
            (assign, reg4, 30),
            (assign, reg7, 30),
        (else_try),
            (eq, ":var_1", 2),
            (position_set_x, pos0, -30),
            (position_set_y, pos0, 30),
            (position_set_x, pos2, 30),
            (position_set_y, pos2, -30),
            (assign, reg1, 35),
            (assign, reg4, 35),
            (assign, reg7, 35),
        (else_try),
            (eq, ":var_1", 3),
            (position_set_x, pos0, -30),
            (position_set_y, pos0, -30),
            (position_set_x, pos2, 30),
            (position_set_y, pos2, 30),
            (assign, reg1, 35),
            (assign, reg4, 35),
            (assign, reg7, 35),
        (else_try),
            (eq, ":var_1", 4),
            (position_set_x, pos0, -25),
            (position_set_y, pos0, -25),
            (position_set_y, pos1, 25),
            (position_set_x, pos2, 25),
            (position_set_y, pos2, -25),
            (assign, reg1, 50),
            (assign, reg4, 50),
            (assign, reg7, 50),
        (else_try),
            (position_set_x, pos0, -25),
            (position_set_y, pos0, 25),
            (position_set_y, pos1, -25),
            (position_set_x, pos2, 25),
            (position_set_y, pos2, 25),
            (assign, reg1, 50),
            (assign, reg4, 50),
            (assign, reg7, 50),
        (try_end),
    (else_try),
        (try_begin),
            (eq, ":var_1", 0),
            (position_set_x, pos0, -25),
            (position_set_y, pos0, 25),
            (position_set_x, pos1, 25),
            (position_set_y, pos1, 25),
            (position_set_x, pos2, -25),
            (position_set_y, pos2, -25),
            (position_set_x, pos3, 25),
            (position_set_y, pos3, -25),
            (assign, reg1, 50),
            (assign, reg4, 50),
            (assign, reg7, 50),
            (assign, reg10, 50),
        (else_try),
            (position_set_y, pos0, 30),
            (position_set_x, pos1, -30),
            (position_set_x, pos2, 30),
            (position_set_y, pos3, -30),
            (assign, reg1, 35),
            (assign, reg4, 35),
            (assign, reg7, 35),
            (assign, reg10, 35),
        (try_end),
    (try_end),

]),

("get_random_custom_banner",
[
    (store_script_param, ":var_0", 1),
    (store_random_in_range, ":var_1", 1, 5),
    (troop_set_slot, ":var_0", slot_troop_custom_banner_num_charges, ":var_1"),
    (store_random_in_range, ":var_2", 0, 42),
    (call_script, "script_get_custom_banner_color_from_index", ":var_2"),
    (assign, ":var_3", reg0),
    (troop_set_slot, ":var_0", slot_troop_custom_banner_bg_color_1, ":var_3"),
    (assign, ":var_4", 1),
    (try_for_range, ":var_5", 0, ":var_4"),
        (store_random_in_range, ":var_2", 0, 42),
        (call_script, "script_get_custom_banner_color_from_index", ":var_2"),
        (assign, ":var_6", reg0),
        (try_begin),
            (call_script, "script_cf_check_color_visibility", ":var_3", ":var_6"),
            (troop_set_slot, ":var_0", slot_troop_custom_banner_bg_color_2, ":var_6"),
        (else_try),
            (val_add, ":var_4", 1),
        (try_end),
    (try_end),
    (assign, ":var_4", 4),
    (assign, ":var_7", 0),
    (try_for_range, ":var_5", 0, ":var_4"),
        (store_random_in_range, ":var_2", 0, 42),
        (call_script, "script_get_custom_banner_color_from_index", ":var_2"),
        (assign, ":var_8", reg0),
        (try_begin),
            (call_script, "script_cf_check_color_visibility", ":var_8", ":var_3"),
            (call_script, "script_cf_check_color_visibility", ":var_8", ":var_6"),
            (store_add, ":var_9", ":var_7", 87),
            (troop_set_slot, ":var_0", ":var_9", ":var_8"),
            (store_random_in_range, ":var_10", "mesh_custom_banner_charge_01", "mesh_tableau_mesh_custom_banner"),
            (val_sub, ":var_10", "mesh_custom_banner_charge_01"),
            (store_add, ":var_9", ":var_7", 92),
            (troop_set_slot, ":var_0", ":var_9", ":var_10"),
            (val_add, ":var_7", 1),
        (else_try),
            (val_add, ":var_4", 1),
        (try_end),
    (try_end),
    (store_random_in_range, ":var_11", "mesh_custom_banner_bg", "mesh_custom_banner_charge_01"),
    (val_sub, ":var_11", "mesh_custom_banner_bg"),
    (troop_set_slot, ":var_0", slot_troop_custom_banner_bg_type, ":var_11"),
    (store_random_in_range, ":var_12", "mesh_custom_banner_01", "mesh_custom_banner_bg"),
    (val_sub, ":var_12", "mesh_custom_banner_01"),
    (troop_set_slot, ":var_0", slot_troop_custom_banner_flag_type, ":var_12"),
    (store_random_in_range, ":var_13", 0, 4),
    (troop_set_slot, ":var_0", slot_troop_custom_banner_positioning, ":var_13"),

]),

("get_custom_banner_color_from_index",
[
    (store_script_param, ":var_0", 1),
    (assign, ":var_1", 4278190080),
    (assign, ":var_2", 0),
    (assign, ":var_3", 0),
    (assign, ":var_4", 0),
    (store_mod, ":var_5", ":var_0", 7),
    (try_begin),
        (eq, ":var_5", 0),
        (assign, ":var_4", 255),
    (else_try),
        (eq, ":var_5", 1),
        (assign, ":var_2", 238),
    (else_try),
        (eq, ":var_5", 2),
        (assign, ":var_2", 251),
        (assign, ":var_3", 172),
    (else_try),
        (eq, ":var_5", 3),
        (assign, ":var_2", 95),
        (assign, ":var_4", 255),
    (else_try),
        (eq, ":var_5", 4),
        (assign, ":var_2", 5),
        (assign, ":var_3", 68),
    (else_try),
        (eq, ":var_5", 5),
        (assign, ":var_2", 238),
        (assign, ":var_3", 238),
        (assign, ":var_4", 238),
    (else_try),
        (assign, ":var_2", 34),
        (assign, ":var_3", 34),
        (assign, ":var_4", 34),
    (try_end),
    (store_div, ":var_6", ":var_0", 7),
    (store_sub, ":var_6", 8, ":var_6"),
    (val_mul, ":var_2", ":var_6"),
    (val_div, ":var_2", 8),
    (val_mul, ":var_3", ":var_6"),
    (val_div, ":var_3", 8),
    (val_mul, ":var_4", ":var_6"),
    (val_div, ":var_4", 8),
    (val_mul, ":var_3", 256),
    (val_mul, ":var_2", 65536),
    (val_add, ":var_1", ":var_4"),
    (val_add, ":var_1", ":var_3"),
    (val_add, ":var_1", ":var_2"),
    (assign, reg0, ":var_1"),

]),

("cf_check_color_visibility",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_mod, ":var_2", ":var_0", 256),
    (store_div, ":var_3", ":var_0", 256),
    (val_mod, ":var_3", 256),
    (store_div, ":var_4", ":var_0", 65536),
    (val_mod, ":var_4", 256),
    (store_mod, ":var_5", ":var_1", 256),
    (store_div, ":var_6", ":var_1", 256),
    (val_mod, ":var_6", 256),
    (store_div, ":var_7", ":var_1", 65536),
    (val_mod, ":var_7", 256),
    (store_sub, ":var_8", ":var_4", ":var_7"),
    (val_abs, ":var_8"),
    (store_sub, ":var_9", ":var_3", ":var_6"),
    (val_abs, ":var_9"),
    (store_sub, ":var_10", ":var_2", ":var_5"),
    (val_abs, ":var_10"),
    (assign, ":var_11", 0),
    (val_max, ":var_11", ":var_8"),
    (val_max, ":var_11", ":var_9"),
    (val_max, ":var_11", ":var_10"),
    (ge, ":var_11", 64),

]),

("get_next_active_kingdom",
[
    (store_script_param, ":var_0", 1),
    (assign, ":var_1", "fac_kingdoms_end"),
    (try_for_range, ":var_2", "fac_player_supporters_faction", ":var_1"),
        (val_add, ":var_0", 1),
        (try_begin),
            (ge, ":var_0", "fac_kingdoms_end"),
            (assign, ":var_0", "fac_player_supporters_faction"),
        (try_end),
        (faction_slot_eq, ":var_0", slot_faction_state, 0),
        (neg|eq, ":var_0", "fac_player_supporters_faction"),
        (assign, ":var_1", 0),
    (try_end),
    (assign, reg0, ":var_0"),

]),

("remove_cattles_if_herd_is_close_to_party",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (assign, ":var_2", ":var_1"),
    (try_for_parties, ":var_3"),
        (gt, ":var_2", 0),
        (party_slot_eq, ":var_3", slot_party_type, 17),
        (store_distance_to_party_from_party, ":var_4", ":var_3", ":var_0"),
        (neg|ge, ":var_4", 3),
        (assign, ":var_5", 1),
        (try_begin),
            (check_quest_active, "qst_move_cattle_herd"),
            (quest_slot_eq, "qst_move_cattle_herd", 8, ":var_3"),
            (assign, ":var_5", 0),
        (try_end),
        (eq, ":var_5", 1),
        (party_count_companions_of_type, ":var_6", ":var_3", "trp_cattle"),
        (try_begin),
            (neg|gt, ":var_6", ":var_2"),
            (assign, ":var_7", ":var_6"),
            (remove_party, ":var_3"),
        (else_try),
            (assign, ":var_7", ":var_2"),
            (party_remove_members, ":var_3", "trp_cattle", ":var_2"),
        (try_end),
        (val_sub, ":var_2", ":var_7"),
        (try_begin),
            (party_slot_eq, ":var_0", slot_party_type, 4),
            (party_get_slot, ":var_8", ":var_0", slot_town_trade_routes_end),
            (val_add, ":var_8", ":var_7"),
            (party_set_slot, ":var_0", slot_town_trade_routes_end, ":var_8"),
        (try_end),
        (assign, reg3, ":var_7"),
        (str_store_party_name_link, s1, ":var_0"),
        (display_message, "@You brought {reg3} heads of cattle to {s1}."),
        (try_begin),
            (gt, "$cheat_mode", 0),
            (assign, reg4, ":var_8"),
            (display_message, "@{!}Village now has {reg4}"),
        (try_end),
    (try_end),
    (store_sub, reg0, ":var_1", ":var_2"),

]),

("get_rumor_to_s61",
[
    (store_script_param, ":var_0", 1),
    (store_current_hours, ":var_1"),
    (store_div, ":var_2", ":var_1", 24),
    (assign, ":var_3", 0),
    (assign, ":var_4", 3),
    (try_for_range, ":var_5", 0, ":var_4"),
        (store_mul, ":var_6", ":var_5", 6781),
        (val_add, ":var_6", ":var_0"),
        (store_mod, ":var_7", ":var_6", 7),
        (val_add, ":var_6", ":var_1"),
        (try_begin),
            (eq, ":var_7", 0),
            (try_begin),
                (store_sub, ":var_8", "p_castle_1_1", "p_town_1_1"),
                (store_mod, ":var_9", ":var_6", ":var_8"),
                (val_add, ":var_9", "p_town_1_1"),
                (party_slot_ge, ":var_9", slot_town_has_tournament, 1),
                (neg|eq, ":var_9", "$current_town"),
                (str_store_party_name, s62, ":var_9"),
                (str_store_string, s61, "@I heard that there will be a tournament in {s62} soon."),
                (assign, ":var_3", 1),
            (try_end),
        (else_try),
            (eq, ":var_7", 1),
            (try_begin),
                (store_sub, ":var_8", "trp_knight_1_1_wife", "trp_kingdom_1_lord"),
                (store_mod, ":var_10", ":var_6", ":var_8"),
                (val_add, ":var_10", "trp_kingdom_1_lord"),
                (is_between, ":var_10", "trp_npc1", "trp_knight_1_1_wife"),
                (troop_get_slot, ":var_11", ":var_10", slot_lord_reputation_type),
                (gt, ":var_11", 0),
                (store_add, ":var_12", ":var_11", "str_gossip_about_character_default"),
                (str_store_troop_name, s6, ":var_10"),
                (str_store_string, s61, ":var_12"),
                (assign, ":var_3", 1),
            (try_end),
        (else_try),
            (eq, ":var_7", 2),
            (try_begin),
                (store_sub, ":var_8", "itm_siege_supply", "itm_spice"),
                (store_add, ":var_13", ":var_6", ":var_2"),
                (store_mod, ":var_13", ":var_13", ":var_8"),
                (store_add, ":var_14", ":var_13", 250),
                (val_add, ":var_13", "itm_spice"),
                (store_mul, ":var_15", 1000, 3),
                (val_div, ":var_15", 4),
                (assign, ":var_16", -1),
                (try_for_range, ":var_17", 0, 10),
                    (store_sub, ":var_8", "p_castle_1_1", "p_town_1_1"),
                    (store_add, ":var_18", ":var_6", ":var_17"),
                    (store_mod, ":var_9", ":var_18", ":var_8"),
                    (val_add, ":var_9", "p_town_1_1"),
                    (neg|eq, ":var_9", "$g_encountered_party"),
                    (party_get_slot, ":var_19", ":var_9", ":var_14"),
                    (neg|ge, ":var_19", ":var_15"),
                    (assign, ":var_15", ":var_19"),
                    (assign, ":var_16", ":var_9"),
                (try_end),
                (ge, ":var_16", 0),
                (str_store_item_name, s62, ":var_13"),
                (str_store_party_name, s63, ":var_16"),
                (str_store_string, s61, "@I heard that one can buy {s62} very cheap at {s63}."),
                (assign, ":var_3", 1),
            (try_end),
        (else_try),
            (eq, ":var_7", 3),
            (try_begin),
                (store_sub, ":var_8", "itm_siege_supply", "itm_spice"),
                (store_add, ":var_13", ":var_6", ":var_2"),
                (store_mod, ":var_13", ":var_13", ":var_8"),
                (store_add, ":var_14", ":var_13", 250),
                (val_add, ":var_13", "itm_spice"),
                (store_mul, ":var_20", 1000, 5),
                (val_div, ":var_20", 4),
                (assign, ":var_21", -1),
                (try_for_range, ":var_17", 0, 10),
                    (store_sub, ":var_8", "p_castle_1_1", "p_town_1_1"),
                    (store_add, ":var_18", ":var_6", ":var_17"),
                    (store_mod, ":var_9", ":var_18", ":var_8"),
                    (val_add, ":var_9", "p_town_1_1"),
                    (neg|eq, ":var_9", "$g_encountered_party"),
                    (party_get_slot, ":var_19", ":var_9", ":var_14"),
                    (gt, ":var_19", ":var_20"),
                    (assign, ":var_20", ":var_19"),
                    (assign, ":var_21", ":var_9"),
                (try_end),
                (ge, ":var_21", 0),
                (str_store_item_name, s62, ":var_13"),
                (str_store_party_name, s63, ":var_21"),
                (str_store_string, s61, "@I heard that they pay a very high price for {s62} at {s63}."),
                (assign, ":var_3", 1),
            (try_end),
        (try_end),
        (try_begin),
            (gt, ":var_3", 0),
            (assign, ":var_4", 0),
        (try_end),
    (try_end),
    (assign, reg0, ":var_3"),

]),

("lord_comment_to_s43",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (troop_get_slot, ":var_2", ":var_0", slot_lord_reputation_type),
    (try_begin),
        (try_begin),
            (eq, ":var_2", 8),
            (assign, ":var_2", 6),
        (else_try),
            (eq, ":var_2", 10),
            (assign, ":var_2", 4),
        (else_try),
            (eq, ":var_2", 9),
            (assign, ":var_2", 6),
        (try_end),
    (try_end),
    (store_add, ":var_3", ":var_2", ":var_1"),
    (str_store_string, s43, ":var_3"),
    (assign, reg0, ":var_3"),

]),

("add_log_entry",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (store_script_param, ":var_3", 4),
    (store_script_param, ":var_4", 5),
    (assign, ":var_5", -1),
    (assign, ":var_6", -1),
    (assign, ":var_7", -1),
    (try_begin),
        (eq, ":var_0", 76),
        (str_store_troop_name, s20, ":var_1"),
        (str_store_troop_name, s21, ":var_3"),
        (display_message, "@attacks neutral {s20} {s21}"),
    (try_end),
    (try_begin),
        (party_is_active, ":var_2", 0),
        (party_get_slot, ":var_5", ":var_2", slot_town_lord),
        (store_faction_of_party, ":var_6", ":var_2"),
    (else_try),
        (assign, ":var_5", 0),
        (assign, ":var_6", 0),
    (try_end),
    (try_begin),
        (is_between, ":var_3", 0, "trp_local_merchant"),
        (store_troop_faction, ":var_7", ":var_3"),
    (else_try),
        (assign, ":var_7", 0),
    (try_end),
    (val_add, "$num_log_entries", 1),
    (store_current_hours, ":var_8"),
    (troop_set_slot, "trp_log_array_entry_type", "$num_log_entries", ":var_0"),
    (troop_set_slot, "trp_log_array_entry_time", "$num_log_entries", ":var_8"),
    (troop_set_slot, "trp_log_array_actor", "$num_log_entries", ":var_1"),
    (troop_set_slot, "trp_log_array_center_object", "$num_log_entries", ":var_2"),
    (troop_set_slot, "trp_log_array_center_object_lord", "$num_log_entries", ":var_5"),
    (troop_set_slot, "trp_log_array_center_object_faction", "$num_log_entries", ":var_6"),
    (troop_set_slot, "trp_log_array_troop_object", "$num_log_entries", ":var_3"),
    (troop_set_slot, "trp_log_array_troop_object_faction", "$num_log_entries", ":var_7"),
    (troop_set_slot, "trp_log_array_faction_object", "$num_log_entries", ":var_4"),
    (try_begin),
        (eq, "$cheat_mode", 1),
        (assign, reg3, "$num_log_entries"),
        (assign, reg4, ":var_0"),
        (display_message, "@{!}Log entry {reg3}: type {reg4}"),
        (try_begin),
            (gt, ":var_2", 0),
            (neg|eq, ":var_0", 3),
            (neg|eq, ":var_0", 5),
            (party_is_active, ":var_2"),
            (str_store_party_name, s4, ":var_2"),
            (display_message, "@{!}Center: {s4}"),
        (try_end),
        (try_begin),
            (gt, ":var_3", 0),
            (neg|eq, ":var_0", 3),
            (neg|eq, ":var_0", 5),
            (str_store_troop_name, s4, ":var_3"),
            (display_message, "@{!}Troop: {s4}"),
        (try_end),
        (try_begin),
            (gt, ":var_5", 0),
            (neg|eq, ":var_0", 3),
            (neg|eq, ":var_0", 5),
            (str_store_troop_name, s4, ":var_5"),
            (display_message, "@{!}Lord: {s4}"),
        (try_end),
    (try_end),
    (try_begin),
        (this_or_next|eq, ":var_0", 11),
        (this_or_next|eq, ":var_0", 19),
        (eq, ":var_0", 18),
        (try_begin),
            (eq, "$cheat_mode", 1),
            (display_message, "@{!}Ally party is present"),
        (try_end),
        (try_for_range, ":var_9", "trp_npc1", "trp_knight_1_1_wife"),
            (party_count_companions_of_type, ":var_10", "p_collective_friends", ":var_9"),
            (gt, ":var_10", 0),
            (try_begin),
                (this_or_next|eq, ":var_0", 19),
                (eq, ":var_0", 18),
                (try_begin),
                    (neg|is_between, ":var_9", "trp_npc1", "trp_kingdom_1_lord"),
                    (call_script, "script_change_player_relation_with_troop", ":var_9", 1),
                (else_try),
                    (faction_slot_eq, "fac_player_supporters_faction", slot_faction_state, 0),
                    (call_script, "script_change_player_relation_with_troop", ":var_9", 1),
                (try_end),
            (else_try),
                (troop_set_slot, ":var_9", slot_troop_present_at_event, "$num_log_entries"),
            (try_end),
            (try_begin),
                (eq, "$cheat_mode", 1),
                (str_store_troop_name, s4, ":var_9"),
                (display_message, "@{!}{s4} is present at event"),
            (try_end),
        (try_end),
    (try_end),

]),

("get_relevant_comment_for_log_entry",
[
    (store_script_param, ":var_0", 1),
    (troop_get_slot, ":var_1", "trp_log_array_entry_type", ":var_0"),
    (troop_get_slot, ":var_2", "trp_log_array_entry_time", ":var_0"),
    (troop_get_slot, ":var_3", "trp_log_array_actor", ":var_0"),
    (troop_get_slot, ":var_4", "trp_log_array_center_object", ":var_0"),
    (troop_get_slot, ":var_5", "trp_log_array_center_object_lord", ":var_0"),
    (troop_get_slot, ":var_6", "trp_log_array_center_object_faction", ":var_0"),
    (troop_get_slot, ":var_7", "trp_log_array_troop_object", ":var_0"),
    (troop_get_slot, ":var_8", "trp_log_array_troop_object_faction", ":var_0"),
    (troop_get_slot, ":var_9", "trp_log_array_faction_object", ":var_0"),
    (assign, ":var_10", 0),
    (assign, ":var_11", -1),
    (assign, ":var_12", -1),
    (assign, ":var_13", 0),
    (troop_get_slot, ":var_14", "$g_talk_troop", slot_lord_reputation_type),
    (store_current_hours, ":var_15"),
    (store_sub, ":var_16", ":var_15", ":var_2"),
    (assign, ":var_17", 0),
    (try_begin),
        (gt, "$players_kingdom", 0),
        (store_relation, ":var_17", "$players_kingdom", ":var_8"),
    (try_end),
    (try_begin),
        (eq, "$cheat_mode", -1),
        (try_begin),
            (assign, reg5, ":var_0"),
            (assign, reg6, ":var_1"),
            (assign, reg8, ":var_2"),
            (gt, "$players_kingdom", 0),
            (try_begin),
                (gt, ":var_8", 0),
                (assign, reg7, ":var_17"),
                (display_message, "@{!}Event #{reg5}, type {reg6}, time {reg8}: player's kingdom relation to troop object = {reg7}"),
            (else_try),
                (gt, ":var_6", 0),
                (assign, reg7, ":var_17"),
                (display_message, "@{!}Event #{reg5}, type {reg6}, time {reg8}: player's kingdom relation to center object faction = {reg7}"),
            (else_try),
                (gt, ":var_9", 0),
                (assign, reg7, ":var_17"),
                (display_message, "@{!}Event #{reg5}, type {reg6}, time {reg8}: player's kingdom relation to faction object = {reg7}"),
            (else_try),
                (display_message, "@{!}Event #{reg5}, type {reg6}, time {reg8}. No relevant kingdom relation"),
            (try_end),
        (else_try),
            (display_message, "@{!}Event #{reg5}, type {reg6}, time {reg8}. Player unaffiliated"),
        (try_end),
    (try_end),
    (try_begin),
        (eq, ":var_1", 45),
        (eq, "$g_talk_troop_met", 0),
        (is_between, "$g_talk_troop_faction_relation", -5, 5),
        (is_between, "$g_talk_troop_relation", -5, 5),
        (assign, ":var_10", 25),
        (troop_get_slot, ":var_18", "trp_player", slot_troop_renown),
        (troop_get_slot, ":var_19", "trp_player", slot_troop_banner_scene_prop),
        (store_random_in_range, ":var_20", 100, 200),
        (try_begin),
            (eq, ":var_14", 0),
            (gt, "$players_kingdom", 0),
            (assign, ":var_11", "str_comment_intro_liege_affiliated"),
            (try_begin),
                (faction_slot_eq, "$players_kingdom", slot_faction_leader, "trp_player"),
                (assign, ":var_11", "str_comment_intro_liege_affiliated_to_player"),
            (try_end),
        (else_try),
            (eq, "$character_gender", 1),
            (call_script, "script_troop_get_romantic_chemistry_with_troop", "$g_talk_troop", "trp_player"),
            (assign, ":var_21", reg0),
            (store_random_in_range, ":var_22", 0, 2),
            (this_or_next|eq, ":var_22", 0),
            (gt, ":var_21", 10),
            (try_begin),
                (this_or_next|gt, ":var_18", ":var_20"),
                (eq, "$g_disable_condescending_comments", 1),
                (assign, ":var_11", "str_comment_intro_female_famous_liege"),
                (val_add, ":var_11", ":var_14"),
            (else_try),
                (ge, ":var_21", 9),
                (assign, ":var_11", "str_comment_intro_female_admiring_liege"),
                (val_add, ":var_11", ":var_14"),
            (else_try),
                (gt, ":var_19", 0),
                (assign, ":var_11", "str_comment_intro_female_noble_liege"),
                (val_add, ":var_11", ":var_14"),
            (else_try),
                (assign, ":var_11", "str_comment_intro_female_common_liege"),
                (val_add, ":var_11", ":var_14"),
            (try_end),
            (try_begin),
                (eq, ":var_11", "str_comment_intro_female_common_badtempered"),
                (assign, ":var_12", "str_rejoinder_intro_female_common_badtempered"),
            (else_try),
                (eq, ":var_11", "str_comment_intro_female_noble_pitiless"),
                (assign, ":var_12", "str_rejoinder_intro_female_noble_pitiless"),
            (else_try),
                (eq, ":var_11", "str_comment_intro_female_common_pitiless"),
                (assign, ":var_12", "str_rejoinder_intro_female_common_pitiless"),
            (else_try),
                (eq, ":var_11", "str_comment_intro_female_noble_sadistic"),
                (assign, ":var_12", "str_rejoinder_intro_female_noble_sadistic"),
            (else_try),
                (eq, ":var_11", "str_comment_intro_female_common_sadistic"),
                (assign, ":var_12", "str_rejoinder_intro_female_common_sadistic"),
            (else_try),
                (eq, ":var_11", "str_comment_intro_female_common_upstanding"),
                (assign, ":var_12", "str_rejoinder_intro_female_common_upstanding"),
            (else_try),
                (eq, ":var_11", "str_comment_intro_female_noble_upstanding"),
                (assign, ":var_12", "str_rejoinder_intro_female_noble_upstanding"),
            (else_try),
                (eq, ":var_11", "str_comment_intro_female_common_martial"),
                (assign, ":var_12", "str_rejoinder_intro_female_common_martial"),
            (else_try),
                (eq, ":var_11", "str_comment_intro_female_sadistic_admiring"),
                (assign, ":var_12", "str_rejoinder_intro_female_sadistic_admiring"),
            (else_try),
                (eq, ":var_11", "str_comment_intro_female_badtempered_admiring"),
                (assign, ":var_12", "str_rejoinder_intro_female_badtempered_admiring"),
            (else_try),
                (eq, ":var_11", "str_comment_intro_female_pitiless_admiring"),
                (assign, ":var_12", "str_rejoinder_intro_female_pitiless_admiring"),
            (try_end),
        (else_try),
            (try_begin),
                (gt, ":var_18", ":var_20"),
                (assign, ":var_11", "str_comment_intro_famous_liege"),
                (val_add, ":var_11", ":var_14"),
            (else_try),
                (gt, ":var_19", 0),
                (assign, ":var_11", "str_comment_intro_noble_liege"),
                (val_add, ":var_11", ":var_14"),
                (try_begin),
                    (eq, ":var_11", "str_comment_intro_noble_sadistic"),
                    (assign, ":var_12", "str_rejoinder_intro_noble_sadistic"),
                (try_end),
            (else_try),
                (assign, ":var_11", "str_comment_intro_common_liege"),
                (val_add, ":var_11", ":var_14"),
            (try_end),
        (try_end),
    (else_try),
        (eq, ":var_1", 1),
        (eq, ":var_3", "trp_player"),
        (try_begin),
            (eq, ":var_5", "$g_talk_troop"),
            (assign, ":var_10", 200),
            (assign, ":var_13", -1),
            (assign, ":var_11", "str_comment_you_raided_my_village_default"),
            (try_begin),
                (neg|ge, "$g_talk_troop_faction_relation", -5),
                (this_or_next|eq, ":var_14", 6),
                (eq, ":var_14", 7),
                (assign, ":var_11", "str_comment_you_raided_my_village_enemy_benevolent"),
            (else_try),
                (neg|ge, "$g_talk_troop_faction_relation", -5),
                (this_or_next|eq, ":var_14", 4),
                (eq, ":var_14", 3),
                (assign, ":var_11", "str_comment_you_raided_my_village_enemy_coldblooded"),
            (else_try),
                (neg|ge, "$g_talk_troop_faction_relation", -5),
                (this_or_next|eq, ":var_14", 2),
                (eq, ":var_14", 5),
                (assign, ":var_11", "str_comment_you_raided_my_village_enemy_spiteful"),
            (else_try),
                (neg|ge, "$g_talk_troop_faction_relation", -5),
                (assign, ":var_11", "str_comment_you_raided_my_village_enemy"),
            (else_try),
                (neg|ge, "$g_talk_troop_relation", -5),
                (this_or_next|eq, ":var_14", 2),
                (eq, ":var_14", 5),
                (assign, ":var_11", "str_comment_you_raided_my_village_unfriendly_spiteful"),
            (else_try),
                (gt, "$g_talk_troop_relation", 5),
                (assign, ":var_11", "str_comment_you_raided_my_village_friendly"),
            (try_end),
        (try_end),
    (else_try),
        (eq, ":var_1", 2),
        (eq, ":var_3", "trp_player"),
        (try_begin),
            (eq, ":var_5", "$g_talk_troop"),
            (assign, ":var_10", 30),
            (assign, ":var_13", -1),
            (assign, ":var_11", "str_comment_you_robbed_my_village_default"),
            (try_begin),
                (neg|ge, "$g_talk_troop_faction_relation", -5),
                (this_or_next|eq, ":var_14", 4),
                (eq, ":var_14", 3),
                (assign, ":var_11", "str_comment_you_robbed_my_village_enemy_coldblooded"),
            (else_try),
                (neg|ge, "$g_talk_troop_faction_relation", -5),
                (assign, ":var_11", "str_comment_you_robbed_my_village_enemy"),
            (else_try),
                (gt, "$g_talk_troop_relation", 5),
                (this_or_next|eq, ":var_14", 2),
                (eq, ":var_14", 5),
                (assign, ":var_11", "str_comment_you_robbed_my_village_friendly_spiteful"),
            (else_try),
                (gt, "$g_talk_troop_relation", 5),
                (assign, ":var_11", "str_comment_you_robbed_my_village_friendly"),
            (try_end),
        (try_end),
    (else_try),
        (eq, ":var_1", 3),
        (eq, ":var_3", "trp_player"),
        (eq, ":var_9", "$g_talk_troop_faction"),
        (eq, ":var_4", -1),
        (eq, ":var_7", -1),
        (faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "$g_talk_troop"),
        (assign, ":var_10", 30),
        (assign, ":var_13", -1),
        (assign, ":var_11", "str_comment_you_accosted_my_caravan_default"),
        (try_begin),
            (neg|ge, "$g_talk_troop_faction_relation", -5),
            (assign, ":var_11", "str_comment_you_accosted_my_caravan_enemy"),
        (try_end),
    (else_try),
        (eq, ":var_1", 4),
        (eq, ":var_3", "trp_player"),
        (try_begin),
            (eq, ":var_5", "$g_talk_troop"),
            (assign, ":var_10", 40),
            (assign, ":var_13", 0),
            (try_begin),
                (this_or_next|eq, ":var_14", 6),
                (eq, ":var_14", 7),
                (assign, ":var_11", "str_comment_you_helped_villagers_benevolent"),
                (assign, ":var_13", 1),
            (else_try),
                (gt, "$g_talk_troop_relation", 5),
                (this_or_next|eq, ":var_14", 2),
                (eq, ":var_14", 5),
                (assign, ":var_11", "str_comment_you_helped_villagers_friendly_cruel"),
                (assign, ":var_13", -1),
            (else_try),
                (neg|ge, "$g_talk_troop_relation", -5),
                (this_or_next|eq, ":var_14", 2),
                (eq, ":var_14", 5),
                (assign, ":var_11", "str_comment_you_helped_villagers_unfriendly_spiteful"),
                (assign, ":var_13", -1),
            (else_try),
                (gt, "$g_talk_troop_relation", 5),
                (assign, ":var_11", "str_comment_you_helped_villagers_friendly"),
            (else_try),
                (this_or_next|eq, ":var_14", 3),
                (eq, ":var_14", 5),
                (assign, ":var_11", "str_comment_you_helped_villagers_cruel"),
                (assign, ":var_13", -1),
            (else_try),
                (assign, ":var_11", "str_comment_you_helped_villagers_default"),
            (try_end),
        (try_end),
    (else_try),
        (eq, ":var_1", 10),
        (try_begin),
            (eq, ":var_5", "$g_talk_troop"),
            (store_faction_of_party, ":var_23", ":var_4"),
            (eq, ":var_23", "$players_kingdom"),
            (neg|eq, "$g_talk_troop_faction", "$players_kingdom"),
            (this_or_next|eq, ":var_14", 2),
            (eq, ":var_14", 5),
            (assign, ":var_11", "str_comment_you_captured_my_castle_enemy_spiteful"),
            (assign, ":var_10", 200),
        (else_try),
            (eq, ":var_5", "$g_talk_troop"),
            (store_faction_of_party, ":var_23", ":var_4"),
            (eq, ":var_23", "$players_kingdom"),
            (neg|eq, "$g_talk_troop_faction", "$players_kingdom"),
            (this_or_next|eq, ":var_14", 1),
            (eq, ":var_14", 6),
            (assign, ":var_11", "str_comment_you_captured_my_castle_enemy_chivalrous"),
            (assign, ":var_10", 200),
        (else_try),
            (eq, ":var_5", "$g_talk_troop"),
            (store_faction_of_party, ":var_23", ":var_4"),
            (eq, ":var_23", "$players_kingdom"),
            (neg|eq, "$g_talk_troop_faction", "$players_kingdom"),
            (assign, ":var_11", "str_comment_you_captured_my_castle_enemy"),
            (assign, ":var_10", 200),
        (else_try),
            (eq, "$players_kingdom", "$g_talk_troop_faction"),
            (neg|ge, ":var_17", 0),
            (this_or_next|eq, ":var_14", 2),
            (eq, ":var_14", 5),
            (assign, ":var_11", "str_comment_you_captured_a_castle_allied_spiteful"),
            (assign, ":var_10", 75),
        (else_try),
            (eq, "$players_kingdom", "$g_talk_troop_faction"),
            (neg|ge, ":var_17", 0),
            (gt, "$g_talk_troop_relation", 5),
            (assign, ":var_11", "str_comment_you_captured_a_castle_allied_friendly"),
            (assign, ":var_10", 75),
        (else_try),
            (eq, "$players_kingdom", "$g_talk_troop_faction"),
            (neg|ge, ":var_17", 0),
            (neg|ge, "$g_talk_troop_relation", -5),
            (this_or_next|eq, ":var_14", 2),
            (eq, ":var_14", 5),
            (assign, ":var_11", "str_comment_you_captured_a_castle_allied_unfriendly_spiteful"),
            (assign, ":var_10", 75),
        (else_try),
            (eq, "$players_kingdom", "$g_talk_troop_faction"),
            (neg|ge, ":var_17", 0),
            (neg|ge, "$g_talk_troop_relation", -5),
            (assign, ":var_11", "str_comment_you_captured_a_castle_allied_unfriendly"),
            (assign, ":var_10", 75),
        (else_try),
            (eq, "$players_kingdom", "$g_talk_troop_faction"),
            (neg|ge, ":var_17", 0),
            (assign, ":var_11", "str_comment_you_captured_a_castle_allied"),
            (assign, ":var_10", 75),
        (try_end),
    (else_try),
        (eq, ":var_1", 24),
        (eq, "$players_kingdom", "$g_talk_troop_faction"),
        (faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "$g_talk_troop"),
        (assign, ":var_11", "str_comment_you_claimed_the_throne_1_player_liege"),
        (assign, ":var_10", 500),
        (neg|ge, "$g_talk_troop_relation", -10),
    (else_try),
        (eq, ":var_1", 25),
        (eq, "$players_kingdom", "$g_talk_troop_faction"),
        (faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "$g_talk_troop"),
        (assign, ":var_11", "str_comment_you_claimed_the_throne_2_player_liege"),
        (assign, ":var_10", 500),
        (neg|ge, "$g_talk_troop_relation", -10),
    (else_try),
        (eq, ":var_1", 22),
        (eq, ":var_3", "trp_player"),
        (troop_slot_ge, ":var_7", slot_lord_reputation_type, 8),
        (try_begin),
            (this_or_next|eq, ":var_14", 2),
            (eq, ":var_14", 5),
            (assign, ":var_11", "str_comment_you_enfiefed_a_commoner_nasty"),
            (assign, ":var_10", 100),
            (assign, ":var_13", -3),
        (else_try),
            (eq, ":var_14", 7),
            (assign, ":var_11", "str_comment_you_enfiefed_a_commoner_hesitant"),
            (assign, ":var_10", 100),
            (assign, ":var_13", -2),
        (else_try),
            (this_or_next|eq, ":var_14", 3),
            (eq, ":var_14", 1),
            (assign, ":var_11", "str_comment_you_enfiefed_a_commoner_derisive"),
            (assign, ":var_10", 100),
            (assign, ":var_13", -4),
        (try_end),
    (else_try),
        (this_or_next|eq, ":var_1", 11),
        (eq, ":var_1", 17),
        (troop_slot_eq, "$g_talk_troop", slot_troop_present_at_event, ":var_0"),
        (try_begin),
            (neg|ge, "$g_talk_troop_relation", -5),
            (this_or_next|eq, ":var_14", 2),
            (eq, ":var_14", 5),
            (assign, ":var_11", "str_comment_we_defeated_a_lord_unfriendly_spiteful"),
            (assign, ":var_10", 150),
        (else_try),
            (neg|ge, "$g_talk_troop_relation", -5),
            (assign, ":var_11", "str_comment_we_defeated_a_lord_unfriendly"),
            (assign, ":var_10", 150),
        (else_try),
            (this_or_next|eq, ":var_14", 3),
            (eq, ":var_14", 5),
            (assign, ":var_11", "str_comment_we_defeated_a_lord_cruel"),
            (assign, ":var_10", 150),
        (else_try),
            (eq, ":var_14", 2),
            (assign, ":var_11", "str_comment_we_defeated_a_lord_cruel"),
            (assign, ":var_10", 150),
        (else_try),
            (eq, ":var_14", 7),
            (assign, ":var_11", "str_comment_we_defeated_a_lord_upstanding"),
            (assign, ":var_10", 150),
        (else_try),
            (assign, ":var_11", "str_comment_we_defeated_a_lord_default"),
            (assign, ":var_10", 150),
        (try_end),
    (else_try),
        (this_or_next|eq, ":var_1", 10),
        (eq, ":var_1", 18),
        (troop_slot_eq, "$g_talk_troop", slot_troop_present_at_event, ":var_0"),
        (try_begin),
            (neg|ge, "$g_talk_troop_relation", -5),
            (this_or_next|eq, ":var_14", 2),
            (eq, ":var_14", 5),
            (assign, ":var_11", "str_comment_we_fought_in_siege_unfriendly_spiteful"),
            (assign, ":var_10", 150),
        (else_try),
            (neg|ge, "$g_talk_troop_relation", -5),
            (assign, ":var_11", "str_comment_we_fought_in_siege_unfriendly"),
            (assign, ":var_10", 150),
        (else_try),
            (this_or_next|eq, ":var_14", 3),
            (eq, ":var_14", 5),
            (assign, ":var_11", "str_comment_we_fought_in_siege_cruel"),
            (assign, ":var_10", 150),
            (assign, ":var_13", 1),
        (else_try),
            (eq, ":var_14", 2),
            (assign, ":var_11", "str_comment_we_fought_in_siege_quarrelsome"),
            (assign, ":var_10", 150),
            (assign, ":var_13", 1),
        (else_try),
            (eq, ":var_14", 7),
            (assign, ":var_11", "str_comment_we_fought_in_siege_upstanding"),
            (assign, ":var_10", 150),
            (assign, ":var_13", 1),
        (else_try),
            (eq, ":var_14", 1),
            (assign, ":var_11", "str_comment_we_fought_in_siege_default"),
            (assign, ":var_10", 150),
            (assign, ":var_13", 2),
        (else_try),
            (faction_slot_eq, "$players_kingdom", slot_faction_leader, "$g_talk_troop"),
            (assign, ":var_11", "str_comment_we_fought_in_siege_default"),
            (assign, ":var_10", 150),
            (assign, ":var_13", 1),
        (else_try),
            (assign, ":var_11", "str_comment_we_fought_in_siege_default"),
            (assign, ":var_10", 150),
            (assign, ":var_13", 1),
        (try_end),
    (else_try),
        (eq, ":var_1", 20),
        (try_begin),
            (eq, ":var_7", "$g_talk_troop"),
            (this_or_next|eq, ":var_14", 2),
            (eq, ":var_14", 5),
            (assign, ":var_11", "str_comment_you_give_castle_in_my_control"),
            (assign, ":var_10", 200),
        (else_try),
            (eq, ":var_7", "$g_talk_troop"),
            (this_or_next|eq, ":var_14", 1),
            (eq, ":var_14", 6),
            (assign, ":var_11", "str_comment_you_give_castle_in_my_control"),
            (assign, ":var_10", 200),
        (else_try),
            (eq, ":var_7", "$g_talk_troop"),
            (assign, ":var_11", "str_comment_you_give_castle_in_my_control"),
            (assign, ":var_10", 200),
        (try_end),
    (else_try),
        (eq, ":var_1", 19),
        (troop_slot_eq, "$g_talk_troop", slot_troop_present_at_event, ":var_0"),
        (try_begin),
            (neg|ge, "$g_talk_troop_relation", -5),
            (this_or_next|eq, ":var_14", 2),
            (eq, ":var_14", 5),
            (assign, ":var_11", "str_comment_we_fought_in_major_battle_unfriendly_spiteful"),
            (assign, ":var_10", 150),
        (else_try),
            (neg|ge, "$g_talk_troop_relation", -5),
            (assign, ":var_11", "str_comment_we_fought_in_major_battle_unfriendly"),
            (assign, ":var_10", 150),
        (else_try),
            (this_or_next|eq, ":var_14", 3),
            (eq, ":var_14", 5),
            (assign, ":var_11", "str_comment_we_fought_in_major_battle_cruel"),
            (assign, ":var_10", 150),
            (assign, ":var_13", 1),
        (else_try),
            (eq, ":var_14", 2),
            (assign, ":var_11", "str_comment_we_fought_in_major_battle_cruel"),
            (assign, ":var_10", 150),
            (assign, ":var_13", 1),
        (else_try),
            (eq, ":var_14", 7),
            (assign, ":var_11", "str_comment_we_fought_in_major_battle_upstanding"),
            (assign, ":var_10", 150),
            (assign, ":var_13", 1),
        (else_try),
            (faction_slot_eq, "$players_kingdom", slot_faction_leader, "$g_talk_troop"),
            (assign, ":var_11", "str_comment_we_fought_in_major_battle_default"),
            (assign, ":var_10", 150),
            (assign, ":var_13", 1),
        (else_try),
            (eq, ":var_14", 1),
            (assign, ":var_11", "str_comment_we_fought_in_major_battle_default"),
            (assign, ":var_10", 150),
            (assign, ":var_13", 2),
        (else_try),
            (assign, ":var_11", "str_comment_we_fought_in_major_battle_default"),
            (assign, ":var_10", 150),
            (assign, ":var_13", 1),
        (try_end),
    (else_try),
        (eq, ":var_1", 35),
        (try_begin),
            (eq, ":var_7", "$g_talk_troop"),
            (assign, ":var_11", "str_comment_player_suggestion_succeeded"),
            (assign, ":var_10", 200),
            (assign, ":var_13", 3),
        (try_end),
    (else_try),
        (eq, ":var_1", 36),
        (try_begin),
            (eq, ":var_7", "$g_talk_troop"),
            (assign, ":var_11", "str_comment_player_suggestion_failed"),
            (assign, ":var_10", 200),
            (assign, ":var_13", -5),
        (try_end),
    (else_try),
        (eq, ":var_1", 11),
        (try_begin),
            (eq, ":var_7", "$g_talk_troop"),
            (this_or_next|eq, ":var_14", 1),
            (eq, ":var_14", 6),
            (assign, ":var_11", "str_comment_you_defeated_me_enemy_chivalrous"),
            (assign, ":var_10", 200),
        (else_try),
            (eq, ":var_7", "$g_talk_troop"),
            (this_or_next|eq, ":var_14", 5),
            (eq, ":var_14", 2),
            (assign, ":var_11", "str_comment_you_defeated_me_enemy_spiteful"),
            (assign, ":var_10", 200),
        (else_try),
            (eq, ":var_7", "$g_talk_troop"),
            (assign, ":var_11", "str_comment_you_defeated_me_enemy"),
            (assign, ":var_10", 200),
        (else_try),
            (eq, ":var_8", "$g_talk_troop_faction"),
            (this_or_next|eq, ":var_14", 7),
            (eq, ":var_14", 4),
            (assign, ":var_11", "str_comment_you_defeated_my_friend_enemy_pragmatic"),
            (assign, ":var_10", 85),
        (else_try),
            (eq, ":var_8", "$g_talk_troop_faction"),
            (this_or_next|eq, ":var_14", 1),
            (eq, ":var_14", 6),
            (assign, ":var_11", "str_comment_you_defeated_my_friend_enemy_chivalrous"),
            (assign, ":var_10", 85),
        (else_try),
            (eq, ":var_8", "$g_talk_troop_faction"),
            (this_or_next|eq, ":var_14", 2),
            (eq, ":var_14", 5),
            (assign, ":var_11", "str_comment_you_defeated_my_friend_enemy_spiteful"),
            (assign, ":var_10", 85),
        (else_try),
            (eq, ":var_8", "$g_talk_troop_faction"),
            (assign, ":var_11", "str_comment_you_defeated_my_friend_enemy"),
            (assign, ":var_10", 85),
        (else_try),
            (eq, "$players_kingdom", "$g_talk_troop_faction"),
            (neg|ge, ":var_17", 0),
            (faction_slot_eq, "$players_kingdom", slot_faction_leader, "$g_talk_troop"),
            (assign, ":var_11", "str_comment_you_defeated_a_lord_allied_liege"),
            (assign, ":var_10", 150),
            (assign, ":var_13", 1),
        (else_try),
            (eq, "$players_kingdom", "$g_talk_troop_faction"),
            (neg|ge, ":var_17", 0),
            (neg|ge, "$g_talk_troop_relation", -5),
            (this_or_next|eq, ":var_14", 2),
            (eq, ":var_14", 5),
            (assign, ":var_11", "str_comment_you_defeated_a_lord_allied_unfriendly_spiteful"),
            (assign, ":var_10", 65),
        (else_try),
            (eq, "$players_kingdom", "$g_talk_troop_faction"),
            (neg|ge, ":var_17", 0),
            (this_or_next|eq, ":var_14", 2),
            (eq, ":var_14", 5),
            (assign, ":var_11", "str_comment_you_defeated_a_lord_allied_spiteful"),
            (assign, ":var_10", 65),
        (else_try),
            (eq, "$players_kingdom", "$g_talk_troop_faction"),
            (neg|ge, ":var_17", 0),
            (neg|ge, "$g_talk_troop_relation", -5),
            (this_or_next|eq, ":var_14", 7),
            (eq, ":var_14", 1),
            (assign, ":var_11", "str_comment_you_defeated_a_lord_allied_unfriendly_chivalrous"),
            (assign, ":var_10", 65),
        (else_try),
            (eq, "$players_kingdom", "$g_talk_troop_faction"),
            (neg|ge, ":var_17", 0),
            (assign, ":var_11", "str_comment_you_defeated_a_lord_allied"),
            (assign, ":var_10", 65),
        (try_end),
    (else_try),
        (eq, ":var_1", 11),
        (try_begin),
            (eq, ":var_7", "$g_talk_troop"),
            (this_or_next|eq, ":var_14", 1),
            (eq, ":var_14", 6),
            (assign, ":var_11", "str_comment_you_defeated_me_enemy_chivalrous"),
            (assign, ":var_10", 200),
        (else_try),
            (eq, ":var_7", "$g_talk_troop"),
            (this_or_next|eq, ":var_14", 5),
            (eq, ":var_14", 2),
            (assign, ":var_11", "str_comment_you_defeated_me_enemy_spiteful"),
            (assign, ":var_10", 200),
        (else_try),
            (eq, ":var_7", "$g_talk_troop"),
            (assign, ":var_11", "str_comment_you_defeated_me_enemy"),
            (assign, ":var_10", 200),
        (else_try),
            (eq, ":var_8", "$g_talk_troop_faction"),
            (this_or_next|eq, ":var_14", 7),
            (eq, ":var_14", 4),
            (assign, ":var_11", "str_comment_you_defeated_my_friend_enemy_pragmatic"),
            (assign, ":var_10", 85),
        (else_try),
            (eq, ":var_8", "$g_talk_troop_faction"),
            (this_or_next|eq, ":var_14", 1),
            (eq, ":var_14", 6),
            (assign, ":var_11", "str_comment_you_defeated_my_friend_enemy_chivalrous"),
            (assign, ":var_10", 85),
        (else_try),
            (eq, ":var_8", "$g_talk_troop_faction"),
            (this_or_next|eq, ":var_14", 2),
            (eq, ":var_14", 5),
            (assign, ":var_11", "str_comment_you_defeated_my_friend_enemy_spiteful"),
            (assign, ":var_10", 85),
        (else_try),
            (eq, ":var_8", "$g_talk_troop_faction"),
            (assign, ":var_11", "str_comment_you_defeated_my_friend_enemy"),
            (assign, ":var_10", 85),
        (else_try),
            (eq, "$players_kingdom", "$g_talk_troop_faction"),
            (neg|ge, ":var_17", 0),
            (faction_slot_eq, "$players_kingdom", slot_faction_leader, "$g_talk_troop"),
            (assign, ":var_11", "str_comment_you_defeated_a_lord_allied_liege"),
            (assign, ":var_10", 70),
        (else_try),
            (eq, "$players_kingdom", "$g_talk_troop_faction"),
            (neg|ge, ":var_17", 0),
            (neg|ge, "$g_talk_troop_relation", -5),
            (this_or_next|eq, ":var_14", 2),
            (eq, ":var_14", 5),
            (assign, ":var_11", "str_comment_you_defeated_a_lord_allied_unfriendly_spiteful"),
            (assign, ":var_10", 65),
        (else_try),
            (eq, "$players_kingdom", "$g_talk_troop_faction"),
            (neg|ge, ":var_17", 0),
            (this_or_next|eq, ":var_14", 2),
            (eq, ":var_14", 5),
            (assign, ":var_11", "str_comment_you_defeated_a_lord_allied_spiteful"),
            (assign, ":var_10", 65),
        (else_try),
            (eq, "$players_kingdom", "$g_talk_troop_faction"),
            (neg|ge, ":var_17", 0),
            (neg|ge, "$g_talk_troop_relation", -5),
            (this_or_next|eq, ":var_14", 7),
            (eq, ":var_14", 1),
            (assign, ":var_11", "str_comment_you_defeated_a_lord_allied_unfriendly_chivalrous"),
            (assign, ":var_10", 65),
        (else_try),
            (eq, "$players_kingdom", "$g_talk_troop_faction"),
            (neg|ge, ":var_17", 0),
            (assign, ":var_11", "str_comment_you_defeated_a_lord_allied"),
            (assign, ":var_10", 65),
        (try_end),
    (else_try),
        (eq, ":var_1", 17),
        (neg|eq, ":var_7", "$g_talk_troop"),
        (eq, ":var_8", "$g_talk_troop_faction"),
        (try_begin),
            (neg|ge, "$g_talk_troop_relation", -5),
            (this_or_next|eq, ":var_14", 7),
            (eq, ":var_14", 1),
            (assign, ":var_11", "str_comment_you_helped_my_ally_unfriendly_chivalrous"),
            (assign, ":var_10", 65),
            (assign, ":var_13", 2),
        (else_try),
            (neg|ge, "$g_talk_troop_relation", -5),
            (assign, ":var_11", "str_comment_you_helped_my_ally_unfriendly"),
            (assign, ":var_10", 0),
        (else_try),
            (eq, ":var_14", 0),
            (assign, ":var_11", "str_comment_you_helped_my_ally_liege"),
            (assign, ":var_10", 65),
            (assign, ":var_13", 3),
        (else_try),
            (neg|ge, "$g_talk_troop_relation", -5),
            (this_or_next|eq, ":var_14", 2),
            (eq, ":var_14", 5),
            (assign, ":var_11", "str_comment_you_helped_my_ally_unfriendly_spiteful"),
            (assign, ":var_10", 65),
        (else_try),
            (this_or_next|eq, ":var_14", 2),
            (eq, ":var_14", 5),
            (assign, ":var_11", "str_comment_you_helped_my_ally_spiteful"),
            (assign, ":var_10", 65),
        (else_try),
            (this_or_next|eq, ":var_14", 1),
            (eq, ":var_14", 7),
            (assign, ":var_11", "str_comment_you_helped_my_ally_chivalrous"),
            (assign, ":var_10", 65),
            (assign, ":var_13", 2),
        (else_try),
            (eq, ":var_7", "$g_talk_troop"),
            (assign, ":var_11", "str_comment_you_helped_my_ally_default"),
        (try_end),
    (else_try),
        (eq, ":var_1", 14),
        (troop_slot_eq, "$g_talk_troop", slot_troop_present_at_event, ":var_0"),
        (try_begin),
            (neg|ge, "$g_talk_troop_relation", -5),
            (this_or_next|eq, ":var_14", 2),
            (eq, ":var_14", 5),
            (assign, ":var_11", "str_comment_we_were_defeated_unfriendly_spiteful"),
            (assign, ":var_10", 150),
        (else_try),
            (neg|ge, "$g_talk_troop_relation", -5),
            (assign, ":var_11", "str_comment_we_were_defeated_unfriendly"),
            (assign, ":var_10", 150),
        (else_try),
            (this_or_next|eq, ":var_14", 3),
            (eq, ":var_14", 5),
            (assign, ":var_11", "str_comment_we_were_defeated_cruel"),
            (assign, ":var_10", 150),
        (else_try),
            (assign, ":var_11", "str_comment_we_were_defeated_default"),
            (assign, ":var_10", 150),
        (try_end),
    (else_try),
        (eq, ":var_1", 14),
        (try_begin),
            (eq, ":var_7", "$g_talk_troop"),
            (this_or_next|eq, ":var_14", 2),
            (eq, ":var_14", 5),
            (assign, ":var_11", "str_comment_i_defeated_you_enemy_spiteful"),
            (assign, ":var_10", 200),
        (else_try),
            (eq, ":var_7", "$g_talk_troop"),
            (eq, ":var_14", 1),
            (assign, ":var_11", "str_comment_i_defeated_you_enemy_chivalrous"),
            (assign, ":var_10", 200),
        (else_try),
            (eq, ":var_7", "$g_talk_troop"),
            (this_or_next|eq, ":var_14", 6),
            (eq, ":var_14", 7),
            (assign, ":var_11", "str_comment_i_defeated_you_enemy_benevolent"),
            (assign, ":var_10", 200),
        (else_try),
            (eq, ":var_7", "$g_talk_troop"),
            (this_or_next|eq, ":var_14", 3),
            (eq, ":var_14", 4),
            (assign, ":var_11", "str_comment_i_defeated_you_enemy_coldblooded"),
            (assign, ":var_10", 200),
        (else_try),
            (eq, ":var_7", "$g_talk_troop"),
            (assign, ":var_11", "str_comment_i_defeated_you_enemy"),
            (assign, ":var_10", 200),
        (else_try),
            (eq, ":var_7", "$g_talk_troop"),
            (assign, ":var_11", "str_comment_i_defeated_you_enemy"),
            (assign, ":var_10", 200),
        (else_try),
            (eq, "$players_kingdom", "$g_talk_troop_faction"),
            (this_or_next|eq, ":var_14", 2),
            (eq, ":var_14", 5),
            (gt, "$g_talk_troop_relation", 5),
            (assign, ":var_11", "str_comment_you_were_defeated_allied_friendly_spiteful"),
            (assign, ":var_10", 80),
        (else_try),
            (eq, "$players_kingdom", "$g_talk_troop_faction"),
            (this_or_next|eq, ":var_14", 3),
            (eq, ":var_14", 5),
            (neg|ge, "$g_talk_troop_relation", -5),
            (assign, ":var_11", "str_comment_you_were_defeated_allied_unfriendly_cruel"),
            (assign, ":var_10", 80),
        (else_try),
            (eq, "$players_kingdom", "$g_talk_troop_faction"),
            (this_or_next|eq, ":var_14", 2),
            (eq, ":var_14", 5),
            (neg|gt, "$g_talk_troop_relation", 5),
            (assign, ":var_11", "str_comment_you_were_defeated_allied_spiteful"),
            (assign, ":var_10", 80),
        (else_try),
            (eq, "$players_kingdom", "$g_talk_troop_faction"),
            (eq, ":var_14", 3),
            (assign, ":var_11", "str_comment_you_were_defeated_allied_pitiless"),
            (assign, ":var_10", 65),
        (else_try),
            (eq, "$players_kingdom", "$g_talk_troop_faction"),
            (eq, ":var_14", 7),
            (neg|ge, "$g_talk_troop_relation", -15),
            (assign, ":var_11", "str_comment_you_were_defeated_allied_unfriendly_upstanding"),
            (assign, ":var_10", 65),
        (else_try),
            (eq, "$players_kingdom", "$g_talk_troop_faction"),
            (neg|ge, "$g_talk_troop_relation", -10),
            (assign, ":var_11", "str_comment_you_were_defeated_allied_unfriendly"),
            (assign, ":var_10", 65),
        (else_try),
            (eq, "$players_kingdom", "$g_talk_troop_faction"),
            (assign, ":var_11", "str_comment_you_were_defeated_allied"),
            (assign, ":var_10", 65),
        (try_end),
    (else_try),
        (eq, ":var_1", 15),
        (troop_slot_eq, "$g_talk_troop", slot_troop_present_at_event, ":var_0"),
        (try_begin),
            (neg|ge, "$g_talk_troop_relation", -5),
            (this_or_next|eq, ":var_14", 2),
            (eq, ":var_14", 5),
            (assign, ":var_11", "str_comment_you_abandoned_us_unfriendly_spiteful"),
            (assign, ":var_10", 150),
            (assign, ":var_13", -5),
        (else_try),
            (neg|ge, "$g_talk_troop_relation", -5),
            (eq, ":var_14", 3),
            (assign, ":var_11", "str_comment_you_abandoned_us_unfriendly_pitiless"),
            (assign, ":var_10", 150),
            (assign, ":var_13", -5),
        (else_try),
            (neg|ge, "$g_talk_troop_relation", -5),
            (this_or_next|eq, ":var_14", 2),
            (eq, ":var_14", 5),
            (assign, ":var_11", "str_comment_you_abandoned_us_spiteful"),
            (assign, ":var_13", -5),
        (else_try),
            (eq, ":var_14", 1),
            (assign, ":var_11", "str_comment_you_abandoned_us_chivalrous"),
            (assign, ":var_10", 150),
            (assign, ":var_13", -2),
        (else_try),
            (this_or_next|eq, ":var_14", 7),
            (eq, ":var_14", 6),
            (assign, ":var_11", "str_comment_you_abandoned_us_benefitofdoubt"),
            (assign, ":var_10", 150),
            (assign, ":var_13", -1),
        (else_try),
            (assign, ":var_11", "str_comment_you_abandoned_us_default"),
            (assign, ":var_10", 150),
            (assign, ":var_13", -2),
        (try_end),
    (else_try),
        (this_or_next|eq, ":var_1", 15),
        (eq, ":var_1", 16),
        (eq, ":var_7", "$g_talk_troop"),
        (try_begin),
            (eq, "$cheat_mode", 1),
            (assign, reg7, ":var_16"),
            (display_message, "@{!}Elapsed hours: {reg7}"),
        (try_end),
        (gt, ":var_16", 2),
        (try_begin),
            (this_or_next|eq, ":var_14", 3),
            (eq, ":var_14", 5),
            (assign, ":var_11", "str_comment_you_ran_from_me_enemy_spiteful"),
            (assign, ":var_10", 25),
        (else_try),
            (eq, ":var_14", 1),
            (assign, ":var_11", "str_comment_you_ran_from_me_enemy_chivalrous"),
            (assign, ":var_10", 25),
        (else_try),
            (this_or_next|eq, ":var_14", 6),
            (eq, ":var_14", 7),
            (assign, ":var_11", "str_comment_you_ran_from_me_enemy_benevolent"),
            (assign, ":var_10", 25),
        (else_try),
            (eq, ":var_14", 4),
            (assign, ":var_11", "str_comment_you_ran_from_me_enemy_coldblooded"),
            (assign, ":var_10", 25),
        (else_try),
            (assign, ":var_11", "str_comment_you_ran_from_me_enemy"),
            (assign, ":var_10", 25),
        (try_end),
    (else_try),
        (eq, ":var_1", 16),
        (try_begin),
            (eq, "$players_kingdom", "$g_talk_troop_faction"),
            (neg|eq, ":var_7", "$g_talk_troop"),
            (neg|ge, "$g_talk_troop_relation", 5),
            (eq, ":var_14", 1),
            (assign, ":var_11", "str_comment_you_ran_from_foe_allied_chivalrous"),
            (assign, ":var_10", 80),
            (assign, ":var_13", -3),
        (else_try),
            (eq, "$players_kingdom", "$g_talk_troop_faction"),
            (neg|eq, ":var_7", "$g_talk_troop"),
            (eq, ":var_14", 7),
            (assign, ":var_11", "str_comment_you_ran_from_foe_allied_upstanding"),
            (assign, ":var_10", 80),
            (assign, ":var_13", -1),
        (else_try),
            (eq, "$players_kingdom", "$g_talk_troop_faction"),
            (neg|eq, ":var_7", "$g_talk_troop"),
            (neg|ge, "$g_talk_troop_relation", 5),
            (this_or_next|eq, ":var_14", 2),
            (eq, ":var_14", 5),
            (assign, ":var_11", "str_comment_you_ran_from_foe_allied_spiteful"),
            (assign, ":var_10", 80),
        (try_end),
    (else_try),
        (eq, ":var_1", 13),
        (try_begin),
            (eq, ":var_7", "$g_talk_troop"),
            (this_or_next|eq, ":var_14", 2),
            (eq, ":var_14", 5),
            (assign, ":var_11", "str_comment_you_let_me_go_spiteful"),
            (assign, ":var_10", 300),
            (assign, ":var_13", -15),
        (else_try),
            (eq, ":var_7", "$g_talk_troop"),
            (ge, "$g_talk_troop_faction_relation", 0),
            (assign, ":var_11", "str_comment_you_let_me_go_default"),
            (assign, ":var_10", 300),
            (assign, ":var_13", 2),
        (else_try),
            (eq, ":var_7", "$g_talk_troop"),
            (neg|ge, "$g_talk_troop_faction_relation", 0),
            (this_or_next|eq, ":var_14", 1),
            (eq, ":var_14", 7),
            (assign, ":var_13", 5),
            (assign, ":var_10", 300),
            (assign, ":var_11", "str_comment_you_let_me_go_enemy_chivalrous"),
        (else_try),
            (eq, ":var_7", "$g_talk_troop"),
            (neg|ge, "$g_talk_troop_faction_relation", 0),
            (this_or_next|eq, ":var_14", 3),
            (eq, ":var_14", 4),
            (assign, ":var_10", 300),
            (assign, ":var_11", "str_comment_you_let_me_go_enemy_coldblooded"),
        (else_try),
            (eq, ":var_7", "$g_talk_troop"),
            (neg|ge, "$g_talk_troop_faction_relation", 0),
            (assign, ":var_10", 300),
            (assign, ":var_11", "str_comment_you_let_me_go_enemy"),
            (assign, ":var_13", 1),
        (else_try),
            (eq, "$players_kingdom", "$g_talk_troop_faction"),
            (neg|ge, ":var_17", 0),
            (neg|eq, ":var_7", "$g_talk_troop"),
            (this_or_next|eq, ":var_14", 1),
            (eq, ":var_14", 6),
            (assign, ":var_11", "str_comment_you_let_go_a_lord_allied_chivalrous"),
            (assign, ":var_10", 80),
        (else_try),
            (eq, "$players_kingdom", "$g_talk_troop_faction"),
            (neg|ge, ":var_17", 0),
            (neg|eq, ":var_7", "$g_talk_troop"),
            (eq, ":var_14", 7),
            (assign, ":var_11", "str_comment_you_let_go_a_lord_allied_upstanding"),
            (assign, ":var_10", 80),
        (else_try),
            (eq, "$players_kingdom", "$g_talk_troop_faction"),
            (neg|ge, ":var_17", 0),
            (neg|eq, ":var_7", "$g_talk_troop"),
            (this_or_next|eq, ":var_14", 4),
            (eq, ":var_14", 3),
            (assign, ":var_11", "str_comment_you_let_go_a_lord_allied_coldblooded"),
            (assign, ":var_10", 80),
        (else_try),
            (eq, "$players_kingdom", "$g_talk_troop_faction"),
            (neg|ge, ":var_17", 0),
            (neg|eq, ":var_7", "$g_talk_troop"),
            (neg|ge, "$g_talk_troop_relation", -5),
            (this_or_next|eq, ":var_14", 2),
            (eq, ":var_14", 5),
            (assign, ":var_11", "str_comment_you_let_go_a_lord_allied_unfriendly_spiteful"),
            (assign, ":var_10", 80),
        (else_try),
            (eq, "$players_kingdom", "$g_talk_troop_faction"),
            (neg|ge, ":var_17", 0),
            (neg|eq, ":var_7", "$g_talk_troop"),
            (assign, ":var_11", "str_comment_you_let_go_a_lord_allied"),
            (assign, ":var_10", 80),
        (try_end),
    (else_try),
        (eq, ":var_1", 21),
        (eq, ":var_3", "trp_player"),
        (try_begin),
            (eq, ":var_9", "$g_talk_troop_faction"),
            (neg|eq, ":var_7", "$g_talk_troop"),
            (eq, ":var_9", "$players_kingdom"),
            (assign, ":var_10", 200),
            (try_begin),
                (neg|ge, "$g_talk_troop_relation", -5),
                (eq, ":var_14", 1),
                (assign, ":var_11", "str_comment_pledged_allegiance_allied_martial_unfriendly"),
            (else_try),
                (eq, ":var_14", 1),
                (assign, ":var_11", "str_comment_pledged_allegiance_allied_martial"),
            (else_try),
                (neg|ge, "$g_talk_troop_relation", -5),
                (eq, ":var_14", 2),
                (assign, ":var_11", "str_comment_pledged_allegiance_allied_quarrelsome_unfriendly"),
            (else_try),
                (eq, ":var_14", 2),
                (assign, ":var_11", "str_comment_pledged_allegiance_allied_quarrelsome"),
            (else_try),
                (neg|ge, "$g_talk_troop_relation", -5),
                (eq, ":var_14", 3),
                (assign, ":var_11", "str_comment_pledged_allegiance_allied_selfrighteous_unfriendly"),
            (else_try),
                (eq, ":var_14", 3),
                (assign, ":var_11", "str_comment_pledged_allegiance_allied_selfrighteous"),
            (else_try),
                (neg|ge, "$g_talk_troop_relation", -5),
                (eq, ":var_14", 4),
                (assign, ":var_11", "str_comment_pledged_allegiance_allied_cunning_unfriendly"),
            (else_try),
                (eq, ":var_14", 4),
                (assign, ":var_11", "str_comment_pledged_allegiance_allied_cunning"),
            (else_try),
                (neg|ge, "$g_talk_troop_relation", -5),
                (eq, ":var_14", 5),
                (assign, ":var_11", "str_comment_pledged_allegiance_allied_debauched_unfriendly"),
            (else_try),
                (eq, ":var_14", 5),
                (assign, ":var_11", "str_comment_pledged_allegiance_allied_debauched"),
            (else_try),
                (neg|ge, "$g_talk_troop_relation", -5),
                (eq, ":var_14", 6),
                (assign, ":var_11", "str_comment_pledged_allegiance_allied_goodnatured_unfriendly"),
            (else_try),
                (eq, ":var_14", 6),
                (assign, ":var_11", "str_comment_pledged_allegiance_allied_goodnatured"),
            (else_try),
                (neg|ge, "$g_talk_troop_relation", -5),
                (eq, ":var_14", 7),
                (assign, ":var_11", "str_comment_pledged_allegiance_allied_upstanding_unfriendly"),
            (else_try),
                (eq, ":var_14", 7),
                (assign, ":var_11", "str_comment_pledged_allegiance_allied_upstanding"),
            (try_end),
        (try_end),
    (else_try),
        (eq, ":var_1", 22),
        (eq, ":var_7", "trp_player"),
        (try_begin),
            (eq, ":var_9", "$g_talk_troop_faction"),
            (neg|eq, ":var_3", "$g_talk_troop"),
            (eq, ":var_9", "$players_kingdom"),
            (assign, ":var_10", 110),
            (try_begin),
                (gt, "$g_talk_troop_relation", 5),
                (this_or_next|eq, ":var_14", 3),
                (eq, ":var_14", 5),
                (assign, ":var_11", "str_comment_our_king_granted_you_a_fief_allied_friendly_cruel"),
            (else_try),
                (gt, "$g_talk_troop_relation", 5),
                (this_or_next|eq, ":var_14", 2),
                (eq, ":var_14", 4),
                (assign, ":var_11", "str_comment_our_king_granted_you_a_fief_allied_friendly_cynical"),
            (else_try),
                (gt, "$g_talk_troop_relation", 5),
                (assign, ":var_11", "str_comment_our_king_granted_you_a_fief_allied_friendly"),
            (else_try),
                (is_between, "$g_talk_troop_relation", -5, 5),
                (this_or_next|eq, ":var_14", 2),
                (eq, ":var_14", 5),
                (assign, ":var_11", "str_comment_our_king_granted_you_a_fief_allied_spiteful"),
                (assign, ":var_13", -2),
            (else_try),
                (neg|ge, "$g_talk_troop_relation", -5),
                (eq, ":var_14", 7),
                (assign, ":var_11", "str_comment_our_king_granted_you_a_fief_allied_unfriendly_upstanding"),
            (else_try),
                (neg|ge, "$g_talk_troop_relation", -5),
                (this_or_next|eq, ":var_14", 2),
                (eq, ":var_14", 5),
                (assign, ":var_11", "str_comment_our_king_granted_you_a_fief_allied_unfriendly_spiteful"),
            (else_try),
                (assign, ":var_11", "str_comment_our_king_granted_you_a_fief_allied"),
            (try_end),
        (try_end),
    (else_try),
        (eq, ":var_1", 23),
        (eq, ":var_3", "trp_player"),
        (try_begin),
            (eq, ":var_9", "$g_talk_troop_faction"),
            (neg|eq, ":var_7", "$g_talk_troop"),
            (try_begin),
                (ge, "$g_talk_troop_faction_relation", 0),
                (neg|eq, "$g_talk_troop_faction", "$players_kingdom"),
                (assign, ":var_10", 180),
                (try_begin),
                    (gt, "$g_talk_troop_relation", 5),
                    (assign, ":var_11", "str_comment_you_renounced_your_alliegance_friendly"),
                (else_try),
                    (ge, "$g_talk_troop_relation", 0),
                    (eq, ":var_14", 6),
                    (assign, ":var_11", "str_comment_you_renounced_your_alliegance_friendly"),
                (else_try),
                    (assign, ":var_11", "str_comment_you_renounced_your_alliegance_default"),
                (try_end),
            (else_try),
                (neg|ge, "$g_talk_troop_faction_relation", 0),
                (assign, ":var_10", 300),
                (try_begin),
                    (ge, "$g_talk_troop_relation", 0),
                    (this_or_next|eq, ":var_14", 3),
                    (eq, ":var_14", 5),
                    (assign, ":var_11", "str_comment_you_renounced_your_alliegance_unfriendly_moralizing"),
                (else_try),
                    (gt, "$g_talk_troop_relation", 5),
                    (this_or_next|eq, ":var_14", 6),
                    (eq, ":var_14", 7),
                    (assign, ":var_11", "str_comment_you_renounced_your_alliegance_enemy_friendly"),
                (else_try),
                    (gt, "$g_talk_troop_relation", 5),
                    (assign, ":var_11", "str_comment_you_renounced_your_alliegance_enemy"),
                (else_try),
                    (is_between, "$g_talk_troop_relation", -5, 5),
                    (this_or_next|eq, ":var_14", 2),
                    (eq, ":var_14", 5),
                    (assign, ":var_11", "str_comment_you_renounced_your_alliegance_unfriendly_spiteful"),
                    (assign, ":var_13", -2),
                (else_try),
                    (neg|ge, "$g_talk_troop_relation", -5),
                    (this_or_next|eq, ":var_14", 2),
                    (this_or_next|eq, ":var_14", 3),
                    (eq, ":var_14", 5),
                    (assign, ":var_11", "str_comment_you_renounced_your_alliegance_unfriendly_spiteful"),
                (else_try),
                    (assign, ":var_11", "str_comment_you_renounced_your_alliegance_default"),
                (try_end),
            (try_end),
        (try_end),
    (else_try),
        (eq, ":var_1", 56),
        (eq, ":var_7", "trp_player"),
        (try_begin),
            (this_or_next|eq, ":var_14", 2),
            (eq, ":var_14", 5),
            (neg|ge, "$g_talk_troop_relation", -5),
            (assign, ":var_10", 200),
            (assign, ":var_11", "str_comment_marriage_normal_nasty"),
        (else_try),
            (call_script, "script_troop_get_family_relation_to_troop", ":var_3", "$g_talk_troop"),
            (ge, reg0, 5),
            (assign, ":var_11", "str_comment_marriage_normal_family"),
            (assign, ":var_10", 300),
            (assign, ":var_13", reg0),
            (val_div, ":var_13", 3),
        (else_try),
            (store_troop_faction, ":var_24", ":var_3"),
            (eq, ":var_24", "$g_talk_troop_faction"),
            (assign, ":var_11", "str_comment_marriage_normal"),
            (assign, ":var_10", 100),
        (try_end),
    (else_try),
        (eq, ":var_1", 57),
        (eq, ":var_7", "trp_player"),
        (try_begin),
            (call_script, "script_troop_get_family_relation_to_troop", ":var_3", "$g_talk_troop"),
            (ge, reg0, 5),
            (assign, ":var_11", "str_comment_marriage_elopement_family"),
            (assign, ":var_10", 300),
            (store_sub, ":var_13", 0, reg0),
            (val_div, ":var_13", 3),
        (else_try),
            (store_troop_faction, ":var_24", ":var_3"),
            (eq, ":var_24", "$g_talk_troop_faction"),
            (faction_slot_eq, ":var_24", slot_faction_leader, "$g_talk_troop"),
            (assign, ":var_11", "str_comment_marriage_elopement_liege"),
            (assign, ":var_10", 300),
            (assign, ":var_13", -10),
        (try_end),
    (else_try),
        (eq, ":var_1", 31),
        (eq, ":var_3", "$g_talk_troop"),
        (eq, ":var_4", "trp_player"),
        (neg|troop_slot_ge, ":var_7", slot_troop_spouse, "trp_player"),
        (str_store_troop_name, s54, ":var_7"),
        (try_begin),
            (this_or_next|eq, ":var_14", 3),
            (this_or_next|eq, ":var_14", 2),
            (eq, ":var_14", 5),
            (assign, ":var_11", "str_comment_i_quarreled_with_you_over_woman_derisive"),
            (assign, ":var_10", 200),
            (assign, ":var_13", -20),
        (else_try),
            (assign, ":var_11", "str_comment_i_quarreled_with_you_over_woman_default"),
            (assign, ":var_10", 200),
            (assign, ":var_13", -20),
        (try_end),
    (else_try),
        (eq, ":var_1", 77),
        (eq, ":var_3", "trp_player"),
        (faction_slot_eq, ":var_9", slot_faction_leader, "$g_talk_troop"),
        (eq, "$players_kingdom", ":var_9"),
        (assign, ":var_13", -10),
        (assign, ":var_11", "str_comment_you_broke_truce_as_my_vassal"),
        (assign, ":var_10", 300),
    (else_try),
        (eq, ":var_1", 76),
        (eq, ":var_3", "trp_player"),
        (faction_slot_eq, ":var_9", slot_faction_leader, "$g_talk_troop"),
        (eq, "$players_kingdom", ":var_9"),
        (assign, ":var_13", -3),
        (assign, ":var_11", "str_comment_you_attacked_neutral_as_my_vassal"),
        (assign, ":var_10", 200),
    (else_try),
        (eq, ":var_1", 27),
        (eq, ":var_4", "$g_talk_troop"),
        (str_store_troop_name, s50, ":var_3"),
        (str_store_troop_name, s51, ":var_4"),
        (str_store_troop_name, s54, ":var_7"),
        (assign, ":var_11", "str_comment_lord_intervened_against_me"),
        (assign, ":var_10", -1),
    (else_try),
        (eq, ":var_1", 32),
        (eq, ":var_3", "$g_talk_troop"),
        (str_store_troop_name, s51, ":var_4"),
        (str_store_troop_name, s54, ":var_7"),
        (assign, ":var_11", "str_comment_i_protested_marshall_appointment"),
        (assign, ":var_10", -1),
    (else_try),
        (eq, ":var_1", 33),
        (eq, ":var_3", "$g_talk_troop"),
        (str_store_troop_name, s51, ":var_4"),
        (str_store_troop_name, s54, ":var_7"),
        (str_store_troop_name, s56, ":var_9"),
        (assign, ":var_11", "str_comment_i_blamed_defeat"),
        (assign, ":var_10", -1),
    (else_try),
        (eq, ":var_1", 26),
        (eq, ":var_3", "$g_talk_troop"),
        (str_store_party_name, s51, ":var_4"),
        (str_store_troop_name, s54, ":var_7"),
        (str_store_troop_name, s56, ":var_9"),
        (assign, ":var_11", "str_comment_i_was_entitled_to_fief"),
        (assign, ":var_10", -1),
    (else_try),
        (eq, ":var_1", 31),
        (eq, ":var_3", "$g_talk_troop"),
        (str_store_troop_name, s51, ":var_4"),
        (str_store_troop_name, s54, ":var_7"),
        (assign, ":var_11", "str_comment_i_quarreled_with_troop_over_woman"),
        (assign, ":var_10", -1),
    (else_try),
        (eq, ":var_1", 31),
        (eq, ":var_4", "$g_talk_troop"),
        (str_store_troop_name, s51, ":var_3"),
        (str_store_troop_name, s54, ":var_7"),
        (assign, ":var_11", "str_comment_i_quarreled_with_troop_over_woman"),
        (assign, ":var_10", -1),
    (else_try),
        (eq, ":var_1", 66),
        (eq, ":var_3", "trp_player"),
        (try_begin),
            (eq, ":var_5", "$g_talk_troop"),
            (assign, ":var_10", 200),
            (assign, ":var_13", -1),
            (assign, ":var_11", "str_comment_you_stole_cattles_from_my_village_default"),
            (try_begin),
                (neg|ge, "$g_talk_troop_faction_relation", -3),
                (this_or_next|eq, ":var_14", 6),
                (eq, ":var_14", 7),
                (assign, ":var_11", "str_comment_you_stole_cattles_from_my_village_enemy_benevolent"),
            (else_try),
                (neg|ge, "$g_talk_troop_faction_relation", -3),
                (this_or_next|eq, ":var_14", 4),
                (eq, ":var_14", 3),
                (assign, ":var_11", "str_comment_you_stole_cattles_from_my_village_enemy_coldblooded"),
            (else_try),
                (neg|ge, "$g_talk_troop_faction_relation", -3),
                (this_or_next|eq, ":var_14", 2),
                (eq, ":var_14", 5),
                (assign, ":var_11", "str_comment_you_stole_cattles_from_my_village_enemy_spiteful"),
            (else_try),
                (neg|ge, "$g_talk_troop_faction_relation", -3),
                (assign, ":var_11", "str_comment_you_stole_cattles_from_my_village_enemy"),
            (else_try),
                (neg|ge, "$g_talk_troop_relation", -3),
                (this_or_next|eq, ":var_14", 2),
                (eq, ":var_14", 5),
                (assign, ":var_11", "str_comment_you_stole_cattles_from_my_village_unfriendly_spiteful"),
            (else_try),
                (gt, "$g_talk_troop_relation", 6),
                (assign, ":var_11", "str_comment_you_stole_cattles_from_my_village_friendly"),
            (try_end),
        (try_end),
    (try_end),
    (assign, reg0, ":var_11"),
    (assign, reg1, ":var_10"),
    (assign, reg2, ":var_13"),
    (assign, reg3, ":var_12"),

]),

("get_relevant_comment_to_s42",
[
    (troop_get_slot, ":var_0", "$g_talk_troop", slot_lord_reputation_type),
    (try_begin),
        (eq, "$cheat_mode", 1),
        (store_add, ":var_1", ":var_0", "str_personality_archetypes"),
        (str_store_string, s15, ":var_1"),
        (display_message, "@{!}Reputation type: {s15}"),
    (try_end),
    (assign, ":var_2", 50),
    (assign, ":var_3", -1),
    (assign, ":var_4", -1),
    (assign, ":var_5", 0),
    (assign, ":var_6", -1),
    (assign, ":var_7", 0),
    (store_current_hours, ":var_8"),
    (troop_get_slot, ":var_9", "$g_talk_troop", slot_troop_last_comment_slot),
    (troop_set_slot, "$g_talk_troop", slot_troop_last_comment_slot, "$num_log_entries"),
    (store_add, ":var_10", "$num_log_entries", 1),
    (try_for_range, ":var_11", 1, ":var_10"),
        (troop_get_slot, ":var_12", "trp_log_array_entry_time", ":var_11"),
        (store_sub, ":var_13", ":var_8", ":var_12"),
        (try_begin),
            (neg|gt, ":var_11", ":var_9"),
            (try_begin),
                (eq, ":var_11", ":var_9"),
                (eq, "$cheat_mode", 1),
                (assign, reg5, ":var_11"),
                (display_message, "@{!}Entries up to #{reg5} skipped"),
            (try_end),
        (else_try),
            (call_script, "script_get_relevant_comment_for_log_entry", ":var_11"),
            (gt, reg1, 10),
            (assign, ":var_14", reg1),
            (assign, ":var_15", reg0),
            (assign, ":var_16", reg3),
            (store_random_in_range, ":var_17", 70, 140),
            (val_mul, ":var_14", ":var_17"),
            (store_add, ":var_18", ":var_13", 500),
            (val_mul, ":var_14", 1000),
            (val_div, ":var_14", ":var_18"),
            (try_begin),
                (gt, ":var_14", ":var_2"),
                (assign, ":var_2", ":var_14"),
                (assign, ":var_3", ":var_15"),
                (assign, ":var_4", ":var_16"),
                (assign, ":var_6", ":var_11"),
                (assign, ":var_7", reg2),
            (try_end),
        (try_end),
    (try_end),
    (try_begin),
        (gt, ":var_3", 0),
        (assign, ":var_5", 1),
        (troop_get_slot, ":var_19", "trp_log_array_actor", ":var_6"),
        (troop_get_slot, ":var_20", "trp_log_array_center_object", ":var_6"),
        (troop_get_slot, ":var_21", "trp_log_array_center_object_lord", ":var_6"),
        (troop_get_slot, ":var_22", "trp_log_array_center_object_faction", ":var_6"),
        (troop_get_slot, ":var_23", "trp_log_array_troop_object", ":var_6"),
        (troop_get_slot, ":var_24", "trp_log_array_troop_object_faction", ":var_6"),
        (troop_get_slot, ":var_25", "trp_log_array_faction_object", ":var_6"),
        (try_begin),
            (ge, ":var_19", 0),
            (str_store_troop_name, s50, ":var_19"),
        (try_end),
        (try_begin),
            (ge, ":var_20", 0),
            (str_store_party_name, s51, ":var_20"),
        (try_end),
        (try_begin),
            (ge, ":var_21", 0),
            (str_store_troop_name, s52, ":var_21"),
        (try_end),
        (try_begin),
            (ge, ":var_22", 0),
            (str_store_faction_name, s53, ":var_22"),
        (try_end),
        (try_begin),
            (ge, ":var_23", 0),
            (str_store_troop_name, s54, ":var_23"),
        (try_end),
        (try_begin),
            (is_between, ":var_24", "fac_player_supporters_faction", "fac_kingdoms_end"),
            (str_store_faction_name, s55, ":var_24"),
            (str_store_string, s55, "str_the_s55"),
        (else_try),
            (is_between, ":var_23", "trp_bandit", "trp_black_khergit_horseman"),
            (str_store_string, s55, "str_bandits"),
        (else_try),
            (eq, ":var_24", "fac_deserters"),
            (str_store_string, s55, "str_deserters"),
        (else_try),
            (str_store_string, s55, "str_travellers_on_the_road"),
        (else_try),
        (try_end),
        (try_begin),
            (ge, ":var_25", 0),
            (str_store_faction_name, s56, ":var_25"),
        (try_end),
        (assign, "$g_last_comment_copied_to_s42", ":var_3"),
        (assign, "$g_rejoinder_to_last_comment", ":var_4"),
        (str_store_string, s42, ":var_3"),
    (try_end),
    (assign, reg0, ":var_5"),
    (assign, "$log_comment_relation_change", ":var_7"),

]),

("merchant_road_info_to_s42",
[
    (store_script_param, ":var_0", 1),
    (assign, ":var_1", -1),
    (assign, ":var_2", -1),
    (assign, ":var_3", -1),
    (assign, ":var_4", -1),
    (str_clear, s32),
    (str_clear, s42),
    (str_clear, s47),
    (try_for_range, ":var_5", "p_town_1_1", "p_salt_mine"),
        (party_set_slot, ":var_5", slot_party_temp_slot_1, 0),
    (try_end),
    (assign, ":var_6", 0),
    (assign, ":var_7", 0),
    (try_for_range, ":var_8", 0, "$num_log_entries"),
        (store_sub, ":var_9", "$num_log_entries", ":var_8"),
        (this_or_next|troop_slot_eq, "trp_log_array_entry_type", ":var_9", 3),
        (troop_slot_eq, "trp_log_array_entry_type", ":var_9", 5),
        (troop_get_slot, ":var_10", "trp_log_array_center_object", ":var_9"),
        (troop_get_slot, ":var_11", "trp_log_array_troop_object", ":var_9"),
        (this_or_next|eq, ":var_10", ":var_0"),
        (eq, ":var_11", ":var_0"),
        (troop_get_slot, ":var_12", "trp_log_array_entry_time", ":var_9"),
        (store_current_hours, ":var_13"),
        (store_sub, ":var_14", ":var_13", ":var_12"),
        (assign, reg3, ":var_14"),
        (neg|ge, ":var_14", 672),
        (try_begin),
            (eq, "$cheat_mode", 1),
            (troop_slot_eq, "trp_log_array_entry_type", ":var_9", 3),
            (display_message, "str_attack_on_travellers_found_reg3_hours_ago"),
        (else_try),
            (eq, "$cheat_mode", 1),
            (troop_slot_eq, "trp_log_array_entry_type", ":var_9", 5),
            (display_message, "str_trade_event_found_reg3_hours_ago"),
        (try_end),
        (try_begin),
            (neg|ge, ":var_14", 24),
            (str_store_string, s46, "str_a_short_while_ago"),
        (else_try),
            (neg|ge, ":var_14", 48),
            (str_store_string, s46, "str_one_day_ago"),
        (else_try),
            (neg|ge, ":var_14", 72),
            (str_store_string, s46, "@two days ago"),
        (else_try),
            (neg|ge, ":var_14", 154),
            (str_store_string, s46, "str_earlier_this_week"),
        (else_try),
            (neg|ge, ":var_14", 240),
            (str_store_string, s46, "str_about_a_week_ago"),
        (else_try),
            (neg|ge, ":var_14", 480),
            (str_store_string, s46, "str_about_two_weeks_ago"),
        (else_try),
            (str_store_string, s46, "str_several_weeks_ago"),
        (try_end),
        (troop_get_slot, ":var_15", "trp_log_array_actor", ":var_9"),
        (troop_get_slot, ":var_16", "trp_log_array_faction_object", ":var_9"),
        (str_store_string, s39, "str_unknown_assailants"),
        (assign, ":var_17", -1),
        (try_begin),
            (party_is_active, ":var_15"),
            (store_faction_of_party, ":var_18", ":var_15"),
            (eq, ":var_16", ":var_18"),
            (assign, ":var_17", ":var_15"),
            (str_store_party_name, s39, ":var_17"),
            (assign, "$g_bandit_party_for_bounty", -1),
            (try_begin),
                (eq, ":var_16", "fac_kingdom_1"),
                (str_store_string, s39, "str_teutons"),
            (else_try),
                (eq, ":var_16", "fac_kingdom_2"),
                (str_store_string, s39, "str_lithuanians"),
            (else_try),
                (eq, ":var_16", "fac_kingdom_3"),
                (str_store_string, s39, "str_mongols"),
            (else_try),
                (eq, ":var_16", "fac_kingdom_4"),
                (str_store_string, s39, "str_danes"),
            (else_try),
                (eq, ":var_16", "fac_kingdom_5"),
                (str_store_string, s39, "str_polish"),
            (else_try),
                (eq, ":var_16", "fac_kingdom_6"),
                (str_store_string, s39, "str_hre"),
            (else_try),
                (eq, ":var_16", "fac_kingdom_7"),
                (str_store_string, s39, "str_hungarians"),
            (else_try),
                (eq, ":var_16", "fac_kingdom_8"),
                (str_store_string, s39, "str_novgorodians"),
            (else_try),
                (eq, ":var_16", "fac_kingdom_9"),
                (str_store_string, s39, "str_english"),
            (else_try),
                (eq, ":var_16", "fac_kingdom_10"),
                (str_store_string, s39, "str_french"),
            (else_try),
                (eq, ":var_16", "fac_kingdom_11"),
                (str_store_string, s39, "str_norwegians"),
            (else_try),
                (eq, ":var_16", "fac_kingdom_12"),
                (str_store_string, s39, "str_scots"),
            (else_try),
                (eq, ":var_16", "fac_kingdom_13"),
                (str_store_string, s39, "str_irish"),
            (else_try),
                (eq, ":var_16", "fac_kingdom_14"),
                (str_store_string, s39, "str_swedes"),
            (else_try),
                (eq, ":var_16", "fac_kingdom_15"),
                (str_store_string, s39, "str_galicians"),
            (else_try),
                (eq, ":var_16", "fac_kingdom_16"),
                (str_store_string, s39, "str_portugese"),
            (else_try),
                (eq, ":var_16", "fac_kingdom_17"),
                (str_store_string, s39, "str_aragonese"),
            (else_try),
                (eq, ":var_16", "fac_kingdom_18"),
                (str_store_string, s39, "str_castilans"),
                (eq, ":var_16", "fac_kingdom_19"),
                (str_store_string, s39, "str_navarrians"),
            (else_try),
                (eq, ":var_16", "fac_kingdom_20"),
                (str_store_string, s39, "str_granadians"),
            (else_try),
                (eq, ":var_16", "fac_papacy"),
                (str_store_string, s39, "str_papal"),
            (else_try),
                (eq, ":var_16", "fac_kingdom_22"),
                (str_store_string, s39, "str_byzantinians"),
            (else_try),
                (eq, ":var_16", "fac_kingdom_23"),
                (str_store_string, s39, "str_jerusalem"),
            (else_try),
                (eq, ":var_16", "fac_kingdom_24"),
                (str_store_string, s39, "str_sicilians"),
            (else_try),
                (eq, ":var_16", "fac_kingdom_25"),
                (str_store_string, s39, "str_mamluks"),
            (else_try),
                (eq, ":var_16", "fac_kingdom_26"),
                (str_store_string, s39, "str_latin"),
            (else_try),
                (eq, ":var_16", "fac_kingdom_27"),
                (str_store_string, s39, "str_ilkhanate"),
            (else_try),
                (eq, ":var_16", "fac_kingdom_28"),
                (str_store_string, s39, "str_hafsid"),
            (else_try),
                (eq, ":var_16", "fac_kingdom_29"),
                (str_store_string, s39, "str_serbian"),
            (else_try),
                (eq, ":var_16", "fac_kingdom_30"),
                (str_store_string, s39, "str_bulgarian"),
            (else_try),
                (eq, ":var_16", "fac_kingdom_31"),
                (str_store_string, s39, "str_marinid"),
            (else_try),
                (eq, ":var_16", "fac_kingdom_32"),
                (str_store_string, s39, "str_venice"),
            (else_try),
                (eq, ":var_16", "fac_kingdom_33"),
                (str_store_string, s39, "str_balt"),
            (else_try),
                (eq, ":var_16", "fac_kingdom_37"),
                (str_store_string, s39, "str_wales"),
            (else_try),
                (eq, ":var_16", "fac_kingdom_38"),
                (str_store_string, s39, "str_genoa"),
            (else_try),
                (eq, ":var_16", "fac_kingdom_39"),
                (str_store_string, s39, "str_pisa"),
            (else_try),
                (eq, ":var_16", "fac_kingdom_40"),
                (str_store_string, s39, "str_guelph"),
            (else_try),
                (eq, ":var_16", "fac_kingdom_41"),
                (str_store_string, s39, "str_ghibeline"),
            (else_try),
                (eq, ":var_16", "fac_kingdom_42"),
                (str_store_string, s39, "str_bohemian"),
            (else_try),
                (eq, ":var_16", "fac_player_supporters_faction"),
                (str_store_string, s39, "str_your_followers"),
            (else_try),
                (assign, ":var_1", ":var_17"),
                (assign, ":var_2", ":var_10"),
                (assign, ":var_3", ":var_11"),
                (assign, ":var_4", ":var_14"),
            (try_end),
        (try_end),
        (try_begin),
            (eq, ":var_10", ":var_0"),
            (troop_slot_eq, "trp_log_array_entry_type", ":var_9", 3),
            (party_slot_eq, ":var_11", slot_party_temp_slot_1, 0),
            (party_set_slot, ":var_11", slot_party_temp_slot_1, 1),
            (str_store_party_name, s40, ":var_11"),
            (str_store_string, s44, "str_we_have_heard_that_travellers_heading_to_s40_were_attacked_on_the_road_s46_by_s39"),
            (str_store_string, s43, "str_s42"),
            (str_store_string, s42, "str_s43_s44"),
            (val_add, ":var_6", 1),
        (else_try),
            (eq, ":var_11", ":var_0"),
            (troop_slot_eq, "trp_log_array_entry_type", ":var_9", 3),
            (party_slot_eq, ":var_10", slot_party_temp_slot_1, 0),
            (party_set_slot, ":var_10", slot_party_temp_slot_1, 1),
            (str_store_party_name, s40, ":var_10"),
            (str_store_string, s44, "str_we_have_heard_that_travellers_coming_from_s40_were_attacked_on_the_road_s46_by_s39"),
            (str_store_string, s43, "str_s42"),
            (str_store_string, s42, "str_s43_s44"),
            (val_add, ":var_6", 1),
        (else_try),
            (eq, ":var_11", ":var_0"),
            (troop_slot_eq, "trp_log_array_entry_type", ":var_9", 5),
            (party_slot_eq, ":var_10", slot_party_temp_slot_1, 0),
            (party_set_slot, ":var_10", slot_party_temp_slot_1, 1),
            (str_store_party_name, s40, ":var_10"),
            (str_store_string, s44, "str_travellers_coming_from_s40_traded_here_s46"),
            (str_store_string, s43, "str_s42"),
            (str_store_string, s42, "str_s43_s44"),
            (val_add, ":var_7", 1),
        (try_end),
    (try_end),
    (try_begin),
        (neg|gt, ":var_7", 2),
        (eq, ":var_6", 0),
        (store_current_hours, ":var_19"),
        (neg|ge, ":var_19", 168),
        (str_store_string, s42, "str_it_is_still_early_in_the_caravan_season_so_we_have_seen_little_tradings42"),
    (else_try),
        (eq, ":var_7", 0),
        (eq, ":var_6", 0),
        (str_store_string, s42, "str_there_has_been_very_little_trading_activity_here_recentlys42"),
    (else_try),
        (neg|gt, ":var_7", 2),
        (eq, ":var_6", 0),
        (str_store_string, s42, "str_there_has_some_trading_activity_here_recently_but_not_enoughs42"),
    (else_try),
        (neg|gt, ":var_7", 2),
        (neg|gt, ":var_6", 2),
        (str_store_string, s42, "str_there_has_some_trading_activity_here_recently_but_the_roads_are_dangerouss42"),
    (else_try),
        (ge, ":var_6", 3),
        (str_store_string, s42, "str_the_roads_around_here_are_very_dangerouss42"),
    (else_try),
        (ge, ":var_6", 1),
        (str_store_string, s42, "str_we_have_received_many_traders_in_town_here_although_there_is_some_danger_on_the_roadss42"),
    (else_try),
        (str_store_string, s42, "str_we_have_received_many_traders_in_town_heres42"),
    (try_end),
    (assign, ":var_20", 0),
    (try_for_range, ":var_21", 190, 205),
        (party_get_slot, ":var_22", ":var_0", ":var_21"),
        (is_between, ":var_22", "p_town_1_1", "p_salt_mine"),
        (party_slot_eq, ":var_22", slot_party_temp_slot_1, 0),
        (str_store_party_name, s41, ":var_22"),
        (try_begin),
            (eq, ":var_20", 1),
            (str_store_string, s44, "str_s44_s41"),
        (else_try),
            (str_store_string, s44, "str_s41"),
        (try_end),
        (assign, ":var_20", 1),
    (try_end),
    (try_begin),
        (eq, ":var_20", 1),
        (str_store_string, s47, "str_there_is_little_news_about_the_caravan_routes_to_the_towns_of_s44_and_nearby_parts_but_no_news_is_good_news_and_those_are_therefore_considered_safe"),
    (try_end),
    (assign, ":var_23", 0),
    (try_for_range, ":var_24", "p_village_1_1", "p_salt_mine"),
        (party_slot_eq, ":var_24", slot_village_market_town, ":var_0"),
        (party_slot_eq, ":var_24", slot_party_temp_slot_1, 0),
        (str_store_party_name, s41, ":var_24"),
        (try_begin),
            (eq, ":var_23", 1),
            (str_store_string, s44, "str_s44_s41"),
        (else_try),
            (str_store_string, s44, "str_s41"),
        (try_end),
        (assign, ":var_23", 1),
    (try_end),
    (try_begin),
        (eq, ":var_23", 1),
        (eq, ":var_20", 1),
        (str_store_string, s47, "str_s47_also_the_roads_to_the_villages_of_s44_and_other_outlying_hamlets_are_considered_safe"),
    (else_try),
        (eq, ":var_23", 1),
        (str_store_string, s47, "str_however_the_roads_to_the_villages_of_s44_and_other_outlying_hamlets_are_considered_safe"),
    (try_end),
    (str_store_string, s33, "str_we_have_shortages_of"),
    (assign, ":var_25", 0),
    (try_for_range, ":var_26", "itm_spice", "itm_siege_supply"),
        (store_sub, ":var_27", ":var_26", "itm_spice"),
        (val_add, ":var_27", 250),
        (party_get_slot, ":var_28", ":var_0", ":var_27"),
        (gt, ":var_28", 1100),
        (str_store_item_name, s34, ":var_26"),
        (assign, reg1, ":var_28"),
        (str_store_string, s33, "str_s33_s34_reg1"),
        (assign, ":var_25", 1),
    (try_end),
    (try_begin),
        (eq, ":var_25", 0),
        (str_store_string, s32, "str_we_have_adequate_stores_of_all_commodities"),
    (else_try),
        (str_store_string, s32, "str_s33_and_some_other_commodities"),
    (try_end),
    (assign, reg0, ":var_1"),
    (assign, reg1, ":var_2"),
    (assign, reg2, ":var_3"),
    (assign, reg3, ":var_4"),

]),

("get_manhunt_information_to_s15",
[
    (store_script_param, ":var_0", 1),
    (str_store_string, s15, "str_the_roads_are_full_of_brigands_friend_but_that_name_in_particular_does_not_sound_familiar_good_hunting_to_you_nonetheless"),
    (quest_get_slot, ":var_1", ":var_0", 8),
    (try_begin),
        (is_between, "$g_talk_troop", "trp_npc1", "trp_knight_1_1_wife"),
        (troop_get_slot, ":var_2", "$g_talk_troop", slot_troop_leaded_party),
    (else_try),
        (gt, "$g_encountered_party", "p_spawn_points_end"),
        (assign, ":var_2", "$g_encountered_party"),
    (else_try),
        (assign, ":var_2", -1),
    (try_end),
    (try_for_range, ":var_3", 0, "$num_log_entries"),
        (gt, ":var_2", -1),
        (troop_get_slot, ":var_4", "trp_log_array_actor", ":var_3"),
        (eq, ":var_4", ":var_2"),
        (troop_get_slot, ":var_5", "trp_log_array_troop_object", ":var_3"),
        (eq, ":var_5", ":var_1"),
        (store_current_hours, ":var_6"),
        (troop_get_slot, ":var_7", "trp_log_array_entry_time", ":var_3"),
        (val_sub, ":var_6", ":var_7"),
        (try_begin),
            (neg|gt, ":var_6", 1),
            (str_store_string, s16, "str_less_than_an_hour_ago"),
        (else_try),
            (neg|gt, ":var_6", 48),
            (assign, reg3, ":var_6"),
            (str_store_string, s16, "str_maybe_reg3_hours_ago"),
        (else_try),
            (val_div, ":var_6", 24),
            (assign, reg3, ":var_6"),
            (str_store_string, s16, "str_reg3_days_ago"),
        (try_end),
        (troop_get_slot, ":var_8", "trp_log_array_center_object", ":var_3"),
        (str_store_party_name, s17, ":var_8"),
        (troop_get_slot, ":var_9", "trp_log_array_entry_type", ":var_3"),
        (eq, ":var_9", 70),
        (str_store_string, s15, "str_youre_in_luck_we_sighted_those_bastards_s16_near_s17_hurry_and_you_might_be_able_to_pick_up_their_trail_while_its_still_hot"),
    (try_end),

]),

("rebellion_arguments",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (assign, ":var_3", 0),
    (assign, ":var_4", 0),
    (troop_get_slot, ":var_5", ":var_0", slot_lord_reputation_type),
    (store_troop_faction, ":var_6", ":var_2"),
    (store_troop_faction, ":var_7", ":var_2"),
    (try_begin),
        (eq, ":var_2", "trp_player"),
        (assign, ":var_8", "$player_right_to_rule"),
    (else_try),
        (is_between, ":var_2", "trp_kingdom_4_pretender", "trp_knight_1_1_wife"),
        (troop_slot_eq, ":var_2", slot_troop_original_faction, ":var_6"),
        (assign, ":var_8", 75),
    (else_try),
        (assign, ":var_8", 60),
    (try_end),
    (try_begin),
        (eq, ":var_1", 1),
        (store_sub, ":var_4", ":var_8", 30),
    (else_try),
        (eq, ":var_1", 2),
        (store_sub, ":var_4", "$player_honor", 20),
    (else_try),
        (eq, ":var_1", 5),
        (store_sub, ":var_4", "$player_honor", 20),
    (else_try),
        (eq, ":var_1", 4),
        (assign, ":var_4", 0),
        (try_for_range, ":var_9", "p_town_1_1", "p_salt_mine"),
            (store_faction_of_party, ":var_10", ":var_9"),
            (assign, ":var_4", -40),
            (try_begin),
                (eq, "$players_kingdom", ":var_7"),
                (this_or_next|eq, ":var_10", "fac_player_faction"),
                (eq, ":var_10", "fac_player_supporters_faction"),
                (val_add, ":var_4", 5),
            (else_try),
                (eq, ":var_10", ":var_7"),
                (val_add, ":var_4", 5),
            (try_end),
        (try_end),
    (else_try),
        (eq, ":var_1", 3),
        (assign, ":var_4", 20),
        (try_for_range, ":var_11", "trp_npc1", "trp_knight_1_1_wife"),
            (store_troop_faction, ":var_12", ":var_11"),
            (neg|eq, ":var_0", "$g_talk_troop"),
            (this_or_next|eq, ":var_12", "fac_player_supporters_faction"),
            (eq, ":var_12", "$players_kingdom"),
            (troop_slot_eq, ":var_11", slot_troop_promised_fief, 1),
            (val_sub, ":var_4", 20),
        (try_end),
    (try_end),
    (val_clamp, ":var_4", -40, 41),
    (try_begin),
        (eq, ":var_5", 1),
        (try_begin),
            (eq, ":var_1", 1),
            (assign, ":var_3", 30),
            (try_begin),
                (gt, ":var_4", 0),
                (str_store_string, s15, "str_you_speak_of_claims_to_the_throne_good_there_is_nothing_id_rather_do_than_fight_for_a_good_cause"),
            (else_try),
                (str_store_string, s15, "str_you_speak_of_claims_to_the_throne_well_there_is_nothing_id_rather_do_than_fight_for_a_good_cause_but_the_claim_you_make_seems_somewhat_weak"),
            (try_end),
        (else_try),
            (eq, ":var_1", 5),
            (assign, ":var_3", 10),
            (try_begin),
                (gt, ":var_4", 0),
                (str_store_string, s15, "str_i_am_pleased_that_you_speak_of_upholding_my_ancient_rights_which_are_sometimes_trod_upon_in_these_sorry_days"),
            (else_try),
                (str_store_string, s15, "str_i_am_pleased_that_you_speak_of_upholding_my_ancient_rights_but_sometimes_men_make_pledges_before_they_are_king_which_they_cannot_keep_once_they_take_the_throne"),
            (try_end),
        (else_try),
            (eq, ":var_1", 2),
            (assign, ":var_3", 0),
            (try_begin),
                (str_store_string, s15, "str_you_speak_of_protecting_the_commons_well_i_supposed_thats_good_but_sometimes_the_commons_overstep_their_boundaries_im_more_concerned_that_your_claim_be_legal_so_i_can_swing_my_sword_with_a_good_conscience"),
            (try_end),
        (else_try),
            (eq, ":var_1", 3),
            (assign, ":var_3", -10),
            (try_begin),
                (gt, ":var_4", 0),
                (str_store_string, s15, "str_you_speak_of_giving_me_land_good_i_ask_for_no_more_than_my_due"),
            (else_try),
                (str_store_string, s15, "str_you_speak_of_giving_me_land_unfortunately_you_are_not_wellknown_for_rewarding_those_to_whom_you_have_made_such_offers"),
            (try_end),
        (else_try),
            (eq, ":var_1", 4),
            (assign, ":var_3", -30),
            (str_store_string, s15, "str_you_speak_of_unifying_calradia_well_i_believe_that_well_always_be_fighting__its_important_that_we_fight_for_a_rightful_cause"),
        (try_end),
    (else_try),
        (eq, ":var_5", 2),
        (try_begin),
            (eq, ":var_1", 1),
            (assign, ":var_3", -20),
            (str_store_string, s15, "str_you_talk_of_claims_to_the_throne_but_i_leave_bickering_about_legalities_to_the_lawyers_and_clerks"),
        (else_try),
            (eq, ":var_1", 2),
            (assign, ":var_3", -30),
            (str_store_string, s15, "str_you_speak_of_ruling_justly_hah_ill_believe_theres_such_a_thing_as_a_just_king_when_i_see_one"),
        (else_try),
            (eq, ":var_1", 5),
            (assign, ":var_3", 0),
            (str_store_string, s15, "str_you_spoke_of_protecting_the_rights_of_the_nobles_if_you_did_youd_be_the_first_king_to_do_so_in_a_very_long_time"),
        (else_try),
            (eq, ":var_1", 3),
            (assign, ":var_3", 30),
            (try_begin),
                (gt, ":var_4", 0),
                (str_store_string, s15, "str_you_speak_of_giving_me_land_ay_well_lets_see_if_you_deliver"),
            (else_try),
                (str_store_string, s15, "str_you_speak_of_giving_me_land_bah_youre_not_known_for_delivering_on_your_pledges"),
            (try_end),
        (else_try),
            (eq, ":var_1", 4),
            (assign, ":var_3", 10),
            (try_begin),
                (gt, ":var_4", 0),
                (str_store_string, s15, "str_you_speak_of_unifying_calradia_well_youve_done_a_good_job_at_making_calradia_bend_its_knee_to_you_so_maybe_thats_not_just_talk"),
            (else_try),
                (str_store_string, s15, "str_you_speak_of_unifying_calradia_id_be_impressed_if_i_thought_you_could_do_it_but_unfortunately_you_dont"),
            (try_end),
        (try_end),
    (else_try),
        (eq, ":var_5", 3),
        (try_begin),
            (eq, ":var_1", 1),
            (assign, ":var_3", -20),
            (str_store_string, s15, "str_you_speak_of_claims_to_the_throne_well_any_peasant_can_claim_to_be_a_kings_bastard"),
        (else_try),
            (eq, ":var_1", 2),
            (assign, ":var_3", -30),
            (str_store_string, s15, "str_well_its_a_fine_thing_to_court_the_commons_with_promises_but_what_do_you_have_to_offer_me"),
        (else_try),
            (eq, ":var_1", 5),
            (assign, ":var_3", 0),
            (try_begin),
                (gt, ":var_4", 0),
                (str_store_string, s15, "str_you_speak_of_protecting_the_rights_of_lords_that_would_make_a_fine_change_if_my_rights_as_lord_would_be_respected"),
            (else_try),
                (str_store_string, s15, "str_you_speak_of_protecting_the_rights_of_lords_that_would_make_a_fine_change_if_my_rights_as_lord_would_be_respected_however_it_is_easy_for_you_to_make_promises_while_you_are_weak_that_you_have_no_intention_of_keeping_when_you_are_strong"),
            (try_end),
        (else_try),
            (eq, ":var_1", 3),
            (assign, ":var_3", 20),
            (try_begin),
                (gt, ":var_4", 0),
                (str_store_string, s15, "str_you_speak_of_giving_me_land_well_my_family_is_of_ancient_and_noble_lineage_so_you_promise_me_no_more_than_my_due_still_your_gesture_is_appreciated"),
            (else_try),
                (str_store_string, s15, "str_you_speak_of_giving_me_land_well_you_make_that_pledge_but_i_am_not_impressed"),
            (try_end),
        (else_try),
            (eq, ":var_1", 4),
            (assign, ":var_3", 20),
            (try_begin),
                (gt, ":var_4", 0),
                (str_store_string, s15, "str_you_speak_of_unifying_calradia_well_much_of_this_land_now_bends_its_knee_to_you_so_perhaps_that_is_not_just_talk"),
            (else_try),
                (str_store_string, s15, "str_you_speak_of_unifying_calradia_but_right_now_yours_is_just_one_squabbling_faction_among_many"),
            (try_end),
        (try_end),
    (else_try),
        (eq, ":var_5", 4),
        (try_begin),
            (eq, ":var_1", 1),
            (assign, ":var_3", -30),
            (str_store_string, s15, "str_you_speak_of_claims_well_no_offense_but_a_claim_unsupported_by_might_rarely_prospers"),
        (else_try),
            (eq, ":var_1", 2),
            (assign, ":var_3", 10),
            (try_begin),
                (gt, ":var_4", 0),
                (str_store_string, s15, "str_you_speak_of_protecting_the_commons_well_i_suppose_that_will_make_for_a_more_prosperous_realm_ive_always_tried_to_treat_my_peasants_decently_saves_going_to_bed_worrying_about_whether_youll_wake_up_with_the_roof_on_fire"),
            (else_try),
                (str_store_string, s15, "str_you_speak_of_protecting_the_commons_very_well_but_remember_that_peasants_are_more_likely_to_cause_trouble_if_you_make_promises_then_dont_deliver_than_if_you_never_made_the_promise_in_the_first_place"),
            (try_end),
        (else_try),
            (eq, ":var_1", 5),
            (assign, ":var_3", 15),
            (try_begin),
                (gt, ":var_4", 0),
                (str_store_string, s15, "str_you_speak_of_protecting_the_rights_of_lords_good_youd_be_well_advised_to_do_that__men_fight_better_for_a_king_wholl_respect_their_rights"),
            (else_try),
                (str_store_string, s15, "str_you_speak_of_protecting_the_rights_of_lords_very_well_but_remember__failing_to_keep_promises_which_you_made_while_scrambling_up_the_throne_is_the_quickest_way_to_topple_off_of_it_once_you_get_there"),
            (try_end),
        (else_try),
            (eq, ":var_1", 3),
            (assign, ":var_3", -20),
            (str_store_string, s15, "str_you_speak_of_giving_me_land_very_good_but_often_i_find_that_when_a_man_makes_too_many_promises_trying_to_get_to_the_top_he_has_trouble_keeping_them_once_he_reaches_it"),
        (else_try),
            (eq, ":var_1", 4),
            (assign, ":var_3", 20),
            (try_begin),
                (gt, ":var_4", 0),
                (str_store_string, s15, "str_you_speak_of_unifying_calradia_well_many_have_said_that_you_might_very_well_be_the_one_to_do_it"),
            (else_try),
                (str_store_string, s15, "str_you_speak_of_unifying_calradia_well_all_the_kings_say_that_im_not_sure_that_you_will_succeed_while_they_fail"),
            (try_end),
        (try_end),
    (else_try),
        (eq, ":var_5", 5),
        (try_begin),
            (eq, ":var_1", 1),
            (assign, ":var_3", -20),
            (str_store_string, s15, "str_you_speak_of_claims_do_you_think_i_care_for_the_nattering_of_lawyers"),
        (else_try),
            (eq, ":var_1", 2),
            (assign, ":var_3", -20),
            (str_store_string, s15, "str_you_speak_of_protecting_the_commons_how_kind_of_you_i_shall_tell_my_swineherd_all_about_your_sweet_promises_no_doubt_he_will_become_your_most_faithful_vassal"),
        (else_try),
            (eq, ":var_1", 5),
            (assign, ":var_3", -10),
            (str_store_string, s15, "str_you_speak_of_protecing_the_rights_of_lords_such_sweet_words_but_ill_tell_you_this__the_only_rights_that_are_respected_in_this_world_are_the_rights_to_dominate_whoever_is_weaker_and_to_submit_to_whoever_is_stronger"),
        (else_try),
            (eq, ":var_1", 3),
            (assign, ":var_3", 20),
            (try_begin),
                (gt, ":var_4", 0),
                (str_store_string, s15, "str_you_speak_of_giving_me_land_yes_very_good__but_you_had_best_deliver"),
            (else_try),
                (str_store_string, s15, "str_you_speak_of_giving_me_land_hah_perhaps_all_those_others_to_whom_you_promised_lands_will_simply_step_aside"),
            (try_end),
        (else_try),
            (eq, ":var_1", 4),
            (assign, ":var_3", 10),
            (try_begin),
                (gt, ":var_4", 0),
                (str_store_string, s15, "str_you_speak_of_unifying_calradia_you_may_indeed_humble_the_other_kings_of_this_land_and_in_that_case_i_would_hope_that_you_would_remember_me_as_your_faithful_servant"),
            (else_try),
                (str_store_string, s15, "str_you_speak_of_unifying_calradia_but_you_are_weak_and_i_think_that_you_will_remain_weak"),
            (try_end),
        (try_end),
    (else_try),
        (eq, ":var_5", 6),
        (try_begin),
            (eq, ":var_1", 1),
            (assign, ":var_3", 10),
            (try_begin),
                (gt, ":var_4", 0),
                (str_store_string, s15, "str_you_speak_of_claims_its_good_for_a_king_to_have_a_strong_claim_although_admittedly_im_more_concerned_that_he_rules_just_ly_than_with_legalities_anyway_your_claim_seems_wellfounded_to_me"),
            (else_try),
                (str_store_string, s15, "str_you_speak_of_claims_but_your_claim_seems_a_bit_weak_to_me"),
            (try_end),
        (else_try),
            (eq, ":var_1", 2),
            (assign, ":var_3", 20),
            (try_begin),
                (gt, ":var_4", 0),
                (str_store_string, s15, "str_you_speak_of_protecting_the_commons_i_like_that_my_tenants_are_a_happy_lot_i_think_but_i_hear_of_others_in_other_estates_that_arent_so_fortunate"),
            (else_try),
                (str_store_string, s15, "str_you_speak_of_protecting_the_commons_im_glad_to_hear_you_say_that_but_do_me_a_favor__dont_promise_the_commons_anything_you_cant_deliver_thats_a_sure_way_to_get_them_to_rebel_and_it_breaks_my_heart_to_have_to_put_them_down"),
            (try_end),
        (else_try),
            (eq, ":var_1", 5),
            (assign, ":var_3", 0),
            (str_store_string, s15, "str_you_speak_of_protecting_the_rights_of_lords_well_very_good_i_suppose_but_you_know__we_lords_can_take_of_ourselves_its_the_common_folk_who_need_a_strong_king_to_look_out_for_them_to_my_mind"),
        (else_try),
            (eq, ":var_1", 3),
            (assign, ":var_3", -15),
            (str_store_string, s15, "str_you_speak_of_giving_me_land_its_kind_of_you_really_though_that_is_not_necessary"),
        (else_try),
            (eq, ":var_1", 4),
            (assign, ":var_3", -25),
            (str_store_string, s15, "str_you_speak_of_unifying_calradia_well_maybe_you_can_unite_this_land_by_the_sword_but_im_not_sure_that_this_will_make_you_a_good_ruler"),
        (try_end),
    (else_try),
        (eq, ":var_5", 7),
        (try_begin),
            (eq, ":var_1", 1),
            (assign, ":var_3", 10),
            (try_begin),
                (gt, ":var_4", 0),
                (str_store_string, s15, "str_you_speak_of_claims_a_king_must_have_a_strong_legal_claim_for_there_not_to_be_chaos_in_the_realm_and_yours_is_wellestablished"),
            (else_try),
                (str_store_string, s15, "str_you_speak_of_claims_a_king_must_have_a_strong_legal_claim_for_there_not_to_be_chaos_in_the_realm_but_your_claim_is_not_so_strong"),
            (try_end),
        (else_try),
            (eq, ":var_1", 5),
            (assign, ":var_3", -5),
            (try_begin),
                (gt, ":var_4", 0),
                (str_store_string, s15, "str_you_speak_of_protecting_the_rights_of_lords_it_is_of_course_important_that_a_king_respect_the_rights_of_his_vassals_although_i_worry_that_a_king_who_took_a_throne_without_proper_cause_would_not_rule_with_justice"),
            (else_try),
                (str_store_string, s15, "str_you_speak_of_protecting_the_rights_of_lords_it_is_of_course_important_that_a_king_respect_the_rights_of_his_vassals_however_i_would_like_to_know_that_you_would_indeed_deliver_on_your_promises"),
            (try_end),
        (else_try),
            (eq, ":var_1", 2),
            (assign, ":var_3", 5),
            (try_begin),
                (gt, ":var_4", 0),
                (str_store_string, s15, "str_you_speak_of_protecting_the_commons_i_would_be_pleased_to_serve_a_king_who_respected_the_rights_of_his_subjects_although_i_worry_that_a_king_who_took_a_throne_without_proper_cause_would_not_rule_with_justice"),
            (else_try),
                (str_store_string, s15, "str_you_speak_of_protecting_the_commons_i_would_be_pleased_to_serve_a_king_who_respected_the_rights_of_his_subjects_however_i_would_like_to_know_that_you_would_indeed_deliver_on_your_promises"),
            (try_end),
        (else_try),
            (eq, ":var_1", 3),
            (assign, ":var_3", -40),
            (str_store_string, s15, "str_i_am_not_swayed_by_promises_of_reward"),
        (else_try),
            (eq, ":var_1", 4),
            (assign, ":var_3", 10),
            (try_begin),
                (gt, ":var_4", 0),
                (str_store_string, s15, "str_you_speak_of_unifying_calradia_it_would_be_good_to_bring_peace_to_the_realm_and_i_believe_that_you_are_strong_enough_to_do_so"),
            (else_try),
                (str_store_string, s15, "str_you_speak_of_unifying_calradia_it_would_be_good_to_bring_peace_the_realm_but_with_your_kingdom_in_its_current_state_i_worry_that_you_are_just_bringing_more_discord"),
            (try_end),
        (try_end),
    (try_end),
    (str_store_string, s14, "str_s15"),
    (assign, reg0, ":var_3"),
    (assign, reg1, ":var_4"),

]),

("get_culture_with_party_faction_for_music",
[
    (store_script_param, ":var_0", 1),
    (store_faction_of_party, ":var_1", ":var_0"),
    (try_begin),
        (this_or_next|eq, ":var_1", "fac_player_faction"),
        (eq, ":var_1", "fac_player_supporters_faction"),
        (assign, ":var_1", "$players_kingdom"),
    (try_end),
    (try_begin),
        (is_between, ":var_0", "p_town_1_1", "p_salt_mine"),
        (this_or_next|eq, ":var_1", "fac_player_supporters_faction"),
        (neg|is_between, ":var_1", "fac_player_supporters_faction", "fac_kingdoms_end"),
        (party_get_slot, ":var_1", ":var_0", slot_center_original_faction),
    (try_end),
    (call_script, "script_get_closest_center", "p_main_party"),
    (party_get_slot, ":var_1", reg0, slot_center_original_faction),
    (call_script, "script_get_culture_with_faction_for_music", ":var_1"),

]),

("get_culture_with_faction_for_music",
[
    (store_script_param, ":var_0", 1),
    (try_begin),
        (this_or_next|eq, ":var_0", "fac_kingdom_5"),
        (this_or_next|eq, ":var_0", "fac_kingdom_6"),
        (this_or_next|eq, ":var_0", "fac_kingdom_7"),
        (this_or_next|eq, ":var_0", "fac_kingdom_9"),
        (this_or_next|eq, ":var_0", "fac_kingdom_37"),
        (this_or_next|eq, ":var_0", "fac_kingdom_10"),
        (this_or_next|eq, ":var_0", "fac_kingdom_12"),
        (this_or_next|eq, ":var_0", "fac_kingdom_16"),
        (this_or_next|eq, ":var_0", "fac_kingdom_17"),
        (this_or_next|eq, ":var_0", "fac_kingdom_18"),
        (this_or_next|eq, ":var_0", "fac_kingdom_19"),
        (this_or_next|eq, ":var_0", "fac_kingdom_24"),
        (this_or_next|eq, ":var_0", "fac_kingdom_38"),
        (this_or_next|eq, ":var_0", "fac_kingdom_39"),
        (this_or_next|eq, ":var_0", "fac_kingdom_40"),
        (this_or_next|eq, ":var_0", "fac_kingdom_41"),
        (this_or_next|eq, ":var_0", "fac_kingdom_42"),
        (this_or_next|eq, ":var_0", "fac_kingdom_32"),
        (eq, ":var_0", "fac_kingdom_13"),
        (assign, ":var_1", 1),
    (else_try),
        (this_or_next|eq, ":var_0", "fac_kingdom_2"),
        (this_or_next|eq, ":var_0", "fac_kingdom_3"),
        (this_or_next|eq, ":var_0", "fac_kingdom_8"),
        (this_or_next|eq, ":var_0", "fac_kingdom_15"),
        (this_or_next|eq, ":var_0", "fac_kingdom_22"),
        (this_or_next|eq, ":var_0", "fac_kingdom_26"),
        (this_or_next|eq, ":var_0", "fac_kingdom_27"),
        (this_or_next|eq, ":var_0", "fac_kingdom_29"),
        (this_or_next|eq, ":var_0", "fac_kingdom_30"),
        (this_or_next|eq, ":var_0", "fac_kingdom_33"),
        (this_or_next|eq, ":var_0", "fac_kingdom_34"),
        (this_or_next|eq, ":var_0", "fac_kingdom_35"),
        (this_or_next|eq, ":var_0", "fac_kingdom_36"),
        (eq, ":var_0", "fac_kingdom_8"),
        (assign, ":var_1", 6),
    (else_try),
        (this_or_next|eq, ":var_0", "fac_kingdom_4"),
        (this_or_next|eq, ":var_0", "fac_kingdom_11"),
        (eq, ":var_0", "fac_kingdom_14"),
        (assign, ":var_1", 8388608),
    (else_try),
        (this_or_next|eq, ":var_0", "fac_papacy"),
        (this_or_next|eq, ":var_0", "fac_kingdom_23"),
        (eq, ":var_0", "fac_kingdom_1"),
        (assign, ":var_1", 1),
    (else_try),
        (this_or_next|eq, ":var_0", "fac_kingdom_20"),
        (this_or_next|eq, ":var_0", "fac_kingdom_25"),
        (this_or_next|eq, ":var_0", "fac_kingdom_31"),
        (eq, ":var_0", "fac_kingdom_28"),
        (assign, ":var_1", 32),
    (else_try),
        (assign, ":var_1", 0),
    (try_end),
    (assign, reg0, ":var_1"),

]),

("music_set_situation_with_culture",
[
    (store_script_param, ":var_0", 1),
    (assign, ":var_1", 0),
    (try_begin),
        (this_or_next|eq, ":var_0", 8192),
        (this_or_next|eq, ":var_0", 1048576),
        (this_or_next|eq, ":var_0", 524288),
        (this_or_next|eq, ":var_0", 16384),
        (eq, ":var_0", 2097152),
        (call_script, "script_get_culture_with_party_faction_for_music", "$g_encountered_party"),
        (val_or, ":var_1", reg0),
    (else_try),
        (this_or_next|eq, ":var_0", 4096),
        (eq, ":var_0", 1024),
        (call_script, "script_get_culture_with_party_faction_for_music", "$g_encountered_party"),
        (val_or, ":var_1", reg0),
        (call_script, "script_get_culture_with_party_faction_for_music", "p_main_party"),
        (val_or, ":var_1", reg0),
        (call_script, "script_get_closest_center", "p_main_party"),
        (call_script, "script_get_culture_with_party_faction_for_music", reg0),
        (val_or, ":var_1", reg0),
    (else_try),
        (eq, ":var_0", 2048),
        (call_script, "script_get_culture_with_faction_for_music", "$g_multiplayer_team_1_faction"),
        (val_or, ":var_1", reg0),
        (call_script, "script_get_culture_with_faction_for_music", "$g_multiplayer_team_2_faction"),
        (val_or, ":var_1", reg0),
    (else_try),
        (eq, ":var_0", 65536),
        (call_script, "script_get_culture_with_party_faction_for_music", "p_main_party"),
        (val_or, ":var_1", reg0),
        (call_script, "script_get_closest_center", "p_main_party"),
        (call_script, "script_get_culture_with_party_faction_for_music", reg0),
        (val_or, ":var_1", reg0),
    (else_try),
        (eq, ":var_0", 8388608),
        (call_script, "script_get_culture_with_party_faction_for_music", "p_main_party"),
        (val_or, ":var_1", reg0),
    (else_try),
        (eq, ":var_0", 32768),
        (call_script, "script_get_culture_with_party_faction_for_music", "$g_encountered_party"),
        (val_or, ":var_1", reg0),
    (try_end),
    (try_begin),
        (this_or_next|eq, ":var_0", 8192),
        (eq, ":var_0", 1048576),
        (try_begin),
            (is_currently_night),
            (assign, ":var_0", 524288),
        (try_end),
    (try_end),

]),

("combat_music_set_situation_with_culture",
[
    (assign, ":var_0", 1024),
    (assign, ":var_1", 0),
    (assign, ":var_2", 0),
    (try_for_agents, ":var_3"),
        (agent_is_alive, ":var_3"),
        (agent_is_human, ":var_3"),
        (agent_get_troop_id, ":var_4", ":var_3"),
        (store_character_level, ":var_5", ":var_4"),
        (val_add, ":var_5", 10),
        (val_mul, ":var_5", ":var_5"),
        (try_begin),
            (agent_is_ally, ":var_3"),
            (val_add, ":var_1", ":var_5"),
        (else_try),
            (val_add, ":var_2", ":var_5"),
        (try_end),
    (try_end),
    (val_mul, ":var_1", 4),
    (val_div, ":var_1", 3),
    (try_begin),
        (neg|ge, ":var_1", ":var_2"),
        (assign, ":var_0", 4096),
    (try_end),

]),

("play_victorious_sound",
[
    (call_script, "script_music_set_situation_with_culture", 8388608),

]),

("custom_battle_end",
[
    (assign, "$g_custom_battle_team1_death_count", 0),
    (assign, "$g_custom_battle_team2_death_count", 0),
    (get_player_agent_no, ":var_0"),
    (agent_get_team, ":var_1", ":var_0"),
    (try_for_agents, ":var_2"),
        (agent_is_human, ":var_2"),
        (neg|agent_is_alive, ":var_2"),
        (agent_get_team, ":var_3", ":var_2"),
        (try_begin),
            (eq, ":var_3", ":var_1"),
            (val_add, "$g_custom_battle_team1_death_count", 1),
        (else_try),
            (val_add, "$g_custom_battle_team2_death_count", 1),
        (try_end),
    (try_end),

]),

("remove_troop_from_prison",
[
    (store_script_param, ":var_0", 1),
    (troop_set_slot, ":var_0", slot_troop_prisoner_of_party, -1),
    (try_begin),
        (eq, "$do_not_cancel_quest", 0),
        (check_quest_active, "qst_rescue_lord_by_replace"),
        (quest_slot_eq, "qst_rescue_lord_by_replace", 2, ":var_0"),
        (call_script, "script_cancel_quest", "qst_rescue_lord_by_replace"),
    (try_end),
    (try_begin),
        (eq, "$do_not_cancel_quest", 0),
        (check_quest_active, "qst_rescue_prisoner"),
        (quest_slot_eq, "qst_rescue_prisoner", 2, ":var_0"),
        (call_script, "script_cancel_quest", "qst_rescue_prisoner"),
    (try_end),
    (try_begin),
        (check_quest_active, "qst_deliver_message_to_prisoner_lord"),
        (quest_slot_eq, "qst_deliver_message_to_prisoner_lord", 2, ":var_0"),
        (call_script, "script_cancel_quest", "qst_deliver_message_to_prisoner_lord"),
    (try_end),

]),

("debug_variables",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),

]),

("troop_describes_troop_to_s15",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (str_store_troop_name, s15, ":var_1"),
    (try_begin),
        (eq, ":var_1", "trp_player"),
        (str_store_string, s15, "str_you"),
    (else_try),
        (eq, ":var_1", ":var_0"),
        (str_store_string, s15, "str_myself"),
    (else_try),
        (call_script, "script_troop_get_family_relation_to_troop", ":var_1", ":var_0"),
        (gt, reg0, 0),
        (str_store_string, s15, "str_my_s11_s15"),
    (else_try),
        (call_script, "script_troop_get_relation_with_troop", ":var_1", ":var_0"),
        (ge, reg0, 20),
        (str_store_string, s15, "str_my_friend_s15"),
    (try_end),

]),

("troop_describes_quarrel_with_troop_to_s14",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (str_store_troop_name, s15, ":var_0"),
    (str_store_troop_name, s16, ":var_1"),
    (str_store_string, s14, "str_stop_gap__s15_is_the_rival_of_s16"),
    (try_begin),
        (eq, ":var_0", "$g_talk_troop"),
        (call_script, "script_cf_test_lord_incompatibility_to_s17", ":var_0", ":var_1"),
        (str_store_string, s14, 17),
    (else_try),
        (eq, ":var_1", "$g_talk_troop"),
        (call_script, "script_cf_test_lord_incompatibility_to_s17", ":var_1", ":var_0"),
        (str_store_string, s14, 17),
    (else_try),
        (str_store_string, s14, "str_general_quarrel"),
    (try_end),

]),

("cf_test_lord_incompatibility_to_s17",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (assign, ":var_2", 0),
    (troop_get_slot, ":var_3", ":var_0", slot_lord_reputation_type),
    (troop_get_slot, ":var_4", ":var_1", slot_lord_reputation_type),
    (troop_get_type, reg15, ":var_1"),
    (str_store_troop_name, s18, ":var_1"),
    (assign, ":var_5", 1),
    (call_script, "script_troop_get_family_relation_to_troop", ":var_1", ":var_0"),
    (assign, ":var_6", reg0),
    (try_begin),
        (gt, ":var_6", 0),
        (store_div, ":var_7", reg0, 5),
        (val_add, ":var_5", ":var_7"),
        (str_store_string, s18, "str_my_s11_s18"),
    (else_try),
        (gt, ":var_4", 7),
        (this_or_next|eq, ":var_3", 5),
        (eq, ":var_3", 3),
        (str_store_string, s18, "str_the_socalled_s11_s18"),
    (try_end),
    (try_begin),
        (eq, ":var_3", 1),
        (is_between, ":var_6", 1, 5),
        (assign, ":var_2", 100),
        (str_store_string, s17, "str_s18_would_cheat_me_of_my_inheritance_by_heaven_i_know_my_rights_and_im_not_going_to_back_down"),
    (else_try),
        (eq, ":var_3", 1),
        (eq, ":var_4", 2),
        (str_store_string, s17, "str_s18_once_questioned_my_honour_and_my_bravery_i_long_for_the_day_when_i_can_meet_him_in_battle_and_make_him_retract_his_statement"),
        (assign, ":var_2", 50),
    (else_try),
        (eq, ":var_3", 1),
        (eq, ":var_4", 7),
        (str_store_string, s17, "str_s18_once_questioned_my_judgment_in_battle_by_heaven_would_he_have_us_shirk_our_duty_to_smite_our_sovereigns_foes"),
        (assign, ":var_2", 50),
    (else_try),
        (eq, ":var_4", 1),
        (is_between, ":var_6", 1, 5),
        (assign, ":var_2", 100),
        (str_store_string, s17, "str_s18_seems_to_think_he_has_the_right_to_some_of_my_property_well_he_does_not"),
    (else_try),
        (eq, ":var_3", 2),
        (eq, ":var_4", 1),
        (str_store_string, s17, "str_s18_once_took_something_i_said_amiss_stubborn_bastard_wont_give_it_up_and_keeps_trying_to_get_me_to_recant_my_words"),
        (assign, ":var_2", 50),
    (else_try),
        (eq, ":var_3", 2),
        (eq, ":var_4", 4),
        (str_store_string, s17, "str_s18_is_a_crafty_weasel_and_i_dont_trust_him_one_bit"),
        (assign, ":var_2", 100),
    (else_try),
        (eq, ":var_3", 5),
        (eq, ":var_4", 7),
        (str_store_string, s17, "str_s18_i_despite_him_he_puts_on_such_a_nauseating_display_of_virtue_and_thinks_nothing_of_insulting_his_betters"),
        (assign, ":var_2", 100),
    (else_try),
        (eq, ":var_3", 5),
        (eq, ":var_4", 3),
        (str_store_string, s17, "str_s18_entered_into_a_little_deal_with_me_and_is_now_trying_to_wriggle_out_of_it"),
        (assign, ":var_2", 100),
    (else_try),
        (eq, ":var_3", 3),
        (eq, ":var_4", 5),
        (str_store_string, s17, "str_s18_once_ran_an_errand_for_me_and_now_thinks_i_owe_him_something_i_owe_his_ilk_nothing"),
        (assign, ":var_2", 100),
    (else_try),
        (eq, ":var_3", 3),
        (eq, ":var_4", 6),
        (str_store_string, s17, "str_s18_is_soft_and_weak_and_not_fit_to_govern_a_fief_and_i_have_always_detested_him"),
        (assign, ":var_2", 100),
    (else_try),
        (eq, ":var_3", 4),
        (eq, ":var_4", 2),
        (str_store_string, s17, "str_s18_is_a_quarrelsome_oaf_and_a_liability_in_my_opinion_and_ive_let_him_know_as_much"),
        (assign, ":var_2", 100),
    (else_try),
        (eq, ":var_3", 4),
        (eq, ":var_4", 6),
        (str_store_string, s17, "str_s18_i_am_sorry_to_say_is_far_too_softhearted_a_man_to_be_given_any_kind_of_responsibility_his_chivalry_will_allow_the_enemy_to_flee_to_fight_another_day_and_will_cost_the_lives_of_my_own_faithful_men"),
        (assign, ":var_2", 100),
    (else_try),
        (eq, ":var_3", 6),
        (eq, ":var_4", 4),
        (str_store_string, s17, "str_s18_seems_to_have_something_against_me_for_some_reason_i_dont_like_to_talk_ill_of_people_but_i_think_hes_can_be_a_bit_of_a_cad_sometimes"),
        (assign, ":var_2", 100),
    (else_try),
        (eq, ":var_3", 6),
        (eq, ":var_4", 3),
        (str_store_string, s17, "str_s18_has_always_treated_me_contemptuously_although_i_have_done_him_no_wrong"),
        (assign, ":var_2", 100),
    (else_try),
        (eq, ":var_3", 7),
        (eq, ":var_4", 5),
        (str_store_string, s17, "str_s18_is_thoroughly_dishonorable_and_a_compulsive_spinner_of_intrigues_which_i_fear_will_drag_us_into_wars_or_incite_rebellions"),
        (assign, ":var_2", 50),
    (else_try),
        (eq, ":var_3", 7),
        (eq, ":var_4", 1),
        (str_store_string, s17, "str_s18_disappoints_me_i_once_scolded_for_his_rashness_in_battle_and_he_took_offense_i_do_not_care_to_apologize_for_my_efforts_to_save_his_life_and_the_lives_of_his_men"),
        (assign, ":var_2", 50),
    (else_try),
        (this_or_next|eq, ":var_3", 7),
        (this_or_next|eq, ":var_3", 1),
        (eq, ":var_3", 3),
        (eq, ":var_4", 8),
        (str_store_string, s17, "str_s18_squanders_money_and_carouses_in_a_way_most_unbefitting_a_noble_by_doing_so_he_disgraces_us_all"),
        (assign, ":var_2", 100),
    (else_try),
        (eq, ":var_3", 8),
        (this_or_next|eq, ":var_4", 7),
        (this_or_next|eq, ":var_4", 1),
        (eq, ":var_4", 3),
        (str_store_string, s17, "str_s18_has_been_speaking_ill_of_me_behind_my_back_or_so_they_say"),
        (assign, ":var_2", 100),
    (else_try),
        (this_or_next|eq, ":var_3", 2),
        (this_or_next|eq, ":var_3", 1),
        (eq, ":var_3", 3),
        (eq, ":var_4", 10),
        (str_store_string, s17, "str_s18_is_a_disgrace_reg3shehe_consorts_with_merchants_lends_money_at_interest_uses_coarse_language_and_shows_no_attempt_to_uphold_the_dignity_of_the_honor_bestowed_upon_reg3herhim"),
        (assign, ":var_2", 100),
    (else_try),
        (eq, ":var_3", 10),
        (this_or_next|eq, ":var_4", 2),
        (this_or_next|eq, ":var_4", 1),
        (eq, ":var_4", 3),
        (str_store_string, s17, "str_s18_has_condemned_me_for_engaging_in_commerce_what_could_possibly_be_wrong_with_that"),
        (assign, ":var_2", 100),
    (else_try),
        (this_or_next|eq, ":var_3", 5),
        (this_or_next|eq, ":var_3", 1),
        (eq, ":var_3", 3),
        (eq, ":var_4", 9),
        (str_store_string, s17, "str_s18_i_have_heard_has_been_encouraging_seditious_ideas_among_the_peasantry__a_foolish_move_which_endangers_us_all"),
        (assign, ":var_2", 100),
    (else_try),
        (eq, ":var_3", 9),
        (this_or_next|eq, ":var_4", 5),
        (this_or_next|eq, ":var_4", 1),
        (eq, ":var_4", 3),
        (str_store_string, s17, "str_s18_has_called_me_out_for_the_way_i_deal_with_my_tenants_well_so_be_it_if_i_teach_them_that_they_are_the_equal_of_anyone_with_socalled_gentle_blood_what_is_it_to_reg3herhim"),
        (assign, ":var_2", 100),
    (else_try),
        (eq, ":var_3", 21),
        (this_or_next|eq, ":var_4", 1),
        (eq, ":var_4", 3),
        (str_store_string, s17, "str_a_most_gallant_gentleman_who_knows_how_to_treat_a_lady"),
        (assign, ":var_2", -50),
    (else_try),
        (eq, ":var_3", 21),
        (eq, ":var_4", 2),
        (str_store_string, s17, "str_a_base_cad"),
        (assign, ":var_2", 50),
    (else_try),
        (eq, ":var_3", 22),
        (eq, ":var_4", 4),
        (str_store_string, s17, "str_a_man_who_treats_me_as_his_equal_which_is_rare"),
        (assign, ":var_2", -50),
    (else_try),
        (eq, ":var_3", 22),
        (this_or_next|eq, ":var_4", 1),
        (eq, ":var_4", 5),
        (str_store_string, s17, "str_appears_to_value_me_with_his_estate_and_his_horse_as_prizes_worth_having"),
        (assign, ":var_2", 50),
    (else_try),
        (eq, ":var_3", 22),
        (neg|eq, ":var_4", 6),
        (str_store_string, s17, "str_a_bit_dull_but_what_can_you_expect"),
        (assign, ":var_2", 10),
    (else_try),
        (eq, ":var_3", 23),
        (call_script, "script_troop_get_romantic_chemistry_with_troop", ":var_0", ":var_1"),
        (ge, reg0, 10),
        (str_store_string, s17, "str_the_man_whom_destiny_intends_for_me"),
        (assign, ":var_2", -50),
    (else_try),
        (eq, ":var_3", 23),
        (neg|ge, reg0, 0),
        (str_store_string, s17, "str_is_not_right_for_me__i_cannot_say_why_but_he_makes_my_skin_crawl"),
        (assign, ":var_2", 50),
    (else_try),
        (eq, ":var_3", 24),
        (this_or_next|eq, ":var_4", 3),
        (eq, ":var_4", 4),
        (str_store_string, s17, "str_is_a_man_who_clearly_intends_to_make_his_mark_in_the_world"),
        (assign, ":var_2", -20),
    (else_try),
        (eq, ":var_3", 24),
        (eq, ":var_4", 6),
        (str_store_string, s17, "str_is_a_layabout_a_naif_prey_for_others_who_are_cleverer_than_he"),
        (assign, ":var_2", 30),
    (else_try),
        (eq, ":var_3", 25),
        (eq, ":var_4", 7),
        (str_store_string, s17, "str_is_a_man_of_stalwart_character"),
        (assign, ":var_2", -50),
    (else_try),
        (eq, ":var_3", 25),
        (this_or_next|eq, ":var_4", 5),
        (eq, ":var_4", 4),
        (str_store_string, s17, "str_appears_to_be_a_man_of_low_morals"),
        (assign, ":var_2", 50),
    (else_try),
        (eq, ":var_3", 25),
        (eq, ":var_4", 2),
        (str_store_string, s17, "str_appears_to_be_a_man_who_lacks_selfdiscipline"),
        (assign, ":var_2", 50),
    (else_try),
    (try_end),
    (val_div, ":var_2", ":var_5"),
    (assign, reg0, ":var_2"),
    (neg|eq, ":var_2", 0),

]),

("troop_get_romantic_chemistry_with_troop",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_add, ":var_2", ":var_0", ":var_1"),
    (val_add, ":var_2", "$romantic_attraction_seed"),
    (store_mod, ":var_3", ":var_2", 5),
    (val_mul, ":var_3", ":var_3"),
    (val_mul, ":var_3", 3),
    (store_attribute_level, ":var_4", ":var_1", ca_charisma),
    (val_sub, ":var_4", ":var_3"),
    (val_mul, ":var_4", 2),
    (assign, reg0, ":var_4"),

]),

("cf_troop_get_romantic_attraction_to_troop",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (assign, ":var_2", 0),
    (troop_get_type, ":var_3", ":var_0"),
    (eq, ":var_3", 1),
    (troop_get_type, ":var_4", ":var_1"),
    (eq, ":var_4", 0),
    (call_script, "script_troop_get_romantic_chemistry_with_troop", ":var_0", ":var_1"),
    (assign, ":var_5", reg0),
    (troop_get_slot, ":var_6", ":var_1", slot_troop_renown),
    (assign, ":var_7", 60),
    (val_div, ":var_6", 5),
    (val_sub, ":var_6", ":var_7"),
    (val_min, ":var_6", 60),
    (try_begin),
        (assign, ":var_8", 0),
        (call_script, "script_cf_test_lord_incompatibility_to_s17", ":var_0", ":var_1"),
        (store_sub, ":var_8", 0, reg0),
    (try_end),
    (troop_get_slot, ":var_9", ":var_0", slot_lord_reputation_type),
    (try_begin),
        (eq, ":var_9", 24),
        (val_mul, ":var_6", 2),
        (val_div, ":var_5", 2),
    (else_try),
        (eq, ":var_9", 23),
        (val_div, ":var_6", 2),
        (val_mul, ":var_5", 2),
    (else_try),
        (eq, ":var_9", 22),
        (val_div, ":var_6", 2),
    (else_try),
        (eq, ":var_9", 25),
        (val_div, ":var_6", 2),
        (val_div, ":var_5", 2),
    (try_end),
    (val_add, ":var_2", ":var_5"),
    (val_add, ":var_2", ":var_8"),
    (val_add, ":var_2", ":var_6"),
    (assign, reg0, ":var_2"),

]),

("cf_random_political_event",
[
    (store_random_in_range, ":var_0", "trp_npc1", "trp_knight_1_1_wife"),
    (store_random_in_range, ":var_1", "trp_npc1", "trp_knight_1_1_wife"),
    (troop_slot_eq, ":var_0", slot_troop_occupation, 2),
    (troop_slot_eq, ":var_1", slot_troop_occupation, 2),
    (neg|eq, ":var_0", ":var_1"),
    (val_add, "$total_political_events", 1),
    (store_troop_faction, ":var_2", ":var_0"),
    (store_troop_faction, ":var_3", ":var_1"),
    (assign, reg8, "$total_political_events"),
    (faction_get_slot, ":var_4", ":var_2", slot_faction_leader),
    (faction_get_slot, ":var_5", ":var_3", slot_faction_leader),
    (this_or_next|eq, ":var_2", ":var_3"),
    (this_or_next|eq, ":var_0", ":var_4"),
    (eq, ":var_1", ":var_5"),
    (call_script, "script_troop_get_relation_with_troop", ":var_0", ":var_1"),
    (assign, ":var_6", reg0),
    (store_random_in_range, ":var_7", 0, 100),
    (try_begin),
        (eq, ":var_2", ":var_3"),
        (neg|eq, ":var_4", "trp_player"),
        (neg|gt, ":var_6", -10),
        (call_script, "script_troop_get_relation_with_troop", ":var_0", ":var_4"),
        (gt, reg0, 0),
        (assign, ":var_8", reg0),
        (call_script, "script_troop_get_relation_with_troop", ":var_1", ":var_4"),
        (gt, reg0, 0),
        (store_mul, ":var_9", ":var_8", reg0),
        (val_div, ":var_9", 4),
        (neg|gt, ":var_7", ":var_9"),
        (str_store_troop_name, s4, ":var_4"),
        (str_store_troop_name, s5, ":var_0"),
        (str_store_troop_name, s6, ":var_1"),
        (try_begin),
            (eq, "$cheat_mode", 1),
            (display_message, "str_check_reg8_s4_reconciles_s5_and_s6_"),
        (try_end),
        (call_script, "script_troop_change_relation_with_troop", ":var_0", ":var_1", 20),
        (val_add, "$total_random_quarrel_changes", 20),
    (else_try),
        (eq, ":var_2", ":var_3"),
        (neg|gt, ":var_6", -10),
        (try_begin),
            (eq, ":var_4", "trp_player"),
            (try_begin),
                (eq, "$cheat_mode", 1),
                (display_message, "str_diagnostic__player_should_receive_consultation_quest_here_if_not_already_active"),
            (try_end),
            (neg|check_quest_active, "qst_consult_with_minister"),
            (neg|check_quest_active, "qst_resolve_dispute"),
            (eq, "$g_minister_notification_quest", 0),
            (assign, "$g_minister_notification_quest", "qst_resolve_dispute"),
            (quest_set_slot, "qst_resolve_dispute", 2, ":var_0"),
            (quest_set_slot, "qst_resolve_dispute", 4, ":var_1"),
            (call_script, "script_add_notification_menu", "mnu_notification_player_should_consult", 0, 0),
        (else_try),
            (call_script, "script_troop_get_relation_with_troop", ":var_0", ":var_4"),
            (assign, ":var_10", reg0),
            (call_script, "script_troop_get_relation_with_troop", ":var_1", ":var_4"),
            (assign, ":var_11", reg0),
            (store_random_in_range, ":var_12", -5, 5),
            (val_add, ":var_10", ":var_12"),
            (try_begin),
                (ge, ":var_10", ":var_11"),
                (assign, ":var_13", ":var_0"),
                (assign, ":var_14", ":var_1"),
            (else_try),
                (assign, ":var_14", ":var_0"),
                (assign, ":var_13", ":var_1"),
            (try_end),
            (str_store_troop_name, s4, ":var_4"),
            (str_store_troop_name, s5, ":var_13"),
            (str_store_troop_name, s6, ":var_14"),
            (try_begin),
                (eq, "$cheat_mode", 1),
                (display_message, "str_check_reg8_s4_rules_in_s5s_favor_in_quarrel_with_s6_"),
            (try_end),
            (call_script, "script_add_log_entry", 27, ":var_4", ":var_14", ":var_13", ":var_2"),
            (call_script, "script_troop_change_relation_with_troop", ":var_13", ":var_4", 10),
            (call_script, "script_troop_change_relation_with_troop", ":var_14", ":var_4", -20),
            (val_add, "$total_random_quarrel_changes", -10),
        (try_end),
    (else_try),
        (is_between, ":var_0", "trp_npc1", "trp_kingdom_1_lord"),
        (is_between, ":var_1", "trp_npc1", "trp_kingdom_1_lord"),
        (ge, ":var_6", -10),
        (this_or_next|troop_slot_eq, ":var_0", slot_troop_personalityclash_object, ":var_1"),
        (troop_slot_eq, ":var_0", slot_troop_personalityclash2_object, ":var_1"),
        (str_store_troop_name, s5, ":var_0"),
        (str_store_troop_name, s6, ":var_1"),
        (try_begin),
            (eq, "$cheat_mode", 1),
            (display_message, "str_check_reg8_new_rivalry_generated_between_s5_and_s6"),
        (try_end),
        (call_script, "script_troop_change_relation_with_troop", ":var_0", ":var_1", -30),
        (val_add, "$total_random_quarrel_changes", -30),
    (else_try),
        (eq, ":var_2", ":var_3"),
        (ge, ":var_6", -10),
        (call_script, "script_cf_test_lord_incompatibility_to_s17", ":var_0", ":var_1"),
        (assign, ":var_15", reg0),
        (gt, ":var_15", 0),
        (neg|ge, ":var_7", ":var_15"),
        (str_store_troop_name, s5, ":var_0"),
        (str_store_troop_name, s6, ":var_1"),
        (try_begin),
            (eq, "$cheat_mode", 1),
            (display_message, "str_check_reg8_new_rivalry_generated_between_s5_and_s6"),
        (try_end),
        (call_script, "script_troop_change_relation_with_troop", ":var_0", ":var_1", -30),
        (val_add, "$total_random_quarrel_changes", -30),
    (else_try),
        (store_current_hours, ":var_16"),
        (ge, ":var_16", 24),
        (neg|eq, ":var_2", ":var_3"),
        (is_between, ":var_2", "fac_player_supporters_faction", "fac_kingdoms_end"),
        (call_script, "script_cf_troop_can_intrigue", ":var_1", 0),
        (neg|eq, ":var_1", ":var_5"),
        (neg|eq, ":var_1", ":var_4"),
        (str_store_troop_name, s5, ":var_4"),
        (str_store_troop_name, s6, ":var_1"),
        (try_begin),
            (ge, "$cheat_mode", 1),
            (display_message, "str_check_reg8_s5_attempts_to_win_over_s6"),
        (try_end),
        (call_script, "script_calculate_troop_political_factors_for_liege", ":var_1", ":var_4"),
        (assign, ":var_17", reg0),
        (call_script, "script_calculate_troop_political_factors_for_liege", ":var_1", ":var_5"),
        (assign, ":var_18", reg0),
        (try_begin),
            (gt, ":var_17", ":var_18"),
            (call_script, "script_change_troop_faction", ":var_1", ":var_2"),
        (try_end),
    (try_end),

]),

("evaluate_realm_stability",
[
    (store_script_param, ":var_0", 1),
    (assign, ":var_1", 0),
    (assign, ":var_2", 0),
    (assign, ":var_3", 0),
    (faction_get_slot, ":var_4", ":var_0", slot_faction_leader),
    (try_for_range, ":var_5", "trp_npc1", "trp_knight_1_1_wife"),
        (troop_slot_eq, ":var_5", slot_troop_occupation, 2),
        (store_troop_faction, ":var_6", ":var_5"),
        (eq, ":var_6", ":var_0"),
        (val_add, ":var_1", 1),
        (call_script, "script_calculate_troop_political_factors_for_liege", ":var_5", ":var_4"),
        (try_begin),
            (neg|gt, reg3, -10),
            (val_add, ":var_3", 1),
        (else_try),
            (neg|gt, reg3, 10),
            (val_add, ":var_2", 1),
        (try_end),
    (try_end),
    (try_begin),
        (gt, ":var_1", 0),
        (store_mul, ":var_7", ":var_3", 100),
        (val_div, ":var_7", ":var_1"),
        (store_mul, ":var_8", ":var_2", 100),
        (val_div, ":var_8", ":var_1"),
        (store_mul, ":var_9", ":var_7", 2),
        (val_add, ":var_9", ":var_8"),
        (faction_set_slot, ":var_0", slot_faction_instability, ":var_9"),
        (assign, reg0, ":var_7"),
        (assign, reg1, ":var_8"),
        (assign, reg1, ":var_8"),
    (else_try),
        (try_begin),
            (eq, "$cheat_mode", 1),
            (str_store_faction_name, s1, ":var_0"),
            (display_message, "str_s1_has_no_lords"),
        (try_end),
        (assign, reg0, 0),
        (assign, reg1, 0),
    (try_end),

]),

("battle_political_consequences",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (try_begin),
        (eq, "$cheat_mode", 1),
        (str_store_party_name, s4, ":var_1"),
        (str_store_party_name, s5, ":var_0"),
        (display_message, "str_do_political_consequences_for_s4_victory_over_s5"),
    (try_end),
    (store_faction_of_party, ":var_2", ":var_1"),
    (try_begin),
        (eq, ":var_1", "p_main_party"),
        (assign, ":var_2", "$players_kingdom"),
    (try_end),
    (party_get_template_id, ":var_3", ":var_0"),
    (try_begin),
        (this_or_next|eq, ":var_3", "pt_village_farmers"),
        (eq, ":var_3", "pt_kingdom_caravan_party"),
        (party_get_slot, ":var_4", ":var_0", slot_party_ai_object),
        (party_get_slot, ":var_5", ":var_0", slot_party_last_traded_center),
        (call_script, "script_add_log_entry", 3, ":var_1", ":var_5", ":var_4", ":var_2"),
        (try_begin),
            (eq, "$cheat_mode", 2),
            (neg|is_between, ":var_2", "fac_player_supporters_faction", "fac_kingdoms_end"),
            (str_store_string, s65, "str_bandits_attacked_a_party_on_the_roads_so_a_bounty_is_probably_available"),
            (call_script, "script_add_notification_menu", "mnu_debug_alert_from_s65", 0, 0),
            (str_store_party_name, s15, ":var_5"),
            (str_store_party_name, s16, ":var_4"),
            (display_message, "str_travellers_attacked_on_road_from_s15_to_s16"),
        (try_end),
    (try_end),
    (try_begin),
        (party_get_template_id, ":var_6", ":var_1"),
        (eq, ":var_6", "pt_kingdom_hero_party"),
        (neg|eq, ":var_1", "p_main_party"),
        (party_stack_get_troop_id, ":var_7", ":var_1", 0),
        (is_between, ":var_7", "trp_npc1", "trp_knight_1_1_wife"),
        (store_faction_of_party, ":var_2", ":var_1"),
        (party_collect_attachments_to_party, ":var_1", "p_temp_party_2"),
        (party_get_num_companion_stacks, ":var_8", "p_temp_party_2"),
        (try_for_range, ":var_9", 0, ":var_8"),
            (party_stack_get_troop_id, ":var_10", "p_temp_party_2", ":var_9"),
            (is_between, ":var_10", "trp_npc1", "trp_knight_1_1_wife"),
            (try_begin),
                (troop_get_slot, ":var_11", ":var_10", slot_troop_leaded_party),
                (party_is_active, ":var_11"),
                (call_script, "script_cf_party_under_player_suggestion", ":var_11"),
                (call_script, "script_add_log_entry", 35, "trp_player", -1, ":var_10", -1),
            (try_end),
            (store_troop_faction, ":var_12", ":var_10"),
            (eq, ":var_12", ":var_2"),
            (neg|eq, ":var_10", ":var_7"),
            (try_begin),
                (eq, "$cheat_mode", 4),
                (str_store_troop_name, s15, ":var_10"),
                (str_store_troop_name, s16, ":var_7"),
                (display_message, "str_s15_shares_joy_of_victory_with_s16"),
            (try_end),
            (call_script, "script_troop_change_relation_with_troop", ":var_10", ":var_7", 3),
            (val_add, "$total_battle_ally_changes", 3),
        (try_end),
        (party_clear, "p_temp_party_2"),
    (try_end),
    (try_begin),
        (party_collect_attachments_to_party, ":var_0", "p_temp_party_2"),
        (party_get_num_companion_stacks, ":var_8", "p_temp_party_2"),
        (try_begin),
            (gt, "$marshall_defeated_in_battle", 0),
            (str_store_troop_name, s15, "$marshall_defeated_in_battle"),
            (store_troop_faction, ":var_13", "$marshall_defeated_in_battle"),
            (try_begin),
                (eq, "$cheat_mode", 1),
                (display_message, "str_faction_marshall_s15_involved_in_defeat"),
            (try_end),
        (else_try),
            (eq, "$marshall_defeated_in_battle", "trp_player"),
            (eq, ":var_0", "p_main_party"),
            (faction_slot_eq, "fac_player_supporters_faction", slot_faction_state, 0),
            (try_begin),
                (eq, "$cheat_mode", 1),
                (display_message, "str_player_faction_marshall_involved_in_defeat"),
            (try_end),
        (else_try),
            (assign, "$marshall_defeated_in_battle", -1),
        (try_end),
        (try_for_range, ":var_9", 0, ":var_8"),
            (party_stack_get_troop_id, ":var_10", "p_temp_party_2", ":var_9"),
            (troop_slot_eq, ":var_10", slot_troop_occupation, 2),
            (try_begin),
                (troop_get_slot, ":var_14", ":var_10", slot_troop_leaded_party),
                (party_is_active, ":var_14"),
                (call_script, "script_cf_party_under_player_suggestion", ":var_14"),
                (call_script, "script_add_log_entry", 36, "trp_player", -1, ":var_10", -1),
            (try_end),
            (store_troop_faction, ":var_12", ":var_10"),
            (faction_get_slot, ":var_15", ":var_12", slot_faction_leader),
            (neg|eq, ":var_10", ":var_15"),
            (try_begin),
                (eq, "$cheat_mode", 1),
                (str_store_troop_name, s14, ":var_10"),
                (str_store_faction_name, s15, ":var_12"),
                (display_message, "str_s14_of_s15_defeated_in_battle_loses_one_point_relation_with_liege"),
            (try_end),
            (try_begin),
                (this_or_next|neg|eq, ":var_15", "trp_player"),
                (eq, "$players_kingdom", ":var_12"),
                (call_script, "script_troop_change_relation_with_troop", ":var_10", ":var_15", -1),
                (val_add, "$total_battle_ally_changes", -1),
            (try_end),
            (call_script, "script_faction_inflict_war_damage_on_faction", ":var_2", ":var_12", 10),
            (try_begin),
                (this_or_next|is_between, ":var_7", "trp_npc1", "trp_knight_1_1_wife"),
                (eq, ":var_7", "trp_player"),
                (this_or_next|neg|eq, ":var_7", "trp_player"),
                (eq, ":var_1", "p_main_party"),
                (this_or_next|troop_slot_eq, ":var_10", slot_lord_reputation_type, 2),
                (this_or_next|troop_slot_eq, ":var_10", slot_lord_reputation_type, 3),
                (troop_slot_eq, ":var_10", slot_lord_reputation_type, 5),
                (call_script, "script_troop_change_relation_with_troop", ":var_10", ":var_7", -1),
                (val_add, "$total_battle_enemy_changes", -1),
                (try_begin),
                    (eq, "$cheat_mode", 1),
                    (str_store_troop_name, s14, ":var_10"),
                    (str_store_troop_name, s15, ":var_7"),
                    (display_message, "str_s14_defeated_in_battle_by_s15_loses_one_point_relation"),
                (try_end),
            (try_end),
            (gt, "$marshall_defeated_in_battle", -1),
            (eq, ":var_12", ":var_13"),
            (str_store_troop_name, s14, ":var_10"),
            (call_script, "script_cf_test_lord_incompatibility_to_s17", ":var_10", "$marshall_defeated_in_battle"),
            (try_begin),
                (eq, "$cheat_mode", 1),
                (display_message, "str_s14_blames_s15_for_defeat"),
            (try_end),
            (call_script, "script_add_log_entry", 33, ":var_10", "$marshall_defeated_in_battle", ":var_15", ":var_2"),
            (call_script, "script_troop_change_relation_with_troop", ":var_10", ":var_15", -15),
            (val_add, "$total_battle_ally_changes", -15),
            (neg|eq, "$marshall_defeated_in_battle", ":var_15"),
            (call_script, "script_troop_change_relation_with_troop", ":var_10", "$marshall_defeated_in_battle", -15),
            (val_add, "$total_battle_ally_changes", -15),
        (try_end),
        (party_clear, "p_temp_party_2"),
    (try_end),

]),

("faction_inflict_war_damage_on_faction",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (store_add, ":var_3", ":var_1", 220),
    (val_sub, ":var_3", "fac_player_supporters_faction"),
    (faction_get_slot, ":var_4", ":var_0", ":var_3"),
    (val_add, ":var_4", ":var_2"),
    (faction_set_slot, ":var_0", ":var_3", ":var_4"),
    (try_begin),
        (ge, "$cheat_mode", 1),
        (str_store_faction_name, s4, ":var_0"),
        (str_store_faction_name, s5, ":var_1"),
        (assign, reg3, ":var_4"),
        (assign, reg4, ":var_2"),
        (display_message, "@{!}{s4} inflicts {reg4} damage on {s5}, raising total inflicted to {reg3}"),
    (try_end),
    (faction_get_slot, ":var_5", ":var_1", slot_faction_marshall),
    (try_begin),
        (ge, ":var_5", 0),
        (gt, ":var_2", 0),
        (troop_get_slot, ":var_6", ":var_5", slot_troop_days_on_mission),
        (val_add, ":var_6", ":var_2"),
        (val_min, ":var_6", 100),
        (troop_set_slot, ":var_5", slot_troop_days_on_mission, ":var_6"),
        (try_begin),
            (ge, "$cheat_mode", 1),
            (str_store_troop_name, s4, ":var_5"),
            (assign, reg4, ":var_2"),
            (assign, reg5, ":var_6"),
            (display_message, "@{!}War damage raises {s4}'s controversy by {reg4} to {reg5}"),
        (try_end),
    (try_end),
    (faction_get_slot, ":var_5", ":var_0", slot_faction_marshall),
    (try_begin),
        (ge, ":var_5", 0),
        (val_div, ":var_2", 3),
        (gt, ":var_2", 0),
        (troop_get_slot, ":var_6", ":var_5", slot_troop_days_on_mission),
        (val_sub, ":var_6", ":var_2"),
        (val_max, ":var_6", 0),
        (troop_set_slot, ":var_5", slot_troop_days_on_mission, ":var_6"),
        (try_begin),
            (ge, "$cheat_mode", 1),
            (str_store_troop_name, s4, ":var_5"),
            (assign, reg4, ":var_2"),
            (assign, reg5, ":var_6"),
            (display_message, "@{!}War damage lowers {s4}'s controversy by {reg4} to {reg5}"),
        (try_end),
    (try_end),

]),

("calculate_troop_political_factors_for_liege",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (troop_get_slot, ":var_2", ":var_0", slot_lord_reputation_type),
    (store_troop_faction, ":var_3", ":var_1"),
    (try_begin),
        (eq, ":var_3", "fac_player_faction"),
        (assign, ":var_3", "fac_player_supporters_faction"),
    (try_end),
    (assign, ":var_4", 0),
    (try_begin),
        (neg|faction_slot_eq, ":var_3", slot_faction_leader, ":var_1"),
        (assign, ":var_4", 1),
        (try_begin),
            (eq, "$cheat_mode", 1),
            (str_store_troop_name, s32, ":var_1"),
            (display_message, "str_s32_is_undeclared_rebel"),
        (try_end),
    (try_end),
    (assign, ":var_5", 0),
    (assign, ":var_6", 0),
    (assign, ":var_7", 0),
    (assign, ":var_8", -1),
    (try_begin),
        (is_between, ":var_0", "trp_npc1", "trp_knight_1_1_wife"),
        (try_for_range, ":var_9", "p_town_1_1", "p_salt_mine"),
            (eq, ":var_8", -1),
            (party_slot_eq, ":var_9", slot_town_lord, ":var_0"),
            (assign, ":var_8", ":var_9"),
        (try_end),
    (try_end),
    (assign, ":var_10", 0),
    (try_for_range, ":var_9", "p_town_1_1", "p_salt_mine"),
        (neg|eq, ":var_9", ":var_8"),
        (gt, ":var_8", 0),
        (try_begin),
            (is_between, ":var_9", "p_town_1_1", "p_castle_1_1"),
            (assign, ":var_11", 9000),
        (else_try),
            (is_between, ":var_9", "p_castle_1_1", "p_village_1_1"),
            (assign, ":var_11", 6000),
        (else_try),
            (assign, ":var_11", 1000),
        (try_end),
        (store_distance_to_party_from_party, ":var_12", ":var_8", ":var_9"),
        (val_add, ":var_12", 10),
        (val_div, ":var_11", ":var_12"),
        (val_div, ":var_11", ":var_12"),
        (store_faction_of_party, ":var_13", ":var_9"),
        (try_begin),
            (eq, ":var_13", ":var_3"),
            (assign, ":var_10", 1),
            (val_add, ":var_7", ":var_11"),
        (else_try),
            (neg|eq, ":var_13", ":var_3"),
            (store_relation, ":var_14", ":var_13", ":var_3"),
            (try_begin),
                (this_or_next|eq, ":var_4", 1),
                (neg|ge, ":var_14", 0),
                (val_div, ":var_11", 2),
            (else_try),
                (val_div, ":var_11", 4),
            (try_end),
            (val_sub, ":var_7", ":var_11"),
        (try_end),
    (try_end),
    (try_begin),
        (eq, ":var_10", 0),
        (val_add, ":var_7", 20),
        (try_begin),
            (eq, "$cheat_mode", 2),
            (display_message, "str_small_bonus_for_no_base"),
        (try_end),
    (try_end),
    (val_clamp, ":var_7", -100, 100),
    (assign, ":var_15", ":var_7"),
    (try_begin),
        (eq, ":var_2", 4),
        (val_mul, ":var_15", 2),
    (else_try),
        (eq, ":var_2", 1),
        (val_div, ":var_15", 2),
    (try_end),
    (assign, ":var_16", 0),
    (try_for_range, ":var_17", "trp_kingdom_heroes_including_player_begin", "trp_knight_1_1_wife"),
        (assign, ":var_18", ":var_17"),
        (this_or_next|troop_slot_eq, ":var_18", slot_troop_occupation, 2),
        (this_or_next|eq, ":var_18", "trp_kingdom_heroes_including_player_begin"),
        (is_between, ":var_18", "trp_kingdom_4_pretender", "trp_knight_1_1_wife"),
        (store_troop_faction, ":var_19", ":var_18"),
        (try_begin),
            (eq, ":var_17", "trp_kingdom_heroes_including_player_begin"),
            (assign, ":var_18", "trp_player"),
            (assign, ":var_19", "$players_kingdom"),
            (try_begin),
                (eq, "$g_talk_troop", ":var_0"),
                (store_troop_faction, ":var_20", ":var_0"),
                (eq, ":var_20", ":var_3"),
                (assign, ":var_19", 0),
            (try_end),
        (try_end),
        (eq, ":var_19", ":var_3"),
        (neg|faction_slot_eq, ":var_19", slot_faction_leader, ":var_18"),
        (neg|eq, ":var_4", 1),
        (neg|is_between, ":var_18", "trp_kingdom_4_pretender", "trp_knight_1_1_wife"),
        (call_script, "script_troop_get_relation_with_troop", ":var_0", ":var_18"),
        (assign, ":var_21", reg0),
        (call_script, "script_troop_get_relation_with_troop", ":var_18", ":var_1"),
        (assign, ":var_22", reg0),
        (store_mul, ":var_23", ":var_21", ":var_22"),
        (val_div, ":var_23", 100),
        (try_begin),
            (eq, "$cheat_mode", 2),
            (eq, "$g_talk_troop", ":var_0"),
            (str_store_faction_name, s20, ":var_19"),
            (str_store_troop_name, s15, ":var_18"),
            (assign, reg15, ":var_23"),
            (display_message, "str_s15_considered_member_of_faction_s20_weight_of_reg15"),
        (try_end),
        (val_add, ":var_16", ":var_23"),
    (try_end),
    (val_clamp, ":var_16", -100, 101),
    (try_begin),
        (call_script, "script_troop_get_relation_with_troop", ":var_0", ":var_1"),
        (assign, ":var_24", reg0),
        (val_add, ":var_16", ":var_24"),
    (try_end),
    (val_div, ":var_16", 2),
    (val_clamp, ":var_16", -100, 101),
    (assign, ":var_25", ":var_16"),
    (try_begin),
        (this_or_next|eq, ":var_2", 6),
        (eq, ":var_2", 2),
        (val_mul, ":var_25", 2),
    (try_end),
    (assign, ":var_5", 0),
    (assign, ":var_26", ":var_5"),
    (try_begin),
        (eq, 1, 0),
        (neg|eq, ":var_1", "trp_player"),
        (neg|eq, ":var_1", "$supported_pretender"),
        (assign, ":var_27", 0),
        (assign, ":var_28", 0),
        (assign, ":var_29", 0),
    (else_try),
        (troop_get_slot, ":var_30", ":var_0", slot_lord_recruitment_argument),
        (call_script, "script_rebellion_arguments", ":var_0", ":var_30", ":var_1"),
        (assign, ":var_28", reg0),
        (assign, ":var_27", reg1),
        (store_add, ":var_29", ":var_28", ":var_27"),
        (store_skill_level, ":var_31", "skl_persuasion", "trp_player"),
        (try_begin),
            (gt, ":var_29", 0),
            (store_add, ":var_32", ":var_31", 5),
            (val_mul, ":var_32", 2),
            (val_div, ":var_32", 3),
            (val_mul, ":var_29", ":var_32"),
            (val_div, ":var_29", 10),
        (else_try),
            (neg|ge, ":var_29", 0),
            (store_sub, ":var_33", 10, ":var_31"),
            (val_mul, ":var_29", ":var_33"),
            (val_div, ":var_29", 10),
        (try_end),
        (try_begin),
            (neg|eq, ":var_1", "trp_player"),
            (neg|eq, ":var_1", "$supported_pretender"),
            (val_div, ":var_27", 2),
            (val_div, ":var_28", 2),
            (val_div, ":var_29", 2),
        (try_end),
    (try_end),
    (try_begin),
        (store_troop_faction, ":var_20", ":var_0"),
        (eq, ":var_20", ":var_3"),
        (assign, ":var_6", 0),
    (else_try),
        (eq, ":var_1", "trp_player"),
        (store_sub, ":var_6", 60, "$player_right_to_rule"),
    (else_try),
        (troop_get_slot, ":var_34", ":var_0", slot_troop_original_faction),
        (troop_get_slot, ":var_35", ":var_1", slot_troop_original_faction),
        (eq, ":var_34", ":var_35"),
        (assign, ":var_6", 10),
    (else_try),
        (assign, ":var_6", 50),
    (try_end),
    (val_clamp, ":var_6", 0, 101),
    (assign, ":var_36", ":var_6"),
    (try_begin),
        (eq, ":var_2", 5),
        (val_div, ":var_36", 2),
    (else_try),
        (eq, ":var_2", 7),
        (val_mul, ":var_36", 2),
    (try_end),
    (assign, reg1, ":var_7"),
    (assign, reg2, ":var_15"),
    (assign, reg3, ":var_16"),
    (assign, reg4, ":var_25"),
    (assign, reg5, ":var_5"),
    (assign, reg6, ":var_26"),
    (assign, reg7, ":var_27"),
    (assign, reg17, ":var_28"),
    (assign, reg8, ":var_29"),
    (assign, reg9, ":var_6"),
    (assign, reg10, ":var_36"),
    (try_begin),
        (eq, "$cheat_mode", 1),
        (eq, "$g_talk_troop", ":var_0"),
        (str_store_troop_name, s20, ":var_0"),
        (str_store_faction_name, s21, ":var_3"),
        (str_store_troop_name, s22, ":var_1"),
        (display_message, "@{!}G talk troop {s20} evaluates being vassal to {s22} of {s21}"),
        (display_message, "str_base_result_for_security_reg1"),
        (display_message, "str_result_for_security_weighted_by_personality_reg2"),
        (display_message, "str_base_result_for_political_connections_reg3"),
        (display_message, "str_result_for_political_connections_weighted_by_personality_reg4"),
        (try_begin),
            (this_or_next|eq, ":var_1", "trp_player"),
            (eq, ":var_1", "$supported_pretender"),
            (display_message, "str_result_for_argument_strength_reg7"),
            (display_message, "str_result_for_argument_appeal_reg17"),
            (display_message, "str_combined_result_for_argument_modified_by_persuasion_reg8"),
        (try_end),
        (display_message, "str_base_changing_sides_penalty_reg9"),
        (display_message, "str_changing_sides_penalty_weighted_by_personality_reg10"),
    (try_end),
    (store_add, ":var_37", ":var_15", ":var_25"),
    (val_add, ":var_37", ":var_26"),
    (val_add, ":var_37", ":var_29"),
    (val_sub, ":var_37", ":var_36"),
    (assign, reg0, ":var_37"),
    (try_begin),
        (eq, "$cheat_mode", 2),
        (display_message, "@{!}DEBUG -- Analyzing lord allegiances, combined bonuses and penalties = {reg0}"),
    (try_end),

]),

("cf_troop_can_intrigue",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (troop_get_slot, ":var_2", ":var_0", slot_troop_leaded_party),
    (party_is_active, ":var_2"),
    (try_begin),
        (eq, "$cheat_mode", 1),
        (eq, ":var_0", "$g_talk_troop"),
        (display_message, "str_intrigue_test_troop_party_is_active"),
    (try_end),
    (party_get_battle_opponent, ":var_3", ":var_2"),
    (neg|gt, ":var_3", 0),
    (try_begin),
        (eq, "$cheat_mode", 1),
        (eq, ":var_0", "$g_talk_troop"),
        (display_message, "str_intrigue_test_troop_party_is_not_in_battle"),
    (try_end),
    (troop_slot_eq, ":var_0", slot_troop_prisoner_of_party, -1),
    (try_begin),
        (eq, "$cheat_mode", 1),
        (eq, ":var_0", "$g_talk_troop"),
        (display_message, "str_intrigue_test_troop_is_not_prisoner"),
    (try_end),
    (party_get_attached_to, ":var_4", ":var_2"),
    (store_faction_of_party, ":var_5", ":var_2"),
    (assign, ":var_6", 0),
    (try_for_range, ":var_7", "trp_npc1", "trp_knight_1_1_wife"),
        (neg|eq, ":var_0", ":var_7"),
        (eq, ":var_6", 0),
        (troop_slot_eq, ":var_7", slot_troop_occupation, 2),
        (troop_get_slot, ":var_8", ":var_7", slot_troop_leaded_party),
        (party_is_active, ":var_8"),
        (neg|eq, ":var_2", ":var_8"),
        (store_faction_of_party, ":var_9", ":var_8"),
        (eq, ":var_5", ":var_9"),
        (try_begin),
            (eq, ":var_4", -1),
            (store_distance_to_party_from_party, ":var_10", ":var_2", ":var_8"),
            (neg|ge, ":var_10", 3),
            (assign, ":var_6", 1),
        (else_try),
            (is_between, ":var_4", "p_town_1_1", "p_village_1_1"),
            (party_get_attached_to, ":var_11", ":var_8"),
            (eq, ":var_4", ":var_11"),
            (assign, ":var_6", 1),
        (try_end),
    (try_end),
    (try_begin),
        (eq, "$cheat_mode", 1),
        (eq, ":var_0", "$g_talk_troop"),
        (display_message, "str_intrigue_test_troop_is_nearby"),
    (try_end),
    (try_begin),
        (eq, ":var_1", 0),
    (try_end),
    (eq, ":var_6", 0),

]),

("troop_change_relation_with_troop",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (try_begin),
        (eq, ":var_0", "trp_player"),
        (call_script, "script_change_player_relation_with_troop", ":var_1", ":var_2"),
    (else_try),
        (eq, ":var_1", "trp_player"),
        (call_script, "script_change_player_relation_with_troop", ":var_0", ":var_2"),
    (else_try),
        (eq, ":var_0", ":var_1"),
    (else_try),
        (call_script, "script_troop_get_relation_with_troop", ":var_0", ":var_1"),
        (store_add, ":var_3", reg0, ":var_2"),
        (val_clamp, ":var_3", -100, 101),
        (try_begin),
            (eq, ":var_3", 0),
            (assign, ":var_3", 1),
        (try_end),
        (store_add, ":var_4", ":var_1", 0),
        (troop_set_slot, ":var_0", ":var_4", ":var_3"),
        (store_add, ":var_5", ":var_0", 0),
        (troop_set_slot, ":var_1", ":var_5", ":var_3"),
    (try_end),
    (try_begin),
        (neg|ge, ":var_2", -5),
        (try_begin),
            (eq, ":var_0", "trp_player"),
            (assign, ":var_6", "$players_kingdom"),
        (else_try),
            (store_troop_faction, ":var_6", ":var_0"),
        (try_end),
        (try_begin),
            (eq, ":var_1", "trp_player"),
            (assign, ":var_7", "$players_kingdom"),
        (else_try),
            (store_troop_faction, ":var_7", ":var_1"),
        (try_end),
        (eq, ":var_6", ":var_7"),
        (is_between, ":var_6", "fac_player_supporters_faction", "fac_kingdoms_end"),
        (store_mul, ":var_8", ":var_2", -1),
        (troop_get_slot, ":var_9", ":var_0", slot_troop_days_on_mission),
        (val_add, ":var_9", ":var_8"),
        (val_min, ":var_9", 100),
        (troop_set_slot, ":var_0", slot_troop_days_on_mission, ":var_9"),
        (troop_get_slot, ":var_10", ":var_1", slot_troop_days_on_mission),
        (val_add, ":var_10", ":var_8"),
        (val_min, ":var_10", 100),
        (troop_set_slot, ":var_1", slot_troop_days_on_mission, ":var_10"),
    (try_end),
    (try_begin),
        (is_between, ":var_0", "trp_npc1", "trp_knight_1_1_wife"),
        (is_between, ":var_1", "trp_npc1", "trp_knight_1_1_wife"),
        (neg|eq, ":var_0", ":var_1"),
        (try_begin),
            (gt, ":var_2", 0),
            (val_add, "$total_relation_adds", ":var_2"),
        (else_try),
            (val_sub, "$total_relation_subs", ":var_2"),
        (try_end),
    (try_end),
    (try_begin),
        (eq, "$cheat_mode", 4),
        (is_between, ":var_0", "trp_npc1", "trp_knight_1_1_wife"),
        (is_between, ":var_1", "trp_npc1", "trp_knight_1_1_wife"),
        (neg|eq, ":var_0", ":var_1"),
        (str_store_troop_name, s20, ":var_0"),
        (str_store_troop_name, s15, ":var_1"),
        (assign, reg4, ":var_2"),
        (assign, reg14, ":var_3"),
        (display_message, "str_s20_relation_with_s15_changed_by_reg4_to_reg14"),
        (assign, reg4, "$total_relation_adds"),
        (display_message, "str_total_additions_reg4"),
        (assign, reg4, "$total_relation_subs"),
        (display_message, "str_total_subtractions_reg4"),
        (assign, reg4, "$total_courtship_quarrel_changes"),
        (display_message, "@{!}DEBUG -- Total courtship quarrel changes: {reg4}"),
        (assign, reg4, "$total_random_quarrel_changes"),
        (display_message, "@{!}DEBUG -- Total random quarrel changes: {reg4}"),
        (assign, reg4, "$total_battle_ally_changes"),
        (display_message, "@{!}DEBUG -- Total battle changes for allies: {reg4}"),
        (assign, reg4, "$total_battle_enemy_changes"),
        (display_message, "@{!}DEBUG -- Total battle changes for enemies: {reg4}"),
        (assign, reg4, "$total_promotion_changes"),
        (display_message, "@{!}DEBUG -- Total promotion changes: {reg4}"),
        (assign, reg4, "$total_feast_changes"),
        (display_message, "@{!}DEBUG -- Total feast changes: {reg4}"),
        (assign, reg4, "$total_policy_dispute_changes"),
        (display_message, "@{!}DEBUG -- Total policy dispute changes: {reg4}"),
        (assign, reg4, "$total_indictment_changes"),
        (display_message, "@{!}DEBUG -- Total faction switch changes: {reg4}"),
        (assign, reg4, "$total_no_fief_changes"),
        (display_message, "@{!}DEBUG -- Total no fief changes: {reg4}"),
        (assign, reg4, "$total_relation_changes_through_convergence"),
        (display_message, "@{!}DEBUG -- Total changes through convergence: {reg4}"),
        (assign, reg4, "$total_vassal_days_responding_to_campaign"),
        (display_message, "@{!}DEBUG -- Total vassal responses to campaign: {reg4}"),
        (assign, reg4, "$total_vassal_days_on_campaign"),
        (display_message, "@{!}DEBUG -- Total vassal campaign days: {reg4}"),
        (val_max, "$total_vassal_days_on_campaign", 1),
        (store_mul, ":var_11", "$total_vassal_days_responding_to_campaign", 100),
        (val_div, ":var_11", "$total_vassal_days_on_campaign"),
        (assign, reg4, ":var_11"),
        (display_message, "@{!}DEBUG -- Vassal response rate: {reg4}"),
    (try_end),

]),

("troop_get_relation_with_troop",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (assign, ":var_2", 0),
    (try_begin),
        (this_or_next|eq, ":var_0", -1),
        (eq, ":var_1", -1),
        (assign, ":var_2", 0),
    (else_try),
        (eq, ":var_0", "trp_player"),
        (call_script, "script_troop_get_player_relation", ":var_1"),
        (assign, ":var_2", reg0),
    (else_try),
        (eq, ":var_1", "trp_player"),
        (call_script, "script_troop_get_player_relation", ":var_0"),
        (assign, ":var_2", reg0),
    (else_try),
        (store_add, ":var_3", ":var_1", 0),
        (troop_get_slot, ":var_2", ":var_0", ":var_3"),
    (try_end),
    (val_clamp, ":var_2", -100, 101),
    (assign, reg0, ":var_2"),

]),

("appoint_faction_marshall",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (faction_get_slot, ":var_2", ":var_0", slot_faction_leader),
    (faction_get_slot, ":var_3", ":var_0", slot_faction_marshall),
    (faction_set_slot, ":var_0", slot_faction_marshall, ":var_1"),
    (try_begin),
        (ge, ":var_3", 0),
        (troop_get_slot, ":var_4", ":var_3", slot_troop_leaded_party),
        (party_is_active, ":var_4"),
        (party_set_marshall, ":var_4", 0),
    (try_end),
    (try_begin),
        (ge, ":var_1", 0),
        (troop_get_slot, ":var_5", ":var_1", slot_troop_leaded_party),
        (party_is_active, ":var_5"),
        (party_set_marshall, ":var_5", 1),
    (try_end),
    (try_begin),
        (neg|eq, ":var_1", ":var_2"),
        (neg|eq, ":var_1", ":var_3"),
        (this_or_next|eq, ":var_1", "trp_player"),
        (is_between, ":var_1", "trp_npc1", "trp_knight_1_1_wife"),
        (this_or_next|neg|eq, ":var_0", "fac_player_supporters_faction"),
        (neg|check_quest_active, "qst_rebel_against_kingdom"),
        (try_begin),
            (eq, "$cheat_mode", 1),
            (str_store_faction_name, s15, ":var_0"),
            (display_message, "str_checking_lord_reactions_in_s15"),
        (try_end),
        (call_script, "script_troop_change_relation_with_troop", ":var_1", ":var_2", 5),
        (val_add, "$total_promotion_changes", 5),
        (try_for_range, ":var_6", "trp_npc1", "trp_knight_1_1_wife"),
            (troop_slot_eq, ":var_6", slot_troop_occupation, 2),
            (store_troop_faction, ":var_7", ":var_6"),
            (eq, ":var_7", ":var_0"),
            (neg|eq, ":var_6", ":var_1"),
            (neg|eq, ":var_6", ":var_2"),
            (call_script, "script_troop_get_relation_with_troop", ":var_1", ":var_6"),
            (store_sub, ":var_8", reg0, 10),
            (val_div, ":var_8", 15),
            (neg|eq, ":var_8", 0),
            (try_begin),
                (troop_slot_eq, ":var_6", slot_troop_stance_on_faction_issue, ":var_1"),
                (val_add, ":var_8", 1),
                (val_max, ":var_8", 0),
            (try_end),
            (call_script, "script_troop_change_relation_with_troop", ":var_2", ":var_6", ":var_8"),
            (val_add, "$total_promotion_changes", ":var_8"),
            (neg|ge, ":var_8", -2),
            (store_random_in_range, ":var_9", 1, 10),
            (val_add, ":var_8", ":var_9"),
            (neg|ge, ":var_8", 0),
            (str_store_troop_name, s14, ":var_6"),
            (str_store_troop_name, s15, ":var_1"),
            (try_begin),
                (eq, "$cheat_mode", 1),
                (display_message, "str_s14_protests_the_appointment_of_s15_as_marshall"),
            (try_end),
            (call_script, "script_troop_change_relation_with_troop", ":var_2", ":var_6", -10),
            (call_script, "script_troop_change_relation_with_troop", ":var_1", ":var_6", -5),
            (val_add, "$total_promotion_changes", -15),
            (call_script, "script_add_log_entry", 32, ":var_6", ":var_1", ":var_2", "$g_encountered_party_faction"),
        (try_end),
    (try_end),

]),

("center_get_item_consumption",
[

]),

("locate_player_minister",
[
    (assign, ":var_0", 0),
    (try_for_range, ":var_1", "p_town_1_1", "p_village_1_1"),
        (neg|ge, ":var_0", "p_town_1_1"),
        (store_faction_of_party, ":var_2", ":var_1"),
        (eq, ":var_2", "fac_player_supporters_faction"),
        (neg|party_slot_ge, ":var_1", slot_town_lord, "trp_npc1"),
        (assign, ":var_0", ":var_1"),
    (try_end),
    (troop_get_slot, ":var_3", "$g_player_minister", slot_troop_cur_center),
    (troop_set_slot, "$g_player_minister", slot_troop_cur_center, ":var_0"),
    (try_begin),
        (neg|eq, ":var_3", ":var_1"),
        (str_store_party_name, s10, ":var_1"),
        (str_store_troop_name, s11, "$g_player_minister"),
        (display_message, "str_s11_relocates_to_s10"),
    (try_end),

]),

("lord_get_home_center",
[
    (store_script_param, ":var_0", 1),
    (assign, ":var_1", -1),
    (try_for_range, ":var_2", "p_town_1_1", "p_village_1_1"),
        (eq, ":var_1", -1),
        (party_slot_eq, ":var_2", slot_town_lord, ":var_0"),
        (assign, ":var_1", ":var_2"),
    (try_end),
    (try_begin),
        (eq, ":var_1", -1),
        (try_for_range, ":var_2", "p_town_1_1", "p_salt_mine"),
            (eq, ":var_1", -1),
            (party_slot_eq, ":var_2", slot_town_lord, ":var_0"),
            (try_begin),
                (neg|is_between, ":var_2", "p_town_1_1", "p_village_1_1"),
                (party_get_slot, ":var_3", ":var_2", slot_village_bound_center),
                (assign, ":var_1", ":var_3"),
            (try_end),
        (try_end),
    (try_end),
    (try_begin),
        (eq, ":var_1", -1),
        (store_troop_faction, ":var_4", ":var_0"),
        (eq, ":var_4", "fac_player_supporters_faction"),
        (is_between, "$g_player_court", "p_town_1_1", "p_village_1_1"),
        (store_faction_of_party, ":var_5", "$g_player_court"),
        (eq, ":var_5", "fac_player_supporters_faction"),
        (assign, ":var_1", "$g_player_court"),
    (try_end),
    (try_begin),
        (eq, ":var_1", -1),
        (store_troop_faction, ":var_4", ":var_0"),
        (faction_get_slot, ":var_6", ":var_4", slot_faction_leader),
        (neg|eq, ":var_0", ":var_6"),
        (call_script, "script_lord_get_home_center", ":var_6"),
        (gt, reg0, -1),
        (assign, ":var_1", reg0),
    (try_end),
    (try_begin),
        (eq, ":var_1", -1),
        (store_troop_faction, ":var_4", ":var_0"),
        (try_for_range, ":var_7", "p_town_1_1", "p_village_1_1"),
            (eq, ":var_1", -1),
            (store_faction_of_party, ":var_8", ":var_7"),
            (eq, ":var_4", ":var_8"),
            (assign, ":var_1", ":var_7"),
        (try_end),
    (try_end),
    (assign, reg0, ":var_1"),

]),

("get_kingdom_lady_social_determinants",
[
    (store_script_param, ":var_0", 1),
    (store_troop_faction, ":var_1", ":var_0"),
    (assign, ":var_2", -1),
    (assign, ":var_3", -1),
    (assign, ":var_4", 0),
    (try_begin),
        (troop_slot_ge, ":var_0", slot_troop_spouse, 0),
        (troop_get_slot, ":var_3", ":var_0", slot_troop_spouse),
    (else_try),
        (troop_slot_ge, ":var_0", slot_troop_father, 0),
        (troop_get_slot, ":var_3", ":var_0", slot_troop_father),
    (else_try),
        (troop_slot_ge, ":var_0", slot_troop_guardian, 0),
        (troop_get_slot, ":var_3", ":var_0", slot_troop_guardian),
    (try_end),
    (try_begin),
        (faction_slot_eq, ":var_1", slot_faction_ai_state, 6),
        (faction_get_slot, ":var_5", ":var_1", slot_faction_ai_object),
        (gt, ":var_3", -1),
        (troop_get_slot, ":var_6", ":var_3", slot_troop_leaded_party),
        (party_is_active, ":var_6"),
        (party_get_attached_to, ":var_7", ":var_6"),
        (eq, ":var_7", ":var_5"),
        (is_between, ":var_5", "p_town_1_1", "p_village_1_1"),
        (assign, ":var_2", ":var_5"),
    (else_try),
        (troop_slot_eq, "trp_player", slot_troop_spouse, ":var_0"),
        (try_begin),
            (is_between, "$g_player_court", "p_town_1_1", "p_village_1_1"),
        (else_try),
            (troop_get_slot, ":var_8", ":var_0", slot_troop_cur_center),
            (is_between, ":var_8", "p_town_1_1", "p_village_1_1"),
            (party_slot_eq, ":var_8", slot_town_lord, "trp_player"),
            (assign, ":var_2", ":var_8"),
        (try_end),
        (is_between, ":var_2", "p_town_1_1", "p_village_1_1"),
    (else_try),
        (try_for_range, ":var_9", "p_town_1_1", "p_village_1_1"),
            (store_faction_of_party, ":var_10", ":var_9"),
            (this_or_next|eq, ":var_1", ":var_10"),
            (neg|is_between, ":var_1", "fac_player_supporters_faction", "fac_kingdoms_end"),
            (party_get_slot, ":var_11", ":var_9", slot_town_lord),
            (gt, ":var_11", -1),
            (call_script, "script_troop_get_family_relation_to_troop", ":var_0", ":var_11"),
            (try_begin),
                (this_or_next|is_between, ":var_1", "fac_player_supporters_faction", "fac_kingdoms_end"),
                (troop_slot_eq, "trp_player", slot_troop_spouse, ":var_0"),
                (faction_slot_eq, ":var_1", slot_faction_leader, ":var_11"),
                (val_max, reg0, 1),
            (try_end),
            (try_begin),
                (eq, "$cheat_mode", 2),
                (str_store_troop_name, s3, ":var_0"),
                (str_store_troop_name, s4, ":var_11"),
                (str_store_party_name, s5, ":var_9"),
                (display_message, "str_checking_s3_at_s5_with_s11_relationship_with_s4_score_reg0"),
                (str_clear, s11),
            (try_end),
            (gt, reg0, ":var_4"),
            (assign, ":var_4", reg0),
            (assign, ":var_2", ":var_9"),
        (try_end),
    (try_end),
    (assign, reg0, ":var_3"),
    (assign, reg1, ":var_2"),

]),

("age_troop_one_year",
[
    (store_script_param, ":var_0", 1),
    (troop_get_type, ":var_1", ":var_0"),
    (troop_get_slot, ":var_2", ":var_0", slot_troop_age),
    (troop_get_slot, ":var_3", ":var_0", slot_troop_age_appearance),
    (val_add, ":var_2", 1),
    (store_random_in_range, ":var_4", 1, 5),
    (try_begin),
        (eq, ":var_1", 1),
    (try_end),
    (val_add, ":var_3", ":var_4"),
    (try_begin),
        (gt, ":var_2", 45),
        (store_attribute_level, ":var_5", ":var_0", ca_strength),
        (store_attribute_level, ":var_6", ":var_0", ca_agility),
        (store_random_in_range, ":var_7", 0, 50),
        (try_begin),
            (neg|ge, ":var_7", ":var_5"),
            (troop_raise_attribute, ":var_0", ca_strength, -1),
        (try_end),
        (try_begin),
            (neg|ge, ":var_7", ":var_6"),
            (troop_raise_attribute, ":var_0", ca_agility, -1),
        (try_end),
    (try_end),
    (val_clamp, ":var_3", 1, 100),
    (troop_set_slot, ":var_0", slot_troop_age, ":var_2"),
    (troop_set_slot, ":var_0", slot_troop_age_appearance, ":var_3"),
    (troop_set_age, ":var_0", ":var_3"),

]),

("add_lady_items",
[
    (store_script_param, ":var_0", 1),
    (try_for_range, ":var_1", "itm_tutorial_spear", "itm_pig_killer"),
        (troop_remove_item, ":var_0", ":var_1"),
    (try_end),
    (store_troop_faction, ":var_2", ":var_0"),
    (call_script, "script_raf_aor_faction_to_region", ":var_2"),
    (try_begin),
        (eq, reg0, 4),
        (store_random_in_range, ":var_3", "itm_khergit_lady_dress", "itm_sarranid_lady_dress"),
        (troop_add_item, ":var_0", ":var_3", 0),
    (else_try),
        (this_or_next|eq, reg0, 10),
        (this_or_next|eq, reg0, 11),
        (eq, reg0, 12),
        (store_random_in_range, ":var_3", "itm_sarranid_lady_dress", "itm_sarranid_common_dress"),
        (troop_add_item, ":var_0", ":var_3", 0),
    (else_try),
        (store_random_in_range, ":var_3", "itm_red_dress", "itm_khergit_lady_dress"),
        (troop_add_item, ":var_0", ":var_3", 0),
    (try_end),
    (troop_add_item, ":var_0", "itm_blue_hose", 0),
    (troop_equip_items, ":var_0"),
    (try_begin),
        (try_begin),
            (this_or_next|troop_has_item_equipped, ":var_0", "itm_red_dress"),
            (this_or_next|troop_has_item_equipped, ":var_0", "itm_brown_dress"),
            (troop_has_item_equipped, ":var_0", "itm_green_dress"),
            (store_random_in_range, ":var_1", "itm_turret_hat_green", "itm_straw_hat"),
            (troop_add_item, ":var_0", ":var_1", 0),
        (else_try),
            (troop_has_item_equipped, ":var_0", "itm_sarranid_lady_dress"),
            (troop_add_item, ":var_0", "itm_sarranid_head_cloth", 0),
        (else_try),
            (troop_has_item_equipped, ":var_0", "itm_sarranid_lady_dress_b"),
            (troop_add_item, ":var_0", "itm_sarranid_head_cloth_b", 0),
        (try_end),
        (troop_equip_items, ":var_0"),
    (try_end),

]),

("init_troop_age",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (try_begin),
        (gt, ":var_1", 20),
        (troop_set_slot, ":var_0", slot_troop_age, 20),
    (else_try),
        (troop_set_slot, ":var_0", slot_troop_age, ":var_1"),
    (try_end),
    (store_sub, ":var_2", ":var_1", 20),
    (troop_set_age, ":var_0", 0),
    (try_begin),
        (gt, ":var_2", 0),
        (try_for_range, ":var_3", 0, ":var_2"),
            (call_script, "script_age_troop_one_year", ":var_0"),
        (try_end),
    (try_end),

]),

("assign_troop_love_interests",
[
    (store_script_param, ":var_0", 1),
    (store_troop_faction, ":var_1", ":var_0"),
    (try_for_range, ":var_2", 0, 50),
        (store_random_in_range, ":var_3", "trp_knight_1_1_wife", "trp_heroes_end"),
        (troop_slot_eq, ":var_3", slot_troop_spouse, -1),
        (store_troop_faction, ":var_4", ":var_3"),
        (eq, ":var_1", ":var_4"),
        (call_script, "script_troop_get_family_relation_to_troop", ":var_0", ":var_3"),
        (eq, reg0, 0),
        (call_script, "script_troop_get_relation_with_troop", ":var_0", ":var_3"),
        (eq, reg0, 0),
        (neg|troop_slot_eq, ":var_0", slot_troop_love_interest_1, ":var_3"),
        (neg|troop_slot_eq, ":var_0", slot_troop_love_interest_2, ":var_3"),
        (neg|troop_slot_eq, ":var_0", slot_troop_love_interest_3, ":var_3"),
        (try_begin),
            (troop_slot_eq, ":var_0", slot_troop_love_interest_1, 0),
            (troop_set_slot, ":var_0", slot_troop_love_interest_1, ":var_3"),
        (else_try),
            (troop_slot_eq, ":var_0", slot_troop_love_interest_2, 0),
            (troop_set_slot, ":var_0", slot_troop_love_interest_2, ":var_3"),
        (else_try),
            (troop_slot_eq, ":var_0", slot_troop_love_interest_3, 0),
            (troop_set_slot, ":var_0", slot_troop_love_interest_3, ":var_3"),
        (try_end),
    (try_end),

]),

("faction_conclude_feast",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (str_store_faction_name, s3, ":var_0"),
    (str_store_party_name, s4, ":var_1"),
    (try_begin),
        (eq, "$cheat_mode", 1),
        (display_message, "str_s3_feast_concludes_at_s4"),
    (try_end),
    (try_begin),
        (eq, ":var_0", "fac_player_faction"),
        (assign, ":var_0", "$players_kingdom"),
    (try_end),
    (party_set_slot, ":var_1", slot_town_has_tournament, 0),
    (assign, ":var_2", 0),
    (assign, ":var_3", 0),
    (try_for_range, ":var_4", "trp_npc1", "trp_heroes_end"),
        (store_troop_faction, ":var_5", ":var_4"),
        (eq, ":var_0", ":var_5"),
        (val_add, ":var_2", 1),
        (troop_slot_eq, ":var_4", slot_troop_cur_center, ":var_1"),
        (val_add, ":var_3", 1),
        (troop_slot_eq, ":var_4", slot_troop_occupation, 6),
        (troop_get_slot, ":var_6", ":var_4", slot_troop_betrothed),
        (gt, ":var_6", 0),
        (troop_get_slot, ":var_7", ":var_6", slot_troop_leaded_party),
        (party_is_active, ":var_7"),
        (party_get_attached_to, ":var_8", ":var_7"),
        (eq, ":var_8", ":var_1"),
        (store_troop_faction, ":var_9", ":var_4"),
        (store_troop_faction, ":var_10", ":var_6"),
        (eq, ":var_10", ":var_9"),
        (eq, ":var_9", ":var_0"),
        (store_current_hours, ":var_11"),
        (troop_get_slot, ":var_12", ":var_4", slot_troop_betrothal_time),
        (val_sub, ":var_11", ":var_12"),
        (ge, ":var_11", 144),
        (call_script, "script_get_kingdom_lady_social_determinants", ":var_4"),
        (assign, ":var_13", reg1),
        (eq, ":var_1", ":var_13"),
        (neg|eq, ":var_4", "trp_player"),
        (neg|eq, ":var_6", "trp_player"),
        (call_script, "script_courtship_event_bride_marry_groom", ":var_4", ":var_6", 0),
    (try_end),
    (party_get_slot, ":var_14", ":var_1", slot_town_lord),
    (assign, ":var_15", 0),
    (try_begin),
        (check_quest_active, "qst_organize_feast"),
        (quest_slot_eq, "qst_organize_feast", 1, ":var_1"),
        (assign, ":var_14", "trp_player"),
        (assign, ":var_16", 400),
        (call_script, "script_succeed_quest", "qst_organize_feast"),
        (call_script, "script_end_quest", "qst_organize_feast"),
        (call_script, "script_internal_politics_rate_feast_to_s9", "trp_household_possessions", ":var_16", "$players_kingdom", 1),
        (assign, ":var_15", reg0),
    (else_try),
        (assign, ":var_15", 60),
    (try_end),
    (try_begin),
        (ge, "$cheat_mode", 1),
        (str_store_troop_name, s4, ":var_14"),
        (assign, reg4, ":var_15"),
        (display_message, "@{!}DEBUG - {s4}'s feast has rating of {reg4}"),
    (try_end),
    (try_begin),
        (ge, ":var_14", 0),
        (store_div, ":var_17", ":var_15", 3),
        (call_script, "script_change_troop_renown", ":var_14", ":var_17"),
        (try_for_range, ":var_4", "trp_npc1", "trp_knight_1_1_wife"),
            (troop_slot_eq, ":var_4", slot_troop_occupation, 2),
            (troop_get_slot, ":var_18", ":var_4", slot_troop_leaded_party),
            (party_is_active, ":var_18"),
            (party_get_attached_to, ":var_19", ":var_18"),
            (eq, ":var_19", ":var_1"),
            (assign, ":var_20", ":var_15"),
            (val_div, ":var_20", 20),
            (try_begin),
                (eq, ":var_14", "trp_player"),
                (val_sub, ":var_20", 1),
                (val_max, ":var_20", 0),
            (try_end),
            (call_script, "script_troop_change_relation_with_troop", ":var_14", ":var_4", ":var_20"),
            (val_add, "$total_feast_changes", ":var_20"),
        (try_end),
    (try_end),
    (assign, reg3, ":var_3"),
    (assign, reg4, ":var_2"),
    (try_begin),
        (eq, "$cheat_mode", 1),
        (display_message, "str_attendance_reg3_nobles_out_of_reg4"),
    (try_end),

]),

("lady_evaluate_troop_as_suitor",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (call_script, "script_troop_get_romantic_chemistry_with_troop", ":var_0", ":var_1"),
    (assign, ":var_2", reg0),
    (try_begin),
        (call_script, "script_cf_test_lord_incompatibility_to_s17", ":var_0", ":var_1"),
    (try_end),
    (store_sub, ":var_3", 0, reg0),
    (assign, reg2, ":var_3"),
    (try_begin),
        (troop_get_slot, ":var_4", ":var_1", slot_troop_renown),
        (val_div, ":var_4", 20),
        (try_begin),
            (this_or_next|troop_slot_eq, ":var_0", slot_lord_reputation_type, 21),
            (troop_slot_eq, ":var_0", slot_lord_reputation_type, 24),
            (val_mul, ":var_4", 2),
            (val_sub, ":var_4", 15),
        (try_end),
    (try_end),
    (store_add, ":var_5", ":var_4", ":var_3"),
    (val_add, ":var_5", ":var_2"),
    (assign, reg0, ":var_5"),

]),

("courtship_event_troop_court_lady",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (troop_get_slot, ":var_2", ":var_1", slot_troop_love_interests_end),
    (troop_set_slot, ":var_1", slot_troop_love_interests_end, ":var_0"),
    (try_begin),
        (eq, ":var_2", "trp_player"),
        (troop_slot_ge, ":var_1", slot_troop_met, 2),
        (call_script, "script_troop_get_relation_with_troop", ":var_0", "trp_player"),
        (assign, ":var_3", reg0),
        (try_begin),
            (this_or_next|troop_slot_eq, ":var_0", slot_lord_reputation_type, 3),
            (this_or_next|troop_slot_eq, ":var_0", slot_lord_reputation_type, 2),
            (troop_slot_eq, ":var_0", slot_lord_reputation_type, 5),
            (gt, ":var_3", -20),
            (call_script, "script_add_log_entry", 31, ":var_0", "trp_player", ":var_1", 0),
        (else_try),
            (is_between, ":var_3", -5, -25),
            (call_script, "script_add_log_entry", 31, ":var_0", "trp_player", ":var_1", 0),
        (try_end),
    (else_try),
        (neg|eq, ":var_2", "trp_player"),
        (neg|eq, ":var_0", ":var_2"),
        (ge, ":var_2", "trp_npc1"),
        (call_script, "script_cf_test_lord_incompatibility_to_s17", ":var_0", ":var_2"),
        (call_script, "script_add_log_entry", 31, ":var_0", ":var_2", ":var_1", 0),
        (call_script, "script_troop_get_relation_with_troop", ":var_0", ":var_2"),
        (ge, reg0, 0),
        (call_script, "script_troop_change_relation_with_troop", ":var_0", ":var_2", -20),
        (val_add, "$total_courtship_quarrel_changes", -20),
    (else_try),
        (troop_slot_eq, ":var_0", slot_lord_reputation_type, 2),
        (neg|eq, ":var_0", ":var_2"),
        (ge, ":var_2", "trp_npc1"),
        (call_script, "script_troop_get_relation_with_troop", ":var_0", ":var_2"),
        (neg|ge, reg0, 10),
        (call_script, "script_add_log_entry", 31, ":var_0", ":var_2", ":var_1", 0),
        (ge, reg0, 0),
        (call_script, "script_troop_change_relation_with_troop", ":var_0", ":var_2", -20),
        (val_add, "$total_courtship_quarrel_changes", -20),
    (try_end),
    (call_script, "script_lady_evaluate_troop_as_suitor", ":var_1", ":var_0"),
    (store_random_in_range, ":var_4", 5, 16),
    (store_div, ":var_5", reg0, ":var_4"),
    (call_script, "script_troop_get_relation_with_troop", ":var_1", ":var_0"),
    (assign, ":var_6", reg0),
    (call_script, "script_troop_change_relation_with_troop", ":var_1", ":var_0", ":var_5"),
    (call_script, "script_troop_get_relation_with_troop", ":var_1", ":var_0"),
    (assign, ":var_7", reg0),
    (try_begin),
        (ge, ":var_7", 10),
        (neg|ge, ":var_6", 10),
        (call_script, "script_add_log_entry", 51, ":var_1", 0, ":var_0", 0),
        (try_begin),
            (eq, "$cheat_mode", 1),
            (display_message, "str_note__favor_event_logged"),
        (try_end),
    (else_try),
        (this_or_next|neg|ge, ":var_7", -20),
        (ge, ":var_7", 20),
        (call_script, "script_get_kingdom_lady_social_determinants", ":var_1"),
        (assign, ":var_8", reg0),
        (ge, ":var_8", 0),
        (call_script, "script_troop_get_relation_with_troop", ":var_0", ":var_8"),
        (assign, ":var_9", reg0),
        (assign, ":var_10", -1),
        (assign, ":var_11", -1),
        (assign, ":var_12", ":var_9"),
        (assign, ":var_13", -1),
        (try_for_range, ":var_14", "trp_knight_1_1", "trp_kingdom_2_pretender"),
            (neg|eq, ":var_14", ":var_0"),
            (this_or_next|troop_slot_eq, ":var_14", slot_troop_love_interest_1, ":var_1"),
            (this_or_next|troop_slot_eq, ":var_14", slot_troop_love_interest_2, ":var_1"),
            (troop_slot_eq, ":var_14", slot_troop_love_interest_3, ":var_1"),
            (try_begin),
                (call_script, "script_troop_get_relation_with_troop", ":var_14", ":var_1"),
                (gt, reg0, ":var_10"),
                (assign, ":var_11", ":var_14"),
                (assign, ":var_10", reg0),
            (try_end),
            (try_begin),
                (call_script, "script_troop_get_relation_with_troop", ":var_14", ":var_8"),
                (gt, reg0, ":var_12"),
                (assign, ":var_13", ":var_14"),
                (assign, ":var_12", reg0),
            (try_end),
        (try_end),
        (try_begin),
            (neg|ge, ":var_7", -20),
            (this_or_next|troop_slot_eq, ":var_8", slot_lord_reputation_type, 3),
            (this_or_next|troop_slot_eq, ":var_8", slot_lord_reputation_type, 5),
            (troop_slot_eq, ":var_8", slot_lord_reputation_type, 2),
            (eq, ":var_13", -1),
            (this_or_next|troop_slot_eq, ":var_0", slot_lord_reputation_type, 3),
            (this_or_next|troop_slot_eq, ":var_0", slot_lord_reputation_type, 5),
            (troop_slot_eq, ":var_0", slot_lord_reputation_type, 2),
            (troop_slot_eq, ":var_0", slot_troop_betrothed, -1),
            (troop_slot_eq, ":var_1", slot_troop_betrothed, -1),
            (call_script, "script_add_log_entry", 53, ":var_1", 0, ":var_0", 0),
            (troop_set_slot, ":var_0", slot_troop_betrothed, ":var_1"),
            (troop_set_slot, ":var_1", slot_troop_betrothed, ":var_0"),
            (store_current_hours, ":var_15"),
            (troop_set_slot, ":var_1", slot_troop_betrothal_time, ":var_15"),
            (troop_set_slot, ":var_0", slot_troop_betrothal_time, ":var_15"),
            (try_begin),
                (eq, "$cheat_mode", 1),
                (display_message, "str_result_lady_forced_to_agree_to_engagement"),
            (try_end),
        (else_try),
            (neg|ge, ":var_7", -20),
            (call_script, "script_add_log_entry", 54, ":var_1", 0, ":var_0", 0),
            (call_script, "script_courtship_event_lady_break_relation_with_suitor", ":var_1", ":var_0"),
            (try_begin),
                (eq, "$cheat_mode", 1),
                (display_message, "str_result_lady_rejects_suitor"),
            (try_end),
        (else_try),
            (gt, ":var_7", 20),
            (gt, ":var_9", 0),
            (eq, ":var_11", -1),
            (troop_slot_eq, ":var_0", slot_troop_betrothed, -1),
            (troop_slot_eq, ":var_1", slot_troop_betrothed, -1),
            (call_script, "script_add_log_entry", 52, ":var_1", 0, ":var_0", 0),
            (troop_set_slot, ":var_0", slot_troop_betrothed, ":var_1"),
            (troop_set_slot, ":var_1", slot_troop_betrothed, ":var_0"),
            (store_current_hours, ":var_15"),
            (troop_set_slot, ":var_1", slot_troop_betrothal_time, ":var_15"),
            (troop_set_slot, ":var_0", slot_troop_betrothal_time, ":var_15"),
            (try_begin),
                (eq, "$cheat_mode", 1),
                (str_store_troop_name, s4, ":var_1"),
                (str_store_troop_name, s5, ":var_0"),
                (display_message, "str_result_happy_engagement_between_s4_and_s5"),
            (try_end),
        (else_try),
            (gt, ":var_7", 20),
            (eq, ":var_11", -1),
            (this_or_next|troop_slot_eq, ":var_8", slot_lord_reputation_type, 22),
            (troop_slot_eq, ":var_8", slot_lord_reputation_type, 24),
            (troop_slot_eq, ":var_0", slot_troop_betrothed, -1),
            (troop_slot_eq, ":var_1", slot_troop_betrothed, -1),
            (call_script, "script_courtship_event_bride_marry_groom", ":var_1", ":var_0", 1),
            (try_begin),
                (eq, "$cheat_mode", 1),
                (str_store_troop_name, s4, ":var_1"),
                (str_store_troop_name, s5, ":var_0"),
                (display_message, "str_result_s4_elopes_with_s5"),
            (try_end),
        (else_try),
            (troop_slot_eq, ":var_1", slot_lord_reputation_type, 21),
            (eq, ":var_13", -1),
            (gt, ":var_9", 4),
            (store_random_in_range, ":var_4", 0, 5),
            (eq, ":var_4", 0),
            (troop_slot_eq, ":var_0", slot_troop_betrothed, -1),
            (troop_slot_eq, ":var_1", slot_troop_betrothed, -1),
            (call_script, "script_add_log_entry", 59, ":var_1", 0, ":var_0", 0),
            (troop_set_slot, ":var_0", slot_troop_betrothed, ":var_1"),
            (troop_set_slot, ":var_1", slot_troop_betrothed, ":var_0"),
            (store_current_hours, ":var_15"),
            (troop_set_slot, ":var_1", slot_troop_betrothal_time, ":var_15"),
            (troop_set_slot, ":var_0", slot_troop_betrothal_time, ":var_15"),
            (try_begin),
                (eq, "$cheat_mode", 1),
                (str_store_troop_name, s4, ":var_1"),
                (str_store_troop_name, s5, ":var_0"),
                (display_message, "str_result_s4_reluctantly_agrees_to_engagement_with_s5"),
            (try_end),
        (else_try),
            (gt, ":var_7", 20),
            (store_random_in_range, reg3, 0, 3),
            (try_begin),
                (eq, "$cheat_mode", 1),
                (display_message, "str_result_stalemate_patience_roll_=_reg3"),
            (try_end),
            (eq, reg3, 0),
            (call_script, "script_add_log_entry", 58, ":var_1", 0, ":var_0", 0),
            (call_script, "script_courtship_event_lady_break_relation_with_suitor", ":var_1", ":var_0"),
        (try_end),
    (try_end),

]),

("courtship_event_lady_break_relation_with_suitor",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (try_for_range, ":var_2", 35, 38),
        (troop_slot_eq, ":var_1", ":var_2", ":var_0"),
        (troop_set_slot, ":var_1", ":var_2", 0),
    (try_end),
    (call_script, "script_assign_troop_love_interests", ":var_1"),
    (try_begin),
        (troop_slot_eq, ":var_0", slot_troop_betrothed, ":var_1"),
        (troop_set_slot, ":var_0", slot_troop_betrothed, -1),
        (troop_set_slot, ":var_1", slot_troop_betrothed, -1),
    (try_end),

]),

("courtship_event_bride_marry_groom",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (try_begin),
        (eq, ":var_0", "trp_player"),
        (assign, ":var_3", "$g_encountered_party"),
    (else_try),
        (troop_get_slot, ":var_3", ":var_0", slot_troop_cur_center),
    (try_end),
    (store_troop_faction, ":var_4", ":var_1"),
    (try_begin),
        (eq, ":var_2", 0),
        (call_script, "script_add_log_entry", 61, ":var_0", ":var_3", ":var_1", 0),
    (else_try),
        (call_script, "script_add_log_entry", 57, ":var_0", ":var_3", ":var_1", 0),
    (try_end),
    (str_store_troop_name, s3, ":var_0"),
    (str_store_troop_name, s4, ":var_1"),
    (str_store_party_name, s5, ":var_3"),
    (try_begin),
        (eq, "$cheat_mode", 1),
        (display_message, "str_s3_marries_s4_at_s5"),
    (try_end),
    (troop_set_slot, ":var_0", slot_troop_spouse, ":var_1"),
    (troop_set_slot, ":var_1", slot_troop_spouse, ":var_0"),
    (try_for_range, ":var_5", 35, 38),
        (troop_set_slot, ":var_1", ":var_5", 0),
    (try_end),
    (try_for_range, ":var_6", "trp_npc1", "trp_knight_1_1_wife"),
        (try_for_range, ":var_5", 35, 38),
            (troop_slot_eq, ":var_6", ":var_5", ":var_0"),
            (call_script, "script_courtship_event_lady_break_relation_with_suitor", ":var_0", ":var_6"),
        (try_end),
    (try_end),
    (troop_set_slot, ":var_0", slot_troop_betrothed, -1),
    (troop_set_slot, ":var_1", slot_troop_betrothed, -1),
    (try_for_range, ":var_7", "trp_knight_1_1", "trp_kingdom_2_pretender"),
        (call_script, "script_troop_get_family_relation_to_troop", ":var_0", ":var_7"),
        (gt, reg0, 0),
        (store_div, ":var_8", reg0, 3),
        (try_begin),
            (eq, ":var_2", 1),
            (val_mul, ":var_8", -2),
        (try_end),
        (call_script, "script_troop_change_relation_with_troop", ":var_1", ":var_0", ":var_8"),
        (val_add, "$total_courtship_quarrel_changes", ":var_8"),
    (try_end),
    (try_begin),
        (this_or_next|eq, ":var_1", "trp_player"),
        (eq, ":var_0", "trp_player"),
        (call_script, "script_change_player_right_to_rule", "trp_player", 15),
    (try_end),
    (try_begin),
        (eq, ":var_1", "trp_player"),
        (check_quest_active, "qst_wed_betrothed"),
        (call_script, "script_succeed_quest", "qst_wed_betrothed"),
        (call_script, "script_end_quest", "qst_wed_betrothed"),
    (try_end),
    (try_begin),
        (check_quest_active, "qst_visit_lady"),
        (quest_slot_eq, "qst_visit_lady", 6, ":var_0"),
        (call_script, "script_abort_quest", "qst_visit_lady", 0),
    (try_end),
    (try_begin),
        (eq, ":var_1", "trp_player"),
        (check_quest_active, "qst_visit_lady"),
        (call_script, "script_abort_quest", "qst_visit_lady", 0),
    (try_end),
    (try_begin),
        (eq, ":var_1", "trp_player"),
        (check_quest_active, "qst_duel_courtship_rival"),
        (call_script, "script_abort_quest", "qst_duel_courtship_rival", 0),
    (try_end),
    (try_begin),
        (eq, ":var_0", "trp_player"),
        (call_script, "script_player_join_faction", ":var_4"),
        (assign, "$player_has_homage", 1),
    (else_try),
        (eq, ":var_1", "trp_player"),
        (troop_set_faction, ":var_0", "$players_kingdom"),
    (else_try),
        (troop_set_faction, ":var_0", ":var_4"),
    (try_end),
    (try_begin),
        (this_or_next|eq, ":var_1", "trp_player"),
        (eq, ":var_0", "trp_player"),
        (unlock_achievement, 39),
        (try_begin),
            (eq, ":var_2", 1),
            (unlock_achievement, 40),
        (try_end),
    (try_end),
    (try_begin),
        (this_or_next|eq, ":var_1", "trp_player"),
        (eq, ":var_0", "trp_player"),
        (call_script, "script_start_wedding_cutscene", ":var_1", ":var_0"),
    (try_end),

]),

("npc_decision_checklist_party_ai",
[
    (store_script_param, ":var_0", 1),
    (troop_get_slot, ":var_1", ":var_0", slot_troop_leaded_party),
    (try_begin),
        (eq, "$cheat_mode", 1),
        (assign, "$g_talk_troop", ":var_0"),
    (try_end),
    (store_troop_faction, ":var_2", ":var_0"),
    (try_begin),
        (eq, ":var_0", "$g_talk_troop"),
        (str_store_string, s15, "str__i_must_attend_to_this_matter_before_i_worry_about_the_affairs_of_the_realm"),
    (try_end),
    (party_get_attached_to, ":var_3", ":var_1"),
    (try_begin),
        (neg|ge, ":var_3", 0),
        (party_get_cur_town, ":var_3", ":var_1"),
    (try_end),
    (assign, ":var_4", -1),
    (try_begin),
        (neg|is_between, ":var_3", "p_town_1_1", "p_salt_mine"),
        (assign, ":var_3", -1),
    (else_try),
        (party_get_slot, ":var_4", ":var_3", slot_center_is_besieged_by),
        (try_begin),
            (neg|party_is_active, ":var_4"),
            (assign, ":var_4", -1),
        (try_end),
    (try_end),
    (call_script, "script_party_count_fit_for_battle", ":var_1"),
    (assign, ":var_5", reg0),
    (call_script, "script_party_get_ideal_size", ":var_1"),
    (assign, ":var_6", reg0),
    (store_mul, ":var_7", ":var_5", 100),
    (val_div, ":var_7", ":var_6"),
    (try_begin),
        (faction_slot_eq, ":var_2", slot_faction_num_towns, 0),
        (faction_slot_eq, ":var_2", slot_faction_num_castles, 0),
        (assign, ":var_8", 0),
    (else_try),
        (party_get_num_prisoners, ":var_9", ":var_1"),
        (val_max, ":var_5", 1),
        (store_div, ":var_8", ":var_9", ":var_5"),
    (try_end),
    (assign, ":var_10", 0),
    (try_for_range, ":var_11", "fac_player_supporters_faction", "fac_kingdoms_end"),
        (faction_slot_eq, ":var_11", slot_faction_state, 0),
        (store_relation, ":var_12", ":var_2", ":var_11"),
        (neg|ge, ":var_12", 0),
        (assign, ":var_10", 1),
    (try_end),
    (assign, ":var_13", 0),
    (try_begin),
        (this_or_next|party_slot_eq, ":var_1", slot_party_ai_state, 5),
        (party_slot_eq, ":var_1", slot_party_ai_state, 1),
        (party_get_slot, ":var_14", ":var_1", slot_party_ai_object),
        (is_between, ":var_14", "p_town_1_1", "p_salt_mine"),
        (store_faction_of_party, ":var_15", ":var_14"),
        (store_relation, ":var_12", ":var_2", ":var_15"),
        (neg|ge, ":var_12", 0),
        (store_distance_to_party_from_party, ":var_16", ":var_1", ":var_14"),
        (neg|ge, ":var_16", 10),
        (this_or_next|party_slot_eq, ":var_14", slot_village_state, 5),
        (this_or_next|party_slot_eq, ":var_14", slot_village_state, 0),
        (party_slot_eq, ":var_14", slot_village_state, 1),
        (assign, ":var_13", 1),
    (try_end),
    (troop_get_slot, ":var_17", ":var_0", slot_lord_reputation_type),
    (party_get_slot, ":var_18", ":var_1", slot_party_ai_state),
    (party_get_slot, ":var_19", ":var_1", slot_party_ai_object),
    (party_get_slot, ":var_20", ":var_1", slot_party_cached_strength),
    (store_current_hours, ":var_21"),
    (party_get_slot, ":var_22", ":var_1", slot_party_last_in_any_center),
    (val_sub, ":var_21", ":var_22"),
    (store_current_hours, ":var_23"),
    (party_get_slot, ":var_24", ":var_1", slot_party_last_in_home_center),
    (val_sub, ":var_23", ":var_24"),
    (store_current_hours, ":var_25"),
    (party_get_slot, ":var_26", ":var_1", slot_party_last_in_combat),
    (val_sub, ":var_25", ":var_26"),
    (store_current_hours, ":var_27"),
    (party_get_slot, ":var_28", ":var_1", slot_party_leader_last_courted),
    (val_sub, ":var_27", ":var_28"),
    (troop_get_slot, ":var_29", ":var_0", slot_troop_temp_decision_seed),
    (store_mod, ":var_30", ":var_29", 73),
    (try_begin),
        (eq, ":var_17", 1),
        (val_add, ":var_30", 27),
    (else_try),
        (neg|eq, ":var_17", 5),
        (neg|eq, ":var_17", 2),
        (val_add, ":var_30", 14),
    (try_end),
    (try_begin),
        (gt, ":var_30", ":var_25"),
        (val_add, ":var_30", ":var_25"),
        (val_div, ":var_30", 2),
    (try_end),
    (try_begin),
        (eq, "$cheat_mode", 1),
        (eq, ":var_0", "$g_talk_troop"),
        (str_store_troop_name, s4, ":var_0"),
        (assign, reg3, ":var_21"),
        (assign, reg4, ":var_27"),
        (assign, reg5, ":var_25"),
        (assign, reg6, ":var_23"),
        (assign, reg7, ":var_30"),
    (try_end),
    (str_store_string, s17, "str_the_other_matter_took_precedence"),
    (assign, ":var_31", 0),
    (try_begin),
        (ge, ":var_3", 0),
        (this_or_next|neg|gt, ":var_5", 10),
        (neg|gt, ":var_7", 30),
        (assign, ":var_32", 7),
        (assign, ":var_33", ":var_3"),
        (try_begin),
            (eq, ":var_0", "$g_talk_troop"),
            (str_store_string, s14, "str_i_need_to_raise_some_men_before_attempting_anything_else"),
            (str_store_string, s16, "str_i_need_to_raise_some_men_before_attempting_anything_else"),
        (try_end),
    (else_try),
        (gt, ":var_4", -1),
        (assign, ":var_32", 7),
        (assign, ":var_33", ":var_3"),
        (try_begin),
            (eq, ":var_0", "$g_talk_troop"),
            (str_store_string, s14, "str_i_cannot_leave_this_fortress_now_as_it_is_under_siege"),
            (str_store_string, s16, "str_after_all_we_are_under_siege"),
        (try_end),
    (else_try),
        (eq, ":var_18", 14),
        (neg|party_is_in_any_town, ":var_1"),
        (ge, ":var_19", 0),
        (party_is_active, ":var_19"),
        (store_faction_of_party, ":var_34", ":var_19"),
        (eq, ":var_2", ":var_34"),
        (assign, ":var_32", 14),
        (assign, ":var_33", ":var_19"),
        (try_begin),
            (eq, ":var_0", "$g_talk_troop"),
            (str_store_string, s14, "str_we_are_not_strong_enough_to_face_the_enemy_out_in_the_open"),
            (str_store_string, s16, "str_i_should_probably_seek_shelter_behind_some_stout_walls"),
        (try_end),
    (else_try),
        (is_between, ":var_3", "p_town_1_1", "p_village_1_1"),
        (party_get_slot, ":var_35", ":var_3", slot_center_sortie_enemy_strength),
        (ge, ":var_35", 50),
        (assign, ":var_32", 7),
        (assign, ":var_33", ":var_3"),
        (try_begin),
            (eq, ":var_0", "$g_talk_troop"),
            (str_store_string, s14, "str_i_need_to_raise_some_men_before_attempting_anything_else"),
            (str_store_string, s16, "str_i_need_to_raise_some_men_before_attempting_anything_else"),
        (try_end),
    (else_try),
        (faction_slot_eq, ":var_2", slot_faction_marshall, ":var_0"),
        (str_clear, s15),
        (faction_slot_eq, ":var_2", slot_faction_ai_state, 1),
        (party_set_ai_initiative, ":var_1", 10),
        (party_get_slot, ":var_19", ":var_1", slot_party_ai_object),
        (assign, ":var_36", ":var_19"),
        (call_script, "script_find_center_to_defend", ":var_0"),
        (assign, ":var_37", reg0),
        (assign, ":var_38", 0),
        (try_begin),
            (neg|ge, ":var_19", 0),
            (store_random_in_range, ":var_39", 0, 8),
            (this_or_next|eq, "$g_gathering_new_started", 1),
            (eq, ":var_39", 0),
            (assign, ":var_40", 0),
            (assign, ":var_41", 0),
            (try_for_range, ":var_42", "trp_npc1", "trp_knight_1_1_wife"),
                (store_troop_faction, ":var_43", ":var_42"),
                (eq, ":var_43", ":var_2"),
                (troop_get_slot, ":var_44", ":var_42", slot_troop_leaded_party),
                (party_is_active, ":var_44"),
                (val_add, ":var_41", 1),
                (party_slot_eq, ":var_44", slot_party_ai_state, 11),
                (party_slot_eq, ":var_44", slot_party_ai_object, ":var_1"),
                (party_is_active, ":var_1"),
                (store_distance_to_party_from_party, ":var_45", ":var_44", ":var_1"),
                (neg|ge, ":var_45", 15),
                (val_add, ":var_40", 1),
            (try_end),
            (assign, ":var_46", -1),
            (try_begin),
                (gt, ":var_41", 0),
                (store_mul, ":var_46", ":var_40", 100),
                (val_div, ":var_46", ":var_41"),
            (try_end),
            (try_begin),
                (neg|gt, ":var_46", 35),
                (assign, ":var_47", ":var_37"),
                (try_begin),
                    (eq, "$g_gathering_new_started", 1),
                    (assign, ":var_48", 100000),
                    (try_for_range, ":var_49", "p_town_1_1", "p_salt_mine"),
                        (store_faction_of_party, ":var_50", ":var_49"),
                        (eq, ":var_50", ":var_2"),
                        (try_begin),
                            (neg|eq, ":var_49", ":var_37"),
                            (store_distance_to_party_from_party, ":var_51", ":var_1", ":var_49"),
                            (neg|ge, ":var_51", ":var_48"),
                            (assign, ":var_48", ":var_51"),
                            (assign, ":var_47", ":var_49"),
                        (try_end),
                    (try_end),
                (else_try),
                    (assign, ":var_52", 150),
                    (try_begin),
                        (ge, ":var_46", 15),
                        (store_sub, ":var_52", 35, ":var_46"),
                        (val_add, ":var_52", 5),
                        (val_mul, ":var_52", 6),
                    (try_end),
                    (try_begin),
                        (ge, ":var_37", 0),
                        (store_distance_to_party_from_party, reg12, ":var_1", ":var_37"),
                    (else_try),
                        (assign, reg12, 0),
                    (try_end),
                    (assign, ":var_53", 0),
                    (try_for_range, ":var_49", "p_town_1_1", "p_village_1_1"),
                        (store_faction_of_party, ":var_50", ":var_49"),
                        (eq, ":var_50", ":var_2"),
                        (try_begin),
                            (store_distance_to_party_from_party, ":var_51", ":var_1", ":var_49"),
                            (try_begin),
                                (ge, ":var_37", 0),
                                (store_distance_to_party_from_party, reg13, ":var_49", ":var_37"),
                            (else_try),
                                (assign, reg13, 0),
                            (try_end),
                            (store_sub, reg11, reg13, reg12),
                            (this_or_next|ge, reg11, 40),
                            (this_or_next|ge, ":var_51", ":var_52"),
                            (eq, ":var_49", ":var_37"),
                        (else_try),
                            (val_add, ":var_53", 1),
                        (try_end),
                    (try_end),
                    (try_begin),
                        (ge, ":var_53", 0),
                        (store_random_in_range, ":var_54", 0, ":var_53"),
                        (val_add, ":var_54", 1),
                        (assign, ":var_53", 0),
                        (try_for_range, ":var_49", "p_town_1_1", "p_village_1_1"),
                            (store_faction_of_party, ":var_50", ":var_49"),
                            (eq, ":var_50", ":var_2"),
                            (try_begin),
                                (neg|eq, ":var_49", ":var_37"),
                                (store_distance_to_party_from_party, ":var_51", ":var_1", ":var_49"),
                                (neg|ge, ":var_51", ":var_52"),
                                (try_begin),
                                    (ge, ":var_37", 0),
                                    (store_distance_to_party_from_party, reg13, ":var_49", ":var_37"),
                                (else_try),
                                    (assign, reg13, 0),
                                (try_end),
                                (store_sub, reg11, reg13, reg12),
                                (neg|ge, reg11, 40),
                                (val_sub, ":var_54", 1),
                                (eq, ":var_54", 0),
                                (assign, ":var_47", ":var_49"),
                            (try_end),
                        (try_end),
                    (try_end),
                (try_end),
                (assign, ":var_36", ":var_47"),
                (assign, ":var_38", 1),
            (try_end),
        (else_try),
            (is_between, ":var_19", "p_town_1_1", "p_salt_mine"),
            (party_get_position, pos1, ":var_1"),
            (party_get_position, pos2, ":var_19"),
            (get_distance_between_positions, ":var_51", pos1, pos2),
            (neg|gt, ":var_51", 3),
            (assign, ":var_36", -1),
        (try_end),
        (try_begin),
            (eq, ":var_36", -1),
            (assign, ":var_32", -1),
        (else_try),
            (assign, ":var_32", 16),
        (try_end),
        (assign, ":var_33", ":var_36"),
        (try_begin),
            (eq, ":var_0", "$g_talk_troop"),
            (try_begin),
                (eq, ":var_36", -1),
                (str_store_string, s14, "str_as_the_marshall_i_am_assembling_the_army_of_the_realm"),
            (else_try),
                (try_begin),
                    (eq, ":var_2", "$players_kingdom"),
                    (eq, ":var_38", 1),
                    (neg|gt, "$number_of_report_to_army_quest_notes", 13),
                    (check_quest_active, "qst_report_to_army"),
                    (str_store_party_name_link, s10, ":var_36"),
                    (faction_get_slot, ":var_55", ":var_2", slot_faction_marshall),
                    (str_store_troop_name_link, s11, ":var_55"),
                    (store_current_hours, ":var_56"),
                    (call_script, "script_game_get_date_text", 0, ":var_56"),
                    (str_store_string, s14, "str_as_the_marshall_i_am_assembling_the_army_of_the_realm_and_travel_to_lands_near_s10_to_inform_more_vassals"),
                    (str_store_string, s14, "@({s1}) {s11}: {s14}"),
                    (add_quest_note_from_sreg, "qst_report_to_army", "$number_of_report_to_army_quest_notes", 14, 0),
                    (val_add, "$number_of_report_to_army_quest_notes", 1),
                (try_end),
                (assign, reg0, ":var_36"),
                (str_store_party_name, s10, ":var_36"),
                (str_store_string, s14, "str_as_the_marshall_i_am_assembling_the_army_of_the_realm_and_travel_to_lands_near_s10_to_inform_more_vassals"),
            (try_end),
            (str_store_string, s16, "str_i_intend_to_assemble_the_army_of_the_realm"),
        (try_end),
    (else_try),
        (faction_slot_eq, ":var_2", slot_faction_marshall, ":var_0"),
        (faction_slot_eq, ":var_2", slot_faction_ai_state, 2),
        (faction_get_slot, ":var_57", ":var_2", slot_faction_ai_object),
        (assign, ":var_32", 1),
        (assign, ":var_33", ":var_57"),
        (try_begin),
            (eq, ":var_0", "$g_talk_troop"),
            (str_store_string, s14, "str_as_the_marshall_i_am_leading_the_siege"),
            (str_store_string, s16, "str_i_intend_to_begin_the_siege"),
        (try_end),
    (else_try),
        (faction_slot_eq, ":var_2", slot_faction_marshall, ":var_0"),
        (faction_slot_eq, ":var_2", slot_faction_ai_state, 3),
        (faction_get_slot, ":var_57", ":var_2", slot_faction_ai_object),
        (assign, ":var_32", 5),
        (assign, ":var_33", ":var_57"),
        (try_begin),
            (eq, ":var_0", "$g_talk_troop"),
            (str_store_string, s14, "str_as_the_marshall_i_am_leading_our_raid"),
            (str_store_string, s16, "str_i_intend_to_start_our_raid"),
        (try_end),
    (else_try),
        (faction_slot_eq, ":var_2", slot_faction_marshall, ":var_0"),
        (faction_slot_eq, ":var_2", slot_faction_ai_state, 5),
        (faction_get_slot, ":var_57", ":var_2", slot_faction_ai_object),
        (party_is_active, ":var_57"),
        (party_get_battle_opponent, ":var_4", ":var_57"),
        (try_begin),
            (gt, ":var_4", 0),
            (party_is_active, ":var_4"),
            (assign, ":var_32", 10),
            (assign, ":var_33", ":var_4"),
            (try_begin),
                (eq, ":var_0", "$g_talk_troop"),
                (str_store_string, s14, "str_as_the_marshall_i_am_leading_our_forces_to_engage_the_enemy_in_battle"),
                (str_store_string, s16, "str_i_intend_to_lead_our_forces_out_to_engage_the_enemy"),
            (try_end),
        (else_try),
            (assign, ":var_32", 4),
            (assign, ":var_33", ":var_57"),
            (try_begin),
                (eq, ":var_0", "$g_talk_troop"),
                (str_store_string, s14, "str_as_the_marshall_i_am_leading_our_forces_in_search_of_the_enemy"),
                (str_store_string, s16, "str_i_intend_to_lead_our_forces_out_to_find_the_enemy"),
            (try_end),
        (try_end),
    (else_try),
        (faction_slot_eq, ":var_2", slot_faction_marshall, ":var_0"),
        (faction_slot_eq, ":var_2", slot_faction_ai_state, 4),
        (faction_get_slot, ":var_57", ":var_2", slot_faction_ai_object),
        (party_is_active, ":var_57"),
        (assign, ":var_32", 10),
        (assign, ":var_33", ":var_57"),
        (try_begin),
            (eq, ":var_0", "$g_talk_troop"),
            (str_store_string, s14, "str_as_the_marshall_i_am_leading_our_forces_to_engage_the_enemy_in_battle"),
            (str_store_string, s16, "str_i_intend_to_lead_our_forces_out_to_engage_the_enemy"),
        (try_end),
    (else_try),
        (assign, ":var_58", 30),
        (call_script, "script_lord_get_home_center", ":var_0"),
        (assign, ":var_59", reg0),
        (gt, ":var_59", -1),
        (party_slot_eq, ":var_59", slot_town_lord, ":var_0"),
        (assign, ":var_60", 0),
        (party_get_position, pos0, ":var_59"),
        (party_get_position, pos1, ":var_1"),
        (get_distance_between_positions, ":var_51", pos0, pos1),
        (try_begin),
            (neg|gt, ":var_51", 9000),
            (store_div, ":var_60", ":var_51", 600),
            (store_sub, ":var_60", 15, ":var_60"),
        (else_try),
            (assign, ":var_60", 0),
        (try_end),
        (val_add, ":var_58", ":var_60"),
        (assign, ":var_61", 35),
        (try_begin),
            (this_or_next|faction_slot_eq, ":var_2", slot_faction_ai_state, 4),
            (this_or_next|faction_slot_eq, ":var_2", slot_faction_ai_state, 5),
            (this_or_next|faction_slot_eq, ":var_2", slot_faction_ai_state, 3),
            (this_or_next|faction_slot_eq, ":var_2", slot_faction_ai_state, 2),
            (faction_slot_eq, ":var_2", slot_faction_ai_state, 1),
            (assign, ":var_61", 0),
            (try_begin),
                (faction_slot_eq, ":var_2", slot_faction_marshall, "trp_player"),
                (game_get_reduce_campaign_ai, ":var_62"),
                (try_begin),
                    (eq, ":var_62", 0),
                    (assign, ":var_61", 0),
                (else_try),
                    (eq, ":var_62", 1),
                    (assign, ":var_61", -10),
                (else_try),
                    (eq, ":var_62", 2),
                    (assign, ":var_61", -15),
                (try_end),
            (try_end),
        (try_end),
        (val_add, ":var_58", ":var_61"),
        (val_max, ":var_58", 25),
        (neg|ge, ":var_7", ":var_58"),
        (try_begin),
            (store_div, ":var_63", ":var_58", 3),
            (ge, ":var_7", ":var_63"),
            (troop_get_slot, ":var_64", ":var_0", slot_troop_wealth),
            (neg|gt, ":var_64", 1800),
            (assign, ":var_31", 1),
        (try_end),
        (assign, ":var_32", 7),
        (assign, ":var_33", ":var_59"),
        (try_begin),
            (eq, ":var_0", "$g_talk_troop"),
            (str_store_string, s14, "str_i_dont_have_enough_troops_and_i_need_to_get_some_more"),
            (str_store_string, s16, "str_i_am_running_low_on_troops"),
        (try_end),
        (eq, ":var_31", 0),
    (else_try),
        (eq, ":var_31", 0),
        (party_slot_ge, ":var_1", slot_party_following_orders_of_troop, "trp_kingdom_heroes_including_player_begin"),
        (party_get_slot, ":var_65", ":var_1", slot_party_orders_type),
        (party_get_slot, ":var_66", ":var_1", slot_party_orders_object),
        (party_get_slot, ":var_67", ":var_1", slot_party_orders_time),
        (ge, ":var_66", 0),
        (store_current_hours, ":var_68"),
        (val_sub, ":var_68", ":var_67"),
        (party_is_active, ":var_66"),
        (party_get_slot, ":var_69", ":var_66", slot_village_state),
        (store_faction_of_party, ":var_70", ":var_66"),
        (store_relation, ":var_71", ":var_2", ":var_70"),
        (assign, ":var_72", 1),
        (try_begin),
            (gt, ":var_68", 48),
            (assign, ":var_72", 0),
        (else_try),
            (eq, ":var_65", 5),
            (this_or_next|ge, ":var_71", 0),
            (ge, ":var_69", 2),
            (assign, ":var_72", 0),
        (else_try),
            (eq, ":var_65", 1),
            (ge, ":var_71", 0),
            (assign, ":var_72", 0),
        (else_try),
            (this_or_next|eq, ":var_65", 7),
            (this_or_next|eq, ":var_65", 14),
            (this_or_next|eq, ":var_65", 11),
            (eq, ":var_65", 16),
            (neg|gt, ":var_71", 0),
            (assign, ":var_72", 0),
        (try_end),
        (eq, ":var_72", 1),
        (assign, ":var_32", ":var_65"),
        (assign, ":var_33", ":var_66"),
        (try_begin),
            (eq, ":var_0", "$g_talk_troop"),
            (str_store_string, s14, "str_we_are_following_your_direction"),
        (try_end),
    (else_try),
        (eq, ":var_31", 0),
        (eq, ":var_13", 0),
        (check_quest_active, "qst_wed_betrothed"),
        (quest_slot_eq, "qst_wed_betrothed", 6, ":var_0"),
        (quest_get_slot, ":var_73", "qst_wed_betrothed", 2),
        (call_script, "script_get_kingdom_lady_social_determinants", ":var_73"),
        (assign, ":var_74", reg1),
        (assign, ":var_32", 7),
        (assign, ":var_33", ":var_74"),
        (try_begin),
            (eq, ":var_0", "$g_talk_troop"),
            (str_store_string, s14, "str_i_need_to_make_preparations_for_your_wedding"),
            (str_store_string, s16, "str_after_all_i_need_to_make_preparations_for_your_wedding"),
        (try_end),
    (else_try),
        (eq, ":var_31", 0),
        (eq, ":var_13", 0),
        (check_quest_active, "qst_wed_betrothed_female"),
        (quest_slot_eq, "qst_wed_betrothed_female", 6, ":var_0"),
        (faction_slot_eq, ":var_2", slot_faction_ai_state, 6),
        (faction_get_slot, ":var_75", ":var_2", slot_faction_ai_object),
        (assign, ":var_32", 7),
        (assign, ":var_33", ":var_75"),
        (try_begin),
            (eq, ":var_0", "$g_talk_troop"),
            (str_store_string, s14, "str_i_am_heading_to_the_site_of_our_wedding"),
            (str_store_string, s16, "str_after_all_we_are_soon_to_be_wed"),
        (try_end),
    (else_try),
        (eq, ":var_31", 0),
        (eq, ":var_13", 0),
        (faction_slot_eq, ":var_2", slot_faction_ai_state, 6),
        (faction_get_slot, ":var_75", ":var_2", slot_faction_ai_object),
        (party_slot_eq, ":var_75", slot_town_lord, ":var_0"),
        (assign, ":var_32", 7),
        (assign, ":var_33", ":var_75"),
        (try_begin),
            (eq, ":var_0", "$g_talk_troop"),
            (str_store_string, s14, "str_i_am_hosting_a_feast_there"),
            (str_store_string, s16, "str_i_have_a_feast_to_host"),
        (try_end),
    (else_try),
        (eq, ":var_31", 0),
        (eq, ":var_13", 0),
        (faction_slot_eq, ":var_2", slot_faction_ai_state, 6),
        (troop_get_slot, ":var_76", ":var_0", slot_troop_betrothed),
        (is_between, ":var_76", "trp_knight_1_1_wife", "trp_heroes_end"),
        (faction_get_slot, ":var_75", ":var_2", slot_faction_ai_object),
        (assign, ":var_32", 7),
        (assign, ":var_33", ":var_75"),
        (try_begin),
            (eq, ":var_0", "$g_talk_troop"),
            (str_store_string, s14, "str_i_am_to_be_the_bridegroom_there"),
            (str_store_string, s16, "str_my_wedding_day_draws_near"),
        (try_end),
    (else_try),
        (eq, ":var_31", 0),
        (gt, ":var_8", 35),
        (eq, ":var_13", 0),
        (call_script, "script_lord_get_home_center", ":var_0"),
        (assign, ":var_59", reg0),
        (gt, ":var_59", -1),
        (assign, ":var_32", 7),
        (assign, ":var_33", ":var_59"),
        (try_begin),
            (eq, ":var_0", "$g_talk_troop"),
            (str_store_string, s14, "str_i_have_too_much_loot_and_too_many_prisoners_and_need_to_secure_them"),
            (str_store_string, s16, "str_i_should_think_of_dropping_off_some_of_my_prisoners"),
        (try_end),
    (else_try),
        (eq, ":var_31", 0),
        (assign, ":var_77", -1),
        (assign, ":var_78", 100),
        (eq, ":var_13", 0),
        (try_for_range, ":var_79", "p_town_1_1", "p_village_1_1"),
            (party_slot_eq, ":var_79", slot_town_lord, ":var_0"),
            (party_get_slot, ":var_80", ":var_79", slot_party_cached_strength),
            (neg|ge, ":var_80", ":var_78"),
            (assign, ":var_77", ":var_79"),
            (assign, ":var_78", ":var_80"),
        (try_end),
        (gt, ":var_77", -1),
        (assign, ":var_32", 7),
        (assign, ":var_33", ":var_77"),
        (try_begin),
            (eq, ":var_0", "$g_talk_troop"),
            (str_store_string, s14, "str_i_need_to_reinforce_it_as_it_is_poorly_garrisoned"),
            (str_store_string, s16, "str_there_is_a_hole_in_our_defenses"),
        (try_end),
    (else_try),
        (eq, ":var_31", 0),
        (eq, ":var_18", 12),
        (faction_get_slot, ":var_55", ":var_2", slot_faction_marshall),
        (ge, ":var_55", 0),
        (troop_get_slot, ":var_81", ":var_55", slot_troop_leaded_party),
        (party_is_active, ":var_81"),
        (call_script, "script_npc_decision_checklist_troop_follow_or_not", ":var_0"),
        (eq, reg0, 1),
        (assign, ":var_32", 12),
        (assign, ":var_33", ":var_81"),
        (try_begin),
            (eq, "$g_talk_troop", ":var_0"),
            (str_store_string, s14, "str_i_am_following_the_marshals_orders"),
            (str_store_string, s16, "str_the_marshal_has_given_me_this_command"),
        (try_end),
    (else_try),
        (faction_slot_eq, ":var_2", slot_faction_ai_state, 5),
        (is_between, ":var_57", "p_village_1_1", "p_salt_mine"),
        (call_script, "script_npc_decision_checklist_troop_follow_or_not", ":var_0"),
        (eq, reg0, 1),
        (faction_get_slot, ":var_57", ":var_2", slot_faction_ai_object),
        (party_get_slot, ":var_82", ":var_57", slot_village_raided_by),
        (party_is_active, ":var_82"),
        (party_get_slot, ":var_83", ":var_57", slot_center_sortie_enemy_strength),
        (neg|ge, ":var_83", 4000),
        (assign, ":var_32", 10),
        (assign, ":var_33", ":var_82"),
        (try_begin),
            (eq, ":var_0", "$g_talk_troop"),
            (str_store_string, s14, "str_our_realm_needs_my_support_there_is_enemy_raiding_one_of_our_villages_which_is_not_to_far_from_here_i_am_going_there"),
            (str_store_string, s16, "str_the_marshal_has_issued_a_summons"),
        (try_end),
    (else_try),
        (eq, ":var_31", 0),
        (call_script, "script_npc_decision_checklist_troop_follow_or_not", ":var_0"),
        (eq, reg0, 1),
        (faction_get_slot, ":var_55", ":var_2", slot_faction_marshall),
        (ge, ":var_55", 0),
        (troop_get_slot, ":var_81", ":var_55", slot_troop_leaded_party),
        (assign, ":var_32", 11),
        (assign, ":var_33", ":var_81"),
        (try_begin),
            (eq, "$g_talk_troop", ":var_0"),
            (str_store_string, s14, "str_i_am_answering_the_marshals_summons"),
            (str_store_string, s16, "str_the_marshal_has_issued_a_summons"),
        (try_end),
    (else_try),
        (eq, ":var_31", 0),
        (eq, ":var_10", 1),
        (assign, ":var_84", -1),
        (try_for_range, ":var_85", "trp_npc1", "trp_knight_1_1_wife"),
            (troop_slot_eq, ":var_85", slot_troop_occupation, 2),
            (store_troop_faction, ":var_86", ":var_85"),
            (eq, ":var_86", ":var_2"),
            (neg|eq, ":var_85", ":var_0"),
            (troop_get_slot, ":var_87", ":var_85", slot_troop_leaded_party),
            (gt, ":var_87", 1),
            (party_is_active, ":var_87"),
            (this_or_next|party_slot_eq, ":var_87", slot_party_ai_state, 5),
            (party_slot_eq, ":var_87", slot_party_ai_state, 1),
            (call_script, "script_troop_get_relation_with_troop", ":var_0", ":var_85"),
            (gt, reg0, 4),
            (troop_get_slot, ":var_88", ":var_0", slot_troop_renown),
            (troop_get_slot, ":var_89", ":var_85", slot_troop_renown),
            (neg|gt, ":var_88", ":var_89"),
            (store_distance_to_party_from_party, ":var_16", ":var_1", ":var_87"),
            (neg|ge, ":var_16", 5),
            (assign, ":var_84", ":var_87"),
        (try_end),
        (gt, ":var_84", 0),
        (assign, ":var_32", 11),
        (assign, ":var_33", ":var_84"),
        (try_begin),
            (eq, ":var_0", "$g_talk_troop"),
            (party_stack_get_troop_id, ":var_90", ":var_33", 0),
            (str_store_troop_name, s10, ":var_90"),
            (call_script, "script_troop_get_family_relation_to_troop", ":var_90", "$g_talk_troop"),
            (try_begin),
                (eq, reg0, 0),
                (str_store_string, s11, "str_comradeinarms"),
            (try_end),
            (str_store_string, s14, "str_i_am_supporting_my_s11_s10"),
            (str_store_string, s16, "str_i_believe_that_one_of_my_comrades_is_in_need"),
        (try_end),
    (else_try),
        (eq, ":var_31", 0),
        (eq, ":var_10", 1),
        (eq, ":var_13", 0),
        (assign, ":var_91", -1),
        (assign, ":var_92", 50),
        (try_for_range, ":var_79", "p_town_1_1", "p_village_1_1"),
            (store_faction_of_party, ":var_93", ":var_79"),
            (store_relation, ":var_12", ":var_2", ":var_93"),
            (neg|ge, ":var_12", 0),
            (party_get_slot, ":var_94", ":var_79", slot_party_cached_strength),
            (val_mul, ":var_94", 3),
            (val_mul, ":var_94", 2),
            (neg|ge, ":var_94", ":var_20"),
            (neg|ge, ":var_94", 750),
            (party_slot_eq, ":var_79", slot_village_state, 0),
            (store_distance_to_party_from_party, ":var_16", ":var_79", ":var_1"),
            (neg|ge, ":var_16", ":var_92"),
            (assign, ":var_91", ":var_79"),
            (assign, ":var_92", ":var_16"),
        (try_end),
        (is_between, ":var_91", "p_town_1_1", "p_salt_mine"),
        (assign, ":var_32", 1),
        (assign, ":var_33", ":var_91"),
        (try_begin),
            (eq, "$cheat_mode", 1),
            (str_store_faction_name, s20, ":var_2"),
            (str_store_party_name, s21, ":var_33"),
            (display_message, "str_s20_decided_to_attack_s21"),
        (try_end),
        (try_begin),
            (eq, ":var_0", "$g_talk_troop"),
            (str_store_string, s14, "str_a_fortress_is_vulnerable"),
            (str_store_string, s16, "str_i_believe_that_the_enemy_may_be_vulnerable"),
        (try_end),
    (else_try),
        (assign, ":var_95", -1),
        (assign, ":var_96", 300),
        (troop_get_slot, ":var_64", ":var_0", slot_troop_wealth),
        (val_div, ":var_64", 10),
        (val_add, ":var_96", ":var_64"),
        (eq, ":var_13", 0),
        (try_begin),
            (faction_get_slot, ":var_55", ":var_2", slot_faction_marshall),
            (assign, reg17, 0),
            (try_begin),
                (party_slot_eq, ":var_1", slot_party_ai_state, 11),
                (party_slot_eq, ":var_1", slot_party_ai_object, ":var_55"),
                (assign, reg17, 1),
            (else_try),
                (party_slot_eq, ":var_1", slot_party_following_player, 1),
                (assign, reg17, 1),
            (try_end),
            (eq, reg17, 1),
            (try_begin),
                (neg|eq, ":var_55", "trp_player"),
                (neg|party_slot_eq, ":var_1", slot_party_following_player, 1),
                (val_add, ":var_96", 125),
            (else_try),
                (val_add, ":var_96", 250),
            (try_end),
        (try_end),
        (try_for_range, ":var_49", "p_town_1_1", "p_salt_mine"),
            (party_slot_eq, ":var_49", slot_town_lord, ":var_0"),
            (assign, reg17, 0),
            (try_begin),
                (is_between, ":var_49", "p_village_1_1", "p_salt_mine"),
                (party_slot_eq, ":var_49", slot_village_state, 0),
                (assign, reg17, 1),
            (else_try),
                (party_slot_eq, ":var_49", slot_center_is_besieged_by, -1),
                (assign, reg17, 1),
            (try_end),
            (eq, reg17, 1),
            (party_get_slot, ":var_97", ":var_49", slot_center_accumulated_tariffs),
            (party_get_slot, ":var_98", ":var_49", slot_center_accumulated_rents),
            (store_add, ":var_99", ":var_98", ":var_97"),
            (gt, ":var_99", ":var_96"),
            (assign, ":var_95", ":var_49"),
            (assign, ":var_96", ":var_99"),
        (try_end),
        (is_between, ":var_95", "p_town_1_1", "p_salt_mine"),
        (try_begin),
            (is_between, ":var_95", "p_town_1_1", "p_village_1_1"),
            (assign, ":var_32", 7),
            (assign, ":var_33", ":var_95"),
        (else_try),
            (assign, ":var_32", 16),
            (assign, ":var_33", ":var_95"),
        (try_end),
        (try_begin),
            (eq, ":var_0", "$g_talk_troop"),
            (str_store_string, s14, "str_i_need_to_inspect_my_properties_and_collect_my_dues"),
            (str_store_string, s16, "str_it_has_been_too_long_since_i_have_inspected_my_estates"),
        (try_end),
    (else_try),
        (eq, ":var_31", 0),
        (this_or_next|gt, ":var_21", 504),
        (neg|ge, ":var_30", 25),
        (gt, ":var_21", 168),
        (eq, ":var_13", 0),
        (call_script, "script_lord_get_home_center", ":var_0"),
        (assign, ":var_59", reg0),
        (gt, ":var_59", -1),
        (assign, ":var_32", 7),
        (assign, ":var_33", ":var_59"),
        (try_begin),
            (eq, ":var_0", "$g_talk_troop"),
            (str_store_string, s14, "str_my_men_are_weary_so_we_are_returning_home"),
            (str_store_string, s16, "str_my_men_are_becoming_weary"),
        (try_end),
    (else_try),
        (eq, ":var_31", 0),
        (this_or_next|gt, ":var_25", 12),
        (neg|ge, ":var_21", 96),
        (eq, ":var_13", 0),
        (eq, ":var_10", 1),
        (this_or_next|eq, ":var_17", 5),
        (eq, ":var_17", 2),
        (assign, ":var_100", -1),
        (assign, ":var_96", 0),
        (try_for_range, ":var_101", "p_village_1_1", "p_salt_mine"),
            (store_faction_of_party, ":var_102", ":var_101"),
            (store_relation, ":var_12", ":var_102", ":var_2"),
            (neg|ge, ":var_12", 0),
            (neg|party_slot_ge, ":var_101", slot_village_state, 2),
            (party_get_slot, ":var_103", ":var_101", slot_town_lord),
            (call_script, "script_troop_get_relation_with_troop", ":var_0", ":var_103"),
            (assign, ":var_104", reg0),
            (neg|ge, ":var_104", ":var_96"),
            (assign, ":var_96", ":var_104"),
            (assign, ":var_100", ":var_101"),
        (try_end),
        (is_between, ":var_100", "p_town_1_1", "p_salt_mine"),
        (assign, ":var_32", 5),
        (assign, ":var_33", ":var_100"),
        (try_begin),
            (eq, ":var_0", "$g_talk_troop"),
            (str_store_string, s14, "str_i_have_a_score_to_settle_with_the_lord_there"),
            (str_store_string, s16, "str_i_am_thinking_of_settling_an_old_score"),
        (try_end),
    (else_try),
        (eq, ":var_31", 0),
        (eq, ":var_10", 1),
        (eq, ":var_13", 0),
        (this_or_next|gt, ":var_25", 12),
        (neg|ge, ":var_21", 96),
        (gt, ":var_30", 40),
        (this_or_next|eq, ":var_17", 5),
        (this_or_next|eq, ":var_17", 3),
        (this_or_next|eq, ":var_17", 4),
        (eq, ":var_17", 2),
        (troop_get_slot, ":var_105", ":var_0", slot_troop_wealth),
        (neg|ge, ":var_105", 500),
        (assign, ":var_96", 0),
        (assign, ":var_100", -1),
        (try_for_range, ":var_101", "p_village_1_1", "p_salt_mine"),
            (store_faction_of_party, ":var_102", ":var_101"),
            (store_relation, ":var_12", ":var_102", ":var_2"),
            (neg|ge, ":var_12", 0),
            (this_or_next|party_slot_eq, ":var_101", slot_village_state, 0),
            (party_slot_eq, ":var_101", slot_village_state, 1),
            (party_get_slot, reg17, ":var_101", slot_town_prosperity),
            (store_distance_to_party_from_party, ":var_16", ":var_1", ":var_101"),
            (val_sub, reg17, ":var_16"),
            (gt, reg17, ":var_96"),
            (assign, ":var_96", reg17),
            (assign, ":var_100", ":var_101"),
        (try_end),
        (gt, ":var_100", -1),
        (assign, ":var_32", 5),
        (assign, ":var_33", ":var_100"),
        (try_begin),
            (eq, ":var_0", "$g_talk_troop"),
            (str_store_string, s14, "str_i_am_short_of_money_and_i_hear_that_there_is_much_wealth_there"),
            (str_store_string, s16, "str_i_need_to_refill_my_purse_preferably_with_the_enemys_money"),
        (try_end),
    (else_try),
        (eq, ":var_31", 0),
        (eq, ":var_10", 1),
        (eq, ":var_13", 0),
        (gt, ":var_30", 65),
        (assign, ":var_96", 0),
        (assign, ":var_100", -1),
        (try_for_range, ":var_101", "p_village_1_1", "p_salt_mine"),
            (store_faction_of_party, ":var_102", ":var_101"),
            (store_relation, ":var_12", ":var_102", ":var_2"),
            (neg|ge, ":var_12", 0),
            (neg|party_slot_eq, ":var_101", slot_village_state, 2),
            (party_get_slot, ":var_106", ":var_101", slot_town_prosperity),
            (val_mul, ":var_106", 2),
            (store_distance_to_party_from_party, ":var_16", ":var_1", ":var_101"),
            (val_sub, ":var_106", ":var_16"),
            (gt, ":var_106", ":var_96"),
            (assign, ":var_96", ":var_106"),
            (assign, ":var_100", ":var_101"),
        (try_end),
        (gt, ":var_100", -1),
        (assign, ":var_32", 5),
        (assign, ":var_33", ":var_100"),
        (try_begin),
            (eq, ":var_0", "$g_talk_troop"),
            (str_store_string, s14, "str_by_striking_at_the_enemys_richest_lands_perhaps_i_can_draw_them_out_to_battle"),
            (str_store_string, s16, "str_i_am_thinking_of_going_on_the_attack"),
        (try_end),
    (else_try),
        (eq, ":var_31", 0),
        (eq, ":var_17", 7),
        (eq, ":var_10", 1),
        (eq, ":var_13", 0),
        (assign, ":var_107", -1),
        (try_for_range, ":var_108", "fac_player_supporters_faction", "fac_kingdoms_end"),
            (store_relation, ":var_12", ":var_2", ":var_108"),
            (neg|ge, ":var_12", 0),
            (faction_slot_eq, ":var_108", slot_faction_state, 0),
            (store_add, ":var_109", ":var_108", 220),
            (val_sub, ":var_109", "fac_player_supporters_faction"),
            (faction_get_slot, ":var_110", ":var_2", ":var_109"),
            (store_add, ":var_111", ":var_2", 220),
            (val_sub, ":var_111", "fac_player_supporters_faction"),
            (faction_get_slot, ":var_112", ":var_108", ":var_111"),
            (gt, ":var_110", 80),
            (neg|ge, ":var_110", ":var_112"),
            (assign, ":var_107", ":var_108"),
        (try_end),
        (gt, ":var_107", -1),
        (assign, ":var_100", -1),
        (assign, ":var_96", 50),
        (try_for_range, ":var_113", "p_village_1_1", "p_salt_mine"),
            (store_faction_of_party, ":var_102", ":var_113"),
            (eq, ":var_102", ":var_107"),
            (neg|party_slot_eq, ":var_113", slot_village_state, 2),
            (store_distance_to_party_from_party, ":var_16", ":var_1", ":var_113"),
            (neg|ge, ":var_16", ":var_96"),
            (assign, ":var_96", ":var_16"),
            (assign, ":var_100", ":var_113"),
        (try_end),
        (gt, ":var_100", -1),
        (assign, ":var_32", 5),
        (assign, ":var_33", ":var_100"),
        (try_begin),
            (eq, ":var_0", "$g_talk_troop"),
            (str_store_string, s14, "str_perhaps_if_i_strike_one_more_blow_we_may_end_this_war_on_our_terms_"),
            (str_store_string, s16, "str_we_may_be_able_to_bring_this_war_to_a_close_with_a_few_more_blows"),
        (try_end),
    (else_try),
        (eq, ":var_31", 0),
        (faction_slot_eq, ":var_2", slot_faction_ai_state, 6),
        (faction_get_slot, ":var_75", ":var_2", slot_faction_ai_object),
        (party_get_slot, ":var_114", ":var_75", slot_town_lord),
        (eq, ":var_13", 0),
        (call_script, "script_troop_get_relation_with_troop", ":var_0", ":var_114"),
        (assign, ":var_115", reg0),
        (ge, ":var_115", 0),
        (assign, ":var_32", 7),
        (assign, ":var_33", ":var_75"),
        (try_begin),
            (eq, ":var_0", "$g_talk_troop"),
            (str_store_string, s14, "str_i_wish_to_attend_the_feast_there"),
            (str_store_string, s16, "str_there_is_a_feast_which_i_wish_to_attend"),
        (try_end),
    (else_try),
        (eq, ":var_31", 0),
        (neg|troop_slot_eq, "trp_player", slot_troop_betrothed, ":var_0"),
        (troop_slot_eq, ":var_0", slot_troop_spouse, -1),
        (neg|is_between, ":var_0", "trp_kingdom_1_lord", "trp_knight_1_1"),
        (neg|is_between, ":var_0", "trp_kingdom_4_pretender", "trp_knight_1_1_wife"),
        (gt, ":var_27", 72),
        (eq, ":var_13", 0),
        (assign, ":var_95", -1),
        (assign, ":var_96", 150),
        (try_for_range, ":var_116", 35, 38),
            (troop_get_slot, ":var_117", ":var_0", ":var_116"),
            (is_between, ":var_117", "trp_knight_1_1_wife", "trp_heroes_end"),
            (troop_get_slot, ":var_118", ":var_117", slot_troop_cur_center),
            (is_between, ":var_118", "p_town_1_1", "p_salt_mine"),
            (store_faction_of_party, ":var_119", ":var_118"),
            (eq, ":var_2", ":var_119"),
            (store_distance_to_party_from_party, ":var_16", ":var_1", ":var_118"),
            (neg|ge, ":var_16", ":var_96"),
            (assign, ":var_95", ":var_118"),
            (assign, ":var_96", ":var_16"),
        (try_end),
        (gt, ":var_95", -1),
        (assign, ":var_32", 7),
        (assign, ":var_33", ":var_95"),
        (try_begin),
            (eq, ":var_0", "$g_talk_troop"),
            (str_store_string, s14, "str_there_is_a_fair_lady_there_whom_i_wish_to_court"),
            (str_store_string, s16, "str_i_have_the_inclination_to_pay_court_to_a_fair_lady"),
        (try_end),
    (else_try),
        (eq, ":var_31", 0),
        (assign, ":var_14", -1),
        (assign, ":var_96", 60),
        (eq, ":var_13", 0),
        (gt, ":var_30", 40),
        (try_for_range, ":var_120", "p_town_1_1", "p_salt_mine"),
            (store_faction_of_party, ":var_50", ":var_120"),
            (eq, ":var_50", ":var_2"),
            (party_slot_ge, ":var_120", slot_center_last_spotted_enemy, 0),
            (party_get_slot, ":var_121", ":var_120", slot_center_sortie_strength),
            (party_get_slot, ":var_122", ":var_120", slot_center_sortie_enemy_strength),
            (store_mul, ":var_123", ":var_122", 14),
            (val_div, ":var_123", 10),
            (party_get_slot, ":var_124", ":var_1", slot_party_cached_strength),
            (this_or_next|neg|party_is_in_town, ":var_1", ":var_120"),
            (gt, ":var_121", ":var_123"),
            (ge, ":var_124", 100),
            (party_get_slot, reg17, ":var_120", slot_town_lord),
            (call_script, "script_troop_get_relation_with_troop", reg17, ":var_0"),
            (this_or_next|eq, ":var_17", 7),
            (gt, reg0, -5),
            (store_distance_to_party_from_party, ":var_16", ":var_1", ":var_120"),
            (neg|ge, ":var_16", ":var_96"),
            (assign, ":var_14", ":var_120"),
            (assign, ":var_96", ":var_16"),
        (try_end),
        (is_between, ":var_14", "p_town_1_1", "p_salt_mine"),
        (assign, ":var_32", 4),
        (assign, ":var_33", ":var_14"),
        (try_begin),
            (eq, ":var_0", "$g_talk_troop"),
            (str_store_string, s14, "str_we_have_heard_reports_that_the_enemy_is_in_the_area"),
            (str_store_string, s16, "str_i_have_heard_reports_of_enemy_incursions_into_our_territory"),
        (try_end),
    (else_try),
        (eq, ":var_31", 0),
        (gt, ":var_23", 168),
        (eq, ":var_13", 0),
        (call_script, "script_lord_get_home_center", ":var_0"),
        (assign, ":var_59", reg0),
        (gt, ":var_59", -1),
        (assign, ":var_32", 7),
        (assign, ":var_33", ":var_59"),
        (try_begin),
            (eq, ":var_0", "$g_talk_troop"),
            (str_store_string, s14, "str_i_need_to_spend_some_time_with_my_household"),
            (str_store_string, s16, "str_it_has_been_a_long_time_since_i_have_been_able_to_spend_time_with_my_household"),
        (try_end),
    (else_try),
        (eq, ":var_31", 0),
        (eq, ":var_10", 1),
        (gt, ":var_30", 65),
        (eq, ":var_13", 0),
        (assign, ":var_120", -1),
        (assign, ":var_96", 75),
        (try_for_range, ":var_125", "p_village_1_1", "p_salt_mine"),
            (store_faction_of_party, ":var_102", ":var_125"),
            (store_relation, ":var_12", ":var_102", ":var_2"),
            (neg|ge, ":var_12", 0),
            (store_distance_to_party_from_party, ":var_16", ":var_125", ":var_1"),
            (neg|ge, ":var_16", ":var_96"),
            (assign, ":var_96", ":var_16"),
            (assign, ":var_120", ":var_125"),
        (try_end),
        (is_between, ":var_120", "p_village_1_1", "p_salt_mine"),
        (assign, ":var_32", 4),
        (assign, ":var_33", ":var_120"),
        (try_begin),
            (eq, ":var_0", "$g_talk_troop"),
            (str_store_string, s14, "str_i_am_watching_the_borders"),
            (str_store_string, s16, "str_i_may_be_needed_to_watch_the_borders"),
        (try_end),
    (else_try),
        (eq, 1, 0),
    (else_try),
        (eq, ":var_31", 0),
        (call_script, "script_lord_get_home_center", ":var_0"),
        (assign, ":var_59", reg0),
        (is_between, ":var_59", "p_town_1_1", "p_salt_mine"),
        (eq, ":var_13", 0),
        (assign, ":var_32", 4),
        (assign, ":var_33", ":var_59"),
        (try_begin),
            (eq, ":var_0", "$g_talk_troop"),
            (str_store_string, s14, "str_i_will_guard_the_areas_near_my_home"),
            (str_store_string, s16, "str_i_am_perhaps_needed_most_at_home"),
        (try_end),
    (else_try),
        (eq, ":var_31", 0),
        (eq, ":var_13", 0),
        (call_script, "script_lord_get_home_center", ":var_0"),
        (assign, ":var_59", reg0),
        (is_between, ":var_59", "p_town_1_1", "p_village_1_1"),
        (assign, ":var_32", 7),
        (assign, ":var_33", ":var_59"),
        (try_begin),
            (eq, ":var_0", "$g_talk_troop"),
            (str_store_string, s14, "str_i_cant_think_of_anything_better_to_do"),
        (try_end),
    (else_try),
        (eq, ":var_31", 0),
        (eq, ":var_13", 1),
        (party_get_slot, ":var_32", ":var_1", slot_party_ai_state),
        (party_get_slot, ":var_33", ":var_1", slot_party_ai_object),
        (try_begin),
            (eq, ":var_0", "$g_talk_troop"),
            (str_store_string, s14, "str_i_am_completing_what_i_have_already_begun"),
        (try_end),
    (else_try),
        (eq, ":var_31", 0),
        (assign, ":var_32", -1),
        (assign, ":var_33", -1),
        (try_begin),
            (eq, ":var_0", "$g_talk_troop"),
            (str_store_string, s14, "str_i_dont_even_have_a_home_to_which_to_return"),
        (try_end),
    (try_end),
    (try_begin),
        (eq, "$cheat_mode", 2),
        (str_store_troop_name, s10, ":var_0"),
        (display_message, "str_debug__s10_decides_s14_faction_ai_s15"),
    (try_end),
    (assign, reg0, ":var_32"),
    (assign, reg1, ":var_33"),

]),

("npc_decision_checklist_troop_follow_or_not",
[
    (store_script_param, ":var_0", 1),
    (store_troop_faction, ":var_1", ":var_0"),
    (faction_get_slot, ":var_2", ":var_1", slot_faction_ai_state),
    (troop_get_slot, ":var_3", ":var_0", slot_lord_reputation_type),
    (faction_get_slot, ":var_4", ":var_1", slot_faction_marshall),
    (assign, ":var_5", 0),
    (try_begin),
        (eq, ":var_4", -1),
        (try_begin),
            (eq, ":var_0", "$g_talk_troop"),
            (str_store_string, s15, "str__i_am_acting_independently_because_no_marshal_is_appointed"),
        (try_end),
    (else_try),
        (troop_get_slot, ":var_6", ":var_4", slot_troop_leaded_party),
        (neg|party_is_active, ":var_6"),
        (try_begin),
            (eq, ":var_0", "$g_talk_troop"),
            (str_store_string, s15, "str__i_am_acting_independently_because_our_marshal_is_currently_indisposed"),
        (try_end),
    (else_try),
        (neg|eq, ":var_2", 2),
        (neg|eq, ":var_2", 3),
        (neg|eq, ":var_2", 5),
        (neg|eq, ":var_2", 4),
        (neg|eq, ":var_2", 1),
        (try_begin),
            (eq, ":var_0", "$g_talk_troop"),
            (str_store_string, s15, "str__i_am_acting_independently_because_our_realm_is_currently_not_on_campaign"),
        (try_end),
    (else_try),
        (call_script, "script_troop_get_relation_with_troop", ":var_0", ":var_4"),
        (assign, ":var_7", reg0),
        (try_begin),
            (neg|gt, ":var_7", -10),
            (assign, ":var_8", 10000),
        (else_try),
            (store_mul, ":var_8", ":var_7", -1000),
        (try_end),
        (val_add, ":var_8", 1500),
        (game_get_reduce_campaign_ai, ":var_9"),
        (try_begin),
            (neg|eq, ":var_1", "$players_kingdom"),
            (try_begin),
                (eq, ":var_9", 0),
                (val_add, ":var_8", -1250),
            (else_try),
                (eq, ":var_9", 1),
            (else_try),
                (eq, ":var_9", 2),
                (val_add, ":var_8", 1250),
            (try_end),
        (else_try),
            (faction_slot_eq, ":var_1", slot_faction_marshall, "trp_player"),
            (try_begin),
                (eq, ":var_9", 0),
                (val_add, ":var_8", -1000),
            (else_try),
                (eq, ":var_9", 1),
                (val_add, ":var_8", -1500),
            (else_try),
                (eq, ":var_9", 2),
                (val_add, ":var_8", -2000),
            (try_end),
        (try_end),
        (troop_get_slot, ":var_10", ":var_0", slot_troop_temp_decision_seed),
        (neg|gt, ":var_10", ":var_8"),
        (try_begin),
            (eq, ":var_0", "$g_talk_troop"),
            (str_store_string, s15, "str__i_am_not_accompanying_the_marshal_because_i_fear_that_he_may_lead_us_into_disaster"),
        (try_end),
    (else_try),
        (troop_get_slot, ":var_11", ":var_4", slot_troop_prisoner_of_party),
        (neg|ge, ":var_7", 0),
        (ge, ":var_11", 50),
        (try_begin),
            (eq, ":var_0", "$g_talk_troop"),
            (str_store_string, s15, "str_i_am_not_accompanying_the_marshal_because_i_question_his_judgment"),
        (try_end),
    (else_try),
        (troop_get_slot, ":var_11", ":var_4", slot_troop_prisoner_of_party),
        (neg|faction_slot_eq, ":var_1", slot_faction_leader, ":var_4"),
        (neg|ge, ":var_7", 5),
        (ge, ":var_11", 80),
        (try_begin),
            (eq, ":var_0", "$g_talk_troop"),
            (str_store_string, s15, "str_i_am_not_accompanying_the_marshal_because_will_be_reappointment"),
        (try_end),
    (else_try),
        (store_sub, ":var_12", 50, ":var_7"),
        (store_mul, ":var_8", ":var_12", 70),
        (game_get_reduce_campaign_ai, ":var_9"),
        (try_begin),
            (neg|eq, ":var_1", "$players_kingdom"),
            (try_begin),
                (eq, ":var_9", 0),
                (val_add, ":var_8", -1200),
            (else_try),
                (eq, ":var_9", 1),
            (else_try),
                (eq, ":var_9", 2),
                (val_add, ":var_8", 1200),
            (try_end),
        (else_try),
            (eq, ":var_4", "trp_player"),
            (try_begin),
                (eq, ":var_9", 0),
                (val_add, ":var_8", -1000),
            (else_try),
                (eq, ":var_9", 1),
                (val_add, ":var_8", -1500),
            (else_try),
                (eq, ":var_9", 2),
                (val_add, ":var_8", -2000),
            (try_end),
        (try_end),
        (try_begin),
            (eq, ":var_3", 3),
            (val_add, ":var_8", 1500),
        (else_try),
            (this_or_next|eq, ":var_3", 1),
            (this_or_next|eq, ":var_3", 8),
            (eq, ":var_3", 2),
            (val_add, ":var_8", 1000),
        (else_try),
            (eq, ":var_3", 4),
            (val_add, ":var_8", 500),
        (else_try),
            (eq, ":var_3", 7),
        (else_try),
            (this_or_next|eq, ":var_3", 9),
            (eq, ":var_3", 6),
            (val_add, ":var_8", -500),
        (else_try),
            (eq, ":var_3", 10),
            (val_add, ":var_8", -1000),
        (try_end),
        (try_begin),
            (troop_slot_eq, ":var_4", slot_lord_reputation_type, 2),
            (val_add, ":var_8", -750),
        (else_try),
            (this_or_next|troop_slot_eq, ":var_4", slot_lord_reputation_type, 1),
            (troop_slot_eq, ":var_4", slot_lord_reputation_type, 7),
            (val_add, ":var_8", -250),
        (try_end),
        (val_add, ":var_8", 2000),
        (try_begin),
            (ge, "$feudal_inefficency", 1),
            (neg|eq, ":var_4", "trp_player"),
            (store_mul, ":var_13", 1500, "$feudal_inefficency"),
            (val_add, ":var_8", ":var_13"),
        (try_end),
        (troop_get_slot, ":var_10", ":var_0", slot_troop_temp_decision_seed),
        (neg|gt, ":var_10", ":var_8"),
        (try_begin),
            (eq, ":var_0", "$g_talk_troop"),
            (str_store_string, s15, "str_i_am_not_accompanying_the_marshal_because_i_can_do_greater_deeds"),
        (try_end),
    (else_try),
        (store_current_hours, ":var_14"),
        (faction_get_slot, ":var_15", ":var_1", slot_faction_ai_last_rest_time),
        (val_sub, ":var_14", ":var_15"),
        (assign, ":var_16", 360),
        (store_mul, ":var_17", ":var_7", 6),
        (val_add, ":var_16", ":var_17"),
        (try_begin),
            (eq, ":var_3", 7),
            (val_mul, ":var_16", 4),
            (val_div, ":var_16", 3),
        (try_end),
        (str_store_troop_name, s16, ":var_4"),
        (gt, ":var_14", ":var_16"),
        (try_begin),
            (eq, ":var_0", "$g_talk_troop"),
            (str_store_string, s15, "str__s16_has_kept_us_on_campaign_on_far_too_long_and_there_are_other_pressing_matters_to_which_i_must_attend"),
        (try_end),
    (else_try),
        (troop_get_slot, ":var_18", ":var_0", slot_troop_leaded_party),
        (neg|party_is_active, ":var_18"),
    (else_try),
        (troop_get_slot, ":var_19", ":var_4", slot_troop_leaded_party),
        (assign, ":var_20", 40),
        (try_begin),
            (faction_slot_eq, ":var_1", slot_faction_ai_state, 1),
            (assign, ":var_20", 50),
        (try_end),
        (game_get_reduce_campaign_ai, ":var_9"),
        (try_begin),
            (neg|eq, ":var_1", "fac_player_supporters_faction"),
            (neg|eq, ":var_1", "$players_kingdom"),
            (try_begin),
                (eq, ":var_9", 2),
                (try_begin),
                    (faction_slot_eq, ":var_1", slot_faction_ai_state, 1),
                    (val_add, ":var_20", -10),
                (else_try),
                    (val_add, ":var_20", -8),
                (try_end),
            (else_try),
                (eq, ":var_9", 1),
                (try_begin),
                    (faction_slot_eq, ":var_1", slot_faction_ai_state, 1),
                    (val_add, ":var_20", -5),
                (else_try),
                    (val_add, ":var_20", -4),
                (try_end),
            (try_end),
        (else_try),
            (try_begin),
                (eq, ":var_9", 2),
                (try_begin),
                    (faction_slot_eq, ":var_1", slot_faction_ai_state, 1),
                    (val_add, ":var_20", 25),
                (else_try),
                    (val_add, ":var_20", 20),
                (try_end),
            (else_try),
                (eq, ":var_9", 1),
                (try_begin),
                    (faction_slot_eq, ":var_1", slot_faction_ai_state, 1),
                    (val_add, ":var_20", 15),
                (else_try),
                    (val_add, ":var_20", 12),
                (try_end),
            (else_try),
                (eq, ":var_9", 0),
                (try_begin),
                    (faction_slot_eq, ":var_1", slot_faction_ai_state, 1),
                    (val_add, ":var_20", 5),
                (else_try),
                    (val_add, ":var_20", 4),
                (try_end),
            (try_end),
        (try_end),
        (faction_get_slot, ":var_21", ":var_1", slot_faction_ai_object),
        (assign, reg17, 0),
        (try_begin),
            (try_begin),
                (neg|is_between, ":var_21", "p_village_1_1", "p_salt_mine"),
                (assign, reg17, 1),
            (try_end),
            (try_begin),
                (neg|faction_slot_eq, ":var_1", slot_faction_ai_state, 5),
                (assign, reg17, 1),
            (try_end),
            (eq, reg17, 1),
            (store_distance_to_party_from_party, ":var_22", ":var_19", ":var_18"),
            (gt, ":var_22", ":var_20"),
            (try_begin),
                (eq, ":var_0", "$g_talk_troop"),
                (str_store_string, s15, "str__i_am_not_participating_in_the_marshals_campaign_because_i_do_not_know_where_to_find_our_main_army"),
            (try_end),
        (else_try),
            (eq, reg17, 0),
            (assign, reg17, 1),
            (try_begin),
                (party_slot_eq, ":var_18", slot_party_ai_state, 11),
                (party_slot_eq, ":var_18", slot_party_ai_object, ":var_19"),
                (assign, reg17, 0),
            (try_end),
            (eq, reg17, 1),
            (party_get_slot, ":var_23", ":var_21", slot_center_sortie_enemy_strength),
            (try_begin),
                (ge, ":var_23", 4000),
                (val_sub, ":var_23", 4000),
                (store_div, ":var_20", ":var_23", 200),
                (val_add, ":var_20", 70),
            (else_try),
                (store_div, ":var_20", ":var_23", 100),
                (val_add, ":var_20", 30),
            (try_end),
            (store_distance_to_party_from_party, ":var_22", ":var_21", ":var_18"),
            (gt, ":var_22", ":var_20"),
            (try_begin),
                (eq, ":var_0", "$g_talk_troop"),
                (str_store_string, s15, "str__i_am_acting_independently_although_some_enemies_have_been_spotted_within_our_borders_they_havent_come_in_force_and_the_local_troops_should_be_able_to_dispatch_them"),
            (try_end),
        (try_end),
        (gt, ":var_22", ":var_20"),
    (else_try),
        (try_begin),
            (eq, ":var_0", "$g_talk_troop"),
            (str_store_string, s15, "str__the_needs_of_the_realm_must_come_first"),
        (try_end),
        (assign, ":var_5", 1),
    (try_end),
    (assign, reg0, ":var_5"),

]),

("find_total_prosperity_score",
[
    (store_script_param, ":var_0", 1),
    (try_begin),
        (is_between, ":var_0", "p_town_1_1", "p_village_1_1"),
        (party_get_slot, ":var_1", ":var_0", slot_town_prosperity),
        (store_add, ":var_2", ":var_1", 200),
        (val_div, ":var_2", 10),
        (try_begin),
            (is_between, ":var_0", "p_town_1_1", "p_castle_1_1"),
            (store_mul, ":var_3", ":var_2", 15),
        (else_try),
            (store_mul, ":var_3", ":var_2", 5),
        (try_end),
        (assign, ":var_4", ":var_3"),
        (try_for_range_backwards, ":var_5", "p_village_1_1", "p_salt_mine"),
            (party_slot_eq, ":var_5", slot_village_bound_center, ":var_0"),
            (party_get_slot, ":var_6", ":var_5", slot_town_prosperity),
            (store_add, ":var_7", ":var_6", 200),
            (val_div, ":var_7", 10),
            (store_mul, ":var_8", ":var_7", 5),
            (val_add, ":var_4", ":var_8"),
        (try_end),
    (else_try),
        (party_get_slot, ":var_1", ":var_0", slot_town_prosperity),
        (store_add, ":var_2", ":var_1", 200),
        (val_div, ":var_2", 10),
        (store_mul, ":var_3", ":var_2", 5),
        (assign, ":var_4", ":var_3"),
    (try_end),
    (val_div, ":var_4", 10),
    (assign, reg0, ":var_4"),

]),

("calculate_center_assailability_score",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (assign, ":var_3", -1),
    (store_troop_faction, ":var_4", ":var_0"),
    (store_current_hours, ":var_5"),
    (faction_get_slot, ":var_6", ":var_4", slot_faction_ai_last_offensive_time),
    (val_sub, ":var_5", ":var_6"),
    (store_div, ":var_7", ":var_5", 12),
    (val_add, ":var_7", 30),
    (val_min, ":var_7", 100),
    (faction_get_slot, ":var_8", ":var_4", slot_faction_marshall),
    (assign, ":var_9", -1),
    (assign, ":var_10", 0),
    (try_begin),
        (gt, ":var_8", 0),
        (troop_get_slot, ":var_9", ":var_8", slot_troop_leaded_party),
        (party_is_active, ":var_9"),
        (party_get_slot, ":var_10", ":var_9", slot_party_cached_strength),
        (party_get_slot, ":var_11", ":var_9", slot_party_follower_strength),
    (try_end),
    (faction_get_slot, ":var_12", ":var_4", slot_faction_last_attacked_center),
    (faction_get_slot, ":var_13", ":var_4", slot_faction_last_attacked_hours),
    (try_begin),
        (store_current_hours, ":var_14"),
        (store_add, ":var_15", ":var_13", 24),
        (gt, ":var_14", ":var_15"),
        (faction_set_slot, ":var_4", slot_faction_last_attacked_center, 0),
        (assign, ":var_12", 0),
    (try_end),
    (try_begin),
        (this_or_next|eq, ":var_12", 0),
        (this_or_next|eq, ":var_12", ":var_1"),
        (this_or_next|eq, "$g_do_not_skip_other_than_current_ai_object", 1),
        (neg|faction_slot_eq, ":var_4", slot_faction_marshall, ":var_0"),
        (party_is_active, ":var_1"),
        (store_faction_of_party, ":var_16", ":var_1"),
        (store_relation, ":var_17", ":var_16", ":var_4"),
        (neg|ge, ":var_17", 0),
        (assign, ":var_18", -1),
        (try_begin),
            (is_between, ":var_1", "p_town_1_1", "p_village_1_1"),
            (neg|party_slot_eq, ":var_1", slot_center_is_besieged_by, -1),
            (party_get_slot, ":var_19", ":var_1", slot_center_is_besieged_by),
            (party_is_active, ":var_19"),
            (store_faction_of_party, ":var_18", ":var_19"),
        (try_end),
        (this_or_next|eq, ":var_18", -1),
        (eq, ":var_18", ":var_4"),
        (assign, ":var_20", 0),
        (try_begin),
            (is_between, ":var_1", "p_village_1_1", "p_salt_mine"),
            (try_begin),
                (party_slot_eq, ":var_1", slot_village_state, 1),
                (party_get_slot, ":var_21", ":var_1", slot_village_raided_by),
                (party_is_active, ":var_21"),
                (store_faction_of_party, ":var_22", ":var_21"),
                (neg|eq, ":var_22", ":var_4"),
                (assign, ":var_23", 1),
            (else_try),
                (assign, ":var_23", 0),
            (try_end),
            (this_or_next|party_slot_eq, ":var_1", slot_village_state, 2),
            (eq, ":var_23", 1),
            (assign, ":var_20", 1),
        (try_end),
        (eq, ":var_20", 0),
        (assign, ":var_24", 0),
        (try_for_range, ":var_25", "fac_player_supporters_faction", "fac_kingdoms_end"),
            (is_between, ":var_25", "fac_kingdom_1", "fac_kingdoms_end"),
            (neg|eq, ":var_25", ":var_4"),
            (faction_get_slot, ":var_26", ":var_25", slot_faction_ai_object),
            (eq, ":var_26", ":var_1"),
            (store_relation, ":var_27", ":var_16", ":var_25"),
            (neg|ge, ":var_27", 0),
            (assign, ":var_24", 1),
        (try_end),
        (eq, ":var_24", 0),
        (try_begin),
            (is_between, ":var_1", "p_town_1_1", "p_village_1_1"),
            (party_get_slot, ":var_28", ":var_1", slot_party_cached_strength),
            (party_get_slot, ":var_29", ":var_1", slot_party_nearby_friend_strength),
            (val_div, ":var_29", 2),
            (store_add, ":var_30", ":var_28", ":var_29"),
            (val_mul, ":var_30", 4),
            (val_div, ":var_30", 3),
            (assign, ":var_31", ":var_10"),
            (val_add, ":var_31", ":var_11"),
            (store_mul, ":var_32", ":var_31", 100),
            (try_begin),
                (gt, ":var_30", 0),
                (val_div, ":var_32", ":var_30"),
            (else_try),
                (assign, ":var_32", 1000),
            (try_end),
        (else_try),
            (party_get_slot, ":var_29", ":var_1", slot_party_nearby_friend_strength),
            (assign, ":var_30", 1000),
            (assign, ":var_31", ":var_10"),
            (val_add, ":var_31", ":var_11"),
            (store_mul, ":var_32", ":var_31", 100),
            (try_begin),
                (gt, ":var_30", 0),
                (val_div, ":var_32", ":var_30"),
            (else_try),
                (assign, ":var_32", 1000),
            (try_end),
        (try_end),
        (ge, ":var_32", 120),
        (store_sub, ":var_33", ":var_32", 120),
        (try_begin),
            (neg|ge, ":var_33", 100),
            (store_add, ":var_34", ":var_33", 20),
        (else_try),
            (neg|ge, ":var_33", 200),
            (store_sub, ":var_34", ":var_33", 100),
            (val_div, ":var_34", 2),
            (val_add, ":var_34", 120),
        (else_try),
            (neg|ge, ":var_33", 400),
            (store_sub, ":var_34", ":var_33", 200),
            (val_div, ":var_34", 5),
            (val_add, ":var_34", 170),
        (else_try),
            (neg|ge, ":var_33", 800),
            (store_sub, ":var_34", ":var_33", 400),
            (val_div, ":var_34", 10),
            (val_add, ":var_34", 210),
        (else_try),
            (assign, ":var_34", 250),
        (try_end),
        (assign, ":var_35", 0),
        (assign, ":var_36", 0),
        (try_for_range, ":var_37", "p_town_1_1", "p_village_1_1"),
            (store_faction_of_party, ":var_38", ":var_37"),
            (eq, ":var_38", ":var_4"),
            (store_distance_to_party_from_party, ":var_39", ":var_37", ":var_1"),
            (val_add, ":var_36", ":var_39"),
            (val_add, ":var_35", 1),
        (try_end),
        (try_begin),
            (gt, ":var_35", 0),
            (store_div, ":var_40", ":var_36", ":var_35"),
            (try_begin),
                (ge, ":var_9", 0),
                (party_is_active, ":var_9"),
                (store_distance_to_party_from_party, ":var_41", ":var_9", ":var_1"),
            (else_try),
                (assign, ":var_41", 100),
            (try_end),
            (try_begin),
                (faction_get_slot, ":var_42", ":var_4", slot_faction_ai_state),
                (eq, ":var_42", 2),
                (faction_get_slot, ":var_43", ":var_4", slot_faction_ai_object),
                (ge, ":var_43", 0),
                (neg|eq, ":var_43", ":var_1"),
                (try_begin),
                    (ge, ":var_34", 300),
                    (assign, ":var_34", 200),
                (else_try),
                    (ge, ":var_34", 100),
                    (val_sub, ":var_34", 100),
                    (val_div, ":var_34", 2),
                    (val_add, ":var_34", 100),
                (try_end),
                (try_begin),
                    (faction_slot_eq, ":var_4", slot_faction_marshall, ":var_0"),
                    (eq, "$g_do_not_skip_other_than_current_ai_object", 0),
                    (assign, ":var_34", 0),
                (try_end),
                (faction_set_slot, ":var_4", slot_faction_last_attacked_center, ":var_43"),
                (store_current_hours, ":var_14"),
                (faction_set_slot, ":var_4", slot_faction_last_attacked_hours, ":var_14"),
                (eq, ":var_2", 0),
                (store_div, ":var_44", ":var_41", 2),
                (assign, ":var_44", ":var_41"),
            (else_try),
                (store_div, ":var_44", ":var_41", 3),
            (try_end),
            (store_add, ":var_36", ":var_40", ":var_44"),
        (else_try),
            (assign, ":var_36", 100),
        (try_end),
        (try_begin),
            (this_or_next|troop_slot_eq, ":var_0", slot_lord_reputation_type, 7),
            (this_or_next|troop_slot_eq, ":var_0", slot_lord_reputation_type, 5),
            (this_or_next|troop_slot_eq, ":var_0", slot_lord_reputation_type, 6),
            (troop_slot_eq, ":var_0", slot_lord_reputation_type, 4),
            (try_begin),
                (neg|ge, ":var_36", 45),
                (assign, ":var_45", 100),
            (else_try),
                (neg|ge, ":var_36", 120),
                (store_sub, ":var_45", ":var_36", 45),
                (val_div, ":var_45", 1),
                (store_sub, ":var_45", 100, ":var_45"),
            (else_try),
                (neg|ge, ":var_36", 240),
                (store_sub, ":var_45", ":var_36", 120),
                (val_div, ":var_45", 2),
                (store_sub, ":var_45", 50, ":var_45"),
            (else_try),
                (assign, ":var_45", 10),
            (try_end),
        (else_try),
            (try_begin),
                (neg|ge, ":var_36", 60),
                (assign, ":var_45", 100),
            (else_try),
                (neg|ge, ":var_36", 210),
                (store_sub, ":var_45", ":var_36", 60),
                (val_div, ":var_45", 2),
                (store_sub, ":var_45", 100, ":var_45"),
            (else_try),
                (neg|ge, ":var_36", 450),
                (store_sub, ":var_45", ":var_36", 210),
                (val_div, ":var_45", 4),
                (store_sub, ":var_45", 50, ":var_45"),
            (else_try),
                (assign, ":var_45", 10),
            (try_end),
        (try_end),
        (store_mul, ":var_3", ":var_45", ":var_34"),
        (val_mul, ":var_3", ":var_7"),
        (val_div, ":var_3", 100),
        (call_script, "script_find_total_prosperity_score", ":var_1"),
        (assign, ":var_46", reg0),
        (val_mul, ":var_46", 3),
        (val_div, ":var_46", 2),
        (val_mul, ":var_3", ":var_46"),
        (try_begin),
            (party_slot_eq, ":var_1", slot_center_ex_faction, ":var_4"),
            (party_slot_eq, ":var_1", slot_center_original_faction, ":var_4"),
            (val_mul, ":var_3", 12),
            (val_div, ":var_3", 10),
        (else_try),
            (this_or_next|party_slot_eq, ":var_1", slot_center_ex_faction, ":var_4"),
            (party_slot_eq, ":var_1", slot_center_original_faction, ":var_4"),
            (val_mul, ":var_3", 11),
            (val_div, ":var_3", 10),
        (try_end),
        (val_div, ":var_3", 1000),
        (try_begin),
            (eq, ":var_16", "fac_player_supporters_faction"),
            (game_get_reduce_campaign_ai, ":var_47"),
            (assign, ":var_48", 0),
            (try_for_range, ":var_49", "p_town_1_1", "p_village_1_1"),
                (store_faction_of_party, ":var_50", ":var_49"),
                (eq, ":var_50", "fac_player_supporters_faction"),
                (val_add, ":var_48", 1),
            (try_end),
            (try_begin),
                (eq, ":var_47", 2),
                (try_begin),
                    (neg|gt, ":var_48", 2),
                    (assign, ":var_51", 0),
                (else_try),
                    (eq, ":var_48", 3),
                    (assign, ":var_51", 20),
                (else_try),
                    (eq, ":var_48", 4),
                    (assign, ":var_51", 40),
                (else_try),
                    (eq, ":var_48", 5),
                    (eq, ":var_48", 6),
                    (assign, ":var_51", 55),
                (else_try),
                    (eq, ":var_48", 7),
                    (eq, ":var_48", 8),
                    (eq, ":var_48", 9),
                    (assign, ":var_51", 70),
                (else_try),
                    (assign, ":var_51", 85),
                (try_end),
            (else_try),
                (eq, ":var_47", 1),
                (try_begin),
                    (neg|gt, ":var_48", 1),
                    (assign, ":var_51", 25),
                (else_try),
                    (eq, ":var_48", 2),
                    (assign, ":var_51", 45),
                (else_try),
                    (eq, ":var_48", 3),
                    (assign, ":var_51", 60),
                (else_try),
                    (eq, ":var_48", 4),
                    (eq, ":var_48", 5),
                    (assign, ":var_51", 75),
                (else_try),
                    (eq, ":var_48", 6),
                    (eq, ":var_48", 7),
                    (eq, ":var_48", 8),
                    (assign, ":var_51", 85),
                (else_try),
                    (assign, ":var_51", 92),
                (try_end),
            (else_try),
                (assign, ":var_51", 100),
            (try_end),
            (val_mul, ":var_3", ":var_51"),
            (val_div, ":var_3", 100),
        (try_end),
    (try_end),
    (assign, reg0, ":var_3"),
    (assign, reg1, ":var_32"),
    (assign, reg2, ":var_45"),
    (assign, reg3, ":var_46"),

]),

("find_center_to_defend",
[
    (store_script_param, ":var_0", 1),
    (store_troop_faction, ":var_1", ":var_0"),
    (faction_get_slot, ":var_2", ":var_1", slot_faction_marshall),
    (faction_get_slot, ":var_3", ":var_1", slot_faction_ai_state),
    (assign, ":var_4", -1),
    (try_begin),
        (gt, ":var_2", 0),
        (troop_get_slot, ":var_4", ":var_2", slot_troop_leaded_party),
    (try_end),
    (assign, ":var_5", -1),
    (assign, ":var_6", 0),
    (try_for_range, ":var_7", "p_town_1_1", "p_salt_mine"),
        (store_faction_of_party, ":var_8", ":var_7"),
        (eq, ":var_8", ":var_1"),
        (party_get_slot, ":var_9", ":var_7", slot_center_sortie_enemy_strength),
        (assign, ":var_10", ":var_9"),
        (assign, ":var_11", 0),
        (try_begin),
            (is_between, ":var_7", "p_town_1_1", "p_village_1_1"),
            (party_slot_ge, ":var_7", slot_center_is_besieged_by, 0),
            (call_script, "script_find_total_prosperity_score", ":var_7"),
            (assign, ":var_12", reg0),
            (party_get_slot, ":var_13", ":var_7", slot_party_cached_strength),
            (val_mul, ":var_13", 4),
            (val_div, ":var_13", 3),
            (assign, ":var_14", 0),
            (val_add, ":var_13", ":var_14"),
            (store_mul, ":var_15", ":var_10", 100),
            (val_add, ":var_13", 1),
            (val_max, ":var_13", 1),
            (val_div, ":var_15", ":var_13"),
            (assign, ":var_16", 0),
            (party_get_slot, ":var_17", ":var_7", slot_center_is_besieged_by),
            (try_begin),
                (party_is_active, ":var_17"),
                (try_begin),
                    (eq, ":var_17", "p_main_party"),
                    (assign, ":var_16", 1),
                (else_try),
                    (store_faction_of_party, ":var_18", ":var_17"),
                    (eq, ":var_18", "fac_player_faction"),
                    (assign, ":var_16", 1),
                (else_try),
                    (party_get_attached_to, ":var_19", "p_main_party"),
                    (ge, ":var_19", 0),
                    (eq, ":var_19", ":var_17"),
                    (assign, ":var_16", 1),
                (try_end),
            (try_end),
            (try_begin),
                (eq, ":var_16", 0),
                (try_begin),
                    (neg|ge, ":var_15", 40),
                    (assign, ":var_11", 1),
                (else_try),
                    (neg|ge, ":var_15", 80),
                    (store_sub, ":var_11", ":var_15", 40),
                    (val_div, ":var_11", 5),
                    (val_add, ":var_11", 1),
                (else_try),
                    (neg|ge, ":var_15", 120),
                    (store_sub, ":var_11", ":var_15", 80),
                    (val_div, ":var_11", 4),
                    (val_add, ":var_11", 7),
                (else_try),
                    (neg|ge, ":var_15", 200),
                    (store_sub, ":var_11", ":var_15", 120),
                    (val_div, ":var_11", 10),
                    (val_add, ":var_11", 17),
                (else_try),
                    (assign, ":var_11", 25),
                (try_end),
            (else_try),
                (try_begin),
                    (neg|ge, ":var_15", 200),
                    (store_div, ":var_11", ":var_15", 10),
                    (val_add, ":var_11", 6),
                (else_try),
                    (assign, ":var_11", 26),
                (try_end),
            (try_end),
        (else_try),
            (is_between, ":var_7", "p_village_1_1", "p_salt_mine"),
            (party_slot_eq, ":var_7", slot_village_state, 1),
            (gt, ":var_10", 0),
            (call_script, "script_find_total_prosperity_score", ":var_7"),
            (assign, ":var_15", 100),
            (assign, ":var_12", reg0),
            (assign, ":var_11", 10),
        (try_end),
        (gt, ":var_11", 0),
        (try_begin),
            (is_between, ":var_7", "p_town_1_1", "p_village_1_1"),
            (assign, ":var_20", 120),
            (try_begin),
                (ge, ":var_4", 0),
                (party_is_active, ":var_4"),
                (store_distance_to_party_from_party, ":var_21", ":var_4", ":var_7"),
            (else_try),
                (assign, ":var_21", 100),
            (try_end),
            (try_begin),
                (eq, ":var_3", 5),
                (faction_get_slot, ":var_22", ":var_1", slot_faction_ai_object),
                (is_between, ":var_22", "p_town_1_1", "p_village_1_1"),
                (neg|eq, ":var_22", ":var_7"),
                (val_mul, ":var_21", 2),
                (val_add, ":var_21", 20),
            (try_end),
            (val_mul, ":var_21", 2),
            (try_begin),
                (neg|ge, ":var_21", 10),
                (assign, ":var_23", 100),
            (else_try),
                (neg|ge, ":var_21", 160),
                (store_sub, ":var_23", ":var_21", 10),
                (val_div, ":var_23", 3),
                (store_sub, ":var_23", 100, ":var_23"),
            (else_try),
                (neg|ge, ":var_21", 360),
                (store_sub, ":var_23", ":var_21", 250),
                (val_div, ":var_23", 5),
                (store_sub, ":var_23", 50, ":var_23"),
            (else_try),
                (assign, ":var_23", 10),
            (try_end),
        (else_try),
            (store_add, ":var_20", ":var_10", 20000),
            (val_div, ":var_20", 200),
            (assign, ":var_23", 70),
        (try_end),
        (store_mul, ":var_24", ":var_20", ":var_12"),
        (val_mul, ":var_24", ":var_11"),
        (val_mul, ":var_24", ":var_23"),
        (val_div, ":var_24", 10000),
        (try_begin),
            (ge, "$cheat_mode", 1),
            (gt, ":var_24", 0),
            (eq, ":var_1", "fac_kingdom_6"),
            (assign, reg0, ":var_24"),
            (str_store_party_name, s32, ":var_7"),
            (assign, reg1, ":var_12"),
            (assign, reg2, ":var_20"),
            (assign, reg3, ":var_11"),
            (assign, reg4, ":var_23"),
        (try_end),
        (gt, ":var_24", ":var_6"),
        (assign, ":var_5", ":var_7"),
        (assign, ":var_6", ":var_24"),
        (assign, ":var_25", ":var_10"),
    (try_end),
    (val_mul, ":var_6", 3),
    (val_div, ":var_6", 2),
    (assign, reg0, ":var_5"),
    (assign, reg1, ":var_6"),
    (assign, reg2, ":var_25"),

]),

("npc_decision_checklist_peace_or_war",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (assign, ":var_3", 0),
    (assign, ":var_4", 0),
    (assign, ":var_5", 0),
    (assign, ":var_6", 0),
    (assign, ":var_7", 0),
    (assign, ":var_8", 0),
    (assign, ":var_9", 0),
    (assign, "$g_concession_demanded", 0),
    (faction_get_slot, ":var_10", ":var_0", 102),
    (faction_get_slot, ":var_11", ":var_1", 102),
    (store_relation, ":var_12", ":var_0", ":var_1"),
    (call_script, "script_distance_between_factions", ":var_0", ":var_1"),
    (assign, ":var_13", reg0),
    (try_begin),
        (eq, ":var_1", "fac_player_supporters_faction"),
        (assign, ":var_14", "$player_honor"),
        (val_add, ":var_4", 2),
    (else_try),
        (assign, ":var_14", 0),
    (try_end),
    (faction_get_slot, ":var_15", ":var_0", slot_faction_leader),
    (faction_get_slot, ":var_16", ":var_1", slot_faction_leader),
    (call_script, "script_troop_get_relation_with_troop", ":var_15", ":var_16"),
    (assign, ":var_17", reg0),
    (val_min, ":var_17", 10),
    (val_add, ":var_14", ":var_17"),
    (try_begin),
        (neg|gt, ":var_13", 67),
        (assign, ":var_6", 1),
    (try_end),
    (assign, ":var_18", 0),
    (try_begin),
        (neg|eq, ":var_10", ":var_11"),
        (eq, ":var_6", 1),
        (try_begin),
            (eq, ":var_10", 0),
            (eq, ":var_11", 1),
            (assign, ":var_18", 2),
        (else_try),
            (eq, ":var_11", 0),
            (eq, ":var_10", 1),
            (assign, ":var_18", 2),
        (else_try),
            (assign, ":var_18", 1),
        (try_end),
    (try_end),
    (try_begin),
        (eq, ":var_18", 1),
        (val_sub, ":var_14", 5),
    (else_try),
        (eq, ":var_18", 2),
        (val_sub, ":var_14", 2),
    (try_end),
    (str_store_troop_name, s15, ":var_15"),
    (str_store_troop_name, s16, ":var_16"),
    (assign, ":var_19", 0),
    (assign, ":var_20", 0),
    (call_script, "script_diplomacy_faction_get_diplomatic_status_with_faction", ":var_0", ":var_1"),
    (assign, ":var_21", reg0),
    (str_clear, s12),
    (try_begin),
        (eq, ":var_21", -2),
        (str_store_string, s12, "str_s15_is_at_war_with_s16_"),
        (store_add, ":var_22", ":var_1", 220),
        (val_sub, ":var_22", "fac_player_supporters_faction"),
        (faction_get_slot, ":var_20", ":var_0", ":var_22"),
        (store_add, ":var_23", ":var_0", 220),
        (val_sub, ":var_23", "fac_player_supporters_faction"),
        (faction_get_slot, ":var_19", ":var_1", ":var_23"),
    (else_try),
        (eq, ":var_21", 1),
        (str_store_string, s12, "str_in_the_short_term_s15_has_a_truce_with_s16_as_a_matter_of_general_policy_"),
    (else_try),
        (eq, ":var_21", -1),
        (str_store_string, s12, "str_in_the_short_term_s15_was_recently_provoked_by_s16_and_is_under_pressure_to_declare_war_as_a_matter_of_general_policy_"),
    (try_end),
    (try_begin),
        (is_between, "$g_talk_troop", "trp_npc1", "trp_knight_1_1_wife"),
        (str_clear, s12),
    (try_end),
    (try_begin),
        (gt, ":var_2", -1),
        (store_skill_level, ":var_24", "skl_persuasion", ":var_2"),
        (val_mul, ":var_24", 2),
        (val_add, ":var_14", ":var_24"),
        (try_begin),
            (eq, "$cheat_mode", 1),
            (assign, reg4, ":var_14"),
            (display_message, "str_envoymodified_diplomacy_score_honor_plus_relation_plus_envoy_persuasion_=_reg4"),
        (try_end),
    (try_end),
    (try_for_range, ":var_25", "fac_player_supporters_faction", "fac_kingdoms_end"),
        (faction_set_slot, ":var_25", slot_faction_temp_slot, 0),
    (try_end),
    (try_for_parties, ":var_26"),
        (assign, ":var_27", 0),
        (store_faction_of_party, ":var_28", ":var_26"),
        (party_get_slot, ":var_29", ":var_26", slot_center_original_faction),
        (party_get_slot, ":var_30", ":var_26", slot_center_ex_faction),
        (try_begin),
            (is_between, ":var_28", "fac_player_supporters_faction", "fac_kingdoms_end"),
            (this_or_next|party_slot_eq, ":var_26", slot_party_type, 2),
            (this_or_next|party_slot_eq, ":var_26", slot_party_type, 3),
            (this_or_next|party_slot_eq, ":var_26", slot_party_type, 13),
            (this_or_next|party_slot_eq, ":var_26", slot_party_type, 31),
            (party_slot_eq, ":var_26", slot_party_type, 7),
            (party_get_slot, ":var_27", ":var_26", slot_party_cached_strength),
            (neg|gt, ":var_27", 0),
            (store_party_size_wo_prisoners, ":var_31", ":var_26"),
            (gt, ":var_31", 1),
            (call_script, "script_party_calculate_strength", ":var_26", 1),
            (assign, ":var_27", reg0),
        (try_end),
        (try_begin),
            (is_between, ":var_28", "fac_player_supporters_faction", "fac_kingdoms_end"),
            (faction_get_slot, ":var_32", ":var_28", slot_faction_temp_slot),
            (val_add, ":var_32", ":var_27"),
            (faction_set_slot, ":var_28", slot_faction_temp_slot, ":var_32"),
        (try_end),
        (try_begin),
            (eq, ":var_28", ":var_1"),
            (val_add, ":var_4", ":var_27"),
            (try_begin),
                (this_or_next|eq, ":var_29", ":var_0"),
                (eq, ":var_30", ":var_0"),
                (val_add, ":var_5", 1),
                (try_begin),
                    (is_between, ":var_26", "p_town_1_1", "p_village_1_1"),
                    (assign, "$g_concession_demanded", ":var_26"),
                    (str_store_party_name, s18, "$g_concession_demanded"),
                (try_end),
            (try_end),
        (else_try),
            (eq, ":var_28", ":var_0"),
            (val_add, ":var_3", ":var_27"),
        (try_end),
    (try_end),
    (assign, ":var_33", -1),
    (assign, ":var_34", 60),
    (try_for_range, ":var_35", "fac_player_supporters_faction", "fac_kingdoms_end"),
        (faction_get_slot, ":var_36", ":var_35", slot_faction_temp_slot),
        (gt, ":var_36", ":var_34"),
        (assign, ":var_33", ":var_35"),
        (assign, ":var_34", ":var_36"),
    (try_end),
    (try_begin),
        (eq, "$cheat_mode", 2),
        (gt, ":var_33", 1),
        (str_store_faction_name, s4, ":var_33"),
        (assign, reg3, ":var_34"),
        (display_message, "@{!}DEBUG - {s4} strongest kingdom with {reg3} strength"),
    (try_end),
    (assign, ":var_37", 1),
    (try_begin),
        (gt, ":var_3", 0),
        (store_mul, ":var_37", ":var_4", 100),
        (val_div, ":var_37", ":var_3"),
    (try_end),
    (try_for_range, ":var_38", "fac_player_supporters_faction", "fac_kingdoms_end"),
        (neg|eq, ":var_38", ":var_1"),
        (neg|eq, ":var_38", ":var_0"),
        (faction_slot_eq, ":var_38", slot_faction_state, 0),
        (store_relation, ":var_39", ":var_38", ":var_0"),
        (neg|ge, ":var_39", 0),
        (assign, ":var_7", ":var_38"),
        (val_add, ":var_8", 1),
        (store_relation, ":var_39", ":var_38", ":var_1"),
        (neg|ge, ":var_39", 0),
        (assign, ":var_9", ":var_38"),
    (try_end),
    (store_current_hours, ":var_40"),
    (faction_get_slot, ":var_41", ":var_0", slot_faction_ai_last_decisive_event),
    (store_sub, ":var_42", ":var_40", ":var_41"),
    (try_begin),
        (gt, "$supported_pretender", 0),
        (this_or_next|eq, "$supported_pretender", ":var_15"),
        (eq, "$supported_pretender", ":var_16"),
        (this_or_next|eq, ":var_0", "$supported_pretender_old_faction"),
        (eq, ":var_1", "$supported_pretender_old_faction"),
        (assign, ":var_43", -3),
        (troop_get_type, reg4, ":var_15"),
        (assign, ":var_44", "str_s12s15_cannot_negotiate_with_s16_as_to_do_so_would_undermine_reg4herhis_own_claim_to_the_throne_this_civil_war_must_almost_certainly_end_with_the_defeat_of_one_side_or_another"),
    (else_try),
        (gt, ":var_5", 0),
        (try_begin),
            (eq, "$cheat_mode", 1),
            (display_message, "@{!}Actor centers held by target noted"),
        (try_end),
        (neg|ge, ":var_19", 200),
        (try_begin),
            (eq, "$cheat_mode", 1),
            (display_message, "@{!}War damage under minimum"),
        (try_end),
        (neg|ge, ":var_37", 125),
        (try_begin),
            (eq, "$cheat_mode", 1),
            (display_message, "@{!}Strength ratio correct"),
        (try_end),
        (eq, ":var_8", 0),
        (try_begin),
            (eq, "$cheat_mode", 1),
            (display_message, "@{!}Third party wars"),
        (try_end),
        (assign, ":var_43", -2),
        (assign, ":var_44", "str_s12s15_is_anxious_to_reclaim_old_lands_such_as_s18_now_held_by_s16"),
    (else_try),
        (eq, ":var_1", "fac_papacy"),
        (eq, ":var_10", 0),
        (assign, ":var_43", 2),
        (troop_get_type, reg4, ":var_15"),
        (assign, ":var_44", "str_s12s15_prefer_to_remain_friendly_to_s16_due_them_being_the_head_of_cataholic_church"),
    (else_try),
        (neg|ge, ":var_14", 0),
        (gt, ":var_18", 0),
        (neg|ge, ":var_37", 125),
        (neg|ge, ":var_19", 100),
        (neg|eq, ":var_21", 1),
        (eq, ":var_8", 0),
        (assign, ":var_43", -1),
        (troop_get_type, reg4, ":var_15"),
        (assign, ":var_44", "str_s12s15_distrusts_s16_due_to_religious_differences"),
    (else_try),
        (neg|ge, ":var_14", -20),
        (neg|ge, ":var_37", 125),
        (neg|ge, ":var_19", 200),
        (this_or_next|neg|eq, ":var_21", -2),
        (neg|ge, ":var_42", 720),
        (eq, ":var_8", 0),
        (assign, ":var_43", -3),
        (troop_get_type, reg4, ":var_15"),
        (assign, ":var_44", "str_s12s15_considers_s16_to_be_dangerous_and_untrustworthy_and_shehe_wants_to_bring_s16_down"),
    (else_try),
        (gt, ":var_5", 0),
        (try_begin),
            (eq, "$cheat_mode", 1),
            (display_message, "@{!}Actor centers held by target noted"),
        (try_end),
        (neg|ge, ":var_19", 100),
        (try_begin),
            (eq, "$cheat_mode", 1),
            (display_message, "@{!}War damage under minimum"),
        (try_end),
        (neg|ge, ":var_37", 125),
        (try_begin),
            (eq, "$cheat_mode", 1),
            (display_message, "@{!}Strength ratio correct"),
        (try_end),
        (eq, ":var_8", 0),
        (try_begin),
            (eq, "$cheat_mode", 1),
            (display_message, "@{!}Third party wars"),
        (try_end),
        (assign, ":var_43", -2),
        (assign, ":var_44", "str_s12s15_is_anxious_to_reclaim_old_lands_such_as_s18_now_held_by_s16"),
    (else_try),
        (eq, ":var_21", -2),
        (neg|ge, ":var_37", 125),
        (neg|gt, ":var_8", 1),
        (ge, ":var_20", 5),
        (this_or_next|neg|eq, ":var_21", -2),
        (neg|ge, ":var_42", 720),
        (store_mul, ":var_45", ":var_19", 2),
        (gt, ":var_20", ":var_45"),
        (assign, ":var_43", -2),
        (troop_get_type, reg4, ":var_15"),
        (assign, ":var_44", "str_s12s15_feels_that_reg4shehe_is_winning_the_war_against_s16_and_sees_no_reason_not_to_continue"),
    (else_try),
        (neg|gt, ":var_21", -1),
        (this_or_next|eq, ":var_21", -1),
        (neg|gt, ":var_20", 1),
        (neg|ge, ":var_37", 150),
        (eq, ":var_8", 0),
        (faction_slot_ge, ":var_0", slot_faction_instability, 10),
        (assign, ":var_43", -1),
        (assign, ":var_44", "str_s12s15_faces_too_much_internal_discontent_to_feel_comfortable_ignoring_recent_provocations_by_s16s_subjects"),
    (else_try),
        (eq, ":var_21", -2),
        (neg|ge, ":var_20", 100),
        (eq, ":var_8", 1),
        (assign, ":var_43", -1),
        (troop_get_type, reg4, ":var_15"),
        (assign, ":var_44", "str_s12even_though_reg4shehe_is_fighting_on_two_fronts_s15_is_inclined_to_continue_the_war_against_s16_for_a_little_while_longer_for_the_sake_of_honor"),
    (else_try),
        (eq, ":var_21", -2),
        (neg|ge, ":var_20", 100),
        (eq, ":var_8", 0),
        (assign, ":var_43", -1),
        (troop_get_type, reg4, ":var_15"),
        (assign, ":var_44", "str_s12s15_feels_that_reg4shehe_must_pursue_the_war_against_s16_for_a_little_while_longer_for_the_sake_of_honor"),
    (else_try),
        (this_or_next|faction_slot_eq, ":var_0", slot_faction_ai_state, 2),
        (this_or_next|faction_slot_eq, ":var_0", slot_faction_ai_state, 3),
        (faction_slot_eq, ":var_0", slot_faction_ai_state, 4),
        (faction_get_slot, ":var_46", ":var_0", slot_faction_ai_object),
        (party_is_active, ":var_46"),
        (store_faction_of_party, ":var_47", ":var_46"),
        (eq, ":var_47", ":var_1"),
        (str_store_party_name, s17, ":var_46"),
        (assign, ":var_43", -1),
        (assign, ":var_44", "str_s12s15_is_currently_on_the_offensive_against_s17_now_held_by_s16_and_reluctant_to_negotiate"),
    (else_try),
        (eq, ":var_6", 0),
        (assign, ":var_43", 10),
        (assign, ":var_44", "str_s12s15_is_too_far_to_engage_s16"),
    (else_try),
        (eq, ":var_33", ":var_1"),
        (eq, ":var_8", 0),
        (this_or_next|ge, ":var_21", -1),
        (neg|ge, ":var_42", 1440),
        (eq, ":var_6", 1),
        (assign, ":var_48", 0),
        (try_for_range, ":var_49", "fac_player_supporters_faction", "fac_kingdoms_end"),
            (neg|eq, ":var_49", ":var_0"),
            (neg|eq, ":var_49", ":var_1"),
            (faction_slot_eq, ":var_49", slot_faction_state, 0),
            (store_relation, ":var_50", ":var_49", ":var_1"),
            (neg|ge, ":var_50", 0),
            (assign, ":var_48", 1),
        (try_end),
        (eq, ":var_48", 1),
        (assign, ":var_43", -1),
        (assign, ":var_44", "str_s12s15_is_alarmed_by_the_growing_power_of_s16"),
    (else_try),
        (eq, ":var_8", 0),
        (try_begin),
            (ge, "$cheat_mode", 1),
            (display_message, "@{!}DEBUG -- No third party wars for {s15}"),
        (try_end),
        (eq, ":var_0", ":var_33"),
        (try_begin),
            (ge, "$cheat_mode", 1),
            (display_message, "@{!}DEBUG -- {s15} is strongest kingdom"),
        (try_end),
        (faction_get_slot, ":var_3", ":var_0", slot_faction_temp_slot),
        (faction_get_slot, ":var_4", ":var_1", slot_faction_temp_slot),
        (store_sub, ":var_51", ":var_3", ":var_4"),
        (ge, ":var_51", 30),
        (try_begin),
            (ge, "$cheat_mode", 1),
            (display_message, "@{!}DEBUG -- {s15} has 30 point advantage over {s16}"),
        (try_end),
        (assign, ":var_52", 0),
        (try_for_range, ":var_53", "p_town_1_1", "p_village_1_1"),
            (store_faction_of_party, ":var_54", ":var_53"),
            (eq, ":var_54", ":var_0"),
            (try_for_range, ":var_55", "p_town_1_1", "p_village_1_1"),
                (store_faction_of_party, ":var_56", ":var_55"),
                (eq, ":var_56", ":var_1"),
                (store_distance_to_party_from_party, ":var_57", ":var_55", ":var_53"),
                (neg|ge, ":var_57", 25),
                (assign, ":var_52", 1),
            (try_end),
        (try_end),
        (eq, ":var_52", 1),
        (try_begin),
            (ge, "$cheat_mode", 1),
            (display_message, "@{!}DEBUG -- {s15} has proximity to {s16}"),
        (try_end),
        (assign, ":var_43", -1),
        (assign, ":var_44", "str_s12s15_declared_war_to_control_calradia"),
    (else_try),
        (neg|ge, ":var_14", 0),
        (eq, ":var_18", 1),
        (neg|ge, ":var_37", 125),
        (eq, ":var_8", 0),
        (neg|gt, ":var_19", 100),
        (assign, ":var_43", 0),
        (assign, ":var_44", "str_s12s15_distrusts_s16_due_to_religious_differences"),
    (else_try),
        (neg|ge, ":var_14", -20),
        (assign, ":var_43", 0),
        (assign, ":var_44", "str_s12s15_distrusts_s16_and_fears_that_any_deals_struck_between_the_two_realms_will_not_be_kept"),
    (else_try),
        (neg|ge, ":var_12", 0),
        (ge, ":var_8", 2),
        (assign, ":var_43", 3),
        (assign, ":var_44", "str_s12s15_is_at_war_on_too_many_fronts_and_eager_to_make_peace_with_s16"),
    (else_try),
        (gt, ":var_9", 0),
        (eq, ":var_5", 0),
        (this_or_next|ge, ":var_12", 0),
        (assign, ":var_43", 3),
        (str_store_faction_name, s17, ":var_9"),
        (troop_get_type, reg4, ":var_15"),
        (assign, ":var_44", "str_s12s15_seems_to_think_that_s16_and_reg4shehe_have_a_common_enemy_in_the_s17"),
    (else_try),
        (eq, ":var_21", -2),
        (ge, ":var_42", 720),
        (troop_get_type, reg4, ":var_15"),
        (assign, ":var_43", 2),
        (assign, ":var_44", "str_s12s15_feels_frustrated_by_reg4herhis_inability_to_strike_a_decisive_blow_against_s16"),
    (else_try),
        (neg|ge, ":var_12", 0),
        (gt, ":var_19", 100),
        (val_mul, ":var_45", 2),
        (neg|ge, ":var_20", ":var_45"),
        (assign, ":var_43", 2),
        (assign, ":var_44", "str_s12s15_has_suffered_enough_in_the_war_with_s16_for_too_little_gain_and_is_ready_to_pursue_a_peace"),
    (else_try),
        (gt, ":var_7", 0),
        (ge, ":var_14", 0),
        (neg|ge, ":var_12", 0),
        (assign, ":var_43", 1),
        (str_store_faction_name, s17, ":var_7"),
        (assign, ":var_44", "str_s12s15_would_like_to_firm_up_a_truce_with_s16_to_respond_to_the_threat_from_the_s17"),
    (else_try),
        (gt, ":var_7", 0),
        (ge, ":var_14", 0),
        (assign, ":var_43", 1),
        (str_store_faction_name, s17, ":var_7"),
        (assign, ":var_44", "str_s12s15_wishes_to_be_at_peace_with_s16_so_as_to_pursue_the_war_against_the_s17"),
    (else_try),
        (gt, ":var_37", 175),
        (eq, ":var_6", 1),
        (assign, ":var_43", 1),
        (assign, ":var_44", "str_s12s15_seems_to_be_intimidated_by_s16_and_would_like_to_avoid_hostilities"),
    (else_try),
        (neg|ge, ":var_12", 0),
        (assign, ":var_43", 1),
        (assign, ":var_44", "str_s12s15_has_no_particular_reason_to_continue_the_war_with_s16_and_would_probably_make_peace_if_given_the_opportunity"),
    (else_try),
        (assign, ":var_43", 1),
        (assign, ":var_44", "str_s12s15_seems_to_be_willing_to_improve_relations_with_s16"),
    (try_end),
    (str_store_string, s14, ":var_44"),
    (assign, reg0, ":var_43"),
    (assign, reg1, ":var_44"),

]),

("npc_decision_checklist_male_guardian_assess_suitor",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (troop_get_slot, ":var_2", ":var_0", slot_lord_reputation_type),
    (store_troop_faction, ":var_3", ":var_0"),
    (try_begin),
        (eq, ":var_1", "trp_player"),
        (assign, ":var_4", "$players_kingdom"),
    (else_try),
        (store_troop_faction, ":var_4", ":var_1"),
    (try_end),
    (store_relation, ":var_5", ":var_3", ":var_4"),
    (call_script, "script_troop_get_relation_with_troop", ":var_0", ":var_1"),
    (assign, ":var_6", reg0),
    (troop_get_slot, ":var_7", ":var_1", slot_troop_renown),
    (assign, ":var_8", -1),
    (try_begin),
        (eq, ":var_1", "trp_player"),
        (gt, "$marriage_candidate", 0),
        (neg|eq, ":var_3", "fac_kingdom_1"),
        (neg|eq, ":var_4", "fac_kingdom_1"),
        (try_for_range, ":var_9", "trp_knight_1_1", "trp_kingdom_2_pretender"),
            (store_troop_faction, ":var_10", ":var_9"),
            (eq, ":var_10", ":var_3"),
            (this_or_next|troop_slot_eq, ":var_9", slot_troop_love_interest_1, "$marriage_candidate"),
            (this_or_next|troop_slot_eq, ":var_9", slot_troop_love_interest_2, "$marriage_candidate"),
            (troop_slot_eq, ":var_9", slot_troop_love_interest_3, "$marriage_candidate"),
            (call_script, "script_troop_get_relation_with_troop", ":var_9", ":var_0"),
            (gt, reg0, 5),
            (troop_slot_ge, ":var_9", slot_troop_renown, ":var_7"),
            (assign, ":var_8", ":var_9"),
            (str_store_troop_name, s14, ":var_9"),
            (str_store_troop_name, s16, "$marriage_candidate"),
        (try_end),
    (try_end),
    (try_begin),
        (eq, ":var_3", "fac_kingdom_1"),
        (eq, ":var_4", "fac_kingdom_1"),
        (assign, ":var_11", "@I'm sorry, we take vows of chastity here and are not allowed to marry."),
        (assign, ":var_12", -3),
    (else_try),
        (neg|ge, ":var_7", 50),
        (this_or_next|troop_slot_eq, ":var_0", slot_lord_reputation_type, 2),
        (this_or_next|troop_slot_eq, ":var_0", slot_lord_reputation_type, 5),
        (troop_slot_eq, ":var_0", slot_lord_reputation_type, 3),
        (assign, ":var_11", "str_excuse_me_how_can_you_possibly_imagine_yourself_worthy_to_marry_into_our_family"),
        (assign, ":var_12", -3),
    (else_try),
        (neg|ge, ":var_7", 50),
        (troop_slot_eq, ":var_0", slot_lord_reputation_type, 6),
        (assign, ":var_11", "str_em_with_regard_to_her_ladyship_we_were_looking_specifically_for_a_groom_of_some_distinction_fight_hard_count_your_dinars_and_perhaps_some_day_in_the_future_we_may_speak_of_such_things_my_good_man"),
        (assign, ":var_12", -1),
    (else_try),
        (neg|ge, ":var_7", 50),
        (assign, ":var_11", "str_em_with_regard_to_her_ladyship_we_were_looking_specifically_for_a_groom_of_some_distinction"),
        (assign, ":var_12", -2),
    (else_try),
        (neg|ge, ":var_7", 200),
        (neg|troop_slot_eq, ":var_0", slot_lord_reputation_type, 6),
        (assign, ":var_11", "str_it_is_too_early_for_you_to_be_speaking_of_such_things_you_are_still_making_your_mark_in_the_world"),
        (assign, ":var_12", -1),
    (else_try),
        (eq, ":var_1", "trp_player"),
        (neg|eq, ":var_4", "$players_kingdom"),
        (str_store_faction_name, s4, ":var_3"),
        (this_or_next|eq, ":var_2", 2),
        (eq, ":var_2", 5),
        (assign, ":var_11", "str_you_dont_serve_the_s4_so_id_say_no_one_day_we_may_be_at_war_and_i_prefer_not_to_have_to_kill_my_inlaws_if_at_all_possible"),
        (assign, ":var_12", -1),
    (else_try),
        (eq, ":var_1", "trp_player"),
        (neg|eq, ":var_4", "$players_kingdom"),
        (neg|eq, ":var_2", 6),
        (neg|eq, ":var_2", 4),
        (assign, ":var_11", "str_as_you_are_not_a_vassal_of_the_s4_i_must_decline_your_request_the_twists_of_fate_may_mean_that_we_will_one_day_cross_swords_and_i_would_hope_not_to_make_a_widow_of_a_lady_whom_i_am_obligated_to_protect"),
        (assign, ":var_12", -1),
    (else_try),
        (eq, ":var_1", "trp_player"),
        (neg|ge, ":var_5", 0),
        (assign, ":var_11", "str_as_you_are_not_a_vassal_of_the_s4_i_must_decline_your_request_the_twists_of_fate_may_mean_that_we_will_one_day_cross_swords_and_i_would_hope_not_to_make_a_widow_of_a_lady_whom_i_am_obligated_to_protect"),
        (assign, ":var_12", -1),
    (else_try),
        (eq, ":var_1", "trp_player"),
        (neg|eq, "$player_has_homage", 1),
        (neg|faction_slot_eq, "fac_player_supporters_faction", slot_faction_state, 0),
        (assign, ":var_11", "str_as_you_are_not_a_pledged_vassal_of_our_liege_with_the_right_to_hold_land_i_must_refuse_your_request_to_marry_into_our_family"),
        (assign, ":var_12", -1),
    (else_try),
        (gt, ":var_8", -1),
        (this_or_next|eq, ":var_2", 3),
        (this_or_next|eq, ":var_2", 5),
        (this_or_next|eq, ":var_2", 1),
        (eq, ":var_2", 2),
        (assign, ":var_11", "str_look_here_lad__the_young_s14_has_been_paying_court_to_s16_and_youll_have_to_admit__hes_a_finer_catch_for_her_than_you_so_lets_have_no_more_of_this_talk_shall_we"),
        (assign, ":var_12", -1),
    (else_try),
        (neg|ge, ":var_6", -4),
        (assign, ":var_11", "str_i_do_not_care_for_you_sir_and_i_consider_it_my_duty_to_protect_the_ladies_of_my_household_from_undesirable_suitors"),
        (assign, ":var_12", -3),
    (else_try),
        (neg|ge, ":var_6", 5),
        (assign, ":var_11", "str_hmm_young_girls_may_easily_be_led_astray_so_out_of_a_sense_of_duty_to_the_ladies_of_my_household_i_think_i_would_like_to_get_to_know_you_a_bit_better_we_may_speak_of_this_at_a_later_date"),
        (assign, ":var_12", -1),
    (else_try),
        (assign, ":var_11", "str_you_may_indeed_make_a_fine_match_for_the_young_mistress"),
        (assign, ":var_12", 1),
    (try_end),
    (assign, reg0, ":var_12"),
    (assign, reg1, ":var_11"),

]),

("npc_decision_checklist_marry_female_pc",
[
    (store_script_param, ":var_0", 1),
    (troop_get_slot, ":var_1", ":var_0", slot_lord_reputation_type),
    (call_script, "script_troop_get_romantic_chemistry_with_troop", ":var_0", "trp_player"),
    (assign, ":var_2", reg0),
    (call_script, "script_troop_get_relation_with_troop", ":var_0", "trp_player"),
    (assign, ":var_3", reg0),
    (assign, ":var_4", -1),
    (try_for_range, ":var_5", "trp_knight_1_1_wife", "trp_heroes_end"),
        (this_or_next|troop_slot_eq, ":var_0", slot_troop_love_interest_1, ":var_5"),
        (this_or_next|troop_slot_eq, ":var_0", slot_troop_love_interest_2, ":var_5"),
        (troop_slot_eq, ":var_0", slot_troop_love_interest_3, ":var_5"),
        (call_script, "script_troop_get_relation_with_troop", ":var_0", ":var_4"),
        (assign, ":var_6", reg0),
        (gt, ":var_6", ":var_3"),
        (assign, ":var_4", ":var_5"),
    (try_end),
    (assign, ":var_7", 0),
    (try_for_range, ":var_8", "p_town_1_1", "p_salt_mine"),
        (troop_slot_eq, ":var_8", slot_troop_renown, "trp_player"),
        (val_add, ":var_7", 1),
    (try_end),
    (assign, ":var_9", 0),
    (try_begin),
        (troop_slot_ge, "trp_player", slot_troop_betrothed, "trp_npc1"),
        (neg|troop_slot_eq, "trp_player", slot_troop_betrothed, ":var_0"),
        (str_store_string, s14, "str_my_lady_engaged_to_another"),
    (else_try),
        (neg|ge, ":var_3", -3),
        (this_or_next|eq, ":var_1", 7),
        (this_or_next|eq, ":var_1", 4),
        (eq, ":var_1", 6),
        (str_store_string, s14, "str_madame__given_our_relations_in_the_past_this_proposal_is_most_surprising_i_do_not_think_that_you_are_the_kind_of_woman_who_can_be_bent_to_a_hushands_will_and_i_would_prefer_not_to_have_our_married_life_be_a_source_of_constant_acrimony"),
    (else_try),
        (neg|ge, ":var_3", -10),
        (this_or_next|eq, ":var_1", 2),
        (this_or_next|eq, ":var_1", 5),
        (eq, ":var_1", 3),
        (str_store_string, s14, "str_i_would_prefer_to_marry_a_proper_maiden_who_will_obey_her_husband_and_is_not_likely_to_split_his_head_with_a_sword"),
    (else_try),
        (neg|ge, ":var_2", 5),
        (str_store_string, s14, "str_my_lady_not_sufficient_chemistry"),
    (else_try),
        (this_or_next|eq, ":var_1", 7),
        (eq, ":var_1", 1),
        (str_store_string, s14, "str_my_lady_while_i_admire_your_valor_you_will_forgive_me_if_i_tell_you_that_a_woman_like_you_does_not_uphold_to_my_ideal_of_the_feminine_of_the_delicate_and_of_the_pure"),
    (else_try),
        (eq, ":var_1", 2),
        (neg|ge, ":var_2", 15),
        (str_store_string, s14, "str_nah_i_want_a_woman_wholl_keep_quiet_and_do_what_shes_told_i_dont_think_thats_you"),
    (else_try),
        (this_or_next|eq, ":var_1", 3),
        (eq, ":var_1", 5),
        (ge, ":var_2", 10),
        (eq, ":var_7", 0),
        (str_store_string, s14, "str_my_lady_you_are_possessed_of_great_charms_but_no_properties_until_you_obtain_some_to_marry_you_would_be_an_act_of_ingratitude_towards_my_ancestors_and_my_lineage"),
    (else_try),
        (this_or_next|eq, ":var_1", 3),
        (eq, ":var_1", 5),
        (eq, ":var_7", 0),
        (str_store_string, s14, "str_my_lady_you_are_a_woman_of_no_known_family_of_no_possessions__in_short_a_nobody_do_you_think_that_you_are_fit_to_marry_into_may_family"),
    (else_try),
        (neg|ge, ":var_2", 5),
        (neg|ge, ":var_3", 20),
        (neg|eq, ":var_1", 5),
        (neg|eq, ":var_1", 3),
        (str_store_string, s14, "str_my_lady__forgive_me__the_quality_of_our_bond_is_not_of_the_sort_which_the_poets_tell_us_is_necessary_to_sustain_a_happy_marriage"),
    (else_try),
        (eq, ":var_1", 4),
        (faction_get_slot, ":var_10", 11, "$g_talk_troop_faction"),
        (str_store_troop_name, s4, ":var_10"),
        (call_script, "script_troop_get_relation_with_troop", ":var_10", "trp_player"),
        (neg|ge, reg0, -10),
        (str_store_string, s14, "str_um_i_think_that_if_i_want_to_stay_on_s4s_good_side_id_best_not_marry_you"),
    (else_try),
        (gt, "$players_kingdom", 0),
        (neg|eq, "$players_kingdom", "$g_talk_troop_faction"),
        (faction_get_slot, ":var_10", 11, "$g_talk_troop_faction"),
        (troop_get_type, reg4, ":var_10"),
        (str_store_string, s14, "str_you_serve_another_realm_i_dont_see_s4_granting_reg4herhis_blessing_to_our_union"),
    (else_try),
        (gt, ":var_4", -1),
        (str_store_troop_name, s4, ":var_4"),
        (str_store_string, s14, "str_madame_my_heart_currently_belongs_to_s4"),
    (else_try),
        (neg|ge, ":var_3", 10),
        (assign, ":var_9", 2),
        (str_store_string, s14, "str_my_lady_you_are_a_woman_of_great_spirit_and_bravery_possessed_of_beauty_grace_and_wit_i_shall_give_your_proposal_consideration"),
    (else_try),
        (assign, ":var_9", 1),
        (str_store_string, s14, "str_my_lady_you_are_a_woman_of_great_spirit_and_bravery_possessed_of_beauty_grace_and_wit_i_would_be_most_honored_were_you_to_become_my_wife"),
    (try_end),
    (assign, reg0, ":var_9"),

]),

("courtship_poem_reactions",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (troop_get_slot, ":var_2", ":var_0", slot_lord_reputation_type),
    (try_begin),
        (eq, "$cheat_mode", 1),
        (assign, reg4, ":var_1"),
        (assign, reg5, ":var_2"),
        (display_message, "str_poem_choice_reg4_lady_rep_reg5"),
    (try_end),
    (try_begin),
        (eq, ":var_1", 1),
        (eq, ":var_2", 21),
        (str_store_string, s11, "str_ah__kais_and_layali__such_a_sad_tale_many_a_time_has_it_been_recounted_for_my_family_by_the_wandering_poets_who_come_to_our_home_and_it_has_never_failed_to_bring_tears_to_our_eyes"),
        (assign, ":var_3", 5),
    (else_try),
        (eq, ":var_1", 1),
        (eq, ":var_2", 24),
        (str_store_string, s11, "str_kais_and_layali_three_hundred_stanzas_of_pathetic_sniveling_if_you_ask_me_if_kais_wanted_to_escape_heartbreak_he_should_have_learned_to_live_within_his_station_and_not_yearn_for_what_he_cannot_have"),
        (assign, ":var_3", 0),
    (else_try),
        (eq, ":var_1", 1),
        (eq, ":var_2", 23),
        (str_store_string, s11, "str_kais_and_layali_no_one_should_ever_have_written_such_a_sad_poem_if_it_was_the_destiny_of_kais_and_layali_to_be_together_than_their_love_should_have_conquered_all_obstacles"),
        (assign, ":var_3", 1),
    (else_try),
        (eq, ":var_1", 1),
        (str_store_string, s11, "str_ah_kais_and_layali_a_very_old_standby_but_moving_in_its_way"),
        (assign, ":var_3", 3),
    (else_try),
        (eq, ":var_1", 2),
        (eq, ":var_2", 22),
        (str_store_string, s11, "str_the_saga_of_helgered_and_kara_such_happy_times_in_which_our_ancestors_lived_women_like_kara_could_venture_out_into_the_world_like_men_win_a_name_for_themselves_and_not_linger_in_their_husbands_shadow"),
        (assign, ":var_3", 5),
    (else_try),
        (eq, ":var_1", 2),
        (eq, ":var_2", 24),
        (str_store_string, s11, "str_ah_the_saga_of_helgered_and_kara_now_there_was_a_lady_who_knew_what_she_wanted_and_was_not_afraid_to_obtain_it"),
        (assign, ":var_3", 2),
    (else_try),
        (eq, ":var_1", 2),
        (eq, ":var_2", 23),
        (str_store_string, s11, "str_the_saga_of_helgered_and_kara_a_terrible_tale__but_it_speaks_of_a_very_great_love_if_she_were_willing_to_make_war_on_her_own_family"),
        (assign, ":var_3", 2),
    (else_try),
        (eq, ":var_1", 2),
        (eq, ":var_2", 25),
        (str_store_string, s11, "str_the_saga_of_helgered_and_kara_as_i_recall_kara_valued_her_own_base_passions_over_duty_to_her_family_that_she_made_war_on_her_own_father_i_have_no_time_for_a_poem_which_praises_such_a_woman"),
        (assign, ":var_3", 0),
    (else_try),
        (eq, ":var_1", 2),
        (eq, ":var_2", 21),
        (str_store_string, s11, "str_the_saga_of_helgered_and_kara_how_could_a_woman_don_armor_and_carry_a_sword_how_could_a_man_love_so_ungentle_a_creature"),
        (assign, ":var_3", 0),
    (else_try),
        (eq, ":var_1", 3),
        (eq, ":var_2", 23),
        (str_store_string, s11, "str_a_conversation_in_the_garden_i_cannot_understand_the_lady_in_that_poem_if_she_loves_the_man_why_does_she_tease_him_so"),
        (assign, ":var_3", 0),
    (else_try),
        (eq, ":var_1", 3),
        (eq, ":var_2", 25),
        (str_store_string, s11, "str_a_conversation_in_the_garden_let_us_see__it_is_morally_unedifying_it_exalts_deception_it_ends_with_a_maiden_surrendering_to_her_base_passions_and_yet_i_cannot_help_but_find_it_charming_perhaps_because_it_tells_us_that_love_need_not_be_tragic_to_be_memorable"),
        (assign, ":var_3", 1),
    (else_try),
        (eq, ":var_1", 3),
        (eq, ":var_2", 24),
        (str_store_string, s11, "str_a_conversation_in_the_garden_now_that_is_a_tale_every_lady_should_know_by_heart_to_learn_the_subtleties_of_the_politics_she_must_practice"),
        (assign, ":var_3", 5),
    (else_try),
        (eq, ":var_1", 3),
        (str_store_string, s11, "str_a_conversation_in_the_garden_it_is_droll_i_suppose__although_there_is_nothing_there_that_truly_stirs_my_soul"),
        (assign, ":var_3", 3),
    (else_try),
        (eq, ":var_1", 5),
        (eq, ":var_2", 22),
        (str_store_string, s11, "str_storming_the_fortress_of_love_ah_yes_the_lady_sits_within_doing_nothing_while_the_man_is_the_one_who_strives_and_achieves_i_have_enough_of_that_in_my_daily_life_why_listen_to_poems_about_it"),
        (assign, ":var_3", 0),
    (else_try),
        (eq, ":var_1", 5),
        (this_or_next|eq, ":var_2", 21),
        (eq, ":var_2", 25),
        (str_store_string, s11, "str_storming_the_fortress_of_love_ah_yes_an_uplifting_tribute_to_the_separate_virtues_of_man_and_woman"),
        (assign, ":var_3", 3),
    (else_try),
        (eq, ":var_1", 5),
        (eq, ":var_2", 23),
        (str_store_string, s11, "str_storming_the_fortress_of_love_ah_yes_but_although_it_is_a_fine_tale_of_virtues_it_speaks_nothing_of_passion"),
        (assign, ":var_3", 1),
    (else_try),
        (eq, ":var_1", 5),
        (eq, ":var_2", 24),
        (str_store_string, s11, "str_storming_the_fortress_of_love_ah_a_sermon_dressed_up_as_a_love_poem_if_you_ask_me"),
        (assign, ":var_3", 1),
    (else_try),
        (eq, ":var_1", 4),
        (eq, ":var_2", 23),
        (str_store_string, s11, "str_a_hearts_desire_ah_such_a_beautiful_account_of_the_perfect_perfect_love_to_love_like_that_must_be_to_truly_know_rapture"),
        (assign, ":var_3", 4),
    (else_try),
        (eq, ":var_1", 4),
        (eq, ":var_2", 24),
        (str_store_string, s11, "str_a_hearts_desire_silly_if_you_ask_me_if_the_poet_desires_a_lady_then_he_should_endeavor_to_win_her__and_not_dress_up_his_desire_with_a_pretense_of_piety"),
        (assign, ":var_3", 0),
    (else_try),
        (eq, ":var_1", 4),
        (eq, ":var_2", 25),
        (str_store_string, s11, "str_a_hearts_desire_hmm__it_is_an_interesting_exploration_of_earthly_and_divine_love_it_does_speak_of_the_spiritual_quest_which_brings_out_the_best_in_man_but_i_wonder_if_the_poet_has_not_confused_his_yearning_for_higher_things_with_his_baser_passions"),
        (assign, ":var_3", 2),
    (else_try),
        (eq, ":var_1", 4),
        (str_store_string, s11, "str_a_hearts_desire_oh_yes__it_is_very_worthy_and_philosophical_but_if_i_am_to_listen_to_a_bard_strum_a_lute_for_three_hours_i_personally_prefer_there_to_be_a_bit_of_a_story"),
        (assign, ":var_3", 1),
    (try_end),
    (try_begin),
        (eq, "$cheat_mode", 1),
        (assign, reg4, ":var_3"),
        (display_message, "str_result_reg4_string_s11"),
    (try_end),
    (assign, reg0, ":var_3"),

]),

("diplomacy_faction_get_diplomatic_status_with_faction",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_add, ":var_2", ":var_1", 120),
    (store_add, ":var_3", ":var_1", 170),
    (val_sub, ":var_2", "fac_player_supporters_faction"),
    (val_sub, ":var_3", "fac_player_supporters_faction"),
    (assign, ":var_4", 0),
    (assign, ":var_5", 0),
    (try_begin),
        (store_relation, ":var_6", ":var_0", ":var_1"),
        (neg|ge, ":var_6", 0),
        (assign, ":var_4", -2),
    (else_try),
        (faction_slot_ge, ":var_0", ":var_2", 1),
        (assign, ":var_4", 1),
        (faction_get_slot, ":var_5", ":var_0", ":var_2"),
    (else_try),
        (faction_slot_ge, ":var_0", ":var_3", 1),
        (assign, ":var_4", -1),
        (faction_get_slot, ":var_5", ":var_0", ":var_3"),
    (try_end),
    (assign, reg0, ":var_4"),
    (assign, reg1, ":var_5"),

]),

("faction_follows_controversial_policy",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (faction_get_slot, ":var_2", ":var_0", slot_faction_leader),
    (try_begin),
        (ge, "$cheat_mode", 1),
        (str_store_faction_name, s3, ":var_0"),
        (display_message, "str_calculating_effect_for_policy_for_s3"),
        (val_add, "$number_of_controversial_policy_decisions", 1),
    (try_end),
    (try_begin),
        (eq, ":var_1", 80),
        (assign, ":var_3", 0),
        (assign, ":var_4", -2),
        (assign, ":var_5", -1),
    (else_try),
        (eq, ":var_1", 81),
        (assign, ":var_3", -3),
        (assign, ":var_4", 0),
        (assign, ":var_5", 0),
    (else_try),
        (eq, ":var_1", 83),
        (assign, ":var_3", 3),
        (assign, ":var_4", 1),
        (assign, ":var_5", 0),
    (else_try),
        (eq, ":var_1", 84),
        (assign, ":var_3", 0),
        (assign, ":var_4", -3),
        (assign, ":var_5", -5),
    (else_try),
        (eq, ":var_1", 82),
        (assign, ":var_3", -5),
        (assign, ":var_4", 0),
        (assign, ":var_5", 0),
    (try_end),
    (try_begin),
        (eq, ":var_2", "trp_player"),
        (call_script, "script_change_player_honor", ":var_5"),
    (try_end),
    (try_for_range, ":var_6", "trp_npc1", "trp_knight_1_1_wife"),
        (troop_slot_eq, ":var_6", slot_troop_occupation, 2),
        (store_troop_faction, ":var_7", ":var_6"),
        (eq, ":var_7", ":var_0"),
        (neg|eq, ":var_6", ":var_2"),
        (try_begin),
            (this_or_next|troop_slot_eq, ":var_6", slot_lord_reputation_type, 1),
            (this_or_next|troop_slot_eq, ":var_6", slot_lord_reputation_type, 2),
            (this_or_next|troop_slot_eq, ":var_6", slot_lord_reputation_type, 3),
            (troop_slot_eq, ":var_6", slot_lord_reputation_type, 5),
            (call_script, "script_troop_change_relation_with_troop", ":var_2", ":var_6", ":var_3"),
            (val_add, "$total_policy_dispute_changes", ":var_3"),
        (try_end),
        (try_begin),
            (this_or_next|troop_slot_eq, ":var_6", slot_lord_reputation_type, 1),
            (this_or_next|troop_slot_eq, ":var_6", slot_lord_reputation_type, 6),
            (this_or_next|troop_slot_eq, ":var_6", slot_lord_reputation_type, 3),
            (this_or_next|troop_slot_eq, ":var_6", slot_lord_reputation_type, 9),
            (this_or_next|troop_slot_eq, ":var_6", slot_lord_reputation_type, 10),
            (troop_slot_eq, ":var_6", slot_lord_reputation_type, 7),
            (call_script, "script_troop_change_relation_with_troop", ":var_2", ":var_6", ":var_4"),
            (val_add, "$total_policy_dispute_changes", ":var_3"),
        (try_end),
    (try_end),

]),

("internal_politics_rate_feast_to_s9",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 4),
    (val_max, ":var_1", 1),
    (try_for_range, ":var_3", "itm_spice", "itm_siege_supply"),
        (item_set_slot, ":var_3", slot_item_amount_available, 0),
    (try_end),
    (troop_get_inventory_capacity, ":var_4", ":var_0"),
    (try_for_range, ":var_5", 0, ":var_4"),
        (troop_get_inventory_slot, ":var_3", ":var_0", ":var_5"),
        (is_between, ":var_3", "itm_spice", "itm_siege_supply"),
        (troop_inventory_slot_get_item_amount, ":var_6", ":var_0", ":var_5"),
        (item_get_slot, ":var_7", ":var_3", slot_item_amount_available),
        (val_add, ":var_7", ":var_6"),
        (item_set_slot, ":var_3", slot_item_amount_available, ":var_7"),
    (try_end),
    (assign, ":var_8", 0),
    (assign, ":var_9", 0),
    (store_div, ":var_10", ":var_1", 12),
    (try_for_range, ":var_11", "itm_smoked_fish", "itm_siege_supply"),
        (item_get_slot, ":var_12", ":var_11", slot_item_amount_available),
        (val_add, ":var_8", ":var_12"),
        (ge, ":var_12", ":var_10"),
        (val_add, ":var_9", 1),
    (try_end),
    (val_mul, ":var_8", 100),
    (val_div, ":var_8", ":var_1"),
    (val_min, ":var_8", 100),
    (val_mul, ":var_9", 85),
    (val_div, ":var_9", 10),
    (val_min, ":var_9", 100),
    (assign, ":var_13", 0),
    (assign, ":var_14", 0),
    (store_div, ":var_15", ":var_1", 4),
    (try_for_range, ":var_16", "itm_wine", "itm_smoked_fish"),
        (assign, ":var_17", ":var_16"),
        (item_get_slot, ":var_18", ":var_17", slot_item_amount_available),
        (val_add, ":var_13", ":var_18"),
        (ge, ":var_18", ":var_15"),
        (val_add, ":var_14", 1),
    (try_end),
    (val_mul, ":var_13", 200),
    (val_max, ":var_1", 1),
    (val_div, ":var_13", ":var_1"),
    (val_min, ":var_13", 100),
    (val_mul, ":var_14", 50),
    (item_get_slot, ":var_19", "itm_spice", slot_item_amount_available),
    (store_mul, ":var_20", ":var_19", 100),
    (val_max, ":var_10", 1),
    (val_div, ":var_19", ":var_10"),
    (val_min, ":var_20", 100),
    (item_get_slot, ":var_21", "itm_oil", slot_item_amount_available),
    (store_mul, ":var_22", ":var_21", 100),
    (val_max, ":var_10", 1),
    (val_div, ":var_21", ":var_10"),
    (val_min, ":var_22", 100),
    (store_div, ":var_23", ":var_8", 20),
    (val_add, ":var_23", "str_feast_description"),
    (str_store_string, s8, ":var_23"),
    (str_store_string, s9, "str_of_food_which_must_come_before_everything_else_the_amount_is_s8"),
    (store_div, ":var_24", ":var_9", 20),
    (val_add, ":var_24", "str_feast_description"),
    (str_store_string, s8, ":var_24"),
    (str_store_string, s9, "str_s9_and_the_variety_is_s8_"),
    (store_div, ":var_25", ":var_13", 20),
    (val_add, ":var_25", "str_feast_description"),
    (str_store_string, s8, ":var_25"),
    (str_store_string, s9, "str_s9_of_drink_which_guests_will_expect_in_great_abundance_the_amount_is_s8"),
    (store_div, ":var_26", ":var_14", 20),
    (val_add, ":var_26", "str_feast_description"),
    (str_store_string, s8, ":var_26"),
    (str_store_string, s9, "str_s9_and_the_variety_is_s8_"),
    (store_div, ":var_27", ":var_20", 20),
    (val_add, ":var_27", "str_feast_description"),
    (str_store_string, s8, ":var_27"),
    (str_store_string, s9, "str_s9_of_spice_which_is_essential_to_demonstrate_that_we_spare_no_expense_as_hosts_the_amount_is_s8_"),
    (store_div, ":var_28", ":var_22", 20),
    (val_add, ":var_28", "str_feast_description"),
    (str_store_string, s8, ":var_28"),
    (str_store_string, s9, "str_s9_of_oil_which_we_shall_require_to_light_the_lamps_the_amount_is_s8"),
    (store_mul, ":var_29", ":var_8", 8),
    (store_add, ":var_30", ":var_8", ":var_9"),
    (val_mul, ":var_30", 2),
    (val_add, ":var_30", ":var_14"),
    (val_add, ":var_30", ":var_13"),
    (val_add, ":var_30", ":var_19"),
    (val_add, ":var_30", ":var_21"),
    (val_min, ":var_30", ":var_29"),
    (val_div, ":var_30", 8),
    (val_clamp, ":var_30", 1, 101),
    (store_div, ":var_31", ":var_30", 20),
    (val_add, ":var_31", "str_feast_description"),
    (str_store_string, s8, ":var_31"),
    (str_store_string, s9, "str_s9_overall_our_table_will_be_considered_s8"),
    (assign, reg0, ":var_30"),
    (try_begin),
        (eq, ":var_2", 1),
        (assign, ":var_32", ":var_1"),
        (try_for_range, ":var_33", 0, 1999),
            (gt, ":var_32", 0),
            (try_for_range, ":var_3", "itm_spice", "itm_siege_supply"),
                (item_set_slot, ":var_3", slot_item_is_checked, 0),
            (try_end),
            (troop_get_inventory_capacity, ":var_34", ":var_0"),
            (try_for_range, ":var_35", 0, ":var_34"),
                (troop_get_inventory_slot, ":var_3", ":var_0", ":var_35"),
                (this_or_next|eq, ":var_3", "itm_spice"),
                (this_or_next|eq, ":var_3", "itm_oil"),
                (this_or_next|eq, ":var_3", "itm_wine"),
                (this_or_next|eq, ":var_3", "itm_ale"),
                (is_between, ":var_3", "itm_smoked_fish", "itm_siege_supply"),
                (item_slot_eq, ":var_3", slot_item_is_checked, 0),
                (troop_inventory_slot_get_item_amount, ":var_36", ":var_0", ":var_35"),
                (gt, ":var_36", 0),
                (val_sub, ":var_36", 1),
                (troop_inventory_slot_set_item_amount, ":var_0", ":var_35", ":var_36"),
                (val_sub, ":var_32", 1),
                (item_set_slot, ":var_3", slot_item_is_checked, 1),
            (try_end),
        (try_end),
    (try_end),

]),

("faction_get_adjective_to_s10",
[
    (store_script_param, ":var_0", 1),
    (try_begin),
        (eq, ":var_0", "fac_player_faction"),
        (assign, ":var_0", "$players_kingdom"),
    (try_end),
    (try_begin),
        (eq, ":var_0", "fac_player_supporters_faction"),
        (str_store_string, s10, "str_rebel"),
    (else_try),
        (this_or_next|eq, ":var_0", "fac_outlaws"),
        (this_or_next|eq, ":var_0", "fac_mountain_bandits"),
        (this_or_next|eq, ":var_0", "fac_forest_bandits"),
        (eq, ":var_0", "fac_deserters"),
        (str_store_string, s10, "str_bandit"),
    (else_try),
        (faction_get_slot, ":var_1", ":var_0", slot_faction_adjective),
        (str_store_string, s10, ":var_1"),
    (try_end),

]),

("setup_tavern_attacker",
[
    (store_script_param, ":var_0", 1),
    (try_begin),
        (neg|troop_slot_eq, "trp_hired_assassin", slot_troop_cur_center, "$g_encountered_party"),
        (troop_slot_eq, "trp_belligerent_drunk", slot_troop_cur_center, "$g_encountered_party"),
        (set_visitor, ":var_0", "trp_belligerent_drunk"),
    (else_try),
        (store_random_in_range, ":var_1", 0, 101),
        (neg|gt, ":var_1", 10),
        (set_visitor, ":var_0", "trp_belligerent_drunk"),
    (try_end),
    (try_begin),
        (troop_slot_eq, "trp_hired_assassin", slot_troop_cur_center, "$g_encountered_party"),
        (set_visitor, ":var_0", "trp_hired_assassin"),
    (try_end),

]),

("activate_tavern_attackers",
[
    (set_party_battle_mode),
    (try_for_agents, ":var_0"),
        (agent_get_troop_id, ":var_1", ":var_0"),
        (this_or_next|eq, ":var_1", "trp_fugitive"),
        (this_or_next|eq, ":var_1", "trp_belligerent_drunk"),
        (eq, ":var_1", "trp_hired_assassin"),
        (agent_set_team, ":var_0", 1),
        (assign, "$g_main_attacker_agent", ":var_0"),
        (agent_ai_set_aggressiveness, ":var_0", 199),
    (try_end),

]),

("deactivate_tavern_attackers",
[
    (finish_party_battle_mode),
    (try_for_agents, ":var_0"),
        (agent_get_troop_id, ":var_1", ":var_0"),
        (this_or_next|eq, ":var_1", "trp_fugitive"),
        (this_or_next|eq, ":var_1", "trp_belligerent_drunk"),
        (eq, ":var_1", "trp_hired_assassin"),
        (agent_set_team, ":var_0", 0),
        (agent_ai_set_aggressiveness, ":var_0", 0),
    (try_end),

]),

("activate_town_guard",
[
    (set_party_battle_mode),
    (try_for_agents, ":var_0"),
        (agent_get_troop_id, ":var_1", ":var_0"),
        (is_between, ":var_1", "trp_finn_village_recruit", "trp_xerina"),
        (agent_set_team, ":var_0", 1),
    (else_try),
        (this_or_next|is_between, ":var_0", "trp_town_walker_1", "trp_tournament_master"),
        (is_between, ":var_0", "trp_town_1_armorer", "trp_village_1_elder"),
        (agent_clear_scripted_mode, ":var_0"),
        (agent_set_team, ":var_0", 2),
    (try_end),

]),

("cf_prisoner_offered_parole",
[
    (store_script_param, ":var_0", 1),
    (eq, 1, 0),
    (troop_get_slot, ":var_1", ":var_0", slot_troop_prisoner_of_party),
    (party_is_active, ":var_1"),
    (is_between, ":var_1", "p_town_1_1", "p_village_1_1"),
    (party_get_slot, ":var_2", ":var_1", slot_town_lord),
    (troop_get_slot, ":var_3", ":var_0", slot_lord_reputation_type),
    (troop_get_slot, ":var_4", ":var_2", slot_lord_reputation_type),
    (neg|eq, ":var_3", 5),
    (neg|eq, ":var_4", 5),
    (neg|eq, ":var_4", 2),
    (this_or_next|eq, ":var_4", 6),
    (this_or_next|troop_slot_eq, ":var_0", slot_troop_occupation, 2),
    (troop_slot_eq, ":var_0", slot_troop_occupation, 6),
    (call_script, "script_troop_get_relation_with_troop", ":var_2", ":var_0"),
    (ge, reg0, -10),

]),

("neutral_behavior_in_fight",
[
    (get_player_agent_no, ":var_0"),
    (agent_get_position, pos3, ":var_0"),
    (agent_get_team, ":var_1", ":var_0"),
    (try_begin),
        (gt, "$g_main_attacker_agent", 0),
        (agent_get_team, ":var_2", "$g_main_attacker_agent"),
        (agent_get_position, pos5, "$g_main_attacker_agent"),
    (else_try),
        (eq, ":var_2", -1),
        (agent_get_position, pos5, ":var_0"),
    (try_end),
    (set_fixed_point_multiplier, 100),
    (try_for_agents, ":var_3"),
        (agent_get_team, ":var_4", ":var_3"),
        (neg|eq, ":var_4", ":var_2"),
        (neg|eq, ":var_4", ":var_1"),
        (agent_get_troop_id, ":var_5", ":var_3"),
        (neg|is_between, ":var_5", "trp_teu_village_recruit", "trp_looter"),
        (agent_get_position, pos4, ":var_3"),
        (assign, ":var_6", 0),
        (assign, ":var_7", -1),
        (try_begin),
            (neg|agent_slot_eq, ":var_3", slot_agent_is_running_away, 0),
            (agent_get_slot, ":var_8", ":var_3", slot_agent_is_running_away),
            (store_sub, ":var_9", ":var_8", 1),
            (entry_point_get_position, pos6, ":var_9"),
            (get_distance_between_positions, ":var_10", pos6, pos4),
            (neg|ge, ":var_10", 100),
            (agent_set_slot, ":var_3", slot_agent_is_running_away, 0),
        (try_end),
        (agent_slot_eq, ":var_3", slot_agent_is_running_away, 0),
        (try_begin),
            (get_distance_between_positions, ":var_11", pos4, pos5),
            (get_distance_between_positions, ":var_12", pos4, pos3),
            (val_min, ":var_11", ":var_12"),
            (this_or_next|gt, ":var_11", 700),
            (main_hero_fallen),
            (agent_set_scripted_destination, ":var_3", pos4),
        (else_try),
            (try_for_range, ":var_9", 0, 64),
                (neg|entry_point_is_auto_generated, ":var_9"),
                (entry_point_get_position, pos6, ":var_9"),
                (get_distance_between_positions, ":var_10", pos6, pos4),
                (get_distance_between_positions, ":var_13", pos6, pos3),
                (store_sub, ":var_14", ":var_13", ":var_10"),
                (ge, ":var_14", 0),
                (try_begin),
                    (ge, ":var_10", 2000),
                    (store_sub, ":var_15", ":var_10", 2000),
                    (val_min, ":var_15", 1000),
                    (val_min, ":var_10", 2000),
                    (val_sub, ":var_10", ":var_15"),
                (try_end),
                (val_mul, ":var_14", ":var_10"),
                (try_begin),
                    (ge, ":var_14", ":var_6"),
                    (assign, ":var_6", ":var_14"),
                    (assign, ":var_7", ":var_9"),
                (try_end),
            (try_end),
            (try_begin),
                (ge, ":var_7", 0),
                (entry_point_get_position, pos6, ":var_7"),
                (agent_set_speed_limit, ":var_3", 10),
                (agent_set_scripted_destination, ":var_3", pos6),
                (store_add, ":var_16", ":var_7", 1),
                (agent_set_slot, ":var_3", slot_agent_is_running_away, ":var_16"),
            (try_end),
        (try_end),
    (try_end),

]),

("party_inflict_attrition",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (party_clear, "p_temp_casualties"),
    (party_get_num_companion_stacks, ":var_2", ":var_0"),
    (try_for_range, ":var_3", 0, ":var_2"),
        (party_stack_get_troop_id, ":var_4", ":var_0", ":var_3"),
        (neg|troop_is_hero, ":var_4"),
        (party_stack_get_size, ":var_5", ":var_0", ":var_3"),
        (store_mul, ":var_6", ":var_1", ":var_5"),
        (store_div, ":var_7", ":var_6", 100),
        (party_add_members, "p_temp_casualties", ":var_4", ":var_7"),
        (store_mul, ":var_8", ":var_7", 100),
        (store_sub, ":var_9", ":var_6", ":var_8"),
        (try_begin),
            (gt, ":var_9", 0),
            (store_random_in_range, ":var_10", 0, 100),
            (neg|ge, ":var_10", ":var_9"),
            (party_add_members, "p_temp_casualties", ":var_4", ":var_7"),
        (try_end),
    (try_end),
    (party_get_num_companion_stacks, ":var_2", "p_temp_casualties"),
    (try_for_range, ":var_3", 0, ":var_2"),
        (party_stack_get_troop_id, ":var_4", "p_temp_casualties", ":var_3"),
        (party_stack_get_size, ":var_5", "p_temp_casualties", ":var_3"),
        (party_remove_members, ":var_0", ":var_4", ":var_5"),
        (eq, "$cheat_mode", 1),
        (assign, reg3, ":var_5"),
        (str_store_troop_name, s4, ":var_4"),
        (str_store_party_name, s5, ":var_0"),
        (str_store_string, s65, "str_s5_suffers_attrition_reg3_x_s4"),
        (display_message, "str_s65"),
    (try_end),
    (call_script, "script_party_calculate_strength", ":var_0", 1, 0),

]),

("add_rumor_string_to_troop_notes",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (str_store_troop_name, s10, "$g_talk_troop"),
    (str_store_string_reg, s11, ":var_2"),
    (store_current_hours, ":var_3"),
    (call_script, "script_game_get_date_text", 0, ":var_3"),
    (str_store_string, s5, "str_s10_said_on_s1_s11__"),
    (try_begin),
        (is_between, ":var_0", "trp_npc1", "trp_heroes_end"),
        (troop_get_slot, ":var_4", ":var_0", slot_troop_current_rumor),
        (val_add, ":var_4", 1),
        (try_begin),
            (neg|is_between, ":var_4", 3, 16),
            (assign, ":var_4", 3),
        (try_end),
        (troop_set_slot, ":var_0", slot_troop_current_rumor, ":var_4"),
        (add_troop_note_from_sreg, ":var_0", ":var_4", 5, 0),
        (try_begin),
            (eq, "$cheat_mode", 1),
            (str_store_troop_name, s3, ":var_0"),
            (assign, reg4, ":var_4"),
            (display_message, "str_rumor_note_to_s3s_slot_reg4_s5"),
        (try_end),
    (try_end),
    (try_begin),
        (is_between, ":var_1", "trp_npc1", "trp_heroes_end"),
        (troop_get_slot, ":var_4", ":var_1", slot_troop_current_rumor),
        (val_add, ":var_4", 1),
        (try_begin),
            (neg|is_between, ":var_4", 3, 16),
            (assign, ":var_4", 3),
        (try_end),
        (troop_set_slot, ":var_1", slot_troop_current_rumor, ":var_4"),
        (add_troop_note_from_sreg, ":var_1", ":var_4", 5, 0),
        (try_begin),
            (eq, "$cheat_mode", 1),
            (str_store_troop_name, s3, ":var_1"),
            (assign, reg4, ":var_4"),
            (display_message, "str_rumor_note_to_s3s_slot_reg4_s5"),
        (try_end),
    (try_end),

]),

("character_can_wed_character",
[

]),

("troop_change_career",
[

]),

("center_get_goods_availability",
[
    (store_script_param, ":var_0", 1),
    (str_store_party_name, s4, ":var_0"),
    (assign, ":var_1", 0),
    (try_for_range, ":var_2", "itm_spice", "itm_siege_supply"),
        (try_begin),
            (is_between, ":var_0", "p_village_1_1", "p_salt_mine"),
            (item_get_slot, ":var_3", ":var_2", slot_item_rural_demand),
        (else_try),
            (item_get_slot, ":var_3", ":var_2", slot_item_urban_demand),
        (try_end),
        (gt, ":var_3", 2),
        (store_div, ":var_4", ":var_3", 4),
        (store_sub, ":var_5", ":var_2", "itm_spice"),
        (val_add, ":var_5", 250),
        (party_get_slot, ":var_6", ":var_0", ":var_5"),
        (store_sub, ":var_7", ":var_6", 1000),
        (gt, ":var_7", 200),
        (val_div, ":var_7", 200),
        (val_min, ":var_7", ":var_4"),
        (val_add, ":var_1", ":var_7"),
    (try_end),
    (assign, reg0, ":var_1"),
    (try_begin),
        (eq, "$cheat_mode", 1),
        (display_message, "@{!}DEBUG -- hardship index for {s4} = {reg0}"),
    (try_end),

]),

("lord_find_alternative_faction",
[
    (store_script_param, ":var_0", 1),
    (store_troop_faction, ":var_1", ":var_0"),
    (assign, ":var_2", -1),
    (assign, ":var_3", -5),
    (assign, ":var_4", 0),
    (try_for_range, ":var_5", "p_town_1_1", "p_village_1_1"),
        (store_faction_of_party, ":var_6", ":var_5"),
        (eq, ":var_1", ":var_6"),
        (val_add, ":var_4", 1),
    (try_end),
    (try_begin),
        (eq, ":var_4", 0),
        (neg|eq, ":var_1", "fac_player_supporters_faction"),
        (assign, ":var_3", -100),
    (try_end),
    (try_begin),
        (store_random_in_range, ":var_7", 0, 10000),
        (this_or_next|neg|gt, "$g_advantegous_faction", 0),
        (eq, ":var_7", 0),
        (store_random_in_range, "$g_advantegous_faction", "fac_player_supporters_faction", "fac_kingdoms_end"),
    (try_end),
    (try_for_range, ":var_8", "fac_player_supporters_faction", "fac_kingdoms_end"),
        (this_or_next|eq, "$g_give_advantage_to_original_faction", 1),
        (neg|eq, ":var_8", ":var_1"),
        (faction_slot_eq, ":var_8", slot_faction_state, 0),
        (assign, ":var_9", 0),
        (try_for_range, ":var_10", "p_town_1_1", "p_village_1_1"),
            (store_faction_of_party, ":var_6", ":var_10"),
            (eq, ":var_6", ":var_8"),
            (try_begin),
                (party_slot_eq, ":var_10", slot_party_type, 3),
                (val_add, ":var_9", 2),
            (else_try),
                (val_add, ":var_9", 1),
            (try_end),
        (try_end),
        (assign, ":var_11", 0),
        (try_for_range, ":var_12", "trp_kingdom_1_lord", "trp_knight_1_1_wife"),
            (store_troop_faction, ":var_13", ":var_12"),
            (eq, ":var_13", ":var_8"),
            (val_add, ":var_11", 1),
        (try_end),
        (val_max, ":var_11", 1),
        (faction_get_slot, ":var_14", ":var_8", slot_faction_leader),
        (call_script, "script_troop_get_relation_with_troop", ":var_0", ":var_14"),
        (assign, ":var_15", reg0),
        (store_mul, ":var_16", ":var_9", 100),
        (val_div, ":var_16", ":var_11"),
        (val_add, ":var_16", ":var_15"),
        (try_begin),
            (eq, ":var_8", ":var_1"),
            (eq, "$g_give_advantage_to_original_faction", 1),
            (val_add, ":var_16", 100),
        (try_end),
        (try_begin),
            (eq, "$g_advantegous_faction", ":var_8"),
            (val_add, ":var_16", 50),
        (try_end),
        (try_begin),
            (eq, ":var_8", "$players_kingdom"),
            (val_sub, ":var_16", 100),
            (val_add, "$player_right_to_rule"),
        (try_end),
        (gt, ":var_16", ":var_3"),
        (assign, ":var_3", ":var_16"),
        (assign, ":var_2", ":var_8"),
    (try_end),
    (assign, reg0, ":var_2"),

]),

("lord_find_alternative_faction_old",
[
    (store_script_param, ":var_0", 1),
    (store_troop_faction, ":var_1", ":var_0"),
    (assign, ":var_2", 0),
    (try_begin),
        (neg|eq, ":var_1", "fac_player_supporters_faction"),
        (assign, ":var_3", "p_village_1_1"),
        (assign, ":var_2", 1),
        (try_for_range, ":var_4", "p_town_1_1", ":var_3"),
            (store_faction_of_party, ":var_5", ":var_4"),
            (eq, ":var_5", ":var_1"),
            (assign, ":var_2", 0),
            (assign, ":var_3", -1),
        (try_end),
    (try_end),
    (assign, ":var_6", -1),
    (assign, ":var_7", -5),
    (try_begin),
        (eq, ":var_2", 1),
        (assign, ":var_7", -100),
    (try_end),
    (try_for_range, ":var_8", "p_town_1_1", "p_salt_mine"),
        (this_or_next|party_slot_eq, ":var_8", slot_town_lord, -1),
        (party_slot_eq, ":var_8", slot_town_lord, -3),
        (store_faction_of_party, ":var_5", ":var_8"),
        (neg|eq, ":var_5", ":var_1"),
        (faction_get_slot, ":var_9", ":var_5", slot_faction_leader),
        (this_or_next|neg|eq, ":var_9", "trp_player"),
        (ge, "$player_right_to_rule", 25),
        (call_script, "script_troop_get_relation_with_troop", ":var_0", ":var_9"),
        (assign, ":var_10", reg0),
        (gt, ":var_10", ":var_7"),
        (assign, ":var_6", ":var_5"),
        (assign, ":var_7", ":var_10"),
    (try_end),
    (try_begin),
        (eq, ":var_6", -1),
        (assign, ":var_7", 0),
        (try_begin),
            (eq, ":var_2", 1),
            (assign, ":var_7", -100),
        (try_end),
        (try_for_range, ":var_11", "fac_player_supporters_faction", "fac_kingdoms_end"),
            (faction_slot_eq, ":var_11", slot_faction_state, 0),
            (faction_get_slot, ":var_9", ":var_11", slot_faction_leader),
            (call_script, "script_troop_get_relation_with_troop", ":var_0", ":var_9"),
            (assign, ":var_10", reg0),
            (gt, ":var_10", ":var_7"),
            (assign, ":var_6", ":var_11"),
            (assign, ":var_7", ":var_10"),
        (try_end),
    (try_end),
    (assign, reg0, ":var_6"),

]),

("set_up_duel_with_troop",
[
    (store_script_param, "$g_duel_troop", 1),
    (assign, "$g_start_arena_fight_at_nearest_town", 1),
    (try_begin),
        (eq, "$g_start_arena_fight_at_nearest_town", 1),
    (try_end),
    (unlock_achievement, 48),
    (jump_to_menu, "mnu_arena_duel_fight"),
    (finish_mission),

]),

("test_player_for_career_and_marriage_incompatability",
[

]),

("deduct_casualties_from_garrison",
[
    (try_for_agents, ":var_0"),
        (agent_get_troop_id, ":var_1", ":var_0"),
        (is_between, ":var_1", "trp_novice_fighter", "trp_tournament_master"),
        (neg|agent_is_alive, ":var_0"),
        (try_begin),
            (store_troop_count_companions, ":var_2", ":var_1", "$g_encountered_party"),
            (eq, ":var_2", 0),
            (assign, ":var_1", 0),
            (try_for_range, ":var_3", 41, 45),
                (faction_get_slot, ":var_1", "$g_encountered_party_faction", ":var_3"),
                (faction_get_slot, ":var_4", "$g_encountered_party_faction", ":var_3"),
                (store_troop_count_companions, ":var_2", ":var_4", "$g_encountered_party"),
                (gt, ":var_2", 0),
                (assign, ":var_1", ":var_4"),
            (try_end),
        (try_end),
        (gt, ":var_1", 0),
        (party_remove_members, "$g_encountered_party", ":var_1", 1),
        (str_store_troop_name, s4, ":var_1"),
        (str_store_party_name, s5, "$g_encountered_party"),
    (try_end),

]),

("npc_decision_checklist_take_stand_on_issue",
[
    (store_script_param, ":var_0", 1),
    (store_troop_faction, ":var_1", ":var_0"),
    (assign, ":var_2", -1),
    (faction_get_slot, ":var_3", ":var_1", slot_faction_political_issue),
    (assign, ":var_4", 0),
    (try_begin),
        (is_between, ":var_3", "p_town_1_1", "p_salt_mine"),
        (gt, "$g_dont_give_fief_to_player_days", 1),
        (assign, ":var_4", 1),
    (else_try),
        (gt, "$g_dont_give_marshalship_to_player_days", 1),
        (assign, ":var_4", 1),
    (try_end),
    (assign, ":var_5", 0),
    (troop_set_slot, "trp_player", slot_troop_temp_slot, 0),
    (try_begin),
        (eq, "$players_kingdom", ":var_1"),
        (eq, "$player_has_homage", 1),
        (troop_get_slot, ":var_5", "trp_player", slot_troop_renown),
    (try_end),
    (try_for_range, ":var_6", "trp_npc1", "trp_knight_1_1_wife"),
        (troop_set_slot, ":var_6", slot_troop_temp_slot, 0),
        (store_troop_faction, ":var_7", ":var_6"),
        (eq, ":var_7", ":var_1"),
        (troop_slot_eq, ":var_6", slot_troop_occupation, 2),
        (troop_get_slot, ":var_8", ":var_6", slot_troop_renown),
        (val_add, ":var_5", ":var_8"),
    (try_end),
    (assign, ":var_9", 0),
    (try_for_range, ":var_10", "p_town_1_1", "p_salt_mine"),
        (store_faction_of_party, ":var_11", ":var_10"),
        (eq, ":var_11", ":var_1"),
        (assign, ":var_12", 1),
        (try_begin),
            (is_between, ":var_10", "p_town_1_1", "p_castle_1_1"),
            (assign, ":var_12", 2),
        (try_end),
        (val_add, ":var_9", ":var_12"),
        (party_get_slot, ":var_13", ":var_10", slot_town_lord),
        (gt, ":var_13", -1),
        (troop_get_slot, ":var_14", ":var_13", slot_troop_temp_slot),
        (val_add, ":var_14", ":var_12"),
        (troop_set_slot, ":var_13", slot_troop_temp_slot, ":var_14"),
    (try_end),
    (val_max, ":var_9", 1),
    (store_div, ":var_15", ":var_5", ":var_9"),
    (try_begin),
        (is_between, ":var_3", "p_town_1_1", "p_salt_mine"),
        (try_begin),
            (neg|troop_slot_eq, ":var_0", slot_lord_reputation_type, 5),
            (neg|troop_slot_eq, ":var_0", slot_lord_reputation_type, 3),
            (neg|troop_slot_eq, ":var_0", slot_lord_reputation_type, 2),
            (is_between, ":var_3", "p_village_1_1", "p_salt_mine"),
            (assign, ":var_16", -1),
            (assign, ":var_17", -1),
            (try_begin),
                (eq, "$players_kingdom", ":var_1"),
                (eq, "$player_has_homage", 1),
                (eq, ":var_4", 0),
                (troop_slot_eq, "trp_player", slot_troop_temp_slot, 0),
                (call_script, "script_troop_get_relation_with_troop", "trp_player", ":var_0"),
                (assign, ":var_18", reg0),
                (gt, ":var_18", ":var_17"),
                (neg|troop_slot_ge, "trp_player", slot_troop_days_on_mission, 75),
                (assign, ":var_16", "trp_player"),
                (assign, ":var_17", ":var_18"),
            (try_end),
            (try_for_range, ":var_6", "trp_npc1", "trp_knight_1_1_wife"),
                (store_troop_faction, ":var_7", ":var_6"),
                (eq, ":var_7", ":var_1"),
                (troop_slot_eq, ":var_6", slot_troop_occupation, 2),
                (troop_slot_eq, ":var_6", slot_troop_temp_slot, 0),
                (try_begin),
                    (eq, ":var_6", ":var_0"),
                    (assign, ":var_18", 50),
                (else_try),
                    (call_script, "script_troop_get_relation_with_troop", ":var_6", ":var_0"),
                    (assign, ":var_18", reg0),
                (try_end),
                (neg|troop_slot_ge, ":var_6", slot_troop_days_on_mission, 75),
                (gt, ":var_18", ":var_17"),
                (assign, ":var_16", ":var_6"),
                (assign, ":var_17", ":var_18"),
            (try_end),
            (gt, ":var_16", -1),
            (assign, ":var_2", ":var_16"),
            (assign, ":var_19", "str_political_explanation_lord_lacks_center"),
        (else_try),
            (is_between, ":var_3", "p_town_1_1", "p_village_1_1"),
            (neg|troop_slot_eq, ":var_0", slot_lord_reputation_type, 5),
            (neg|troop_slot_eq, ":var_0", slot_lord_reputation_type, 3),
            (neg|troop_slot_eq, ":var_0", slot_lord_reputation_type, 4),
            (party_get_slot, ":var_20", ":var_3", slot_center_last_taken_by_troop),
            (try_begin),
                (try_begin),
                    (neg|eq, ":var_1", "$players_kingdom"),
                    (assign, ":var_20", -1),
                (else_try),
                    (eq, "$player_has_homage", 0),
                    (assign, ":var_20", -1),
                (else_try),
                    (eq, ":var_3", "$g_castle_requested_by_player"),
                    (assign, ":var_20", "trp_player"),
                (else_try),
                    (eq, ":var_3", "$g_castle_requested_for_troop"),
                    (assign, ":var_20", "trp_player"),
                (else_try),
                    (gt, ":var_20", -1),
                    (store_troop_faction, ":var_21", ":var_20"),
                    (neg|eq, ":var_21", ":var_1"),
                    (assign, ":var_20", -1),
                (try_end),
            (try_end),
            (gt, ":var_20", -1),
            (try_begin),
                (eq, "$cheat_mode", 1),
                (gt, ":var_20", -1),
                (str_store_troop_name, s3, ":var_20"),
                (display_message, "@{!}Castle taken by {s3}"),
            (try_end),
            (call_script, "script_troop_get_relation_with_troop", ":var_0", ":var_20"),
            (ge, reg0, 0),
            (neg|troop_slot_ge, ":var_20", slot_troop_days_on_mission, 25),
            (troop_get_slot, ":var_8", ":var_20", slot_troop_renown),
            (troop_get_slot, ":var_22", ":var_20", slot_troop_temp_slot),
            (val_max, ":var_22", 1),
            (store_div, ":var_23", ":var_8", ":var_22"),
            (val_mul, ":var_23", 6),
            (val_div, ":var_23", 4),
            (ge, ":var_23", ":var_15"),
            (assign, ":var_2", ":var_20"),
            (assign, ":var_19", "str_political_explanation_lord_took_center"),
        (else_try),
            (assign, ":var_24", -1),
            (assign, ":var_17", ":var_15"),
            (val_div, ":var_17", 3),
            (val_mul, ":var_17", 2),
            (try_begin),
                (eq, "$cheat_mode", 1),
                (assign, reg3, ":var_17"),
                (display_message, "@{!}Two-thirds average renown = {reg3}"),
            (try_end),
            (try_begin),
                (eq, "$players_kingdom", ":var_1"),
                (eq, "$player_has_homage", 1),
                (eq, ":var_4", 0),
                (call_script, "script_troop_get_relation_with_troop", "trp_player", ":var_0"),
                (assign, ":var_18", reg0),
                (ge, ":var_18", 20),
                (neg|troop_slot_ge, "trp_player", slot_troop_days_on_mission, 50),
                (troop_get_slot, ":var_8", "trp_player", slot_troop_renown),
                (troop_get_slot, ":var_22", "trp_player", slot_troop_temp_slot),
                (val_max, ":var_22", 1),
                (store_div, ":var_23", ":var_8", ":var_22"),
                (assign, ":var_24", "trp_player"),
                (assign, ":var_17", ":var_23"),
            (try_end),
            (try_for_range, ":var_6", "trp_npc1", "trp_knight_1_1_wife"),
                (store_troop_faction, ":var_7", ":var_6"),
                (eq, ":var_7", ":var_1"),
                (troop_slot_eq, ":var_6", slot_troop_occupation, 2),
                (call_script, "script_troop_get_relation_with_troop", ":var_6", ":var_0"),
                (assign, ":var_18", reg0),
                (this_or_next|eq, ":var_6", ":var_0"),
                (ge, ":var_18", 20),
                (neg|troop_slot_ge, ":var_6", slot_troop_days_on_mission, 50),
                (troop_get_slot, ":var_8", ":var_6", slot_troop_renown),
                (troop_get_slot, ":var_22", ":var_6", slot_troop_temp_slot),
                (val_max, ":var_22", 1),
                (store_div, ":var_23", ":var_8", ":var_22"),
                (try_begin),
                    (eq, "$cheat_mode", 1),
                    (str_store_troop_name, s10, ":var_6"),
                    (assign, reg3, ":var_23"),
                    (display_message, "@{!}DEBUG -- Colleague test: score for {s10} = {reg3}"),
                (try_end),
                (gt, ":var_23", ":var_17"),
                (assign, ":var_24", ":var_6"),
                (assign, ":var_17", ":var_23"),
            (try_end),
            (gt, ":var_24", -1),
            (assign, ":var_2", ":var_24"),
            (assign, ":var_19", "str_political_explanation_most_deserving_friend"),
        (else_try),
            (neg|troop_slot_eq, ":var_0", slot_lord_reputation_type, 5),
            (neg|troop_slot_eq, ":var_0", slot_lord_reputation_type, 3),
            (neg|troop_slot_eq, ":var_0", slot_lord_reputation_type, 2),
            (assign, ":var_25", -1),
            (assign, ":var_17", 0),
            (try_begin),
                (eq, "$players_kingdom", ":var_1"),
                (eq, "$player_has_homage", 1),
                (eq, ":var_4", 0),
                (call_script, "script_troop_get_relation_with_troop", "trp_player", ":var_0"),
                (assign, ":var_18", reg0),
                (ge, ":var_18", 0),
                (troop_get_slot, ":var_8", "trp_player", slot_troop_renown),
                (troop_get_slot, ":var_22", "trp_player", slot_troop_temp_slot),
                (neg|troop_slot_ge, "trp_player", slot_troop_days_on_mission, 25),
                (val_max, ":var_22", 1),
                (store_div, ":var_23", ":var_8", ":var_22"),
                (assign, ":var_25", "trp_player"),
                (assign, ":var_17", ":var_23"),
            (try_end),
            (try_for_range, ":var_6", "trp_npc1", "trp_knight_1_1_wife"),
                (store_troop_faction, ":var_7", ":var_6"),
                (eq, ":var_7", ":var_1"),
                (troop_slot_eq, ":var_6", slot_troop_occupation, 2),
                (call_script, "script_troop_get_relation_with_troop", ":var_6", ":var_0"),
                (assign, ":var_18", reg0),
                (this_or_next|eq, ":var_6", ":var_0"),
                (ge, ":var_18", 0),
                (neg|troop_slot_ge, ":var_6", slot_troop_days_on_mission, 25),
                (troop_get_slot, ":var_8", ":var_6", slot_troop_renown),
                (troop_get_slot, ":var_22", ":var_6", slot_troop_temp_slot),
                (val_max, ":var_22", 1),
                (store_div, ":var_23", ":var_8", ":var_22"),
                (gt, ":var_23", ":var_17"),
                (try_begin),
                    (eq, "$cheat_mode", 1),
                    (str_store_string, s10, ":var_6"),
                    (assign, reg3, ":var_23"),
                    (display_message, "@{!}DEBUG -- Open test: score for {s10} = {reg3}"),
                (try_end),
                (assign, ":var_25", ":var_6"),
                (assign, ":var_17", ":var_23"),
            (try_end),
            (gt, ":var_25", -1),
            (assign, ":var_2", ":var_25"),
            (assign, ":var_19", "str_political_explanation_most_deserving_in_faction"),
        (else_try),
            (assign, ":var_2", ":var_0"),
            (assign, ":var_19", "str_political_explanation_self"),
        (try_end),
    (else_try),
        (eq, ":var_3", 1),
        (assign, ":var_26", 15),
        (try_begin),
            (troop_slot_eq, ":var_0", slot_lord_reputation_type, 7),
            (assign, ":var_26", 5),
        (else_try),
            (troop_slot_eq, ":var_0", slot_lord_reputation_type, 5),
            (assign, ":var_26", 25),
        (try_end),
        (assign, ":var_27", -1),
        (assign, ":var_17", 0),
        (try_begin),
            (eq, "$players_kingdom", ":var_1"),
            (eq, "$player_has_homage", 1),
            (eq, "$g_player_is_captive", 0),
            (eq, ":var_4", 0),
            (call_script, "script_troop_get_relation_with_troop", "trp_player", ":var_0"),
            (ge, reg0, ":var_26"),
            (assign, ":var_27", "trp_player"),
            (troop_get_slot, ":var_8", "trp_player", slot_troop_renown),
            (troop_get_slot, ":var_28", "trp_player", slot_troop_days_on_mission),
            (val_add, ":var_28", 50),
            (store_div, ":var_17", ":var_8", ":var_28"),
        (try_end),
        (try_for_range, ":var_6", "trp_npc1", "trp_knight_1_1_wife"),
            (store_troop_faction, ":var_7", ":var_6"),
            (eq, ":var_7", ":var_1"),
            (troop_slot_eq, ":var_6", slot_troop_occupation, 2),
            (troop_slot_eq, ":var_6", slot_troop_prisoner_of_party, -1),
            (neg|faction_slot_eq, ":var_1", slot_faction_leader, ":var_6"),
            (call_script, "script_troop_get_relation_with_troop", ":var_6", ":var_0"),
            (assign, ":var_18", reg0),
            (this_or_next|eq, ":var_6", ":var_0"),
            (ge, ":var_18", ":var_26"),
            (troop_get_slot, ":var_8", ":var_6", slot_troop_renown),
            (troop_get_slot, ":var_28", ":var_6", slot_troop_days_on_mission),
            (val_add, ":var_28", 50),
            (store_div, ":var_29", ":var_8", ":var_28"),
            (gt, ":var_29", ":var_17"),
            (assign, ":var_27", ":var_6"),
            (assign, ":var_17", ":var_29"),
        (try_end),
        (assign, ":var_2", ":var_27"),
        (assign, ":var_19", "str_political_explanation_marshal"),
    (try_end),
    (try_begin),
        (eq, "$cheat_mode", 1),
        (gt, ":var_2", -1),
        (str_store_troop_name, s8, ":var_0"),
        (str_store_troop_name, s9, ":var_2"),
        (str_store_string, s10, ":var_19"),
        (display_message, "@{!}DEBUG -- {s8} backs {s9}:{s10}"),
    (try_end),
    (assign, reg0, ":var_2"),
    (assign, reg1, ":var_19"),

]),

("npc_decision_checklist_evaluate_faction_strategy",
[

]),

("process_player_enterprise",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (item_get_slot, ":var_2", ":var_0", slot_item_overhead_per_run),
    (item_get_slot, ":var_3", ":var_0", slot_item_base_price),
    (store_sub, ":var_4", ":var_0", "itm_spice"),
    (val_add, ":var_4", 250),
    (party_get_slot, ":var_5", ":var_1", ":var_4"),
    (store_mul, ":var_6", ":var_3", ":var_5"),
    (val_div, ":var_6", 1000),
    (item_get_slot, ":var_7", ":var_0", slot_item_output_per_run),
    (store_mul, ":var_8", ":var_7", ":var_6"),
    (item_get_slot, ":var_9", ":var_0", slot_item_primary_raw_material),
    (item_get_slot, ":var_3", ":var_9", slot_item_base_price),
    (store_sub, ":var_4", ":var_9", "itm_spice"),
    (val_add, ":var_4", 250),
    (party_get_slot, ":var_5", ":var_1", ":var_4"),
    (store_mul, ":var_10", ":var_3", ":var_5"),
    (val_div, ":var_10", 1000),
    (item_get_slot, ":var_11", ":var_0", slot_item_input_number),
    (try_begin),
        (neg|ge, ":var_11", 0),
        (store_div, ":var_12", ":var_10", 2),
    (else_try),
        (store_mul, ":var_12", ":var_10", ":var_11"),
    (try_end),
    (try_begin),
        (item_slot_ge, ":var_0", slot_item_secondary_raw_material, 1),
        (item_get_slot, ":var_13", ":var_0", slot_item_secondary_raw_material),
        (item_get_slot, ":var_3", ":var_13", slot_item_base_price),
        (store_sub, ":var_4", ":var_13", "itm_spice"),
        (val_add, ":var_4", 250),
        (party_get_slot, ":var_5", ":var_1", ":var_4"),
        (try_begin),
            (neg|ge, ":var_11", 0),
            (store_div, ":var_14", ":var_14", 2),
        (else_try),
            (store_mul, ":var_14", ":var_14", ":var_11"),
        (try_end),
        (store_mul, ":var_14", ":var_3", ":var_5"),
        (val_div, ":var_14", 1000),
    (else_try),
        (assign, ":var_14", 0),
    (try_end),
    (store_sub, ":var_15", ":var_8", ":var_12"),
    (val_sub, ":var_15", ":var_2"),
    (val_sub, ":var_15", ":var_14"),
    (assign, reg0, ":var_15"),
    (assign, reg1, ":var_8"),
    (assign, reg2, ":var_12"),
    (assign, reg3, ":var_2"),
    (assign, reg4, ":var_6"),
    (assign, reg5, ":var_10"),
    (assign, reg10, ":var_14"),

]),

("replace_scene_items_with_spawn_items_before_ms",
[
    (try_for_range, ":var_0", 0, "itm_pig_killer"),
        (scene_item_get_num_instances, ":var_1", ":var_0"),
        (item_set_slot, ":var_0", slot_item_num_positions, 0),
        (assign, ":var_2", 0),
        (try_for_range, ":var_3", 0, ":var_1"),
            (scene_item_get_instance, ":var_4", ":var_0", ":var_3"),
            (prop_instance_get_position, "$g_position_to_use_for_replacing_scene_items", ":var_4"),
            (store_add, ":var_5", 23, ":var_2"),
            (item_set_slot, ":var_0", ":var_5", "$g_position_to_use_for_replacing_scene_items"),
            (val_add, ":var_2", 1),
            (val_add, "$g_position_to_use_for_replacing_scene_items", 1),
            (item_set_slot, ":var_0", slot_item_num_positions, ":var_2"),
        (try_end),
        (replace_scene_items_with_scene_props, ":var_0", "spr_empty"),
    (try_end),

]),

("replace_scene_items_with_spawn_items_after_ms",
[
    (try_for_range, ":var_0", 0, "itm_pig_killer"),
        (item_get_slot, ":var_1", ":var_0", slot_item_num_positions),
        (try_for_range, ":var_2", 0, ":var_1"),
            (store_add, ":var_3", 23, ":var_2"),
            (item_get_slot, ":var_4", ":var_0", ":var_3"),
            (set_spawn_position, ":var_4"),
            (spawn_item, ":var_0", 0),
        (try_end),
    (try_end),

]),

("cf_is_melee_weapon_for_tutorial",
[
    (store_script_param, ":var_0", 1),
    (assign, ":var_1", 0),
    (try_begin),
        (this_or_next|eq, ":var_0", "itm_quarter_staff"),
        (eq, ":var_0", "itm_practice_sword"),
        (assign, ":var_1", 1),
    (try_end),
    (eq, ":var_1", 1),

]),

("iterate_pointer_arrow",
[
    (store_mission_timer_a_msec, ":var_0"),
    (try_begin),
        (assign, ":var_1", ":var_0"),
        (assign, ":var_2", ":var_0"),
        (val_mod, ":var_1", 1080),
        (val_div, ":var_1", 3),
        (scene_prop_get_instance, ":var_3", "spr_pointer_arrow", 0),
        (prop_instance_get_position, pos0, ":var_3"),
        (position_set_z_to_ground_level, pos0),
        (position_move_z, pos0, "$g_pointer_arrow_height_adder", 1),
        (set_fixed_point_multiplier, 100),
        (val_mul, ":var_1", 100),
        (store_sin, ":var_4", ":var_1"),
        (position_move_z, pos0, ":var_4", 1),
        (position_move_z, pos0, 100, 1),
        (val_mod, ":var_2", 2880),
        (val_div, ":var_2", 8),
        (init_position, pos1),
        (position_rotate_z, pos1, ":var_2"),
        (position_copy_rotation, pos0, pos1),
        (prop_instance_set_position, ":var_3", pos0),
    (try_end),

]),

("find_center_to_attack_alt",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (assign, ":var_3", -1),
    (assign, ":var_4", 0),
    (try_for_range, ":var_5", "p_town_1_1", "p_salt_mine"),
        (call_script, "script_npc_decision_checklist_evaluate_enemy_center_for_attack", ":var_0", ":var_5", ":var_1", ":var_2"),
        (assign, ":var_6", reg0),
        (gt, ":var_6", ":var_4"),
        (assign, ":var_3", ":var_5"),
        (assign, ":var_4", ":var_6"),
    (try_end),
    (assign, reg0, ":var_3"),
    (assign, reg1, ":var_4"),

]),

("npc_decision_checklist_evaluate_enemy_center_for_attack",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (store_script_param, ":var_3", 4),
    (assign, ":var_4", -1),
    (assign, ":var_5", -1),
    (assign, ":var_6", 0),
    (store_troop_faction, ":var_7", ":var_0"),
    (try_begin),
        (eq, ":var_2", 1),
        (faction_get_slot, ":var_8", ":var_7", slot_faction_marshall),
        (ge, ":var_8", 0),
        (troop_get_slot, ":var_9", ":var_8", slot_troop_leaded_party),
    (else_try),
        (troop_get_slot, ":var_9", ":var_0", slot_troop_leaded_party),
    (try_end),
    (assign, "$g_use_current_ai_object_as_s8", 0),
    (try_begin),
        (neg|party_is_active, ":var_9"),
        (assign, ":var_4", -1),
        (assign, ":var_5", "str_center_party_not_active"),
    (else_try),
        (store_faction_of_party, ":var_10", ":var_1"),
        (store_relation, ":var_11", ":var_10", ":var_7"),
        (ge, ":var_11", 0),
        (assign, ":var_4", -1),
        (assign, ":var_5", "str_center_is_friendly"),
    (else_try),
        (is_between, ":var_1", "p_town_1_1", "p_village_1_1"),
        (assign, ":var_12", -1),
        (try_begin),
            (neg|party_slot_eq, ":var_1", slot_center_is_besieged_by, -1),
            (party_get_slot, ":var_13", ":var_1", slot_center_is_besieged_by),
            (party_is_active, ":var_13"),
            (store_faction_of_party, ":var_12", ":var_13"),
        (try_end),
        (neg|eq, ":var_12", -1),
        (neg|eq, ":var_12", ":var_7"),
        (assign, ":var_4", -1),
        (assign, ":var_5", "str_center_is_already_besieged"),
    (else_try),
        (is_between, ":var_1", "p_village_1_1", "p_salt_mine"),
        (assign, ":var_14", 0),
        (try_begin),
            (party_slot_eq, ":var_1", slot_village_state, 1),
            (party_get_slot, ":var_15", ":var_1", slot_village_raided_by),
            (party_is_active, ":var_15"),
            (store_faction_of_party, ":var_16", ":var_15"),
            (neg|eq, ":var_16", ":var_7"),
            (assign, ":var_17", 1),
        (else_try),
            (assign, ":var_17", 0),
        (try_end),
        (try_begin),
            (this_or_next|party_slot_eq, ":var_1", slot_village_state, 2),
            (eq, ":var_17", 1),
            (assign, ":var_14", 1),
        (try_end),
        (eq, ":var_14", 1),
        (assign, ":var_4", -1),
        (assign, ":var_5", "str_center_is_looted_or_raided_already"),
    (else_try),
        (this_or_next|troop_slot_eq, ":var_0", slot_lord_reputation_type, 7),
        (troop_slot_eq, ":var_0", slot_lord_reputation_type, 6),
        (is_between, ":var_1", "p_village_1_1", "p_salt_mine"),
        (assign, ":var_4", -1),
        (assign, ":var_5", "str_center_marshal_does_not_want_to_attack_innocents"),
    (else_try),
        (assign, ":var_18", 1000),
        (try_for_range, ":var_19", "p_town_1_1", "p_village_1_1"),
            (store_faction_of_party, ":var_20", ":var_19"),
            (eq, ":var_20", ":var_7"),
            (store_distance_to_party_from_party, ":var_21", ":var_19", ":var_1"),
            (neg|ge, ":var_21", ":var_18"),
            (assign, ":var_18", ":var_21"),
        (try_end),
        (gt, ":var_18", 325),
        (this_or_next|troop_slot_eq, ":var_0", slot_lord_reputation_type, 7),
        (this_or_next|troop_slot_eq, ":var_0", slot_lord_reputation_type, 5),
        (this_or_next|troop_slot_eq, ":var_0", slot_lord_reputation_type, 6),
        (troop_slot_eq, ":var_0", slot_lord_reputation_type, 4),
        (assign, ":var_4", -1),
        (assign, ":var_5", "str_center_far_away_our_cautious_marshal_does_not_wish_to_reconnoiter"),
    (else_try),
        (gt, ":var_18", 370),
        (assign, ":var_4", -1),
        (assign, ":var_5", "str_center_far_away_even_for_our_aggressive_marshal_to_reconnoiter"),
    (else_try),
        (is_between, ":var_1", "p_town_1_1", "p_village_1_1"),
        (neg|troop_slot_eq, ":var_0", slot_lord_reputation_type, 1),
        (neg|troop_slot_eq, ":var_0", slot_lord_reputation_type, 2),
        (neg|troop_slot_eq, ":var_0", slot_lord_reputation_type, 3),
        (assign, ":var_22", 0),
        (try_for_range, ":var_23", "p_town_1_1", "p_village_1_1"),
            (eq, ":var_22", 0),
            (store_faction_of_party, ":var_24", ":var_23"),
            (eq, ":var_24", ":var_7"),
            (store_distance_to_party_from_party, ":var_25", ":var_1", ":var_23"),
            (neg|ge, ":var_25", 180),
            (assign, ":var_22", 1),
        (try_end),
        (eq, ":var_22", 0),
        (assign, ":var_4", -1),
        (assign, ":var_5", "str_center_is_indefensible"),
    (else_try),
        (party_get_slot, ":var_26", ":var_9", slot_party_cached_strength),
        (party_get_slot, ":var_27", ":var_9", slot_party_follower_strength),
        (party_get_slot, ":var_28", ":var_9", slot_party_nearby_friend_strength),
        (store_add, ":var_29", ":var_26", ":var_27"),
        (val_add, ":var_29", ":var_28"),
        (try_begin),
            (is_between, ":var_1", "p_village_1_1", "p_salt_mine"),
            (assign, ":var_30", 10),
        (else_try),
            (party_get_slot, ":var_30", ":var_1", slot_party_cached_strength),
            (party_get_slot, ":var_31", ":var_1", slot_party_nearby_friend_strength),
            (val_add, ":var_30", ":var_31"),
        (try_end),
        (val_max, ":var_30", 1),
        (this_or_next|troop_slot_eq, ":var_0", slot_lord_reputation_type, 1),
        (this_or_next|troop_slot_eq, ":var_0", slot_lord_reputation_type, 2),
        (troop_slot_eq, ":var_0", slot_lord_reputation_type, 3),
        (store_mul, ":var_6", ":var_29", 100),
        (val_div, ":var_6", ":var_30"),
        (neg|ge, ":var_6", 150),
        (assign, ":var_4", -1),
        (assign, ":var_5", "str_center_protected_by_enemy_army_aggressive"),
    (else_try),
        (ge, ":var_30", ":var_29"),
        (assign, ":var_4", -1),
        (assign, ":var_5", "str_center_protected_by_enemy_army_cautious"),
    (else_try),
        (store_mul, ":var_6", ":var_29", 100),
        (val_div, ":var_6", ":var_30"),
        (neg|ge, ":var_6", 185),
        (this_or_next|troop_slot_eq, ":var_0", slot_lord_reputation_type, 7),
        (this_or_next|troop_slot_eq, ":var_0", slot_lord_reputation_type, 5),
        (this_or_next|troop_slot_eq, ":var_0", slot_lord_reputation_type, 6),
        (troop_slot_eq, ":var_0", slot_lord_reputation_type, 4),
        (assign, ":var_4", -1),
        (assign, ":var_5", "str_center_cautious_marshal_believes_center_too_difficult_to_capture"),
    (else_try),
        (neg|ge, ":var_6", 140),
        (assign, ":var_4", -1),
        (assign, ":var_5", "str_center_even_aggressive_marshal_believes_center_too_difficult_to_capture"),
    (else_try),
        (faction_slot_eq, ":var_7", slot_faction_ai_state, 3),
        (faction_get_slot, ":var_32", ":var_7", slot_faction_ai_object),
        (is_between, ":var_32", "p_village_1_1", "p_salt_mine"),
        (neg|eq, ":var_1", ":var_32"),
        (party_slot_eq, ":var_32", slot_village_state, 5),
        (store_current_hours, ":var_33"),
        (party_get_slot, ":var_34", ":var_32", slot_center_siege_begin_hours),
        (val_sub, ":var_33", ":var_34"),
        (gt, ":var_33", 4),
        (call_script, "script_npc_decision_checklist_evaluate_enemy_center_for_attack", ":var_0", ":var_32", ":var_2", 0),
        (gt, reg0, -1),
        (assign, ":var_4", -1),
        (assign, ":var_5", "str_center_we_have_already_committed_too_much_time_to_our_present_siege_to_move_elsewhere"),
    (else_try),
        (faction_slot_eq, ":var_7", slot_faction_ai_state, 3),
        (faction_get_slot, ":var_32", ":var_7", slot_faction_ai_object),
        (neg|eq, ":var_1", ":var_32"),
        (is_between, ":var_32", "p_village_1_1", "p_salt_mine"),
        (store_distance_to_party_from_party, ":var_35", ":var_9", ":var_32"),
        (neg|ge, ":var_35", 10),
        (call_script, "script_npc_decision_checklist_evaluate_enemy_center_for_attack", ":var_0", ":var_32", ":var_2", 0),
        (gt, reg0, -1),
        (assign, "$g_use_current_ai_object_as_s8", 1),
        (assign, ":var_4", -1),
        (assign, ":var_5", "str_center_we_are_already_here_we_should_at_least_loot_the_village"),
    (else_try),
        (try_begin),
            (eq, "$cheat_mode", 1),
            (eq, ":var_7", "fac_kingdom_3"),
            (store_faction_of_party, ":var_10", ":var_1"),
            (store_relation, ":var_11", ":var_10", ":var_7"),
            (neg|ge, ":var_11", 0),
        (try_end),
        (call_script, "script_calculate_center_assailability_score", ":var_0", ":var_1", ":var_3"),
        (assign, ":var_36", reg0),
        (assign, ":var_6", reg1),
        (assign, ":var_4", ":var_36"),
        (try_begin),
            (neg|gt, ":var_6", 100),
            (try_begin),
                (this_or_next|troop_slot_eq, ":var_0", slot_lord_reputation_type, 7),
                (this_or_next|troop_slot_eq, ":var_0", slot_lord_reputation_type, 5),
                (this_or_next|troop_slot_eq, ":var_0", slot_lord_reputation_type, 6),
                (troop_slot_eq, ":var_0", slot_lord_reputation_type, 4),
                (assign, ":var_5", "str_center_cautious_marshal_believes_center_too_difficult_to_capture"),
            (else_try),
                (assign, ":var_5", "str_center_even_aggressive_marshal_believes_center_too_difficult_to_capture"),
            (try_end),
        (else_try),
            (neg|gt, ":var_6", 150),
            (try_begin),
                (this_or_next|troop_slot_eq, ":var_0", slot_lord_reputation_type, 7),
                (this_or_next|troop_slot_eq, ":var_0", slot_lord_reputation_type, 5),
                (this_or_next|troop_slot_eq, ":var_0", slot_lord_reputation_type, 6),
                (troop_slot_eq, ":var_0", slot_lord_reputation_type, 4),
                (assign, ":var_5", "str_center_protected_by_enemy_army_cautious"),
            (else_try),
                (assign, ":var_5", "str_center_protected_by_enemy_army_aggressive"),
            (try_end),
        (else_try),
            (try_begin),
                (neg|gt, ":var_36", "$g_faction_object_score"),
                (assign, ":var_5", "str_center_value_outweighed_by_difficulty_of_capture"),
            (else_try),
                (assign, ":var_5", "str_center_value_justifies_the_difficulty_of_capture"),
            (try_end),
        (try_end),
    (try_end),
    (assign, reg0, ":var_4"),
    (assign, reg1, ":var_5"),
    (assign, reg2, ":var_6"),

]),

("npc_decision_checklist_faction_ai_alt",
[
    (store_script_param, ":var_0", 1),
    (store_troop_faction, ":var_1", ":var_0"),
    (str_store_troop_name, s4, ":var_0"),
    (str_store_faction_name, s33, ":var_1"),
    (try_begin),
        (eq, "$cheat_mode", 1),
        (display_message, "@{!}DEBUG -- {s4} produces a faction strategy for {s33}"),
    (try_end),
    (faction_get_slot, ":var_2", ":var_1", slot_faction_marshall),
    (faction_get_slot, ":var_3", ":var_1", slot_faction_ai_state),
    (faction_get_slot, ":var_4", ":var_1", slot_faction_ai_object),
    (assign, ":var_5", -1),
    (assign, ":var_6", 0),
    (try_begin),
        (gt, ":var_2", 0),
        (troop_get_slot, ":var_5", ":var_2", slot_troop_leaded_party),
        (party_is_active, ":var_5"),
        (party_get_slot, ":var_7", ":var_5", slot_party_cached_strength),
        (party_get_slot, ":var_8", ":var_5", slot_party_follower_strength),
        (store_add, ":var_6", ":var_7", ":var_8"),
    (try_end),
    (store_current_hours, ":var_9"),
    (faction_get_slot, ":var_10", ":var_1", slot_faction_ai_last_offensive_time),
    (val_sub, ":var_9", ":var_10"),
    (store_current_hours, ":var_11"),
    (faction_get_slot, ":var_12", ":var_1", slot_faction_last_feast_concluded),
    (val_sub, ":var_11", ":var_12"),
    (store_current_hours, ":var_13"),
    (faction_get_slot, ":var_14", ":var_1", slot_faction_ai_current_state_started),
    (val_sub, ":var_13", ":var_14"),
    (store_current_hours, ":var_15"),
    (faction_get_slot, ":var_16", ":var_1", slot_faction_ai_last_rest_time),
    (val_sub, ":var_15", ":var_16"),
    (try_begin),
        (ge, ":var_9", 1080),
        (assign, ":var_17", 100),
    (else_try),
        (ge, ":var_9", 480),
        (store_sub, ":var_17", ":var_9", 480),
        (val_div, ":var_17", 20),
        (val_add, ":var_17", 64),
    (else_try),
        (ge, ":var_9", 240),
        (store_sub, ":var_17", ":var_9", 240),
        (val_div, ":var_17", 10),
        (val_add, ":var_17", 40),
    (else_try),
        (store_div, ":var_17", ":var_9", 6),
    (try_end),
    (call_script, "script_find_center_to_defend", ":var_0"),
    (assign, ":var_18", reg0),
    (assign, ":var_19", reg1),
    (assign, ":var_20", reg2),
    (assign, ":var_21", 0),
    (assign, ":var_22", 0),
    (try_for_range, ":var_23", "trp_npc1", "trp_knight_1_1_wife"),
        (store_troop_faction, ":var_24", ":var_23"),
        (eq, ":var_24", ":var_1"),
        (troop_get_slot, ":var_25", ":var_23", slot_troop_leaded_party),
        (party_is_active, ":var_25"),
        (val_add, ":var_22", 1),
        (party_slot_eq, ":var_25", slot_party_ai_state, 11),
        (party_slot_eq, ":var_25", slot_party_ai_object, ":var_5"),
        (party_is_active, ":var_5"),
        (store_distance_to_party_from_party, ":var_26", ":var_25", ":var_5"),
        (neg|ge, ":var_26", 15),
        (val_add, ":var_21", 1),
    (try_end),
    (assign, ":var_27", -1),
    (try_begin),
        (gt, ":var_22", 0),
        (store_mul, ":var_27", ":var_21", 100),
        (val_div, ":var_27", ":var_22"),
    (try_end),
    (store_mul, ":var_28", ":var_27", 3),
    (val_add, ":var_28", 180),
    (try_begin),
        (ge, ":var_2", 0),
        (ge, ":var_5", 0),
        (party_is_active, ":var_5"),
        (call_script, "script_party_count_fit_for_battle", ":var_5"),
        (assign, ":var_29", reg0),
        (ge, ":var_29", 40),
        (call_script, "script_find_center_to_attack_alt", ":var_0", 1, 0),
        (assign, ":var_30", reg0),
        (assign, ":var_31", reg1),
        (call_script, "script_find_center_to_attack_alt", ":var_0", 1, 1),
        (assign, ":var_32", reg0),
        (assign, ":var_33", reg1),
    (else_try),
        (assign, ":var_31", 0),
        (assign, ":var_33", 0),
        (assign, ":var_30", -1),
        (assign, ":var_32", -1),
    (try_end),
    (try_begin),
        (ge, ":var_31", ":var_32"),
        (assign, ":var_34", ":var_30"),
        (assign, ":var_35", ":var_31"),
    (else_try),
        (assign, ":var_34", ":var_32"),
        (assign, ":var_35", ":var_33"),
    (try_end),
    (try_begin),
        (eq, ":var_3", 2),
        (val_mul, ":var_35", 3),
        (val_div, ":var_35", 2),
    (try_end),
    (assign, "$g_target_after_gathering", -1),
    (store_current_hours, ":var_36"),
    (try_begin),
        (ge, ":var_35", ":var_19"),
        (faction_set_slot, ":var_1", slot_faction_last_safe_hours, ":var_36"),
    (try_end),
    (faction_get_slot, ":var_37", ":var_1", slot_faction_last_safe_hours),
    (try_begin),
        (eq, ":var_37", 0),
        (faction_set_slot, ":var_1", slot_faction_last_safe_hours, ":var_36"),
    (try_end),
    (faction_get_slot, ":var_37", ":var_1", slot_faction_last_safe_hours),
    (store_sub, ":var_38", ":var_36", ":var_37"),
    (str_store_faction_name, s7, ":var_1"),
    (assign, ":var_39", 1),
    (try_for_range, ":var_40", "fac_player_supporters_faction", "fac_kingdoms_end"),
        (store_relation, ":var_41", ":var_1", ":var_40"),
        (neg|ge, ":var_41", 0),
        (assign, ":var_39", 0),
    (try_end),
    (try_begin),
        (eq, ":var_0", "trp_player"),
        (eq, ":var_3", 6),
        (ge, ":var_13", 72),
        (assign, ":var_42", 0),
        (assign, ":var_43", -1),
        (assign, "$player_marshal_ai_state", 0),
        (assign, "$player_marshal_ai_object", -1),
    (else_try),
        (eq, "$players_kingdom", "fac_player_supporters_faction"),
        (faction_slot_eq, "$players_kingdom", slot_faction_leader, "trp_player"),
        (neg|eq, ":var_0", "trp_player"),
        (eq, ":var_3", 6),
        (neg|gt, ":var_13", 48),
        (party_slot_eq, ":var_4", slot_town_lord, "trp_player"),
        (store_faction_of_party, ":var_44", ":var_4"),
        (eq, ":var_44", "$players_kingdom"),
        (assign, ":var_42", 6),
        (assign, ":var_43", ":var_4"),
    (else_try),
        (eq, ":var_0", "trp_player"),
        (str_clear, s14),
        (assign, ":var_42", "$player_marshal_ai_state"),
        (assign, ":var_43", "$player_marshal_ai_object"),
    (else_try),
        (neg|eq, ":var_3", 0),
        (neg|eq, ":var_3", 6),
        (party_is_active, ":var_5"),
        (party_slot_eq, ":var_5", slot_party_ai_state, 14),
        (assign, ":var_42", 0),
        (assign, ":var_43", -1),
        (str_store_string, s14, "str_the_enemy_temporarily_has_the_field"),
    (else_try),
        (neg|eq, ":var_3", 6),
        (assign, ":var_45", 0),
        (try_begin),
            (eq, ":var_3", 2),
            (is_between, ":var_4", "p_town_1_1", "p_village_1_1"),
            (party_get_slot, ":var_46", ":var_4", slot_center_is_besieged_by),
            (party_is_active, ":var_46"),
            (store_faction_of_party, ":var_47", ":var_46"),
            (eq, ":var_47", ":var_1"),
            (assign, ":var_45", 1),
        (try_end),
        (assign, ":var_48", 0),
        (try_begin),
            (eq, ":var_3", 5),
            (gt, ":var_5", 0),
            (party_is_active, ":var_5"),
            (assign, ":var_49", -1),
            (try_begin),
                (party_slot_eq, ":var_5", slot_party_ai_state, 7),
                (party_get_slot, ":var_50", ":var_5", slot_party_ai_object),
                (party_get_battle_opponent, ":var_51", ":var_50"),
                (ge, ":var_51", 0),
                (assign, ":var_49", ":var_50"),
            (else_try),
                (party_slot_eq, ":var_5", slot_party_ai_state, 10),
                (party_get_slot, ":var_50", ":var_5", slot_party_ai_object),
                (ge, ":var_50", 0),
                (neg|is_between, ":var_50", "p_town_1_1", "p_salt_mine"),
                (party_is_active, ":var_50"),
                (party_get_battle_opponent, ":var_49", ":var_50"),
            (try_end),
            (eq, ":var_49", ":var_4"),
            (assign, ":var_48", 1),
        (try_end),
        (eq, ":var_45", 0),
        (eq, ":var_48", 0),
        (ge, ":var_15", 1240),
        (assign, ":var_42", 0),
        (assign, ":var_43", -1),
        (str_store_string, s14, "str_the_vassals_are_tired_we_let_them_rest_for_some_time"),
    (else_try),
        (party_is_active, ":var_5"),
        (eq, ":var_39", 0),
        (is_between, ":var_18", "p_town_1_1", "p_village_1_1"),
        (this_or_next|eq, ":var_3", 0),
        (this_or_next|eq, ":var_3", 6),
        (gt, ":var_19", ":var_35"),
        (assign, ":var_52", 0),
        (assign, ":var_53", 0),
        (try_begin),
            (is_between, ":var_18", "p_village_1_1", "p_salt_mine"),
            (assign, ":var_52", 0),
        (else_try),
            (try_begin),
                (neg|ge, ":var_38", 3),
                (assign, ":var_54", 150),
            (else_try),
                (neg|ge, ":var_38", 6),
                (assign, ":var_54", 140),
            (else_try),
                (neg|ge, ":var_38", 9),
                (assign, ":var_54", 132),
            (else_try),
                (neg|ge, ":var_38", 12),
                (assign, ":var_54", 124),
            (else_try),
                (neg|ge, ":var_38", 15),
                (assign, ":var_54", 118),
            (else_try),
                (neg|ge, ":var_38", 18),
                (assign, ":var_54", 114),
            (else_try),
                (neg|ge, ":var_38", 21),
                (assign, ":var_54", 110),
            (else_try),
                (neg|ge, ":var_38", 24),
                (assign, ":var_54", 106),
            (else_try),
                (neg|ge, ":var_38", 27),
                (assign, ":var_54", 102),
            (else_try),
                (neg|ge, ":var_38", 31),
                (assign, ":var_54", 98),
            (else_try),
                (neg|ge, ":var_38", 34),
                (assign, ":var_54", 94),
            (else_try),
                (neg|ge, ":var_38", 37),
                (assign, ":var_54", 90),
            (else_try),
                (neg|ge, ":var_38", 40),
                (assign, ":var_54", 86),
            (else_try),
                (neg|ge, ":var_38", 43),
                (assign, ":var_54", 82),
            (else_try),
                (neg|ge, ":var_38", 46),
                (assign, ":var_54", 79),
            (else_try),
                (neg|ge, ":var_38", 49),
                (assign, ":var_54", 76),
            (else_try),
                (neg|ge, ":var_38", 52),
                (assign, ":var_54", 73),
            (else_try),
                (neg|ge, ":var_38", 56),
                (assign, ":var_54", 70),
            (else_try),
                (neg|ge, ":var_38", 60),
                (assign, ":var_54", 68),
            (else_try),
                (neg|ge, ":var_38", 66),
                (assign, ":var_54", 66),
            (else_try),
                (neg|ge, ":var_38", 72),
                (assign, ":var_54", 64),
            (else_try),
                (neg|ge, ":var_38", 80),
                (assign, ":var_54", 62),
            (else_try),
                (neg|ge, ":var_38", 90),
                (assign, ":var_54", 60),
            (else_try),
                (neg|ge, ":var_38", 100),
                (assign, ":var_54", 58),
            (else_try),
                (assign, ":var_54", 56),
            (try_end),
            (store_mul, ":var_55", ":var_20", ":var_54"),
            (val_div, ":var_55", 100),
            (try_begin),
                (neg|ge, ":var_6", ":var_55"),
                (assign, ":var_52", 1),
            (try_end),
        (else_try),
            (eq, ":var_3", 5),
            (neg|eq, ":var_18", ":var_4"),
            (assign, ":var_56", 0),
            (try_begin),
                (gt, ":var_5", 0),
                (party_is_active, ":var_5"),
                (assign, ":var_49", -1),
                (try_begin),
                    (party_slot_eq, ":var_5", slot_party_ai_state, 7),
                    (party_get_slot, ":var_50", ":var_5", slot_party_ai_object),
                    (party_get_battle_opponent, ":var_51", ":var_50"),
                    (ge, ":var_51", 0),
                    (assign, ":var_49", ":var_50"),
                (else_try),
                    (party_slot_eq, ":var_5", slot_party_ai_state, 10),
                    (party_get_slot, ":var_50", ":var_5", slot_party_ai_object),
                    (ge, ":var_50", 0),
                    (neg|is_between, ":var_50", "p_town_1_1", "p_salt_mine"),
                    (party_is_active, ":var_50"),
                    (party_get_battle_opponent, ":var_49", ":var_50"),
                (try_end),
                (eq, ":var_49", ":var_4"),
                (assign, ":var_56", 1),
            (try_end),
            (eq, ":var_56", 0),
            (store_mul, ":var_55", ":var_20", 80),
            (val_div, ":var_55", 100),
            (neg|ge, ":var_6", ":var_55"),
            (this_or_next|is_between, ":var_18", "p_town_1_1", "p_village_1_1"),
            (neg|eq, ":var_1", "$players_kingdom"),
            (assign, ":var_53", 1),
        (try_end),
        (this_or_next|eq, ":var_52", 1),
        (eq, ":var_53", 1),
        (assign, ":var_42", 1),
        (assign, ":var_43", -1),
        (str_store_party_name, s21, ":var_18"),
        (str_store_string, s14, "str_we_should_prepare_to_defend_s21_but_we_should_gather_our_forces_until_we_are_strong_enough_to_engage_them"),
        (try_begin),
            (eq, ":var_1", "$players_kingdom"),
            (assign, "$g_gathering_reason", ":var_18"),
        (try_end),
    (else_try),
        (party_is_active, ":var_5"),
        (is_between, ":var_18", "p_town_1_1", "p_village_1_1"),
        (this_or_next|eq, ":var_3", 0),
        (this_or_next|eq, ":var_3", 6),
        (ge, ":var_19", ":var_35"),
        (party_slot_ge, ":var_18", slot_center_is_besieged_by, 0),
        (assign, ":var_42", 5),
        (assign, ":var_43", ":var_18"),
        (str_store_party_name, s21, ":var_18"),
        (str_store_string, s14, "str_we_should_ride_to_break_the_siege_of_s21"),
    (else_try),
        (eq, 0, 1),
        (party_is_active, ":var_5"),
        (this_or_next|eq, ":var_3", 0),
        (this_or_next|eq, ":var_3", 6),
        (ge, ":var_19", ":var_35"),
        (is_between, ":var_18", "p_village_1_1", "p_salt_mine"),
        (assign, ":var_42", 5),
        (assign, ":var_43", ":var_18"),
        (str_store_party_name, s21, ":var_18"),
        (str_store_string, s14, "str_we_should_ride_to_defeat_the_enemy_gathered_near_s21"),
    (else_try),
        (this_or_next|eq, ":var_3", 1),
        (this_or_next|eq, ":var_3", 2),
        (eq, ":var_3", 3),
        (ge, ":var_15", ":var_28"),
        (ge, ":var_13", 24),
        (assign, ":var_57", 0),
        (try_begin),
            (is_between, ":var_4", "p_town_1_1", "p_village_1_1"),
            (party_get_battle_opponent, ":var_46", ":var_4"),
            (party_is_active, ":var_46"),
            (store_faction_of_party, ":var_47", ":var_46"),
            (this_or_next|eq, ":var_47", ":var_1"),
            (eq, ":var_47", "fac_player_faction"),
            (assign, ":var_57", 1),
        (else_try),
            (is_between, ":var_4", "p_town_1_1", "p_village_1_1"),
            (party_get_slot, ":var_46", ":var_4", slot_center_is_besieged_by),
            (party_is_active, ":var_46"),
            (store_faction_of_party, ":var_47", ":var_46"),
            (this_or_next|eq, ":var_47", ":var_1"),
            (eq, ":var_47", "fac_player_faction"),
            (assign, ":var_57", 1),
        (else_try),
            (is_between, ":var_4", "p_town_1_1", "p_salt_mine"),
            (neg|is_between, ":var_4", "p_town_1_1", "p_village_1_1"),
            (party_slot_eq, ":var_4", slot_village_state, 1),
            (assign, ":var_57", 1),
        (try_end),
        (eq, ":var_57", 0),
        (assign, reg7, ":var_15"),
        (assign, reg8, ":var_28"),
        (str_store_string, s14, "str_this_offensive_needs_to_wind_down_soon_so_the_vassals_can_attend_to_their_own_business"),
        (assign, ":var_42", 0),
        (assign, ":var_43", -1),
    (else_try),
        (party_is_active, ":var_5"),
        (eq, ":var_39", 0),
        (eq, ":var_3", 0),
        (ge, ":var_9", 60),
        (neg|ge, ":var_15", 120),
        (assign, ":var_42", 1),
        (assign, ":var_43", -1),
        (str_store_string, s14, "str_it_is_time_to_go_on_the_offensive_and_we_must_first_assemble_the_army"),
        (try_begin),
            (eq, ":var_1", "$players_kingdom"),
            (assign, "$g_gathering_reason", -1),
        (try_end),
    (else_try),
        (party_is_active, ":var_5"),
        (eq, ":var_3", 1),
        (eq, ":var_39", 0),
        (neg|ge, ":var_13", 54),
        (neg|ge, ":var_27", 12),
        (str_store_string, s14, "str_we_must_continue_to_gather_the_army_before_we_ride_forth_on_an_offensive_operation"),
        (assign, ":var_42", 1),
        (assign, ":var_43", -1),
    (else_try),
        (assign, ":var_58", 50),
        (eq, ":var_39", 0),
        (try_begin),
            (troop_get_slot, ":var_59", ":var_0", slot_lord_reputation_type),
            (this_or_next|eq, ":var_59", 1),
            (this_or_next|eq, ":var_59", 2),
            (eq, ":var_59", 3),
            (val_mul, ":var_58", 9),
            (val_div, ":var_58", 10),
        (try_end),
        (party_is_active, ":var_5"),
        (eq, ":var_3", 1),
        (try_begin),
            (neg|ge, ":var_13", 6),
            (assign, ":var_60", 1500),
        (else_try),
            (neg|ge, ":var_13", 10),
            (assign, ":var_60", 1000),
        (else_try),
            (neg|ge, ":var_13", 14),
            (assign, ":var_60", 720),
        (else_try),
            (neg|ge, ":var_13", 18),
            (assign, ":var_60", 480),
        (else_try),
            (neg|ge, ":var_13", 22),
            (assign, ":var_60", 360),
        (else_try),
            (neg|ge, ":var_13", 26),
            (assign, ":var_60", 240),
        (else_try),
            (neg|ge, ":var_13", 30),
            (assign, ":var_60", 180),
        (else_try),
            (neg|ge, ":var_13", 34),
            (assign, ":var_60", 120),
        (else_try),
            (neg|ge, ":var_13", 38),
            (assign, ":var_60", 100),
        (else_try),
            (neg|ge, ":var_13", 42),
            (assign, ":var_60", 80),
        (else_try),
            (neg|ge, ":var_13", 46),
            (assign, ":var_60", 65),
        (else_try),
            (neg|ge, ":var_13", 50),
            (assign, ":var_60", 55),
        (else_try),
            (assign, ":var_60", 0),
        (try_end),
        (try_begin),
            (troop_get_slot, ":var_59", ":var_0", slot_lord_reputation_type),
            (this_or_next|eq, ":var_59", 1),
            (this_or_next|eq, ":var_59", 2),
            (eq, ":var_59", 3),
            (val_mul, ":var_60", 9),
            (val_div, ":var_60", 10),
        (try_end),
        (neg|gt, ":var_35", ":var_60"),
        (neg|gt, ":var_13", 54),
        (str_store_string, s14, "str_we_have_assembled_some_vassals"),
        (assign, ":var_42", 1),
        (assign, ":var_43", -1),
    (else_try),
        (party_is_active, ":var_5"),
        (neg|eq, ":var_3", 0),
        (neg|eq, ":var_3", 6),
        (assign, ":var_34", ":var_32"),
        (is_between, ":var_34", "p_town_1_1", "p_village_1_1"),
        (assign, ":var_42", 2),
        (assign, ":var_43", ":var_34"),
        (str_store_string, s14, "str_we_believe_the_fortress_will_be_worth_the_effort_to_take_it"),
    (else_try),
        (party_is_active, ":var_5"),
        (neg|eq, ":var_3", 0),
        (neg|eq, ":var_3", 6),
        (assign, ":var_34", ":var_32"),
        (is_between, ":var_34", "p_village_1_1", "p_salt_mine"),
        (ge, ":var_35", ":var_58"),
        (assign, ":var_42", 3),
        (assign, ":var_43", ":var_34"),
        (str_store_string, s14, "str_we_shall_leave_a_fiery_trail_through_the_heart_of_the_enemys_lands_targeting_the_wealthy_settlements_if_we_can"),
    (else_try),
        (eq, ":var_3", 1),
        (str_store_string, s14, "str_the_army_will_be_disbanded_because_we_have_been_waiting_too_long_without_a_target"),
        (assign, ":var_42", 0),
        (assign, ":var_43", -1),
    (else_try),
        (eq, ":var_3", 6),
        (gt, ":var_13", 72),
        (assign, ":var_42", 0),
        (assign, ":var_43", -1),
        (str_store_string, s14, "str_it_is_time_for_the_feast_to_conclude"),
    (else_try),
        (eq, ":var_3", 6),
        (neg|gt, ":var_13", 72),
        (assign, ":var_42", 6),
        (assign, ":var_43", ":var_4"),
        (str_store_string, s14, "str_we_should_continue_the_feast_unless_there_is_an_emergency"),
    (else_try),
        (check_quest_active, "qst_organize_feast"),
        (eq, "$players_kingdom", ":var_1"),
        (quest_get_slot, ":var_61", "qst_organize_feast", 1),
        (assign, ":var_42", 6),
        (assign, ":var_43", ":var_61"),
        (str_store_string, s14, "str_you_had_wished_to_hold_a_feast"),
    (else_try),
        (check_quest_active, "qst_wed_betrothed_female"),
        (quest_get_slot, ":var_62", "qst_wed_betrothed_female", 6),
        (troop_slot_eq, ":var_62", slot_troop_prisoner_of_party, -1),
        (store_troop_faction, ":var_63", ":var_62"),
        (eq, ":var_63", ":var_1"),
        (faction_get_slot, ":var_64", ":var_63", slot_faction_leader),
        (assign, ":var_65", -1),
        (try_for_range, ":var_66", "p_town_1_1", "p_village_1_1"),
            (eq, ":var_65", -1),
            (party_slot_eq, ":var_66", slot_town_lord, ":var_62"),
            (party_slot_ge, ":var_66", slot_center_is_besieged_by, 0),
            (assign, ":var_65", ":var_66"),
        (try_end),
        (try_for_range, ":var_66", "p_town_1_1", "p_village_1_1"),
            (eq, ":var_65", -1),
            (party_slot_eq, ":var_66", slot_town_lord, ":var_64"),
            (party_slot_ge, ":var_66", slot_center_is_besieged_by, 0),
            (assign, ":var_65", ":var_66"),
        (try_end),
        (is_between, ":var_65", "p_town_1_1", "p_village_1_1"),
        (assign, ":var_42", 6),
        (assign, ":var_43", ":var_65"),
        (str_store_string, s14, "str_your_wedding_day_approaches_my_lady"),
    (else_try),
        (check_quest_active, "qst_wed_betrothed"),
        (neg|quest_slot_ge, "qst_wed_betrothed", 23, 362),
        (quest_get_slot, ":var_67", "qst_wed_betrothed", 2),
        (call_script, "script_get_kingdom_lady_social_determinants", ":var_67"),
        (assign, ":var_68", reg0),
        (store_troop_faction, ":var_69", ":var_68"),
        (eq, ":var_69", ":var_1"),
        (troop_slot_eq, ":var_68", slot_troop_prisoner_of_party, -1),
        (assign, ":var_70", reg1),
        (is_between, ":var_70", "p_town_1_1", "p_salt_mine"),
        (party_slot_eq, ":var_70", slot_center_is_besieged_by, -1),
        (assign, ":var_42", 6),
        (assign, ":var_43", ":var_70"),
        (str_store_string, s14, "str_your_wedding_day_approaches"),
    (else_try),
        (ge, ":var_11", 192),
        (assign, ":var_65", -1),
        (try_for_range, ":var_71", "trp_knight_1_1_wife", "trp_heroes_end"),
            (troop_get_slot, ":var_62", ":var_71", slot_troop_betrothed),
            (gt, ":var_62", 0),
            (store_troop_faction, ":var_72", ":var_71"),
            (store_troop_faction, ":var_63", ":var_62"),
            (try_begin),
                (troop_slot_ge, ":var_62", slot_troop_prisoner_of_party, 0),
            (else_try),
                (neg|eq, ":var_63", ":var_72"),
                (neg|eq, ":var_63", "fac_player_faction"),
                (call_script, "script_courtship_event_lady_break_relation_with_suitor", ":var_71", ":var_62"),
            (else_try),
                (eq, ":var_72", ":var_1"),
                (store_current_hours, ":var_73"),
                (troop_get_slot, ":var_74", ":var_71", slot_troop_betrothal_time),
                (val_sub, ":var_73", ":var_74"),
                (ge, ":var_73", 719),
                (call_script, "script_get_kingdom_lady_social_determinants", ":var_71"),
                (assign, ":var_70", reg1),
                (assign, ":var_65", ":var_70"),
                (assign, ":var_75", ":var_71"),
                (assign, ":var_76", ":var_62"),
            (try_end),
        (try_end),
        (ge, ":var_65", "p_town_1_1"),
        (assign, ":var_42", 6),
        (assign, ":var_43", ":var_65"),
        (str_store_troop_name, s22, ":var_75"),
        (str_store_troop_name, s23, ":var_76"),
        (str_store_string, s14, "str_s22_and_s23_wish_to_marry"),
    (else_try),
        (eq, ":var_3", 0),
        (gt, ":var_11", 240),
        (assign, ":var_77", 0),
        (assign, ":var_65", -1),
        (try_for_range, ":var_78", "p_town_1_1", "p_village_1_1"),
            (store_faction_of_party, ":var_79", ":var_78"),
            (eq, ":var_79", ":var_1"),
            (try_begin),
                (neg|party_slot_eq, ":var_78", slot_village_state, 5),
                (party_get_slot, ":var_80", ":var_78", slot_town_lord),
                (is_between, ":var_80", "trp_npc1", "trp_knight_1_1_wife"),
                (troop_get_slot, ":var_81", ":var_80", slot_troop_renown),
                (store_random_in_range, ":var_82", 0, 1000),
                (val_add, ":var_81", ":var_82"),
                (gt, ":var_81", ":var_77"),
                (assign, ":var_77", ":var_81"),
                (assign, ":var_65", ":var_78"),
            (else_try),
                (this_or_next|party_slot_eq, ":var_78", slot_village_state, 5),
                (party_slot_eq, ":var_78", slot_village_state, 1),
                (assign, ":var_77", 9999),
                (assign, ":var_65", -1),
            (try_end),
        (try_end),
        (is_between, ":var_65", "p_town_1_1", "p_village_1_1"),
        (party_get_slot, ":var_68", ":var_65", slot_town_lord),
        (troop_slot_eq, ":var_68", slot_troop_prisoner_of_party, -1),
        (assign, ":var_42", 6),
        (assign, ":var_43", ":var_65"),
        (str_store_string, s14, "str_it_has_been_a_long_time_since_the_lords_of_the_realm_gathered_for_a_feast"),
    (else_try),
        (neg|eq, ":var_3", 0),
        (assign, ":var_42", 0),
        (assign, ":var_43", -1),
        (str_store_string, s14, "str_the_circumstances_which_led_to_this_decision_no_longer_apply_so_we_should_stop_and_reconsider_shortly"),
    (else_try),
        (eq, ":var_3", 0),
        (eq, ":var_39", 1),
        (assign, ":var_42", 0),
        (assign, ":var_43", -1),
        (str_store_string, s14, "str_we_are_currently_at_peace"),
    (else_try),
        (eq, ":var_3", 0),
        (faction_slot_eq, ":var_1", slot_faction_marshall, -1),
        (assign, ":var_42", 0),
        (assign, ":var_43", -1),
        (str_store_string, s14, "str_we_are_waiting_for_selection_of_marshal"),
    (else_try),
        (eq, ":var_3", 0),
        (assign, ":var_42", 0),
        (assign, ":var_43", -1),
        (str_store_string, s14, "str_the_vassals_still_need_time_to_attend_to_their_own_business"),
    (try_end),
    (assign, reg0, ":var_42"),
    (assign, reg1, ":var_43"),

]),

("faction_last_reconnoitered_center",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_sub, ":var_2", ":var_0", "fac_player_supporters_faction"),
    (val_add, ":var_2", 350),
    (store_current_hours, ":var_3"),
    (party_get_slot, ":var_4", ":var_1", ":var_2"),
    (try_begin),
        (neg|ge, ":var_4", 1),
        (assign, ":var_3", 1000),
    (else_try),
        (val_sub, ":var_3", ":var_4"),
    (try_end),
    (assign, reg0, ":var_3"),
    (assign, reg1, ":var_4"),

]),

("reduce_exact_number_to_estimate",
[
    (store_script_param, ":var_0", 1),
    (try_begin),
        (neg|ge, ":var_0", 500),
        (assign, ":var_1", 0),
    (else_try),
        (neg|ge, ":var_0", 1000),
        (assign, ":var_1", 750),
    (else_try),
        (neg|ge, ":var_0", 2000),
        (assign, ":var_1", 1500),
    (else_try),
        (neg|ge, ":var_0", 4000),
        (assign, ":var_1", 3000),
    (else_try),
        (neg|ge, ":var_0", 8000),
        (assign, ":var_1", 6000),
    (else_try),
        (neg|ge, ":var_0", 16000),
        (assign, ":var_1", 12000),
    (else_try),
        (assign, ":var_1", 24000),
    (try_end),
    (assign, reg0, ":var_1"),

]),

("calculate_castle_prosperities_by_using_its_villages",
[
    (try_for_range, ":var_0", "p_castle_1_1", "p_village_1_1"),
        (assign, ":var_1", 0),
        (assign, ":var_2", 0),
        (try_for_range, ":var_3", "p_village_1_1", "p_salt_mine"),
            (party_get_slot, ":var_4", ":var_3", slot_village_bound_center),
            (eq, ":var_0", ":var_4"),
            (party_get_slot, ":var_5", ":var_3", slot_town_prosperity),
            (val_add, ":var_1", ":var_5"),
            (val_add, ":var_2", 1),
        (try_end),
        (try_begin),
            (neg|eq, ":var_2", 0),
            (store_div, ":var_6", ":var_1", ":var_2"),
        (else_try),
            (assign, ":var_6", 50),
        (try_end),
        (party_set_slot, ":var_0", slot_town_prosperity, ":var_6"),
    (try_end),

]),

("initialize_tavern_variables",
[
    (assign, "$g_main_attacker_agent", 0),
    (assign, "$g_attacker_drawn_weapon", 0),
    (assign, "$g_start_belligerent_drunk_fight", 0),
    (assign, "$g_start_hired_assassin_fight", 0),
    (assign, "$g_belligerent_drunk_leaving", 0),

]),

("prepare_alley_to_fight",
[
    (party_get_slot, ":var_0", "$current_town", slot_town_alley),
    (modify_visitors_at_site, ":var_0"),
    (reset_visitors),
    (set_visitor, 0, "trp_player"),
    (set_visitor, 3, "trp_bandit"),
    (assign, "$talked_with_merchant", 0),
    (set_jump_mission, "mt_alley_fight"),
    (jump_to_scene, ":var_0"),
    (change_screen_mission),

]),

("prepare_town_to_fight",
[
    (str_store_party_name_link, s9, "$g_starting_town"),
    (str_store_string, s2, "str_save_town_from_bandits"),
    (call_script, "script_start_quest", "qst_save_town_from_bandits", "$g_talk_troop"),
    (assign, "$g_mt_mode", 0),
    (store_faction_of_party, ":var_0", "$current_town"),
    (faction_get_slot, ":var_1", ":var_0", slot_faction_quick_battle_tier_1_archer),
    (faction_get_slot, ":var_2", ":var_0", slot_faction_quick_battle_tier_1_archer),
    (faction_get_slot, ":var_3", ":var_0", slot_faction_quick_battle_tier_2_archer),
    (party_get_slot, ":var_4", "$current_town", slot_town_center),
    (modify_visitors_at_site, ":var_4"),
    (reset_visitors),
    (try_begin),
        (try_for_range, ":var_5", 0, 8),
            (store_add, ":var_6", 160, ":var_5"),
            (party_get_slot, ":var_7", "$current_town", ":var_6"),
            (gt, ":var_7", 0),
            (store_add, ":var_8", 32, ":var_5"),
            (set_visitor, ":var_8", ":var_7"),
        (try_end),
    (try_end),
    (set_visitors, 25, ":var_1", 1),
    (set_visitors, 26, ":var_2", 1),
    (set_visitors, 27, ":var_3", 1),
    (set_visitors, 10, "trp_looter", 1),
    (set_visitors, 11, "trp_bandit", 1),
    (set_visitors, 12, "trp_looter", 1),
    (store_faction_of_party, ":var_9", "$g_starting_town"),
    (try_begin),
        (eq, ":var_9", "fac_kingdom_1"),
        (assign, ":var_10", "trp_merchant_kingdom_1"),
    (else_try),
        (eq, ":var_9", "fac_kingdom_2"),
        (assign, ":var_10", "trp_merchant_kingdom_2"),
    (else_try),
        (eq, ":var_9", "fac_kingdom_3"),
        (assign, ":var_10", "trp_merchant_kingdom_3"),
    (else_try),
        (eq, ":var_9", "fac_kingdom_4"),
        (assign, ":var_10", "trp_merchant_kingdom_4"),
    (else_try),
        (eq, ":var_9", "fac_kingdom_5"),
        (assign, ":var_10", "trp_merchant_kingdom_5"),
    (else_try),
        (this_or_next|eq, ":var_9", "fac_kingdom_6"),
        (eq, ":var_9", "fac_kingdom_6"),
        (assign, ":var_10", "trp_merchant_kingdom_6"),
    (else_try),
        (eq, ":var_9", "fac_kingdom_7"),
        (assign, ":var_10", "trp_merchant_kingdom_7"),
    (else_try),
        (eq, ":var_9", "fac_kingdom_8"),
        (assign, ":var_10", "trp_merchant_kingdom_8"),
    (else_try),
        (eq, ":var_9", "fac_kingdom_9"),
        (assign, ":var_10", "trp_merchant_kingdom_9"),
    (else_try),
        (eq, ":var_9", "fac_kingdom_10"),
        (assign, ":var_10", "trp_merchant_kingdom_10"),
    (else_try),
        (eq, ":var_9", "fac_kingdom_11"),
        (assign, ":var_10", "trp_merchant_kingdom_11"),
    (else_try),
        (eq, ":var_9", "fac_kingdom_12"),
        (assign, ":var_10", "trp_merchant_kingdom_12"),
    (else_try),
        (eq, ":var_9", "fac_kingdom_13"),
        (assign, ":var_10", "trp_merchant_kingdom_13"),
    (else_try),
        (eq, ":var_9", "fac_kingdom_14"),
        (assign, ":var_10", "trp_merchant_kingdom_14"),
    (else_try),
        (eq, ":var_9", "fac_kingdom_15"),
        (assign, ":var_10", "trp_merchant_kingdom_15"),
    (else_try),
        (eq, ":var_9", "fac_kingdom_16"),
        (assign, ":var_10", "trp_merchant_kingdom_16"),
    (else_try),
        (eq, ":var_9", "fac_kingdom_17"),
        (assign, ":var_10", "trp_merchant_kingdom_17"),
    (else_try),
        (eq, ":var_9", "fac_kingdom_18"),
        (assign, ":var_10", "trp_merchant_kingdom_18"),
    (else_try),
        (eq, ":var_9", "fac_kingdom_19"),
        (assign, ":var_10", "trp_merchant_kingdom_19"),
    (else_try),
        (eq, ":var_9", "fac_kingdom_20"),
        (assign, ":var_10", "trp_merchant_kingdom_20"),
    (else_try),
        (eq, ":var_9", "fac_papacy"),
        (assign, ":var_10", "trp_merchant_kingdom_21"),
    (else_try),
        (eq, ":var_9", "fac_kingdom_22"),
        (assign, ":var_10", "trp_merchant_kingdom_22"),
    (else_try),
        (eq, ":var_9", "fac_kingdom_23"),
        (assign, ":var_10", "trp_merchant_kingdom_23"),
    (else_try),
        (eq, ":var_9", "fac_kingdom_24"),
        (eq, ":var_9", "fac_kingdom_38"),
        (eq, ":var_9", "fac_kingdom_39"),
        (eq, ":var_9", "fac_kingdom_40"),
        (eq, ":var_9", "fac_kingdom_41"),
        (assign, ":var_10", "trp_merchant_kingdom_24"),
    (else_try),
        (eq, ":var_9", "fac_kingdom_25"),
        (assign, ":var_10", "trp_merchant_kingdom_25"),
    (else_try),
        (eq, ":var_9", "fac_kingdom_26"),
        (assign, ":var_10", "trp_merchant_kingdom_26"),
    (else_try),
        (eq, ":var_9", "fac_kingdom_27"),
        (assign, ":var_10", "trp_merchant_kingdom_27"),
    (else_try),
        (eq, ":var_9", "fac_kingdom_28"),
        (assign, ":var_10", "trp_merchant_kingdom_28"),
    (else_try),
        (eq, ":var_9", "fac_kingdom_29"),
        (assign, ":var_10", "trp_merchant_kingdom_29"),
    (else_try),
        (eq, ":var_9", "fac_kingdom_30"),
        (assign, ":var_10", "trp_merchant_kingdom_30"),
    (else_try),
        (eq, ":var_9", "fac_kingdom_31"),
        (assign, ":var_10", "trp_merchant_kingdom_31"),
    (else_try),
        (eq, ":var_9", "fac_kingdom_32"),
        (assign, ":var_10", "trp_merchant_kingdom_32"),
    (else_try),
        (this_or_next|eq, ":var_9", "fac_kingdom_36"),
        (this_or_next|eq, ":var_9", "fac_kingdom_34"),
        (this_or_next|eq, ":var_9", "fac_kingdom_35"),
        (eq, ":var_9", "fac_kingdom_33"),
        (assign, ":var_10", "trp_merchant_kingdom_2"),
    (else_try),
        (eq, ":var_9", "fac_kingdom_37"),
        (assign, ":var_10", "trp_merchant_kingdom_37"),
    (try_end),
    (str_store_troop_name, s10, ":var_10"),
    (set_visitors, 24, "trp_looter", 1),
    (set_visitors, 2, "trp_looter", 2),
    (set_visitors, 4, "trp_looter", 1),
    (set_visitors, 5, "trp_looter", 2),
    (set_visitors, 6, "trp_looter", 1),
    (set_visitors, 7, "trp_looter", 1),
    (set_visitors, 3, ":var_10", 1),
    (set_jump_mission, "mt_town_fight"),
    (jump_to_scene, ":var_4"),
    (change_screen_mission),

]),

("change_player_right_to_rule",
[
    (store_script_param_1, ":var_0"),
    (val_add, "$player_right_to_rule", ":var_0"),
    (val_clamp, "$player_right_to_rule", 0, 100),
    (try_begin),
        (gt, ":var_0", 0),
        (display_message, "@You gain right to rule."),
    (else_try),
        (neg|ge, ":var_0", 0),
        (display_message, "@You lose right to rule."),
    (try_end),

]),

("indict_lord_for_treason",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (troop_get_type, reg4, ":var_0"),
    (try_for_range, ":var_2", "p_town_1_1", "p_salt_mine"),
        (party_slot_eq, ":var_2", slot_town_lord, ":var_0"),
        (party_set_slot, ":var_2", slot_town_lord, -1),
    (try_end),
    (faction_get_slot, ":var_3", ":var_1", slot_faction_leader),
    (call_script, "script_troop_get_relation_with_troop", ":var_0", ":var_3"),
    (assign, ":var_4", reg0),
    (store_sub, ":var_5", -150, ":var_4"),
    (val_div, ":var_5", 40),
    (val_min, ":var_5", -1),
    (try_for_range, ":var_6", "trp_npc1", "trp_knight_1_1_wife"),
        (store_troop_faction, ":var_7", ":var_6"),
        (eq, ":var_1", ":var_7"),
        (call_script, "script_troop_get_family_relation_to_troop", ":var_0", ":var_6"),
        (assign, ":var_8", reg0),
        (assign, ":var_9", ":var_5"),
        (try_begin),
            (gt, ":var_8", 1),
            (store_div, ":var_10", reg0, 3),
            (val_sub, ":var_9", ":var_10"),
        (try_end),
        (neg|ge, ":var_9", 0),
        (call_script, "script_troop_change_relation_with_troop", ":var_3", ":var_6", ":var_9"),
        (val_add, "$total_indictment_changes", ":var_9"),
        (try_begin),
            (eq, "$cheat_mode", 1),
            (str_store_troop_name, s17, ":var_6"),
            (str_store_troop_name, s18, ":var_3"),
            (assign, reg3, ":var_9"),
            (display_message, "str_trial_influences_s17s_relation_with_s18_by_reg3"),
        (try_end),
    (try_end),
    (assign, ":var_11", "fac_outlaws"),
    (try_begin),
        (eq, ":var_0", "trp_player"),
        (assign, ":var_11", 0),
    (else_try),
        (call_script, "script_lord_find_alternative_faction", ":var_0"),
        (assign, ":var_11", reg0),
    (try_end),
    (try_begin),
        (is_between, ":var_11", "fac_player_supporters_faction", "fac_kingdoms_end"),
        (try_begin),
            (ge, "$cheat_mode", 1),
            (str_store_troop_name, s4, ":var_0"),
            (display_message, "@{!}DEBUG - {s4} faction changed in indictment"),
        (try_end),
        (call_script, "script_change_troop_faction", ":var_0", ":var_11"),
        (try_begin),
            (neg|eq, ":var_11", "fac_player_supporters_faction"),
            (troop_slot_eq, ":var_0", slot_troop_occupation, 0),
            (troop_set_slot, ":var_0", slot_troop_occupation, 2),
        (try_end),
        (str_store_faction_name, s10, ":var_11"),
        (str_store_string, s11, "str_with_the_s10"),
    (else_try),
        (neg|eq, ":var_0", "trp_player"),
        (call_script, "script_change_troop_faction", ":var_0", "fac_outlaws"),
        (str_store_string, s11, "str_outside_calradia"),
    (else_try),
        (eq, ":var_0", "trp_player"),
        (call_script, "script_player_leave_faction", 1),
    (try_end),
    (try_begin),
        (eq, ":var_0", "trp_player"),
        (str_store_string, s9, "str_you_have_been_indicted_for_treason_to_s7_your_properties_have_been_confiscated_and_you_would_be_well_advised_to_flee_for_your_life"),
    (else_try),
        (str_store_troop_name, s4, ":var_0"),
        (str_store_faction_name, s5, ":var_1"),
        (str_store_troop_name, s6, ":var_3"),
        (troop_get_type, reg4, ":var_0"),
        (str_store_string, s9, "str_by_order_of_s6_s4_of_the_s5_has_been_indicted_for_treason_the_lord_has_been_stripped_of_all_reg4herhis_properties_and_has_fled_for_reg4herhis_life_he_is_rumored_to_have_gone_into_exile_s11"),
    (try_end),
    (display_message, "@{!}{s9}"),
    (troop_get_slot, ":var_12", ":var_0", slot_troop_leaded_party),
    (try_begin),
        (party_is_active, ":var_12"),
        (neg|eq, ":var_12", "p_main_party"),
        (remove_party, ":var_12"),
        (troop_set_slot, ":var_0", slot_troop_leaded_party, -1),
    (try_end),
    (try_begin),
        (eq, "$cheat_mode", 1),
        (this_or_next|eq, ":var_1", "$players_kingdom"),
        (eq, ":var_11", "$players_kingdom"),
        (call_script, "script_add_notification_menu", "mnu_notification_treason_indictment", ":var_0", ":var_1"),
    (try_end),

]),

("give_center_to_faction_while_maintaining_lord",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (store_faction_of_party, ":var_2", ":var_0"),
    (party_set_slot, ":var_0", slot_center_ex_faction, ":var_2"),
    (party_set_faction, ":var_0", ":var_1"),
    (try_begin),
        (party_slot_eq, ":var_0", slot_party_type, 4),
        (party_get_slot, ":var_3", ":var_0", slot_village_farmer_party),
        (gt, ":var_3", 0),
        (party_is_active, ":var_3"),
        (party_set_faction, ":var_3", ":var_1"),
    (try_end),
    (call_script, "script_update_faction_notes", ":var_1"),
    (call_script, "script_update_center_notes", ":var_0"),
    (try_for_range, ":var_4", "p_town_1_1", "p_salt_mine"),
        (party_slot_eq, ":var_4", slot_village_bound_center, ":var_0"),
        (call_script, "script_give_center_to_faction_while_maintaining_lord", ":var_4", ":var_1"),
    (try_end),

]),

("check_concilio_calradi_achievement",
[
    (try_begin),
        (eq, "$players_kingdom", "fac_player_supporters_faction"),
        (faction_get_slot, ":var_0", "fac_player_supporters_faction", slot_faction_leader),
        (eq, ":var_0", "trp_player"),
        (assign, ":var_1", 0),
        (try_for_range, ":var_2", "trp_npc1", "trp_knight_1_1_wife"),
            (troop_slot_eq, ":var_2", slot_troop_occupation, 2),
            (store_troop_faction, ":var_3", ":var_2"),
            (eq, ":var_3", "fac_player_supporters_faction"),
            (val_add, ":var_1", 1),
        (try_end),
        (ge, ":var_1", 3),
        (unlock_achievement, 54),
    (try_end),

]),

("set_matching_items",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (assign, ":var_3", 0),
    (try_begin),
        (eq, ":var_2", "trp_euro_horse_4"),
        (assign, ":var_3", 2),
    (else_try),
        (eq, ":var_2", "trp_nordic_knight"),
        (assign, ":var_3", 2),
    (else_try),
        (eq, ":var_2", "trp_gaelic_knight"),
        (assign, ":var_3", 1),
    (else_try),
        (eq, ":var_2", "trp_welsh_horse_4"),
        (assign, ":var_3", 1),
    (else_try),
        (eq, ":var_2", "trp_iberian_knight"),
        (assign, ":var_3", 2),
    (else_try),
        (eq, ":var_2", "trp_andalus_horse_4"),
        (assign, ":var_3", 1),
    (else_try),
        (eq, ":var_2", "trp_rus_horse_4"),
        (assign, ":var_3", 1),
    (try_end),
    (try_begin),
        (neg|eq, ":var_1", -1),
        (eq, ":var_3", 1),
        (store_random_in_range, ":var_4", 0, 100),
        (try_begin),
            (gt, ":var_4", 65),
            (try_begin),
                (eq, ":var_2", "trp_rus_horse_4"),
                (store_random_in_range, ":var_5", "itm_mon_lamellar_horse_a", "itm_kau_montcada_horse"),
            (else_try),
                (store_random_in_range, ":var_5", "itm_warhorse_white", "itm_warhorse_player"),
            (try_end),
        (else_try),
            (store_random_in_range, ":var_5", 0, 3),
            (try_begin),
                (eq, ":var_5", 0),
                (assign, ":var_5", "itm_hunter"),
            (else_try),
                (eq, ":var_5", 1),
                (assign, ":var_5", "itm_horse_e"),
            (else_try),
                (assign, ":var_5", "itm_horse_d"),
            (try_end),
        (try_end),
        (troop_set_inventory_slot, ":var_2", 8, ":var_5"),
    (try_end),
    (try_begin),
        (eq, ":var_3", 2),
        (neg|eq, ":var_1", -1),
        (try_begin),
            (eq, ":var_0", 340),
            (troop_set_inventory_slot, ":var_2", 8, 103),
        (else_try),
            (eq, ":var_0", 341),
            (troop_set_inventory_slot, ":var_2", 8, 104),
        (else_try),
            (eq, ":var_0", 342),
            (troop_set_inventory_slot, ":var_2", 8, 105),
        (else_try),
            (eq, ":var_0", 343),
            (troop_set_inventory_slot, ":var_2", 8, 106),
        (else_try),
            (eq, ":var_0", 344),
            (troop_set_inventory_slot, ":var_2", 8, 107),
        (else_try),
            (eq, ":var_0", 345),
            (troop_set_inventory_slot, ":var_2", 8, 108),
        (else_try),
            (eq, ":var_0", 346),
            (troop_set_inventory_slot, ":var_2", 8, 109),
        (else_try),
            (eq, ":var_0", 347),
            (troop_set_inventory_slot, ":var_2", 8, 110),
        (else_try),
            (eq, ":var_0", 348),
            (troop_set_inventory_slot, ":var_2", 8, 111),
        (else_try),
            (eq, ":var_0", 349),
            (troop_set_inventory_slot, ":var_2", 8, 112),
        (else_try),
            (eq, ":var_0", 350),
            (troop_set_inventory_slot, ":var_2", 8, 113),
        (else_try),
            (eq, ":var_0", 351),
            (troop_set_inventory_slot, ":var_2", 8, 114),
        (else_try),
            (eq, ":var_0", 352),
            (troop_set_inventory_slot, ":var_2", 8, 115),
        (else_try),
            (eq, ":var_0", 353),
            (troop_set_inventory_slot, ":var_2", 8, 116),
        (else_try),
            (eq, ":var_0", 354),
            (troop_set_inventory_slot, ":var_2", 8, 117),
        (else_try),
            (eq, ":var_0", 355),
            (troop_set_inventory_slot, ":var_2", 8, 118),
        (else_try),
            (eq, ":var_0", 356),
            (troop_set_inventory_slot, ":var_2", 8, 119),
        (else_try),
            (eq, ":var_0", 357),
            (troop_set_inventory_slot, ":var_2", 8, 120),
        (else_try),
            (eq, ":var_0", 358),
            (troop_set_inventory_slot, ":var_2", 8, 121),
        (else_try),
            (eq, ":var_0", 359),
            (troop_set_inventory_slot, ":var_2", 8, 122),
        (else_try),
            (eq, ":var_0", 360),
            (troop_set_inventory_slot, ":var_2", 8, 123),
        (else_try),
            (eq, ":var_0", 361),
            (troop_set_inventory_slot, ":var_2", 8, 124),
        (else_try),
            (eq, ":var_0", 362),
            (troop_set_inventory_slot, ":var_2", 8, 125),
        (try_end),
    (try_end),

]),

("distance_between_factions",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (assign, ":var_2", -1),
    (try_for_range, ":var_3", "p_town_1_1", "p_village_1_1"),
        (store_faction_of_party, ":var_4", ":var_3"),
        (eq, ":var_4", ":var_0"),
        (try_for_range, ":var_5", "p_town_1_1", "p_village_1_1"),
            (store_faction_of_party, ":var_4", ":var_5"),
            (eq, ":var_4", ":var_1"),
            (store_distance_to_party_from_party, ":var_6", ":var_3", ":var_5"),
            (try_begin),
                (neg|ge, ":var_2", 0),
                (assign, ":var_2", ":var_6"),
            (else_try),
                (neg|ge, ":var_6", ":var_2"),
                (assign, ":var_2", ":var_6"),
            (try_end),
        (try_end),
    (try_end),
    (assign, reg0, ":var_2"),

]),

("cf_is_party_on_water",
[
    (store_script_param_1, ":var_0"),
    (party_get_current_terrain, ":var_1", ":var_0"),
    (assign, reg0, 0),
    (try_begin),
        (this_or_next|eq, ":var_1", 0),
        (this_or_next|eq, ":var_1", 8),
        (this_or_next|eq, ":var_1", 7),
        (eq, ":var_1", 15),
        (assign, reg0, 1),
    (try_end),
    (gt, reg0, 0),

]),

("raf_replace_troop",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (party_get_num_companion_stacks, ":var_3", ":var_0"),
    (try_for_range_backwards, ":var_4", 0, ":var_3"),
        (party_stack_get_troop_id, ":var_5", ":var_0", ":var_4"),
        (try_begin),
            (eq, ":var_5", ":var_1"),
            (party_stack_get_size, ":var_6", ":var_0", ":var_4"),
            (party_remove_members, ":var_0", ":var_5", ":var_6"),
            (party_add_members, ":var_0", ":var_2", ":var_6"),
            (try_begin),
                (eq, ":var_0", "p_main_party"),
                (str_store_troop_name, s1, ":var_5"),
                (str_store_troop_name, s2, ":var_2"),
                (assign, reg0, ":var_6"),
            (try_end),
        (try_end),
    (try_end),

]),

("dmod_cycle_forwards",
[
    (assign, ":var_0", 0),
    (assign, ":var_1", -1),
    (get_player_agent_no, ":var_2"),
    (try_for_agents, ":var_3"),
        (ge, ":var_3", 0),
        (neg|eq, ":var_0", 1),
        (neg|eq, ":var_3", ":var_2"),
        (agent_is_human, ":var_3"),
        (agent_is_alive, ":var_3"),
        (try_begin),
            (neg|ge, ":var_1", 0),
            (assign, ":var_1", ":var_3"),
        (try_end),
        (gt, ":var_3", "$dmod_current_agent"),
        (assign, "$dmod_current_agent", ":var_3"),
        (assign, ":var_0", 1),
    (try_end),
    (try_begin),
        (eq, ":var_0", 0),
        (neg|eq, ":var_1", -1),
        (assign, "$dmod_current_agent", ":var_1"),
        (assign, ":var_0", 1),
    (else_try),
        (eq, ":var_0", 0),
        (eq, ":var_1", -1),
        (display_message, "@No Troops Left."),
    (try_end),
    (try_begin),
        (eq, ":var_0", 1),
        (str_store_agent_name, s1, "$dmod_current_agent"),
        (display_message, "@Selected Troop: {s1}"),
    (try_end),
    (assign, "$dmod_move_camera", 1),

]),

("dmod_cycle_backwards",
[
    (assign, ":var_0", -1),
    (assign, ":var_1", -1),
    (get_player_agent_no, ":var_2"),
    (try_for_agents, ":var_3"),
        (gt, ":var_3", -1),
        (neg|eq, ":var_3", ":var_2"),
        (agent_is_human, ":var_3"),
        (agent_is_alive, ":var_3"),
        (assign, ":var_1", ":var_3"),
        (neg|ge, ":var_3", "$dmod_current_agent"),
        (assign, ":var_0", ":var_3"),
    (try_end),
    (try_begin),
        (eq, ":var_0", -1),
        (neg|eq, ":var_1", -1),
        (assign, ":var_0", ":var_1"),
    (else_try),
        (eq, ":var_0", -1),
        (eq, ":var_1", -1),
        (display_message, "@No Troops Left."),
    (try_end),
    (try_begin),
        (neg|eq, ":var_0", -1),
        (assign, "$dmod_current_agent", ":var_0"),
        (str_store_agent_name, s1, "$dmod_current_agent"),
        (display_message, "@Selected Troop: {s1}"),
    (try_end),
    (assign, "$dmod_move_camera", 1),

]),

("cf_town_recruit_volunteers_cond",
[
    (party_slot_eq, "$current_town", slot_center_is_besieged_by, -1),
    (try_begin),
        (party_slot_eq, "$current_town", slot_party_type, 2),
        (party_get_slot, ":var_0", "$current_town", slot_town_lord),
        (try_begin),
            (gt, ":var_0", 0),
            (call_script, "script_troop_get_player_relation", ":var_0"),
            (assign, ":var_1", reg0),
            (store_faction_of_party, ":var_2", "$current_town"),
            (store_relation, ":var_3", ":var_2", "fac_player_faction"),
        (else_try),
            (assign, ":var_1", 0),
        (try_end),
    (else_try),
        (store_faction_of_party, ":var_2", "$current_town"),
        (party_get_slot, ":var_1", "$current_town", slot_center_player_relation),
        (store_relation, ":var_3", ":var_2", "fac_player_faction"),
    (try_end),
    (assign, reg0, ":var_1"),
    (ge, ":var_1", 0),
    (this_or_next|ge, ":var_1", 5),
    (this_or_next|eq, ":var_2", "$players_kingdom"),
    (this_or_next|ge, ":var_3", 0),
    (this_or_next|eq, ":var_2", "$supported_pretender_old_faction"),
    (eq, "$players_kingdom", 0),
    (party_slot_ge, "$current_town", slot_center_volunteer_troop_amount, 0),
    (party_slot_ge, "$current_town", slot_center_volunteer_troop_type, 1),
    (party_get_free_companions_capacity, ":var_4", "p_main_party"),
    (ge, ":var_4", 1),

]),

("tom_aor_faction_to_region",
[
    (store_script_param, ":var_0", 1),
    (try_begin),
        (eq, ":var_0", "fac_kingdom_1"),
        (assign, reg0, 6),
    (else_try),
        (this_or_next|eq, ":var_0", "fac_kingdom_5"),
        (this_or_next|eq, ":var_0", "fac_kingdom_6"),
        (this_or_next|eq, ":var_0", "fac_kingdom_7"),
        (this_or_next|eq, ":var_0", "fac_kingdom_9"),
        (this_or_next|eq, ":var_0", "fac_kingdom_37"),
        (this_or_next|eq, ":var_0", "fac_kingdom_19"),
        (this_or_next|eq, ":var_0", "fac_kingdom_42"),
        (eq, ":var_0", "fac_kingdom_10"),
        (assign, reg0, 5),
    (else_try),
        (eq, ":var_0", "fac_kingdom_12"),
        (assign, reg0, 16),
    (else_try),
        (eq, ":var_0", "fac_kingdom_13"),
        (assign, reg0, 7),
    (else_try),
        (this_or_next|eq, ":var_0", "fac_kingdom_16"),
        (this_or_next|eq, ":var_0", "fac_kingdom_17"),
        (this_or_next|eq, ":var_0", "fac_kingdom_18"),
        (this_or_next|eq, ":var_0", "fac_papacy"),
        (this_or_next|eq, ":var_0", "fac_kingdom_26"),
        (this_or_next|eq, ":var_0", "fac_kingdom_32"),
        (this_or_next|eq, ":var_0", "fac_kingdom_38"),
        (this_or_next|eq, ":var_0", "fac_kingdom_39"),
        (this_or_next|eq, ":var_0", "fac_kingdom_40"),
        (this_or_next|eq, ":var_0", "fac_kingdom_41"),
        (eq, ":var_0", "fac_kingdom_24"),
        (assign, reg0, 13),
    (else_try),
        (this_or_next|eq, ":var_0", "fac_kingdom_33"),
        (this_or_next|eq, ":var_0", "fac_kingdom_34"),
        (this_or_next|eq, ":var_0", "fac_kingdom_35"),
        (this_or_next|eq, ":var_0", "fac_kingdom_36"),
        (eq, ":var_0", "fac_kingdom_2"),
        (assign, reg0, 1),
    (else_try),
        (eq, ":var_0", "fac_kingdom_27"),
        (assign, reg0, 14),
    (else_try),
        (eq, ":var_0", "fac_kingdom_3"),
        (assign, reg0, 4),
    (else_try),
        (this_or_next|eq, ":var_0", "fac_kingdom_4"),
        (this_or_next|eq, ":var_0", "fac_kingdom_11"),
        (eq, ":var_0", "fac_kingdom_14"),
        (assign, reg0, 2),
    (else_try),
        (this_or_next|eq, ":var_0", "fac_kingdom_29"),
        (eq, ":var_0", "fac_kingdom_30"),
        (assign, reg0, 15),
    (else_try),
        (this_or_next|eq, ":var_0", "fac_kingdom_15"),
        (eq, ":var_0", "fac_kingdom_8"),
        (assign, reg0, 3),
    (else_try),
        (eq, ":var_0", "fac_kingdom_20"),
        (assign, reg0, 10),
    (else_try),
        (this_or_next|eq, ":var_0", "fac_kingdom_28"),
        (eq, ":var_0", "fac_kingdom_31"),
        (assign, reg0, 11),
    (else_try),
        (eq, ":var_0", "fac_kingdom_25"),
        (assign, reg0, 12),
    (else_try),
        (eq, ":var_0", "fac_kingdom_22"),
        (assign, reg0, 9),
    (else_try),
        (eq, ":var_0", "fac_kingdom_23"),
        (assign, reg0, 8),
    (else_try),
        (eq, ":var_0", "fac_kingdom_27"),
        (assign, reg0, 14),
    (else_try),
        (assign, reg0, -1),
    (try_end),

]),

("raf_aor_faction_to_region",
[
    (store_script_param, ":var_0", 1),
    (try_begin),
        (eq, ":var_0", "fac_kingdom_1"),
        (try_begin),
            (eq, "$players_kingdom", "fac_kingdom_1"),
            (assign, reg0, 6),
        (else_try),
            (assign, reg0, 1),
        (try_end),
    (else_try),
        (this_or_next|eq, ":var_0", "fac_kingdom_5"),
        (this_or_next|eq, ":var_0", "fac_kingdom_6"),
        (this_or_next|eq, ":var_0", "fac_kingdom_7"),
        (this_or_next|eq, ":var_0", "fac_kingdom_9"),
        (this_or_next|eq, ":var_0", "fac_kingdom_37"),
        (this_or_next|eq, ":var_0", "fac_kingdom_19"),
        (this_or_next|eq, ":var_0", "fac_kingdom_42"),
        (eq, ":var_0", "fac_kingdom_10"),
        (assign, reg0, 5),
    (else_try),
        (eq, ":var_0", "fac_kingdom_12"),
        (assign, reg0, 16),
    (else_try),
        (eq, ":var_0", "fac_kingdom_13"),
        (assign, reg0, 7),
    (else_try),
        (this_or_next|eq, ":var_0", "fac_kingdom_16"),
        (this_or_next|eq, ":var_0", "fac_kingdom_17"),
        (this_or_next|eq, ":var_0", "fac_kingdom_18"),
        (this_or_next|eq, ":var_0", "fac_papacy"),
        (this_or_next|eq, ":var_0", "fac_kingdom_26"),
        (this_or_next|eq, ":var_0", "fac_kingdom_32"),
        (this_or_next|eq, ":var_0", "fac_kingdom_38"),
        (this_or_next|eq, ":var_0", "fac_kingdom_39"),
        (this_or_next|eq, ":var_0", "fac_kingdom_40"),
        (this_or_next|eq, ":var_0", "fac_kingdom_41"),
        (eq, ":var_0", "fac_kingdom_24"),
        (assign, reg0, 13),
    (else_try),
        (this_or_next|eq, ":var_0", "fac_kingdom_33"),
        (this_or_next|eq, ":var_0", "fac_kingdom_34"),
        (this_or_next|eq, ":var_0", "fac_kingdom_35"),
        (this_or_next|eq, ":var_0", "fac_kingdom_36"),
        (eq, ":var_0", "fac_kingdom_2"),
        (assign, reg0, 1),
    (else_try),
        (eq, ":var_0", "fac_kingdom_27"),
        (assign, reg0, 14),
    (else_try),
        (eq, ":var_0", "fac_kingdom_3"),
        (assign, reg0, 4),
    (else_try),
        (this_or_next|eq, ":var_0", "fac_kingdom_4"),
        (this_or_next|eq, ":var_0", "fac_kingdom_11"),
        (eq, ":var_0", "fac_kingdom_14"),
        (assign, reg0, 2),
    (else_try),
        (this_or_next|eq, ":var_0", "fac_kingdom_29"),
        (eq, ":var_0", "fac_kingdom_30"),
        (assign, reg0, 15),
    (else_try),
        (this_or_next|eq, ":var_0", "fac_kingdom_15"),
        (eq, ":var_0", "fac_kingdom_8"),
        (assign, reg0, 3),
    (else_try),
        (eq, ":var_0", "fac_kingdom_20"),
        (assign, reg0, 10),
    (else_try),
        (this_or_next|eq, ":var_0", "fac_kingdom_28"),
        (eq, ":var_0", "fac_kingdom_31"),
        (assign, reg0, 11),
    (else_try),
        (eq, ":var_0", "fac_kingdom_25"),
        (assign, reg0, 12),
    (else_try),
        (eq, ":var_0", "fac_kingdom_22"),
        (assign, reg0, 9),
    (else_try),
        (eq, ":var_0", "fac_kingdom_23"),
        (assign, reg0, 8),
    (else_try),
        (eq, ":var_0", "fac_kingdom_27"),
        (assign, reg0, 14),
    (else_try),
        (assign, reg0, -1),
    (try_end),

]),

("raf_aor_region_to_faction",
[
    (store_script_param, ":var_0", 1),
    (try_begin),
        (eq, ":var_0", 6),
        (assign, reg0, "fac_kingdom_1"),
    (else_try),
        (eq, ":var_0", 5),
        (assign, reg0, "fac_kingdom_5"),
    (else_try),
        (eq, ":var_0", 7),
        (assign, reg0, "fac_kingdom_13"),
    (else_try),
        (eq, ":var_0", 13),
        (assign, reg0, "fac_kingdom_16"),
    (else_try),
        (eq, ":var_0", 14),
        (assign, reg0, "fac_kingdom_27"),
    (else_try),
        (eq, ":var_0", 1),
        (assign, reg0, "fac_kingdom_2"),
    (else_try),
        (eq, ":var_0", 4),
        (assign, reg0, "fac_kingdom_3"),
    (else_try),
        (eq, ":var_0", 2),
        (assign, reg0, "fac_kingdom_4"),
    (else_try),
        (eq, ":var_0", 15),
        (assign, reg0, "fac_kingdom_29"),
    (else_try),
        (eq, ":var_0", 3),
        (assign, reg0, "fac_kingdom_8"),
    (else_try),
        (eq, ":var_0", 10),
        (assign, reg0, "fac_kingdom_20"),
    (else_try),
        (eq, ":var_0", 11),
        (assign, reg0, "fac_kingdom_28"),
    (else_try),
        (eq, ":var_0", 12),
        (assign, reg0, "fac_kingdom_25"),
    (else_try),
        (eq, ":var_0", 8),
        (assign, reg0, "fac_kingdom_23"),
    (else_try),
        (eq, ":var_0", 9),
        (assign, reg0, "fac_kingdom_22"),
    (else_try),
        (eq, ":var_0", 16),
        (assign, reg0, "fac_kingdom_12"),
    (try_end),

]),

("raf_create_incidents",
[
    (assign, reg0, -1),
    (assign, reg1, -1),
    (assign, ":var_0", 96),
    (try_for_range, ":var_1", 1, ":var_0"),
        (store_random_in_range, ":var_2", "p_village_1_1", "p_salt_mine"),
        (store_random_in_range, ":var_3", "p_village_1_1", "p_salt_mine"),
        (store_faction_of_party, ":var_4", ":var_2"),
        (store_faction_of_party, ":var_5", ":var_3"),
        (try_begin),
            (neg|eq, ":var_2", ":var_3"),
            (neg|eq, ":var_4", ":var_5"),
            (store_distance_to_party_from_party, ":var_6", ":var_2", ":var_3"),
            (neg|gt, ":var_6", 25),
            (assign, reg0, ":var_2"),
            (assign, reg1, ":var_3"),
            (assign, ":var_0", 0),
        (else_try),
            (val_add, ":var_1", 1),
        (try_end),
    (try_end),

]),

("spawn_manors",
[
    (try_for_range, ":var_0", "p_town_1_1", "p_salt_mine"),
        (neg|is_between, ":var_0", "p_castle_1_1", "p_village_1_1"),
        (store_faction_of_party, ":var_1", ":var_0"),
        (is_between, ":var_1", "fac_player_supporters_faction", "fac_kingdoms_end"),
        (store_random_in_range, ":var_2", 0, 100),
        (neg|ge, ":var_2", 50),
        (call_script, "script_spawn_manor_party", "pt_manor", ":var_0"),
    (try_end),
    (call_script, "script_update_manor_array"),

]),

("spawn_manor_party",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (set_spawn_radius, 7),
    (store_faction_of_party, ":var_2", ":var_1"),
    (spawn_around_party, ":var_1", ":var_0"),
    (assign, ":var_3", reg0),
    (try_begin),
        (party_get_position, pos0, ":var_1"),
        (map_get_land_position_around_position, 1, pos0, pos5),
    (try_end),
    (party_get_position, pos0, ":var_1"),
    (assign, ":var_4", 3000),
    (try_for_range, reg1, 0, ":var_4"),
        (map_get_land_position_around_position, 1, pos0, pos7),
        (assign, ":var_5", 0),
        (try_for_parties, ":var_6"),
            (this_or_next|is_between, ":var_6", "p_town_1_1", "p_salt_mine"),
            (eq, ":var_6", "pt_manor"),
            (party_get_position, pos2, ":var_6"),
            (get_distance_between_positions_in_meters, ":var_7", pos2, pos1),
            (try_begin),
                (neg|ge, ":var_7", 1),
                (assign, ":var_5", 1),
            (try_end),
        (try_end),
        (try_begin),
            (eq, ":var_5", 0),
            (party_set_position, ":var_3", pos1),
            (party_get_current_terrain, ":var_8", ":var_3"),
            (try_begin),
                (eq, ":var_8", 7),
            (else_try),
                (assign, ":var_4", -8),
            (try_end),
        (try_end),
    (try_end),
    (store_random_in_range, ":var_0", 1, 5),
    (try_for_range, reg0, 0, ":var_0"),
        (store_random_in_range, ":var_9", 303, 327),
        (party_set_slot, ":var_3", ":var_9", 1),
    (try_end),
    (try_begin),
        (store_random_in_range, ":var_10", 10, 50),
        (store_random_in_range, ":var_11", 1, 10),
        (party_set_slot, ":var_3", 342, ":var_10"),
        (party_set_slot, ":var_3", slot_town_prosperity, ":var_11"),
    (try_end),
    (party_set_faction, ":var_3", ":var_2"),
    (party_set_slot, ":var_3", slot_village_bound_center, ":var_1"),
    (str_store_party_name, s0, ":var_1"),
    (str_store_party_name, s1, ":var_3"),
    (str_store_string, s2, "@{s1} of {s0}"),
    (party_set_name, ":var_3", 2),
    (assign, reg0, ":var_3"),

]),

("update_manor_array",
[
    (assign, ":var_0", 1),
    (try_for_parties, ":var_1"),
        (party_get_template_id, ":var_2", ":var_1"),
        (eq, ":var_2", "pt_manor"),
        (troop_set_slot, "trp_manor_array", ":var_0", ":var_1"),
        (val_add, ":var_0", 1),
        (party_get_slot, ":var_3", ":var_1", slot_village_bound_center),
        (party_set_slot, ":var_3", 299, ":var_1"),
        (call_script, "script_manor_set_unique_scene", ":var_1", ":var_3"),
    (try_end),
    (troop_set_slot, "trp_manor_array", slot_troop_relations_begin, ":var_0"),

]),

("prepare_manor_troops",
[
    (troop_set_slot, "trp_manor_grain", 302, 79),
    (troop_set_slot, "trp_manor_livestock", 302, 57),
    (troop_set_slot, "trp_manor_fruit", 302, 76),
    (troop_set_slot, "trp_manor_fisher", 302, 70),
    (troop_set_slot, "trp_manor_baker", 302, 81),
    (troop_set_slot, "trp_manor_winer", 302, 68),
    (troop_set_slot, "trp_manor_brewer", 302, 69),
    (troop_set_slot, "trp_manor_potter", 302, 54),
    (troop_set_slot, "trp_manor_blacksmith", 302, 63),
    (troop_set_slot, "trp_manor_butcher", 302, 75),
    (troop_set_slot, "trp_manor_oilmaker", 302, 53),
    (troop_set_slot, "trp_manor_linen", 302, 56),
    (troop_set_slot, "trp_manor_wool", 302, 58),
    (troop_set_slot, "trp_manor_tanner", 302, 65),
    (troop_set_slot, "trp_manor_trader_silk", 302, 59),
    (troop_set_slot, "trp_manor_trader_spice", 302, 51),
    (troop_set_slot, "trp_manor_trader_dyes", 302, 60),
    (troop_set_slot, "trp_manor_trader_salt", 302, 52),
    (troop_set_slot, "trp_manor_grain", 301, 345),
    (troop_set_slot, "trp_manor_livestock", 301, 346),
    (troop_set_slot, "trp_manor_fruit", 301, 347),
    (troop_set_slot, "trp_manor_fisher", 301, 348),
    (troop_set_slot, "trp_manor_baker", 301, 349),
    (troop_set_slot, "trp_manor_winer", 301, 350),
    (troop_set_slot, "trp_manor_brewer", 301, 351),
    (troop_set_slot, "trp_manor_potter", 301, 352),
    (troop_set_slot, "trp_manor_blacksmith", 301, 353),
    (troop_set_slot, "trp_manor_butcher", 301, 354),
    (troop_set_slot, "trp_manor_oilmaker", 301, 355),
    (troop_set_slot, "trp_manor_linen", 301, 356),
    (troop_set_slot, "trp_manor_wool", 301, 357),
    (troop_set_slot, "trp_manor_tanner", 301, 358),

]),

("manor_set_unique_scene",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (party_get_slot, ":var_2", ":var_1", slot_center_culture),
    (party_get_current_terrain, ":var_3", ":var_0"),
    (try_begin),
        (this_or_next|eq, ":var_2", "fac_culture_finnish"),
        (this_or_next|eq, ":var_2", "fac_culture_mazovian"),
        (this_or_next|eq, ":var_2", "fac_culture_teutonic"),
        (eq, ":var_2", "fac_culture_baltic"),
        (party_set_slot, ":var_0", slot_town_center, "scn_manor_fortified_teutonic"),
    (else_try),
        (this_or_next|eq, ":var_3", 4),
        (eq, ":var_3", 12),
        (party_set_slot, ":var_0", slot_town_center, "scn_manor_fortified_euro_snow"),
    (else_try),
        (this_or_next|eq, ":var_3", 5),
        (eq, ":var_3", 13),
        (party_set_slot, ":var_0", slot_town_center, "scn_manor_fortified_euro_desert"),
    (else_try),
        (this_or_next|eq, ":var_3", 2),
        (eq, ":var_3", 10),
        (party_set_slot, ":var_0", slot_town_center, "scn_manor_fortified_euro_steppe"),
    (else_try),
        (party_set_slot, ":var_0", slot_town_center, "scn_manor_fortified_euro_plains"),
    (try_end),

]),

("spawn_mongols",
[
    (try_for_range, ":var_0", "p_town_1_1", "p_salt_mine"),
        (this_or_next|is_between, ":var_0", "p_town_3_1", "p_town_4_1"),
        (is_between, ":var_0", "p_town_27_1", "p_town_28_1"),
        (try_begin),
            (is_between, ":var_0", "p_town_27_1", "p_town_28_1"),
            (assign, ":var_1", "fac_kingdom_27"),
        (else_try),
            (assign, ":var_1", "fac_kingdom_3"),
        (try_end),
        (set_spawn_radius, 5),
        (spawn_around_party, ":var_0", "pt_mongolian_camp"),
        (assign, ":var_2", reg0),
        (party_set_ai_behavior, ":var_2", 2),
        (party_set_ai_object, ":var_2", ":var_0"),
        (party_set_slot, ":var_2", slot_party_ai_object, ":var_0"),
        (party_set_ai_patrol_radius, ":var_2", 15),
        (party_set_slot, ":var_2", 299, ":var_0"),
        (party_set_slot, ":var_0", 298, ":var_2"),
        (party_set_faction, ":var_2", ":var_1"),
        (party_set_slot, ":var_2", slot_town_center, "scn_village_mongol"),
        (party_set_slot, ":var_2", slot_center_volunteer_troop_amount, 1),
        (party_set_slot, ":var_2", slot_center_culture, "fac_culture_mongol"),
        (party_set_slot, ":var_2", 301, 1),
        (party_set_icon, ":var_2", "icon_camp"),
    (try_end),

]),

("cf_spawn_crusaders_and_jihadists",
[
    (faction_slot_eq, "fac_kingdom_23", slot_faction_state, 0),
    (faction_slot_eq, "fac_kingdom_25", slot_faction_state, 0),
    (assign, ":var_0", 2),
    (try_begin),
        (store_num_parties_of_template, ":var_1", "pt_jihadist_raiders"),
        (neg|ge, ":var_1", ":var_0"),
        (assign, ":var_2", "p_town_25_5"),
        (set_spawn_radius, 5),
        (spawn_around_party, ":var_2", "pt_jihadist_raiders"),
        (assign, ":var_3", reg0),
        (party_set_ai_behavior, ":var_3", 2),
        (party_set_ai_object, ":var_3", ":var_2"),
        (party_set_slot, ":var_3", slot_party_ai_object, ":var_2"),
        (party_set_ai_patrol_radius, ":var_3", 15),
    (try_end),
    (assign, ":var_0", 4),
    (try_begin),
        (store_num_parties_of_template, ":var_1", "pt_crusader_raiders"),
        (neg|ge, ":var_1", ":var_0"),
        (assign, ":var_2", "p_town_23_1"),
        (set_spawn_radius, 5),
        (spawn_around_party, ":var_2", "pt_crusader_raiders"),
        (assign, ":var_3", reg0),
        (party_set_ai_behavior, ":var_3", 2),
        (party_set_ai_object, ":var_3", ":var_2"),
        (party_set_slot, ":var_3", slot_party_ai_object, ":var_2"),
        (party_set_ai_patrol_radius, ":var_3", 15),
    (try_end),

]),

("spawn_balts",
[
    (assign, ":var_0", 3),
    (try_begin),
        (store_num_parties_of_template, ":var_1", "pt_guelphs"),
        (neg|ge, ":var_1", ":var_0"),
        (faction_slot_eq, "fac_kingdom_40", slot_faction_state, 0),
        (set_spawn_radius, 5),
        (spawn_around_party, "p_town_40_2", "pt_guelphs"),
        (assign, ":var_2", reg0),
        (party_set_ai_behavior, ":var_2", 2),
        (party_set_ai_object, ":var_2", "p_town_40_2"),
        (party_set_slot, ":var_2", slot_party_ai_object, "p_town_40_2"),
        (party_set_ai_patrol_radius, ":var_2", 10),
        (party_set_banner_icon, ":var_2", "icon_banner_20"),
    (try_end),
    (assign, ":var_0", 3),
    (try_begin),
        (store_num_parties_of_template, ":var_1", "pt_ghibellines"),
        (neg|ge, ":var_1", ":var_0"),
        (faction_slot_eq, "fac_kingdom_41", slot_faction_state, 0),
        (set_spawn_radius, 5),
        (spawn_around_party, "p_town_41_2", "pt_ghibellines"),
        (assign, ":var_2", reg0),
        (party_set_ai_behavior, ":var_2", 2),
        (party_set_ai_object, ":var_2", "p_town_41_2"),
        (party_set_slot, ":var_2", slot_party_ai_object, "p_town_41_2"),
        (party_set_ai_patrol_radius, ":var_2", 10),
        (party_set_banner_icon, ":var_2", "icon_banner_19"),
    (try_end),
    (assign, ":var_0", 5),
    (try_begin),
        (faction_slot_eq, "fac_kingdom_35", slot_faction_state, 0),
        (store_num_parties_of_template, ":var_1", "pt_curonians"),
        (neg|ge, ":var_1", ":var_0"),
        (set_spawn_radius, 5),
        (spawn_around_party, "p_castle_35_1", "pt_curonians"),
        (assign, ":var_2", reg0),
        (party_set_ai_behavior, ":var_2", 2),
        (party_set_ai_object, ":var_2", "p_castle_35_1"),
        (party_set_slot, ":var_2", slot_party_ai_object, "p_castle_35_1"),
        (party_set_ai_patrol_radius, ":var_2", 15),
    (try_end),
    (try_begin),
        (faction_slot_eq, "fac_kingdom_34", slot_faction_state, 0),
        (store_num_parties_of_template, ":var_1", "pt_prussians"),
        (neg|ge, ":var_1", ":var_0"),
        (set_spawn_radius, 5),
        (spawn_around_party, "p_castle_34_1", "pt_prussians"),
        (assign, ":var_2", reg0),
        (party_set_ai_behavior, ":var_2", 3),
        (party_set_ai_object, ":var_2", "p_castle_34_1"),
        (party_set_slot, ":var_2", slot_party_ai_object, "p_castle_34_1"),
        (party_set_ai_patrol_radius, ":var_2", 15),
    (try_end),
    (try_begin),
        (faction_slot_eq, "fac_kingdom_36", slot_faction_state, 0),
        (store_num_parties_of_template, ":var_1", "pt_samogitians"),
        (neg|ge, ":var_1", ":var_0"),
        (set_spawn_radius, 5),
        (spawn_around_party, "p_castle_36_1", "pt_samogitians"),
        (assign, ":var_2", reg0),
        (party_set_ai_behavior, ":var_2", 3),
        (party_set_ai_object, ":var_2", "p_castle_36_1"),
        (party_set_slot, ":var_2", slot_party_ai_object, "p_castle_36_1"),
        (party_set_ai_patrol_radius, ":var_2", 15),
    (try_end),
    (try_begin),
        (faction_slot_eq, "fac_kingdom_33", slot_faction_state, 0),
        (store_num_parties_of_template, ":var_1", "pt_yotvingians"),
        (neg|ge, ":var_1", ":var_0"),
        (set_spawn_radius, 5),
        (spawn_around_party, "p_castle_33_1", "pt_yotvingians"),
        (assign, ":var_2", reg0),
        (party_set_ai_behavior, ":var_2", 3),
        (party_set_ai_object, ":var_2", "p_castle_33_1"),
        (party_set_slot, ":var_2", slot_party_ai_object, "p_castle_33_1"),
        (party_set_ai_patrol_radius, ":var_2", 15),
    (try_end),
    (assign, ":var_0", 3),
    (try_begin),
        (faction_slot_eq, "fac_kingdom_37", slot_faction_state, 0),
        (store_num_parties_of_template, ":var_1", "pt_welsh"),
        (neg|ge, ":var_1", ":var_0"),
        (set_spawn_radius, 5),
        (spawn_around_party, "p_town_37_1", "pt_welsh"),
        (assign, ":var_2", reg0),
        (party_set_ai_behavior, ":var_2", 3),
        (party_set_ai_object, ":var_2", "p_town_37_1"),
        (party_set_slot, ":var_2", slot_party_ai_object, "p_town_37_1"),
        (party_set_ai_patrol_radius, ":var_2", 15),
    (try_end),
    (assign, ":var_0", 2),
    (try_begin),
        (faction_slot_eq, "fac_kingdom_1", slot_faction_state, 0),
        (store_num_parties_of_template, ":var_1", "pt_teutonic_raiders"),
        (neg|ge, ":var_1", ":var_0"),
        (set_spawn_radius, 5),
        (call_script, "script_cf_select_random_town_with_faction", "fac_kingdom_1"),
        (assign, ":var_3", reg0),
        (gt, ":var_3", 0),
        (spawn_around_party, ":var_3", "pt_teutonic_raiders"),
        (assign, ":var_2", reg0),
        (party_set_ai_behavior, ":var_2", 3),
        (party_set_ai_object, ":var_2", ":var_3"),
        (party_set_slot, ":var_2", slot_party_ai_object, ":var_3"),
        (party_set_ai_patrol_radius, ":var_2", 15),
    (try_end),
    (try_for_parties, ":var_4"),
        (party_get_template_id, ":var_5", ":var_4"),
        (try_begin),
            (eq, ":var_5", "pt_guelphs"),
            (neg|faction_slot_eq, "fac_kingdom_40", slot_faction_state, 0),
            (party_set_faction, ":var_4", "fac_deserters"),
        (else_try),
            (eq, ":var_5", "pt_ghibellines"),
            (neg|faction_slot_eq, "fac_kingdom_41", slot_faction_state, 0),
            (party_set_faction, ":var_4", "fac_deserters"),
        (else_try),
            (eq, ":var_5", "pt_curonians"),
            (neg|faction_slot_eq, "fac_kingdom_35", slot_faction_state, 0),
            (party_set_faction, ":var_4", "fac_deserters"),
        (else_try),
            (eq, ":var_5", "pt_prussians"),
            (neg|faction_slot_eq, "fac_kingdom_34", slot_faction_state, 0),
            (party_set_faction, ":var_4", "fac_deserters"),
        (else_try),
            (eq, ":var_5", "pt_samogitians"),
            (neg|faction_slot_eq, "fac_kingdom_36", slot_faction_state, 0),
            (party_set_faction, ":var_4", "fac_deserters"),
        (else_try),
            (eq, ":var_5", "pt_yotvingians"),
            (neg|faction_slot_eq, "fac_kingdom_33", slot_faction_state, 0),
            (party_set_faction, ":var_4", "fac_deserters"),
        (else_try),
            (eq, ":var_5", "pt_welsh"),
            (neg|faction_slot_eq, "fac_kingdom_37", slot_faction_state, 0),
            (party_set_faction, ":var_4", "fac_deserters"),
        (else_try),
            (eq, ":var_5", "pt_teutonic_raiders"),
            (neg|faction_slot_eq, "fac_kingdom_1", slot_faction_state, 0),
            (party_set_faction, ":var_4", "fac_deserters"),
        (try_end),
    (try_end),

]),

("spawn_peasant_rebels",
[
    (store_current_day, ":var_0"),
    (store_num_parties_of_template, ":var_1", "pt_peasant_rebels_euro"),
    (store_random_in_range, ":var_2", "fac_player_supporters_faction", "fac_kingdoms_end"),
    (try_begin),
        (faction_get_slot, ":var_3", ":var_2", 103),
        (store_sub, ":var_4", ":var_0", ":var_3"),
        (ge, ":var_4", 30),
        (neg|gt, ":var_1", 9),
        (assign, ":var_5", 0),
        (assign, ":var_6", 0),
        (assign, ":var_7", 0),
        (assign, ":var_8", 100),
        (assign, ":var_9", -1),
        (try_for_range, ":var_10", "p_town_1_1", "p_castle_1_1"),
            (store_faction_of_party, ":var_11", ":var_10"),
            (eq, ":var_11", ":var_2"),
            (val_add, ":var_5", 1),
            (party_get_slot, ":var_12", ":var_10", slot_town_prosperity),
            (val_add, ":var_6", ":var_12"),
            (neg|ge, ":var_12", ":var_8"),
            (assign, ":var_8", ":var_12"),
            (assign, ":var_9", ":var_10"),
        (try_end),
        (gt, ":var_5", 0),
        (gt, ":var_9", 0),
        (store_div, ":var_7", ":var_6", ":var_5"),
        (neg|gt, ":var_7", 25),
        (set_spawn_radius, 3),
        (assign, ":var_13", 3),
        (faction_get_slot, ":var_14", ":var_2", slot_faction_quick_battle_tier_1_infantry),
        (faction_get_slot, ":var_15", ":var_2", 100),
        (faction_get_slot, ":var_16", ":var_2", 101),
        (try_for_range, reg1, 0, ":var_13"),
            (spawn_around_party, ":var_9", "pt_peasant_rebels_euro"),
            (assign, ":var_17", reg0),
            (party_set_ai_behavior, ":var_17", 3),
            (party_set_ai_object, ":var_17", ":var_9"),
            (party_set_ai_patrol_radius, ":var_17", 10),
            (str_store_faction_name, s25, ":var_2"),
            (party_set_slot, ":var_17", slot_party_ai_object, ":var_9"),
            (party_add_members, ":var_17", ":var_16", 40),
            (party_add_members, ":var_17", ":var_15", 120),
            (party_add_members, ":var_17", ":var_14", 240),
        (try_end),
        (try_begin),
            (display_message, "@Peasants revolt in areas controlled by the {s25}!", 0xFF0000),
            (faction_set_slot, ":var_2", 103, ":var_0"),
        (try_end),
    (try_end),

]),

("dplmc_send_recruiter",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (assign, ":var_3", ":var_0"),
    (val_mul, ":var_3", reg22),
    (val_add, ":var_3", 250),
    (call_script, "script_dplmc_withdraw_from_treasury", ":var_3"),
    (set_spawn_radius, 1),
    (spawn_around_party, "$current_town", "pt_dplmc_recruiter"),
    (assign, ":var_4", reg0),
    (party_set_ai_behavior, ":var_4", 0),
    (party_set_slot, ":var_4", slot_party_type, 22),
    (party_set_slot, ":var_4", 233, ":var_0"),
    (party_set_slot, ":var_4", 236, ":var_1"),
    (party_set_slot, ":var_4", 234, "$current_town"),
    (assign, ":var_5", "$players_kingdom"),
    (party_set_faction, ":var_4", ":var_5"),
    (party_set_slot, ":var_4", 237, ":var_2"),

]),

("dplmc_describe_prosperity_to_s4",
[
    (store_script_param_1, ":var_0"),
    (str_store_party_name, s60, ":var_0"),
    (party_get_slot, ":var_1", ":var_0", slot_town_prosperity),
    (str_store_string, s4, "str_empty_string"),
    (try_begin),
        (is_between, ":var_0", "p_town_1_1", "p_castle_1_1"),
        (try_begin),
            (eq, ":var_1", 0),
            (str_store_string, s4, "str_town_prosperity_0"),
        (else_try),
            (is_between, ":var_1", 1, 11),
            (str_store_string, s4, "str_town_prosperity_10"),
        (else_try),
            (is_between, ":var_1", 11, 21),
            (str_store_string, s4, "str_town_prosperity_20"),
        (else_try),
            (is_between, ":var_1", 21, 31),
            (str_store_string, s4, "str_town_prosperity_30"),
        (else_try),
            (is_between, ":var_1", 31, 41),
            (str_store_string, s4, "str_town_prosperity_40"),
        (else_try),
            (is_between, ":var_1", 41, 51),
            (str_store_string, s4, "str_town_prosperity_50"),
        (else_try),
            (is_between, ":var_1", 51, 61),
            (str_store_string, s4, "str_town_prosperity_60"),
        (else_try),
            (is_between, ":var_1", 61, 71),
            (str_store_string, s4, "str_town_prosperity_70"),
        (else_try),
            (is_between, ":var_1", 71, 81),
            (str_store_string, s4, "str_town_prosperity_80"),
        (else_try),
            (is_between, ":var_1", 81, 91),
            (str_store_string, s4, "str_town_prosperity_90"),
        (else_try),
            (is_between, ":var_1", 91, 101),
            (str_store_string, s4, "str_town_prosperity_100"),
        (try_end),
    (else_try),
        (is_between, ":var_0", "p_village_1_1", "p_salt_mine"),
        (try_begin),
            (eq, ":var_1", 0),
            (str_store_string, s4, "str_village_prosperity_0"),
        (else_try),
            (is_between, ":var_1", 1, 11),
            (str_store_string, s4, "str_village_prosperity_10"),
        (else_try),
            (is_between, ":var_1", 11, 21),
            (str_store_string, s4, "str_village_prosperity_20"),
        (else_try),
            (is_between, ":var_1", 21, 31),
            (str_store_string, s4, "str_village_prosperity_30"),
        (else_try),
            (is_between, ":var_1", 31, 41),
            (str_store_string, s4, "str_village_prosperity_40"),
        (else_try),
            (is_between, ":var_1", 41, 51),
            (str_store_string, s4, "str_village_prosperity_50"),
        (else_try),
            (is_between, ":var_1", 51, 61),
            (str_store_string, s4, "str_village_prosperity_60"),
        (else_try),
            (is_between, ":var_1", 61, 71),
            (str_store_string, s4, "str_village_prosperity_70"),
        (else_try),
            (is_between, ":var_1", 71, 81),
            (str_store_string, s4, "str_village_prosperity_80"),
        (else_try),
            (is_between, ":var_1", 81, 91),
            (str_store_string, s4, "str_village_prosperity_90"),
        (else_try),
            (is_between, ":var_1", 91, 101),
            (str_store_string, s4, "str_village_prosperity_100"),
        (try_end),
    (try_end),

]),

("dplmc_pay_into_treasury",
[
    (store_script_param_1, ":var_0"),
    (troop_add_gold, "trp_household_possessions", ":var_0"),
    (assign, reg0, ":var_0"),
    (play_sound, "snd_money_received"),
    (display_message, "@{reg0} denars added to treasury."),

]),

("dplmc_withdraw_from_treasury",
[
    (store_script_param_1, ":var_0"),
    (troop_remove_gold, "trp_household_possessions", ":var_0"),
    (assign, reg0, ":var_0"),
    (play_sound, "snd_money_paid"),
    (display_message, "@{reg0} denars removed from treasury."),

]),

("dplmc_describe_tax_rate_to_s50",
[
    (store_script_param_1, ":var_0"),
    (store_add, ":var_1", "str_dplmc_tax_normal", ":var_0"),
    (str_store_string, s50, ":var_1"),

]),

("dplmc_player_troops_leave",
[
    (store_script_param_1, ":var_0"),
    (try_begin),
        (eq, "$cheat_mode", 1),
        (assign, reg0, ":var_0"),
        (display_message, "@{!}DEBUG : removing player troops: {reg0}%"),
    (try_end),
    (assign, ":var_1", 0),
    (try_for_parties, ":var_2"),
        (assign, ":var_3", 0),
        (try_begin),
            (this_or_next|party_slot_eq, ":var_2", slot_party_type, 3),
            (party_slot_eq, ":var_2", slot_party_type, 2),
            (party_slot_eq, ":var_2", slot_town_lord, "trp_player"),
            (assign, ":var_3", 1),
        (else_try),
            (eq, "p_main_party", ":var_2"),
            (assign, ":var_3", 1),
        (try_end),
        (eq, ":var_3", 1),
        (party_get_num_companion_stacks, ":var_4", ":var_2"),
        (try_for_range, ":var_5", 0, ":var_4"),
            (party_stack_get_size, ":var_6", ":var_2", ":var_5"),
            (val_mul, ":var_6", ":var_0"),
            (val_div, ":var_6", 100),
            (party_stack_get_troop_id, ":var_7", ":var_2", ":var_5"),
            (party_remove_members, ":var_2", ":var_7", ":var_6"),
            (val_add, ":var_1", ":var_6"),
        (try_end),
    (try_end),
    (assign, reg0, ":var_1"),

]),

("dplmc_get_item_buy_price_factor",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (assign, ":var_2", 100),
    (call_script, "script_get_trade_penalty", ":var_0"),
    (assign, ":var_3", reg0),
    (try_begin),
        (is_between, ":var_1", "p_town_1_1", "p_salt_mine"),
        (is_between, ":var_0", "itm_spice", "itm_siege_supply"),
        (store_sub, ":var_4", ":var_0", "itm_spice"),
        (val_add, ":var_4", 250),
        (party_get_slot, ":var_2", ":var_1", ":var_4"),
        (try_begin),
            (is_between, ":var_1", "p_village_1_1", "p_salt_mine"),
            (party_get_slot, ":var_5", ":var_1", slot_village_market_town),
            (party_get_slot, ":var_6", ":var_5", ":var_4"),
            (val_max, ":var_2", ":var_6"),
        (try_end),
        (val_mul, ":var_2", 100),
        (val_div, ":var_2", 1000),
    (try_end),
    (store_add, ":var_7", 100, ":var_3"),
    (val_mul, ":var_2", ":var_7"),
    (val_div, ":var_2", 100),
    (assign, reg0, ":var_2"),
    (set_trigger_result, reg0),

]),

("dplmc_party_calculate_strength",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (assign, reg0, 0),
    (party_get_num_companion_stacks, ":var_2", ":var_0"),
    (assign, ":var_3", 0),
    (try_begin),
        (neg|eq, ":var_1", 0),
        (assign, ":var_3", 1),
    (try_end),
    (assign, ":var_4", 0),
    (try_for_range, ":var_5", ":var_3", ":var_2"),
        (party_stack_get_troop_id, ":var_6", ":var_0", ":var_5"),
        (try_begin),
            (neg|troop_is_hero, ":var_6"),
            (party_stack_get_size, ":var_7", ":var_0", ":var_5"),
        (try_end),
        (val_add, ":var_4", ":var_7"),
    (try_end),
    (assign, reg0, ":var_4"),
    (try_begin),
        (eq, "$cheat_mode", 1),
        (display_message, "@{!}DEBUG : sum: {reg0}"),
    (try_end),

]),

("dplmc_start_alliance_between_kingdoms",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (store_relation, ":var_3", ":var_0", ":var_1"),
    (val_add, ":var_3", 15),
    (val_max, ":var_3", 40),
    (set_relation, ":var_0", ":var_1", ":var_3"),
    (call_script, "script_exchange_prisoners_between_factions", ":var_0", ":var_1"),
    (try_begin),
        (eq, "$players_kingdom", ":var_0"),
        (store_relation, ":var_3", "fac_player_supporters_faction", ":var_1"),
        (val_add, ":var_3", 15),
        (val_max, ":var_3", 40),
        (call_script, "script_set_player_relation_with_faction", ":var_1", ":var_3"),
    (else_try),
        (eq, "$players_kingdom", ":var_1"),
        (store_relation, ":var_3", "fac_player_supporters_faction", ":var_0"),
        (val_add, ":var_3", 15),
        (val_max, ":var_3", 40),
        (call_script, "script_set_player_relation_with_faction", ":var_0", ":var_3"),
    (try_end),
    (try_begin),
        (eq, ":var_2", 1),
        (str_store_faction_name_link, s1, ":var_0"),
        (str_store_faction_name_link, s2, ":var_1"),
        (display_log_message, "@{s1} and {s2} have concluded an alliance with each other."),
        (call_script, "script_add_notification_menu", "mnu_dplmc_notification_alliance_declared", ":var_0", ":var_1"),
        (call_script, "script_event_kingdom_make_peace_with_kingdom", ":var_0", ":var_1"),
        (call_script, "script_event_kingdom_make_peace_with_kingdom", ":var_1", ":var_0"),
        (assign, "$g_recalculate_ais", 1),
    (try_end),
    (try_begin),
        (store_add, ":var_4", ":var_0", 120),
        (val_sub, ":var_4", "fac_player_supporters_faction"),
        (faction_set_slot, ":var_1", ":var_4", 80),
        (store_add, ":var_4", ":var_1", 120),
        (val_sub, ":var_4", "fac_player_supporters_faction"),
        (faction_set_slot, ":var_0", ":var_4", 80),
        (store_add, ":var_5", ":var_1", 220),
        (val_sub, ":var_5", "fac_player_supporters_faction"),
        (faction_get_slot, ":var_6", ":var_0", ":var_5"),
        (try_begin),
            (neg|ge, ":var_6", 100),
        (try_end),
        (faction_set_slot, ":var_0", ":var_5", 0),
        (store_add, ":var_7", ":var_0", 220),
        (val_sub, ":var_7", "fac_player_supporters_faction"),
        (faction_get_slot, ":var_8", ":var_1", ":var_7"),
        (try_begin),
            (neg|ge, ":var_8", 100),
        (try_end),
        (faction_set_slot, ":var_1", ":var_7", 0),
    (try_end),
    (try_for_range, ":var_9", "fac_player_supporters_faction", "fac_kingdoms_end"),
        (faction_slot_eq, ":var_9", slot_faction_state, 0),
        (neg|eq, ":var_0", ":var_9"),
        (neg|eq, ":var_1", ":var_9"),
        (call_script, "script_diplomacy_faction_get_diplomatic_status_with_faction", ":var_0", ":var_9"),
        (eq, reg0, -2),
        (call_script, "script_diplomacy_faction_get_diplomatic_status_with_faction", ":var_1", ":var_9"),
        (ge, reg0, -1),
        (call_script, "script_diplomacy_start_war_between_kingdoms", ":var_1", ":var_9", 1),
    (try_end),
    (try_for_range, ":var_9", "fac_player_supporters_faction", "fac_kingdoms_end"),
        (faction_slot_eq, ":var_9", slot_faction_state, 0),
        (neg|eq, ":var_0", ":var_9"),
        (neg|eq, ":var_1", ":var_9"),
        (call_script, "script_diplomacy_faction_get_diplomatic_status_with_faction", ":var_1", ":var_9"),
        (eq, reg0, -2),
        (call_script, "script_diplomacy_faction_get_diplomatic_status_with_faction", ":var_0", ":var_9"),
        (ge, reg0, -1),
        (call_script, "script_diplomacy_start_war_between_kingdoms", ":var_0", ":var_9", 1),
    (try_end),

]),

("dplmc_start_defensive_between_kingdoms",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (store_relation, ":var_3", ":var_0", ":var_1"),
    (val_add, ":var_3", 10),
    (val_max, ":var_3", 30),
    (set_relation, ":var_0", ":var_1", ":var_3"),
    (call_script, "script_exchange_prisoners_between_factions", ":var_0", ":var_1"),
    (try_begin),
        (eq, "$players_kingdom", ":var_0"),
        (store_relation, ":var_3", "fac_player_supporters_faction", ":var_1"),
        (val_add, ":var_3", 10),
        (val_max, ":var_3", 30),
        (call_script, "script_set_player_relation_with_faction", ":var_1", ":var_3"),
    (else_try),
        (eq, "$players_kingdom", ":var_1"),
        (store_relation, ":var_3", "fac_player_supporters_faction", ":var_0"),
        (val_add, ":var_3", 10),
        (val_max, ":var_3", 30),
        (call_script, "script_set_player_relation_with_faction", ":var_0", ":var_3"),
    (try_end),
    (try_begin),
        (eq, ":var_2", 1),
        (str_store_faction_name_link, s1, ":var_0"),
        (str_store_faction_name_link, s2, ":var_1"),
        (display_log_message, "@{s1} and {s2} have concluded a defensive pact with each other."),
        (call_script, "script_add_notification_menu", "mnu_dplmc_notification_defensive_declared", ":var_0", ":var_1"),
        (call_script, "script_event_kingdom_make_peace_with_kingdom", ":var_0", ":var_1"),
        (call_script, "script_event_kingdom_make_peace_with_kingdom", ":var_1", ":var_0"),
        (assign, "$g_recalculate_ais", 1),
    (try_end),
    (try_begin),
        (store_add, ":var_4", ":var_0", 120),
        (val_sub, ":var_4", "fac_player_supporters_faction"),
        (faction_set_slot, ":var_1", ":var_4", 60),
        (store_add, ":var_4", ":var_1", 120),
        (val_sub, ":var_4", "fac_player_supporters_faction"),
        (faction_set_slot, ":var_0", ":var_4", 60),
        (store_add, ":var_5", ":var_1", 220),
        (val_sub, ":var_5", "fac_player_supporters_faction"),
        (faction_get_slot, ":var_6", ":var_0", ":var_5"),
        (try_begin),
            (neg|ge, ":var_6", 100),
        (try_end),
        (faction_set_slot, ":var_0", ":var_5", 0),
        (store_add, ":var_7", ":var_0", 220),
        (val_sub, ":var_7", "fac_player_supporters_faction"),
        (faction_get_slot, ":var_8", ":var_1", ":var_7"),
        (try_begin),
            (neg|ge, ":var_8", 100),
        (try_end),
        (faction_set_slot, ":var_1", ":var_7", 0),
    (try_end),

]),

("dplmc_start_trade_between_kingdoms",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (store_relation, ":var_3", ":var_0", ":var_1"),
    (val_add, ":var_3", 5),
    (val_max, ":var_3", 20),
    (set_relation, ":var_0", ":var_1", ":var_3"),
    (call_script, "script_exchange_prisoners_between_factions", ":var_0", ":var_1"),
    (try_begin),
        (eq, "$players_kingdom", ":var_0"),
        (store_relation, ":var_3", "fac_player_supporters_faction", ":var_1"),
        (val_add, ":var_3", 5),
        (val_max, ":var_3", 20),
        (call_script, "script_set_player_relation_with_faction", ":var_1", ":var_3"),
    (else_try),
        (eq, "$players_kingdom", ":var_1"),
        (store_relation, ":var_3", "fac_player_supporters_faction", ":var_0"),
        (val_add, ":var_3", 5),
        (val_max, ":var_3", 20),
        (call_script, "script_set_player_relation_with_faction", ":var_0", ":var_3"),
    (try_end),
    (try_begin),
        (eq, ":var_2", 1),
        (str_store_faction_name_link, s1, ":var_0"),
        (str_store_faction_name_link, s2, ":var_1"),
        (display_log_message, "@{s1} and {s2} have concluded a trade agreement with each other."),
        (call_script, "script_add_notification_menu", "mnu_dplmc_notification_trade_declared", ":var_0", ":var_1"),
        (call_script, "script_event_kingdom_make_peace_with_kingdom", ":var_0", ":var_1"),
        (call_script, "script_event_kingdom_make_peace_with_kingdom", ":var_1", ":var_0"),
        (assign, "$g_recalculate_ais", 1),
    (try_end),
    (try_begin),
        (store_add, ":var_4", ":var_0", 120),
        (val_sub, ":var_4", "fac_player_supporters_faction"),
        (faction_set_slot, ":var_1", ":var_4", 40),
        (store_add, ":var_4", ":var_1", 120),
        (val_sub, ":var_4", "fac_player_supporters_faction"),
        (faction_set_slot, ":var_0", ":var_4", 40),
        (store_add, ":var_5", ":var_1", 220),
        (val_sub, ":var_5", "fac_player_supporters_faction"),
        (faction_get_slot, ":var_6", ":var_0", ":var_5"),
        (try_begin),
            (neg|ge, ":var_6", 100),
        (try_end),
        (faction_set_slot, ":var_0", ":var_5", 0),
        (store_add, ":var_7", ":var_0", 220),
        (val_sub, ":var_7", "fac_player_supporters_faction"),
        (faction_get_slot, ":var_8", ":var_1", ":var_7"),
        (try_begin),
            (neg|ge, ":var_8", 100),
        (try_end),
        (faction_set_slot, ":var_1", ":var_7", 0),
    (try_end),

]),

("dplmc_start_nonaggression_between_kingdoms",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (store_relation, ":var_3", ":var_0", ":var_1"),
    (val_add, ":var_3", 3),
    (val_max, ":var_3", 10),
    (set_relation, ":var_0", ":var_1", ":var_3"),
    (call_script, "script_exchange_prisoners_between_factions", ":var_0", ":var_1"),
    (try_begin),
        (eq, "$players_kingdom", ":var_0"),
        (store_relation, ":var_3", "fac_player_supporters_faction", ":var_1"),
        (val_add, ":var_3", 3),
        (val_max, ":var_3", 10),
        (call_script, "script_set_player_relation_with_faction", ":var_1", ":var_3"),
    (else_try),
        (eq, "$players_kingdom", ":var_1"),
        (store_relation, ":var_3", "fac_player_supporters_faction", ":var_0"),
        (val_add, ":var_3", 3),
        (val_max, ":var_3", 10),
        (call_script, "script_set_player_relation_with_faction", ":var_0", ":var_3"),
    (try_end),
    (try_begin),
        (eq, ":var_2", 1),
        (str_store_faction_name_link, s1, ":var_0"),
        (str_store_faction_name_link, s2, ":var_1"),
        (display_log_message, "@{s1} and {s2} have concluded a non aggression pact with each other."),
        (call_script, "script_add_notification_menu", "mnu_dplmc_notification_nonaggression_declared", ":var_0", ":var_1"),
        (call_script, "script_event_kingdom_make_peace_with_kingdom", ":var_0", ":var_1"),
        (call_script, "script_event_kingdom_make_peace_with_kingdom", ":var_1", ":var_0"),
        (assign, "$g_recalculate_ais", 1),
    (try_end),
    (try_begin),
        (store_add, ":var_4", ":var_0", 120),
        (val_sub, ":var_4", "fac_player_supporters_faction"),
        (faction_set_slot, ":var_1", ":var_4", 20),
        (store_add, ":var_4", ":var_1", 120),
        (val_sub, ":var_4", "fac_player_supporters_faction"),
        (faction_set_slot, ":var_0", ":var_4", 20),
        (store_add, ":var_5", ":var_1", 220),
        (val_sub, ":var_5", "fac_player_supporters_faction"),
        (faction_get_slot, ":var_6", ":var_0", ":var_5"),
        (try_begin),
            (neg|ge, ":var_6", 100),
        (try_end),
        (faction_set_slot, ":var_0", ":var_5", 0),
        (store_add, ":var_7", ":var_0", 220),
        (val_sub, ":var_7", "fac_player_supporters_faction"),
        (faction_get_slot, ":var_8", ":var_1", ":var_7"),
        (try_begin),
            (neg|ge, ":var_8", 100),
        (try_end),
        (faction_set_slot, ":var_1", ":var_7", 0),
    (try_end),

]),

("dplmc_get_prisoners_value_between_factions",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (assign, ":var_2", 0),
    (assign, ":var_3", 0),
    (try_for_parties, ":var_4"),
        (store_faction_of_party, ":var_5", ":var_4"),
        (try_begin),
            (eq, ":var_5", ":var_0"),
            (party_get_num_prisoner_stacks, ":var_6", ":var_4"),
            (try_for_range_backwards, ":var_7", 0, ":var_6"),
                (party_prisoner_stack_get_troop_id, ":var_8", ":var_4", ":var_7"),
                (store_troop_faction, ":var_9", ":var_8"),
                (eq, ":var_9", ":var_1"),
                (try_begin),
                    (troop_is_hero, ":var_8"),
                    (call_script, "script_calculate_ransom_amount_for_troop", ":var_8"),
                    (val_add, ":var_2", reg0),
                    (try_begin),
                        (eq, "$cheat_mode", 1),
                        (assign, reg0, ":var_2"),
                        (display_message, "@{!}DEBUG : faction no 1 value: {reg0}"),
                    (try_end),
                (try_end),
            (try_end),
        (else_try),
            (eq, ":var_5", ":var_1"),
            (party_get_num_prisoner_stacks, ":var_6", ":var_4"),
            (try_for_range_backwards, ":var_7", 0, ":var_6"),
                (party_prisoner_stack_get_troop_id, ":var_8", ":var_4", ":var_7"),
                (store_troop_faction, ":var_9", ":var_8"),
                (eq, ":var_9", ":var_0"),
                (try_begin),
                    (troop_is_hero, ":var_8"),
                    (call_script, "script_calculate_ransom_amount_for_troop", ":var_8"),
                    (val_add, ":var_3", reg0),
                    (try_begin),
                        (eq, "$cheat_mode", 1),
                        (assign, reg0, ":var_3"),
                        (display_message, "@{!}DEBUG : faction no 2 value: {reg0}"),
                    (try_end),
                (try_end),
            (try_end),
        (try_end),
    (try_end),
    (store_sub, reg0, ":var_2", ":var_3"),

]),

("dplmc_get_truce_pay_amount",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (assign, ":var_3", 1000),
    (assign, ":var_4", 3000),
    (try_begin),
        (eq, "$cheat_mode", 1),
        (assign, reg0, ":var_2"),
        (display_message, "@{!}DEBUG : peace war result: {reg0}"),
    (try_end),
    (val_sub, ":var_2", 1),
    (val_mul, ":var_2", 4),
    (val_mul, ":var_2", ":var_3"),
    (try_begin),
        (eq, "$cheat_mode", 1),
        (assign, reg0, ":var_2"),
        (display_message, "@{!}DEBUG : peace war result after multi: {reg0}"),
    (try_end),
    (call_script, "script_dplmc_get_prisoners_value_between_factions", ":var_0", ":var_1"),
    (try_begin),
        (eq, "$cheat_mode", 1),
        (display_message, "@{!}DEBUG : prisonser value: {reg0}"),
    (try_end),
    (val_sub, ":var_2", reg0),
    (val_max, ":var_2", 0),
    (assign, reg0, ":var_2"),
    (try_begin),
        (eq, "$cheat_mode", 1),
        (display_message, "@{!}DEBUG : peace war result after prisoners: {reg0}"),
    (try_end),
    (assign, reg1, -1),
    (try_begin),
        (gt, "$g_concession_demanded", 0),
        (assign, ":var_5", 2),
        (try_begin),
            (is_between, "$g_concession_demanded", "p_town_1_1", "p_castle_1_1"),
            (assign, ":var_5", 3),
        (else_try),
            (is_between, "$g_concession_demanded", "p_castle_1_1", "p_village_1_1"),
            (assign, ":var_5", 2),
        (else_try),
            (is_between, "$g_concession_demanded", "p_village_1_1", "p_salt_mine"),
            (assign, ":var_5", 1),
        (try_end),
        (val_mul, ":var_5", ":var_4"),
        (store_sub, reg1, reg0, ":var_5"),
        (val_max, reg1, 0),
    (try_end),
    (try_begin),
        (eq, "$cheat_mode", 1),
        (display_message, "@{!}DEBUG : truce pay amount0: {reg0}"),
        (display_message, "@{!}DEBUG : truce pay amount1: {reg1}"),
    (try_end),

]),

("dplmc_player_center_surrender",
[
    (store_script_param, ":var_0", 1),
    (store_current_hours, ":var_1"),
    (val_add, ":var_1", 48),
    (party_get_slot, ":var_2", ":var_0", slot_center_is_besieged_by),
    (store_faction_of_party, ":var_3", ":var_2"),
    (party_stack_get_troop_id, ":var_4", ":var_2", 0),
    (party_set_slot, ":var_2", slot_party_ignore_player_until, ":var_1"),
    (party_ignore_player, ":var_2", 48),
    (try_for_range, ":var_5", "trp_npc1", "trp_knight_1_1_wife"),
        (store_troop_faction, ":var_6", ":var_5"),
        (eq, ":var_6", ":var_3"),
        (troop_get_slot, ":var_7", ":var_5", slot_troop_leaded_party),
        (party_is_active, ":var_7"),
        (party_slot_eq, ":var_7", slot_party_ai_state, 11),
        (party_slot_eq, ":var_7", slot_party_ai_object, ":var_2"),
        (party_is_active, ":var_2"),
        (store_distance_to_party_from_party, ":var_8", ":var_7", ":var_2"),
        (neg|ge, ":var_8", 20),
        (party_set_slot, ":var_7", slot_party_ignore_player_until, ":var_1"),
        (party_ignore_player, ":var_7", 48),
    (try_end),
    (party_set_faction, "$current_town", "fac_neutral"),
    (party_get_num_attached_parties, ":var_9", ":var_0"),
    (try_for_range_backwards, ":var_10", 0, ":var_9"),
        (party_get_attached_party_with_rank, ":var_11", ":var_0", ":var_10"),
        (party_detach, ":var_11"),
        (party_get_slot, ":var_12", ":var_11", slot_party_type),
        (eq, ":var_12", 13),
        (neg|eq, ":var_12", "p_main_party"),
        (store_faction_of_party, ":var_13", ":var_11"),
        (call_script, "script_get_closest_walled_center_of_faction", ":var_11", ":var_13"),
        (try_begin),
            (gt, reg0, 0),
            (call_script, "script_party_set_ai_state", ":var_11", 7, reg0),
        (else_try),
            (call_script, "script_party_set_ai_state", ":var_11", 4, ":var_0"),
        (try_end),
    (try_end),
    (call_script, "script_party_remove_all_companions", ":var_0"),
    (change_screen_return),
    (party_collect_attachments_to_party, ":var_0", "p_collective_enemy"),
    (call_script, "script_party_copy", "p_encountered_party_backup", "p_collective_enemy"),
    (call_script, "script_give_center_to_faction", "$current_town", ":var_3"),
    (call_script, "script_order_best_besieger_party_to_guard_center", ":var_0", ":var_3"),
    (call_script, "script_change_player_relation_with_troop", ":var_4", 2),
    (try_begin),
        (gt, "$players_kingdom", 0),
        (neg|eq, "$players_kingdom", "fac_player_supporters_faction"),
        (neg|eq, "$players_kingdom", "fac_player_faction"),
        (faction_get_slot, ":var_14", "$players_kingdom", slot_faction_leader),
        (neg|eq, ":var_14", "trp_player"),
        (call_script, "script_change_player_relation_with_troop", ":var_14", -2),
    (try_end),
    (troop_get_slot, ":var_15", "trp_player", slot_troop_days_on_mission),
    (val_add, ":var_15", 4),
    (val_min, ":var_15", 100),
    (troop_set_slot, "trp_player", slot_troop_days_on_mission, ":var_15"),

]),

("dplmc_send_messenger_to_troop",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (troop_get_slot, ":var_3", ":var_0", slot_troop_leaded_party),
    (try_begin),
        (eq, ":var_1", 11),
        (assign, ":var_2", "p_main_party"),
    (try_end),
    (set_spawn_radius, 1),
    (spawn_around_party, "$current_town", "pt_messenger_party"),
    (assign, ":var_4", reg0),
    (party_add_members, ":var_4", "trp_dplmc_messenger", 1),
    (store_troop_faction, ":var_5", "trp_player"),
    (party_set_faction, ":var_4", ":var_5"),
    (party_set_slot, ":var_4", slot_party_type, 25),
    (party_set_slot, ":var_4", 300, ":var_1"),
    (party_set_slot, ":var_4", slot_party_home_center, "$current_town"),
    (party_set_ai_behavior, ":var_4", 1),
    (party_set_ai_object, ":var_4", ":var_3"),
    (party_set_slot, ":var_4", slot_party_ai_object, ":var_3"),
    (party_set_slot, ":var_4", slot_party_orders_object, ":var_2"),
    (try_begin),
        (eq, "$cheat_mode", 1),
        (str_store_party_name, s13, ":var_3"),
        (display_message, "@{!}DEBUG - Send message to {s13}"),
    (try_end),

]),

("dplmc_send_messenger_to_party",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (set_spawn_radius, 1),
    (spawn_around_party, "$current_town", "pt_messenger_party"),
    (assign, ":var_3", reg0),
    (party_add_members, ":var_3", "trp_dplmc_messenger", 1),
    (party_set_faction, ":var_3", "fac_player_faction"),
    (party_set_slot, ":var_3", slot_party_type, 25),
    (party_set_slot, ":var_3", 300, ":var_1"),
    (party_set_slot, ":var_3", slot_party_home_center, "$current_town"),
    (party_set_ai_behavior, ":var_3", 1),
    (party_set_ai_object, ":var_3", ":var_0"),
    (party_set_slot, ":var_3", slot_party_ai_object, ":var_0"),
    (party_set_slot, ":var_3", slot_party_orders_object, ":var_2"),
    (try_begin),
        (eq, "$cheat_mode", 1),
        (str_store_party_name, s13, ":var_0"),
        (display_message, "@{!}DEBUG - Send message to {s13}"),
    (try_end),

]),

("dplmc_send_gift",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (try_begin),
        (troop_slot_eq, ":var_0", slot_troop_occupation, 2),
        (troop_get_slot, ":var_2", ":var_0", slot_troop_leaded_party),
    (else_try),
        (troop_slot_eq, ":var_0", slot_troop_occupation, 6),
        (troop_get_slot, ":var_2", ":var_0", slot_troop_cur_center),
    (try_end),
    (try_begin),
        (eq, "$cheat_mode", 1),
        (str_store_item_name, s12, ":var_1"),
        (str_store_party_name, s13, ":var_2"),
        (display_message, "@{!}DEBUG - Bring {s12} to {s13}"),
    (try_end),
    (call_script, "script_dplmc_withdraw_from_treasury", 50),
    (troop_get_inventory_capacity, ":var_3", "trp_household_possessions"),
    (try_begin),
        (troop_slot_eq, ":var_0", slot_troop_occupation, 2),
        (assign, ":var_4", 150),
        (try_for_range, ":var_5", 0, ":var_3"),
            (gt, ":var_4", 0),
            (troop_get_inventory_slot, ":var_6", "trp_household_possessions", ":var_5"),
            (eq, ":var_6", ":var_1"),
            (troop_inventory_slot_get_item_amount, ":var_7", "trp_household_possessions", ":var_5"),
            (try_begin),
                (neg|gt, ":var_7", ":var_4"),
                (troop_inventory_slot_set_item_amount, "trp_household_possessions", ":var_5", 0),
                (val_sub, ":var_4", ":var_7"),
            (else_try),
                (val_sub, ":var_7", ":var_4"),
                (troop_inventory_slot_set_item_amount, "trp_household_possessions", ":var_5", ":var_7"),
                (assign, ":var_4", 0),
            (try_end),
        (try_end),
    (else_try),
        (troop_slot_eq, ":var_0", slot_troop_occupation, 6),
        (troop_remove_item, "trp_household_possessions", ":var_1"),
    (try_end),
    (set_spawn_radius, 1),
    (spawn_around_party, "$current_town", "pt_dplmc_gift_caravan"),
    (assign, ":var_8", reg0),
    (party_set_slot, ":var_8", slot_party_type, 23),
    (party_set_slot, ":var_8", 300, ":var_1"),
    (party_set_slot, ":var_8", slot_party_orders_object, ":var_0"),
    (party_set_ai_behavior, ":var_8", 1),
    (party_set_ai_object, ":var_8", ":var_2"),
    (party_set_slot, ":var_8", slot_party_ai_object, ":var_2"),
    (party_stack_get_troop_id, ":var_9", ":var_8", 0),
    (troop_set_slot, ":var_9", slot_troop_leaded_party, ":var_8"),

]),

("dplmc_send_gift_to_center",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (try_begin),
        (eq, "$cheat_mode", 1),
        (str_store_item_name, s12, ":var_1"),
        (str_store_party_name, s13, ":var_0"),
        (display_message, "@{!}DEBUG - Bring {s12} to {s13}"),
    (try_end),
    (call_script, "script_dplmc_withdraw_from_treasury", 50),
    (troop_get_inventory_capacity, ":var_2", "trp_household_possessions"),
    (assign, ":var_3", 300),
    (try_for_range, ":var_4", 0, ":var_2"),
        (gt, ":var_3", 0),
        (troop_get_inventory_slot, ":var_5", "trp_household_possessions", ":var_4"),
        (eq, ":var_5", ":var_1"),
        (troop_inventory_slot_get_item_amount, ":var_6", "trp_household_possessions", ":var_4"),
        (try_begin),
            (neg|gt, ":var_6", ":var_3"),
            (troop_inventory_slot_set_item_amount, "trp_household_possessions", ":var_4", 0),
            (val_sub, ":var_3", ":var_6"),
        (else_try),
            (val_sub, ":var_6", ":var_3"),
            (troop_inventory_slot_set_item_amount, "trp_household_possessions", ":var_4", ":var_6"),
            (assign, ":var_3", 0),
        (try_end),
    (try_end),
    (set_spawn_radius, 1),
    (spawn_around_party, "$current_town", "pt_dplmc_gift_caravan"),
    (assign, ":var_7", reg0),
    (party_set_slot, ":var_7", slot_party_type, 23),
    (party_set_slot, ":var_7", 300, ":var_1"),
    (party_set_slot, ":var_7", slot_party_orders_object, 0),
    (party_set_ai_behavior, ":var_7", 1),
    (party_set_ai_object, ":var_7", ":var_0"),
    (party_set_slot, ":var_7", slot_party_ai_object, ":var_0"),
    (party_stack_get_troop_id, ":var_8", ":var_7", 0),
    (troop_set_slot, ":var_8", slot_troop_leaded_party, ":var_7"),
    (troop_set_slot, ":var_8", slot_troop_leaded_party, ":var_7"),

]),

("dplmc_troop_political_notes_to_s47",
[
    (store_script_param, ":var_0", 1),
    (try_begin),
        (str_clear, s47),
        (store_troop_faction, ":var_1", ":var_0"),
        (faction_get_slot, ":var_2", ":var_1", slot_faction_leader),
        (str_clear, s40),
        (assign, ":var_3", 0),
        (try_for_range, ":var_4", "trp_npc1", "trp_knight_1_1_wife"),
            (call_script, "script_troop_get_relation_with_troop", ":var_0", ":var_4"),
            (neg|ge, reg0, -10),
            (str_store_troop_name_link, s39, ":var_4"),
            (try_begin),
                (eq, ":var_3", 0),
                (str_store_string, s40, "str_dplmc_s39_rival"),
                (assign, ":var_3", 1),
            (else_try),
                (str_store_string, s41, "str_s40"),
                (str_store_string, s40, "str_dplmc_s41_s39_rival"),
            (try_end),
        (try_end),
        (str_clear, s46),
        (str_store_troop_name, s46, ":var_0"),
        (try_begin),
            (troop_slot_eq, ":var_0", slot_lord_reputation_type, 1),
            (str_store_string, s46, "str_dplmc_reputation_cheat_mode_only_martial"),
        (else_try),
            (troop_slot_eq, ":var_0", slot_lord_reputation_type, 5),
            (str_store_string, s46, "str_dplmc_reputation_cheat_mode_only_debauched"),
        (else_try),
            (troop_slot_eq, ":var_0", slot_lord_reputation_type, 3),
            (str_store_string, s46, "str_dplmc_reputation_cheat_mode_only_pitiless"),
        (else_try),
            (troop_slot_eq, ":var_0", slot_lord_reputation_type, 4),
            (str_store_string, s46, "str_dplmc_reputation_cheat_mode_only_calculating"),
        (else_try),
            (troop_slot_eq, ":var_0", slot_lord_reputation_type, 2),
            (str_store_string, s46, "str_dplmc_reputation_cheat_mode_only_quarrelsome"),
        (else_try),
            (troop_slot_eq, ":var_0", slot_lord_reputation_type, 6),
            (str_store_string, s46, "str_dplmc_reputation_cheat_mode_only_goodnatured"),
        (else_try),
            (troop_slot_eq, ":var_0", slot_lord_reputation_type, 7),
            (str_store_string, s46, "str_dplmc_reputation_cheat_mode_only_upstanding"),
        (else_try),
            (troop_slot_eq, ":var_0", slot_lord_reputation_type, 21),
            (str_store_string, s46, "str_dplmc_reputation_cheat_mode_only_conventional"),
        (else_try),
            (troop_slot_eq, ":var_0", slot_lord_reputation_type, 22),
            (str_store_string, s46, "str_dplmc_reputation_cheat_mode_only_adventurous"),
        (else_try),
            (troop_slot_eq, ":var_0", slot_lord_reputation_type, 23),
            (str_store_string, s46, "str_dplmc_reputation_cheat_mode_only_romantic"),
        (else_try),
            (troop_slot_eq, ":var_0", slot_lord_reputation_type, 25),
            (str_store_string, s46, "str_dplmc_reputation_cheat_mode_only_moralist"),
        (else_try),
            (troop_slot_eq, ":var_0", slot_lord_reputation_type, 24),
            (str_store_string, s46, "str_dplmc_reputation_cheat_mode_only_ambitious"),
        (else_try),
            (troop_get_slot, reg11, ":var_0", slot_lord_reputation_type),
            (str_store_string, s46, "str_dplmc_reputation_cheat_mode_only_reg11"),
        (try_end),
        (try_for_range, ":var_5", 35, 38),
            (troop_get_slot, ":var_6", ":var_0", ":var_5"),
            (is_between, ":var_6", "trp_knight_1_1_wife", "trp_heroes_end"),
            (str_store_troop_name, s39, ":var_6"),
            (call_script, "script_troop_get_relation_with_troop", ":var_0", ":var_6"),
            (str_store_string, s45, "str_dplmc_s40_love_interest_s39"),
            (try_begin),
                (troop_slot_eq, ":var_0", slot_troop_betrothed, ":var_6"),
                (str_store_string, s45, "str_dplmc_s40_betrothed_s39"),
            (try_end),
        (try_end),
        (str_clear, s44),
        (try_begin),
            (neg|eq, ":var_0", ":var_2"),
            (call_script, "script_troop_get_relation_with_troop", ":var_0", ":var_2"),
            (assign, ":var_7", reg0),
            (store_add, ":var_8", ":var_7", 100),
            (val_add, ":var_8", 5),
            (store_div, ":var_9", ":var_8", 10),
            (val_clamp, ":var_9", 0, 20),
            (store_add, ":var_10", "str_dplmc_relation_mnus_100_ns", ":var_9"),
            (try_begin),
                (eq, ":var_2", "trp_player"),
                (str_store_string, s59, "@you"),
            (else_try),
                (str_store_troop_name, s59, ":var_2"),
            (try_end),
            (str_store_string, s59, ":var_10"),
            (str_store_string, s44, "@{!}^{s59}"),
        (try_end),
        (str_clear, s48),
        (try_begin),
            (eq, "$cheat_mode", 1),
            (store_current_hours, ":var_11"),
            (gt, ":var_11", 0),
            (call_script, "script_calculate_troop_political_factors_for_liege", ":var_0", ":var_2"),
            (str_store_string, s48, "str_sense_of_security_military_reg1_court_position_reg3_"),
        (try_end),
        (str_store_string, s47, "str_s46s45s44s48"),
    (try_end),

]),

("troop_can_use_item",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (item_get_type, ":var_3", ":var_1"),
    (try_begin),
        (eq, ":var_3", 20),
        (item_get_slot, ":var_4", ":var_1", slot_item_intelligence_requirement),
    (else_try),
        (item_get_slot, ":var_4", ":var_1", 1500),
    (try_end),
    (try_begin),
        (eq, ":var_4", 0),
    (else_try),
        (eq, ":var_2", 32),
        (val_add, ":var_4", 1),
    (else_try),
        (eq, ":var_2", 33),
        (val_sub, ":var_4", 1),
    (else_try),
        (eq, ":var_2", 18),
        (neg|eq, ":var_3", 1),
        (val_add, ":var_4", 1),
    (else_try),
        (eq, ":var_2", 19),
        (val_add, ":var_4", 2),
    (else_try),
        (eq, ":var_2", 17),
        (val_add, ":var_4", 4),
    (try_end),
    (try_begin),
        (eq, ":var_3", 1),
        (store_skill_level, ":var_5", skl_riding, ":var_0"),
    (else_try),
        (this_or_next|eq, ":var_3", 9),
        (this_or_next|eq, ":var_3", 2),
        (this_or_next|eq, ":var_3", 3),
        (this_or_next|eq, ":var_3", 4),
        (this_or_next|eq, ":var_3", 12),
        (this_or_next|eq, ":var_3", 13),
        (this_or_next|eq, ":var_3", 14),
        (eq, ":var_3", 15),
        (store_attribute_level, ":var_5", ":var_0", ca_strength),
    (else_try),
        (eq, ":var_3", 7),
        (store_skill_level, ":var_5", skl_shield, ":var_0"),
    (else_try),
        (eq, ":var_3", 8),
        (store_skill_level, ":var_5", skl_power_draw, ":var_0"),
    (else_try),
        (eq, ":var_3", 10),
        (store_skill_level, ":var_5", skl_power_throw, ":var_0"),
    (else_try),
        (eq, ":var_3", 20),
        (store_attribute_level, ":var_5", ":var_0", ca_intelligence),
    (try_end),
    (try_begin),
        (this_or_next|neg|ge, ":var_5", ":var_4"),
        (this_or_next|is_between, ":var_1", "itm_book_wound_treatment_reference", "itm_spice"),
        (eq, ":var_2", 30),
        (assign, reg0, 0),
    (else_try),
        (troop_slot_eq, ":var_0", 2501, 1),
        (item_slot_eq, ":var_1", 1505, 1),
        (assign, reg0, 0),
    (else_try),
        (assign, reg0, 1),
    (try_end),

]),

("get_item_value_with_imod",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_item_value, ":var_2", ":var_0"),
    (item_get_slot, ":var_3", ":var_1", 1507),
    (val_mul, ":var_2", ":var_3"),
    (assign, reg0, ":var_2"),

]),

("get_item_score_with_imod",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (item_get_type, ":var_2", ":var_0"),
    (try_begin),
        (eq, ":var_2", 20),
        (item_get_slot, ":var_3", ":var_0", slot_item_intelligence_requirement),
    (else_try),
        (eq, ":var_2", 1),
        (item_get_slot, ":var_4", ":var_0", 41),
        (item_get_slot, ":var_5", ":var_0", 44),
        (item_get_slot, ":var_6", ":var_0", 45),
        (try_begin),
            (eq, ":var_1", 31),
            (val_add, ":var_4", -2),
        (else_try),
            (eq, ":var_1", 30),
            (val_add, ":var_4", -5),
        (else_try),
            (eq, ":var_1", 18),
            (val_add, ":var_5", 3),
            (val_add, ":var_6", 4),
        (else_try),
            (eq, ":var_1", 35),
            (val_add, ":var_4", 1),
            (val_add, ":var_5", 1),
            (val_add, ":var_6", 1),
        (else_try),
            (eq, ":var_1", 36),
            (val_add, ":var_4", 2),
            (val_add, ":var_5", 2),
            (val_add, ":var_6", 2),
        (try_end),
        (store_mul, ":var_3", ":var_4", ":var_5"),
        (val_mul, ":var_3", ":var_6"),
    (else_try),
        (eq, ":var_2", 7),
        (item_get_slot, ":var_7", ":var_0", 42),
        (item_get_slot, ":var_8", ":var_0", 44),
        (item_get_slot, ":var_9", ":var_0", 43),
        (try_begin),
            (eq, ":var_1", 1),
            (val_add, ":var_8", -4),
        (else_try),
            (eq, ":var_1", 5),
            (val_add, ":var_8", -2),
        (else_try),
            (eq, ":var_1", 25),
            (val_add, ":var_8", 2),
        (else_try),
            (eq, ":var_1", 27),
            (val_add, ":var_8", 4),
        (try_end),
        (val_add, ":var_8", 5),
        (store_mul, ":var_3", ":var_8", ":var_7"),
        (val_mul, ":var_3", ":var_9"),
    (else_try),
        (this_or_next|eq, ":var_2", 12),
        (this_or_next|eq, ":var_2", 13),
        (this_or_next|eq, ":var_2", 14),
        (eq, ":var_2", 15),
        (item_get_slot, ":var_10", ":var_0", 41),
        (item_get_slot, ":var_11", ":var_0", 44),
        (item_get_slot, ":var_12", ":var_0", 45),
        (store_add, ":var_3", ":var_10", ":var_11"),
        (val_add, ":var_3", ":var_12"),
        (assign, ":var_13", 0),
        (try_begin),
            (gt, ":var_10", 0),
            (val_add, ":var_13", 1),
        (try_end),
        (try_begin),
            (gt, ":var_11", 0),
            (val_add, ":var_13", 1),
        (try_end),
        (try_begin),
            (gt, ":var_12", 0),
            (val_add, ":var_13", 1),
        (try_end),
        (try_begin),
            (eq, ":var_1", 0),
            (assign, ":var_14", 0),
        (else_try),
            (eq, ":var_1", 1),
            (assign, ":var_14", -4),
        (else_try),
            (eq, ":var_1", 2),
            (assign, ":var_14", -3),
        (else_try),
            (eq, ":var_1", 5),
            (assign, ":var_14", -2),
        (else_try),
            (eq, ":var_1", 7),
            (assign, ":var_14", -1),
        (else_try),
            (eq, ":var_1", 21),
            (assign, ":var_14", -3),
        (else_try),
            (eq, ":var_1", 22),
            (assign, ":var_14", -2),
        (else_try),
            (eq, ":var_1", 24),
            (assign, ":var_14", 1),
        (else_try),
            (eq, ":var_1", 25),
            (assign, ":var_14", 2),
        (else_try),
            (eq, ":var_1", 26),
            (assign, ":var_14", 3),
        (else_try),
            (eq, ":var_1", 27),
            (assign, ":var_14", 4),
        (else_try),
            (eq, ":var_1", 29),
            (assign, ":var_14", 6),
        (try_end),
        (val_mul, ":var_14", ":var_13"),
        (val_add, ":var_3", ":var_14"),
    (else_try),
        (this_or_next|eq, ":var_2", 2),
        (this_or_next|eq, ":var_2", 3),
        (this_or_next|eq, ":var_2", 8),
        (this_or_next|eq, ":var_2", 9),
        (this_or_next|eq, ":var_2", 16),
        (this_or_next|eq, ":var_2", 17),
        (eq, ":var_2", 4),
        (item_get_slot, ":var_15", ":var_0", 43),
        (item_get_slot, ":var_16", ":var_0", 42),
        (item_get_slot, ":var_17", ":var_0", 45),
        (item_get_slot, ":var_18", ":var_0", 44),
        (val_mod, ":var_17", 256),
        (val_mod, ":var_18", 256),
        (assign, ":var_19", ":var_17"),
        (val_max, ":var_19", ":var_18"),
        (try_begin),
            (eq, ":var_1", 1),
            (val_add, ":var_19", -5),
        (else_try),
            (eq, ":var_1", 2),
            (val_add, ":var_19", -3),
        (else_try),
            (eq, ":var_1", 3),
            (val_add, ":var_19", -3),
            (val_add, ":var_15", -3),
        (else_try),
            (eq, ":var_1", 4),
            (val_add, ":var_19", -1),
        (else_try),
            (eq, ":var_1", 13),
            (val_add, ":var_19", 3),
            (val_add, ":var_15", 3),
        (else_try),
            (eq, ":var_1", 14),
            (val_add, ":var_19", 4),
        (else_try),
            (eq, ":var_1", 17),
            (val_add, ":var_19", 5),
            (val_add, ":var_15", 1),
        (else_try),
            (eq, ":var_1", 18),
            (val_add, ":var_19", 2),
            (val_add, ":var_15", -2),
        (else_try),
            (eq, ":var_1", 19),
            (val_add, ":var_19", 3),
            (val_add, ":var_15", -3),
        (try_end),
        (try_begin),
            (this_or_next|eq, ":var_2", 8),
            (this_or_next|eq, ":var_2", 9),
            (this_or_next|eq, ":var_2", 16),
            (eq, ":var_2", 17),
            (store_mul, ":var_3", ":var_19", ":var_15"),
        (else_try),
            (this_or_next|eq, ":var_2", 2),
            (this_or_next|eq, ":var_2", 3),
            (eq, ":var_2", 4),
            (store_mul, ":var_3", ":var_19", ":var_15"),
            (val_mul, ":var_3", ":var_16"),
        (try_end),
    (else_try),
        (this_or_next|eq, ":var_2", 5),
        (this_or_next|eq, ":var_2", 6),
        (this_or_next|eq, ":var_2", 18),
        (eq, ":var_2", 10),
        (item_get_slot, ":var_18", ":var_0", 44),
        (val_mod, ":var_18", 256),
        (assign, ":var_3", ":var_18"),
        (val_add, ":var_3", 3),
        (try_begin),
            (eq, ":var_1", 0),
            (val_mul, ":var_3", 2),
        (else_try),
            (eq, ":var_1", 42),
            (val_mul, ":var_3", 2),
            (val_add, ":var_3", 1),
        (else_try),
            (eq, ":var_1", 3),
            (val_sub, ":var_3", 3),
            (val_mul, ":var_3", 2),
        (else_try),
            (eq, ":var_1", 18),
            (val_add, ":var_3", 2),
            (val_mul, ":var_3", 2),
        (else_try),
            (eq, ":var_1", 13),
            (val_add, ":var_3", 3),
            (val_mul, ":var_3", 2),
        (try_end),
    (try_end),
    (assign, reg0, ":var_3"),

]),

("print_wpn_upgrades_to_s0",
[
    (store_script_param_1, ":var_0"),
    (troop_get_slot, ":var_1", ":var_0", 2506),
    (store_mul, ":var_2", ":var_1", 5),
    (store_add, ":var_3", 2502, ":var_2"),
    (store_add, ":var_4", 2503, ":var_2"),
    (store_add, ":var_5", 2504, ":var_2"),
    (store_add, ":var_6", 2505, ":var_2"),
    (str_store_string, s0, "str_empty_string"),
    (troop_get_slot, ":var_7", ":var_0", ":var_3"),
    (troop_get_inventory_slot, ":var_8", ":var_0", 0),
    (try_begin),
        (ge, ":var_8", 0),
        (str_store_item_name, s10, ":var_8"),
    (else_try),
        (str_store_string, s10, "str_none"),
    (try_end),
    (val_add, ":var_7", "str_hero_wpn_slot_none"),
    (str_store_string, s1, ":var_7"),
    (str_store_string, s0, "@{s0}^{s1}"),
    (troop_get_slot, ":var_7", ":var_0", ":var_4"),
    (troop_get_inventory_slot, ":var_8", ":var_0", 1),
    (try_begin),
        (ge, ":var_8", 0),
        (str_store_item_name, s10, ":var_8"),
    (else_try),
        (str_store_string, s10, "str_none"),
    (try_end),
    (val_add, ":var_7", "str_hero_wpn_slot_none"),
    (str_store_string, s1, ":var_7"),
    (str_store_string, s0, "@{s0}^{s1}"),
    (troop_get_slot, ":var_7", ":var_0", ":var_5"),
    (troop_get_inventory_slot, ":var_8", ":var_0", 2),
    (try_begin),
        (ge, ":var_8", 0),
        (str_store_item_name, s10, ":var_8"),
    (else_try),
        (str_store_string, s10, "str_none"),
    (try_end),
    (val_add, ":var_7", "str_hero_wpn_slot_none"),
    (str_store_string, s1, ":var_7"),
    (str_store_string, s0, "@{s0}^{s1}"),
    (troop_get_slot, ":var_7", ":var_0", ":var_6"),
    (troop_get_inventory_slot, ":var_8", ":var_0", 3),
    (try_begin),
        (ge, ":var_8", 0),
        (str_store_item_name, s10, ":var_8"),
    (else_try),
        (str_store_string, s10, "str_none"),
    (try_end),
    (val_add, ":var_7", "str_hero_wpn_slot_none"),
    (str_store_string, s1, ":var_7"),
    (str_store_string, s0, "@{s0}^{s1}"),

]),

("copy_upgrade_to_all_heroes",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (try_begin),
        (eq, ":var_1", 1),
        (troop_get_slot, ":var_2", ":var_0", 2502),
        (troop_get_slot, ":var_3", ":var_0", 2503),
        (troop_get_slot, ":var_4", ":var_0", 2504),
        (troop_get_slot, ":var_5", ":var_0", 2505),
        (try_for_range, ":var_6", "trp_npc1", "trp_kingdom_1_lord"),
            (troop_set_slot, ":var_6", 2502, ":var_2"),
            (troop_set_slot, ":var_6", 2503, ":var_3"),
            (troop_set_slot, ":var_6", 2504, ":var_4"),
            (troop_set_slot, ":var_6", 2505, ":var_5"),
        (try_end),
    (else_try),
        (eq, ":var_1", 2),
        (troop_get_slot, ":var_2", ":var_0", 2507),
        (troop_get_slot, ":var_3", ":var_0", 2508),
        (troop_get_slot, ":var_4", ":var_0", 2509),
        (troop_get_slot, ":var_5", ":var_0", 2510),
        (try_for_range, ":var_6", "trp_npc1", "trp_kingdom_1_lord"),
            (troop_set_slot, ":var_6", 2507, ":var_2"),
            (troop_set_slot, ":var_6", 2508, ":var_3"),
            (troop_set_slot, ":var_6", 2509, ":var_4"),
            (troop_set_slot, ":var_6", 2510, ":var_5"),
        (try_end),
    (else_try),
        (eq, ":var_1", 3),
        (troop_get_slot, ":var_7", ":var_0", 2500),
        (try_for_range, ":var_6", "trp_npc1", "trp_kingdom_1_lord"),
            (troop_set_slot, ":var_6", 2500, ":var_7"),
        (try_end),
    (else_try),
        (eq, ":var_1", 4),
        (troop_get_slot, ":var_8", ":var_0", 2501),
        (try_for_range, ":var_6", "trp_npc1", "trp_kingdom_1_lord"),
            (troop_set_slot, ":var_6", 2501, ":var_8"),
        (try_end),
    (try_end),

]),

("auto_loot_all",
[
    (try_for_range, ":var_0", 0, 2),
        (party_get_num_companion_stacks, ":var_1", "p_main_party"),
        (try_for_range, ":var_2", 0, ":var_1"),
            (party_stack_get_troop_id, ":var_3", "p_main_party", ":var_2"),
            (is_between, ":var_3", "trp_npc1", "trp_kingdom_1_lord"),
            (call_script, "script_auto_loot_troop", ":var_3", "$pool_troop"),
        (try_end),
    (try_end),
    (troop_sort_inventory, "$pool_troop"),

]),

("auto_loot_troop",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (troop_get_slot, ":var_2", ":var_0", 2500),
    (troop_get_slot, ":var_3", ":var_0", 2501),
    (troop_get_slot, ":var_4", ":var_0", 2506),
    (store_mul, ":var_5", ":var_4", 5),
    (store_add, ":var_6", 2502, ":var_5"),
    (store_add, ":var_7", 2503, ":var_5"),
    (store_add, ":var_8", 2504, ":var_5"),
    (store_add, ":var_9", 2505, ":var_5"),
    (call_script, "script_transfer_inventory", ":var_0", ":var_1", 0),
    (try_begin),
        (store_free_inventory_capacity, ":var_10", ":var_1"),
        (gt, ":var_10", 0),
        (troop_slot_ge, ":var_0", ":var_6", 1),
        (troop_get_inventory_slot, ":var_11", ":var_0", 0),
        (ge, ":var_11", 0),
        (troop_get_inventory_slot_modifier, ":var_12", ":var_0", 0),
        (troop_set_inventory_slot, ":var_0", 0, -1),
        (troop_add_item, ":var_1", ":var_11", ":var_12"),
    (try_end),
    (try_begin),
        (store_free_inventory_capacity, ":var_10", ":var_1"),
        (gt, ":var_10", 0),
        (troop_slot_ge, ":var_0", ":var_7", 1),
        (troop_get_inventory_slot, ":var_11", ":var_0", 1),
        (ge, ":var_11", 0),
        (troop_get_inventory_slot_modifier, ":var_12", ":var_0", 1),
        (troop_set_inventory_slot, ":var_0", 1, -1),
        (troop_add_item, ":var_1", ":var_11", ":var_12"),
    (try_end),
    (try_begin),
        (store_free_inventory_capacity, ":var_10", ":var_1"),
        (gt, ":var_10", 0),
        (troop_slot_ge, ":var_0", ":var_8", 1),
        (troop_get_inventory_slot, ":var_11", ":var_0", 2),
        (ge, ":var_11", 0),
        (troop_get_inventory_slot_modifier, ":var_12", ":var_0", 2),
        (troop_set_inventory_slot, ":var_0", 2, -1),
        (troop_add_item, ":var_1", ":var_11", ":var_12"),
    (try_end),
    (try_begin),
        (store_free_inventory_capacity, ":var_10", ":var_1"),
        (gt, ":var_10", 0),
        (troop_slot_ge, ":var_0", ":var_9", 1),
        (troop_get_inventory_slot, ":var_11", ":var_0", 3),
        (ge, ":var_11", 0),
        (troop_get_inventory_slot_modifier, ":var_12", ":var_0", 3),
        (troop_set_inventory_slot, ":var_0", 3, -1),
        (troop_add_item, ":var_1", ":var_11", ":var_12"),
    (try_end),
    (try_for_range, ":var_13", 4, 9),
        (store_free_inventory_capacity, ":var_10", ":var_1"),
        (gt, ":var_10", 0),
        (troop_get_inventory_slot, ":var_11", ":var_0", ":var_13"),
        (ge, ":var_11", 0),
        (troop_get_inventory_slot_modifier, ":var_12", ":var_0", ":var_13"),
        (item_get_type, ":var_14", ":var_11"),
        (try_begin),
            (this_or_next|eq, ":var_14", 12),
            (this_or_next|eq, ":var_14", 13),
            (this_or_next|eq, ":var_14", 14),
            (eq, ":var_14", 15),
            (neg|eq, ":var_2", 0),
            (troop_set_inventory_slot, ":var_0", ":var_13", -1),
            (troop_add_item, ":var_1", ":var_11", ":var_12"),
        (else_try),
            (eq, ":var_14", 1),
            (neg|eq, ":var_3", 0),
            (troop_set_inventory_slot, ":var_0", ":var_13", -1),
            (troop_add_item, ":var_1", ":var_11", ":var_12"),
        (try_end),
    (try_end),
    (assign, ":var_15", -1),
    (assign, ":var_16", 0),
    (assign, ":var_17", -1),
    (assign, ":var_18", 0),
    (assign, ":var_19", -1),
    (assign, ":var_20", 0),
    (assign, ":var_21", -1),
    (assign, ":var_22", 0),
    (assign, ":var_23", -1),
    (assign, ":var_24", 0),
    (troop_get_inventory_capacity, ":var_25", ":var_1"),
    (try_for_range, ":var_13", 0, ":var_25"),
        (troop_get_inventory_slot, ":var_11", ":var_1", ":var_13"),
        (ge, ":var_11", 0),
        (troop_get_inventory_slot_modifier, ":var_12", ":var_1", ":var_13"),
        (call_script, "script_troop_can_use_item", ":var_0", ":var_11", ":var_12"),
        (eq, reg0, 1),
        (call_script, "script_get_item_score_with_imod", ":var_11", ":var_12"),
        (assign, ":var_26", reg0),
        (item_get_type, ":var_27", ":var_11"),
        (try_begin),
            (eq, ":var_27", 1),
            (eq, ":var_3", 1),
            (gt, ":var_26", ":var_24"),
            (assign, ":var_23", ":var_13"),
            (assign, ":var_24", ":var_26"),
        (else_try),
            (try_begin),
                (eq, ":var_27", 12),
                (eq, ":var_2", 1),
                (gt, ":var_26", ":var_16"),
                (assign, ":var_15", ":var_13"),
                (assign, ":var_16", ":var_26"),
            (else_try),
                (eq, ":var_27", 13),
                (eq, ":var_2", 1),
                (gt, ":var_26", ":var_18"),
                (assign, ":var_17", ":var_13"),
                (assign, ":var_18", ":var_26"),
            (else_try),
                (eq, ":var_27", 14),
                (eq, ":var_2", 1),
                (gt, ":var_26", ":var_20"),
                (assign, ":var_19", ":var_13"),
                (assign, ":var_20", ":var_26"),
            (else_try),
                (eq, ":var_27", 15),
                (eq, ":var_2", 1),
                (gt, ":var_26", ":var_22"),
                (assign, ":var_21", ":var_13"),
                (assign, ":var_22", ":var_26"),
            (try_end),
        (try_end),
    (try_end),
    (try_begin),
        (assign, ":var_28", ":var_15"),
        (ge, ":var_28", 0),
        (troop_get_inventory_slot, ":var_11", ":var_1", ":var_28"),
        (ge, ":var_11", 0),
        (troop_get_inventory_slot, ":var_29", ":var_0", 4),
        (eq, ":var_29", -1),
        (troop_get_inventory_slot_modifier, ":var_12", ":var_1", ":var_28"),
        (troop_set_inventory_slot, ":var_0", 4, ":var_11"),
        (troop_set_inventory_slot_modifier, ":var_0", 4, ":var_12"),
        (troop_set_inventory_slot, ":var_1", ":var_28", -1),
    (try_end),
    (try_begin),
        (assign, ":var_28", ":var_17"),
        (ge, ":var_28", 0),
        (troop_get_inventory_slot, ":var_11", ":var_1", ":var_28"),
        (ge, ":var_11", 0),
        (troop_get_inventory_slot, ":var_30", ":var_0", 5),
        (eq, ":var_30", -1),
        (troop_get_inventory_slot_modifier, ":var_12", ":var_1", ":var_28"),
        (troop_set_inventory_slot, ":var_0", 5, ":var_11"),
        (troop_set_inventory_slot_modifier, ":var_0", 5, ":var_12"),
        (troop_set_inventory_slot, ":var_1", ":var_28", -1),
    (try_end),
    (try_begin),
        (assign, ":var_28", ":var_19"),
        (ge, ":var_28", 0),
        (troop_get_inventory_slot, ":var_11", ":var_1", ":var_28"),
        (ge, ":var_11", 0),
        (troop_get_inventory_slot, ":var_31", ":var_0", 6),
        (eq, ":var_31", -1),
        (troop_get_inventory_slot_modifier, ":var_12", ":var_1", ":var_28"),
        (troop_set_inventory_slot, ":var_0", 6, ":var_11"),
        (troop_set_inventory_slot_modifier, ":var_0", 6, ":var_12"),
        (troop_set_inventory_slot, ":var_1", ":var_28", -1),
    (try_end),
    (try_begin),
        (assign, ":var_28", ":var_21"),
        (ge, ":var_28", 0),
        (troop_get_inventory_slot, ":var_11", ":var_1", ":var_28"),
        (ge, ":var_11", 0),
        (troop_get_inventory_slot, ":var_32", ":var_0", 7),
        (eq, ":var_32", -1),
        (troop_get_inventory_slot_modifier, ":var_12", ":var_1", ":var_28"),
        (troop_set_inventory_slot, ":var_0", 7, ":var_11"),
        (troop_set_inventory_slot_modifier, ":var_0", 7, ":var_12"),
        (troop_set_inventory_slot, ":var_1", ":var_28", -1),
    (try_end),
    (try_begin),
        (assign, ":var_28", ":var_23"),
        (ge, ":var_28", 0),
        (troop_get_inventory_slot, ":var_11", ":var_1", ":var_28"),
        (ge, ":var_11", 0),
        (troop_get_inventory_slot, ":var_33", ":var_0", 8),
        (eq, ":var_33", -1),
        (troop_get_inventory_slot_modifier, ":var_12", ":var_1", ":var_28"),
        (troop_set_inventory_slot, ":var_0", 8, ":var_11"),
        (troop_set_inventory_slot_modifier, ":var_0", 8, ":var_12"),
        (troop_set_inventory_slot, ":var_1", ":var_28", -1),
    (try_end),
    (try_for_range, ":var_13", 0, 4),
        (store_add, ":var_34", ":var_13", ":var_6"),
        (troop_get_slot, ":var_35", ":var_0", ":var_34"),
        (gt, ":var_35", 0),
        (call_script, "script_scan_for_best_item_of_type", ":var_1", ":var_35", ":var_0"),
        (assign, ":var_28", reg0),
        (neg|eq, ":var_28", -1),
        (troop_get_inventory_slot, ":var_11", ":var_1", ":var_28"),
        (ge, ":var_11", 0),
        (troop_get_inventory_slot, ":var_36", ":var_0", ":var_13"),
        (eq, ":var_36", -1),
        (troop_get_inventory_slot_modifier, ":var_12", ":var_1", ":var_28"),
        (troop_set_inventory_slot, ":var_1", ":var_28", -1),
        (troop_set_inventory_slot, ":var_0", ":var_13", ":var_11"),
        (troop_set_inventory_slot_modifier, ":var_0", ":var_13", ":var_12"),
    (try_end),

]),

("scan_for_best_item_of_type",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (assign, ":var_3", -1),
    (assign, ":var_4", -1),
    (troop_get_inventory_capacity, ":var_5", ":var_0"),
    (try_for_range, ":var_6", 0, ":var_5"),
        (troop_get_inventory_slot, ":var_7", ":var_0", ":var_6"),
        (ge, ":var_7", 0),
        (troop_get_inventory_slot_modifier, ":var_8", ":var_0", ":var_6"),
        (try_begin),
            (item_slot_eq, ":var_7", 1510, 1),
            (assign, ":var_9", 2),
        (else_try),
            (item_get_type, ":var_9", ":var_7"),
        (try_end),
        (eq, ":var_9", ":var_1"),
        (call_script, "script_troop_can_use_item", ":var_2", ":var_7", ":var_8"),
        (eq, reg0, 1),
        (call_script, "script_get_item_score_with_imod", ":var_7", ":var_8"),
        (gt, reg0, ":var_4"),
        (assign, ":var_3", ":var_6"),
        (assign, ":var_4", reg0),
    (try_end),
    (assign, reg0, ":var_3"),

]),

("exchange_equipments_between_two_sets",
[
    (store_script_param, ":var_0", 1),
    (try_for_range, ":var_1", 0, 4),
        (store_sub, ":var_2", ":var_0", "trp_npc1"),
        (val_mul, ":var_2", 4),
        (val_add, ":var_2", 10),
        (val_add, ":var_2", ":var_1"),
        (str_store_troop_name, s20, ":var_0"),
        (assign, reg20, ":var_2"),
        (display_message, "@{s20} --- dest slot {reg20}"),
        (troop_get_inventory_slot, ":var_3", "trp_merchants_end", ":var_2"),
        (troop_get_inventory_slot_modifier, ":var_4", "trp_merchants_end", ":var_2"),
        (troop_get_inventory_slot, ":var_5", ":var_0", ":var_1"),
        (troop_get_inventory_slot_modifier, ":var_6", ":var_0", ":var_1"),
        (troop_set_inventory_slot, "trp_merchants_end", ":var_2", ":var_5"),
        (troop_set_inventory_slot_modifier, "trp_merchants_end", ":var_2", ":var_6"),
        (troop_set_inventory_slot, ":var_0", ":var_1", ":var_3"),
        (troop_set_inventory_slot_modifier, ":var_0", ":var_1", ":var_4"),
    (try_end),

]),

("transfer_inventory",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (store_free_inventory_capacity, ":var_3", ":var_1"),
    (troop_sort_inventory, ":var_0"),
    (troop_get_inventory_capacity, ":var_4", ":var_0"),
    (try_for_range, ":var_5", 10, ":var_4"),
        (troop_get_inventory_slot, ":var_6", ":var_0", ":var_5"),
        (troop_get_inventory_slot_modifier, ":var_7", ":var_0", ":var_5"),
        (gt, ":var_6", -1),
        (assign, ":var_8", 1),
        (try_begin),
            (eq, ":var_2", 0),
            (is_between, ":var_6", "itm_book_wound_treatment_reference", "itm_spice"),
            (assign, ":var_8", 0),
        (try_end),
        (eq, ":var_8", 1),
        (gt, ":var_3", 0),
        (troop_add_item, ":var_1", ":var_6", ":var_7"),
        (val_sub, ":var_3", 1),
        (try_begin),
            (is_between, ":var_6", "itm_spice", "itm_siege_supply"),
            (troop_inventory_slot_get_item_amount, ":var_9", ":var_0", ":var_5"),
            (troop_get_inventory_capacity, ":var_10", ":var_1"),
            (store_sub, ":var_11", ":var_10", ":var_3"),
            (troop_inventory_slot_set_item_amount, ":var_1", ":var_11", ":var_9"),
        (try_end),
        (troop_set_inventory_slot, ":var_0", ":var_5", -1),
    (try_end),

]),

("transfer_special_inventory",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_free_inventory_capacity, ":var_2", ":var_1"),
    (troop_sort_inventory, ":var_0"),
    (troop_get_inventory_capacity, ":var_3", ":var_0"),
    (try_for_range, ":var_4", 10, ":var_3"),
        (troop_get_inventory_slot, ":var_5", ":var_0", ":var_4"),
        (troop_get_inventory_slot_modifier, ":var_6", ":var_0", ":var_4"),
        (gt, ":var_5", -1),
        (assign, ":var_7", 0),
        (try_begin),
            (call_script, "script_get_item_value_with_imod", ":var_5", ":var_6"),
            (assign, ":var_8", reg0),
            (val_div, ":var_8", 100),
            (ge, ":var_8", "$g_price_threshold_for_picking"),
            (assign, ":var_7", 1),
        (else_try),
            (item_get_type, ":var_9", ":var_5"),
            (this_or_next|eq, ":var_9", 11),
            (this_or_next|eq, ":var_9", 19),
            (eq, ":var_9", 20),
            (assign, ":var_7", 1),
        (try_end),
        (eq, ":var_7", 1),
        (gt, ":var_2", 0),
        (troop_add_item, ":var_1", ":var_5", ":var_6"),
        (val_sub, ":var_2", 1),
        (try_begin),
            (is_between, ":var_5", "itm_spice", "itm_siege_supply"),
            (troop_inventory_slot_get_item_amount, ":var_10", ":var_0", ":var_4"),
            (troop_get_inventory_capacity, ":var_11", ":var_1"),
            (store_sub, ":var_12", ":var_11", ":var_2"),
            (troop_inventory_slot_set_item_amount, ":var_1", ":var_12", ":var_10"),
        (try_end),
        (troop_set_inventory_slot, ":var_0", ":var_4", -1),
    (try_end),

]),

("init_item_score",
[
    (item_set_slot, 0, 1501, 150),
    (item_set_slot, 0, 1500, 0),
    (item_set_slot, 0, 1508, 0),
    (item_set_slot, 0, 44, 522),
    (item_set_slot, 0, 45, 528),
    (item_set_slot, 0, 43, 103),
    (item_set_slot, 0, 42, 90),
    (item_set_slot, 1, 1501, 450),
    (item_set_slot, 1, 1500, 0),
    (item_set_slot, 1, 1508, 13),
    (item_set_slot, 1, 44, 275),
    (item_set_slot, 1, 45, 0),
    (item_set_slot, 1, 43, 80),
    (item_set_slot, 1, 42, 158),
    (item_set_slot, 2, 1501, 250),
    (item_set_slot, 2, 1500, 0),
    (item_set_slot, 2, 1508, 0),
    (item_set_slot, 2, 44, 256),
    (item_set_slot, 2, 45, 523),
    (item_set_slot, 2, 43, 95),
    (item_set_slot, 2, 42, 95),
    (item_set_slot, 3, 1501, 500),
    (item_set_slot, 3, 1500, 0),
    (item_set_slot, 3, 1508, 18),
    (item_set_slot, 3, 44, 256),
    (item_set_slot, 3, 45, 27),
    (item_set_slot, 3, 43, 88),
    (item_set_slot, 3, 42, 108),
    (item_set_slot, 4, 1501, 300),
    (item_set_slot, 4, 1500, 0),
    (item_set_slot, 4, 1508, 42),
    (item_set_slot, 4, 44, 256),
    (item_set_slot, 4, 45, 0),
    (item_set_slot, 4, 43, 0),
    (item_set_slot, 4, 42, 95),
    (item_set_slot, 5, 1501, 225),
    (item_set_slot, 5, 1500, 0),
    (item_set_slot, 5, 1508, 42),
    (item_set_slot, 5, 44, 256),
    (item_set_slot, 5, 45, 0),
    (item_set_slot, 5, 43, 0),
    (item_set_slot, 5, 42, 55),
    (item_set_slot, 6, 1501, 100),
    (item_set_slot, 6, 1500, 0),
    (item_set_slot, 6, 1508, 17),
    (item_set_slot, 6, 44, 268),
    (item_set_slot, 6, 45, 0),
    (item_set_slot, 6, 43, 98),
    (item_set_slot, 6, 42, 0),
    (item_set_slot, 7, 1501, 300),
    (item_set_slot, 7, 1500, 0),
    (item_set_slot, 7, 1508, 17),
    (item_set_slot, 7, 44, 288),
    (item_set_slot, 7, 45, 0),
    (item_set_slot, 7, 43, 42),
    (item_set_slot, 7, 42, 0),
    (item_set_slot, 8, 1501, 350),
    (item_set_slot, 8, 1500, 0),
    (item_set_slot, 8, 1508, 42),
    (item_set_slot, 8, 44, 16),
    (item_set_slot, 8, 45, 0),
    (item_set_slot, 8, 43, 102),
    (item_set_slot, 8, 42, 0),
    (item_set_slot, 9, 1501, 0),
    (item_set_slot, 9, 1500, 0),
    (item_set_slot, 9, 1508, 35),
    (item_set_slot, 9, 41, 40),
    (item_set_slot, 9, 44, 3),
    (item_set_slot, 9, 45, 8),
    (item_set_slot, 10, 1501, 250),
    (item_set_slot, 10, 1500, 0),
    (item_set_slot, 10, 1508, 27),
    (item_set_slot, 10, 42, 150),
    (item_set_slot, 10, 44, 1),
    (item_set_slot, 10, 43, 82),
    (item_set_slot, 11, 1501, 350),
    (item_set_slot, 11, 1500, 0),
    (item_set_slot, 11, 1508, 0),
    (item_set_slot, 11, 44, 512),
    (item_set_slot, 11, 45, 512),
    (item_set_slot, 11, 43, 120),
    (item_set_slot, 11, 42, 115),
    (item_set_slot, 12, 1501, 350),
    (item_set_slot, 12, 1500, 0),
    (item_set_slot, 12, 1508, 0),
    (item_set_slot, 12, 44, 528),
    (item_set_slot, 12, 45, 528),
    (item_set_slot, 12, 43, 120),
    (item_set_slot, 12, 42, 115),
    (item_set_slot, 13, 1501, 150),
    (item_set_slot, 13, 1500, 0),
    (item_set_slot, 13, 1508, 14),
    (item_set_slot, 13, 44, 271),
    (item_set_slot, 13, 45, 18),
    (item_set_slot, 13, 43, 100),
    (item_set_slot, 13, 42, 102),
    (item_set_slot, 14, 1501, 400),
    (item_set_slot, 14, 1500, 0),
    (item_set_slot, 14, 1508, 18),
    (item_set_slot, 14, 44, 256),
    (item_set_slot, 14, 45, 19),
    (item_set_slot, 14, 43, 91),
    (item_set_slot, 14, 42, 108),
    (item_set_slot, 15, 1501, 150),
    (item_set_slot, 15, 1500, 0),
    (item_set_slot, 15, 1508, 0),
    (item_set_slot, 15, 44, 522),
    (item_set_slot, 15, 45, 528),
    (item_set_slot, 15, 43, 103),
    (item_set_slot, 15, 42, 40),
    (item_set_slot, 16, 1501, 4000),
    (item_set_slot, 16, 1500, 0),
    (item_set_slot, 16, 1508, 0),
    (item_set_slot, 17, 1501, 150),
    (item_set_slot, 17, 1500, 0),
    (item_set_slot, 17, 1508, 0),
    (item_set_slot, 17, 44, 532),
    (item_set_slot, 17, 45, 534),
    (item_set_slot, 17, 43, 103),
    (item_set_slot, 17, 42, 90),
    (item_set_slot, 18, 1501, 625),
    (item_set_slot, 18, 1500, 0),
    (item_set_slot, 18, 1508, 0),
    (item_set_slot, 18, 44, 536),
    (item_set_slot, 18, 45, 542),
    (item_set_slot, 18, 43, 94),
    (item_set_slot, 18, 42, 128),
    (item_set_slot, 19, 1501, 50),
    (item_set_slot, 19, 1500, 0),
    (item_set_slot, 19, 1508, 0),
    (item_set_slot, 19, 44, 526),
    (item_set_slot, 19, 45, 528),
    (item_set_slot, 19, 43, 110),
    (item_set_slot, 19, 42, 47),
    (item_set_slot, 20, 1501, 200),
    (item_set_slot, 20, 1500, 0),
    (item_set_slot, 20, 1508, 18),
    (item_set_slot, 20, 44, 256),
    (item_set_slot, 20, 45, 536),
    (item_set_slot, 20, 43, 95),
    (item_set_slot, 20, 42, 75),
    (item_set_slot, 21, 1501, 150),
    (item_set_slot, 21, 1500, 0),
    (item_set_slot, 21, 1508, 18),
    (item_set_slot, 21, 44, 256),
    (item_set_slot, 21, 45, 536),
    (item_set_slot, 21, 43, 100),
    (item_set_slot, 21, 42, 69),
    (item_set_slot, 22, 1501, 150),
    (item_set_slot, 22, 1500, 0),
    (item_set_slot, 22, 1508, 17),
    (item_set_slot, 22, 44, 532),
    (item_set_slot, 22, 45, 534),
    (item_set_slot, 22, 43, 99),
    (item_set_slot, 22, 42, 95),
    (item_set_slot, 23, 1501, 275),
    (item_set_slot, 23, 1500, 0),
    (item_set_slot, 23, 1508, 17),
    (item_set_slot, 23, 44, 536),
    (item_set_slot, 23, 45, 542),
    (item_set_slot, 23, 43, 93),
    (item_set_slot, 23, 42, 110),
    (item_set_slot, 24, 1501, 250),
    (item_set_slot, 24, 1500, 0),
    (item_set_slot, 24, 1508, 13),
    (item_set_slot, 24, 44, 537),
    (item_set_slot, 24, 45, 532),
    (item_set_slot, 24, 43, 96),
    (item_set_slot, 24, 42, 150),
    (item_set_slot, 25, 1501, 250),
    (item_set_slot, 25, 1500, 0),
    (item_set_slot, 25, 1508, 0),
    (item_set_slot, 25, 44, 530),
    (item_set_slot, 25, 45, 530),
    (item_set_slot, 25, 43, 103),
    (item_set_slot, 25, 42, 118),
    (item_set_slot, 26, 1501, 425),
    (item_set_slot, 26, 1500, 0),
    (item_set_slot, 26, 1508, 0),
    (item_set_slot, 26, 44, 527),
    (item_set_slot, 26, 45, 512),
    (item_set_slot, 26, 43, 58),
    (item_set_slot, 26, 42, 240),
    (item_set_slot, 27, 1501, 350),
    (item_set_slot, 27, 1500, 0),
    (item_set_slot, 27, 1508, 0),
    (item_set_slot, 27, 42, 50),
    (item_set_slot, 27, 44, 1),
    (item_set_slot, 27, 43, 100),
    (item_set_slot, 28, 1501, 150),
    (item_set_slot, 28, 1500, 0),
    (item_set_slot, 28, 1508, 17),
    (item_set_slot, 28, 44, 533),
    (item_set_slot, 28, 45, 0),
    (item_set_slot, 28, 43, 90),
    (item_set_slot, 28, 42, 0),
    (item_set_slot, 29, 1501, 300),
    (item_set_slot, 29, 1500, 0),
    (item_set_slot, 29, 1508, 17),
    (item_set_slot, 29, 44, 544),
    (item_set_slot, 29, 45, 0),
    (item_set_slot, 29, 43, 42),
    (item_set_slot, 29, 42, 0),
    (item_set_slot, 30, 1501, 500),
    (item_set_slot, 30, 1500, 0),
    (item_set_slot, 30, 1508, 42),
    (item_set_slot, 30, 44, 539),
    (item_set_slot, 30, 45, 0),
    (item_set_slot, 30, 43, 91),
    (item_set_slot, 30, 42, 75),
    (item_set_slot, 31, 1501, 100),
    (item_set_slot, 31, 1500, 0),
    (item_set_slot, 31, 1508, 13),
    (item_set_slot, 31, 44, 526),
    (item_set_slot, 31, 45, 524),
    (item_set_slot, 31, 43, 91),
    (item_set_slot, 31, 42, 75),
    (item_set_slot, 32, 1501, 350),
    (item_set_slot, 32, 1500, 0),
    (item_set_slot, 32, 1508, 42),
    (item_set_slot, 32, 44, 528),
    (item_set_slot, 32, 45, 0),
    (item_set_slot, 32, 43, 102),
    (item_set_slot, 32, 42, 0),
    (item_set_slot, 33, 1501, 350),
    (item_set_slot, 33, 1500, 0),
    (item_set_slot, 33, 1508, 42),
    (item_set_slot, 33, 44, 528),
    (item_set_slot, 33, 45, 0),
    (item_set_slot, 33, 43, 102),
    (item_set_slot, 33, 42, 0),
    (item_set_slot, 34, 1501, 0),
    (item_set_slot, 34, 1500, 0),
    (item_set_slot, 34, 1508, 0),
    (item_set_slot, 34, 41, 40),
    (item_set_slot, 34, 44, 10),
    (item_set_slot, 34, 45, 14),
    (item_set_slot, 35, 1501, 150),
    (item_set_slot, 35, 1500, 0),
    (item_set_slot, 35, 1508, 42),
    (item_set_slot, 35, 44, 0),
    (item_set_slot, 35, 45, 0),
    (item_set_slot, 35, 43, 0),
    (item_set_slot, 35, 42, 95),
    (item_set_slot, 36, 1501, 225),
    (item_set_slot, 36, 1500, 0),
    (item_set_slot, 36, 1508, 42),
    (item_set_slot, 36, 44, 0),
    (item_set_slot, 36, 45, 0),
    (item_set_slot, 36, 43, 0),
    (item_set_slot, 36, 42, 55),
    (item_set_slot, 37, 1501, 150),
    (item_set_slot, 37, 1500, 0),
    (item_set_slot, 37, 1508, 42),
    (item_set_slot, 37, 44, 0),
    (item_set_slot, 37, 45, 0),
    (item_set_slot, 37, 43, 0),
    (item_set_slot, 37, 42, 95),
    (item_set_slot, 38, 1501, 150),
    (item_set_slot, 38, 1500, 0),
    (item_set_slot, 38, 1508, 42),
    (item_set_slot, 38, 44, 0),
    (item_set_slot, 38, 45, 0),
    (item_set_slot, 38, 43, 0),
    (item_set_slot, 38, 42, 95),
    (item_set_slot, 39, 1501, 225),
    (item_set_slot, 39, 1500, 0),
    (item_set_slot, 39, 1508, 42),
    (item_set_slot, 39, 44, 0),
    (item_set_slot, 39, 45, 0),
    (item_set_slot, 39, 43, 0),
    (item_set_slot, 39, 42, 55),
    (item_set_slot, 40, 1501, 100),
    (item_set_slot, 40, 1500, 0),
    (item_set_slot, 40, 1502, 0),
    (item_set_slot, 40, 1508, 26),
    (item_set_slot, 40, 41, 0),
    (item_set_slot, 40, 44, 0),
    (item_set_slot, 40, 45, 10),
    (item_set_slot, 41, 1501, 200),
    (item_set_slot, 41, 1500, 0),
    (item_set_slot, 41, 1508, 0),
    (item_set_slot, 42, 1501, 200),
    (item_set_slot, 42, 1500, 0),
    (item_set_slot, 42, 1508, 0),
    (item_set_slot, 43, 1501, 200),
    (item_set_slot, 43, 1500, 0),
    (item_set_slot, 43, 1508, 0),
    (item_set_slot, 44, 1501, 200),
    (item_set_slot, 44, 1500, 0),
    (item_set_slot, 44, 1508, 0),
    (item_set_slot, 45, 1501, 200),
    (item_set_slot, 45, 1500, 0),
    (item_set_slot, 45, 1508, 0),
    (item_set_slot, 46, 1501, 200),
    (item_set_slot, 46, 1500, 0),
    (item_set_slot, 46, 1508, 0),
    (item_set_slot, 47, 1501, 200),
    (item_set_slot, 47, 1500, 0),
    (item_set_slot, 47, 1508, 0),
    (item_set_slot, 48, 1501, 200),
    (item_set_slot, 48, 1500, 0),
    (item_set_slot, 48, 1508, 0),
    (item_set_slot, 49, 1501, 200),
    (item_set_slot, 49, 1500, 0),
    (item_set_slot, 49, 1508, 0),
    (item_set_slot, 50, 1501, 200),
    (item_set_slot, 50, 1500, 0),
    (item_set_slot, 50, 1508, 0),
    (item_set_slot, 51, 1501, 4000),
    (item_set_slot, 51, 1500, 0),
    (item_set_slot, 51, 1508, 0),
    (item_set_slot, 52, 1501, 5000),
    (item_set_slot, 52, 1500, 0),
    (item_set_slot, 52, 1508, 0),
    (item_set_slot, 53, 1501, 5000),
    (item_set_slot, 53, 1500, 0),
    (item_set_slot, 53, 1508, 0),
    (item_set_slot, 54, 1501, 5000),
    (item_set_slot, 54, 1500, 0),
    (item_set_slot, 54, 1508, 0),
    (item_set_slot, 55, 1501, 4000),
    (item_set_slot, 55, 1500, 0),
    (item_set_slot, 55, 1508, 0),
    (item_set_slot, 56, 1501, 4000),
    (item_set_slot, 56, 1500, 0),
    (item_set_slot, 56, 1508, 0),
    (item_set_slot, 57, 1501, 4000),
    (item_set_slot, 57, 1500, 0),
    (item_set_slot, 57, 1508, 0),
    (item_set_slot, 58, 1501, 4000),
    (item_set_slot, 58, 1500, 0),
    (item_set_slot, 58, 1508, 0),
    (item_set_slot, 59, 1501, 3000),
    (item_set_slot, 59, 1500, 0),
    (item_set_slot, 59, 1508, 0),
    (item_set_slot, 60, 1501, 1000),
    (item_set_slot, 60, 1500, 0),
    (item_set_slot, 60, 1508, 0),
    (item_set_slot, 61, 1501, 4000),
    (item_set_slot, 61, 1500, 0),
    (item_set_slot, 61, 1508, 0),
    (item_set_slot, 62, 1501, 6000),
    (item_set_slot, 62, 1500, 0),
    (item_set_slot, 62, 1508, 0),
    (item_set_slot, 63, 1501, 5000),
    (item_set_slot, 63, 1500, 0),
    (item_set_slot, 63, 1508, 0),
    (item_set_slot, 64, 1501, 4000),
    (item_set_slot, 64, 1500, 0),
    (item_set_slot, 64, 1508, 0),
    (item_set_slot, 65, 1501, 4000),
    (item_set_slot, 65, 1500, 0),
    (item_set_slot, 65, 1508, 0),
    (item_set_slot, 66, 1501, 4000),
    (item_set_slot, 66, 1500, 0),
    (item_set_slot, 66, 1508, 0),
    (item_set_slot, 67, 1501, 4000),
    (item_set_slot, 67, 1500, 0),
    (item_set_slot, 67, 1508, 0),
    (item_set_slot, 68, 1501, 3000),
    (item_set_slot, 68, 1500, 0),
    (item_set_slot, 68, 1508, 0),
    (item_set_slot, 69, 1501, 3000),
    (item_set_slot, 69, 1500, 0),
    (item_set_slot, 69, 1508, 0),
    (item_set_slot, 70, 1501, 1500),
    (item_set_slot, 70, 1500, 0),
    (item_set_slot, 70, 1508, 0),
    (item_set_slot, 71, 1501, 600),
    (item_set_slot, 71, 1500, 0),
    (item_set_slot, 71, 1508, 0),
    (item_set_slot, 72, 1501, 500),
    (item_set_slot, 72, 1500, 0),
    (item_set_slot, 72, 1508, 0),
    (item_set_slot, 73, 1501, 1000),
    (item_set_slot, 73, 1500, 0),
    (item_set_slot, 73, 1508, 0),
    (item_set_slot, 74, 1501, 1500),
    (item_set_slot, 74, 1500, 0),
    (item_set_slot, 74, 1508, 0),
    (item_set_slot, 75, 1501, 1500),
    (item_set_slot, 75, 1500, 0),
    (item_set_slot, 75, 1508, 0),
    (item_set_slot, 76, 1501, 2000),
    (item_set_slot, 76, 1500, 0),
    (item_set_slot, 76, 1508, 0),
    (item_set_slot, 77, 1501, 4000),
    (item_set_slot, 77, 1500, 0),
    (item_set_slot, 77, 1508, 0),
    (item_set_slot, 78, 1501, 4000),
    (item_set_slot, 78, 1500, 0),
    (item_set_slot, 78, 1508, 0),
    (item_set_slot, 79, 1501, 3000),
    (item_set_slot, 79, 1500, 0),
    (item_set_slot, 79, 1508, 0),
    (item_set_slot, 80, 1501, 2000),
    (item_set_slot, 80, 1500, 0),
    (item_set_slot, 80, 1508, 0),
    (item_set_slot, 81, 1501, 3000),
    (item_set_slot, 81, 1500, 0),
    (item_set_slot, 81, 1508, 0),
    (item_set_slot, 82, 1501, 1000),
    (item_set_slot, 82, 1500, 0),
    (item_set_slot, 82, 1508, 0),
    (item_set_slot, 83, 1501, 1500),
    (item_set_slot, 83, 1500, 0),
    (item_set_slot, 83, 1508, 0),
    (item_set_slot, 84, 1501, 600),
    (item_set_slot, 84, 1500, 0),
    (item_set_slot, 84, 1508, 0),
    (item_set_slot, 85, 1501, 4000),
    (item_set_slot, 85, 1500, 0),
    (item_set_slot, 85, 1508, 0),
    (item_set_slot, 86, 1501, 4000),
    (item_set_slot, 86, 1500, 0),
    (item_set_slot, 86, 1508, 0),
    (item_set_slot, 87, 1501, 4000),
    (item_set_slot, 87, 1500, 0),
    (item_set_slot, 87, 1508, 0),
    (item_set_slot, 88, 1501, 0),
    (item_set_slot, 88, 1500, 1),
    (item_set_slot, 88, 1508, 35),
    (item_set_slot, 88, 41, 40),
    (item_set_slot, 88, 44, 17),
    (item_set_slot, 88, 45, 9),
    (item_set_slot, 89, 1501, 0),
    (item_set_slot, 89, 1500, 1),
    (item_set_slot, 89, 1508, 35),
    (item_set_slot, 89, 41, 42),
    (item_set_slot, 89, 44, 14),
    (item_set_slot, 89, 45, 10),
    (item_set_slot, 90, 1501, 0),
    (item_set_slot, 90, 1500, 2),
    (item_set_slot, 90, 1508, 35),
    (item_set_slot, 90, 41, 44),
    (item_set_slot, 90, 44, 15),
    (item_set_slot, 90, 45, 8),
    (item_set_slot, 91, 1501, 0),
    (item_set_slot, 91, 1500, 2),
    (item_set_slot, 91, 1508, 36),
    (item_set_slot, 91, 41, 48),
    (item_set_slot, 91, 44, 15),
    (item_set_slot, 91, 45, 12),
    (item_set_slot, 92, 1501, 0),
    (item_set_slot, 92, 1500, 2),
    (item_set_slot, 92, 1508, 36),
    (item_set_slot, 92, 41, 48),
    (item_set_slot, 92, 44, 12),
    (item_set_slot, 92, 45, 22),
    (item_set_slot, 93, 1501, 0),
    (item_set_slot, 93, 1500, 3),
    (item_set_slot, 93, 1508, 36),
    (item_set_slot, 93, 41, 44),
    (item_set_slot, 93, 44, 15),
    (item_set_slot, 93, 45, 16),
    (item_set_slot, 94, 1501, 0),
    (item_set_slot, 94, 1500, 3),
    (item_set_slot, 94, 1508, 36),
    (item_set_slot, 94, 41, 45),
    (item_set_slot, 94, 44, 18),
    (item_set_slot, 94, 45, 28),
    (item_set_slot, 95, 1501, 0),
    (item_set_slot, 95, 1500, 4),
    (item_set_slot, 95, 1508, 36),
    (item_set_slot, 95, 41, 38),
    (item_set_slot, 95, 44, 45),
    (item_set_slot, 95, 45, 38),
    (item_set_slot, 96, 1501, 0),
    (item_set_slot, 96, 1500, 4),
    (item_set_slot, 96, 1508, 36),
    (item_set_slot, 96, 41, 38),
    (item_set_slot, 96, 44, 45),
    (item_set_slot, 96, 45, 38),
    (item_set_slot, 97, 1501, 0),
    (item_set_slot, 97, 1500, 4),
    (item_set_slot, 97, 1508, 36),
    (item_set_slot, 97, 41, 38),
    (item_set_slot, 97, 44, 45),
    (item_set_slot, 97, 45, 38),
    (item_set_slot, 98, 1501, 0),
    (item_set_slot, 98, 1500, 4),
    (item_set_slot, 98, 1508, 36),
    (item_set_slot, 98, 41, 38),
    (item_set_slot, 98, 44, 45),
    (item_set_slot, 98, 45, 38),
    (item_set_slot, 99, 1501, 0),
    (item_set_slot, 99, 1500, 4),
    (item_set_slot, 99, 1508, 36),
    (item_set_slot, 99, 41, 38),
    (item_set_slot, 99, 44, 45),
    (item_set_slot, 99, 45, 38),
    (item_set_slot, 100, 1501, 0),
    (item_set_slot, 100, 1500, 4),
    (item_set_slot, 100, 1508, 36),
    (item_set_slot, 100, 41, 38),
    (item_set_slot, 100, 44, 45),
    (item_set_slot, 100, 45, 38),
    (item_set_slot, 101, 1501, 0),
    (item_set_slot, 101, 1500, 4),
    (item_set_slot, 101, 1508, 36),
    (item_set_slot, 101, 41, 38),
    (item_set_slot, 101, 44, 45),
    (item_set_slot, 101, 45, 38),
    (item_set_slot, 102, 1501, 0),
    (item_set_slot, 102, 1500, 4),
    (item_set_slot, 102, 1508, 36),
    (item_set_slot, 102, 41, 38),
    (item_set_slot, 102, 44, 45),
    (item_set_slot, 102, 45, 38),
    (item_set_slot, 103, 1501, 0),
    (item_set_slot, 103, 1500, 4),
    (item_set_slot, 103, 1508, 36),
    (item_set_slot, 103, 41, 38),
    (item_set_slot, 103, 44, 45),
    (item_set_slot, 103, 45, 38),
    (item_set_slot, 104, 1501, 0),
    (item_set_slot, 104, 1500, 4),
    (item_set_slot, 104, 1508, 36),
    (item_set_slot, 104, 41, 38),
    (item_set_slot, 104, 44, 45),
    (item_set_slot, 104, 45, 38),
    (item_set_slot, 105, 1501, 0),
    (item_set_slot, 105, 1500, 4),
    (item_set_slot, 105, 1508, 36),
    (item_set_slot, 105, 41, 38),
    (item_set_slot, 105, 44, 45),
    (item_set_slot, 105, 45, 38),
    (item_set_slot, 106, 1501, 0),
    (item_set_slot, 106, 1500, 4),
    (item_set_slot, 106, 1508, 36),
    (item_set_slot, 106, 41, 38),
    (item_set_slot, 106, 44, 45),
    (item_set_slot, 106, 45, 38),
    (item_set_slot, 107, 1501, 0),
    (item_set_slot, 107, 1500, 4),
    (item_set_slot, 107, 1508, 36),
    (item_set_slot, 107, 41, 38),
    (item_set_slot, 107, 44, 45),
    (item_set_slot, 107, 45, 38),
    (item_set_slot, 108, 1501, 0),
    (item_set_slot, 108, 1500, 4),
    (item_set_slot, 108, 1508, 36),
    (item_set_slot, 108, 41, 38),
    (item_set_slot, 108, 44, 45),
    (item_set_slot, 108, 45, 38),
    (item_set_slot, 109, 1501, 0),
    (item_set_slot, 109, 1500, 4),
    (item_set_slot, 109, 1508, 36),
    (item_set_slot, 109, 41, 38),
    (item_set_slot, 109, 44, 45),
    (item_set_slot, 109, 45, 38),
    (item_set_slot, 110, 1501, 0),
    (item_set_slot, 110, 1500, 4),
    (item_set_slot, 110, 1508, 36),
    (item_set_slot, 110, 41, 38),
    (item_set_slot, 110, 44, 45),
    (item_set_slot, 110, 45, 38),
    (item_set_slot, 111, 1501, 0),
    (item_set_slot, 111, 1500, 4),
    (item_set_slot, 111, 1508, 36),
    (item_set_slot, 111, 41, 38),
    (item_set_slot, 111, 44, 45),
    (item_set_slot, 111, 45, 38),
    (item_set_slot, 112, 1501, 0),
    (item_set_slot, 112, 1500, 4),
    (item_set_slot, 112, 1508, 36),
    (item_set_slot, 112, 41, 38),
    (item_set_slot, 112, 44, 45),
    (item_set_slot, 112, 45, 38),
    (item_set_slot, 113, 1501, 0),
    (item_set_slot, 113, 1500, 4),
    (item_set_slot, 113, 1508, 36),
    (item_set_slot, 113, 41, 38),
    (item_set_slot, 113, 44, 45),
    (item_set_slot, 113, 45, 38),
    (item_set_slot, 114, 1501, 0),
    (item_set_slot, 114, 1500, 4),
    (item_set_slot, 114, 1508, 36),
    (item_set_slot, 114, 41, 38),
    (item_set_slot, 114, 44, 45),
    (item_set_slot, 114, 45, 38),
    (item_set_slot, 115, 1501, 0),
    (item_set_slot, 115, 1500, 4),
    (item_set_slot, 115, 1508, 36),
    (item_set_slot, 115, 41, 38),
    (item_set_slot, 115, 44, 45),
    (item_set_slot, 115, 45, 38),
    (item_set_slot, 116, 1501, 0),
    (item_set_slot, 116, 1500, 4),
    (item_set_slot, 116, 1508, 36),
    (item_set_slot, 116, 41, 38),
    (item_set_slot, 116, 44, 45),
    (item_set_slot, 116, 45, 38),
    (item_set_slot, 117, 1501, 0),
    (item_set_slot, 117, 1500, 4),
    (item_set_slot, 117, 1508, 36),
    (item_set_slot, 117, 41, 38),
    (item_set_slot, 117, 44, 45),
    (item_set_slot, 117, 45, 38),
    (item_set_slot, 118, 1501, 0),
    (item_set_slot, 118, 1500, 4),
    (item_set_slot, 118, 1508, 36),
    (item_set_slot, 118, 41, 38),
    (item_set_slot, 118, 44, 45),
    (item_set_slot, 118, 45, 38),
    (item_set_slot, 119, 1501, 0),
    (item_set_slot, 119, 1500, 4),
    (item_set_slot, 119, 1508, 36),
    (item_set_slot, 119, 41, 38),
    (item_set_slot, 119, 44, 45),
    (item_set_slot, 119, 45, 38),
    (item_set_slot, 120, 1501, 0),
    (item_set_slot, 120, 1500, 4),
    (item_set_slot, 120, 1508, 36),
    (item_set_slot, 120, 41, 38),
    (item_set_slot, 120, 44, 45),
    (item_set_slot, 120, 45, 38),
    (item_set_slot, 121, 1501, 0),
    (item_set_slot, 121, 1500, 4),
    (item_set_slot, 121, 1508, 36),
    (item_set_slot, 121, 41, 38),
    (item_set_slot, 121, 44, 45),
    (item_set_slot, 121, 45, 38),
    (item_set_slot, 122, 1501, 0),
    (item_set_slot, 122, 1500, 4),
    (item_set_slot, 122, 1508, 36),
    (item_set_slot, 122, 41, 38),
    (item_set_slot, 122, 44, 45),
    (item_set_slot, 122, 45, 38),
    (item_set_slot, 123, 1501, 0),
    (item_set_slot, 123, 1500, 4),
    (item_set_slot, 123, 1508, 36),
    (item_set_slot, 123, 41, 38),
    (item_set_slot, 123, 44, 45),
    (item_set_slot, 123, 45, 38),
    (item_set_slot, 124, 1501, 0),
    (item_set_slot, 124, 1500, 4),
    (item_set_slot, 124, 1508, 36),
    (item_set_slot, 124, 41, 38),
    (item_set_slot, 124, 44, 45),
    (item_set_slot, 124, 45, 38),
    (item_set_slot, 125, 1501, 0),
    (item_set_slot, 125, 1500, 4),
    (item_set_slot, 125, 1508, 36),
    (item_set_slot, 125, 41, 38),
    (item_set_slot, 125, 44, 45),
    (item_set_slot, 125, 45, 38),
    (item_set_slot, 126, 1501, 0),
    (item_set_slot, 126, 1500, 4),
    (item_set_slot, 126, 1508, 36),
    (item_set_slot, 126, 41, 38),
    (item_set_slot, 126, 44, 45),
    (item_set_slot, 126, 45, 38),
    (item_set_slot, 127, 1501, 0),
    (item_set_slot, 127, 1500, 4),
    (item_set_slot, 127, 1508, 36),
    (item_set_slot, 127, 41, 38),
    (item_set_slot, 127, 44, 45),
    (item_set_slot, 127, 45, 38),
    (item_set_slot, 128, 1501, 0),
    (item_set_slot, 128, 1500, 4),
    (item_set_slot, 128, 1508, 36),
    (item_set_slot, 128, 41, 38),
    (item_set_slot, 128, 44, 45),
    (item_set_slot, 128, 45, 38),
    (item_set_slot, 129, 1501, 0),
    (item_set_slot, 129, 1500, 4),
    (item_set_slot, 129, 1508, 36),
    (item_set_slot, 129, 41, 38),
    (item_set_slot, 129, 44, 45),
    (item_set_slot, 129, 45, 38),
    (item_set_slot, 130, 1501, 0),
    (item_set_slot, 130, 1500, 4),
    (item_set_slot, 130, 1508, 36),
    (item_set_slot, 130, 41, 38),
    (item_set_slot, 130, 44, 45),
    (item_set_slot, 130, 45, 38),
    (item_set_slot, 131, 1501, 0),
    (item_set_slot, 131, 1500, 4),
    (item_set_slot, 131, 1508, 36),
    (item_set_slot, 131, 41, 38),
    (item_set_slot, 131, 44, 45),
    (item_set_slot, 131, 45, 38),
    (item_set_slot, 132, 1501, 0),
    (item_set_slot, 132, 1500, 4),
    (item_set_slot, 132, 1508, 36),
    (item_set_slot, 132, 41, 38),
    (item_set_slot, 132, 44, 45),
    (item_set_slot, 132, 45, 38),
    (item_set_slot, 133, 1501, 0),
    (item_set_slot, 133, 1500, 4),
    (item_set_slot, 133, 1508, 36),
    (item_set_slot, 133, 41, 38),
    (item_set_slot, 133, 44, 45),
    (item_set_slot, 133, 45, 38),
    (item_set_slot, 134, 1501, 0),
    (item_set_slot, 134, 1500, 4),
    (item_set_slot, 134, 1508, 36),
    (item_set_slot, 134, 41, 38),
    (item_set_slot, 134, 44, 45),
    (item_set_slot, 134, 45, 38),
    (item_set_slot, 135, 1501, 0),
    (item_set_slot, 135, 1500, 4),
    (item_set_slot, 135, 1508, 36),
    (item_set_slot, 135, 41, 38),
    (item_set_slot, 135, 44, 45),
    (item_set_slot, 135, 45, 38),
    (item_set_slot, 136, 1501, 0),
    (item_set_slot, 136, 1500, 4),
    (item_set_slot, 136, 1508, 36),
    (item_set_slot, 136, 41, 38),
    (item_set_slot, 136, 44, 45),
    (item_set_slot, 136, 45, 38),
    (item_set_slot, 137, 1501, 0),
    (item_set_slot, 137, 1500, 4),
    (item_set_slot, 137, 1508, 36),
    (item_set_slot, 137, 41, 38),
    (item_set_slot, 137, 44, 45),
    (item_set_slot, 137, 45, 38),
    (item_set_slot, 138, 1501, 0),
    (item_set_slot, 138, 1500, 4),
    (item_set_slot, 138, 1508, 36),
    (item_set_slot, 138, 41, 38),
    (item_set_slot, 138, 44, 45),
    (item_set_slot, 138, 45, 38),
    (item_set_slot, 139, 1501, 0),
    (item_set_slot, 139, 1500, 4),
    (item_set_slot, 139, 1508, 36),
    (item_set_slot, 139, 41, 38),
    (item_set_slot, 139, 44, 45),
    (item_set_slot, 139, 45, 38),
    (item_set_slot, 140, 1501, 0),
    (item_set_slot, 140, 1500, 4),
    (item_set_slot, 140, 1508, 36),
    (item_set_slot, 140, 41, 38),
    (item_set_slot, 140, 44, 45),
    (item_set_slot, 140, 45, 38),
    (item_set_slot, 141, 1501, 0),
    (item_set_slot, 141, 1500, 4),
    (item_set_slot, 141, 1508, 36),
    (item_set_slot, 141, 41, 38),
    (item_set_slot, 141, 44, 45),
    (item_set_slot, 141, 45, 38),
    (item_set_slot, 142, 1501, 0),
    (item_set_slot, 142, 1500, 4),
    (item_set_slot, 142, 1508, 36),
    (item_set_slot, 142, 41, 38),
    (item_set_slot, 142, 44, 45),
    (item_set_slot, 142, 45, 38),
    (item_set_slot, 143, 1501, 0),
    (item_set_slot, 143, 1500, 4),
    (item_set_slot, 143, 1508, 36),
    (item_set_slot, 143, 41, 38),
    (item_set_slot, 143, 44, 45),
    (item_set_slot, 143, 45, 38),
    (item_set_slot, 144, 1501, 0),
    (item_set_slot, 144, 1500, 4),
    (item_set_slot, 144, 1508, 36),
    (item_set_slot, 144, 41, 38),
    (item_set_slot, 144, 44, 45),
    (item_set_slot, 144, 45, 38),
    (item_set_slot, 145, 1501, 0),
    (item_set_slot, 145, 1500, 4),
    (item_set_slot, 145, 1508, 36),
    (item_set_slot, 145, 41, 38),
    (item_set_slot, 145, 44, 45),
    (item_set_slot, 145, 45, 38),
    (item_set_slot, 146, 1501, 0),
    (item_set_slot, 146, 1500, 4),
    (item_set_slot, 146, 1508, 36),
    (item_set_slot, 146, 41, 38),
    (item_set_slot, 146, 44, 45),
    (item_set_slot, 146, 45, 38),
    (item_set_slot, 147, 1501, 0),
    (item_set_slot, 147, 1500, 4),
    (item_set_slot, 147, 1508, 36),
    (item_set_slot, 147, 41, 38),
    (item_set_slot, 147, 44, 45),
    (item_set_slot, 147, 45, 38),
    (item_set_slot, 148, 1501, 0),
    (item_set_slot, 148, 1500, 4),
    (item_set_slot, 148, 1508, 36),
    (item_set_slot, 148, 41, 38),
    (item_set_slot, 148, 44, 45),
    (item_set_slot, 148, 45, 38),
    (item_set_slot, 149, 1501, 0),
    (item_set_slot, 149, 1500, 4),
    (item_set_slot, 149, 1508, 36),
    (item_set_slot, 149, 41, 38),
    (item_set_slot, 149, 44, 45),
    (item_set_slot, 149, 45, 38),
    (item_set_slot, 150, 1501, 0),
    (item_set_slot, 150, 1500, 4),
    (item_set_slot, 150, 1508, 36),
    (item_set_slot, 150, 41, 38),
    (item_set_slot, 150, 44, 45),
    (item_set_slot, 150, 45, 38),
    (item_set_slot, 151, 1501, 0),
    (item_set_slot, 151, 1500, 4),
    (item_set_slot, 151, 1508, 36),
    (item_set_slot, 151, 41, 38),
    (item_set_slot, 151, 44, 45),
    (item_set_slot, 151, 45, 38),
    (item_set_slot, 152, 1501, 0),
    (item_set_slot, 152, 1500, 4),
    (item_set_slot, 152, 1508, 36),
    (item_set_slot, 152, 41, 38),
    (item_set_slot, 152, 44, 45),
    (item_set_slot, 152, 45, 38),
    (item_set_slot, 153, 1501, 0),
    (item_set_slot, 153, 1500, 4),
    (item_set_slot, 153, 1508, 36),
    (item_set_slot, 153, 41, 38),
    (item_set_slot, 153, 44, 45),
    (item_set_slot, 153, 45, 38),
    (item_set_slot, 154, 1501, 0),
    (item_set_slot, 154, 1500, 4),
    (item_set_slot, 154, 1508, 36),
    (item_set_slot, 154, 41, 38),
    (item_set_slot, 154, 44, 45),
    (item_set_slot, 154, 45, 38),
    (item_set_slot, 155, 1501, 0),
    (item_set_slot, 155, 1500, 4),
    (item_set_slot, 155, 1508, 36),
    (item_set_slot, 155, 41, 38),
    (item_set_slot, 155, 44, 45),
    (item_set_slot, 155, 45, 38),
    (item_set_slot, 156, 1501, 0),
    (item_set_slot, 156, 1500, 4),
    (item_set_slot, 156, 1508, 36),
    (item_set_slot, 156, 41, 38),
    (item_set_slot, 156, 44, 45),
    (item_set_slot, 156, 45, 38),
    (item_set_slot, 157, 1501, 0),
    (item_set_slot, 157, 1500, 4),
    (item_set_slot, 157, 1508, 36),
    (item_set_slot, 157, 41, 38),
    (item_set_slot, 157, 44, 45),
    (item_set_slot, 157, 45, 38),
    (item_set_slot, 158, 1501, 0),
    (item_set_slot, 158, 1500, 4),
    (item_set_slot, 158, 1508, 36),
    (item_set_slot, 158, 41, 38),
    (item_set_slot, 158, 44, 45),
    (item_set_slot, 158, 45, 38),
    (item_set_slot, 159, 1501, 0),
    (item_set_slot, 159, 1500, 4),
    (item_set_slot, 159, 1508, 36),
    (item_set_slot, 159, 41, 38),
    (item_set_slot, 159, 44, 45),
    (item_set_slot, 159, 45, 38),
    (item_set_slot, 160, 1501, 0),
    (item_set_slot, 160, 1500, 4),
    (item_set_slot, 160, 1508, 36),
    (item_set_slot, 160, 41, 38),
    (item_set_slot, 160, 44, 45),
    (item_set_slot, 160, 45, 38),
    (item_set_slot, 161, 1501, 0),
    (item_set_slot, 161, 1500, 4),
    (item_set_slot, 161, 1508, 36),
    (item_set_slot, 161, 41, 38),
    (item_set_slot, 161, 44, 45),
    (item_set_slot, 161, 45, 38),
    (item_set_slot, 162, 1501, 0),
    (item_set_slot, 162, 1500, 4),
    (item_set_slot, 162, 1508, 36),
    (item_set_slot, 162, 41, 38),
    (item_set_slot, 162, 44, 45),
    (item_set_slot, 162, 45, 38),
    (item_set_slot, 163, 1501, 0),
    (item_set_slot, 163, 1500, 4),
    (item_set_slot, 163, 1508, 36),
    (item_set_slot, 163, 41, 38),
    (item_set_slot, 163, 44, 45),
    (item_set_slot, 163, 45, 38),
    (item_set_slot, 164, 1501, 0),
    (item_set_slot, 164, 1500, 4),
    (item_set_slot, 164, 1508, 36),
    (item_set_slot, 164, 41, 38),
    (item_set_slot, 164, 44, 45),
    (item_set_slot, 164, 45, 38),
    (item_set_slot, 165, 1501, 0),
    (item_set_slot, 165, 1500, 4),
    (item_set_slot, 165, 1508, 36),
    (item_set_slot, 165, 41, 38),
    (item_set_slot, 165, 44, 45),
    (item_set_slot, 165, 45, 38),
    (item_set_slot, 166, 1501, 0),
    (item_set_slot, 166, 1500, 4),
    (item_set_slot, 166, 1508, 36),
    (item_set_slot, 166, 41, 38),
    (item_set_slot, 166, 44, 45),
    (item_set_slot, 166, 45, 38),
    (item_set_slot, 167, 1501, 0),
    (item_set_slot, 167, 1500, 4),
    (item_set_slot, 167, 1508, 36),
    (item_set_slot, 167, 41, 38),
    (item_set_slot, 167, 44, 45),
    (item_set_slot, 167, 45, 38),
    (item_set_slot, 168, 1501, 0),
    (item_set_slot, 168, 1500, 4),
    (item_set_slot, 168, 1508, 36),
    (item_set_slot, 168, 41, 38),
    (item_set_slot, 168, 44, 45),
    (item_set_slot, 168, 45, 38),
    (item_set_slot, 169, 1501, 0),
    (item_set_slot, 169, 1500, 4),
    (item_set_slot, 169, 1508, 36),
    (item_set_slot, 169, 41, 38),
    (item_set_slot, 169, 44, 45),
    (item_set_slot, 169, 45, 38),
    (item_set_slot, 170, 1501, 0),
    (item_set_slot, 170, 1500, 4),
    (item_set_slot, 170, 1508, 36),
    (item_set_slot, 170, 41, 38),
    (item_set_slot, 170, 44, 45),
    (item_set_slot, 170, 45, 38),
    (item_set_slot, 171, 1501, 0),
    (item_set_slot, 171, 1500, 4),
    (item_set_slot, 171, 1508, 36),
    (item_set_slot, 171, 41, 38),
    (item_set_slot, 171, 44, 45),
    (item_set_slot, 171, 45, 38),
    (item_set_slot, 172, 1501, 0),
    (item_set_slot, 172, 1500, 4),
    (item_set_slot, 172, 1508, 36),
    (item_set_slot, 172, 41, 38),
    (item_set_slot, 172, 44, 45),
    (item_set_slot, 172, 45, 38),
    (item_set_slot, 173, 1501, 0),
    (item_set_slot, 173, 1500, 4),
    (item_set_slot, 173, 1508, 36),
    (item_set_slot, 173, 41, 38),
    (item_set_slot, 173, 44, 45),
    (item_set_slot, 173, 45, 38),
    (item_set_slot, 174, 1501, 0),
    (item_set_slot, 174, 1500, 4),
    (item_set_slot, 174, 1508, 36),
    (item_set_slot, 174, 41, 38),
    (item_set_slot, 174, 44, 45),
    (item_set_slot, 174, 45, 38),
    (item_set_slot, 175, 1501, 0),
    (item_set_slot, 175, 1500, 4),
    (item_set_slot, 175, 1508, 36),
    (item_set_slot, 175, 41, 38),
    (item_set_slot, 175, 44, 45),
    (item_set_slot, 175, 45, 38),
    (item_set_slot, 176, 1501, 0),
    (item_set_slot, 176, 1500, 4),
    (item_set_slot, 176, 1508, 36),
    (item_set_slot, 176, 41, 38),
    (item_set_slot, 176, 44, 45),
    (item_set_slot, 176, 45, 38),
    (item_set_slot, 177, 1501, 0),
    (item_set_slot, 177, 1500, 4),
    (item_set_slot, 177, 1508, 36),
    (item_set_slot, 177, 41, 38),
    (item_set_slot, 177, 44, 45),
    (item_set_slot, 177, 45, 38),
    (item_set_slot, 178, 1501, 0),
    (item_set_slot, 178, 1500, 4),
    (item_set_slot, 178, 1508, 36),
    (item_set_slot, 178, 41, 38),
    (item_set_slot, 178, 44, 45),
    (item_set_slot, 178, 45, 38),
    (item_set_slot, 179, 1501, 0),
    (item_set_slot, 179, 1500, 4),
    (item_set_slot, 179, 1508, 36),
    (item_set_slot, 179, 41, 38),
    (item_set_slot, 179, 44, 45),
    (item_set_slot, 179, 45, 38),
    (item_set_slot, 180, 1501, 0),
    (item_set_slot, 180, 1500, 4),
    (item_set_slot, 180, 1508, 36),
    (item_set_slot, 180, 41, 38),
    (item_set_slot, 180, 44, 45),
    (item_set_slot, 180, 45, 38),
    (item_set_slot, 181, 1501, 0),
    (item_set_slot, 181, 1500, 4),
    (item_set_slot, 181, 1508, 36),
    (item_set_slot, 181, 41, 38),
    (item_set_slot, 181, 44, 45),
    (item_set_slot, 181, 45, 38),
    (item_set_slot, 182, 1501, 0),
    (item_set_slot, 182, 1500, 4),
    (item_set_slot, 182, 1508, 36),
    (item_set_slot, 182, 41, 38),
    (item_set_slot, 182, 44, 45),
    (item_set_slot, 182, 45, 38),
    (item_set_slot, 183, 1501, 300),
    (item_set_slot, 183, 1500, 0),
    (item_set_slot, 183, 1508, 42),
    (item_set_slot, 183, 44, 30),
    (item_set_slot, 183, 45, 0),
    (item_set_slot, 183, 43, 0),
    (item_set_slot, 183, 42, 95),
    (item_set_slot, 184, 1501, 350),
    (item_set_slot, 184, 1500, 0),
    (item_set_slot, 184, 1508, 42),
    (item_set_slot, 184, 44, 33),
    (item_set_slot, 184, 45, 0),
    (item_set_slot, 184, 43, 0),
    (item_set_slot, 184, 42, 95),
    (item_set_slot, 185, 1501, 300),
    (item_set_slot, 185, 1500, 0),
    (item_set_slot, 185, 1508, 42),
    (item_set_slot, 185, 44, 31),
    (item_set_slot, 185, 45, 0),
    (item_set_slot, 185, 43, 0),
    (item_set_slot, 185, 42, 95),
    (item_set_slot, 186, 1501, 300),
    (item_set_slot, 186, 1500, 0),
    (item_set_slot, 186, 1508, 42),
    (item_set_slot, 186, 44, 32),
    (item_set_slot, 186, 45, 0),
    (item_set_slot, 186, 43, 0),
    (item_set_slot, 186, 42, 91),
    (item_set_slot, 187, 1501, 225),
    (item_set_slot, 187, 1500, 0),
    (item_set_slot, 187, 1508, 42),
    (item_set_slot, 187, 44, 36),
    (item_set_slot, 187, 45, 0),
    (item_set_slot, 187, 43, 0),
    (item_set_slot, 187, 42, 63),
    (item_set_slot, 188, 1501, 250),
    (item_set_slot, 188, 1500, 0),
    (item_set_slot, 188, 1508, 42),
    (item_set_slot, 188, 44, 40),
    (item_set_slot, 188, 45, 0),
    (item_set_slot, 188, 43, 0),
    (item_set_slot, 188, 42, 63),
    (item_set_slot, 189, 1501, 225),
    (item_set_slot, 189, 1500, 0),
    (item_set_slot, 189, 1508, 42),
    (item_set_slot, 189, 44, 257),
    (item_set_slot, 189, 45, 0),
    (item_set_slot, 189, 43, 0),
    (item_set_slot, 189, 42, 3),
    (item_set_slot, 190, 1501, 200),
    (item_set_slot, 190, 1500, 0),
    (item_set_slot, 190, 1502, 0),
    (item_set_slot, 190, 1508, 26),
    (item_set_slot, 190, 41, 0),
    (item_set_slot, 190, 44, 19),
    (item_set_slot, 190, 45, 8),
    (item_set_slot, 191, 1501, 125),
    (item_set_slot, 191, 1500, 0),
    (item_set_slot, 191, 1502, 0),
    (item_set_slot, 191, 1508, 26),
    (item_set_slot, 191, 41, 14),
    (item_set_slot, 191, 44, 0),
    (item_set_slot, 191, 45, 0),
    (item_set_slot, 192, 1501, 25),
    (item_set_slot, 192, 1500, 0),
    (item_set_slot, 192, 1502, 0),
    (item_set_slot, 192, 1508, 26),
    (item_set_slot, 192, 41, 0),
    (item_set_slot, 192, 44, 2),
    (item_set_slot, 192, 45, 0),
    (item_set_slot, 193, 1501, 50),
    (item_set_slot, 193, 1500, 0),
    (item_set_slot, 193, 1502, 1),
    (item_set_slot, 193, 1508, 29),
    (item_set_slot, 193, 41, 0),
    (item_set_slot, 193, 44, 6),
    (item_set_slot, 193, 45, 0),
    (item_set_slot, 194, 1501, 75),
    (item_set_slot, 194, 1500, 0),
    (item_set_slot, 194, 1502, 1),
    (item_set_slot, 194, 1508, 29),
    (item_set_slot, 194, 41, 0),
    (item_set_slot, 194, 44, 9),
    (item_set_slot, 194, 45, 0),
    (item_set_slot, 195, 1501, 75),
    (item_set_slot, 195, 1500, 0),
    (item_set_slot, 195, 1502, 1),
    (item_set_slot, 195, 1508, 29),
    (item_set_slot, 195, 41, 0),
    (item_set_slot, 195, 44, 10),
    (item_set_slot, 195, 45, 0),
    (item_set_slot, 196, 1501, 100),
    (item_set_slot, 196, 1500, 0),
    (item_set_slot, 196, 1502, 0),
    (item_set_slot, 196, 1508, 26),
    (item_set_slot, 196, 41, 0),
    (item_set_slot, 196, 44, 0),
    (item_set_slot, 196, 45, 2),
    (item_set_slot, 197, 1501, 100),
    (item_set_slot, 197, 1500, 0),
    (item_set_slot, 197, 1502, 0),
    (item_set_slot, 197, 1508, 26),
    (item_set_slot, 197, 41, 0),
    (item_set_slot, 197, 44, 0),
    (item_set_slot, 197, 45, 2),
    (item_set_slot, 198, 1501, 125),
    (item_set_slot, 198, 1500, 0),
    (item_set_slot, 198, 1502, 0),
    (item_set_slot, 198, 1508, 26),
    (item_set_slot, 198, 41, 0),
    (item_set_slot, 198, 44, 0),
    (item_set_slot, 198, 45, 9),
    (item_set_slot, 199, 1501, 100),
    (item_set_slot, 199, 1500, 0),
    (item_set_slot, 199, 1502, 0),
    (item_set_slot, 199, 1508, 26),
    (item_set_slot, 199, 41, 0),
    (item_set_slot, 199, 44, 0),
    (item_set_slot, 199, 45, 8),
    (item_set_slot, 200, 1501, 100),
    (item_set_slot, 200, 1500, 0),
    (item_set_slot, 200, 1502, 0),
    (item_set_slot, 200, 1508, 26),
    (item_set_slot, 200, 41, 0),
    (item_set_slot, 200, 44, 0),
    (item_set_slot, 200, 45, 6),
    (item_set_slot, 201, 1501, 125),
    (item_set_slot, 201, 1500, 0),
    (item_set_slot, 201, 1502, 0),
    (item_set_slot, 201, 1508, 26),
    (item_set_slot, 201, 41, 0),
    (item_set_slot, 201, 44, 0),
    (item_set_slot, 201, 45, 8),
    (item_set_slot, 202, 1501, 125),
    (item_set_slot, 202, 1500, 0),
    (item_set_slot, 202, 1502, 0),
    (item_set_slot, 202, 1508, 26),
    (item_set_slot, 202, 41, 0),
    (item_set_slot, 202, 44, 0),
    (item_set_slot, 202, 45, 10),
    (item_set_slot, 203, 1501, 300),
    (item_set_slot, 203, 1500, 0),
    (item_set_slot, 203, 1502, 1),
    (item_set_slot, 203, 1508, 29),
    (item_set_slot, 203, 41, 0),
    (item_set_slot, 203, 44, 0),
    (item_set_slot, 203, 45, 24),
    (item_set_slot, 204, 1501, 300),
    (item_set_slot, 204, 1500, 0),
    (item_set_slot, 204, 1502, 1),
    (item_set_slot, 204, 1508, 29),
    (item_set_slot, 204, 41, 0),
    (item_set_slot, 204, 44, 0),
    (item_set_slot, 204, 45, 26),
    (item_set_slot, 205, 1501, 350),
    (item_set_slot, 205, 1500, 7),
    (item_set_slot, 205, 1502, 1),
    (item_set_slot, 205, 1508, 29),
    (item_set_slot, 205, 41, 0),
    (item_set_slot, 205, 44, 0),
    (item_set_slot, 205, 45, 28),
    (item_set_slot, 206, 1501, 350),
    (item_set_slot, 206, 1500, 7),
    (item_set_slot, 206, 1502, 1),
    (item_set_slot, 206, 1508, 29),
    (item_set_slot, 206, 41, 0),
    (item_set_slot, 206, 44, 0),
    (item_set_slot, 206, 45, 28),
    (item_set_slot, 207, 1501, 300),
    (item_set_slot, 207, 1500, 8),
    (item_set_slot, 207, 1502, 1),
    (item_set_slot, 207, 1508, 29),
    (item_set_slot, 207, 41, 0),
    (item_set_slot, 207, 44, 0),
    (item_set_slot, 207, 45, 35),
    (item_set_slot, 208, 1501, 300),
    (item_set_slot, 208, 1500, 8),
    (item_set_slot, 208, 1502, 1),
    (item_set_slot, 208, 1508, 29),
    (item_set_slot, 208, 41, 0),
    (item_set_slot, 208, 44, 0),
    (item_set_slot, 208, 45, 35),
    (item_set_slot, 209, 1501, 300),
    (item_set_slot, 209, 1500, 4),
    (item_set_slot, 209, 1502, 1),
    (item_set_slot, 209, 1508, 29),
    (item_set_slot, 209, 41, 0),
    (item_set_slot, 209, 44, 0),
    (item_set_slot, 209, 45, 25),
    (item_set_slot, 210, 1501, 300),
    (item_set_slot, 210, 1500, 4),
    (item_set_slot, 210, 1502, 1),
    (item_set_slot, 210, 1508, 29),
    (item_set_slot, 210, 41, 0),
    (item_set_slot, 210, 44, 0),
    (item_set_slot, 210, 45, 25),
    (item_set_slot, 211, 1501, 100),
    (item_set_slot, 211, 1500, 0),
    (item_set_slot, 211, 1502, 0),
    (item_set_slot, 211, 1508, 26),
    (item_set_slot, 211, 41, 0),
    (item_set_slot, 211, 44, 0),
    (item_set_slot, 211, 45, 8),
    (item_set_slot, 212, 1501, 100),
    (item_set_slot, 212, 1500, 0),
    (item_set_slot, 212, 1502, 0),
    (item_set_slot, 212, 1508, 26),
    (item_set_slot, 212, 41, 0),
    (item_set_slot, 212, 44, 0),
    (item_set_slot, 212, 45, 8),
    (item_set_slot, 213, 1501, 100),
    (item_set_slot, 213, 1500, 0),
    (item_set_slot, 213, 1502, 0),
    (item_set_slot, 213, 1508, 26),
    (item_set_slot, 213, 41, 0),
    (item_set_slot, 213, 44, 0),
    (item_set_slot, 213, 45, 14),
    (item_set_slot, 214, 1501, 100),
    (item_set_slot, 214, 1500, 0),
    (item_set_slot, 214, 1502, 0),
    (item_set_slot, 214, 1508, 26),
    (item_set_slot, 214, 41, 0),
    (item_set_slot, 214, 44, 0),
    (item_set_slot, 214, 45, 14),
    (item_set_slot, 215, 1501, 100),
    (item_set_slot, 215, 1500, 0),
    (item_set_slot, 215, 1502, 0),
    (item_set_slot, 215, 1508, 26),
    (item_set_slot, 215, 41, 0),
    (item_set_slot, 215, 44, 0),
    (item_set_slot, 215, 45, 14),
    (item_set_slot, 216, 1501, 100),
    (item_set_slot, 216, 1500, 0),
    (item_set_slot, 216, 1502, 0),
    (item_set_slot, 216, 1508, 26),
    (item_set_slot, 216, 41, 0),
    (item_set_slot, 216, 44, 0),
    (item_set_slot, 216, 45, 35),
    (item_set_slot, 217, 1501, 100),
    (item_set_slot, 217, 1500, 0),
    (item_set_slot, 217, 1502, 0),
    (item_set_slot, 217, 1508, 26),
    (item_set_slot, 217, 41, 0),
    (item_set_slot, 217, 44, 0),
    (item_set_slot, 217, 45, 35),
    (item_set_slot, 218, 1501, 300),
    (item_set_slot, 218, 1500, 0),
    (item_set_slot, 218, 1502, 1),
    (item_set_slot, 218, 1508, 29),
    (item_set_slot, 218, 41, 0),
    (item_set_slot, 218, 44, 0),
    (item_set_slot, 218, 45, 26),
    (item_set_slot, 219, 1501, 300),
    (item_set_slot, 219, 1500, 4),
    (item_set_slot, 219, 1502, 1),
    (item_set_slot, 219, 1508, 29),
    (item_set_slot, 219, 41, 0),
    (item_set_slot, 219, 44, 0),
    (item_set_slot, 219, 45, 8),
    (item_set_slot, 220, 1501, 125),
    (item_set_slot, 220, 1500, 0),
    (item_set_slot, 220, 1502, 0),
    (item_set_slot, 220, 1508, 26),
    (item_set_slot, 220, 41, 0),
    (item_set_slot, 220, 44, 0),
    (item_set_slot, 220, 45, 8),
    (item_set_slot, 221, 1501, 125),
    (item_set_slot, 221, 1500, 0),
    (item_set_slot, 221, 1502, 0),
    (item_set_slot, 221, 1508, 26),
    (item_set_slot, 221, 41, 0),
    (item_set_slot, 221, 44, 0),
    (item_set_slot, 221, 45, 8),
    (item_set_slot, 222, 1501, 300),
    (item_set_slot, 222, 1500, 8),
    (item_set_slot, 222, 1502, 1),
    (item_set_slot, 222, 1508, 29),
    (item_set_slot, 222, 41, 0),
    (item_set_slot, 222, 44, 0),
    (item_set_slot, 222, 45, 12),
    (item_set_slot, 223, 1501, 300),
    (item_set_slot, 223, 1500, 8),
    (item_set_slot, 223, 1502, 1),
    (item_set_slot, 223, 1508, 29),
    (item_set_slot, 223, 41, 0),
    (item_set_slot, 223, 44, 0),
    (item_set_slot, 223, 45, 12),
    (item_set_slot, 224, 1501, 125),
    (item_set_slot, 224, 1500, 0),
    (item_set_slot, 224, 1502, 0),
    (item_set_slot, 224, 1508, 26),
    (item_set_slot, 224, 41, 0),
    (item_set_slot, 224, 44, 0),
    (item_set_slot, 224, 45, 8),
    (item_set_slot, 225, 1501, 125),
    (item_set_slot, 225, 1500, 0),
    (item_set_slot, 225, 1502, 0),
    (item_set_slot, 225, 1508, 26),
    (item_set_slot, 225, 41, 0),
    (item_set_slot, 225, 44, 0),
    (item_set_slot, 225, 45, 8),
    (item_set_slot, 226, 1501, 125),
    (item_set_slot, 226, 1500, 0),
    (item_set_slot, 226, 1502, 0),
    (item_set_slot, 226, 1508, 26),
    (item_set_slot, 226, 41, 0),
    (item_set_slot, 226, 44, 0),
    (item_set_slot, 226, 45, 18),
    (item_set_slot, 227, 1501, 125),
    (item_set_slot, 227, 1500, 0),
    (item_set_slot, 227, 1502, 0),
    (item_set_slot, 227, 1508, 26),
    (item_set_slot, 227, 41, 0),
    (item_set_slot, 227, 44, 0),
    (item_set_slot, 227, 45, 8),
    (item_set_slot, 228, 1501, 125),
    (item_set_slot, 228, 1500, 0),
    (item_set_slot, 228, 1502, 0),
    (item_set_slot, 228, 1508, 26),
    (item_set_slot, 228, 41, 0),
    (item_set_slot, 228, 44, 0),
    (item_set_slot, 228, 45, 8),
    (item_set_slot, 229, 1501, 300),
    (item_set_slot, 229, 1500, 0),
    (item_set_slot, 229, 1502, 1),
    (item_set_slot, 229, 1508, 29),
    (item_set_slot, 229, 41, 0),
    (item_set_slot, 229, 44, 0),
    (item_set_slot, 229, 45, 24),
    (item_set_slot, 230, 1501, 100),
    (item_set_slot, 230, 1500, 0),
    (item_set_slot, 230, 1502, 0),
    (item_set_slot, 230, 1508, 26),
    (item_set_slot, 230, 41, 0),
    (item_set_slot, 230, 44, 0),
    (item_set_slot, 230, 45, 4),
    (item_set_slot, 231, 1501, 100),
    (item_set_slot, 231, 1500, 0),
    (item_set_slot, 231, 1502, 0),
    (item_set_slot, 231, 1508, 26),
    (item_set_slot, 231, 41, 0),
    (item_set_slot, 231, 44, 0),
    (item_set_slot, 231, 45, 2),
    (item_set_slot, 232, 1501, 100),
    (item_set_slot, 232, 1500, 0),
    (item_set_slot, 232, 1502, 0),
    (item_set_slot, 232, 1508, 26),
    (item_set_slot, 232, 41, 0),
    (item_set_slot, 232, 44, 0),
    (item_set_slot, 232, 45, 2),
    (item_set_slot, 233, 1501, 100),
    (item_set_slot, 233, 1500, 0),
    (item_set_slot, 233, 1502, 0),
    (item_set_slot, 233, 1508, 26),
    (item_set_slot, 233, 41, 0),
    (item_set_slot, 233, 44, 0),
    (item_set_slot, 233, 45, 2),
    (item_set_slot, 234, 1501, 100),
    (item_set_slot, 234, 1500, 0),
    (item_set_slot, 234, 1502, 0),
    (item_set_slot, 234, 1508, 26),
    (item_set_slot, 234, 41, 0),
    (item_set_slot, 234, 44, 0),
    (item_set_slot, 234, 45, 2),
    (item_set_slot, 235, 1501, 100),
    (item_set_slot, 235, 1500, 0),
    (item_set_slot, 235, 1502, 0),
    (item_set_slot, 235, 1508, 26),
    (item_set_slot, 235, 41, 0),
    (item_set_slot, 235, 44, 0),
    (item_set_slot, 235, 45, 2),
    (item_set_slot, 236, 1501, 100),
    (item_set_slot, 236, 1500, 0),
    (item_set_slot, 236, 1502, 0),
    (item_set_slot, 236, 1508, 26),
    (item_set_slot, 236, 41, 0),
    (item_set_slot, 236, 44, 0),
    (item_set_slot, 236, 45, 2),
    (item_set_slot, 237, 1501, 100),
    (item_set_slot, 237, 1500, 0),
    (item_set_slot, 237, 1502, 0),
    (item_set_slot, 237, 1508, 26),
    (item_set_slot, 237, 41, 0),
    (item_set_slot, 237, 44, 0),
    (item_set_slot, 237, 45, 2),
    (item_set_slot, 238, 1501, 100),
    (item_set_slot, 238, 1500, 0),
    (item_set_slot, 238, 1502, 0),
    (item_set_slot, 238, 1508, 26),
    (item_set_slot, 238, 41, 0),
    (item_set_slot, 238, 44, 0),
    (item_set_slot, 238, 45, 2),
    (item_set_slot, 239, 1501, 100),
    (item_set_slot, 239, 1500, 0),
    (item_set_slot, 239, 1502, 0),
    (item_set_slot, 239, 1508, 26),
    (item_set_slot, 239, 41, 0),
    (item_set_slot, 239, 44, 0),
    (item_set_slot, 239, 45, 0),
    (item_set_slot, 240, 1501, 100),
    (item_set_slot, 240, 1500, 0),
    (item_set_slot, 240, 1502, 0),
    (item_set_slot, 240, 1508, 26),
    (item_set_slot, 240, 41, 0),
    (item_set_slot, 240, 44, 0),
    (item_set_slot, 240, 45, 0),
    (item_set_slot, 241, 1501, 100),
    (item_set_slot, 241, 1500, 0),
    (item_set_slot, 241, 1502, 0),
    (item_set_slot, 241, 1508, 26),
    (item_set_slot, 241, 41, 0),
    (item_set_slot, 241, 44, 0),
    (item_set_slot, 241, 45, 0),
    (item_set_slot, 242, 1501, 100),
    (item_set_slot, 242, 1500, 0),
    (item_set_slot, 242, 1502, 0),
    (item_set_slot, 242, 1508, 26),
    (item_set_slot, 242, 41, 0),
    (item_set_slot, 242, 44, 0),
    (item_set_slot, 242, 45, 0),
    (item_set_slot, 243, 1501, 100),
    (item_set_slot, 243, 1500, 0),
    (item_set_slot, 243, 1502, 0),
    (item_set_slot, 243, 1508, 26),
    (item_set_slot, 243, 41, 0),
    (item_set_slot, 243, 44, 0),
    (item_set_slot, 243, 45, 2),
    (item_set_slot, 244, 1501, 100),
    (item_set_slot, 244, 1500, 0),
    (item_set_slot, 244, 1502, 0),
    (item_set_slot, 244, 1508, 26),
    (item_set_slot, 244, 41, 0),
    (item_set_slot, 244, 44, 0),
    (item_set_slot, 244, 45, 2),
    (item_set_slot, 245, 1501, 125),
    (item_set_slot, 245, 1500, 0),
    (item_set_slot, 245, 1502, 0),
    (item_set_slot, 245, 1508, 26),
    (item_set_slot, 245, 41, 0),
    (item_set_slot, 245, 44, 0),
    (item_set_slot, 245, 45, 8),
    (item_set_slot, 246, 1501, 125),
    (item_set_slot, 246, 1500, 0),
    (item_set_slot, 246, 1502, 0),
    (item_set_slot, 246, 1508, 26),
    (item_set_slot, 246, 41, 0),
    (item_set_slot, 246, 44, 0),
    (item_set_slot, 246, 45, 8),
    (item_set_slot, 247, 1501, 125),
    (item_set_slot, 247, 1500, 0),
    (item_set_slot, 247, 1502, 0),
    (item_set_slot, 247, 1508, 26),
    (item_set_slot, 247, 41, 0),
    (item_set_slot, 247, 44, 0),
    (item_set_slot, 247, 45, 8),
    (item_set_slot, 248, 1501, 300),
    (item_set_slot, 248, 1500, 0),
    (item_set_slot, 248, 1502, 0),
    (item_set_slot, 248, 1508, 26),
    (item_set_slot, 248, 41, 0),
    (item_set_slot, 248, 44, 10),
    (item_set_slot, 248, 45, 10),
    (item_set_slot, 249, 1501, 300),
    (item_set_slot, 249, 1500, 0),
    (item_set_slot, 249, 1502, 0),
    (item_set_slot, 249, 1508, 26),
    (item_set_slot, 249, 41, 0),
    (item_set_slot, 249, 44, 10),
    (item_set_slot, 249, 45, 10),
    (item_set_slot, 250, 1501, 300),
    (item_set_slot, 250, 1500, 0),
    (item_set_slot, 250, 1502, 0),
    (item_set_slot, 250, 1508, 26),
    (item_set_slot, 250, 41, 0),
    (item_set_slot, 250, 44, 10),
    (item_set_slot, 250, 45, 10),
    (item_set_slot, 251, 1501, 300),
    (item_set_slot, 251, 1500, 0),
    (item_set_slot, 251, 1502, 0),
    (item_set_slot, 251, 1508, 26),
    (item_set_slot, 251, 41, 0),
    (item_set_slot, 251, 44, 10),
    (item_set_slot, 251, 45, 10),
    (item_set_slot, 252, 1501, 300),
    (item_set_slot, 252, 1500, 0),
    (item_set_slot, 252, 1502, 0),
    (item_set_slot, 252, 1508, 26),
    (item_set_slot, 252, 41, 0),
    (item_set_slot, 252, 44, 10),
    (item_set_slot, 252, 45, 10),
    (item_set_slot, 253, 1501, 300),
    (item_set_slot, 253, 1500, 0),
    (item_set_slot, 253, 1502, 0),
    (item_set_slot, 253, 1508, 26),
    (item_set_slot, 253, 41, 0),
    (item_set_slot, 253, 44, 10),
    (item_set_slot, 253, 45, 10),
    (item_set_slot, 254, 1501, 300),
    (item_set_slot, 254, 1500, 0),
    (item_set_slot, 254, 1502, 0),
    (item_set_slot, 254, 1508, 26),
    (item_set_slot, 254, 41, 0),
    (item_set_slot, 254, 44, 10),
    (item_set_slot, 254, 45, 10),
    (item_set_slot, 255, 1501, 300),
    (item_set_slot, 255, 1500, 0),
    (item_set_slot, 255, 1502, 0),
    (item_set_slot, 255, 1508, 26),
    (item_set_slot, 255, 41, 0),
    (item_set_slot, 255, 44, 10),
    (item_set_slot, 255, 45, 10),
    (item_set_slot, 256, 1501, 300),
    (item_set_slot, 256, 1500, 0),
    (item_set_slot, 256, 1502, 0),
    (item_set_slot, 256, 1508, 26),
    (item_set_slot, 256, 41, 0),
    (item_set_slot, 256, 44, 10),
    (item_set_slot, 256, 45, 10),
    (item_set_slot, 257, 1501, 200),
    (item_set_slot, 257, 1500, 0),
    (item_set_slot, 257, 1502, 0),
    (item_set_slot, 257, 1508, 26),
    (item_set_slot, 257, 41, 0),
    (item_set_slot, 257, 44, 10),
    (item_set_slot, 257, 45, 0),
    (item_set_slot, 258, 1501, 200),
    (item_set_slot, 258, 1500, 0),
    (item_set_slot, 258, 1502, 0),
    (item_set_slot, 258, 1508, 26),
    (item_set_slot, 258, 41, 0),
    (item_set_slot, 258, 44, 14),
    (item_set_slot, 258, 45, 0),
    (item_set_slot, 259, 1501, 300),
    (item_set_slot, 259, 1500, 0),
    (item_set_slot, 259, 1502, 0),
    (item_set_slot, 259, 1508, 26),
    (item_set_slot, 259, 41, 0),
    (item_set_slot, 259, 44, 15),
    (item_set_slot, 259, 45, 0),
    (item_set_slot, 260, 1501, 500),
    (item_set_slot, 260, 1500, 0),
    (item_set_slot, 260, 1502, 0),
    (item_set_slot, 260, 1508, 26),
    (item_set_slot, 260, 41, 0),
    (item_set_slot, 260, 44, 6),
    (item_set_slot, 260, 45, 0),
    (item_set_slot, 261, 1501, 600),
    (item_set_slot, 261, 1500, 0),
    (item_set_slot, 261, 1502, 1),
    (item_set_slot, 261, 1508, 29),
    (item_set_slot, 261, 41, 0),
    (item_set_slot, 261, 44, 8),
    (item_set_slot, 261, 45, 6),
    (item_set_slot, 262, 1501, 400),
    (item_set_slot, 262, 1500, 0),
    (item_set_slot, 262, 1502, 0),
    (item_set_slot, 262, 1508, 26),
    (item_set_slot, 262, 41, 0),
    (item_set_slot, 262, 44, 14),
    (item_set_slot, 262, 45, 10),
    (item_set_slot, 263, 1501, 100),
    (item_set_slot, 263, 1500, 0),
    (item_set_slot, 263, 1502, 0),
    (item_set_slot, 263, 1508, 26),
    (item_set_slot, 263, 41, 0),
    (item_set_slot, 263, 44, 6),
    (item_set_slot, 263, 45, 2),
    (item_set_slot, 264, 1501, 100),
    (item_set_slot, 264, 1500, 0),
    (item_set_slot, 264, 1502, 0),
    (item_set_slot, 264, 1508, 26),
    (item_set_slot, 264, 41, 0),
    (item_set_slot, 264, 44, 6),
    (item_set_slot, 264, 45, 2),
    (item_set_slot, 265, 1501, 100),
    (item_set_slot, 265, 1500, 0),
    (item_set_slot, 265, 1502, 0),
    (item_set_slot, 265, 1508, 26),
    (item_set_slot, 265, 41, 0),
    (item_set_slot, 265, 44, 6),
    (item_set_slot, 265, 45, 1),
    (item_set_slot, 266, 1501, 100),
    (item_set_slot, 266, 1500, 0),
    (item_set_slot, 266, 1502, 0),
    (item_set_slot, 266, 1508, 26),
    (item_set_slot, 266, 41, 0),
    (item_set_slot, 266, 44, 7),
    (item_set_slot, 266, 45, 1),
    (item_set_slot, 267, 1501, 100),
    (item_set_slot, 267, 1500, 0),
    (item_set_slot, 267, 1502, 0),
    (item_set_slot, 267, 1508, 26),
    (item_set_slot, 267, 41, 0),
    (item_set_slot, 267, 44, 7),
    (item_set_slot, 267, 45, 1),
    (item_set_slot, 268, 1501, 150),
    (item_set_slot, 268, 1500, 0),
    (item_set_slot, 268, 1502, 0),
    (item_set_slot, 268, 1508, 26),
    (item_set_slot, 268, 41, 0),
    (item_set_slot, 268, 44, 8),
    (item_set_slot, 268, 45, 6),
    (item_set_slot, 269, 1501, 200),
    (item_set_slot, 269, 1500, 0),
    (item_set_slot, 269, 1502, 0),
    (item_set_slot, 269, 1508, 26),
    (item_set_slot, 269, 41, 0),
    (item_set_slot, 269, 44, 11),
    (item_set_slot, 269, 45, 6),
    (item_set_slot, 270, 1501, 400),
    (item_set_slot, 270, 1500, 0),
    (item_set_slot, 270, 1502, 0),
    (item_set_slot, 270, 1508, 26),
    (item_set_slot, 270, 41, 0),
    (item_set_slot, 270, 44, 9),
    (item_set_slot, 270, 45, 0),
    (item_set_slot, 271, 1501, 500),
    (item_set_slot, 271, 1500, 0),
    (item_set_slot, 271, 1502, 0),
    (item_set_slot, 271, 1508, 26),
    (item_set_slot, 271, 41, 0),
    (item_set_slot, 271, 44, 22),
    (item_set_slot, 271, 45, 4),
    (item_set_slot, 272, 1501, 1100),
    (item_set_slot, 272, 1500, 3),
    (item_set_slot, 272, 1502, 0),
    (item_set_slot, 272, 1508, 26),
    (item_set_slot, 272, 41, 0),
    (item_set_slot, 272, 44, 21),
    (item_set_slot, 272, 45, 10),
    (item_set_slot, 273, 1501, 1100),
    (item_set_slot, 273, 1500, 3),
    (item_set_slot, 273, 1502, 0),
    (item_set_slot, 273, 1508, 26),
    (item_set_slot, 273, 41, 0),
    (item_set_slot, 273, 44, 21),
    (item_set_slot, 273, 45, 10),
    (item_set_slot, 274, 1501, 1100),
    (item_set_slot, 274, 1500, 3),
    (item_set_slot, 274, 1502, 0),
    (item_set_slot, 274, 1508, 26),
    (item_set_slot, 274, 41, 0),
    (item_set_slot, 274, 44, 21),
    (item_set_slot, 274, 45, 10),
    (item_set_slot, 275, 1501, 1100),
    (item_set_slot, 275, 1500, 3),
    (item_set_slot, 275, 1502, 0),
    (item_set_slot, 275, 1508, 26),
    (item_set_slot, 275, 41, 0),
    (item_set_slot, 275, 44, 21),
    (item_set_slot, 275, 45, 10),
    (item_set_slot, 276, 1501, 1400),
    (item_set_slot, 276, 1500, 5),
    (item_set_slot, 276, 1502, 0),
    (item_set_slot, 276, 1508, 26),
    (item_set_slot, 276, 41, 0),
    (item_set_slot, 276, 44, 26),
    (item_set_slot, 276, 45, 12),
    (item_set_slot, 277, 1501, 600),
    (item_set_slot, 277, 1500, 0),
    (item_set_slot, 277, 1502, 0),
    (item_set_slot, 277, 1508, 26),
    (item_set_slot, 277, 41, 0),
    (item_set_slot, 277, 44, 15),
    (item_set_slot, 277, 45, 6),
    (item_set_slot, 278, 1501, 700),
    (item_set_slot, 278, 1500, 0),
    (item_set_slot, 278, 1502, 0),
    (item_set_slot, 278, 1508, 26),
    (item_set_slot, 278, 41, 0),
    (item_set_slot, 278, 44, 9),
    (item_set_slot, 278, 45, 5),
    (item_set_slot, 279, 1501, 700),
    (item_set_slot, 279, 1500, 0),
    (item_set_slot, 279, 1502, 0),
    (item_set_slot, 279, 1508, 26),
    (item_set_slot, 279, 41, 0),
    (item_set_slot, 279, 44, 13),
    (item_set_slot, 279, 45, 9),
    (item_set_slot, 280, 1501, 1100),
    (item_set_slot, 280, 1500, 3),
    (item_set_slot, 280, 1502, 0),
    (item_set_slot, 280, 1508, 26),
    (item_set_slot, 280, 41, 0),
    (item_set_slot, 280, 44, 21),
    (item_set_slot, 280, 45, 10),
    (item_set_slot, 281, 1501, 2600),
    (item_set_slot, 281, 1500, 10),
    (item_set_slot, 281, 1502, 1),
    (item_set_slot, 281, 1508, 29),
    (item_set_slot, 281, 41, 0),
    (item_set_slot, 281, 44, 51),
    (item_set_slot, 281, 45, 20),
    (item_set_slot, 282, 1501, 2100),
    (item_set_slot, 282, 1500, 9),
    (item_set_slot, 282, 1502, 0),
    (item_set_slot, 282, 1508, 26),
    (item_set_slot, 282, 41, 0),
    (item_set_slot, 282, 44, 41),
    (item_set_slot, 282, 45, 17),
    (item_set_slot, 283, 1501, 2100),
    (item_set_slot, 283, 1500, 9),
    (item_set_slot, 283, 1502, 0),
    (item_set_slot, 283, 1508, 26),
    (item_set_slot, 283, 41, 0),
    (item_set_slot, 283, 44, 41),
    (item_set_slot, 283, 45, 17),
    (item_set_slot, 284, 1501, 2600),
    (item_set_slot, 284, 1500, 10),
    (item_set_slot, 284, 1502, 1),
    (item_set_slot, 284, 1508, 29),
    (item_set_slot, 284, 41, 0),
    (item_set_slot, 284, 44, 51),
    (item_set_slot, 284, 45, 20),
    (item_set_slot, 285, 1501, 2600),
    (item_set_slot, 285, 1500, 10),
    (item_set_slot, 285, 1502, 1),
    (item_set_slot, 285, 1508, 29),
    (item_set_slot, 285, 41, 0),
    (item_set_slot, 285, 44, 51),
    (item_set_slot, 285, 45, 20),
    (item_set_slot, 286, 1501, 3600),
    (item_set_slot, 286, 1500, 14),
    (item_set_slot, 286, 1502, 1),
    (item_set_slot, 286, 1508, 29),
    (item_set_slot, 286, 41, 0),
    (item_set_slot, 286, 44, 80),
    (item_set_slot, 286, 45, 29),
    (item_set_slot, 287, 1501, 3600),
    (item_set_slot, 287, 1500, 14),
    (item_set_slot, 287, 1502, 1),
    (item_set_slot, 287, 1508, 29),
    (item_set_slot, 287, 41, 0),
    (item_set_slot, 287, 44, 80),
    (item_set_slot, 287, 45, 29),
    (item_set_slot, 288, 1501, 200),
    (item_set_slot, 288, 1500, 0),
    (item_set_slot, 288, 1502, 0),
    (item_set_slot, 288, 1508, 26),
    (item_set_slot, 288, 41, 0),
    (item_set_slot, 288, 44, 9),
    (item_set_slot, 288, 45, 1),
    (item_set_slot, 289, 1501, 3600),
    (item_set_slot, 289, 1500, 14),
    (item_set_slot, 289, 1502, 1),
    (item_set_slot, 289, 1508, 29),
    (item_set_slot, 289, 41, 0),
    (item_set_slot, 289, 44, 80),
    (item_set_slot, 289, 45, 29),
    (item_set_slot, 290, 1501, 100),
    (item_set_slot, 290, 1500, 0),
    (item_set_slot, 290, 1502, 1),
    (item_set_slot, 290, 1508, 29),
    (item_set_slot, 290, 41, 0),
    (item_set_slot, 290, 44, 9),
    (item_set_slot, 290, 45, 9),
    (item_set_slot, 291, 1501, 100),
    (item_set_slot, 291, 1500, 0),
    (item_set_slot, 291, 1502, 1),
    (item_set_slot, 291, 1508, 29),
    (item_set_slot, 291, 41, 0),
    (item_set_slot, 291, 44, 9),
    (item_set_slot, 291, 45, 9),
    (item_set_slot, 292, 1501, 300),
    (item_set_slot, 292, 1500, 0),
    (item_set_slot, 292, 1502, 1),
    (item_set_slot, 292, 1508, 29),
    (item_set_slot, 292, 41, 0),
    (item_set_slot, 292, 44, 15),
    (item_set_slot, 292, 45, 9),
    (item_set_slot, 293, 1501, 1400),
    (item_set_slot, 293, 1500, 5),
    (item_set_slot, 293, 1502, 0),
    (item_set_slot, 293, 1508, 26),
    (item_set_slot, 293, 41, 0),
    (item_set_slot, 293, 44, 26),
    (item_set_slot, 293, 45, 12),
    (item_set_slot, 294, 1501, 1100),
    (item_set_slot, 294, 1500, 3),
    (item_set_slot, 294, 1502, 0),
    (item_set_slot, 294, 1508, 26),
    (item_set_slot, 294, 41, 0),
    (item_set_slot, 294, 44, 21),
    (item_set_slot, 294, 45, 10),
    (item_set_slot, 295, 1501, 2100),
    (item_set_slot, 295, 1500, 9),
    (item_set_slot, 295, 1502, 0),
    (item_set_slot, 295, 1508, 26),
    (item_set_slot, 295, 41, 0),
    (item_set_slot, 295, 44, 41),
    (item_set_slot, 295, 45, 17),
    (item_set_slot, 296, 1501, 2100),
    (item_set_slot, 296, 1500, 9),
    (item_set_slot, 296, 1502, 1),
    (item_set_slot, 296, 1508, 29),
    (item_set_slot, 296, 41, 0),
    (item_set_slot, 296, 44, 41),
    (item_set_slot, 296, 45, 17),
    (item_set_slot, 297, 1501, 2600),
    (item_set_slot, 297, 1500, 10),
    (item_set_slot, 297, 1502, 1),
    (item_set_slot, 297, 1508, 29),
    (item_set_slot, 297, 41, 0),
    (item_set_slot, 297, 44, 51),
    (item_set_slot, 297, 45, 20),
    (item_set_slot, 298, 1501, 3100),
    (item_set_slot, 298, 1500, 12),
    (item_set_slot, 298, 1502, 0),
    (item_set_slot, 298, 1508, 26),
    (item_set_slot, 298, 41, 0),
    (item_set_slot, 298, 44, 64),
    (item_set_slot, 298, 45, 24),
    (item_set_slot, 299, 1501, 2600),
    (item_set_slot, 299, 1500, 10),
    (item_set_slot, 299, 1502, 1),
    (item_set_slot, 299, 1508, 29),
    (item_set_slot, 299, 41, 0),
    (item_set_slot, 299, 44, 51),
    (item_set_slot, 299, 45, 20),
    (item_set_slot, 300, 1501, 2600),
    (item_set_slot, 300, 1500, 10),
    (item_set_slot, 300, 1502, 1),
    (item_set_slot, 300, 1508, 29),
    (item_set_slot, 300, 41, 0),
    (item_set_slot, 300, 44, 51),
    (item_set_slot, 300, 45, 20),
    (item_set_slot, 301, 1501, 2600),
    (item_set_slot, 301, 1500, 10),
    (item_set_slot, 301, 1502, 1),
    (item_set_slot, 301, 1508, 29),
    (item_set_slot, 301, 41, 0),
    (item_set_slot, 301, 44, 51),
    (item_set_slot, 301, 45, 20),
    (item_set_slot, 302, 1501, 2600),
    (item_set_slot, 302, 1500, 10),
    (item_set_slot, 302, 1502, 1),
    (item_set_slot, 302, 1508, 29),
    (item_set_slot, 302, 41, 0),
    (item_set_slot, 302, 44, 51),
    (item_set_slot, 302, 45, 20),
    (item_set_slot, 303, 1501, 2600),
    (item_set_slot, 303, 1500, 10),
    (item_set_slot, 303, 1502, 1),
    (item_set_slot, 303, 1508, 29),
    (item_set_slot, 303, 41, 0),
    (item_set_slot, 303, 44, 51),
    (item_set_slot, 303, 45, 20),
    (item_set_slot, 304, 1501, 2600),
    (item_set_slot, 304, 1500, 3),
    (item_set_slot, 304, 1502, 1),
    (item_set_slot, 304, 1508, 29),
    (item_set_slot, 304, 41, 0),
    (item_set_slot, 304, 44, 51),
    (item_set_slot, 304, 45, 20),
    (item_set_slot, 305, 1501, 2600),
    (item_set_slot, 305, 1500, 3),
    (item_set_slot, 305, 1502, 1),
    (item_set_slot, 305, 1508, 29),
    (item_set_slot, 305, 41, 0),
    (item_set_slot, 305, 44, 51),
    (item_set_slot, 305, 45, 20),
    (item_set_slot, 306, 1501, 2600),
    (item_set_slot, 306, 1500, 3),
    (item_set_slot, 306, 1502, 1),
    (item_set_slot, 306, 1508, 29),
    (item_set_slot, 306, 41, 0),
    (item_set_slot, 306, 44, 51),
    (item_set_slot, 306, 45, 20),
    (item_set_slot, 307, 1501, 2600),
    (item_set_slot, 307, 1500, 3),
    (item_set_slot, 307, 1502, 1),
    (item_set_slot, 307, 1508, 29),
    (item_set_slot, 307, 41, 0),
    (item_set_slot, 307, 44, 51),
    (item_set_slot, 307, 45, 20),
    (item_set_slot, 308, 1501, 3100),
    (item_set_slot, 308, 1500, 12),
    (item_set_slot, 308, 1502, 1),
    (item_set_slot, 308, 1508, 29),
    (item_set_slot, 308, 41, 0),
    (item_set_slot, 308, 44, 64),
    (item_set_slot, 308, 45, 24),
    (item_set_slot, 309, 1501, 3100),
    (item_set_slot, 309, 1500, 12),
    (item_set_slot, 309, 1502, 1),
    (item_set_slot, 309, 1508, 29),
    (item_set_slot, 309, 41, 0),
    (item_set_slot, 309, 44, 64),
    (item_set_slot, 309, 45, 24),
    (item_set_slot, 310, 1501, 3100),
    (item_set_slot, 310, 1500, 12),
    (item_set_slot, 310, 1502, 1),
    (item_set_slot, 310, 1508, 29),
    (item_set_slot, 310, 41, 0),
    (item_set_slot, 310, 44, 64),
    (item_set_slot, 310, 45, 24),
    (item_set_slot, 311, 1501, 3100),
    (item_set_slot, 311, 1500, 12),
    (item_set_slot, 311, 1502, 1),
    (item_set_slot, 311, 1508, 29),
    (item_set_slot, 311, 41, 0),
    (item_set_slot, 311, 44, 64),
    (item_set_slot, 311, 45, 24),
    (item_set_slot, 312, 1501, 3100),
    (item_set_slot, 312, 1500, 12),
    (item_set_slot, 312, 1502, 1),
    (item_set_slot, 312, 1508, 29),
    (item_set_slot, 312, 41, 0),
    (item_set_slot, 312, 44, 64),
    (item_set_slot, 312, 45, 24),
    (item_set_slot, 313, 1501, 3100),
    (item_set_slot, 313, 1500, 12),
    (item_set_slot, 313, 1502, 1),
    (item_set_slot, 313, 1508, 29),
    (item_set_slot, 313, 41, 0),
    (item_set_slot, 313, 44, 64),
    (item_set_slot, 313, 45, 24),
    (item_set_slot, 314, 1501, 3100),
    (item_set_slot, 314, 1500, 12),
    (item_set_slot, 314, 1502, 1),
    (item_set_slot, 314, 1508, 29),
    (item_set_slot, 314, 41, 0),
    (item_set_slot, 314, 44, 64),
    (item_set_slot, 314, 45, 24),
    (item_set_slot, 315, 1501, 3100),
    (item_set_slot, 315, 1500, 12),
    (item_set_slot, 315, 1502, 1),
    (item_set_slot, 315, 1508, 29),
    (item_set_slot, 315, 41, 0),
    (item_set_slot, 315, 44, 64),
    (item_set_slot, 315, 45, 24),
    (item_set_slot, 316, 1501, 3100),
    (item_set_slot, 316, 1500, 12),
    (item_set_slot, 316, 1502, 1),
    (item_set_slot, 316, 1508, 29),
    (item_set_slot, 316, 41, 0),
    (item_set_slot, 316, 44, 64),
    (item_set_slot, 316, 45, 24),
    (item_set_slot, 317, 1501, 3100),
    (item_set_slot, 317, 1500, 12),
    (item_set_slot, 317, 1502, 1),
    (item_set_slot, 317, 1508, 29),
    (item_set_slot, 317, 41, 0),
    (item_set_slot, 317, 44, 64),
    (item_set_slot, 317, 45, 24),
    (item_set_slot, 318, 1501, 3100),
    (item_set_slot, 318, 1500, 12),
    (item_set_slot, 318, 1502, 1),
    (item_set_slot, 318, 1508, 29),
    (item_set_slot, 318, 41, 0),
    (item_set_slot, 318, 44, 64),
    (item_set_slot, 318, 45, 24),
    (item_set_slot, 319, 1501, 3100),
    (item_set_slot, 319, 1500, 12),
    (item_set_slot, 319, 1502, 1),
    (item_set_slot, 319, 1508, 29),
    (item_set_slot, 319, 41, 0),
    (item_set_slot, 319, 44, 64),
    (item_set_slot, 319, 45, 24),
    (item_set_slot, 320, 1501, 3100),
    (item_set_slot, 320, 1500, 12),
    (item_set_slot, 320, 1502, 1),
    (item_set_slot, 320, 1508, 29),
    (item_set_slot, 320, 41, 0),
    (item_set_slot, 320, 44, 64),
    (item_set_slot, 320, 45, 24),
    (item_set_slot, 321, 1501, 3100),
    (item_set_slot, 321, 1500, 12),
    (item_set_slot, 321, 1502, 1),
    (item_set_slot, 321, 1508, 29),
    (item_set_slot, 321, 41, 0),
    (item_set_slot, 321, 44, 64),
    (item_set_slot, 321, 45, 24),
    (item_set_slot, 322, 1501, 3100),
    (item_set_slot, 322, 1500, 12),
    (item_set_slot, 322, 1502, 1),
    (item_set_slot, 322, 1508, 29),
    (item_set_slot, 322, 41, 0),
    (item_set_slot, 322, 44, 64),
    (item_set_slot, 322, 45, 24),
    (item_set_slot, 323, 1501, 3100),
    (item_set_slot, 323, 1500, 12),
    (item_set_slot, 323, 1502, 1),
    (item_set_slot, 323, 1508, 29),
    (item_set_slot, 323, 41, 0),
    (item_set_slot, 323, 44, 64),
    (item_set_slot, 323, 45, 24),
    (item_set_slot, 324, 1501, 3100),
    (item_set_slot, 324, 1500, 12),
    (item_set_slot, 324, 1502, 1),
    (item_set_slot, 324, 1508, 29),
    (item_set_slot, 324, 41, 0),
    (item_set_slot, 324, 44, 64),
    (item_set_slot, 324, 45, 24),
    (item_set_slot, 325, 1501, 3100),
    (item_set_slot, 325, 1500, 12),
    (item_set_slot, 325, 1502, 1),
    (item_set_slot, 325, 1508, 29),
    (item_set_slot, 325, 41, 0),
    (item_set_slot, 325, 44, 64),
    (item_set_slot, 325, 45, 24),
    (item_set_slot, 326, 1501, 3100),
    (item_set_slot, 326, 1500, 12),
    (item_set_slot, 326, 1502, 1),
    (item_set_slot, 326, 1508, 29),
    (item_set_slot, 326, 41, 0),
    (item_set_slot, 326, 44, 64),
    (item_set_slot, 326, 45, 24),
    (item_set_slot, 327, 1501, 3100),
    (item_set_slot, 327, 1500, 12),
    (item_set_slot, 327, 1502, 1),
    (item_set_slot, 327, 1508, 29),
    (item_set_slot, 327, 41, 0),
    (item_set_slot, 327, 44, 64),
    (item_set_slot, 327, 45, 24),
    (item_set_slot, 328, 1501, 3100),
    (item_set_slot, 328, 1500, 12),
    (item_set_slot, 328, 1502, 1),
    (item_set_slot, 328, 1508, 29),
    (item_set_slot, 328, 41, 0),
    (item_set_slot, 328, 44, 64),
    (item_set_slot, 328, 45, 24),
    (item_set_slot, 329, 1501, 3100),
    (item_set_slot, 329, 1500, 12),
    (item_set_slot, 329, 1502, 1),
    (item_set_slot, 329, 1508, 29),
    (item_set_slot, 329, 41, 0),
    (item_set_slot, 329, 44, 64),
    (item_set_slot, 329, 45, 24),
    (item_set_slot, 330, 1501, 3100),
    (item_set_slot, 330, 1500, 12),
    (item_set_slot, 330, 1502, 1),
    (item_set_slot, 330, 1508, 29),
    (item_set_slot, 330, 41, 0),
    (item_set_slot, 330, 44, 64),
    (item_set_slot, 330, 45, 24),
    (item_set_slot, 331, 1501, 3100),
    (item_set_slot, 331, 1500, 12),
    (item_set_slot, 331, 1502, 1),
    (item_set_slot, 331, 1508, 29),
    (item_set_slot, 331, 41, 0),
    (item_set_slot, 331, 44, 64),
    (item_set_slot, 331, 45, 24),
    (item_set_slot, 332, 1501, 3100),
    (item_set_slot, 332, 1500, 12),
    (item_set_slot, 332, 1502, 1),
    (item_set_slot, 332, 1508, 29),
    (item_set_slot, 332, 41, 0),
    (item_set_slot, 332, 44, 64),
    (item_set_slot, 332, 45, 24),
    (item_set_slot, 333, 1501, 3100),
    (item_set_slot, 333, 1500, 12),
    (item_set_slot, 333, 1502, 1),
    (item_set_slot, 333, 1508, 29),
    (item_set_slot, 333, 41, 0),
    (item_set_slot, 333, 44, 64),
    (item_set_slot, 333, 45, 24),
    (item_set_slot, 334, 1501, 3100),
    (item_set_slot, 334, 1500, 12),
    (item_set_slot, 334, 1502, 1),
    (item_set_slot, 334, 1508, 29),
    (item_set_slot, 334, 41, 0),
    (item_set_slot, 334, 44, 64),
    (item_set_slot, 334, 45, 24),
    (item_set_slot, 335, 1501, 3100),
    (item_set_slot, 335, 1500, 12),
    (item_set_slot, 335, 1502, 1),
    (item_set_slot, 335, 1508, 29),
    (item_set_slot, 335, 41, 0),
    (item_set_slot, 335, 44, 64),
    (item_set_slot, 335, 45, 24),
    (item_set_slot, 336, 1501, 3100),
    (item_set_slot, 336, 1500, 12),
    (item_set_slot, 336, 1502, 1),
    (item_set_slot, 336, 1508, 29),
    (item_set_slot, 336, 41, 0),
    (item_set_slot, 336, 44, 64),
    (item_set_slot, 336, 45, 24),
    (item_set_slot, 337, 1501, 3100),
    (item_set_slot, 337, 1500, 12),
    (item_set_slot, 337, 1502, 1),
    (item_set_slot, 337, 1508, 29),
    (item_set_slot, 337, 41, 0),
    (item_set_slot, 337, 44, 64),
    (item_set_slot, 337, 45, 24),
    (item_set_slot, 338, 1501, 3100),
    (item_set_slot, 338, 1500, 12),
    (item_set_slot, 338, 1502, 1),
    (item_set_slot, 338, 1508, 29),
    (item_set_slot, 338, 41, 0),
    (item_set_slot, 338, 44, 64),
    (item_set_slot, 338, 45, 24),
    (item_set_slot, 339, 1501, 3100),
    (item_set_slot, 339, 1500, 12),
    (item_set_slot, 339, 1502, 1),
    (item_set_slot, 339, 1508, 29),
    (item_set_slot, 339, 41, 0),
    (item_set_slot, 339, 44, 64),
    (item_set_slot, 339, 45, 24),
    (item_set_slot, 340, 1501, 3100),
    (item_set_slot, 340, 1500, 12),
    (item_set_slot, 340, 1502, 1),
    (item_set_slot, 340, 1508, 29),
    (item_set_slot, 340, 41, 0),
    (item_set_slot, 340, 44, 64),
    (item_set_slot, 340, 45, 24),
    (item_set_slot, 341, 1501, 3100),
    (item_set_slot, 341, 1500, 12),
    (item_set_slot, 341, 1502, 1),
    (item_set_slot, 341, 1508, 29),
    (item_set_slot, 341, 41, 0),
    (item_set_slot, 341, 44, 64),
    (item_set_slot, 341, 45, 24),
    (item_set_slot, 342, 1501, 3100),
    (item_set_slot, 342, 1500, 12),
    (item_set_slot, 342, 1502, 1),
    (item_set_slot, 342, 1508, 29),
    (item_set_slot, 342, 41, 0),
    (item_set_slot, 342, 44, 64),
    (item_set_slot, 342, 45, 24),
    (item_set_slot, 343, 1501, 3100),
    (item_set_slot, 343, 1500, 12),
    (item_set_slot, 343, 1502, 1),
    (item_set_slot, 343, 1508, 29),
    (item_set_slot, 343, 41, 0),
    (item_set_slot, 343, 44, 64),
    (item_set_slot, 343, 45, 24),
    (item_set_slot, 344, 1501, 3100),
    (item_set_slot, 344, 1500, 12),
    (item_set_slot, 344, 1502, 1),
    (item_set_slot, 344, 1508, 29),
    (item_set_slot, 344, 41, 0),
    (item_set_slot, 344, 44, 64),
    (item_set_slot, 344, 45, 24),
    (item_set_slot, 345, 1501, 3100),
    (item_set_slot, 345, 1500, 12),
    (item_set_slot, 345, 1502, 1),
    (item_set_slot, 345, 1508, 29),
    (item_set_slot, 345, 41, 0),
    (item_set_slot, 345, 44, 64),
    (item_set_slot, 345, 45, 24),
    (item_set_slot, 346, 1501, 3100),
    (item_set_slot, 346, 1500, 12),
    (item_set_slot, 346, 1502, 1),
    (item_set_slot, 346, 1508, 29),
    (item_set_slot, 346, 41, 0),
    (item_set_slot, 346, 44, 64),
    (item_set_slot, 346, 45, 24),
    (item_set_slot, 347, 1501, 3100),
    (item_set_slot, 347, 1500, 12),
    (item_set_slot, 347, 1502, 1),
    (item_set_slot, 347, 1508, 29),
    (item_set_slot, 347, 41, 0),
    (item_set_slot, 347, 44, 64),
    (item_set_slot, 347, 45, 24),
    (item_set_slot, 348, 1501, 3100),
    (item_set_slot, 348, 1500, 12),
    (item_set_slot, 348, 1502, 1),
    (item_set_slot, 348, 1508, 29),
    (item_set_slot, 348, 41, 0),
    (item_set_slot, 348, 44, 64),
    (item_set_slot, 348, 45, 24),
    (item_set_slot, 349, 1501, 3100),
    (item_set_slot, 349, 1500, 12),
    (item_set_slot, 349, 1502, 1),
    (item_set_slot, 349, 1508, 29),
    (item_set_slot, 349, 41, 0),
    (item_set_slot, 349, 44, 64),
    (item_set_slot, 349, 45, 24),
    (item_set_slot, 350, 1501, 3100),
    (item_set_slot, 350, 1500, 12),
    (item_set_slot, 350, 1502, 1),
    (item_set_slot, 350, 1508, 29),
    (item_set_slot, 350, 41, 0),
    (item_set_slot, 350, 44, 64),
    (item_set_slot, 350, 45, 24),
    (item_set_slot, 351, 1501, 3100),
    (item_set_slot, 351, 1500, 12),
    (item_set_slot, 351, 1502, 1),
    (item_set_slot, 351, 1508, 29),
    (item_set_slot, 351, 41, 0),
    (item_set_slot, 351, 44, 64),
    (item_set_slot, 351, 45, 24),
    (item_set_slot, 352, 1501, 3100),
    (item_set_slot, 352, 1500, 12),
    (item_set_slot, 352, 1502, 1),
    (item_set_slot, 352, 1508, 29),
    (item_set_slot, 352, 41, 0),
    (item_set_slot, 352, 44, 64),
    (item_set_slot, 352, 45, 24),
    (item_set_slot, 353, 1501, 3100),
    (item_set_slot, 353, 1500, 12),
    (item_set_slot, 353, 1502, 1),
    (item_set_slot, 353, 1508, 29),
    (item_set_slot, 353, 41, 0),
    (item_set_slot, 353, 44, 64),
    (item_set_slot, 353, 45, 24),
    (item_set_slot, 354, 1501, 3100),
    (item_set_slot, 354, 1500, 12),
    (item_set_slot, 354, 1502, 1),
    (item_set_slot, 354, 1508, 29),
    (item_set_slot, 354, 41, 0),
    (item_set_slot, 354, 44, 64),
    (item_set_slot, 354, 45, 24),
    (item_set_slot, 355, 1501, 3100),
    (item_set_slot, 355, 1500, 12),
    (item_set_slot, 355, 1502, 1),
    (item_set_slot, 355, 1508, 29),
    (item_set_slot, 355, 41, 0),
    (item_set_slot, 355, 44, 64),
    (item_set_slot, 355, 45, 24),
    (item_set_slot, 356, 1501, 3100),
    (item_set_slot, 356, 1500, 12),
    (item_set_slot, 356, 1502, 1),
    (item_set_slot, 356, 1508, 29),
    (item_set_slot, 356, 41, 0),
    (item_set_slot, 356, 44, 64),
    (item_set_slot, 356, 45, 24),
    (item_set_slot, 357, 1501, 3100),
    (item_set_slot, 357, 1500, 12),
    (item_set_slot, 357, 1502, 1),
    (item_set_slot, 357, 1508, 29),
    (item_set_slot, 357, 41, 0),
    (item_set_slot, 357, 44, 64),
    (item_set_slot, 357, 45, 24),
    (item_set_slot, 358, 1501, 3100),
    (item_set_slot, 358, 1500, 12),
    (item_set_slot, 358, 1502, 1),
    (item_set_slot, 358, 1508, 29),
    (item_set_slot, 358, 41, 0),
    (item_set_slot, 358, 44, 64),
    (item_set_slot, 358, 45, 24),
    (item_set_slot, 359, 1501, 3100),
    (item_set_slot, 359, 1500, 12),
    (item_set_slot, 359, 1502, 1),
    (item_set_slot, 359, 1508, 29),
    (item_set_slot, 359, 41, 0),
    (item_set_slot, 359, 44, 64),
    (item_set_slot, 359, 45, 24),
    (item_set_slot, 360, 1501, 3100),
    (item_set_slot, 360, 1500, 12),
    (item_set_slot, 360, 1502, 1),
    (item_set_slot, 360, 1508, 29),
    (item_set_slot, 360, 41, 0),
    (item_set_slot, 360, 44, 64),
    (item_set_slot, 360, 45, 24),
    (item_set_slot, 361, 1501, 3100),
    (item_set_slot, 361, 1500, 12),
    (item_set_slot, 361, 1502, 1),
    (item_set_slot, 361, 1508, 29),
    (item_set_slot, 361, 41, 0),
    (item_set_slot, 361, 44, 64),
    (item_set_slot, 361, 45, 24),
    (item_set_slot, 362, 1501, 3100),
    (item_set_slot, 362, 1500, 12),
    (item_set_slot, 362, 1502, 1),
    (item_set_slot, 362, 1508, 29),
    (item_set_slot, 362, 41, 0),
    (item_set_slot, 362, 44, 64),
    (item_set_slot, 362, 45, 24),
    (item_set_slot, 363, 1501, 3100),
    (item_set_slot, 363, 1500, 12),
    (item_set_slot, 363, 1502, 1),
    (item_set_slot, 363, 1508, 29),
    (item_set_slot, 363, 41, 0),
    (item_set_slot, 363, 44, 64),
    (item_set_slot, 363, 45, 24),
    (item_set_slot, 364, 1501, 3100),
    (item_set_slot, 364, 1500, 12),
    (item_set_slot, 364, 1502, 1),
    (item_set_slot, 364, 1508, 29),
    (item_set_slot, 364, 41, 0),
    (item_set_slot, 364, 44, 64),
    (item_set_slot, 364, 45, 24),
    (item_set_slot, 365, 1501, 3100),
    (item_set_slot, 365, 1500, 12),
    (item_set_slot, 365, 1502, 1),
    (item_set_slot, 365, 1508, 29),
    (item_set_slot, 365, 41, 0),
    (item_set_slot, 365, 44, 64),
    (item_set_slot, 365, 45, 24),
    (item_set_slot, 366, 1501, 3100),
    (item_set_slot, 366, 1500, 12),
    (item_set_slot, 366, 1502, 1),
    (item_set_slot, 366, 1508, 29),
    (item_set_slot, 366, 41, 0),
    (item_set_slot, 366, 44, 64),
    (item_set_slot, 366, 45, 24),
    (item_set_slot, 367, 1501, 3100),
    (item_set_slot, 367, 1500, 12),
    (item_set_slot, 367, 1502, 1),
    (item_set_slot, 367, 1508, 29),
    (item_set_slot, 367, 41, 0),
    (item_set_slot, 367, 44, 64),
    (item_set_slot, 367, 45, 24),
    (item_set_slot, 368, 1501, 3100),
    (item_set_slot, 368, 1500, 12),
    (item_set_slot, 368, 1502, 1),
    (item_set_slot, 368, 1508, 29),
    (item_set_slot, 368, 41, 0),
    (item_set_slot, 368, 44, 64),
    (item_set_slot, 368, 45, 24),
    (item_set_slot, 369, 1501, 3100),
    (item_set_slot, 369, 1500, 12),
    (item_set_slot, 369, 1502, 1),
    (item_set_slot, 369, 1508, 29),
    (item_set_slot, 369, 41, 0),
    (item_set_slot, 369, 44, 64),
    (item_set_slot, 369, 45, 24),
    (item_set_slot, 370, 1501, 3100),
    (item_set_slot, 370, 1500, 12),
    (item_set_slot, 370, 1502, 1),
    (item_set_slot, 370, 1508, 29),
    (item_set_slot, 370, 41, 0),
    (item_set_slot, 370, 44, 64),
    (item_set_slot, 370, 45, 24),
    (item_set_slot, 371, 1501, 3100),
    (item_set_slot, 371, 1500, 12),
    (item_set_slot, 371, 1502, 1),
    (item_set_slot, 371, 1508, 29),
    (item_set_slot, 371, 41, 0),
    (item_set_slot, 371, 44, 64),
    (item_set_slot, 371, 45, 24),
    (item_set_slot, 372, 1501, 3100),
    (item_set_slot, 372, 1500, 12),
    (item_set_slot, 372, 1502, 1),
    (item_set_slot, 372, 1508, 29),
    (item_set_slot, 372, 41, 0),
    (item_set_slot, 372, 44, 64),
    (item_set_slot, 372, 45, 24),
    (item_set_slot, 373, 1501, 3100),
    (item_set_slot, 373, 1500, 12),
    (item_set_slot, 373, 1502, 1),
    (item_set_slot, 373, 1508, 29),
    (item_set_slot, 373, 41, 0),
    (item_set_slot, 373, 44, 64),
    (item_set_slot, 373, 45, 24),
    (item_set_slot, 374, 1501, 3100),
    (item_set_slot, 374, 1500, 12),
    (item_set_slot, 374, 1502, 1),
    (item_set_slot, 374, 1508, 29),
    (item_set_slot, 374, 41, 0),
    (item_set_slot, 374, 44, 64),
    (item_set_slot, 374, 45, 24),
    (item_set_slot, 375, 1501, 3100),
    (item_set_slot, 375, 1500, 12),
    (item_set_slot, 375, 1502, 1),
    (item_set_slot, 375, 1508, 29),
    (item_set_slot, 375, 41, 0),
    (item_set_slot, 375, 44, 64),
    (item_set_slot, 375, 45, 24),
    (item_set_slot, 376, 1501, 3100),
    (item_set_slot, 376, 1500, 12),
    (item_set_slot, 376, 1502, 1),
    (item_set_slot, 376, 1508, 29),
    (item_set_slot, 376, 41, 0),
    (item_set_slot, 376, 44, 64),
    (item_set_slot, 376, 45, 24),
    (item_set_slot, 377, 1501, 2100),
    (item_set_slot, 377, 1500, 9),
    (item_set_slot, 377, 1502, 1),
    (item_set_slot, 377, 1508, 29),
    (item_set_slot, 377, 41, 0),
    (item_set_slot, 377, 44, 41),
    (item_set_slot, 377, 45, 17),
    (item_set_slot, 378, 1501, 3100),
    (item_set_slot, 378, 1500, 12),
    (item_set_slot, 378, 1502, 1),
    (item_set_slot, 378, 1508, 29),
    (item_set_slot, 378, 41, 0),
    (item_set_slot, 378, 44, 64),
    (item_set_slot, 378, 45, 24),
    (item_set_slot, 379, 1501, 2600),
    (item_set_slot, 379, 1500, 10),
    (item_set_slot, 379, 1502, 1),
    (item_set_slot, 379, 1508, 29),
    (item_set_slot, 379, 41, 0),
    (item_set_slot, 379, 44, 51),
    (item_set_slot, 379, 45, 20),
    (item_set_slot, 380, 1501, 3100),
    (item_set_slot, 380, 1500, 12),
    (item_set_slot, 380, 1502, 1),
    (item_set_slot, 380, 1508, 29),
    (item_set_slot, 380, 41, 0),
    (item_set_slot, 380, 44, 64),
    (item_set_slot, 380, 45, 24),
    (item_set_slot, 381, 1501, 3100),
    (item_set_slot, 381, 1500, 12),
    (item_set_slot, 381, 1502, 1),
    (item_set_slot, 381, 1508, 29),
    (item_set_slot, 381, 41, 0),
    (item_set_slot, 381, 44, 64),
    (item_set_slot, 381, 45, 24),
    (item_set_slot, 382, 1501, 3100),
    (item_set_slot, 382, 1500, 12),
    (item_set_slot, 382, 1502, 1),
    (item_set_slot, 382, 1508, 29),
    (item_set_slot, 382, 41, 0),
    (item_set_slot, 382, 44, 64),
    (item_set_slot, 382, 45, 24),
    (item_set_slot, 383, 1501, 3100),
    (item_set_slot, 383, 1500, 12),
    (item_set_slot, 383, 1502, 1),
    (item_set_slot, 383, 1508, 29),
    (item_set_slot, 383, 41, 0),
    (item_set_slot, 383, 44, 64),
    (item_set_slot, 383, 45, 24),
    (item_set_slot, 384, 1501, 3100),
    (item_set_slot, 384, 1500, 12),
    (item_set_slot, 384, 1502, 1),
    (item_set_slot, 384, 1508, 29),
    (item_set_slot, 384, 41, 0),
    (item_set_slot, 384, 44, 64),
    (item_set_slot, 384, 45, 24),
    (item_set_slot, 385, 1501, 3100),
    (item_set_slot, 385, 1500, 12),
    (item_set_slot, 385, 1502, 1),
    (item_set_slot, 385, 1508, 29),
    (item_set_slot, 385, 41, 0),
    (item_set_slot, 385, 44, 64),
    (item_set_slot, 385, 45, 24),
    (item_set_slot, 386, 1501, 3100),
    (item_set_slot, 386, 1500, 12),
    (item_set_slot, 386, 1502, 1),
    (item_set_slot, 386, 1508, 29),
    (item_set_slot, 386, 41, 0),
    (item_set_slot, 386, 44, 64),
    (item_set_slot, 386, 45, 24),
    (item_set_slot, 387, 1501, 3100),
    (item_set_slot, 387, 1500, 12),
    (item_set_slot, 387, 1502, 1),
    (item_set_slot, 387, 1508, 29),
    (item_set_slot, 387, 41, 0),
    (item_set_slot, 387, 44, 64),
    (item_set_slot, 387, 45, 24),
    (item_set_slot, 388, 1501, 3100),
    (item_set_slot, 388, 1500, 12),
    (item_set_slot, 388, 1502, 1),
    (item_set_slot, 388, 1508, 29),
    (item_set_slot, 388, 41, 0),
    (item_set_slot, 388, 44, 64),
    (item_set_slot, 388, 45, 24),
    (item_set_slot, 389, 1501, 3100),
    (item_set_slot, 389, 1500, 12),
    (item_set_slot, 389, 1502, 1),
    (item_set_slot, 389, 1508, 29),
    (item_set_slot, 389, 41, 0),
    (item_set_slot, 389, 44, 64),
    (item_set_slot, 389, 45, 24),
    (item_set_slot, 390, 1501, 3100),
    (item_set_slot, 390, 1500, 12),
    (item_set_slot, 390, 1502, 1),
    (item_set_slot, 390, 1508, 29),
    (item_set_slot, 390, 41, 0),
    (item_set_slot, 390, 44, 64),
    (item_set_slot, 390, 45, 24),
    (item_set_slot, 391, 1501, 3100),
    (item_set_slot, 391, 1500, 12),
    (item_set_slot, 391, 1502, 1),
    (item_set_slot, 391, 1508, 29),
    (item_set_slot, 391, 41, 0),
    (item_set_slot, 391, 44, 64),
    (item_set_slot, 391, 45, 24),
    (item_set_slot, 392, 1501, 3100),
    (item_set_slot, 392, 1500, 12),
    (item_set_slot, 392, 1502, 1),
    (item_set_slot, 392, 1508, 29),
    (item_set_slot, 392, 41, 0),
    (item_set_slot, 392, 44, 64),
    (item_set_slot, 392, 45, 24),
    (item_set_slot, 393, 1501, 3100),
    (item_set_slot, 393, 1500, 12),
    (item_set_slot, 393, 1502, 1),
    (item_set_slot, 393, 1508, 29),
    (item_set_slot, 393, 41, 0),
    (item_set_slot, 393, 44, 64),
    (item_set_slot, 393, 45, 24),
    (item_set_slot, 394, 1501, 3100),
    (item_set_slot, 394, 1500, 12),
    (item_set_slot, 394, 1502, 1),
    (item_set_slot, 394, 1508, 29),
    (item_set_slot, 394, 41, 0),
    (item_set_slot, 394, 44, 64),
    (item_set_slot, 394, 45, 24),
    (item_set_slot, 395, 1501, 3100),
    (item_set_slot, 395, 1500, 12),
    (item_set_slot, 395, 1502, 1),
    (item_set_slot, 395, 1508, 29),
    (item_set_slot, 395, 41, 0),
    (item_set_slot, 395, 44, 64),
    (item_set_slot, 395, 45, 24),
    (item_set_slot, 396, 1501, 3100),
    (item_set_slot, 396, 1500, 12),
    (item_set_slot, 396, 1502, 1),
    (item_set_slot, 396, 1508, 29),
    (item_set_slot, 396, 41, 0),
    (item_set_slot, 396, 44, 64),
    (item_set_slot, 396, 45, 24),
    (item_set_slot, 397, 1501, 3100),
    (item_set_slot, 397, 1500, 12),
    (item_set_slot, 397, 1502, 1),
    (item_set_slot, 397, 1508, 29),
    (item_set_slot, 397, 41, 0),
    (item_set_slot, 397, 44, 64),
    (item_set_slot, 397, 45, 24),
    (item_set_slot, 398, 1501, 3100),
    (item_set_slot, 398, 1500, 12),
    (item_set_slot, 398, 1502, 1),
    (item_set_slot, 398, 1508, 29),
    (item_set_slot, 398, 41, 0),
    (item_set_slot, 398, 44, 64),
    (item_set_slot, 398, 45, 24),
    (item_set_slot, 399, 1501, 3100),
    (item_set_slot, 399, 1500, 12),
    (item_set_slot, 399, 1502, 1),
    (item_set_slot, 399, 1508, 29),
    (item_set_slot, 399, 41, 0),
    (item_set_slot, 399, 44, 64),
    (item_set_slot, 399, 45, 24),
    (item_set_slot, 400, 1501, 2500),
    (item_set_slot, 400, 1500, 9),
    (item_set_slot, 400, 1508, 27),
    (item_set_slot, 400, 41, 0),
    (item_set_slot, 400, 44, 74),
    (item_set_slot, 400, 45, 33),
    (item_set_slot, 401, 1501, 3100),
    (item_set_slot, 401, 1500, 12),
    (item_set_slot, 401, 1502, 1),
    (item_set_slot, 401, 1508, 29),
    (item_set_slot, 401, 41, 0),
    (item_set_slot, 401, 44, 64),
    (item_set_slot, 401, 45, 24),
    (item_set_slot, 402, 1501, 3100),
    (item_set_slot, 402, 1500, 12),
    (item_set_slot, 402, 1502, 1),
    (item_set_slot, 402, 1508, 29),
    (item_set_slot, 402, 41, 0),
    (item_set_slot, 402, 44, 64),
    (item_set_slot, 402, 45, 24),
    (item_set_slot, 403, 1501, 3100),
    (item_set_slot, 403, 1500, 12),
    (item_set_slot, 403, 1502, 1),
    (item_set_slot, 403, 1508, 29),
    (item_set_slot, 403, 41, 0),
    (item_set_slot, 403, 44, 64),
    (item_set_slot, 403, 45, 24),
    (item_set_slot, 404, 1501, 3100),
    (item_set_slot, 404, 1500, 12),
    (item_set_slot, 404, 1502, 1),
    (item_set_slot, 404, 1508, 29),
    (item_set_slot, 404, 41, 0),
    (item_set_slot, 404, 44, 64),
    (item_set_slot, 404, 45, 24),
    (item_set_slot, 405, 1501, 3100),
    (item_set_slot, 405, 1500, 12),
    (item_set_slot, 405, 1502, 1),
    (item_set_slot, 405, 1508, 29),
    (item_set_slot, 405, 41, 0),
    (item_set_slot, 405, 44, 64),
    (item_set_slot, 405, 45, 24),
    (item_set_slot, 406, 1501, 2100),
    (item_set_slot, 406, 1500, 9),
    (item_set_slot, 406, 1502, 1),
    (item_set_slot, 406, 1508, 29),
    (item_set_slot, 406, 41, 0),
    (item_set_slot, 406, 44, 41),
    (item_set_slot, 406, 45, 17),
    (item_set_slot, 407, 1501, 2100),
    (item_set_slot, 407, 1500, 9),
    (item_set_slot, 407, 1502, 1),
    (item_set_slot, 407, 1508, 29),
    (item_set_slot, 407, 41, 0),
    (item_set_slot, 407, 44, 41),
    (item_set_slot, 407, 45, 17),
    (item_set_slot, 408, 1501, 1800),
    (item_set_slot, 408, 1500, 8),
    (item_set_slot, 408, 1502, 0),
    (item_set_slot, 408, 1508, 26),
    (item_set_slot, 408, 41, 0),
    (item_set_slot, 408, 44, 33),
    (item_set_slot, 408, 45, 14),
    (item_set_slot, 409, 1501, 1400),
    (item_set_slot, 409, 1500, 5),
    (item_set_slot, 409, 1502, 0),
    (item_set_slot, 409, 1508, 26),
    (item_set_slot, 409, 41, 0),
    (item_set_slot, 409, 44, 26),
    (item_set_slot, 409, 45, 12),
    (item_set_slot, 410, 1501, 1400),
    (item_set_slot, 410, 1500, 5),
    (item_set_slot, 410, 1502, 0),
    (item_set_slot, 410, 1508, 26),
    (item_set_slot, 410, 41, 0),
    (item_set_slot, 410, 44, 26),
    (item_set_slot, 410, 45, 12),
    (item_set_slot, 411, 1501, 1800),
    (item_set_slot, 411, 1500, 8),
    (item_set_slot, 411, 1502, 1),
    (item_set_slot, 411, 1508, 29),
    (item_set_slot, 411, 41, 0),
    (item_set_slot, 411, 44, 33),
    (item_set_slot, 411, 45, 14),
    (item_set_slot, 412, 1501, 1400),
    (item_set_slot, 412, 1500, 5),
    (item_set_slot, 412, 1502, 0),
    (item_set_slot, 412, 1508, 26),
    (item_set_slot, 412, 41, 0),
    (item_set_slot, 412, 44, 26),
    (item_set_slot, 412, 45, 12),
    (item_set_slot, 413, 1501, 1400),
    (item_set_slot, 413, 1500, 5),
    (item_set_slot, 413, 1502, 0),
    (item_set_slot, 413, 1508, 26),
    (item_set_slot, 413, 41, 0),
    (item_set_slot, 413, 44, 26),
    (item_set_slot, 413, 45, 12),
    (item_set_slot, 414, 1501, 3600),
    (item_set_slot, 414, 1500, 14),
    (item_set_slot, 414, 1502, 1),
    (item_set_slot, 414, 1508, 29),
    (item_set_slot, 414, 41, 0),
    (item_set_slot, 414, 44, 80),
    (item_set_slot, 414, 45, 29),
    (item_set_slot, 415, 1501, 2100),
    (item_set_slot, 415, 1500, 9),
    (item_set_slot, 415, 1502, 1),
    (item_set_slot, 415, 1508, 29),
    (item_set_slot, 415, 41, 0),
    (item_set_slot, 415, 44, 41),
    (item_set_slot, 415, 45, 17),
    (item_set_slot, 416, 1501, 1400),
    (item_set_slot, 416, 1500, 5),
    (item_set_slot, 416, 1502, 0),
    (item_set_slot, 416, 1508, 26),
    (item_set_slot, 416, 41, 0),
    (item_set_slot, 416, 44, 26),
    (item_set_slot, 416, 45, 12),
    (item_set_slot, 417, 1501, 2100),
    (item_set_slot, 417, 1500, 9),
    (item_set_slot, 417, 1502, 1),
    (item_set_slot, 417, 1508, 29),
    (item_set_slot, 417, 41, 0),
    (item_set_slot, 417, 44, 41),
    (item_set_slot, 417, 45, 17),
    (item_set_slot, 418, 1501, 2100),
    (item_set_slot, 418, 1500, 9),
    (item_set_slot, 418, 1502, 1),
    (item_set_slot, 418, 1508, 29),
    (item_set_slot, 418, 41, 0),
    (item_set_slot, 418, 44, 41),
    (item_set_slot, 418, 45, 17),
    (item_set_slot, 419, 1501, 1400),
    (item_set_slot, 419, 1500, 5),
    (item_set_slot, 419, 1502, 0),
    (item_set_slot, 419, 1508, 26),
    (item_set_slot, 419, 41, 0),
    (item_set_slot, 419, 44, 26),
    (item_set_slot, 419, 45, 12),
    (item_set_slot, 420, 1501, 1400),
    (item_set_slot, 420, 1500, 5),
    (item_set_slot, 420, 1502, 0),
    (item_set_slot, 420, 1508, 26),
    (item_set_slot, 420, 41, 0),
    (item_set_slot, 420, 44, 26),
    (item_set_slot, 420, 45, 12),
    (item_set_slot, 421, 1501, 2100),
    (item_set_slot, 421, 1500, 9),
    (item_set_slot, 421, 1502, 1),
    (item_set_slot, 421, 1508, 29),
    (item_set_slot, 421, 41, 0),
    (item_set_slot, 421, 44, 41),
    (item_set_slot, 421, 45, 17),
    (item_set_slot, 422, 1501, 1800),
    (item_set_slot, 422, 1500, 8),
    (item_set_slot, 422, 1502, 0),
    (item_set_slot, 422, 1508, 26),
    (item_set_slot, 422, 41, 0),
    (item_set_slot, 422, 44, 33),
    (item_set_slot, 422, 45, 14),
    (item_set_slot, 423, 1501, 1400),
    (item_set_slot, 423, 1500, 5),
    (item_set_slot, 423, 1502, 0),
    (item_set_slot, 423, 1508, 26),
    (item_set_slot, 423, 41, 0),
    (item_set_slot, 423, 44, 26),
    (item_set_slot, 423, 45, 12),
    (item_set_slot, 424, 1501, 2100),
    (item_set_slot, 424, 1500, 9),
    (item_set_slot, 424, 1502, 1),
    (item_set_slot, 424, 1508, 29),
    (item_set_slot, 424, 41, 0),
    (item_set_slot, 424, 44, 41),
    (item_set_slot, 424, 45, 17),
    (item_set_slot, 425, 1501, 3100),
    (item_set_slot, 425, 1500, 12),
    (item_set_slot, 425, 1502, 1),
    (item_set_slot, 425, 1508, 29),
    (item_set_slot, 425, 41, 0),
    (item_set_slot, 425, 44, 64),
    (item_set_slot, 425, 45, 24),
    (item_set_slot, 426, 1501, 1800),
    (item_set_slot, 426, 1500, 8),
    (item_set_slot, 426, 1502, 0),
    (item_set_slot, 426, 1508, 26),
    (item_set_slot, 426, 41, 0),
    (item_set_slot, 426, 44, 33),
    (item_set_slot, 426, 45, 14),
    (item_set_slot, 427, 1501, 3100),
    (item_set_slot, 427, 1500, 12),
    (item_set_slot, 427, 1502, 1),
    (item_set_slot, 427, 1508, 29),
    (item_set_slot, 427, 41, 0),
    (item_set_slot, 427, 44, 64),
    (item_set_slot, 427, 45, 24),
    (item_set_slot, 428, 1501, 2600),
    (item_set_slot, 428, 1500, 10),
    (item_set_slot, 428, 1502, 1),
    (item_set_slot, 428, 1508, 29),
    (item_set_slot, 428, 41, 0),
    (item_set_slot, 428, 44, 51),
    (item_set_slot, 428, 45, 20),
    (item_set_slot, 429, 1501, 2600),
    (item_set_slot, 429, 1500, 10),
    (item_set_slot, 429, 1502, 0),
    (item_set_slot, 429, 1508, 26),
    (item_set_slot, 429, 41, 0),
    (item_set_slot, 429, 44, 51),
    (item_set_slot, 429, 45, 20),
    (item_set_slot, 430, 1501, 2600),
    (item_set_slot, 430, 1500, 10),
    (item_set_slot, 430, 1502, 1),
    (item_set_slot, 430, 1508, 29),
    (item_set_slot, 430, 41, 0),
    (item_set_slot, 430, 44, 51),
    (item_set_slot, 430, 45, 20),
    (item_set_slot, 431, 1501, 2100),
    (item_set_slot, 431, 1500, 9),
    (item_set_slot, 431, 1502, 1),
    (item_set_slot, 431, 1508, 29),
    (item_set_slot, 431, 41, 0),
    (item_set_slot, 431, 44, 41),
    (item_set_slot, 431, 45, 17),
    (item_set_slot, 432, 1501, 2100),
    (item_set_slot, 432, 1500, 9),
    (item_set_slot, 432, 1502, 1),
    (item_set_slot, 432, 1508, 29),
    (item_set_slot, 432, 41, 0),
    (item_set_slot, 432, 44, 41),
    (item_set_slot, 432, 45, 17),
    (item_set_slot, 433, 1501, 1800),
    (item_set_slot, 433, 1500, 8),
    (item_set_slot, 433, 1502, 0),
    (item_set_slot, 433, 1508, 26),
    (item_set_slot, 433, 41, 0),
    (item_set_slot, 433, 44, 33),
    (item_set_slot, 433, 45, 14),
    (item_set_slot, 434, 1501, 2100),
    (item_set_slot, 434, 1500, 9),
    (item_set_slot, 434, 1502, 1),
    (item_set_slot, 434, 1508, 29),
    (item_set_slot, 434, 41, 0),
    (item_set_slot, 434, 44, 41),
    (item_set_slot, 434, 45, 17),
    (item_set_slot, 435, 1501, 600),
    (item_set_slot, 435, 1500, 1),
    (item_set_slot, 435, 1502, 0),
    (item_set_slot, 435, 1508, 26),
    (item_set_slot, 435, 41, 0),
    (item_set_slot, 435, 44, 12),
    (item_set_slot, 435, 45, 5),
    (item_set_slot, 436, 1501, 1400),
    (item_set_slot, 436, 1500, 5),
    (item_set_slot, 436, 1502, 1),
    (item_set_slot, 436, 1508, 29),
    (item_set_slot, 436, 41, 0),
    (item_set_slot, 436, 44, 26),
    (item_set_slot, 436, 45, 12),
    (item_set_slot, 437, 1501, 400),
    (item_set_slot, 437, 1500, 0),
    (item_set_slot, 437, 1502, 0),
    (item_set_slot, 437, 1508, 26),
    (item_set_slot, 437, 41, 0),
    (item_set_slot, 437, 44, 9),
    (item_set_slot, 437, 45, 0),
    (item_set_slot, 438, 1501, 400),
    (item_set_slot, 438, 1500, 0),
    (item_set_slot, 438, 1502, 0),
    (item_set_slot, 438, 1508, 26),
    (item_set_slot, 438, 41, 0),
    (item_set_slot, 438, 44, 9),
    (item_set_slot, 438, 45, 0),
    (item_set_slot, 439, 1501, 400),
    (item_set_slot, 439, 1500, 0),
    (item_set_slot, 439, 1502, 0),
    (item_set_slot, 439, 1508, 26),
    (item_set_slot, 439, 41, 0),
    (item_set_slot, 439, 44, 9),
    (item_set_slot, 439, 45, 0),
    (item_set_slot, 440, 1501, 1800),
    (item_set_slot, 440, 1500, 8),
    (item_set_slot, 440, 1502, 0),
    (item_set_slot, 440, 1508, 26),
    (item_set_slot, 440, 41, 0),
    (item_set_slot, 440, 44, 33),
    (item_set_slot, 440, 45, 14),
    (item_set_slot, 441, 1501, 1100),
    (item_set_slot, 441, 1500, 3),
    (item_set_slot, 441, 1502, 0),
    (item_set_slot, 441, 1508, 26),
    (item_set_slot, 441, 41, 0),
    (item_set_slot, 441, 44, 21),
    (item_set_slot, 441, 45, 10),
    (item_set_slot, 442, 1501, 1400),
    (item_set_slot, 442, 1500, 5),
    (item_set_slot, 442, 1502, 0),
    (item_set_slot, 442, 1508, 26),
    (item_set_slot, 442, 41, 0),
    (item_set_slot, 442, 44, 26),
    (item_set_slot, 442, 45, 12),
    (item_set_slot, 443, 1501, 1400),
    (item_set_slot, 443, 1500, 5),
    (item_set_slot, 443, 1502, 0),
    (item_set_slot, 443, 1508, 26),
    (item_set_slot, 443, 41, 0),
    (item_set_slot, 443, 44, 26),
    (item_set_slot, 443, 45, 12),
    (item_set_slot, 444, 1501, 1100),
    (item_set_slot, 444, 1500, 3),
    (item_set_slot, 444, 1502, 0),
    (item_set_slot, 444, 1508, 26),
    (item_set_slot, 444, 41, 0),
    (item_set_slot, 444, 44, 21),
    (item_set_slot, 444, 45, 10),
    (item_set_slot, 445, 1501, 1100),
    (item_set_slot, 445, 1500, 3),
    (item_set_slot, 445, 1502, 0),
    (item_set_slot, 445, 1508, 26),
    (item_set_slot, 445, 41, 0),
    (item_set_slot, 445, 44, 21),
    (item_set_slot, 445, 45, 10),
    (item_set_slot, 446, 1501, 1100),
    (item_set_slot, 446, 1500, 3),
    (item_set_slot, 446, 1502, 0),
    (item_set_slot, 446, 1508, 26),
    (item_set_slot, 446, 41, 0),
    (item_set_slot, 446, 44, 21),
    (item_set_slot, 446, 45, 10),
    (item_set_slot, 447, 1501, 2600),
    (item_set_slot, 447, 1500, 10),
    (item_set_slot, 447, 1502, 0),
    (item_set_slot, 447, 1508, 26),
    (item_set_slot, 447, 41, 0),
    (item_set_slot, 447, 44, 51),
    (item_set_slot, 447, 45, 20),
    (item_set_slot, 448, 1501, 2600),
    (item_set_slot, 448, 1500, 10),
    (item_set_slot, 448, 1502, 0),
    (item_set_slot, 448, 1508, 26),
    (item_set_slot, 448, 41, 0),
    (item_set_slot, 448, 44, 51),
    (item_set_slot, 448, 45, 20),
    (item_set_slot, 449, 1501, 2600),
    (item_set_slot, 449, 1500, 10),
    (item_set_slot, 449, 1502, 0),
    (item_set_slot, 449, 1508, 26),
    (item_set_slot, 449, 41, 0),
    (item_set_slot, 449, 44, 51),
    (item_set_slot, 449, 45, 20),
    (item_set_slot, 450, 1501, 2600),
    (item_set_slot, 450, 1500, 10),
    (item_set_slot, 450, 1502, 0),
    (item_set_slot, 450, 1508, 26),
    (item_set_slot, 450, 41, 0),
    (item_set_slot, 450, 44, 51),
    (item_set_slot, 450, 45, 20),
    (item_set_slot, 451, 1501, 1100),
    (item_set_slot, 451, 1500, 3),
    (item_set_slot, 451, 1502, 1),
    (item_set_slot, 451, 1508, 29),
    (item_set_slot, 451, 41, 0),
    (item_set_slot, 451, 44, 21),
    (item_set_slot, 451, 45, 10),
    (item_set_slot, 452, 1501, 2600),
    (item_set_slot, 452, 1500, 10),
    (item_set_slot, 452, 1502, 1),
    (item_set_slot, 452, 1508, 29),
    (item_set_slot, 452, 41, 0),
    (item_set_slot, 452, 44, 51),
    (item_set_slot, 452, 45, 20),
    (item_set_slot, 453, 1501, 2600),
    (item_set_slot, 453, 1500, 10),
    (item_set_slot, 453, 1502, 1),
    (item_set_slot, 453, 1508, 29),
    (item_set_slot, 453, 41, 0),
    (item_set_slot, 453, 44, 51),
    (item_set_slot, 453, 45, 20),
    (item_set_slot, 454, 1501, 1800),
    (item_set_slot, 454, 1500, 8),
    (item_set_slot, 454, 1502, 1),
    (item_set_slot, 454, 1508, 29),
    (item_set_slot, 454, 41, 0),
    (item_set_slot, 454, 44, 33),
    (item_set_slot, 454, 45, 14),
    (item_set_slot, 455, 1501, 1100),
    (item_set_slot, 455, 1500, 3),
    (item_set_slot, 455, 1502, 0),
    (item_set_slot, 455, 1508, 26),
    (item_set_slot, 455, 41, 0),
    (item_set_slot, 455, 44, 21),
    (item_set_slot, 455, 45, 10),
    (item_set_slot, 456, 1501, 1100),
    (item_set_slot, 456, 1500, 3),
    (item_set_slot, 456, 1502, 0),
    (item_set_slot, 456, 1508, 26),
    (item_set_slot, 456, 41, 0),
    (item_set_slot, 456, 44, 21),
    (item_set_slot, 456, 45, 10),
    (item_set_slot, 457, 1501, 3100),
    (item_set_slot, 457, 1500, 12),
    (item_set_slot, 457, 1502, 1),
    (item_set_slot, 457, 1508, 29),
    (item_set_slot, 457, 41, 0),
    (item_set_slot, 457, 44, 64),
    (item_set_slot, 457, 45, 24),
    (item_set_slot, 458, 1501, 3100),
    (item_set_slot, 458, 1500, 12),
    (item_set_slot, 458, 1502, 1),
    (item_set_slot, 458, 1508, 29),
    (item_set_slot, 458, 41, 0),
    (item_set_slot, 458, 44, 64),
    (item_set_slot, 458, 45, 24),
    (item_set_slot, 459, 1501, 3100),
    (item_set_slot, 459, 1500, 12),
    (item_set_slot, 459, 1502, 1),
    (item_set_slot, 459, 1508, 29),
    (item_set_slot, 459, 41, 0),
    (item_set_slot, 459, 44, 64),
    (item_set_slot, 459, 45, 24),
    (item_set_slot, 460, 1501, 3100),
    (item_set_slot, 460, 1500, 12),
    (item_set_slot, 460, 1502, 1),
    (item_set_slot, 460, 1508, 29),
    (item_set_slot, 460, 41, 0),
    (item_set_slot, 460, 44, 64),
    (item_set_slot, 460, 45, 24),
    (item_set_slot, 461, 1501, 2600),
    (item_set_slot, 461, 1500, 10),
    (item_set_slot, 461, 1502, 1),
    (item_set_slot, 461, 1508, 29),
    (item_set_slot, 461, 41, 0),
    (item_set_slot, 461, 44, 51),
    (item_set_slot, 461, 45, 20),
    (item_set_slot, 462, 1501, 1400),
    (item_set_slot, 462, 1500, 5),
    (item_set_slot, 462, 1502, 0),
    (item_set_slot, 462, 1508, 26),
    (item_set_slot, 462, 41, 0),
    (item_set_slot, 462, 44, 26),
    (item_set_slot, 462, 45, 12),
    (item_set_slot, 463, 1501, 1100),
    (item_set_slot, 463, 1500, 3),
    (item_set_slot, 463, 1502, 0),
    (item_set_slot, 463, 1508, 26),
    (item_set_slot, 463, 41, 0),
    (item_set_slot, 463, 44, 21),
    (item_set_slot, 463, 45, 10),
    (item_set_slot, 464, 1501, 3100),
    (item_set_slot, 464, 1500, 12),
    (item_set_slot, 464, 1502, 1),
    (item_set_slot, 464, 1508, 29),
    (item_set_slot, 464, 41, 0),
    (item_set_slot, 464, 44, 64),
    (item_set_slot, 464, 45, 24),
    (item_set_slot, 465, 1501, 3100),
    (item_set_slot, 465, 1500, 12),
    (item_set_slot, 465, 1502, 1),
    (item_set_slot, 465, 1508, 29),
    (item_set_slot, 465, 41, 0),
    (item_set_slot, 465, 44, 64),
    (item_set_slot, 465, 45, 24),
    (item_set_slot, 466, 1501, 3100),
    (item_set_slot, 466, 1500, 12),
    (item_set_slot, 466, 1502, 1),
    (item_set_slot, 466, 1508, 29),
    (item_set_slot, 466, 41, 0),
    (item_set_slot, 466, 44, 64),
    (item_set_slot, 466, 45, 24),
    (item_set_slot, 467, 1501, 1400),
    (item_set_slot, 467, 1500, 5),
    (item_set_slot, 467, 1502, 0),
    (item_set_slot, 467, 1508, 26),
    (item_set_slot, 467, 41, 0),
    (item_set_slot, 467, 44, 26),
    (item_set_slot, 467, 45, 12),
    (item_set_slot, 468, 1501, 3100),
    (item_set_slot, 468, 1500, 12),
    (item_set_slot, 468, 1502, 1),
    (item_set_slot, 468, 1508, 29),
    (item_set_slot, 468, 41, 0),
    (item_set_slot, 468, 44, 64),
    (item_set_slot, 468, 45, 24),
    (item_set_slot, 469, 1501, 3100),
    (item_set_slot, 469, 1500, 12),
    (item_set_slot, 469, 1502, 1),
    (item_set_slot, 469, 1508, 29),
    (item_set_slot, 469, 41, 0),
    (item_set_slot, 469, 44, 64),
    (item_set_slot, 469, 45, 24),
    (item_set_slot, 470, 1501, 3100),
    (item_set_slot, 470, 1500, 12),
    (item_set_slot, 470, 1502, 1),
    (item_set_slot, 470, 1508, 29),
    (item_set_slot, 470, 41, 0),
    (item_set_slot, 470, 44, 64),
    (item_set_slot, 470, 45, 24),
    (item_set_slot, 471, 1501, 3100),
    (item_set_slot, 471, 1500, 12),
    (item_set_slot, 471, 1502, 1),
    (item_set_slot, 471, 1508, 29),
    (item_set_slot, 471, 41, 0),
    (item_set_slot, 471, 44, 64),
    (item_set_slot, 471, 45, 24),
    (item_set_slot, 472, 1501, 3100),
    (item_set_slot, 472, 1500, 12),
    (item_set_slot, 472, 1502, 1),
    (item_set_slot, 472, 1508, 29),
    (item_set_slot, 472, 41, 0),
    (item_set_slot, 472, 44, 64),
    (item_set_slot, 472, 45, 24),
    (item_set_slot, 473, 1501, 3100),
    (item_set_slot, 473, 1500, 12),
    (item_set_slot, 473, 1502, 1),
    (item_set_slot, 473, 1508, 29),
    (item_set_slot, 473, 41, 0),
    (item_set_slot, 473, 44, 64),
    (item_set_slot, 473, 45, 24),
    (item_set_slot, 474, 1501, 2600),
    (item_set_slot, 474, 1500, 10),
    (item_set_slot, 474, 1502, 1),
    (item_set_slot, 474, 1508, 29),
    (item_set_slot, 474, 41, 0),
    (item_set_slot, 474, 44, 51),
    (item_set_slot, 474, 45, 20),
    (item_set_slot, 475, 1501, 2600),
    (item_set_slot, 475, 1500, 10),
    (item_set_slot, 475, 1502, 1),
    (item_set_slot, 475, 1508, 29),
    (item_set_slot, 475, 41, 0),
    (item_set_slot, 475, 44, 51),
    (item_set_slot, 475, 45, 20),
    (item_set_slot, 476, 1501, 1100),
    (item_set_slot, 476, 1500, 3),
    (item_set_slot, 476, 1502, 0),
    (item_set_slot, 476, 1508, 26),
    (item_set_slot, 476, 41, 0),
    (item_set_slot, 476, 44, 21),
    (item_set_slot, 476, 45, 10),
    (item_set_slot, 477, 1501, 1100),
    (item_set_slot, 477, 1500, 3),
    (item_set_slot, 477, 1502, 0),
    (item_set_slot, 477, 1508, 26),
    (item_set_slot, 477, 41, 0),
    (item_set_slot, 477, 44, 21),
    (item_set_slot, 477, 45, 10),
    (item_set_slot, 478, 1501, 3100),
    (item_set_slot, 478, 1500, 12),
    (item_set_slot, 478, 1502, 1),
    (item_set_slot, 478, 1508, 29),
    (item_set_slot, 478, 41, 0),
    (item_set_slot, 478, 44, 64),
    (item_set_slot, 478, 45, 24),
    (item_set_slot, 479, 1501, 3600),
    (item_set_slot, 479, 1500, 14),
    (item_set_slot, 479, 1502, 1),
    (item_set_slot, 479, 1508, 29),
    (item_set_slot, 479, 41, 0),
    (item_set_slot, 479, 44, 80),
    (item_set_slot, 479, 45, 29),
    (item_set_slot, 480, 1501, 1800),
    (item_set_slot, 480, 1500, 8),
    (item_set_slot, 480, 1502, 1),
    (item_set_slot, 480, 1508, 29),
    (item_set_slot, 480, 41, 0),
    (item_set_slot, 480, 44, 33),
    (item_set_slot, 480, 45, 14),
    (item_set_slot, 481, 1501, 1400),
    (item_set_slot, 481, 1500, 5),
    (item_set_slot, 481, 1502, 0),
    (item_set_slot, 481, 1508, 26),
    (item_set_slot, 481, 41, 0),
    (item_set_slot, 481, 44, 26),
    (item_set_slot, 481, 45, 12),
    (item_set_slot, 482, 1501, 1400),
    (item_set_slot, 482, 1500, 5),
    (item_set_slot, 482, 1502, 0),
    (item_set_slot, 482, 1508, 26),
    (item_set_slot, 482, 41, 0),
    (item_set_slot, 482, 44, 26),
    (item_set_slot, 482, 45, 12),
    (item_set_slot, 483, 1501, 1800),
    (item_set_slot, 483, 1500, 8),
    (item_set_slot, 483, 1502, 1),
    (item_set_slot, 483, 1508, 29),
    (item_set_slot, 483, 41, 0),
    (item_set_slot, 483, 44, 33),
    (item_set_slot, 483, 45, 14),
    (item_set_slot, 484, 1501, 1800),
    (item_set_slot, 484, 1500, 8),
    (item_set_slot, 484, 1502, 1),
    (item_set_slot, 484, 1508, 29),
    (item_set_slot, 484, 41, 0),
    (item_set_slot, 484, 44, 33),
    (item_set_slot, 484, 45, 14),
    (item_set_slot, 485, 1501, 600),
    (item_set_slot, 485, 1500, 1),
    (item_set_slot, 485, 1502, 0),
    (item_set_slot, 485, 1508, 26),
    (item_set_slot, 485, 41, 0),
    (item_set_slot, 485, 44, 12),
    (item_set_slot, 485, 45, 5),
    (item_set_slot, 486, 1501, 2100),
    (item_set_slot, 486, 1500, 9),
    (item_set_slot, 486, 1502, 1),
    (item_set_slot, 486, 1508, 29),
    (item_set_slot, 486, 41, 0),
    (item_set_slot, 486, 44, 41),
    (item_set_slot, 486, 45, 17),
    (item_set_slot, 487, 1501, 1400),
    (item_set_slot, 487, 1500, 5),
    (item_set_slot, 487, 1502, 0),
    (item_set_slot, 487, 1508, 26),
    (item_set_slot, 487, 41, 0),
    (item_set_slot, 487, 44, 26),
    (item_set_slot, 487, 45, 12),
    (item_set_slot, 488, 1501, 1400),
    (item_set_slot, 488, 1500, 5),
    (item_set_slot, 488, 1502, 0),
    (item_set_slot, 488, 1508, 26),
    (item_set_slot, 488, 41, 0),
    (item_set_slot, 488, 44, 26),
    (item_set_slot, 488, 45, 12),
    (item_set_slot, 489, 1501, 1800),
    (item_set_slot, 489, 1500, 8),
    (item_set_slot, 489, 1502, 0),
    (item_set_slot, 489, 1508, 26),
    (item_set_slot, 489, 41, 0),
    (item_set_slot, 489, 44, 33),
    (item_set_slot, 489, 45, 14),
    (item_set_slot, 490, 1501, 1800),
    (item_set_slot, 490, 1500, 8),
    (item_set_slot, 490, 1502, 0),
    (item_set_slot, 490, 1508, 26),
    (item_set_slot, 490, 41, 0),
    (item_set_slot, 490, 44, 33),
    (item_set_slot, 490, 45, 14),
    (item_set_slot, 491, 1501, 2100),
    (item_set_slot, 491, 1500, 9),
    (item_set_slot, 491, 1502, 0),
    (item_set_slot, 491, 1508, 26),
    (item_set_slot, 491, 41, 0),
    (item_set_slot, 491, 44, 41),
    (item_set_slot, 491, 45, 17),
    (item_set_slot, 492, 1501, 1100),
    (item_set_slot, 492, 1500, 3),
    (item_set_slot, 492, 1502, 0),
    (item_set_slot, 492, 1508, 26),
    (item_set_slot, 492, 41, 0),
    (item_set_slot, 492, 44, 21),
    (item_set_slot, 492, 45, 10),
    (item_set_slot, 493, 1501, 2100),
    (item_set_slot, 493, 1500, 9),
    (item_set_slot, 493, 1502, 0),
    (item_set_slot, 493, 1508, 26),
    (item_set_slot, 493, 41, 0),
    (item_set_slot, 493, 44, 41),
    (item_set_slot, 493, 45, 17),
    (item_set_slot, 494, 1501, 600),
    (item_set_slot, 494, 1500, 1),
    (item_set_slot, 494, 1502, 1),
    (item_set_slot, 494, 1508, 29),
    (item_set_slot, 494, 41, 0),
    (item_set_slot, 494, 44, 12),
    (item_set_slot, 494, 45, 5),
    (item_set_slot, 495, 1501, 2600),
    (item_set_slot, 495, 1500, 10),
    (item_set_slot, 495, 1502, 1),
    (item_set_slot, 495, 1508, 29),
    (item_set_slot, 495, 41, 0),
    (item_set_slot, 495, 44, 51),
    (item_set_slot, 495, 45, 20),
    (item_set_slot, 496, 1501, 2600),
    (item_set_slot, 496, 1500, 10),
    (item_set_slot, 496, 1502, 1),
    (item_set_slot, 496, 1508, 29),
    (item_set_slot, 496, 41, 0),
    (item_set_slot, 496, 44, 51),
    (item_set_slot, 496, 45, 20),
    (item_set_slot, 497, 1501, 2600),
    (item_set_slot, 497, 1500, 10),
    (item_set_slot, 497, 1502, 1),
    (item_set_slot, 497, 1508, 29),
    (item_set_slot, 497, 41, 0),
    (item_set_slot, 497, 44, 51),
    (item_set_slot, 497, 45, 20),
    (item_set_slot, 498, 1501, 2600),
    (item_set_slot, 498, 1500, 10),
    (item_set_slot, 498, 1502, 1),
    (item_set_slot, 498, 1508, 29),
    (item_set_slot, 498, 41, 0),
    (item_set_slot, 498, 44, 51),
    (item_set_slot, 498, 45, 20),
    (item_set_slot, 499, 1501, 2600),
    (item_set_slot, 499, 1500, 10),
    (item_set_slot, 499, 1502, 1),
    (item_set_slot, 499, 1508, 29),
    (item_set_slot, 499, 41, 0),
    (item_set_slot, 499, 44, 51),
    (item_set_slot, 499, 45, 20),
    (item_set_slot, 500, 1501, 600),
    (item_set_slot, 500, 1500, 1),
    (item_set_slot, 500, 1502, 0),
    (item_set_slot, 500, 1508, 26),
    (item_set_slot, 500, 41, 0),
    (item_set_slot, 500, 44, 12),
    (item_set_slot, 500, 45, 5),
    (item_set_slot, 501, 1501, 600),
    (item_set_slot, 501, 1500, 1),
    (item_set_slot, 501, 1502, 0),
    (item_set_slot, 501, 1508, 26),
    (item_set_slot, 501, 41, 0),
    (item_set_slot, 501, 44, 12),
    (item_set_slot, 501, 45, 5),
    (item_set_slot, 502, 1501, 600),
    (item_set_slot, 502, 1500, 1),
    (item_set_slot, 502, 1502, 0),
    (item_set_slot, 502, 1508, 26),
    (item_set_slot, 502, 41, 0),
    (item_set_slot, 502, 44, 12),
    (item_set_slot, 502, 45, 5),
    (item_set_slot, 503, 1501, 600),
    (item_set_slot, 503, 1500, 1),
    (item_set_slot, 503, 1502, 0),
    (item_set_slot, 503, 1508, 26),
    (item_set_slot, 503, 41, 0),
    (item_set_slot, 503, 44, 12),
    (item_set_slot, 503, 45, 5),
    (item_set_slot, 504, 1501, 600),
    (item_set_slot, 504, 1500, 1),
    (item_set_slot, 504, 1502, 0),
    (item_set_slot, 504, 1508, 26),
    (item_set_slot, 504, 41, 0),
    (item_set_slot, 504, 44, 12),
    (item_set_slot, 504, 45, 5),
    (item_set_slot, 505, 1501, 600),
    (item_set_slot, 505, 1500, 1),
    (item_set_slot, 505, 1502, 0),
    (item_set_slot, 505, 1508, 26),
    (item_set_slot, 505, 41, 0),
    (item_set_slot, 505, 44, 12),
    (item_set_slot, 505, 45, 5),
    (item_set_slot, 506, 1501, 600),
    (item_set_slot, 506, 1500, 1),
    (item_set_slot, 506, 1502, 0),
    (item_set_slot, 506, 1508, 26),
    (item_set_slot, 506, 41, 0),
    (item_set_slot, 506, 44, 12),
    (item_set_slot, 506, 45, 5),
    (item_set_slot, 507, 1501, 3100),
    (item_set_slot, 507, 1500, 12),
    (item_set_slot, 507, 1502, 1),
    (item_set_slot, 507, 1508, 29),
    (item_set_slot, 507, 41, 0),
    (item_set_slot, 507, 44, 64),
    (item_set_slot, 507, 45, 24),
    (item_set_slot, 508, 1501, 3100),
    (item_set_slot, 508, 1500, 12),
    (item_set_slot, 508, 1502, 1),
    (item_set_slot, 508, 1508, 29),
    (item_set_slot, 508, 41, 0),
    (item_set_slot, 508, 44, 64),
    (item_set_slot, 508, 45, 24),
    (item_set_slot, 509, 1501, 3100),
    (item_set_slot, 509, 1500, 12),
    (item_set_slot, 509, 1502, 1),
    (item_set_slot, 509, 1508, 29),
    (item_set_slot, 509, 41, 0),
    (item_set_slot, 509, 44, 64),
    (item_set_slot, 509, 45, 24),
    (item_set_slot, 510, 1501, 2600),
    (item_set_slot, 510, 1500, 10),
    (item_set_slot, 510, 1502, 1),
    (item_set_slot, 510, 1508, 29),
    (item_set_slot, 510, 41, 0),
    (item_set_slot, 510, 44, 51),
    (item_set_slot, 510, 45, 20),
    (item_set_slot, 511, 1501, 3100),
    (item_set_slot, 511, 1500, 12),
    (item_set_slot, 511, 1502, 1),
    (item_set_slot, 511, 1508, 29),
    (item_set_slot, 511, 41, 0),
    (item_set_slot, 511, 44, 64),
    (item_set_slot, 511, 45, 24),
    (item_set_slot, 512, 1501, 3100),
    (item_set_slot, 512, 1500, 12),
    (item_set_slot, 512, 1502, 1),
    (item_set_slot, 512, 1508, 29),
    (item_set_slot, 512, 41, 0),
    (item_set_slot, 512, 44, 64),
    (item_set_slot, 512, 45, 24),
    (item_set_slot, 513, 1501, 3100),
    (item_set_slot, 513, 1500, 12),
    (item_set_slot, 513, 1502, 1),
    (item_set_slot, 513, 1508, 29),
    (item_set_slot, 513, 41, 0),
    (item_set_slot, 513, 44, 64),
    (item_set_slot, 513, 45, 24),
    (item_set_slot, 514, 1501, 1400),
    (item_set_slot, 514, 1500, 5),
    (item_set_slot, 514, 1502, 0),
    (item_set_slot, 514, 1508, 26),
    (item_set_slot, 514, 41, 0),
    (item_set_slot, 514, 44, 26),
    (item_set_slot, 514, 45, 12),
    (item_set_slot, 515, 1501, 1400),
    (item_set_slot, 515, 1500, 5),
    (item_set_slot, 515, 1502, 0),
    (item_set_slot, 515, 1508, 26),
    (item_set_slot, 515, 41, 0),
    (item_set_slot, 515, 44, 26),
    (item_set_slot, 515, 45, 12),
    (item_set_slot, 516, 1501, 2100),
    (item_set_slot, 516, 1500, 9),
    (item_set_slot, 516, 1502, 0),
    (item_set_slot, 516, 1508, 26),
    (item_set_slot, 516, 41, 0),
    (item_set_slot, 516, 44, 41),
    (item_set_slot, 516, 45, 17),
    (item_set_slot, 517, 1501, 2600),
    (item_set_slot, 517, 1500, 10),
    (item_set_slot, 517, 1502, 1),
    (item_set_slot, 517, 1508, 29),
    (item_set_slot, 517, 41, 0),
    (item_set_slot, 517, 44, 51),
    (item_set_slot, 517, 45, 20),
    (item_set_slot, 518, 1501, 1800),
    (item_set_slot, 518, 1500, 8),
    (item_set_slot, 518, 1502, 0),
    (item_set_slot, 518, 1508, 26),
    (item_set_slot, 518, 41, 0),
    (item_set_slot, 518, 44, 33),
    (item_set_slot, 518, 45, 14),
    (item_set_slot, 519, 1501, 1800),
    (item_set_slot, 519, 1500, 8),
    (item_set_slot, 519, 1502, 0),
    (item_set_slot, 519, 1508, 26),
    (item_set_slot, 519, 41, 0),
    (item_set_slot, 519, 44, 33),
    (item_set_slot, 519, 45, 14),
    (item_set_slot, 520, 1501, 1400),
    (item_set_slot, 520, 1500, 5),
    (item_set_slot, 520, 1502, 0),
    (item_set_slot, 520, 1508, 26),
    (item_set_slot, 520, 41, 0),
    (item_set_slot, 520, 44, 26),
    (item_set_slot, 520, 45, 12),
    (item_set_slot, 521, 1501, 1400),
    (item_set_slot, 521, 1500, 5),
    (item_set_slot, 521, 1502, 0),
    (item_set_slot, 521, 1508, 26),
    (item_set_slot, 521, 41, 0),
    (item_set_slot, 521, 44, 26),
    (item_set_slot, 521, 45, 12),
    (item_set_slot, 522, 1501, 1800),
    (item_set_slot, 522, 1500, 8),
    (item_set_slot, 522, 1502, 0),
    (item_set_slot, 522, 1508, 26),
    (item_set_slot, 522, 41, 0),
    (item_set_slot, 522, 44, 33),
    (item_set_slot, 522, 45, 14),
    (item_set_slot, 523, 1501, 3100),
    (item_set_slot, 523, 1500, 12),
    (item_set_slot, 523, 1502, 1),
    (item_set_slot, 523, 1508, 29),
    (item_set_slot, 523, 41, 0),
    (item_set_slot, 523, 44, 64),
    (item_set_slot, 523, 45, 24),
    (item_set_slot, 524, 1501, 2100),
    (item_set_slot, 524, 1500, 9),
    (item_set_slot, 524, 1502, 1),
    (item_set_slot, 524, 1508, 29),
    (item_set_slot, 524, 41, 0),
    (item_set_slot, 524, 44, 41),
    (item_set_slot, 524, 45, 17),
    (item_set_slot, 525, 1501, 2100),
    (item_set_slot, 525, 1500, 9),
    (item_set_slot, 525, 1502, 1),
    (item_set_slot, 525, 1508, 29),
    (item_set_slot, 525, 41, 0),
    (item_set_slot, 525, 44, 41),
    (item_set_slot, 525, 45, 17),
    (item_set_slot, 526, 1501, 2600),
    (item_set_slot, 526, 1500, 10),
    (item_set_slot, 526, 1502, 1),
    (item_set_slot, 526, 1508, 29),
    (item_set_slot, 526, 41, 0),
    (item_set_slot, 526, 44, 51),
    (item_set_slot, 526, 45, 20),
    (item_set_slot, 527, 1501, 2100),
    (item_set_slot, 527, 1500, 9),
    (item_set_slot, 527, 1502, 1),
    (item_set_slot, 527, 1508, 29),
    (item_set_slot, 527, 41, 0),
    (item_set_slot, 527, 44, 41),
    (item_set_slot, 527, 45, 17),
    (item_set_slot, 528, 1501, 2100),
    (item_set_slot, 528, 1500, 9),
    (item_set_slot, 528, 1502, 1),
    (item_set_slot, 528, 1508, 29),
    (item_set_slot, 528, 41, 0),
    (item_set_slot, 528, 44, 41),
    (item_set_slot, 528, 45, 17),
    (item_set_slot, 529, 1501, 2100),
    (item_set_slot, 529, 1500, 9),
    (item_set_slot, 529, 1502, 1),
    (item_set_slot, 529, 1508, 29),
    (item_set_slot, 529, 41, 0),
    (item_set_slot, 529, 44, 41),
    (item_set_slot, 529, 45, 17),
    (item_set_slot, 530, 1501, 600),
    (item_set_slot, 530, 1500, 1),
    (item_set_slot, 530, 1502, 0),
    (item_set_slot, 530, 1508, 26),
    (item_set_slot, 530, 41, 0),
    (item_set_slot, 530, 44, 12),
    (item_set_slot, 530, 45, 5),
    (item_set_slot, 531, 1501, 600),
    (item_set_slot, 531, 1500, 1),
    (item_set_slot, 531, 1502, 0),
    (item_set_slot, 531, 1508, 26),
    (item_set_slot, 531, 41, 0),
    (item_set_slot, 531, 44, 12),
    (item_set_slot, 531, 45, 5),
    (item_set_slot, 532, 1501, 3100),
    (item_set_slot, 532, 1500, 12),
    (item_set_slot, 532, 1502, 1),
    (item_set_slot, 532, 1508, 29),
    (item_set_slot, 532, 41, 0),
    (item_set_slot, 532, 44, 64),
    (item_set_slot, 532, 45, 24),
    (item_set_slot, 533, 1501, 2600),
    (item_set_slot, 533, 1500, 10),
    (item_set_slot, 533, 1502, 1),
    (item_set_slot, 533, 1508, 29),
    (item_set_slot, 533, 41, 0),
    (item_set_slot, 533, 44, 51),
    (item_set_slot, 533, 45, 20),
    (item_set_slot, 534, 1501, 3100),
    (item_set_slot, 534, 1500, 12),
    (item_set_slot, 534, 1502, 1),
    (item_set_slot, 534, 1508, 29),
    (item_set_slot, 534, 41, 0),
    (item_set_slot, 534, 44, 64),
    (item_set_slot, 534, 45, 24),
    (item_set_slot, 535, 1501, 600),
    (item_set_slot, 535, 1500, 1),
    (item_set_slot, 535, 1502, 0),
    (item_set_slot, 535, 1508, 26),
    (item_set_slot, 535, 41, 0),
    (item_set_slot, 535, 44, 12),
    (item_set_slot, 535, 45, 5),
    (item_set_slot, 536, 1501, 600),
    (item_set_slot, 536, 1500, 1),
    (item_set_slot, 536, 1502, 0),
    (item_set_slot, 536, 1508, 26),
    (item_set_slot, 536, 41, 0),
    (item_set_slot, 536, 44, 12),
    (item_set_slot, 536, 45, 5),
    (item_set_slot, 537, 1501, 600),
    (item_set_slot, 537, 1500, 1),
    (item_set_slot, 537, 1502, 0),
    (item_set_slot, 537, 1508, 26),
    (item_set_slot, 537, 41, 0),
    (item_set_slot, 537, 44, 12),
    (item_set_slot, 537, 45, 5),
    (item_set_slot, 538, 1501, 600),
    (item_set_slot, 538, 1500, 1),
    (item_set_slot, 538, 1502, 0),
    (item_set_slot, 538, 1508, 26),
    (item_set_slot, 538, 41, 0),
    (item_set_slot, 538, 44, 12),
    (item_set_slot, 538, 45, 5),
    (item_set_slot, 539, 1501, 600),
    (item_set_slot, 539, 1500, 1),
    (item_set_slot, 539, 1502, 0),
    (item_set_slot, 539, 1508, 26),
    (item_set_slot, 539, 41, 0),
    (item_set_slot, 539, 44, 12),
    (item_set_slot, 539, 45, 5),
    (item_set_slot, 540, 1501, 600),
    (item_set_slot, 540, 1500, 1),
    (item_set_slot, 540, 1502, 0),
    (item_set_slot, 540, 1508, 26),
    (item_set_slot, 540, 41, 0),
    (item_set_slot, 540, 44, 12),
    (item_set_slot, 540, 45, 5),
    (item_set_slot, 541, 1501, 3100),
    (item_set_slot, 541, 1500, 12),
    (item_set_slot, 541, 1502, 1),
    (item_set_slot, 541, 1508, 29),
    (item_set_slot, 541, 41, 0),
    (item_set_slot, 541, 44, 64),
    (item_set_slot, 541, 45, 24),
    (item_set_slot, 542, 1501, 3100),
    (item_set_slot, 542, 1500, 12),
    (item_set_slot, 542, 1502, 1),
    (item_set_slot, 542, 1508, 29),
    (item_set_slot, 542, 41, 0),
    (item_set_slot, 542, 44, 64),
    (item_set_slot, 542, 45, 24),
    (item_set_slot, 543, 1501, 2100),
    (item_set_slot, 543, 1500, 9),
    (item_set_slot, 543, 1502, 1),
    (item_set_slot, 543, 1508, 29),
    (item_set_slot, 543, 41, 0),
    (item_set_slot, 543, 44, 41),
    (item_set_slot, 543, 45, 17),
    (item_set_slot, 544, 1501, 1400),
    (item_set_slot, 544, 1500, 5),
    (item_set_slot, 544, 1502, 0),
    (item_set_slot, 544, 1508, 26),
    (item_set_slot, 544, 41, 0),
    (item_set_slot, 544, 44, 26),
    (item_set_slot, 544, 45, 12),
    (item_set_slot, 545, 1501, 2100),
    (item_set_slot, 545, 1500, 9),
    (item_set_slot, 545, 1502, 1),
    (item_set_slot, 545, 1508, 29),
    (item_set_slot, 545, 41, 0),
    (item_set_slot, 545, 44, 41),
    (item_set_slot, 545, 45, 17),
    (item_set_slot, 546, 1501, 2100),
    (item_set_slot, 546, 1500, 9),
    (item_set_slot, 546, 1502, 1),
    (item_set_slot, 546, 1508, 29),
    (item_set_slot, 546, 41, 0),
    (item_set_slot, 546, 44, 41),
    (item_set_slot, 546, 45, 17),
    (item_set_slot, 547, 1501, 2100),
    (item_set_slot, 547, 1500, 9),
    (item_set_slot, 547, 1502, 1),
    (item_set_slot, 547, 1508, 29),
    (item_set_slot, 547, 41, 0),
    (item_set_slot, 547, 44, 41),
    (item_set_slot, 547, 45, 17),
    (item_set_slot, 548, 1501, 2100),
    (item_set_slot, 548, 1500, 9),
    (item_set_slot, 548, 1502, 1),
    (item_set_slot, 548, 1508, 29),
    (item_set_slot, 548, 41, 0),
    (item_set_slot, 548, 44, 41),
    (item_set_slot, 548, 45, 17),
    (item_set_slot, 549, 1501, 2100),
    (item_set_slot, 549, 1500, 9),
    (item_set_slot, 549, 1502, 1),
    (item_set_slot, 549, 1508, 29),
    (item_set_slot, 549, 41, 0),
    (item_set_slot, 549, 44, 41),
    (item_set_slot, 549, 45, 17),
    (item_set_slot, 550, 1501, 3100),
    (item_set_slot, 550, 1500, 12),
    (item_set_slot, 550, 1502, 1),
    (item_set_slot, 550, 1508, 29),
    (item_set_slot, 550, 41, 0),
    (item_set_slot, 550, 44, 64),
    (item_set_slot, 550, 45, 24),
    (item_set_slot, 551, 1501, 3100),
    (item_set_slot, 551, 1500, 12),
    (item_set_slot, 551, 1502, 1),
    (item_set_slot, 551, 1508, 29),
    (item_set_slot, 551, 41, 0),
    (item_set_slot, 551, 44, 64),
    (item_set_slot, 551, 45, 24),
    (item_set_slot, 552, 1501, 3100),
    (item_set_slot, 552, 1500, 12),
    (item_set_slot, 552, 1502, 1),
    (item_set_slot, 552, 1508, 29),
    (item_set_slot, 552, 41, 0),
    (item_set_slot, 552, 44, 64),
    (item_set_slot, 552, 45, 24),
    (item_set_slot, 553, 1501, 600),
    (item_set_slot, 553, 1500, 1),
    (item_set_slot, 553, 1502, 0),
    (item_set_slot, 553, 1508, 26),
    (item_set_slot, 553, 41, 0),
    (item_set_slot, 553, 44, 12),
    (item_set_slot, 553, 45, 5),
    (item_set_slot, 554, 1501, 600),
    (item_set_slot, 554, 1500, 1),
    (item_set_slot, 554, 1502, 0),
    (item_set_slot, 554, 1508, 26),
    (item_set_slot, 554, 41, 0),
    (item_set_slot, 554, 44, 12),
    (item_set_slot, 554, 45, 5),
    (item_set_slot, 555, 1501, 600),
    (item_set_slot, 555, 1500, 1),
    (item_set_slot, 555, 1502, 0),
    (item_set_slot, 555, 1508, 26),
    (item_set_slot, 555, 41, 0),
    (item_set_slot, 555, 44, 12),
    (item_set_slot, 555, 45, 5),
    (item_set_slot, 556, 1501, 100),
    (item_set_slot, 556, 1500, 0),
    (item_set_slot, 556, 1502, 1),
    (item_set_slot, 556, 1508, 29),
    (item_set_slot, 556, 41, 0),
    (item_set_slot, 556, 44, 3),
    (item_set_slot, 556, 45, 1),
    (item_set_slot, 557, 1501, 2600),
    (item_set_slot, 557, 1500, 10),
    (item_set_slot, 557, 1502, 1),
    (item_set_slot, 557, 1508, 29),
    (item_set_slot, 557, 41, 0),
    (item_set_slot, 557, 44, 51),
    (item_set_slot, 557, 45, 20),
    (item_set_slot, 558, 1501, 50),
    (item_set_slot, 558, 1500, 0),
    (item_set_slot, 558, 1502, 0),
    (item_set_slot, 558, 1508, 26),
    (item_set_slot, 558, 41, 4),
    (item_set_slot, 558, 44, 0),
    (item_set_slot, 558, 45, 0),
    (item_set_slot, 559, 1501, 50),
    (item_set_slot, 559, 1500, 0),
    (item_set_slot, 559, 1502, 0),
    (item_set_slot, 559, 1508, 26),
    (item_set_slot, 559, 41, 4),
    (item_set_slot, 559, 44, 0),
    (item_set_slot, 559, 45, 0),
    (item_set_slot, 560, 1501, 50),
    (item_set_slot, 560, 1500, 0),
    (item_set_slot, 560, 1502, 0),
    (item_set_slot, 560, 1508, 26),
    (item_set_slot, 560, 41, 4),
    (item_set_slot, 560, 44, 0),
    (item_set_slot, 560, 45, 0),
    (item_set_slot, 561, 1501, 50),
    (item_set_slot, 561, 1500, 0),
    (item_set_slot, 561, 1502, 0),
    (item_set_slot, 561, 1508, 26),
    (item_set_slot, 561, 41, 4),
    (item_set_slot, 561, 44, 0),
    (item_set_slot, 561, 45, 0),
    (item_set_slot, 562, 1501, 50),
    (item_set_slot, 562, 1500, 0),
    (item_set_slot, 562, 1502, 0),
    (item_set_slot, 562, 1508, 26),
    (item_set_slot, 562, 41, 4),
    (item_set_slot, 562, 44, 0),
    (item_set_slot, 562, 45, 0),
    (item_set_slot, 563, 1501, 50),
    (item_set_slot, 563, 1500, 0),
    (item_set_slot, 563, 1502, 0),
    (item_set_slot, 563, 1508, 26),
    (item_set_slot, 563, 41, 4),
    (item_set_slot, 563, 44, 0),
    (item_set_slot, 563, 45, 0),
    (item_set_slot, 564, 1501, 50),
    (item_set_slot, 564, 1500, 0),
    (item_set_slot, 564, 1502, 0),
    (item_set_slot, 564, 1508, 26),
    (item_set_slot, 564, 41, 4),
    (item_set_slot, 564, 44, 0),
    (item_set_slot, 564, 45, 0),
    (item_set_slot, 565, 1501, 50),
    (item_set_slot, 565, 1500, 0),
    (item_set_slot, 565, 1502, 0),
    (item_set_slot, 565, 1508, 26),
    (item_set_slot, 565, 41, 4),
    (item_set_slot, 565, 44, 0),
    (item_set_slot, 565, 45, 0),
    (item_set_slot, 566, 1501, 50),
    (item_set_slot, 566, 1500, 0),
    (item_set_slot, 566, 1502, 0),
    (item_set_slot, 566, 1508, 26),
    (item_set_slot, 566, 41, 4),
    (item_set_slot, 566, 44, 0),
    (item_set_slot, 566, 45, 0),
    (item_set_slot, 567, 1501, 50),
    (item_set_slot, 567, 1500, 0),
    (item_set_slot, 567, 1502, 0),
    (item_set_slot, 567, 1508, 26),
    (item_set_slot, 567, 41, 4),
    (item_set_slot, 567, 44, 0),
    (item_set_slot, 567, 45, 0),
    (item_set_slot, 568, 1501, 50),
    (item_set_slot, 568, 1500, 0),
    (item_set_slot, 568, 1502, 0),
    (item_set_slot, 568, 1508, 26),
    (item_set_slot, 568, 41, 4),
    (item_set_slot, 568, 44, 0),
    (item_set_slot, 568, 45, 0),
    (item_set_slot, 569, 1501, 50),
    (item_set_slot, 569, 1500, 0),
    (item_set_slot, 569, 1502, 0),
    (item_set_slot, 569, 1508, 26),
    (item_set_slot, 569, 41, 8),
    (item_set_slot, 569, 44, 0),
    (item_set_slot, 569, 45, 0),
    (item_set_slot, 570, 1501, 100),
    (item_set_slot, 570, 1500, 0),
    (item_set_slot, 570, 1502, 0),
    (item_set_slot, 570, 1508, 26),
    (item_set_slot, 570, 41, 20),
    (item_set_slot, 570, 44, 0),
    (item_set_slot, 570, 45, 0),
    (item_set_slot, 571, 1501, 100),
    (item_set_slot, 571, 1500, 0),
    (item_set_slot, 571, 1502, 0),
    (item_set_slot, 571, 1508, 26),
    (item_set_slot, 571, 41, 20),
    (item_set_slot, 571, 44, 0),
    (item_set_slot, 571, 45, 0),
    (item_set_slot, 572, 1501, 100),
    (item_set_slot, 572, 1500, 0),
    (item_set_slot, 572, 1502, 0),
    (item_set_slot, 572, 1508, 26),
    (item_set_slot, 572, 41, 20),
    (item_set_slot, 572, 44, 0),
    (item_set_slot, 572, 45, 0),
    (item_set_slot, 573, 1501, 100),
    (item_set_slot, 573, 1500, 0),
    (item_set_slot, 573, 1502, 0),
    (item_set_slot, 573, 1508, 26),
    (item_set_slot, 573, 41, 20),
    (item_set_slot, 573, 44, 0),
    (item_set_slot, 573, 45, 0),
    (item_set_slot, 574, 1501, 50),
    (item_set_slot, 574, 1500, 0),
    (item_set_slot, 574, 1502, 0),
    (item_set_slot, 574, 1508, 26),
    (item_set_slot, 574, 41, 8),
    (item_set_slot, 574, 44, 0),
    (item_set_slot, 574, 45, 0),
    (item_set_slot, 575, 1501, 50),
    (item_set_slot, 575, 1500, 0),
    (item_set_slot, 575, 1502, 0),
    (item_set_slot, 575, 1508, 26),
    (item_set_slot, 575, 41, 8),
    (item_set_slot, 575, 44, 0),
    (item_set_slot, 575, 45, 0),
    (item_set_slot, 576, 1501, 50),
    (item_set_slot, 576, 1500, 0),
    (item_set_slot, 576, 1502, 0),
    (item_set_slot, 576, 1508, 26),
    (item_set_slot, 576, 41, 8),
    (item_set_slot, 576, 44, 0),
    (item_set_slot, 576, 45, 0),
    (item_set_slot, 577, 1501, 100),
    (item_set_slot, 577, 1500, 0),
    (item_set_slot, 577, 1502, 0),
    (item_set_slot, 577, 1508, 26),
    (item_set_slot, 577, 41, 20),
    (item_set_slot, 577, 44, 0),
    (item_set_slot, 577, 45, 0),
    (item_set_slot, 578, 1501, 50),
    (item_set_slot, 578, 1500, 0),
    (item_set_slot, 578, 1502, 0),
    (item_set_slot, 578, 1508, 26),
    (item_set_slot, 578, 41, 8),
    (item_set_slot, 578, 44, 0),
    (item_set_slot, 578, 45, 0),
    (item_set_slot, 579, 1501, 100),
    (item_set_slot, 579, 1500, 0),
    (item_set_slot, 579, 1502, 0),
    (item_set_slot, 579, 1508, 26),
    (item_set_slot, 579, 41, 20),
    (item_set_slot, 579, 44, 0),
    (item_set_slot, 579, 45, 0),
    (item_set_slot, 580, 1501, 100),
    (item_set_slot, 580, 1500, 0),
    (item_set_slot, 580, 1502, 0),
    (item_set_slot, 580, 1508, 26),
    (item_set_slot, 580, 41, 20),
    (item_set_slot, 580, 44, 0),
    (item_set_slot, 580, 45, 0),
    (item_set_slot, 581, 1501, 100),
    (item_set_slot, 581, 1500, 0),
    (item_set_slot, 581, 1502, 0),
    (item_set_slot, 581, 1508, 26),
    (item_set_slot, 581, 41, 20),
    (item_set_slot, 581, 44, 0),
    (item_set_slot, 581, 45, 0),
    (item_set_slot, 582, 1501, 200),
    (item_set_slot, 582, 1500, 0),
    (item_set_slot, 582, 1502, 1),
    (item_set_slot, 582, 1508, 29),
    (item_set_slot, 582, 41, 60),
    (item_set_slot, 582, 44, 0),
    (item_set_slot, 582, 45, 0),
    (item_set_slot, 583, 1501, 150),
    (item_set_slot, 583, 1500, 0),
    (item_set_slot, 583, 1502, 2),
    (item_set_slot, 583, 1508, 29),
    (item_set_slot, 583, 41, 40),
    (item_set_slot, 583, 44, 0),
    (item_set_slot, 583, 45, 0),
    (item_set_slot, 584, 1501, 50),
    (item_set_slot, 584, 1500, 0),
    (item_set_slot, 584, 1502, 0),
    (item_set_slot, 584, 1508, 26),
    (item_set_slot, 584, 41, 4),
    (item_set_slot, 584, 44, 0),
    (item_set_slot, 584, 45, 0),
    (item_set_slot, 585, 1501, 50),
    (item_set_slot, 585, 1500, 0),
    (item_set_slot, 585, 1502, 0),
    (item_set_slot, 585, 1508, 26),
    (item_set_slot, 585, 41, 4),
    (item_set_slot, 585, 44, 0),
    (item_set_slot, 585, 45, 0),
    (item_set_slot, 586, 1501, 50),
    (item_set_slot, 586, 1500, 0),
    (item_set_slot, 586, 1502, 0),
    (item_set_slot, 586, 1508, 26),
    (item_set_slot, 586, 41, 8),
    (item_set_slot, 586, 44, 0),
    (item_set_slot, 586, 45, 0),
    (item_set_slot, 587, 1501, 50),
    (item_set_slot, 587, 1500, 0),
    (item_set_slot, 587, 1502, 0),
    (item_set_slot, 587, 1508, 26),
    (item_set_slot, 587, 41, 8),
    (item_set_slot, 587, 44, 0),
    (item_set_slot, 587, 45, 0),
    (item_set_slot, 588, 1501, 50),
    (item_set_slot, 588, 1500, 0),
    (item_set_slot, 588, 1502, 0),
    (item_set_slot, 588, 1508, 26),
    (item_set_slot, 588, 41, 8),
    (item_set_slot, 588, 44, 0),
    (item_set_slot, 588, 45, 0),
    (item_set_slot, 589, 1501, 50),
    (item_set_slot, 589, 1500, 0),
    (item_set_slot, 589, 1502, 0),
    (item_set_slot, 589, 1508, 26),
    (item_set_slot, 589, 41, 4),
    (item_set_slot, 589, 44, 0),
    (item_set_slot, 589, 45, 0),
    (item_set_slot, 590, 1501, 100),
    (item_set_slot, 590, 1500, 0),
    (item_set_slot, 590, 1502, 0),
    (item_set_slot, 590, 1508, 26),
    (item_set_slot, 590, 41, 20),
    (item_set_slot, 590, 44, 0),
    (item_set_slot, 590, 45, 0),
    (item_set_slot, 591, 1501, 100),
    (item_set_slot, 591, 1500, 0),
    (item_set_slot, 591, 1502, 0),
    (item_set_slot, 591, 1508, 26),
    (item_set_slot, 591, 41, 20),
    (item_set_slot, 591, 44, 0),
    (item_set_slot, 591, 45, 0),
    (item_set_slot, 592, 1501, 200),
    (item_set_slot, 592, 1500, 0),
    (item_set_slot, 592, 1502, 1),
    (item_set_slot, 592, 1508, 29),
    (item_set_slot, 592, 41, 60),
    (item_set_slot, 592, 44, 0),
    (item_set_slot, 592, 45, 0),
    (item_set_slot, 593, 1501, 250),
    (item_set_slot, 593, 1500, 0),
    (item_set_slot, 593, 1502, 1),
    (item_set_slot, 593, 1508, 29),
    (item_set_slot, 593, 41, 70),
    (item_set_slot, 593, 44, 0),
    (item_set_slot, 593, 45, 0),
    (item_set_slot, 594, 1501, 150),
    (item_set_slot, 594, 1500, 0),
    (item_set_slot, 594, 1502, 2),
    (item_set_slot, 594, 1508, 29),
    (item_set_slot, 594, 41, 40),
    (item_set_slot, 594, 44, 0),
    (item_set_slot, 594, 45, 0),
    (item_set_slot, 595, 1501, 150),
    (item_set_slot, 595, 1500, 0),
    (item_set_slot, 595, 1502, 2),
    (item_set_slot, 595, 1508, 29),
    (item_set_slot, 595, 41, 40),
    (item_set_slot, 595, 44, 0),
    (item_set_slot, 595, 45, 0),
    (item_set_slot, 596, 1501, 150),
    (item_set_slot, 596, 1500, 0),
    (item_set_slot, 596, 1502, 2),
    (item_set_slot, 596, 1508, 29),
    (item_set_slot, 596, 41, 40),
    (item_set_slot, 596, 44, 0),
    (item_set_slot, 596, 45, 0),
    (item_set_slot, 597, 1501, 150),
    (item_set_slot, 597, 1500, 0),
    (item_set_slot, 597, 1502, 2),
    (item_set_slot, 597, 1508, 29),
    (item_set_slot, 597, 41, 40),
    (item_set_slot, 597, 44, 0),
    (item_set_slot, 597, 45, 0),
    (item_set_slot, 598, 1501, 200),
    (item_set_slot, 598, 1500, 0),
    (item_set_slot, 598, 1502, 2),
    (item_set_slot, 598, 1508, 29),
    (item_set_slot, 598, 41, 60),
    (item_set_slot, 598, 44, 0),
    (item_set_slot, 598, 45, 0),
    (item_set_slot, 599, 1501, 250),
    (item_set_slot, 599, 1500, 0),
    (item_set_slot, 599, 1502, 2),
    (item_set_slot, 599, 1508, 29),
    (item_set_slot, 599, 41, 70),
    (item_set_slot, 599, 44, 0),
    (item_set_slot, 599, 45, 0),
    (item_set_slot, 600, 1501, 300),
    (item_set_slot, 600, 1500, 0),
    (item_set_slot, 600, 1502, 2),
    (item_set_slot, 600, 1508, 29),
    (item_set_slot, 600, 41, 90),
    (item_set_slot, 600, 44, 0),
    (item_set_slot, 600, 45, 0),
    (item_set_slot, 601, 1501, 300),
    (item_set_slot, 601, 1500, 0),
    (item_set_slot, 601, 1508, 27),
    (item_set_slot, 601, 41, 90),
    (item_set_slot, 601, 44, 0),
    (item_set_slot, 601, 45, 0),
    (item_set_slot, 602, 1501, 300),
    (item_set_slot, 602, 1500, 0),
    (item_set_slot, 602, 1508, 27),
    (item_set_slot, 602, 41, 90),
    (item_set_slot, 602, 44, 0),
    (item_set_slot, 602, 45, 0),
    (item_set_slot, 603, 1501, 250),
    (item_set_slot, 603, 1500, 0),
    (item_set_slot, 603, 1502, 0),
    (item_set_slot, 603, 1508, 26),
    (item_set_slot, 603, 41, 70),
    (item_set_slot, 603, 44, 0),
    (item_set_slot, 603, 45, 0),
    (item_set_slot, 604, 1501, 200),
    (item_set_slot, 604, 1500, 0),
    (item_set_slot, 604, 1502, 2),
    (item_set_slot, 604, 1508, 29),
    (item_set_slot, 604, 41, 60),
    (item_set_slot, 604, 44, 0),
    (item_set_slot, 604, 45, 0),
    (item_set_slot, 605, 1501, 175),
    (item_set_slot, 605, 1500, 0),
    (item_set_slot, 605, 1502, 2),
    (item_set_slot, 605, 1508, 29),
    (item_set_slot, 605, 41, 50),
    (item_set_slot, 605, 44, 0),
    (item_set_slot, 605, 45, 0),
    (item_set_slot, 606, 1501, 200),
    (item_set_slot, 606, 1500, 0),
    (item_set_slot, 606, 1502, 2),
    (item_set_slot, 606, 1508, 29),
    (item_set_slot, 606, 41, 60),
    (item_set_slot, 606, 44, 0),
    (item_set_slot, 606, 45, 0),
    (item_set_slot, 607, 1501, 150),
    (item_set_slot, 607, 1500, 0),
    (item_set_slot, 607, 1502, 2),
    (item_set_slot, 607, 1508, 29),
    (item_set_slot, 607, 41, 40),
    (item_set_slot, 607, 44, 0),
    (item_set_slot, 607, 45, 0),
    (item_set_slot, 608, 1501, 150),
    (item_set_slot, 608, 1500, 0),
    (item_set_slot, 608, 1502, 2),
    (item_set_slot, 608, 1508, 29),
    (item_set_slot, 608, 41, 40),
    (item_set_slot, 608, 44, 0),
    (item_set_slot, 608, 45, 0),
    (item_set_slot, 609, 1501, 150),
    (item_set_slot, 609, 1500, 0),
    (item_set_slot, 609, 1502, 2),
    (item_set_slot, 609, 1508, 29),
    (item_set_slot, 609, 41, 40),
    (item_set_slot, 609, 44, 0),
    (item_set_slot, 609, 45, 0),
    (item_set_slot, 610, 1501, 200),
    (item_set_slot, 610, 1500, 0),
    (item_set_slot, 610, 1502, 2),
    (item_set_slot, 610, 1508, 29),
    (item_set_slot, 610, 41, 60),
    (item_set_slot, 610, 44, 0),
    (item_set_slot, 610, 45, 0),
    (item_set_slot, 611, 1501, 150),
    (item_set_slot, 611, 1500, 0),
    (item_set_slot, 611, 1502, 2),
    (item_set_slot, 611, 1508, 29),
    (item_set_slot, 611, 41, 40),
    (item_set_slot, 611, 44, 0),
    (item_set_slot, 611, 45, 0),
    (item_set_slot, 612, 1501, 150),
    (item_set_slot, 612, 1500, 0),
    (item_set_slot, 612, 1502, 2),
    (item_set_slot, 612, 1508, 29),
    (item_set_slot, 612, 41, 40),
    (item_set_slot, 612, 44, 0),
    (item_set_slot, 612, 45, 0),
    (item_set_slot, 613, 1501, 200),
    (item_set_slot, 613, 1500, 0),
    (item_set_slot, 613, 1502, 2),
    (item_set_slot, 613, 1508, 29),
    (item_set_slot, 613, 41, 60),
    (item_set_slot, 613, 44, 0),
    (item_set_slot, 613, 45, 0),
    (item_set_slot, 614, 1501, 200),
    (item_set_slot, 614, 1500, 0),
    (item_set_slot, 614, 1502, 2),
    (item_set_slot, 614, 1508, 29),
    (item_set_slot, 614, 41, 60),
    (item_set_slot, 614, 44, 0),
    (item_set_slot, 614, 45, 0),
    (item_set_slot, 615, 1501, 175),
    (item_set_slot, 615, 1500, 0),
    (item_set_slot, 615, 1508, 27),
    (item_set_slot, 615, 41, 50),
    (item_set_slot, 615, 44, 0),
    (item_set_slot, 615, 45, 0),
    (item_set_slot, 616, 1501, 175),
    (item_set_slot, 616, 1500, 0),
    (item_set_slot, 616, 1508, 27),
    (item_set_slot, 616, 41, 50),
    (item_set_slot, 616, 44, 0),
    (item_set_slot, 616, 45, 0),
    (item_set_slot, 617, 1501, 250),
    (item_set_slot, 617, 1500, 0),
    (item_set_slot, 617, 1502, 2),
    (item_set_slot, 617, 1508, 29),
    (item_set_slot, 617, 41, 70),
    (item_set_slot, 617, 44, 0),
    (item_set_slot, 617, 45, 0),
    (item_set_slot, 618, 1501, 175),
    (item_set_slot, 618, 1500, 0),
    (item_set_slot, 618, 1502, 2),
    (item_set_slot, 618, 1508, 29),
    (item_set_slot, 618, 41, 50),
    (item_set_slot, 618, 44, 0),
    (item_set_slot, 618, 45, 0),
    (item_set_slot, 619, 1501, 300),
    (item_set_slot, 619, 1500, 0),
    (item_set_slot, 619, 1502, 2),
    (item_set_slot, 619, 1508, 29),
    (item_set_slot, 619, 41, 90),
    (item_set_slot, 619, 44, 0),
    (item_set_slot, 619, 45, 0),
    (item_set_slot, 620, 1501, 300),
    (item_set_slot, 620, 1500, 0),
    (item_set_slot, 620, 1502, 2),
    (item_set_slot, 620, 1508, 29),
    (item_set_slot, 620, 41, 90),
    (item_set_slot, 620, 44, 0),
    (item_set_slot, 620, 45, 0),
    (item_set_slot, 621, 1501, 300),
    (item_set_slot, 621, 1500, 0),
    (item_set_slot, 621, 1502, 2),
    (item_set_slot, 621, 1508, 29),
    (item_set_slot, 621, 41, 90),
    (item_set_slot, 621, 44, 0),
    (item_set_slot, 621, 45, 0),
    (item_set_slot, 622, 1501, 300),
    (item_set_slot, 622, 1500, 0),
    (item_set_slot, 622, 1502, 2),
    (item_set_slot, 622, 1508, 29),
    (item_set_slot, 622, 41, 90),
    (item_set_slot, 622, 44, 0),
    (item_set_slot, 622, 45, 0),
    (item_set_slot, 623, 1501, 300),
    (item_set_slot, 623, 1500, 0),
    (item_set_slot, 623, 1502, 2),
    (item_set_slot, 623, 1508, 29),
    (item_set_slot, 623, 41, 90),
    (item_set_slot, 623, 44, 0),
    (item_set_slot, 623, 45, 0),
    (item_set_slot, 624, 1501, 300),
    (item_set_slot, 624, 1500, 0),
    (item_set_slot, 624, 1502, 2),
    (item_set_slot, 624, 1508, 29),
    (item_set_slot, 624, 41, 90),
    (item_set_slot, 624, 44, 0),
    (item_set_slot, 624, 45, 0),
    (item_set_slot, 625, 1501, 200),
    (item_set_slot, 625, 1500, 0),
    (item_set_slot, 625, 1502, 2),
    (item_set_slot, 625, 1508, 29),
    (item_set_slot, 625, 41, 60),
    (item_set_slot, 625, 44, 0),
    (item_set_slot, 625, 45, 0),
    (item_set_slot, 626, 1501, 200),
    (item_set_slot, 626, 1500, 0),
    (item_set_slot, 626, 1502, 2),
    (item_set_slot, 626, 1508, 29),
    (item_set_slot, 626, 41, 60),
    (item_set_slot, 626, 44, 0),
    (item_set_slot, 626, 45, 0),
    (item_set_slot, 627, 1501, 200),
    (item_set_slot, 627, 1500, 0),
    (item_set_slot, 627, 1502, 2),
    (item_set_slot, 627, 1508, 29),
    (item_set_slot, 627, 41, 60),
    (item_set_slot, 627, 44, 0),
    (item_set_slot, 627, 45, 0),
    (item_set_slot, 628, 1501, 200),
    (item_set_slot, 628, 1500, 0),
    (item_set_slot, 628, 1502, 2),
    (item_set_slot, 628, 1508, 29),
    (item_set_slot, 628, 41, 60),
    (item_set_slot, 628, 44, 0),
    (item_set_slot, 628, 45, 0),
    (item_set_slot, 629, 1501, 250),
    (item_set_slot, 629, 1500, 0),
    (item_set_slot, 629, 1502, 2),
    (item_set_slot, 629, 1508, 29),
    (item_set_slot, 629, 41, 70),
    (item_set_slot, 629, 44, 0),
    (item_set_slot, 629, 45, 0),
    (item_set_slot, 630, 1501, 250),
    (item_set_slot, 630, 1500, 0),
    (item_set_slot, 630, 1502, 2),
    (item_set_slot, 630, 1508, 29),
    (item_set_slot, 630, 41, 70),
    (item_set_slot, 630, 44, 0),
    (item_set_slot, 630, 45, 0),
    (item_set_slot, 631, 1501, 150),
    (item_set_slot, 631, 1500, 0),
    (item_set_slot, 631, 1502, 2),
    (item_set_slot, 631, 1508, 29),
    (item_set_slot, 631, 41, 40),
    (item_set_slot, 631, 44, 0),
    (item_set_slot, 631, 45, 0),
    (item_set_slot, 632, 1501, 175),
    (item_set_slot, 632, 1500, 0),
    (item_set_slot, 632, 1502, 2),
    (item_set_slot, 632, 1508, 29),
    (item_set_slot, 632, 41, 50),
    (item_set_slot, 632, 44, 0),
    (item_set_slot, 632, 45, 0),
    (item_set_slot, 633, 1501, 175),
    (item_set_slot, 633, 1500, 0),
    (item_set_slot, 633, 1502, 2),
    (item_set_slot, 633, 1508, 29),
    (item_set_slot, 633, 41, 50),
    (item_set_slot, 633, 44, 0),
    (item_set_slot, 633, 45, 0),
    (item_set_slot, 634, 1501, 175),
    (item_set_slot, 634, 1500, 0),
    (item_set_slot, 634, 1502, 2),
    (item_set_slot, 634, 1508, 29),
    (item_set_slot, 634, 41, 50),
    (item_set_slot, 634, 44, 0),
    (item_set_slot, 634, 45, 0),
    (item_set_slot, 635, 1501, 200),
    (item_set_slot, 635, 1500, 0),
    (item_set_slot, 635, 1502, 0),
    (item_set_slot, 635, 1508, 26),
    (item_set_slot, 635, 41, 60),
    (item_set_slot, 635, 44, 0),
    (item_set_slot, 635, 45, 0),
    (item_set_slot, 636, 1501, 150),
    (item_set_slot, 636, 1500, 0),
    (item_set_slot, 636, 1502, 0),
    (item_set_slot, 636, 1508, 26),
    (item_set_slot, 636, 41, 40),
    (item_set_slot, 636, 44, 0),
    (item_set_slot, 636, 45, 0),
    (item_set_slot, 637, 1501, 200),
    (item_set_slot, 637, 1500, 0),
    (item_set_slot, 637, 1502, 0),
    (item_set_slot, 637, 1508, 26),
    (item_set_slot, 637, 41, 60),
    (item_set_slot, 637, 44, 0),
    (item_set_slot, 637, 45, 0),
    (item_set_slot, 638, 1501, 150),
    (item_set_slot, 638, 1500, 0),
    (item_set_slot, 638, 1502, 0),
    (item_set_slot, 638, 1508, 26),
    (item_set_slot, 638, 41, 40),
    (item_set_slot, 638, 44, 0),
    (item_set_slot, 638, 45, 0),
    (item_set_slot, 639, 1501, 200),
    (item_set_slot, 639, 1500, 0),
    (item_set_slot, 639, 1502, 0),
    (item_set_slot, 639, 1508, 26),
    (item_set_slot, 639, 41, 60),
    (item_set_slot, 639, 44, 0),
    (item_set_slot, 639, 45, 0),
    (item_set_slot, 640, 1501, 200),
    (item_set_slot, 640, 1500, 0),
    (item_set_slot, 640, 1502, 0),
    (item_set_slot, 640, 1508, 26),
    (item_set_slot, 640, 41, 60),
    (item_set_slot, 640, 44, 0),
    (item_set_slot, 640, 45, 0),
    (item_set_slot, 641, 1501, 200),
    (item_set_slot, 641, 1500, 0),
    (item_set_slot, 641, 1502, 0),
    (item_set_slot, 641, 1508, 26),
    (item_set_slot, 641, 41, 60),
    (item_set_slot, 641, 44, 0),
    (item_set_slot, 641, 45, 0),
    (item_set_slot, 642, 1501, 200),
    (item_set_slot, 642, 1500, 0),
    (item_set_slot, 642, 1502, 0),
    (item_set_slot, 642, 1508, 26),
    (item_set_slot, 642, 41, 60),
    (item_set_slot, 642, 44, 0),
    (item_set_slot, 642, 45, 0),
    (item_set_slot, 643, 1501, 200),
    (item_set_slot, 643, 1500, 0),
    (item_set_slot, 643, 1502, 2),
    (item_set_slot, 643, 1508, 29),
    (item_set_slot, 643, 41, 60),
    (item_set_slot, 643, 44, 0),
    (item_set_slot, 643, 45, 0),
    (item_set_slot, 644, 1501, 200),
    (item_set_slot, 644, 1500, 0),
    (item_set_slot, 644, 1502, 2),
    (item_set_slot, 644, 1508, 29),
    (item_set_slot, 644, 41, 60),
    (item_set_slot, 644, 44, 0),
    (item_set_slot, 644, 45, 0),
    (item_set_slot, 645, 1501, 100),
    (item_set_slot, 645, 1500, 0),
    (item_set_slot, 645, 1502, 0),
    (item_set_slot, 645, 1508, 26),
    (item_set_slot, 645, 41, 20),
    (item_set_slot, 645, 44, 0),
    (item_set_slot, 645, 45, 0),
    (item_set_slot, 646, 1501, 100),
    (item_set_slot, 646, 1500, 0),
    (item_set_slot, 646, 1502, 2),
    (item_set_slot, 646, 1508, 29),
    (item_set_slot, 646, 41, 20),
    (item_set_slot, 646, 44, 0),
    (item_set_slot, 646, 45, 0),
    (item_set_slot, 647, 1501, 175),
    (item_set_slot, 647, 1500, 0),
    (item_set_slot, 647, 1502, 2),
    (item_set_slot, 647, 1508, 29),
    (item_set_slot, 647, 41, 50),
    (item_set_slot, 647, 44, 0),
    (item_set_slot, 647, 45, 0),
    (item_set_slot, 648, 1501, 50),
    (item_set_slot, 648, 1500, 0),
    (item_set_slot, 648, 1502, 2),
    (item_set_slot, 648, 1508, 29),
    (item_set_slot, 648, 41, 8),
    (item_set_slot, 648, 44, 0),
    (item_set_slot, 648, 45, 0),
    (item_set_slot, 649, 1501, 200),
    (item_set_slot, 649, 1500, 0),
    (item_set_slot, 649, 1502, 2),
    (item_set_slot, 649, 1508, 29),
    (item_set_slot, 649, 41, 60),
    (item_set_slot, 649, 44, 0),
    (item_set_slot, 649, 45, 0),
    (item_set_slot, 650, 1501, 200),
    (item_set_slot, 650, 1500, 0),
    (item_set_slot, 650, 1502, 2),
    (item_set_slot, 650, 1508, 29),
    (item_set_slot, 650, 41, 60),
    (item_set_slot, 650, 44, 0),
    (item_set_slot, 650, 45, 0),
    (item_set_slot, 651, 1501, 50),
    (item_set_slot, 651, 1500, 0),
    (item_set_slot, 651, 1502, 0),
    (item_set_slot, 651, 1508, 26),
    (item_set_slot, 651, 41, 8),
    (item_set_slot, 651, 44, 0),
    (item_set_slot, 651, 45, 0),
    (item_set_slot, 652, 1501, 300),
    (item_set_slot, 652, 1500, 0),
    (item_set_slot, 652, 1502, 2),
    (item_set_slot, 652, 1508, 29),
    (item_set_slot, 652, 41, 90),
    (item_set_slot, 652, 44, 0),
    (item_set_slot, 652, 45, 0),
    (item_set_slot, 653, 1501, 250),
    (item_set_slot, 653, 1500, 0),
    (item_set_slot, 653, 1502, 2),
    (item_set_slot, 653, 1508, 29),
    (item_set_slot, 653, 41, 70),
    (item_set_slot, 653, 44, 0),
    (item_set_slot, 653, 45, 0),
    (item_set_slot, 654, 1501, 200),
    (item_set_slot, 654, 1500, 0),
    (item_set_slot, 654, 1502, 2),
    (item_set_slot, 654, 1508, 29),
    (item_set_slot, 654, 41, 60),
    (item_set_slot, 654, 44, 0),
    (item_set_slot, 654, 45, 0),
    (item_set_slot, 655, 1501, 200),
    (item_set_slot, 655, 1500, 0),
    (item_set_slot, 655, 1502, 2),
    (item_set_slot, 655, 1508, 29),
    (item_set_slot, 655, 41, 60),
    (item_set_slot, 655, 44, 0),
    (item_set_slot, 655, 45, 0),
    (item_set_slot, 656, 1501, 200),
    (item_set_slot, 656, 1500, 0),
    (item_set_slot, 656, 1502, 2),
    (item_set_slot, 656, 1508, 29),
    (item_set_slot, 656, 41, 60),
    (item_set_slot, 656, 44, 0),
    (item_set_slot, 656, 45, 0),
    (item_set_slot, 657, 1501, 100),
    (item_set_slot, 657, 1500, 0),
    (item_set_slot, 657, 1502, 1),
    (item_set_slot, 657, 1508, 29),
    (item_set_slot, 657, 41, 20),
    (item_set_slot, 657, 44, 0),
    (item_set_slot, 657, 45, 0),
    (item_set_slot, 658, 1501, 150),
    (item_set_slot, 658, 1500, 0),
    (item_set_slot, 658, 1502, 1),
    (item_set_slot, 658, 1508, 29),
    (item_set_slot, 658, 41, 40),
    (item_set_slot, 658, 44, 0),
    (item_set_slot, 658, 45, 0),
    (item_set_slot, 659, 1501, 100),
    (item_set_slot, 659, 1500, 0),
    (item_set_slot, 659, 1502, 1),
    (item_set_slot, 659, 1508, 29),
    (item_set_slot, 659, 41, 20),
    (item_set_slot, 659, 44, 0),
    (item_set_slot, 659, 45, 0),
    (item_set_slot, 660, 1501, 175),
    (item_set_slot, 660, 1500, 0),
    (item_set_slot, 660, 1502, 2),
    (item_set_slot, 660, 1508, 29),
    (item_set_slot, 660, 41, 50),
    (item_set_slot, 660, 44, 0),
    (item_set_slot, 660, 45, 0),
    (item_set_slot, 661, 1501, 175),
    (item_set_slot, 661, 1500, 0),
    (item_set_slot, 661, 1502, 2),
    (item_set_slot, 661, 1508, 29),
    (item_set_slot, 661, 41, 50),
    (item_set_slot, 661, 44, 0),
    (item_set_slot, 661, 45, 0),
    (item_set_slot, 662, 1501, 175),
    (item_set_slot, 662, 1500, 0),
    (item_set_slot, 662, 1502, 2),
    (item_set_slot, 662, 1508, 29),
    (item_set_slot, 662, 41, 50),
    (item_set_slot, 662, 44, 0),
    (item_set_slot, 662, 45, 0),
    (item_set_slot, 663, 1501, 300),
    (item_set_slot, 663, 1500, 0),
    (item_set_slot, 663, 1502, 2),
    (item_set_slot, 663, 1508, 29),
    (item_set_slot, 663, 41, 90),
    (item_set_slot, 663, 44, 0),
    (item_set_slot, 663, 45, 0),
    (item_set_slot, 664, 1501, 200),
    (item_set_slot, 664, 1500, 0),
    (item_set_slot, 664, 1502, 2),
    (item_set_slot, 664, 1508, 29),
    (item_set_slot, 664, 41, 60),
    (item_set_slot, 664, 44, 0),
    (item_set_slot, 664, 45, 0),
    (item_set_slot, 665, 1501, 175),
    (item_set_slot, 665, 1500, 0),
    (item_set_slot, 665, 1502, 2),
    (item_set_slot, 665, 1508, 29),
    (item_set_slot, 665, 41, 50),
    (item_set_slot, 665, 44, 0),
    (item_set_slot, 665, 45, 0),
    (item_set_slot, 666, 1501, 200),
    (item_set_slot, 666, 1500, 0),
    (item_set_slot, 666, 1502, 2),
    (item_set_slot, 666, 1508, 29),
    (item_set_slot, 666, 41, 60),
    (item_set_slot, 666, 44, 0),
    (item_set_slot, 666, 45, 0),
    (item_set_slot, 667, 1501, 200),
    (item_set_slot, 667, 1500, 0),
    (item_set_slot, 667, 1502, 2),
    (item_set_slot, 667, 1508, 29),
    (item_set_slot, 667, 41, 60),
    (item_set_slot, 667, 44, 0),
    (item_set_slot, 667, 45, 0),
    (item_set_slot, 668, 1501, 150),
    (item_set_slot, 668, 1500, 0),
    (item_set_slot, 668, 1502, 2),
    (item_set_slot, 668, 1508, 29),
    (item_set_slot, 668, 41, 40),
    (item_set_slot, 668, 44, 0),
    (item_set_slot, 668, 45, 0),
    (item_set_slot, 669, 1501, 150),
    (item_set_slot, 669, 1500, 0),
    (item_set_slot, 669, 1502, 2),
    (item_set_slot, 669, 1508, 29),
    (item_set_slot, 669, 41, 40),
    (item_set_slot, 669, 44, 0),
    (item_set_slot, 669, 45, 0),
    (item_set_slot, 670, 1501, 150),
    (item_set_slot, 670, 1500, 0),
    (item_set_slot, 670, 1502, 2),
    (item_set_slot, 670, 1508, 29),
    (item_set_slot, 670, 41, 40),
    (item_set_slot, 670, 44, 0),
    (item_set_slot, 670, 45, 0),
    (item_set_slot, 671, 1501, 150),
    (item_set_slot, 671, 1500, 0),
    (item_set_slot, 671, 1502, 2),
    (item_set_slot, 671, 1508, 29),
    (item_set_slot, 671, 41, 40),
    (item_set_slot, 671, 44, 0),
    (item_set_slot, 671, 45, 0),
    (item_set_slot, 672, 1501, 150),
    (item_set_slot, 672, 1500, 0),
    (item_set_slot, 672, 1508, 27),
    (item_set_slot, 672, 41, 40),
    (item_set_slot, 672, 44, 0),
    (item_set_slot, 672, 45, 0),
    (item_set_slot, 673, 1501, 200),
    (item_set_slot, 673, 1500, 0),
    (item_set_slot, 673, 1508, 27),
    (item_set_slot, 673, 41, 60),
    (item_set_slot, 673, 44, 0),
    (item_set_slot, 673, 45, 0),
    (item_set_slot, 674, 1501, 200),
    (item_set_slot, 674, 1500, 0),
    (item_set_slot, 674, 1508, 27),
    (item_set_slot, 674, 41, 60),
    (item_set_slot, 674, 44, 0),
    (item_set_slot, 674, 45, 0),
    (item_set_slot, 675, 1501, 200),
    (item_set_slot, 675, 1500, 0),
    (item_set_slot, 675, 1502, 1),
    (item_set_slot, 675, 1508, 29),
    (item_set_slot, 675, 41, 60),
    (item_set_slot, 675, 44, 0),
    (item_set_slot, 675, 45, 0),
    (item_set_slot, 676, 1501, 250),
    (item_set_slot, 676, 1500, 0),
    (item_set_slot, 676, 1502, 1),
    (item_set_slot, 676, 1508, 29),
    (item_set_slot, 676, 41, 70),
    (item_set_slot, 676, 44, 0),
    (item_set_slot, 676, 45, 0),
    (item_set_slot, 677, 1501, 250),
    (item_set_slot, 677, 1500, 0),
    (item_set_slot, 677, 1508, 27),
    (item_set_slot, 677, 41, 70),
    (item_set_slot, 677, 44, 0),
    (item_set_slot, 677, 45, 0),
    (item_set_slot, 678, 1501, 250),
    (item_set_slot, 678, 1500, 0),
    (item_set_slot, 678, 1502, 2),
    (item_set_slot, 678, 1508, 29),
    (item_set_slot, 678, 41, 70),
    (item_set_slot, 678, 44, 0),
    (item_set_slot, 678, 45, 0),
    (item_set_slot, 679, 1501, 200),
    (item_set_slot, 679, 1500, 0),
    (item_set_slot, 679, 1502, 2),
    (item_set_slot, 679, 1508, 29),
    (item_set_slot, 679, 41, 60),
    (item_set_slot, 679, 44, 0),
    (item_set_slot, 679, 45, 0),
    (item_set_slot, 680, 1501, 125),
    (item_set_slot, 680, 1500, 0),
    (item_set_slot, 680, 1508, 0),
    (item_set_slot, 680, 44, 256),
    (item_set_slot, 680, 45, 521),
    (item_set_slot, 680, 43, 97),
    (item_set_slot, 680, 42, 62),
    (item_set_slot, 681, 1501, 125),
    (item_set_slot, 681, 1500, 0),
    (item_set_slot, 681, 1508, 0),
    (item_set_slot, 681, 44, 256),
    (item_set_slot, 681, 45, 530),
    (item_set_slot, 681, 43, 97),
    (item_set_slot, 681, 42, 68),
    (item_set_slot, 682, 1501, 125),
    (item_set_slot, 682, 1500, 0),
    (item_set_slot, 682, 1508, 18),
    (item_set_slot, 682, 44, 256),
    (item_set_slot, 682, 45, 525),
    (item_set_slot, 682, 43, 98),
    (item_set_slot, 682, 42, 58),
    (item_set_slot, 683, 1501, 125),
    (item_set_slot, 683, 1500, 0),
    (item_set_slot, 683, 1508, 0),
    (item_set_slot, 683, 44, 256),
    (item_set_slot, 683, 45, 530),
    (item_set_slot, 683, 43, 97),
    (item_set_slot, 683, 42, 68),
    (item_set_slot, 684, 1501, 125),
    (item_set_slot, 684, 1500, 0),
    (item_set_slot, 684, 1508, 18),
    (item_set_slot, 684, 44, 256),
    (item_set_slot, 684, 45, 534),
    (item_set_slot, 684, 43, 97),
    (item_set_slot, 684, 42, 68),
    (item_set_slot, 685, 1501, 150),
    (item_set_slot, 685, 1500, 0),
    (item_set_slot, 685, 1508, 13),
    (item_set_slot, 685, 44, 256),
    (item_set_slot, 685, 45, 536),
    (item_set_slot, 685, 43, 96),
    (item_set_slot, 685, 42, 73),
    (item_set_slot, 686, 1501, 125),
    (item_set_slot, 686, 1500, 0),
    (item_set_slot, 686, 1508, 18),
    (item_set_slot, 686, 44, 256),
    (item_set_slot, 686, 45, 539),
    (item_set_slot, 686, 43, 98),
    (item_set_slot, 686, 42, 58),
    (item_set_slot, 687, 1501, 600),
    (item_set_slot, 687, 1500, 11),
    (item_set_slot, 687, 1508, 18),
    (item_set_slot, 687, 44, 256),
    (item_set_slot, 687, 45, 548),
    (item_set_slot, 687, 43, 87),
    (item_set_slot, 687, 42, 69),
    (item_set_slot, 688, 1501, 700),
    (item_set_slot, 688, 1500, 12),
    (item_set_slot, 688, 1508, 18),
    (item_set_slot, 688, 44, 256),
    (item_set_slot, 688, 45, 553),
    (item_set_slot, 688, 43, 86),
    (item_set_slot, 688, 42, 69),
    (item_set_slot, 689, 1501, 900),
    (item_set_slot, 689, 1500, 14),
    (item_set_slot, 689, 1508, 18),
    (item_set_slot, 689, 44, 256),
    (item_set_slot, 689, 45, 557),
    (item_set_slot, 689, 43, 83),
    (item_set_slot, 689, 42, 68),
    (item_set_slot, 690, 1501, 125),
    (item_set_slot, 690, 1500, 0),
    (item_set_slot, 690, 1508, 13),
    (item_set_slot, 690, 44, 256),
    (item_set_slot, 690, 45, 281),
    (item_set_slot, 690, 43, 97),
    (item_set_slot, 690, 42, 68),
    (item_set_slot, 691, 1501, 150),
    (item_set_slot, 691, 1500, 0),
    (item_set_slot, 691, 1508, 18),
    (item_set_slot, 691, 44, 256),
    (item_set_slot, 691, 45, 272),
    (item_set_slot, 691, 43, 95),
    (item_set_slot, 691, 42, 79),
    (item_set_slot, 692, 1501, 125),
    (item_set_slot, 692, 1500, 0),
    (item_set_slot, 692, 1508, 13),
    (item_set_slot, 692, 44, 256),
    (item_set_slot, 692, 45, 281),
    (item_set_slot, 692, 43, 97),
    (item_set_slot, 692, 42, 68),
    (item_set_slot, 693, 1501, 125),
    (item_set_slot, 693, 1500, 0),
    (item_set_slot, 693, 1508, 13),
    (item_set_slot, 693, 44, 256),
    (item_set_slot, 693, 45, 283),
    (item_set_slot, 693, 43, 97),
    (item_set_slot, 693, 42, 64),
    (item_set_slot, 694, 1501, 175),
    (item_set_slot, 694, 1500, 13),
    (item_set_slot, 694, 1508, 18),
    (item_set_slot, 694, 1510, 1),
    (item_set_slot, 694, 44, 256),
    (item_set_slot, 694, 45, 287),
    (item_set_slot, 694, 43, 93),
    (item_set_slot, 694, 42, 87),
    (item_set_slot, 695, 1501, 150),
    (item_set_slot, 695, 1500, 0),
    (item_set_slot, 695, 1508, 0),
    (item_set_slot, 695, 44, 256),
    (item_set_slot, 695, 45, 22),
    (item_set_slot, 695, 43, 99),
    (item_set_slot, 695, 42, 53),
    (item_set_slot, 696, 1501, 150),
    (item_set_slot, 696, 1500, 0),
    (item_set_slot, 696, 1508, 0),
    (item_set_slot, 696, 44, 256),
    (item_set_slot, 696, 45, 24),
    (item_set_slot, 696, 43, 103),
    (item_set_slot, 696, 42, 29),
    (item_set_slot, 697, 1501, 50),
    (item_set_slot, 697, 1500, 0),
    (item_set_slot, 697, 1508, 14),
    (item_set_slot, 697, 44, 276),
    (item_set_slot, 697, 45, 22),
    (item_set_slot, 697, 43, 110),
    (item_set_slot, 697, 42, 40),
    (item_set_slot, 698, 1501, 75),
    (item_set_slot, 698, 1500, 0),
    (item_set_slot, 698, 1508, 14),
    (item_set_slot, 698, 44, 286),
    (item_set_slot, 698, 45, 25),
    (item_set_slot, 698, 43, 108),
    (item_set_slot, 698, 42, 61),
    (item_set_slot, 699, 1501, 75),
    (item_set_slot, 699, 1500, 0),
    (item_set_slot, 699, 1508, 17),
    (item_set_slot, 699, 44, 291),
    (item_set_slot, 699, 45, 22),
    (item_set_slot, 699, 43, 109),
    (item_set_slot, 699, 42, 47),
    (item_set_slot, 700, 1501, 125),
    (item_set_slot, 700, 1500, 8),
    (item_set_slot, 700, 1508, 14),
    (item_set_slot, 700, 44, 261),
    (item_set_slot, 700, 45, 41),
    (item_set_slot, 700, 43, 101),
    (item_set_slot, 700, 42, 71),
    (item_set_slot, 701, 1501, 150),
    (item_set_slot, 701, 1500, 0),
    (item_set_slot, 701, 1508, 17),
    (item_set_slot, 701, 44, 256),
    (item_set_slot, 701, 45, 38),
    (item_set_slot, 701, 43, 98),
    (item_set_slot, 701, 42, 97),
    (item_set_slot, 702, 1501, 175),
    (item_set_slot, 702, 1500, 0),
    (item_set_slot, 702, 1508, 17),
    (item_set_slot, 702, 44, 256),
    (item_set_slot, 702, 45, 39),
    (item_set_slot, 702, 43, 97),
    (item_set_slot, 702, 42, 100),
    (item_set_slot, 703, 1501, 150),
    (item_set_slot, 703, 1500, 0),
    (item_set_slot, 703, 1508, 17),
    (item_set_slot, 703, 44, 275),
    (item_set_slot, 703, 45, 36),
    (item_set_slot, 703, 43, 98),
    (item_set_slot, 703, 42, 97),
    (item_set_slot, 704, 1501, 150),
    (item_set_slot, 704, 1500, 0),
    (item_set_slot, 704, 1508, 17),
    (item_set_slot, 704, 44, 281),
    (item_set_slot, 704, 45, 30),
    (item_set_slot, 704, 43, 98),
    (item_set_slot, 704, 42, 97),
    (item_set_slot, 705, 1501, 175),
    (item_set_slot, 705, 1500, 0),
    (item_set_slot, 705, 1508, 17),
    (item_set_slot, 705, 44, 265),
    (item_set_slot, 705, 45, 39),
    (item_set_slot, 705, 43, 96),
    (item_set_slot, 705, 42, 105),
    (item_set_slot, 706, 1501, 150),
    (item_set_slot, 706, 1500, 0),
    (item_set_slot, 706, 1508, 17),
    (item_set_slot, 706, 44, 276),
    (item_set_slot, 706, 45, 37),
    (item_set_slot, 706, 43, 98),
    (item_set_slot, 706, 42, 97),
    (item_set_slot, 707, 1501, 150),
    (item_set_slot, 707, 1500, 0),
    (item_set_slot, 707, 1508, 17),
    (item_set_slot, 707, 44, 274),
    (item_set_slot, 707, 45, 35),
    (item_set_slot, 707, 43, 98),
    (item_set_slot, 707, 42, 96),
    (item_set_slot, 708, 1501, 100),
    (item_set_slot, 708, 1500, 9),
    (item_set_slot, 708, 1508, 13),
    (item_set_slot, 708, 44, 0),
    (item_set_slot, 708, 45, 276),
    (item_set_slot, 708, 43, 98),
    (item_set_slot, 708, 42, 48),
    (item_set_slot, 709, 1501, 150),
    (item_set_slot, 709, 1500, 7),
    (item_set_slot, 709, 1508, 13),
    (item_set_slot, 709, 44, 522),
    (item_set_slot, 709, 45, 542),
    (item_set_slot, 709, 43, 97),
    (item_set_slot, 709, 42, 69),
    (item_set_slot, 710, 1501, 175),
    (item_set_slot, 710, 1500, 9),
    (item_set_slot, 710, 1508, 17),
    (item_set_slot, 710, 1510, 1),
    (item_set_slot, 710, 44, 277),
    (item_set_slot, 710, 45, 42),
    (item_set_slot, 710, 43, 93),
    (item_set_slot, 710, 42, 100),
    (item_set_slot, 711, 1501, 150),
    (item_set_slot, 711, 1500, 9),
    (item_set_slot, 711, 1508, 13),
    (item_set_slot, 711, 44, 0),
    (item_set_slot, 711, 45, 287),
    (item_set_slot, 711, 43, 95),
    (item_set_slot, 711, 42, 67),
    (item_set_slot, 712, 1501, 175),
    (item_set_slot, 712, 1500, 9),
    (item_set_slot, 712, 1508, 13),
    (item_set_slot, 712, 44, 0),
    (item_set_slot, 712, 45, 289),
    (item_set_slot, 712, 43, 95),
    (item_set_slot, 712, 42, 70),
    (item_set_slot, 713, 1501, 150),
    (item_set_slot, 713, 1500, 9),
    (item_set_slot, 713, 1508, 13),
    (item_set_slot, 713, 44, 0),
    (item_set_slot, 713, 45, 287),
    (item_set_slot, 713, 43, 95),
    (item_set_slot, 713, 42, 67),
    (item_set_slot, 714, 1501, 125),
    (item_set_slot, 714, 1500, 9),
    (item_set_slot, 714, 1508, 13),
    (item_set_slot, 714, 44, 0),
    (item_set_slot, 714, 45, 280),
    (item_set_slot, 714, 43, 98),
    (item_set_slot, 714, 42, 52),
    (item_set_slot, 715, 1501, 150),
    (item_set_slot, 715, 1500, 9),
    (item_set_slot, 715, 1508, 13),
    (item_set_slot, 715, 44, 0),
    (item_set_slot, 715, 45, 287),
    (item_set_slot, 715, 43, 95),
    (item_set_slot, 715, 42, 67),
    (item_set_slot, 716, 1501, 125),
    (item_set_slot, 716, 1500, 9),
    (item_set_slot, 716, 1508, 13),
    (item_set_slot, 716, 44, 0),
    (item_set_slot, 716, 45, 279),
    (item_set_slot, 716, 43, 98),
    (item_set_slot, 716, 42, 50),
    (item_set_slot, 717, 1501, 100),
    (item_set_slot, 717, 1500, 9),
    (item_set_slot, 717, 1508, 13),
    (item_set_slot, 717, 44, 0),
    (item_set_slot, 717, 45, 278),
    (item_set_slot, 717, 43, 98),
    (item_set_slot, 717, 42, 48),
    (item_set_slot, 718, 1501, 125),
    (item_set_slot, 718, 1500, 7),
    (item_set_slot, 718, 1508, 13),
    (item_set_slot, 718, 44, 0),
    (item_set_slot, 718, 45, 281),
    (item_set_slot, 718, 43, 97),
    (item_set_slot, 718, 42, 55),
    (item_set_slot, 719, 1501, 225),
    (item_set_slot, 719, 1500, 10),
    (item_set_slot, 719, 1508, 13),
    (item_set_slot, 719, 44, 0),
    (item_set_slot, 719, 45, 299),
    (item_set_slot, 719, 43, 86),
    (item_set_slot, 719, 42, 94),
    (item_set_slot, 720, 1501, 225),
    (item_set_slot, 720, 1500, 10),
    (item_set_slot, 720, 1508, 13),
    (item_set_slot, 720, 44, 0),
    (item_set_slot, 720, 45, 299),
    (item_set_slot, 720, 43, 86),
    (item_set_slot, 720, 42, 94),
    (item_set_slot, 721, 1501, 225),
    (item_set_slot, 721, 1500, 12),
    (item_set_slot, 721, 1508, 13),
    (item_set_slot, 721, 44, 0),
    (item_set_slot, 721, 45, 301),
    (item_set_slot, 721, 43, 84),
    (item_set_slot, 721, 42, 98),
    (item_set_slot, 722, 1501, 150),
    (item_set_slot, 722, 1500, 0),
    (item_set_slot, 722, 1508, 18),
    (item_set_slot, 722, 44, 256),
    (item_set_slot, 722, 45, 543),
    (item_set_slot, 722, 43, 96),
    (item_set_slot, 722, 42, 71),
    (item_set_slot, 723, 1501, 175),
    (item_set_slot, 723, 1500, 9),
    (item_set_slot, 723, 1508, 18),
    (item_set_slot, 723, 44, 256),
    (item_set_slot, 723, 45, 288),
    (item_set_slot, 723, 43, 94),
    (item_set_slot, 723, 42, 71),
    (item_set_slot, 724, 1501, 175),
    (item_set_slot, 724, 1500, 9),
    (item_set_slot, 724, 1508, 18),
    (item_set_slot, 724, 44, 256),
    (item_set_slot, 724, 45, 287),
    (item_set_slot, 724, 43, 95),
    (item_set_slot, 724, 42, 70),
    (item_set_slot, 725, 1501, 150),
    (item_set_slot, 725, 1500, 8),
    (item_set_slot, 725, 1508, 17),
    (item_set_slot, 725, 44, 278),
    (item_set_slot, 725, 45, 36),
    (item_set_slot, 725, 43, 98),
    (item_set_slot, 725, 42, 95),
    (item_set_slot, 726, 1501, 175),
    (item_set_slot, 726, 1500, 8),
    (item_set_slot, 726, 1508, 17),
    (item_set_slot, 726, 1510, 1),
    (item_set_slot, 726, 44, 281),
    (item_set_slot, 726, 45, 43),
    (item_set_slot, 726, 43, 93),
    (item_set_slot, 726, 42, 103),
    (item_set_slot, 727, 1501, 150),
    (item_set_slot, 727, 1500, 8),
    (item_set_slot, 727, 1508, 17),
    (item_set_slot, 727, 44, 278),
    (item_set_slot, 727, 45, 36),
    (item_set_slot, 727, 43, 98),
    (item_set_slot, 727, 42, 95),
    (item_set_slot, 728, 1501, 175),
    (item_set_slot, 728, 1500, 8),
    (item_set_slot, 728, 1508, 17),
    (item_set_slot, 728, 1510, 1),
    (item_set_slot, 728, 44, 281),
    (item_set_slot, 728, 45, 44),
    (item_set_slot, 728, 43, 92),
    (item_set_slot, 728, 42, 105),
    (item_set_slot, 729, 1501, 150),
    (item_set_slot, 729, 1500, 8),
    (item_set_slot, 729, 1508, 17),
    (item_set_slot, 729, 44, 278),
    (item_set_slot, 729, 45, 36),
    (item_set_slot, 729, 43, 98),
    (item_set_slot, 729, 42, 95),
    (item_set_slot, 730, 1501, 125),
    (item_set_slot, 730, 1500, 8),
    (item_set_slot, 730, 1508, 17),
    (item_set_slot, 730, 44, 292),
    (item_set_slot, 730, 45, 25),
    (item_set_slot, 730, 43, 100),
    (item_set_slot, 730, 42, 80),
    (item_set_slot, 731, 1501, 150),
    (item_set_slot, 731, 1500, 8),
    (item_set_slot, 731, 1508, 17),
    (item_set_slot, 731, 44, 282),
    (item_set_slot, 731, 45, 37),
    (item_set_slot, 731, 43, 99),
    (item_set_slot, 731, 42, 88),
    (item_set_slot, 732, 1501, 125),
    (item_set_slot, 732, 1500, 8),
    (item_set_slot, 732, 1508, 17),
    (item_set_slot, 732, 44, 288),
    (item_set_slot, 732, 45, 33),
    (item_set_slot, 732, 43, 100),
    (item_set_slot, 732, 42, 81),
    (item_set_slot, 733, 1501, 150),
    (item_set_slot, 733, 1500, 8),
    (item_set_slot, 733, 1508, 17),
    (item_set_slot, 733, 44, 276),
    (item_set_slot, 733, 45, 34),
    (item_set_slot, 733, 43, 99),
    (item_set_slot, 733, 42, 90),
    (item_set_slot, 734, 1501, 150),
    (item_set_slot, 734, 1500, 8),
    (item_set_slot, 734, 1508, 17),
    (item_set_slot, 734, 44, 276),
    (item_set_slot, 734, 45, 34),
    (item_set_slot, 734, 43, 99),
    (item_set_slot, 734, 42, 90),
    (item_set_slot, 735, 1501, 150),
    (item_set_slot, 735, 1500, 8),
    (item_set_slot, 735, 1508, 17),
    (item_set_slot, 735, 44, 276),
    (item_set_slot, 735, 45, 34),
    (item_set_slot, 735, 43, 99),
    (item_set_slot, 735, 42, 90),
    (item_set_slot, 736, 1501, 150),
    (item_set_slot, 736, 1500, 8),
    (item_set_slot, 736, 1508, 17),
    (item_set_slot, 736, 44, 276),
    (item_set_slot, 736, 45, 34),
    (item_set_slot, 736, 43, 99),
    (item_set_slot, 736, 42, 90),
    (item_set_slot, 737, 1501, 150),
    (item_set_slot, 737, 1500, 8),
    (item_set_slot, 737, 1508, 17),
    (item_set_slot, 737, 44, 276),
    (item_set_slot, 737, 45, 34),
    (item_set_slot, 737, 43, 99),
    (item_set_slot, 737, 42, 90),
    (item_set_slot, 738, 1501, 225),
    (item_set_slot, 738, 1500, 10),
    (item_set_slot, 738, 1508, 17),
    (item_set_slot, 738, 44, 0),
    (item_set_slot, 738, 45, 45),
    (item_set_slot, 738, 43, 85),
    (item_set_slot, 738, 42, 97),
    (item_set_slot, 739, 1501, 225),
    (item_set_slot, 739, 1500, 0),
    (item_set_slot, 739, 1508, 17),
    (item_set_slot, 739, 44, 256),
    (item_set_slot, 739, 45, 34),
    (item_set_slot, 739, 43, 88),
    (item_set_slot, 739, 42, 91),
    (item_set_slot, 740, 1501, 225),
    (item_set_slot, 740, 1500, 0),
    (item_set_slot, 740, 1508, 17),
    (item_set_slot, 740, 44, 256),
    (item_set_slot, 740, 45, 35),
    (item_set_slot, 740, 43, 88),
    (item_set_slot, 740, 42, 91),
    (item_set_slot, 741, 1501, 125),
    (item_set_slot, 741, 1500, 9),
    (item_set_slot, 741, 1508, 18),
    (item_set_slot, 741, 44, 256),
    (item_set_slot, 741, 45, 287),
    (item_set_slot, 741, 43, 101),
    (item_set_slot, 741, 42, 75),
    (item_set_slot, 742, 1501, 175),
    (item_set_slot, 742, 1500, 10),
    (item_set_slot, 742, 1508, 18),
    (item_set_slot, 742, 44, 256),
    (item_set_slot, 742, 45, 46),
    (item_set_slot, 742, 43, 93),
    (item_set_slot, 742, 42, 99),
    (item_set_slot, 743, 1501, 275),
    (item_set_slot, 743, 1500, 10),
    (item_set_slot, 743, 1508, 18),
    (item_set_slot, 743, 44, 531),
    (item_set_slot, 743, 45, 53),
    (item_set_slot, 743, 43, 75),
    (item_set_slot, 743, 42, 115),
    (item_set_slot, 744, 1501, 275),
    (item_set_slot, 744, 1500, 10),
    (item_set_slot, 744, 1508, 18),
    (item_set_slot, 744, 44, 256),
    (item_set_slot, 744, 45, 53),
    (item_set_slot, 744, 43, 75),
    (item_set_slot, 744, 42, 115),
    (item_set_slot, 745, 1501, 300),
    (item_set_slot, 745, 1500, 10),
    (item_set_slot, 745, 1508, 18),
    (item_set_slot, 745, 44, 530),
    (item_set_slot, 745, 45, 57),
    (item_set_slot, 745, 43, 71),
    (item_set_slot, 745, 42, 122),
    (item_set_slot, 746, 1501, 300),
    (item_set_slot, 746, 1500, 10),
    (item_set_slot, 746, 1508, 18),
    (item_set_slot, 746, 44, 256),
    (item_set_slot, 746, 45, 57),
    (item_set_slot, 746, 43, 71),
    (item_set_slot, 746, 42, 122),
    (item_set_slot, 747, 1501, 250),
    (item_set_slot, 747, 1500, 10),
    (item_set_slot, 747, 1508, 18),
    (item_set_slot, 747, 44, 256),
    (item_set_slot, 747, 45, 46),
    (item_set_slot, 747, 43, 83),
    (item_set_slot, 747, 42, 101),
    (item_set_slot, 748, 1501, 225),
    (item_set_slot, 748, 1500, 0),
    (item_set_slot, 748, 1508, 13),
    (item_set_slot, 748, 44, 271),
    (item_set_slot, 748, 45, 51),
    (item_set_slot, 748, 43, 83),
    (item_set_slot, 748, 42, 130),
    (item_set_slot, 749, 1501, 275),
    (item_set_slot, 749, 1500, 0),
    (item_set_slot, 749, 1508, 13),
    (item_set_slot, 749, 44, 272),
    (item_set_slot, 749, 45, 54),
    (item_set_slot, 749, 43, 75),
    (item_set_slot, 749, 42, 153),
    (item_set_slot, 750, 1501, 200),
    (item_set_slot, 750, 1500, 10),
    (item_set_slot, 750, 1508, 18),
    (item_set_slot, 750, 44, 256),
    (item_set_slot, 750, 45, 48),
    (item_set_slot, 750, 43, 90),
    (item_set_slot, 750, 42, 114),
    (item_set_slot, 751, 1501, 150),
    (item_set_slot, 751, 1500, 0),
    (item_set_slot, 751, 1508, 17),
    (item_set_slot, 751, 44, 277),
    (item_set_slot, 751, 45, 33),
    (item_set_slot, 751, 43, 98),
    (item_set_slot, 751, 42, 96),
    (item_set_slot, 752, 1501, 150),
    (item_set_slot, 752, 1500, 0),
    (item_set_slot, 752, 1508, 17),
    (item_set_slot, 752, 44, 277),
    (item_set_slot, 752, 45, 34),
    (item_set_slot, 752, 43, 98),
    (item_set_slot, 752, 42, 95),
    (item_set_slot, 753, 1501, 125),
    (item_set_slot, 753, 1500, 0),
    (item_set_slot, 753, 1508, 17),
    (item_set_slot, 753, 44, 277),
    (item_set_slot, 753, 45, 31),
    (item_set_slot, 753, 43, 100),
    (item_set_slot, 753, 42, 82),
    (item_set_slot, 754, 1501, 150),
    (item_set_slot, 754, 1500, 0),
    (item_set_slot, 754, 1508, 17),
    (item_set_slot, 754, 44, 277),
    (item_set_slot, 754, 45, 36),
    (item_set_slot, 754, 43, 98),
    (item_set_slot, 754, 42, 95),
    (item_set_slot, 755, 1501, 125),
    (item_set_slot, 755, 1500, 0),
    (item_set_slot, 755, 1508, 17),
    (item_set_slot, 755, 44, 289),
    (item_set_slot, 755, 45, 29),
    (item_set_slot, 755, 43, 100),
    (item_set_slot, 755, 42, 82),
    (item_set_slot, 756, 1501, 150),
    (item_set_slot, 756, 1500, 0),
    (item_set_slot, 756, 1508, 17),
    (item_set_slot, 756, 44, 0),
    (item_set_slot, 756, 45, 39),
    (item_set_slot, 756, 43, 99),
    (item_set_slot, 756, 42, 86),
    (item_set_slot, 757, 1501, 150),
    (item_set_slot, 757, 1500, 0),
    (item_set_slot, 757, 1508, 17),
    (item_set_slot, 757, 44, 0),
    (item_set_slot, 757, 45, 40),
    (item_set_slot, 757, 43, 99),
    (item_set_slot, 757, 42, 88),
    (item_set_slot, 758, 1501, 150),
    (item_set_slot, 758, 1500, 0),
    (item_set_slot, 758, 1508, 17),
    (item_set_slot, 758, 44, 0),
    (item_set_slot, 758, 45, 41),
    (item_set_slot, 758, 43, 99),
    (item_set_slot, 758, 42, 87),
    (item_set_slot, 759, 1501, 150),
    (item_set_slot, 759, 1500, 0),
    (item_set_slot, 759, 1508, 17),
    (item_set_slot, 759, 44, 0),
    (item_set_slot, 759, 45, 42),
    (item_set_slot, 759, 43, 99),
    (item_set_slot, 759, 42, 88),
    (item_set_slot, 760, 1501, 150),
    (item_set_slot, 760, 1500, 0),
    (item_set_slot, 760, 1508, 18),
    (item_set_slot, 760, 44, 256),
    (item_set_slot, 760, 45, 279),
    (item_set_slot, 760, 43, 96),
    (item_set_slot, 760, 42, 70),
    (item_set_slot, 761, 1501, 150),
    (item_set_slot, 761, 1500, 0),
    (item_set_slot, 761, 1508, 18),
    (item_set_slot, 761, 44, 256),
    (item_set_slot, 761, 45, 540),
    (item_set_slot, 761, 43, 96),
    (item_set_slot, 761, 42, 70),
    (item_set_slot, 762, 1501, 150),
    (item_set_slot, 762, 1500, 0),
    (item_set_slot, 762, 1508, 18),
    (item_set_slot, 762, 44, 256),
    (item_set_slot, 762, 45, 541),
    (item_set_slot, 762, 43, 96),
    (item_set_slot, 762, 42, 70),
    (item_set_slot, 763, 1501, 150),
    (item_set_slot, 763, 1500, 0),
    (item_set_slot, 763, 1508, 18),
    (item_set_slot, 763, 44, 256),
    (item_set_slot, 763, 45, 543),
    (item_set_slot, 763, 43, 96),
    (item_set_slot, 763, 42, 71),
    (item_set_slot, 764, 1501, 250),
    (item_set_slot, 764, 1500, 9),
    (item_set_slot, 764, 1508, 18),
    (item_set_slot, 764, 1510, 1),
    (item_set_slot, 764, 44, 280),
    (item_set_slot, 764, 45, 533),
    (item_set_slot, 764, 43, 72),
    (item_set_slot, 764, 42, 115),
    (item_set_slot, 765, 1501, 275),
    (item_set_slot, 765, 1500, 0),
    (item_set_slot, 765, 1508, 18),
    (item_set_slot, 765, 44, 518),
    (item_set_slot, 765, 45, 571),
    (item_set_slot, 765, 43, 79),
    (item_set_slot, 765, 42, 126),
    (item_set_slot, 766, 1501, 275),
    (item_set_slot, 766, 1500, 0),
    (item_set_slot, 766, 1508, 18),
    (item_set_slot, 766, 44, 519),
    (item_set_slot, 766, 45, 574),
    (item_set_slot, 766, 43, 79),
    (item_set_slot, 766, 42, 133),
    (item_set_slot, 767, 1501, 300),
    (item_set_slot, 767, 1500, 0),
    (item_set_slot, 767, 1508, 18),
    (item_set_slot, 767, 44, 520),
    (item_set_slot, 767, 45, 578),
    (item_set_slot, 767, 43, 71),
    (item_set_slot, 767, 42, 140),
    (item_set_slot, 768, 1501, 200),
    (item_set_slot, 768, 1500, 8),
    (item_set_slot, 768, 1508, 18),
    (item_set_slot, 768, 44, 520),
    (item_set_slot, 768, 45, 550),
    (item_set_slot, 768, 43, 92),
    (item_set_slot, 768, 42, 92),
    (item_set_slot, 769, 1501, 300),
    (item_set_slot, 769, 1500, 0),
    (item_set_slot, 769, 1508, 13),
    (item_set_slot, 769, 44, 25),
    (item_set_slot, 769, 45, 30),
    (item_set_slot, 769, 43, 88),
    (item_set_slot, 769, 42, 182),
    (item_set_slot, 770, 1501, 350),
    (item_set_slot, 770, 1500, 0),
    (item_set_slot, 770, 1508, 13),
    (item_set_slot, 770, 44, 279),
    (item_set_slot, 770, 45, 512),
    (item_set_slot, 770, 43, 91),
    (item_set_slot, 770, 42, 154),
    (item_set_slot, 771, 1501, 450),
    (item_set_slot, 771, 1500, 0),
    (item_set_slot, 771, 1508, 13),
    (item_set_slot, 771, 44, 284),
    (item_set_slot, 771, 45, 512),
    (item_set_slot, 771, 43, 91),
    (item_set_slot, 771, 42, 135),
    (item_set_slot, 772, 1501, 450),
    (item_set_slot, 772, 1500, 0),
    (item_set_slot, 772, 1508, 13),
    (item_set_slot, 772, 44, 291),
    (item_set_slot, 772, 45, 512),
    (item_set_slot, 772, 43, 93),
    (item_set_slot, 772, 42, 142),
    (item_set_slot, 773, 1501, 275),
    (item_set_slot, 773, 1500, 0),
    (item_set_slot, 773, 1508, 13),
    (item_set_slot, 773, 44, 35),
    (item_set_slot, 773, 45, 52),
    (item_set_slot, 773, 43, 72),
    (item_set_slot, 773, 42, 160),
    (item_set_slot, 774, 1501, 150),
    (item_set_slot, 774, 1500, 0),
    (item_set_slot, 774, 1508, 13),
    (item_set_slot, 774, 44, 520),
    (item_set_slot, 774, 45, 522),
    (item_set_slot, 774, 43, 94),
    (item_set_slot, 774, 42, 128),
    (item_set_slot, 775, 1501, 200),
    (item_set_slot, 775, 1500, 0),
    (item_set_slot, 775, 1508, 13),
    (item_set_slot, 775, 44, 522),
    (item_set_slot, 775, 45, 525),
    (item_set_slot, 775, 43, 93),
    (item_set_slot, 775, 42, 137),
    (item_set_slot, 776, 1501, 200),
    (item_set_slot, 776, 1500, 0),
    (item_set_slot, 776, 1508, 13),
    (item_set_slot, 776, 44, 524),
    (item_set_slot, 776, 45, 529),
    (item_set_slot, 776, 43, 89),
    (item_set_slot, 776, 42, 128),
    (item_set_slot, 777, 1501, 250),
    (item_set_slot, 777, 1500, 10),
    (item_set_slot, 777, 1508, 13),
    (item_set_slot, 777, 44, 284),
    (item_set_slot, 777, 45, 41),
    (item_set_slot, 777, 43, 89),
    (item_set_slot, 777, 42, 153),
    (item_set_slot, 778, 1501, 450),
    (item_set_slot, 778, 1500, 0),
    (item_set_slot, 778, 1508, 13),
    (item_set_slot, 778, 44, 284),
    (item_set_slot, 778, 45, 10),
    (item_set_slot, 778, 43, 86),
    (item_set_slot, 778, 42, 250),
    (item_set_slot, 779, 1501, 475),
    (item_set_slot, 779, 1500, 0),
    (item_set_slot, 779, 1508, 13),
    (item_set_slot, 779, 44, 286),
    (item_set_slot, 779, 45, 10),
    (item_set_slot, 779, 43, 85),
    (item_set_slot, 779, 42, 255),
    (item_set_slot, 780, 1501, 500),
    (item_set_slot, 780, 1500, 10),
    (item_set_slot, 780, 1508, 13),
    (item_set_slot, 780, 44, 290),
    (item_set_slot, 780, 45, 10),
    (item_set_slot, 780, 43, 82),
    (item_set_slot, 780, 42, 260),
    (item_set_slot, 781, 1501, 500),
    (item_set_slot, 781, 1500, 10),
    (item_set_slot, 781, 1508, 13),
    (item_set_slot, 781, 44, 292),
    (item_set_slot, 781, 45, 11),
    (item_set_slot, 781, 43, 80),
    (item_set_slot, 781, 42, 262),
    (item_set_slot, 782, 1501, 275),
    (item_set_slot, 782, 1500, 10),
    (item_set_slot, 782, 1508, 13),
    (item_set_slot, 782, 44, 296),
    (item_set_slot, 782, 45, 10),
    (item_set_slot, 782, 43, 82),
    (item_set_slot, 782, 42, 260),
    (item_set_slot, 783, 1501, 200),
    (item_set_slot, 783, 1500, 0),
    (item_set_slot, 783, 1508, 13),
    (item_set_slot, 783, 44, 286),
    (item_set_slot, 783, 45, 12),
    (item_set_slot, 783, 43, 87),
    (item_set_slot, 783, 42, 200),
    (item_set_slot, 784, 1501, 200),
    (item_set_slot, 784, 1500, 0),
    (item_set_slot, 784, 1508, 13),
    (item_set_slot, 784, 44, 286),
    (item_set_slot, 784, 45, 12),
    (item_set_slot, 784, 43, 87),
    (item_set_slot, 784, 42, 200),
    (item_set_slot, 785, 1501, 225),
    (item_set_slot, 785, 1500, 0),
    (item_set_slot, 785, 1508, 13),
    (item_set_slot, 785, 44, 302),
    (item_set_slot, 785, 45, 29),
    (item_set_slot, 785, 43, 99),
    (item_set_slot, 785, 42, 103),
    (item_set_slot, 786, 1501, 125),
    (item_set_slot, 786, 1500, 0),
    (item_set_slot, 786, 1508, 13),
    (item_set_slot, 786, 44, 307),
    (item_set_slot, 786, 45, 33),
    (item_set_slot, 786, 43, 98),
    (item_set_slot, 786, 42, 76),
    (item_set_slot, 787, 1501, 225),
    (item_set_slot, 787, 1500, 0),
    (item_set_slot, 787, 1508, 13),
    (item_set_slot, 787, 44, 301),
    (item_set_slot, 787, 45, 28),
    (item_set_slot, 787, 43, 99),
    (item_set_slot, 787, 42, 105),
    (item_set_slot, 788, 1501, 275),
    (item_set_slot, 788, 1500, 0),
    (item_set_slot, 788, 1508, 13),
    (item_set_slot, 788, 44, 297),
    (item_set_slot, 788, 45, 23),
    (item_set_slot, 788, 43, 91),
    (item_set_slot, 788, 42, 124),
    (item_set_slot, 789, 1501, 275),
    (item_set_slot, 789, 1500, 0),
    (item_set_slot, 789, 1508, 13),
    (item_set_slot, 789, 44, 297),
    (item_set_slot, 789, 45, 23),
    (item_set_slot, 789, 43, 91),
    (item_set_slot, 789, 42, 121),
    (item_set_slot, 790, 1501, 225),
    (item_set_slot, 790, 1500, 0),
    (item_set_slot, 790, 1508, 13),
    (item_set_slot, 790, 44, 288),
    (item_set_slot, 790, 45, 29),
    (item_set_slot, 790, 43, 89),
    (item_set_slot, 790, 42, 155),
    (item_set_slot, 791, 1501, 225),
    (item_set_slot, 791, 1500, 0),
    (item_set_slot, 791, 1508, 13),
    (item_set_slot, 791, 44, 302),
    (item_set_slot, 791, 45, 29),
    (item_set_slot, 791, 43, 95),
    (item_set_slot, 791, 42, 105),
    (item_set_slot, 792, 1501, 275),
    (item_set_slot, 792, 1500, 0),
    (item_set_slot, 792, 1508, 13),
    (item_set_slot, 792, 44, 289),
    (item_set_slot, 792, 45, 22),
    (item_set_slot, 792, 43, 90),
    (item_set_slot, 792, 42, 152),
    (item_set_slot, 793, 1501, 250),
    (item_set_slot, 793, 1500, 0),
    (item_set_slot, 793, 1508, 13),
    (item_set_slot, 793, 44, 297),
    (item_set_slot, 793, 45, 25),
    (item_set_slot, 793, 43, 91),
    (item_set_slot, 793, 42, 126),
    (item_set_slot, 794, 1501, 350),
    (item_set_slot, 794, 1500, 0),
    (item_set_slot, 794, 1508, 13),
    (item_set_slot, 794, 44, 286),
    (item_set_slot, 794, 45, 17),
    (item_set_slot, 794, 43, 91),
    (item_set_slot, 794, 42, 192),
    (item_set_slot, 795, 1501, 350),
    (item_set_slot, 795, 1500, 0),
    (item_set_slot, 795, 1508, 13),
    (item_set_slot, 795, 44, 288),
    (item_set_slot, 795, 45, 18),
    (item_set_slot, 795, 43, 92),
    (item_set_slot, 795, 42, 187),
    (item_set_slot, 796, 1501, 375),
    (item_set_slot, 796, 1500, 0),
    (item_set_slot, 796, 1508, 13),
    (item_set_slot, 796, 44, 284),
    (item_set_slot, 796, 45, 16),
    (item_set_slot, 796, 43, 91),
    (item_set_slot, 796, 42, 195),
    (item_set_slot, 797, 1501, 275),
    (item_set_slot, 797, 1500, 0),
    (item_set_slot, 797, 1508, 13),
    (item_set_slot, 797, 44, 297),
    (item_set_slot, 797, 45, 24),
    (item_set_slot, 797, 43, 93),
    (item_set_slot, 797, 42, 119),
    (item_set_slot, 798, 1501, 375),
    (item_set_slot, 798, 1500, 0),
    (item_set_slot, 798, 1508, 13),
    (item_set_slot, 798, 44, 285),
    (item_set_slot, 798, 45, 16),
    (item_set_slot, 798, 43, 88),
    (item_set_slot, 798, 42, 193),
    (item_set_slot, 799, 1501, 275),
    (item_set_slot, 799, 1500, 0),
    (item_set_slot, 799, 1508, 13),
    (item_set_slot, 799, 44, 297),
    (item_set_slot, 799, 45, 23),
    (item_set_slot, 799, 43, 112),
    (item_set_slot, 799, 42, 120),
    (item_set_slot, 800, 1501, 225),
    (item_set_slot, 800, 1500, 0),
    (item_set_slot, 800, 1508, 13),
    (item_set_slot, 800, 44, 299),
    (item_set_slot, 800, 45, 27),
    (item_set_slot, 800, 43, 94),
    (item_set_slot, 800, 42, 108),
    (item_set_slot, 801, 1501, 200),
    (item_set_slot, 801, 1500, 0),
    (item_set_slot, 801, 1508, 27),
    (item_set_slot, 801, 42, 50),
    (item_set_slot, 801, 44, 35),
    (item_set_slot, 801, 43, 100),
    (item_set_slot, 802, 1501, 200),
    (item_set_slot, 802, 1500, 0),
    (item_set_slot, 802, 1508, 27),
    (item_set_slot, 802, 42, 50),
    (item_set_slot, 802, 44, 38),
    (item_set_slot, 802, 43, 100),
    (item_set_slot, 803, 1501, 250),
    (item_set_slot, 803, 1500, 0),
    (item_set_slot, 803, 1508, 27),
    (item_set_slot, 803, 42, 40),
    (item_set_slot, 803, 44, 34),
    (item_set_slot, 803, 43, 41),
    (item_set_slot, 804, 1501, 200),
    (item_set_slot, 804, 1500, 0),
    (item_set_slot, 804, 1508, 27),
    (item_set_slot, 804, 42, 40),
    (item_set_slot, 804, 44, 32),
    (item_set_slot, 804, 43, 100),
    (item_set_slot, 805, 1501, 200),
    (item_set_slot, 805, 1500, 0),
    (item_set_slot, 805, 1508, 27),
    (item_set_slot, 805, 42, 40),
    (item_set_slot, 805, 44, 35),
    (item_set_slot, 805, 43, 105),
    (item_set_slot, 806, 1501, 250),
    (item_set_slot, 806, 1500, 0),
    (item_set_slot, 806, 1508, 27),
    (item_set_slot, 806, 42, 50),
    (item_set_slot, 806, 44, 48),
    (item_set_slot, 806, 43, 93),
    (item_set_slot, 807, 1501, 300),
    (item_set_slot, 807, 1500, 0),
    (item_set_slot, 807, 1508, 27),
    (item_set_slot, 807, 42, 50),
    (item_set_slot, 807, 44, 55),
    (item_set_slot, 807, 43, 90),
    (item_set_slot, 808, 1501, 350),
    (item_set_slot, 808, 1500, 0),
    (item_set_slot, 808, 1508, 27),
    (item_set_slot, 808, 42, 50),
    (item_set_slot, 808, 44, 61),
    (item_set_slot, 808, 43, 87),
    (item_set_slot, 809, 1501, 400),
    (item_set_slot, 809, 1500, 0),
    (item_set_slot, 809, 1508, 27),
    (item_set_slot, 809, 42, 50),
    (item_set_slot, 809, 44, 67),
    (item_set_slot, 809, 43, 84),
    (item_set_slot, 810, 1501, 450),
    (item_set_slot, 810, 1500, 0),
    (item_set_slot, 810, 1508, 27),
    (item_set_slot, 810, 42, 50),
    (item_set_slot, 810, 44, 69),
    (item_set_slot, 810, 43, 81),
    (item_set_slot, 811, 1501, 300),
    (item_set_slot, 811, 1500, 0),
    (item_set_slot, 811, 1508, 27),
    (item_set_slot, 811, 42, 36),
    (item_set_slot, 811, 44, 61),
    (item_set_slot, 811, 43, 90),
    (item_set_slot, 812, 1501, 200),
    (item_set_slot, 812, 1500, 0),
    (item_set_slot, 812, 1508, 27),
    (item_set_slot, 812, 42, 30),
    (item_set_slot, 812, 44, 67),
    (item_set_slot, 812, 43, 103),
    (item_set_slot, 813, 1501, 250),
    (item_set_slot, 813, 1500, 0),
    (item_set_slot, 813, 1508, 27),
    (item_set_slot, 813, 42, 30),
    (item_set_slot, 813, 44, 70),
    (item_set_slot, 813, 43, 100),
    (item_set_slot, 814, 1501, 300),
    (item_set_slot, 814, 1500, 0),
    (item_set_slot, 814, 1508, 27),
    (item_set_slot, 814, 42, 36),
    (item_set_slot, 814, 44, 61),
    (item_set_slot, 814, 43, 90),
    (item_set_slot, 815, 1501, 200),
    (item_set_slot, 815, 1500, 0),
    (item_set_slot, 815, 1508, 27),
    (item_set_slot, 815, 42, 30),
    (item_set_slot, 815, 44, 67),
    (item_set_slot, 815, 43, 103),
    (item_set_slot, 816, 1501, 250),
    (item_set_slot, 816, 1500, 0),
    (item_set_slot, 816, 1508, 27),
    (item_set_slot, 816, 42, 30),
    (item_set_slot, 816, 44, 70),
    (item_set_slot, 816, 43, 100),
    (item_set_slot, 817, 1501, 500),
    (item_set_slot, 817, 1500, 0),
    (item_set_slot, 817, 1508, 27),
    (item_set_slot, 817, 1505, 1),
    (item_set_slot, 817, 42, 43),
    (item_set_slot, 817, 44, 67),
    (item_set_slot, 817, 43, 78),
    (item_set_slot, 818, 1501, 200),
    (item_set_slot, 818, 1500, 0),
    (item_set_slot, 818, 1508, 27),
    (item_set_slot, 818, 42, 40),
    (item_set_slot, 818, 44, 61),
    (item_set_slot, 818, 43, 105),
    (item_set_slot, 819, 1501, 250),
    (item_set_slot, 819, 1500, 0),
    (item_set_slot, 819, 1508, 27),
    (item_set_slot, 819, 42, 40),
    (item_set_slot, 819, 44, 67),
    (item_set_slot, 819, 43, 103),
    (item_set_slot, 820, 1501, 300),
    (item_set_slot, 820, 1500, 0),
    (item_set_slot, 820, 1508, 27),
    (item_set_slot, 820, 42, 40),
    (item_set_slot, 820, 44, 70),
    (item_set_slot, 820, 43, 100),
    (item_set_slot, 821, 1501, 550),
    (item_set_slot, 821, 1500, 0),
    (item_set_slot, 821, 1508, 27),
    (item_set_slot, 821, 42, 40),
    (item_set_slot, 821, 44, 61),
    (item_set_slot, 821, 43, 81),
    (item_set_slot, 822, 1501, 550),
    (item_set_slot, 822, 1500, 0),
    (item_set_slot, 822, 1508, 27),
    (item_set_slot, 822, 42, 40),
    (item_set_slot, 822, 44, 61),
    (item_set_slot, 822, 43, 81),
    (item_set_slot, 823, 1501, 550),
    (item_set_slot, 823, 1500, 0),
    (item_set_slot, 823, 1508, 27),
    (item_set_slot, 823, 42, 40),
    (item_set_slot, 823, 44, 61),
    (item_set_slot, 823, 43, 81),
    (item_set_slot, 824, 1501, 550),
    (item_set_slot, 824, 1500, 0),
    (item_set_slot, 824, 1508, 27),
    (item_set_slot, 824, 42, 40),
    (item_set_slot, 824, 44, 61),
    (item_set_slot, 824, 43, 81),
    (item_set_slot, 825, 1501, 550),
    (item_set_slot, 825, 1500, 0),
    (item_set_slot, 825, 1508, 27),
    (item_set_slot, 825, 42, 40),
    (item_set_slot, 825, 44, 61),
    (item_set_slot, 825, 43, 81),
    (item_set_slot, 826, 1501, 550),
    (item_set_slot, 826, 1500, 0),
    (item_set_slot, 826, 1508, 27),
    (item_set_slot, 826, 42, 40),
    (item_set_slot, 826, 44, 61),
    (item_set_slot, 826, 43, 81),
    (item_set_slot, 827, 1501, 550),
    (item_set_slot, 827, 1500, 0),
    (item_set_slot, 827, 1508, 27),
    (item_set_slot, 827, 42, 40),
    (item_set_slot, 827, 44, 61),
    (item_set_slot, 827, 43, 81),
    (item_set_slot, 828, 1501, 550),
    (item_set_slot, 828, 1500, 0),
    (item_set_slot, 828, 1508, 27),
    (item_set_slot, 828, 42, 40),
    (item_set_slot, 828, 44, 61),
    (item_set_slot, 828, 43, 81),
    (item_set_slot, 829, 1501, 550),
    (item_set_slot, 829, 1500, 0),
    (item_set_slot, 829, 1508, 27),
    (item_set_slot, 829, 42, 40),
    (item_set_slot, 829, 44, 67),
    (item_set_slot, 829, 43, 81),
    (item_set_slot, 830, 1501, 350),
    (item_set_slot, 830, 1500, 0),
    (item_set_slot, 830, 1508, 27),
    (item_set_slot, 830, 42, 50),
    (item_set_slot, 830, 44, 61),
    (item_set_slot, 830, 43, 87),
    (item_set_slot, 831, 1501, 350),
    (item_set_slot, 831, 1500, 0),
    (item_set_slot, 831, 1508, 27),
    (item_set_slot, 831, 42, 50),
    (item_set_slot, 831, 44, 61),
    (item_set_slot, 831, 43, 87),
    (item_set_slot, 832, 1501, 350),
    (item_set_slot, 832, 1500, 0),
    (item_set_slot, 832, 1508, 27),
    (item_set_slot, 832, 42, 50),
    (item_set_slot, 832, 44, 61),
    (item_set_slot, 832, 43, 87),
    (item_set_slot, 833, 1501, 350),
    (item_set_slot, 833, 1500, 0),
    (item_set_slot, 833, 1508, 27),
    (item_set_slot, 833, 42, 50),
    (item_set_slot, 833, 44, 61),
    (item_set_slot, 833, 43, 87),
    (item_set_slot, 834, 1501, 350),
    (item_set_slot, 834, 1500, 0),
    (item_set_slot, 834, 1508, 27),
    (item_set_slot, 834, 42, 50),
    (item_set_slot, 834, 44, 61),
    (item_set_slot, 834, 43, 87),
    (item_set_slot, 835, 1501, 350),
    (item_set_slot, 835, 1500, 0),
    (item_set_slot, 835, 1508, 27),
    (item_set_slot, 835, 42, 50),
    (item_set_slot, 835, 44, 61),
    (item_set_slot, 835, 43, 87),
    (item_set_slot, 836, 1501, 350),
    (item_set_slot, 836, 1500, 0),
    (item_set_slot, 836, 1508, 27),
    (item_set_slot, 836, 42, 50),
    (item_set_slot, 836, 44, 61),
    (item_set_slot, 836, 43, 87),
    (item_set_slot, 837, 1501, 350),
    (item_set_slot, 837, 1500, 0),
    (item_set_slot, 837, 1508, 27),
    (item_set_slot, 837, 42, 50),
    (item_set_slot, 837, 44, 61),
    (item_set_slot, 837, 43, 87),
    (item_set_slot, 838, 1501, 350),
    (item_set_slot, 838, 1500, 0),
    (item_set_slot, 838, 1508, 27),
    (item_set_slot, 838, 42, 50),
    (item_set_slot, 838, 44, 61),
    (item_set_slot, 838, 43, 87),
    (item_set_slot, 839, 1501, 350),
    (item_set_slot, 839, 1500, 0),
    (item_set_slot, 839, 1508, 27),
    (item_set_slot, 839, 42, 50),
    (item_set_slot, 839, 44, 61),
    (item_set_slot, 839, 43, 87),
    (item_set_slot, 840, 1501, 350),
    (item_set_slot, 840, 1500, 0),
    (item_set_slot, 840, 1508, 27),
    (item_set_slot, 840, 42, 50),
    (item_set_slot, 840, 44, 61),
    (item_set_slot, 840, 43, 87),
    (item_set_slot, 841, 1501, 350),
    (item_set_slot, 841, 1500, 0),
    (item_set_slot, 841, 1508, 27),
    (item_set_slot, 841, 42, 50),
    (item_set_slot, 841, 44, 61),
    (item_set_slot, 841, 43, 87),
    (item_set_slot, 842, 1501, 100),
    (item_set_slot, 842, 1500, 0),
    (item_set_slot, 842, 1508, 27),
    (item_set_slot, 842, 42, 32),
    (item_set_slot, 842, 44, 24),
    (item_set_slot, 842, 43, 140),
    (item_set_slot, 843, 1501, 300),
    (item_set_slot, 843, 1500, 0),
    (item_set_slot, 843, 1508, 27),
    (item_set_slot, 843, 42, 36),
    (item_set_slot, 843, 44, 61),
    (item_set_slot, 843, 43, 90),
    (item_set_slot, 844, 1501, 250),
    (item_set_slot, 844, 1500, 0),
    (item_set_slot, 844, 1508, 27),
    (item_set_slot, 844, 42, 30),
    (item_set_slot, 844, 44, 61),
    (item_set_slot, 844, 43, 100),
    (item_set_slot, 845, 1501, 250),
    (item_set_slot, 845, 1500, 0),
    (item_set_slot, 845, 1508, 27),
    (item_set_slot, 845, 42, 36),
    (item_set_slot, 845, 44, 67),
    (item_set_slot, 845, 43, 93),
    (item_set_slot, 846, 1501, 550),
    (item_set_slot, 846, 1500, 0),
    (item_set_slot, 846, 1508, 27),
    (item_set_slot, 846, 42, 40),
    (item_set_slot, 846, 44, 67),
    (item_set_slot, 846, 43, 85),
    (item_set_slot, 847, 1501, 500),
    (item_set_slot, 847, 1500, 0),
    (item_set_slot, 847, 1508, 27),
    (item_set_slot, 847, 42, 30),
    (item_set_slot, 847, 44, 61),
    (item_set_slot, 847, 43, 90),
    (item_set_slot, 848, 1501, 300),
    (item_set_slot, 848, 1500, 0),
    (item_set_slot, 848, 1508, 27),
    (item_set_slot, 848, 42, 36),
    (item_set_slot, 848, 44, 61),
    (item_set_slot, 848, 43, 90),
    (item_set_slot, 849, 1501, 300),
    (item_set_slot, 849, 1500, 0),
    (item_set_slot, 849, 1508, 27),
    (item_set_slot, 849, 42, 36),
    (item_set_slot, 849, 44, 61),
    (item_set_slot, 849, 43, 90),
    (item_set_slot, 850, 1501, 450),
    (item_set_slot, 850, 1500, 0),
    (item_set_slot, 850, 1508, 27),
    (item_set_slot, 850, 42, 50),
    (item_set_slot, 850, 44, 69),
    (item_set_slot, 850, 43, 81),
    (item_set_slot, 851, 1501, 450),
    (item_set_slot, 851, 1500, 0),
    (item_set_slot, 851, 1508, 27),
    (item_set_slot, 851, 42, 50),
    (item_set_slot, 851, 44, 69),
    (item_set_slot, 851, 43, 81),
    (item_set_slot, 852, 1501, 450),
    (item_set_slot, 852, 1500, 0),
    (item_set_slot, 852, 1508, 27),
    (item_set_slot, 852, 42, 50),
    (item_set_slot, 852, 44, 69),
    (item_set_slot, 852, 43, 81),
    (item_set_slot, 853, 1501, 450),
    (item_set_slot, 853, 1500, 0),
    (item_set_slot, 853, 1508, 27),
    (item_set_slot, 853, 42, 50),
    (item_set_slot, 853, 44, 69),
    (item_set_slot, 853, 43, 81),
    (item_set_slot, 854, 1501, 450),
    (item_set_slot, 854, 1500, 0),
    (item_set_slot, 854, 1508, 27),
    (item_set_slot, 854, 42, 50),
    (item_set_slot, 854, 44, 69),
    (item_set_slot, 854, 43, 81),
    (item_set_slot, 855, 1501, 250),
    (item_set_slot, 855, 1500, 0),
    (item_set_slot, 855, 1508, 27),
    (item_set_slot, 855, 42, 30),
    (item_set_slot, 855, 44, 67),
    (item_set_slot, 855, 43, 100),
    (item_set_slot, 856, 1501, 250),
    (item_set_slot, 856, 1500, 0),
    (item_set_slot, 856, 1508, 27),
    (item_set_slot, 856, 42, 30),
    (item_set_slot, 856, 44, 67),
    (item_set_slot, 856, 43, 100),
    (item_set_slot, 857, 1501, 250),
    (item_set_slot, 857, 1500, 0),
    (item_set_slot, 857, 1508, 27),
    (item_set_slot, 857, 42, 30),
    (item_set_slot, 857, 44, 67),
    (item_set_slot, 857, 43, 100),
    (item_set_slot, 858, 1501, 250),
    (item_set_slot, 858, 1500, 0),
    (item_set_slot, 858, 1508, 27),
    (item_set_slot, 858, 42, 30),
    (item_set_slot, 858, 44, 67),
    (item_set_slot, 858, 43, 100),
    (item_set_slot, 859, 1501, 300),
    (item_set_slot, 859, 1500, 0),
    (item_set_slot, 859, 1508, 27),
    (item_set_slot, 859, 42, 40),
    (item_set_slot, 859, 44, 61),
    (item_set_slot, 859, 43, 90),
    (item_set_slot, 860, 1501, 400),
    (item_set_slot, 860, 1500, 2),
    (item_set_slot, 860, 1508, 42),
    (item_set_slot, 860, 44, 58),
    (item_set_slot, 860, 45, 0),
    (item_set_slot, 860, 43, 89),
    (item_set_slot, 860, 42, 65),
    (item_set_slot, 861, 1501, 500),
    (item_set_slot, 861, 1500, 1),
    (item_set_slot, 861, 1508, 42),
    (item_set_slot, 861, 44, 36),
    (item_set_slot, 861, 45, 0),
    (item_set_slot, 861, 43, 95),
    (item_set_slot, 861, 42, 32),
    (item_set_slot, 862, 1501, 500),
    (item_set_slot, 862, 1500, 1),
    (item_set_slot, 862, 1508, 42),
    (item_set_slot, 862, 44, 38),
    (item_set_slot, 862, 45, 0),
    (item_set_slot, 862, 43, 93),
    (item_set_slot, 862, 42, 45),
    (item_set_slot, 863, 1501, 500),
    (item_set_slot, 863, 1500, 1),
    (item_set_slot, 863, 1508, 42),
    (item_set_slot, 863, 44, 63),
    (item_set_slot, 863, 45, 0),
    (item_set_slot, 863, 43, 91),
    (item_set_slot, 863, 42, 75),
    (item_set_slot, 864, 1501, 500),
    (item_set_slot, 864, 1500, 1),
    (item_set_slot, 864, 1508, 42),
    (item_set_slot, 864, 44, 63),
    (item_set_slot, 864, 45, 0),
    (item_set_slot, 864, 43, 91),
    (item_set_slot, 864, 42, 75),
    (item_set_slot, 865, 1501, 400),
    (item_set_slot, 865, 1500, 2),
    (item_set_slot, 865, 1508, 42),
    (item_set_slot, 865, 44, 72),
    (item_set_slot, 865, 45, 0),
    (item_set_slot, 865, 43, 87),
    (item_set_slot, 865, 42, 65),
    (item_set_slot, 866, 1501, 400),
    (item_set_slot, 866, 1500, 0),
    (item_set_slot, 866, 1508, 42),
    (item_set_slot, 866, 44, 516),
    (item_set_slot, 866, 45, 0),
    (item_set_slot, 866, 43, 97),
    (item_set_slot, 866, 42, 8),
    (item_set_slot, 867, 1501, 350),
    (item_set_slot, 867, 1500, 0),
    (item_set_slot, 867, 1508, 42),
    (item_set_slot, 867, 44, 13),
    (item_set_slot, 867, 45, 0),
    (item_set_slot, 867, 43, 110),
    (item_set_slot, 867, 42, 0),
    (item_set_slot, 868, 1501, 350),
    (item_set_slot, 868, 1500, 0),
    (item_set_slot, 868, 1508, 42),
    (item_set_slot, 868, 44, 15),
    (item_set_slot, 868, 45, 0),
    (item_set_slot, 868, 43, 102),
    (item_set_slot, 868, 42, 0),
    (item_set_slot, 869, 1501, 500),
    (item_set_slot, 869, 1500, 2),
    (item_set_slot, 869, 1508, 42),
    (item_set_slot, 869, 44, 35),
    (item_set_slot, 869, 45, 0),
    (item_set_slot, 869, 43, 90),
    (item_set_slot, 869, 42, 53),
    (item_set_slot, 870, 1501, 100),
    (item_set_slot, 870, 1500, 2),
    (item_set_slot, 870, 1508, 42),
    (item_set_slot, 870, 44, 0),
    (item_set_slot, 870, 45, 26),
    (item_set_slot, 870, 43, 99),
    (item_set_slot, 870, 42, 53),
    (item_set_slot, 871, 1501, 100),
    (item_set_slot, 871, 1500, 0),
    (item_set_slot, 871, 1508, 17),
    (item_set_slot, 871, 44, 5),
    (item_set_slot, 871, 45, 0),
    (item_set_slot, 871, 43, 75),
    (item_set_slot, 871, 42, 0),
    (item_set_slot, 872, 1501, 100),
    (item_set_slot, 872, 1500, 3),
    (item_set_slot, 872, 1508, 17),
    (item_set_slot, 872, 44, 6),
    (item_set_slot, 872, 45, 0),
    (item_set_slot, 872, 43, 70),
    (item_set_slot, 872, 42, 0),
    (item_set_slot, 873, 1501, 125),
    (item_set_slot, 873, 1500, 4),
    (item_set_slot, 873, 1508, 17),
    (item_set_slot, 873, 44, 9),
    (item_set_slot, 873, 45, 0),
    (item_set_slot, 873, 43, 60),
    (item_set_slot, 873, 42, 0),
    (item_set_slot, 874, 1501, 175),
    (item_set_slot, 874, 1500, 5),
    (item_set_slot, 874, 1508, 17),
    (item_set_slot, 874, 1505, 1),
    (item_set_slot, 874, 44, 8),
    (item_set_slot, 874, 45, 0),
    (item_set_slot, 874, 43, 45),
    (item_set_slot, 874, 42, 0),
    (item_set_slot, 875, 1501, 125),
    (item_set_slot, 875, 1500, 6),
    (item_set_slot, 875, 1508, 17),
    (item_set_slot, 875, 44, 8),
    (item_set_slot, 875, 45, 0),
    (item_set_slot, 875, 43, 50),
    (item_set_slot, 875, 42, 0),
    (item_set_slot, 876, 1501, 125),
    (item_set_slot, 876, 1500, 2),
    (item_set_slot, 876, 1508, 17),
    (item_set_slot, 876, 44, 7),
    (item_set_slot, 876, 45, 0),
    (item_set_slot, 876, 43, 47),
    (item_set_slot, 876, 42, 0),
    (item_set_slot, 877, 1501, 225),
    (item_set_slot, 877, 1500, 0),
    (item_set_slot, 877, 1508, 17),
    (item_set_slot, 877, 44, 30),
    (item_set_slot, 877, 45, 0),
    (item_set_slot, 877, 43, 45),
    (item_set_slot, 877, 42, 0),
    (item_set_slot, 878, 1501, 250),
    (item_set_slot, 878, 1500, 7),
    (item_set_slot, 878, 1508, 17),
    (item_set_slot, 878, 44, 32),
    (item_set_slot, 878, 45, 0),
    (item_set_slot, 878, 43, 35),
    (item_set_slot, 878, 42, 0),
    (item_set_slot, 879, 1501, 300),
    (item_set_slot, 879, 1500, 8),
    (item_set_slot, 879, 1508, 17),
    (item_set_slot, 879, 44, 36),
    (item_set_slot, 879, 45, 0),
    (item_set_slot, 879, 43, 30),
    (item_set_slot, 879, 42, 0),
    (item_set_slot, 880, 1501, 350),
    (item_set_slot, 880, 1500, 9),
    (item_set_slot, 880, 1508, 17),
    (item_set_slot, 880, 44, 44),
    (item_set_slot, 880, 45, 0),
    (item_set_slot, 880, 43, 25),
    (item_set_slot, 880, 42, 0),
    (item_set_slot, 881, 1501, 375),
    (item_set_slot, 881, 1500, 10),
    (item_set_slot, 881, 1508, 17),
    (item_set_slot, 881, 44, 50),
    (item_set_slot, 881, 45, 0),
    (item_set_slot, 881, 43, 20),
    (item_set_slot, 881, 42, 0),
    (item_set_slot, 882, 1501, 250),
    (item_set_slot, 882, 1500, 0),
    (item_set_slot, 882, 1508, 0),
    (item_set_slot, 882, 44, 256),
    (item_set_slot, 882, 45, 523),
    (item_set_slot, 882, 43, 95),
    (item_set_slot, 882, 42, 95),
    (item_set_slot, 883, 1501, 250),
    (item_set_slot, 883, 1500, 0),
    (item_set_slot, 883, 1508, 0),
    (item_set_slot, 883, 42, 90),
    (item_set_slot, 883, 44, 1),
    (item_set_slot, 883, 43, 82),
    (item_set_slot, 884, 1501, 250),
    (item_set_slot, 884, 1500, 0),
    (item_set_slot, 884, 1508, 0),
    (item_set_slot, 884, 42, 90),
    (item_set_slot, 884, 44, 1),
    (item_set_slot, 884, 43, 82),
    (item_set_slot, 885, 1501, 200),
    (item_set_slot, 885, 1500, 0),
    (item_set_slot, 885, 1502, 0),
    (item_set_slot, 885, 1508, 26),
    (item_set_slot, 885, 41, 60),
    (item_set_slot, 885, 44, 0),
    (item_set_slot, 885, 45, 0),
    (item_set_slot, 886, 1501, 200),
    (item_set_slot, 886, 1500, 0),
    (item_set_slot, 886, 1502, 0),
    (item_set_slot, 886, 1508, 26),
    (item_set_slot, 886, 41, 60),
    (item_set_slot, 886, 44, 0),
    (item_set_slot, 886, 45, 0),
    (item_set_slot, 887, 1501, 200),
    (item_set_slot, 887, 1500, 0),
    (item_set_slot, 887, 1502, 0),
    (item_set_slot, 887, 1508, 26),
    (item_set_slot, 887, 41, 60),
    (item_set_slot, 887, 44, 0),
    (item_set_slot, 887, 45, 0),
    (item_set_slot, 888, 1501, 100),
    (item_set_slot, 888, 1500, 0),
    (item_set_slot, 888, 1502, 0),
    (item_set_slot, 888, 1508, 26),
    (item_set_slot, 888, 41, 0),
    (item_set_slot, 888, 44, 0),
    (item_set_slot, 888, 45, 35),
    (item_set_slot, 889, 1501, 100),
    (item_set_slot, 889, 1500, 0),
    (item_set_slot, 889, 1502, 0),
    (item_set_slot, 889, 1508, 26),
    (item_set_slot, 889, 41, 0),
    (item_set_slot, 889, 44, 6),
    (item_set_slot, 889, 45, 2),
    (item_set_slot, 890, 1501, 500),
    (item_set_slot, 890, 1500, 0),
    (item_set_slot, 890, 1508, 42),
    (item_set_slot, 890, 44, 0),
    (item_set_slot, 890, 45, 29),
    (item_set_slot, 890, 43, 98),
    (item_set_slot, 890, 42, 53),
    (item_set_slot, 891, 1501, 300),
    (item_set_slot, 891, 1500, 0),
    (item_set_slot, 891, 1502, 0),
    (item_set_slot, 891, 1508, 26),
    (item_set_slot, 891, 41, 0),
    (item_set_slot, 891, 44, 10),
    (item_set_slot, 891, 45, 10),
    (item_set_slot, 892, 1501, 50),
    (item_set_slot, 892, 1500, 0),
    (item_set_slot, 892, 1502, 0),
    (item_set_slot, 892, 1508, 26),
    (item_set_slot, 892, 41, 4),
    (item_set_slot, 892, 44, 0),
    (item_set_slot, 892, 45, 0),
    (item_set_slot, 893, 1501, 100),
    (item_set_slot, 893, 1500, 0),
    (item_set_slot, 893, 1502, 0),
    (item_set_slot, 893, 1508, 26),
    (item_set_slot, 893, 41, 0),
    (item_set_slot, 893, 44, 0),
    (item_set_slot, 893, 45, 8),
    (item_set_slot, 894, 1501, 150),
    (item_set_slot, 894, 1500, 0),
    (item_set_slot, 894, 1508, 17),
    (item_set_slot, 894, 44, 533),
    (item_set_slot, 894, 45, 0),
    (item_set_slot, 894, 43, 90),
    (item_set_slot, 894, 42, 0),
    (item_set_slot, 895, 1501, 150),
    (item_set_slot, 895, 1500, 0),
    (item_set_slot, 895, 1508, 42),
    (item_set_slot, 895, 44, 0),
    (item_set_slot, 895, 45, 0),
    (item_set_slot, 895, 43, 0),
    (item_set_slot, 895, 42, 95),
    (item_set_slot, 896, 1501, 2200),
    (item_set_slot, 896, 1500, 0),
    (item_set_slot, 896, 1502, 1),
    (item_set_slot, 896, 1508, 29),
    (item_set_slot, 896, 41, 0),
    (item_set_slot, 896, 44, 1),
    (item_set_slot, 896, 45, 1),
    (item_set_slot, 897, 1501, 75),
    (item_set_slot, 897, 1500, 8),
    (item_set_slot, 897, 1508, 14),
    (item_set_slot, 897, 44, 15),
    (item_set_slot, 897, 45, 39),
    (item_set_slot, 897, 43, 102),
    (item_set_slot, 897, 42, 51),
    (item_set_slot, 898, 1501, 1600),
    (item_set_slot, 898, 1500, 0),
    (item_set_slot, 898, 1502, 0),
    (item_set_slot, 898, 1508, 26),
    (item_set_slot, 898, 41, 0),
    (item_set_slot, 898, 44, 35),
    (item_set_slot, 898, 45, 8),
    (item_set_slot, 899, 1501, 3100),
    (item_set_slot, 899, 1500, 12),
    (item_set_slot, 899, 1502, 1),
    (item_set_slot, 899, 1508, 29),
    (item_set_slot, 899, 41, 0),
    (item_set_slot, 899, 44, 64),
    (item_set_slot, 899, 45, 24),
    (item_set_slot, 900, 1501, 3100),
    (item_set_slot, 900, 1500, 12),
    (item_set_slot, 900, 1502, 1),
    (item_set_slot, 900, 1508, 29),
    (item_set_slot, 900, 41, 0),
    (item_set_slot, 900, 44, 64),
    (item_set_slot, 900, 45, 24),
    (item_set_slot, 901, 1501, 3100),
    (item_set_slot, 901, 1500, 12),
    (item_set_slot, 901, 1502, 1),
    (item_set_slot, 901, 1508, 29),
    (item_set_slot, 901, 41, 0),
    (item_set_slot, 901, 44, 64),
    (item_set_slot, 901, 45, 24),
    (item_set_slot, 902, 1501, 600),
    (item_set_slot, 902, 1500, 1),
    (item_set_slot, 902, 1502, 0),
    (item_set_slot, 902, 1508, 26),
    (item_set_slot, 902, 41, 0),
    (item_set_slot, 902, 44, 12),
    (item_set_slot, 902, 45, 5),
    (item_set_slot, 903, 1501, 600),
    (item_set_slot, 903, 1500, 1),
    (item_set_slot, 903, 1502, 0),
    (item_set_slot, 903, 1508, 26),
    (item_set_slot, 903, 41, 0),
    (item_set_slot, 903, 44, 12),
    (item_set_slot, 903, 45, 5),
    (item_set_slot, 904, 1501, 600),
    (item_set_slot, 904, 1500, 1),
    (item_set_slot, 904, 1502, 0),
    (item_set_slot, 904, 1508, 26),
    (item_set_slot, 904, 41, 0),
    (item_set_slot, 904, 44, 12),
    (item_set_slot, 904, 45, 5),
    (item_set_slot, 905, 1501, 1400),
    (item_set_slot, 905, 1500, 5),
    (item_set_slot, 905, 1502, 0),
    (item_set_slot, 905, 1508, 26),
    (item_set_slot, 905, 41, 0),
    (item_set_slot, 905, 44, 26),
    (item_set_slot, 905, 45, 12),
    (item_set_slot, 906, 1501, 1400),
    (item_set_slot, 906, 1500, 5),
    (item_set_slot, 906, 1502, 0),
    (item_set_slot, 906, 1508, 26),
    (item_set_slot, 906, 41, 0),
    (item_set_slot, 906, 44, 26),
    (item_set_slot, 906, 45, 12),
    (item_set_slot, 907, 1501, 1400),
    (item_set_slot, 907, 1500, 5),
    (item_set_slot, 907, 1502, 0),
    (item_set_slot, 907, 1508, 26),
    (item_set_slot, 907, 41, 0),
    (item_set_slot, 907, 44, 26),
    (item_set_slot, 907, 45, 12),
    (item_set_slot, 908, 1501, 1400),
    (item_set_slot, 908, 1500, 5),
    (item_set_slot, 908, 1502, 0),
    (item_set_slot, 908, 1508, 26),
    (item_set_slot, 908, 41, 0),
    (item_set_slot, 908, 44, 26),
    (item_set_slot, 908, 45, 12),
    (item_set_slot, 909, 1501, 1400),
    (item_set_slot, 909, 1500, 5),
    (item_set_slot, 909, 1502, 0),
    (item_set_slot, 909, 1508, 26),
    (item_set_slot, 909, 41, 0),
    (item_set_slot, 909, 44, 26),
    (item_set_slot, 909, 45, 12),
    (item_set_slot, 910, 1501, 2100),
    (item_set_slot, 910, 1500, 9),
    (item_set_slot, 910, 1502, 1),
    (item_set_slot, 910, 1508, 29),
    (item_set_slot, 910, 41, 0),
    (item_set_slot, 910, 44, 41),
    (item_set_slot, 910, 45, 17),
    (item_set_slot, 911, 1501, 2100),
    (item_set_slot, 911, 1500, 9),
    (item_set_slot, 911, 1502, 1),
    (item_set_slot, 911, 1508, 29),
    (item_set_slot, 911, 41, 0),
    (item_set_slot, 911, 44, 41),
    (item_set_slot, 911, 45, 17),
    (item_set_slot, 912, 1501, 3100),
    (item_set_slot, 912, 1500, 12),
    (item_set_slot, 912, 1502, 1),
    (item_set_slot, 912, 1508, 29),
    (item_set_slot, 912, 41, 0),
    (item_set_slot, 912, 44, 64),
    (item_set_slot, 912, 45, 24),
    (item_set_slot, 913, 1501, 3100),
    (item_set_slot, 913, 1500, 12),
    (item_set_slot, 913, 1502, 1),
    (item_set_slot, 913, 1508, 29),
    (item_set_slot, 913, 41, 0),
    (item_set_slot, 913, 44, 64),
    (item_set_slot, 913, 45, 24),
    (item_set_slot, 914, 1501, 150),
    (item_set_slot, 914, 1500, 0),
    (item_set_slot, 914, 1508, 27),
    (item_set_slot, 914, 41, 40),
    (item_set_slot, 914, 44, 0),
    (item_set_slot, 914, 45, 0),
    (item_set_slot, 915, 1501, 0),
    (item_set_slot, 915, 1500, 4),
    (item_set_slot, 915, 1508, 36),
    (item_set_slot, 915, 41, 38),
    (item_set_slot, 915, 44, 45),
    (item_set_slot, 915, 45, 38),
    (item_set_slot, 916, 1501, 1800),
    (item_set_slot, 916, 1500, 8),
    (item_set_slot, 916, 1502, 0),
    (item_set_slot, 916, 1508, 26),
    (item_set_slot, 916, 41, 0),
    (item_set_slot, 916, 44, 33),
    (item_set_slot, 916, 45, 14),
    (item_set_slot, 917, 1501, 2100),
    (item_set_slot, 917, 1500, 9),
    (item_set_slot, 917, 1502, 1),
    (item_set_slot, 917, 1508, 29),
    (item_set_slot, 917, 41, 0),
    (item_set_slot, 917, 44, 41),
    (item_set_slot, 917, 45, 17),
    (item_set_slot, 918, 1501, 2100),
    (item_set_slot, 918, 1500, 9),
    (item_set_slot, 918, 1502, 1),
    (item_set_slot, 918, 1508, 29),
    (item_set_slot, 918, 41, 0),
    (item_set_slot, 918, 44, 41),
    (item_set_slot, 918, 45, 17),
    (item_set_slot, 919, 1501, 200),
    (item_set_slot, 919, 1500, 0),
    (item_set_slot, 919, 1502, 2),
    (item_set_slot, 919, 1508, 29),
    (item_set_slot, 919, 41, 60),
    (item_set_slot, 919, 44, 0),
    (item_set_slot, 919, 45, 0),
    (item_set_slot, 920, 1501, 200),
    (item_set_slot, 920, 1500, 0),
    (item_set_slot, 920, 1502, 2),
    (item_set_slot, 920, 1508, 29),
    (item_set_slot, 920, 41, 60),
    (item_set_slot, 920, 44, 0),
    (item_set_slot, 920, 45, 0),
    (item_set_slot, 921, 1501, 3100),
    (item_set_slot, 921, 1500, 12),
    (item_set_slot, 921, 1502, 1),
    (item_set_slot, 921, 1508, 29),
    (item_set_slot, 921, 41, 0),
    (item_set_slot, 921, 44, 64),
    (item_set_slot, 921, 45, 24),
    (item_set_slot, 922, 1501, 1400),
    (item_set_slot, 922, 1500, 5),
    (item_set_slot, 922, 1502, 0),
    (item_set_slot, 922, 1508, 26),
    (item_set_slot, 922, 41, 0),
    (item_set_slot, 922, 44, 26),
    (item_set_slot, 922, 45, 12),
    (item_set_slot, 923, 1501, 200),
    (item_set_slot, 923, 1500, 0),
    (item_set_slot, 923, 1508, 27),
    (item_set_slot, 923, 42, 50),
    (item_set_slot, 923, 44, 35),
    (item_set_slot, 923, 43, 100),
    (item_set_slot, 924, 1501, 125),
    (item_set_slot, 924, 1500, 0),
    (item_set_slot, 924, 1502, 0),
    (item_set_slot, 924, 1508, 26),
    (item_set_slot, 924, 41, 0),
    (item_set_slot, 924, 44, 0),
    (item_set_slot, 924, 45, 8),
    (item_set_slot, 925, 1501, 1100),
    (item_set_slot, 925, 1500, 3),
    (item_set_slot, 925, 1502, 0),
    (item_set_slot, 925, 1508, 26),
    (item_set_slot, 925, 41, 0),
    (item_set_slot, 925, 44, 21),
    (item_set_slot, 925, 45, 10),
    (item_set_slot, 926, 1501, 1100),
    (item_set_slot, 926, 1500, 3),
    (item_set_slot, 926, 1502, 0),
    (item_set_slot, 926, 1508, 26),
    (item_set_slot, 926, 41, 0),
    (item_set_slot, 926, 44, 21),
    (item_set_slot, 926, 45, 10),
    (item_set_slot, 927, 1501, 1800),
    (item_set_slot, 927, 1500, 8),
    (item_set_slot, 927, 1502, 0),
    (item_set_slot, 927, 1508, 26),
    (item_set_slot, 927, 41, 0),
    (item_set_slot, 927, 44, 33),
    (item_set_slot, 927, 45, 14),
    (item_set_slot, 928, 1501, 1400),
    (item_set_slot, 928, 1500, 5),
    (item_set_slot, 928, 1502, 0),
    (item_set_slot, 928, 1508, 26),
    (item_set_slot, 928, 41, 0),
    (item_set_slot, 928, 44, 26),
    (item_set_slot, 928, 45, 12),
    (item_set_slot, 929, 1501, 1800),
    (item_set_slot, 929, 1500, 8),
    (item_set_slot, 929, 1502, 0),
    (item_set_slot, 929, 1508, 26),
    (item_set_slot, 929, 41, 0),
    (item_set_slot, 929, 44, 33),
    (item_set_slot, 929, 45, 14),
    (item_set_slot, 930, 1501, 1400),
    (item_set_slot, 930, 1500, 5),
    (item_set_slot, 930, 1502, 0),
    (item_set_slot, 930, 1508, 26),
    (item_set_slot, 930, 41, 0),
    (item_set_slot, 930, 44, 26),
    (item_set_slot, 930, 45, 12),
    (item_set_slot, 931, 1501, 1800),
    (item_set_slot, 931, 1500, 8),
    (item_set_slot, 931, 1502, 0),
    (item_set_slot, 931, 1508, 26),
    (item_set_slot, 931, 41, 0),
    (item_set_slot, 931, 44, 33),
    (item_set_slot, 931, 45, 14),
    (item_set_slot, 932, 1501, 200),
    (item_set_slot, 932, 1500, 0),
    (item_set_slot, 932, 1508, 27),
    (item_set_slot, 932, 42, 36),
    (item_set_slot, 932, 44, 48),
    (item_set_slot, 932, 43, 96),
    (item_set_slot, 933, 1501, 250),
    (item_set_slot, 933, 1500, 0),
    (item_set_slot, 933, 1508, 27),
    (item_set_slot, 933, 42, 36),
    (item_set_slot, 933, 44, 55),
    (item_set_slot, 933, 43, 93),
    (item_set_slot, 934, 1501, 300),
    (item_set_slot, 934, 1500, 0),
    (item_set_slot, 934, 1508, 27),
    (item_set_slot, 934, 42, 36),
    (item_set_slot, 934, 44, 61),
    (item_set_slot, 934, 43, 90),
    (item_set_slot, 935, 1501, 350),
    (item_set_slot, 935, 1500, 0),
    (item_set_slot, 935, 1508, 27),
    (item_set_slot, 935, 42, 36),
    (item_set_slot, 935, 44, 67),
    (item_set_slot, 935, 43, 87),
    (item_set_slot, 936, 1501, 175),
    (item_set_slot, 936, 1500, 7),
    (item_set_slot, 936, 1502, 2),
    (item_set_slot, 936, 1508, 29),
    (item_set_slot, 936, 41, 70),
    (item_set_slot, 936, 44, 0),
    (item_set_slot, 936, 45, 0),
    (item_set_slot, 937, 1501, 175),
    (item_set_slot, 937, 1500, 7),
    (item_set_slot, 937, 1502, 2),
    (item_set_slot, 937, 1508, 29),
    (item_set_slot, 937, 41, 70),
    (item_set_slot, 937, 44, 0),
    (item_set_slot, 937, 45, 0),
    (item_set_slot, 938, 1501, 600),
    (item_set_slot, 938, 1500, 1),
    (item_set_slot, 938, 1502, 0),
    (item_set_slot, 938, 1508, 26),
    (item_set_slot, 938, 41, 0),
    (item_set_slot, 938, 44, 12),
    (item_set_slot, 938, 45, 5),
    (item_set_slot, 939, 1501, 1400),
    (item_set_slot, 939, 1500, 5),
    (item_set_slot, 939, 1502, 1),
    (item_set_slot, 939, 1508, 29),
    (item_set_slot, 939, 41, 0),
    (item_set_slot, 939, 44, 26),
    (item_set_slot, 939, 45, 12),
    (item_set_slot, 940, 1501, 1400),
    (item_set_slot, 940, 1500, 5),
    (item_set_slot, 940, 1502, 1),
    (item_set_slot, 940, 1508, 29),
    (item_set_slot, 940, 41, 0),
    (item_set_slot, 940, 44, 26),
    (item_set_slot, 940, 45, 12),
    (item_set_slot, 941, 1501, 1100),
    (item_set_slot, 941, 1500, 3),
    (item_set_slot, 941, 1502, 0),
    (item_set_slot, 941, 1508, 26),
    (item_set_slot, 941, 41, 0),
    (item_set_slot, 941, 44, 21),
    (item_set_slot, 941, 45, 10),
    (item_set_slot, 942, 1501, 1100),
    (item_set_slot, 942, 1500, 3),
    (item_set_slot, 942, 1502, 0),
    (item_set_slot, 942, 1508, 26),
    (item_set_slot, 942, 41, 0),
    (item_set_slot, 942, 44, 21),
    (item_set_slot, 942, 45, 10),
    (item_set_slot, 943, 1501, 1800),
    (item_set_slot, 943, 1500, 8),
    (item_set_slot, 943, 1502, 1),
    (item_set_slot, 943, 1508, 29),
    (item_set_slot, 943, 41, 0),
    (item_set_slot, 943, 44, 33),
    (item_set_slot, 943, 45, 14),
    (item_set_slot, 944, 1501, 1100),
    (item_set_slot, 944, 1500, 3),
    (item_set_slot, 944, 1502, 0),
    (item_set_slot, 944, 1508, 26),
    (item_set_slot, 944, 41, 0),
    (item_set_slot, 944, 44, 21),
    (item_set_slot, 944, 45, 10),
    (item_set_slot, 945, 1501, 200),
    (item_set_slot, 945, 1500, 0),
    (item_set_slot, 945, 1502, 2),
    (item_set_slot, 945, 1508, 29),
    (item_set_slot, 945, 41, 60),
    (item_set_slot, 945, 44, 0),
    (item_set_slot, 945, 45, 0),
    (item_set_slot, 946, 1501, 2100),
    (item_set_slot, 946, 1500, 9),
    (item_set_slot, 946, 1502, 1),
    (item_set_slot, 946, 1508, 29),
    (item_set_slot, 946, 41, 0),
    (item_set_slot, 946, 44, 41),
    (item_set_slot, 946, 45, 17),
    (item_set_slot, 947, 1501, 3100),
    (item_set_slot, 947, 1500, 12),
    (item_set_slot, 947, 1502, 1),
    (item_set_slot, 947, 1508, 29),
    (item_set_slot, 947, 41, 0),
    (item_set_slot, 947, 44, 64),
    (item_set_slot, 947, 45, 24),
    (item_set_slot, 948, 1501, 1100),
    (item_set_slot, 948, 1500, 3),
    (item_set_slot, 948, 1502, 0),
    (item_set_slot, 948, 1508, 26),
    (item_set_slot, 948, 41, 0),
    (item_set_slot, 948, 44, 21),
    (item_set_slot, 948, 45, 10),
    (item_set_slot, 949, 1501, 1100),
    (item_set_slot, 949, 1500, 3),
    (item_set_slot, 949, 1502, 0),
    (item_set_slot, 949, 1508, 26),
    (item_set_slot, 949, 41, 0),
    (item_set_slot, 949, 44, 21),
    (item_set_slot, 949, 45, 10),
    (item_set_slot, 950, 1501, 1100),
    (item_set_slot, 950, 1500, 3),
    (item_set_slot, 950, 1502, 0),
    (item_set_slot, 950, 1508, 26),
    (item_set_slot, 950, 41, 0),
    (item_set_slot, 950, 44, 21),
    (item_set_slot, 950, 45, 10),
    (item_set_slot, 951, 1501, 1100),
    (item_set_slot, 951, 1500, 3),
    (item_set_slot, 951, 1502, 0),
    (item_set_slot, 951, 1508, 26),
    (item_set_slot, 951, 41, 0),
    (item_set_slot, 951, 44, 21),
    (item_set_slot, 951, 45, 10),
    (item_set_slot, 952, 1501, 1400),
    (item_set_slot, 952, 1500, 5),
    (item_set_slot, 952, 1502, 0),
    (item_set_slot, 952, 1508, 26),
    (item_set_slot, 952, 41, 0),
    (item_set_slot, 952, 44, 26),
    (item_set_slot, 952, 45, 12),
    (item_set_slot, 953, 1501, 1400),
    (item_set_slot, 953, 1500, 5),
    (item_set_slot, 953, 1502, 0),
    (item_set_slot, 953, 1508, 26),
    (item_set_slot, 953, 41, 0),
    (item_set_slot, 953, 44, 26),
    (item_set_slot, 953, 45, 12),
    (item_set_slot, 954, 1501, 1400),
    (item_set_slot, 954, 1500, 5),
    (item_set_slot, 954, 1502, 0),
    (item_set_slot, 954, 1508, 26),
    (item_set_slot, 954, 41, 0),
    (item_set_slot, 954, 44, 26),
    (item_set_slot, 954, 45, 12),
    (item_set_slot, 955, 1501, 1100),
    (item_set_slot, 955, 1500, 3),
    (item_set_slot, 955, 1502, 0),
    (item_set_slot, 955, 1508, 26),
    (item_set_slot, 955, 41, 0),
    (item_set_slot, 955, 44, 21),
    (item_set_slot, 955, 45, 10),
    (item_set_slot, 956, 1501, 1100),
    (item_set_slot, 956, 1500, 3),
    (item_set_slot, 956, 1502, 0),
    (item_set_slot, 956, 1508, 26),
    (item_set_slot, 956, 41, 0),
    (item_set_slot, 956, 44, 21),
    (item_set_slot, 956, 45, 10),
    (item_set_slot, 957, 1501, 1100),
    (item_set_slot, 957, 1500, 3),
    (item_set_slot, 957, 1502, 0),
    (item_set_slot, 957, 1508, 26),
    (item_set_slot, 957, 41, 0),
    (item_set_slot, 957, 44, 21),
    (item_set_slot, 957, 45, 10),
    (item_set_slot, 958, 1501, 2100),
    (item_set_slot, 958, 1500, 9),
    (item_set_slot, 958, 1502, 1),
    (item_set_slot, 958, 1508, 29),
    (item_set_slot, 958, 41, 0),
    (item_set_slot, 958, 44, 41),
    (item_set_slot, 958, 45, 17),
    (item_set_slot, 959, 1501, 1800),
    (item_set_slot, 959, 1500, 8),
    (item_set_slot, 959, 1502, 0),
    (item_set_slot, 959, 1508, 26),
    (item_set_slot, 959, 41, 0),
    (item_set_slot, 959, 44, 33),
    (item_set_slot, 959, 45, 14),
    (item_set_slot, 960, 1501, 0),
    (item_set_slot, 960, 1500, 3),
    (item_set_slot, 960, 1508, 36),
    (item_set_slot, 960, 41, 45),
    (item_set_slot, 960, 44, 18),
    (item_set_slot, 960, 45, 28),
    (item_set_slot, 961, 1501, 1100),
    (item_set_slot, 961, 1500, 3),
    (item_set_slot, 961, 1502, 0),
    (item_set_slot, 961, 1508, 26),
    (item_set_slot, 961, 41, 0),
    (item_set_slot, 961, 44, 21),
    (item_set_slot, 961, 45, 10),
    (item_set_slot, 962, 1501, 1100),
    (item_set_slot, 962, 1500, 3),
    (item_set_slot, 962, 1502, 0),
    (item_set_slot, 962, 1508, 26),
    (item_set_slot, 962, 41, 0),
    (item_set_slot, 962, 44, 21),
    (item_set_slot, 962, 45, 10),
    (item_set_slot, 963, 1501, 1100),
    (item_set_slot, 963, 1500, 3),
    (item_set_slot, 963, 1502, 0),
    (item_set_slot, 963, 1508, 26),
    (item_set_slot, 963, 41, 0),
    (item_set_slot, 963, 44, 21),
    (item_set_slot, 963, 45, 10),
    (item_set_slot, 964, 1501, 2600),
    (item_set_slot, 964, 1500, 10),
    (item_set_slot, 964, 1502, 1),
    (item_set_slot, 964, 1508, 29),
    (item_set_slot, 964, 41, 0),
    (item_set_slot, 964, 44, 51),
    (item_set_slot, 964, 45, 20),
    (item_set_slot, 965, 1501, 2600),
    (item_set_slot, 965, 1500, 10),
    (item_set_slot, 965, 1502, 1),
    (item_set_slot, 965, 1508, 29),
    (item_set_slot, 965, 41, 0),
    (item_set_slot, 965, 44, 51),
    (item_set_slot, 965, 45, 20),
    (item_set_slot, 966, 1501, 1100),
    (item_set_slot, 966, 1500, 3),
    (item_set_slot, 966, 1502, 0),
    (item_set_slot, 966, 1508, 26),
    (item_set_slot, 966, 41, 0),
    (item_set_slot, 966, 44, 21),
    (item_set_slot, 966, 45, 10),
    (item_set_slot, 967, 1501, 1800),
    (item_set_slot, 967, 1500, 8),
    (item_set_slot, 967, 1502, 0),
    (item_set_slot, 967, 1508, 26),
    (item_set_slot, 967, 41, 0),
    (item_set_slot, 967, 44, 33),
    (item_set_slot, 967, 45, 14),
    (item_set_slot, 968, 1501, 1100),
    (item_set_slot, 968, 1500, 3),
    (item_set_slot, 968, 1502, 0),
    (item_set_slot, 968, 1508, 26),
    (item_set_slot, 968, 41, 0),
    (item_set_slot, 968, 44, 21),
    (item_set_slot, 968, 45, 10),
    (item_set_slot, 969, 1501, 100),
    (item_set_slot, 969, 1500, 0),
    (item_set_slot, 969, 1502, 0),
    (item_set_slot, 969, 1508, 26),
    (item_set_slot, 969, 41, 20),
    (item_set_slot, 969, 44, 0),
    (item_set_slot, 969, 45, 0),
    (item_set_slot, 970, 1501, 1800),
    (item_set_slot, 970, 1500, 8),
    (item_set_slot, 970, 1502, 1),
    (item_set_slot, 970, 1508, 29),
    (item_set_slot, 970, 41, 0),
    (item_set_slot, 970, 44, 33),
    (item_set_slot, 970, 45, 14),
    (item_set_slot, 971, 1501, 1800),
    (item_set_slot, 971, 1500, 8),
    (item_set_slot, 971, 1502, 1),
    (item_set_slot, 971, 1508, 29),
    (item_set_slot, 971, 41, 0),
    (item_set_slot, 971, 44, 33),
    (item_set_slot, 971, 45, 14),
    (item_set_slot, 972, 1501, 1800),
    (item_set_slot, 972, 1500, 8),
    (item_set_slot, 972, 1502, 1),
    (item_set_slot, 972, 1508, 29),
    (item_set_slot, 972, 41, 0),
    (item_set_slot, 972, 44, 33),
    (item_set_slot, 972, 45, 14),
    (item_set_slot, 973, 1501, 1400),
    (item_set_slot, 973, 1500, 5),
    (item_set_slot, 973, 1502, 0),
    (item_set_slot, 973, 1508, 26),
    (item_set_slot, 973, 41, 0),
    (item_set_slot, 973, 44, 26),
    (item_set_slot, 973, 45, 12),
    (item_set_slot, 974, 1501, 2600),
    (item_set_slot, 974, 1500, 10),
    (item_set_slot, 974, 1502, 1),
    (item_set_slot, 974, 1508, 29),
    (item_set_slot, 974, 41, 0),
    (item_set_slot, 974, 44, 51),
    (item_set_slot, 974, 45, 20),
    (item_set_slot, 975, 1501, 1800),
    (item_set_slot, 975, 1500, 8),
    (item_set_slot, 975, 1502, 0),
    (item_set_slot, 975, 1508, 26),
    (item_set_slot, 975, 41, 0),
    (item_set_slot, 975, 44, 33),
    (item_set_slot, 975, 45, 14),
    (item_set_slot, 976, 1501, 150),
    (item_set_slot, 976, 1500, 0),
    (item_set_slot, 976, 1508, 17),
    (item_set_slot, 976, 44, 0),
    (item_set_slot, 976, 45, 34),
    (item_set_slot, 976, 43, 99),
    (item_set_slot, 976, 42, 91),
    (item_set_slot, 977, 1501, 2100),
    (item_set_slot, 977, 1500, 9),
    (item_set_slot, 977, 1502, 1),
    (item_set_slot, 977, 1508, 29),
    (item_set_slot, 977, 41, 0),
    (item_set_slot, 977, 44, 41),
    (item_set_slot, 977, 45, 17),
    (item_set_slot, 978, 1501, 2100),
    (item_set_slot, 978, 1500, 9),
    (item_set_slot, 978, 1502, 1),
    (item_set_slot, 978, 1508, 29),
    (item_set_slot, 978, 41, 0),
    (item_set_slot, 978, 44, 41),
    (item_set_slot, 978, 45, 17),
    (item_set_slot, 979, 1501, 2100),
    (item_set_slot, 979, 1500, 9),
    (item_set_slot, 979, 1502, 1),
    (item_set_slot, 979, 1508, 29),
    (item_set_slot, 979, 41, 0),
    (item_set_slot, 979, 44, 41),
    (item_set_slot, 979, 45, 17),
    (item_set_slot, 980, 1501, 1100),
    (item_set_slot, 980, 1500, 3),
    (item_set_slot, 980, 1502, 0),
    (item_set_slot, 980, 1508, 26),
    (item_set_slot, 980, 41, 0),
    (item_set_slot, 980, 44, 21),
    (item_set_slot, 980, 45, 10),
    (item_set_slot, 981, 1501, 1100),
    (item_set_slot, 981, 1500, 3),
    (item_set_slot, 981, 1502, 0),
    (item_set_slot, 981, 1508, 26),
    (item_set_slot, 981, 41, 0),
    (item_set_slot, 981, 44, 21),
    (item_set_slot, 981, 45, 10),
    (item_set_slot, 982, 1501, 3100),
    (item_set_slot, 982, 1500, 12),
    (item_set_slot, 982, 1502, 0),
    (item_set_slot, 982, 1508, 26),
    (item_set_slot, 982, 41, 0),
    (item_set_slot, 982, 44, 64),
    (item_set_slot, 982, 45, 24),
    (item_set_slot, 983, 1501, 3100),
    (item_set_slot, 983, 1500, 12),
    (item_set_slot, 983, 1502, 0),
    (item_set_slot, 983, 1508, 26),
    (item_set_slot, 983, 41, 0),
    (item_set_slot, 983, 44, 64),
    (item_set_slot, 983, 45, 24),
    (item_set_slot, 984, 1501, 200),
    (item_set_slot, 984, 1500, 0),
    (item_set_slot, 984, 1508, 27),
    (item_set_slot, 984, 42, 50),
    (item_set_slot, 984, 44, 35),
    (item_set_slot, 984, 43, 100),
    (item_set_slot, 985, 1501, 200),
    (item_set_slot, 985, 1500, 0),
    (item_set_slot, 985, 1508, 27),
    (item_set_slot, 985, 42, 50),
    (item_set_slot, 985, 44, 35),
    (item_set_slot, 985, 43, 100),
    (item_set_slot, 986, 1501, 200),
    (item_set_slot, 986, 1500, 0),
    (item_set_slot, 986, 1508, 27),
    (item_set_slot, 986, 42, 50),
    (item_set_slot, 986, 44, 35),
    (item_set_slot, 986, 43, 100),
    (item_set_slot, 987, 1501, 200),
    (item_set_slot, 987, 1500, 0),
    (item_set_slot, 987, 1508, 27),
    (item_set_slot, 987, 42, 50),
    (item_set_slot, 987, 44, 35),
    (item_set_slot, 987, 43, 100),
    (item_set_slot, 988, 1501, 200),
    (item_set_slot, 988, 1500, 0),
    (item_set_slot, 988, 1508, 27),
    (item_set_slot, 988, 42, 50),
    (item_set_slot, 988, 44, 35),
    (item_set_slot, 988, 43, 100),
    (item_set_slot, 989, 1501, 1400),
    (item_set_slot, 989, 1500, 5),
    (item_set_slot, 989, 1502, 0),
    (item_set_slot, 989, 1508, 26),
    (item_set_slot, 989, 41, 0),
    (item_set_slot, 989, 44, 26),
    (item_set_slot, 989, 45, 12),
    (item_set_slot, 990, 1501, 1400),
    (item_set_slot, 990, 1500, 5),
    (item_set_slot, 990, 1502, 0),
    (item_set_slot, 990, 1508, 26),
    (item_set_slot, 990, 41, 0),
    (item_set_slot, 990, 44, 26),
    (item_set_slot, 990, 45, 12),
    (item_set_slot, 991, 1501, 1800),
    (item_set_slot, 991, 1500, 8),
    (item_set_slot, 991, 1502, 1),
    (item_set_slot, 991, 1508, 29),
    (item_set_slot, 991, 41, 0),
    (item_set_slot, 991, 44, 33),
    (item_set_slot, 991, 45, 14),
    (item_set_slot, 992, 1501, 150),
    (item_set_slot, 992, 1500, 0),
    (item_set_slot, 992, 1508, 17),
    (item_set_slot, 992, 44, 0),
    (item_set_slot, 992, 45, 36),
    (item_set_slot, 992, 43, 98),
    (item_set_slot, 992, 42, 94),
    (item_set_slot, 993, 1501, 250),
    (item_set_slot, 993, 1500, 0),
    (item_set_slot, 993, 1502, 2),
    (item_set_slot, 993, 1508, 29),
    (item_set_slot, 993, 41, 70),
    (item_set_slot, 993, 44, 0),
    (item_set_slot, 993, 45, 0),
    (item_set_slot, 994, 1501, 200),
    (item_set_slot, 994, 1500, 0),
    (item_set_slot, 994, 1502, 2),
    (item_set_slot, 994, 1508, 29),
    (item_set_slot, 994, 41, 60),
    (item_set_slot, 994, 44, 0),
    (item_set_slot, 994, 45, 0),
    (item_set_slot, 995, 1501, 200),
    (item_set_slot, 995, 1500, 0),
    (item_set_slot, 995, 1502, 2),
    (item_set_slot, 995, 1508, 29),
    (item_set_slot, 995, 41, 60),
    (item_set_slot, 995, 44, 0),
    (item_set_slot, 995, 45, 0),
    (item_set_slot, 996, 1501, 150),
    (item_set_slot, 996, 1500, 0),
    (item_set_slot, 996, 1502, 2),
    (item_set_slot, 996, 1508, 29),
    (item_set_slot, 996, 41, 40),
    (item_set_slot, 996, 44, 0),
    (item_set_slot, 996, 45, 0),
    (item_set_slot, 997, 1501, 50),
    (item_set_slot, 997, 1500, 0),
    (item_set_slot, 997, 1502, 0),
    (item_set_slot, 997, 1508, 26),
    (item_set_slot, 997, 41, 4),
    (item_set_slot, 997, 44, 0),
    (item_set_slot, 997, 45, 0),
    (item_set_slot, 998, 1501, 50),
    (item_set_slot, 998, 1500, 0),
    (item_set_slot, 998, 1502, 0),
    (item_set_slot, 998, 1508, 26),
    (item_set_slot, 998, 41, 4),
    (item_set_slot, 998, 44, 0),
    (item_set_slot, 998, 45, 0),
    (item_set_slot, 999, 1501, 1100),
    (item_set_slot, 999, 1500, 3),
    (item_set_slot, 999, 1502, 0),
    (item_set_slot, 999, 1508, 26),
    (item_set_slot, 999, 41, 0),
    (item_set_slot, 999, 44, 21),
    (item_set_slot, 999, 45, 10),
    (item_set_slot, 1000, 1501, 1100),
    (item_set_slot, 1000, 1500, 3),
    (item_set_slot, 1000, 1502, 0),
    (item_set_slot, 1000, 1508, 26),
    (item_set_slot, 1000, 41, 0),
    (item_set_slot, 1000, 44, 21),
    (item_set_slot, 1000, 45, 10),
    (item_set_slot, 1001, 1501, 1100),
    (item_set_slot, 1001, 1500, 3),
    (item_set_slot, 1001, 1502, 0),
    (item_set_slot, 1001, 1508, 26),
    (item_set_slot, 1001, 41, 0),
    (item_set_slot, 1001, 44, 21),
    (item_set_slot, 1001, 45, 10),
    (item_set_slot, 1002, 1501, 1100),
    (item_set_slot, 1002, 1500, 3),
    (item_set_slot, 1002, 1502, 0),
    (item_set_slot, 1002, 1508, 26),
    (item_set_slot, 1002, 41, 0),
    (item_set_slot, 1002, 44, 21),
    (item_set_slot, 1002, 45, 10),
    (item_set_slot, 1003, 1501, 300),
    (item_set_slot, 1003, 1500, 0),
    (item_set_slot, 1003, 1508, 27),
    (item_set_slot, 1003, 41, 90),
    (item_set_slot, 1003, 44, 0),
    (item_set_slot, 1003, 45, 0),
    (item_set_slot, 1004, 1501, 3600),
    (item_set_slot, 1004, 1500, 14),
    (item_set_slot, 1004, 1502, 1),
    (item_set_slot, 1004, 1508, 29),
    (item_set_slot, 1004, 41, 0),
    (item_set_slot, 1004, 44, 80),
    (item_set_slot, 1004, 45, 29),
    (item_set_slot, 1005, 1501, 150),
    (item_set_slot, 1005, 1500, 0),
    (item_set_slot, 1005, 1502, 0),
    (item_set_slot, 1005, 1508, 26),
    (item_set_slot, 1005, 41, 40),
    (item_set_slot, 1005, 44, 0),
    (item_set_slot, 1005, 45, 0),
    (item_set_slot, 1006, 1501, 350),
    (item_set_slot, 1006, 1500, 0),
    (item_set_slot, 1006, 1508, 0),
    (item_set_slot, 1006, 44, 512),
    (item_set_slot, 1006, 45, 512),
    (item_set_slot, 1006, 43, 120),
    (item_set_slot, 1006, 42, 115),
    (item_set_slot, 1007, 1501, 450),
    (item_set_slot, 1007, 1500, 0),
    (item_set_slot, 1007, 1508, 27),
    (item_set_slot, 1007, 42, 50),
    (item_set_slot, 1007, 44, 69),
    (item_set_slot, 1007, 43, 81),
    (item_set_slot, 1008, 1501, 450),
    (item_set_slot, 1008, 1500, 0),
    (item_set_slot, 1008, 1508, 27),
    (item_set_slot, 1008, 42, 50),
    (item_set_slot, 1008, 44, 69),
    (item_set_slot, 1008, 43, 81),
    (item_set_slot, 1009, 1501, 450),
    (item_set_slot, 1009, 1500, 0),
    (item_set_slot, 1009, 1508, 27),
    (item_set_slot, 1009, 42, 50),
    (item_set_slot, 1009, 44, 69),
    (item_set_slot, 1009, 43, 81),
    (item_set_slot, 1010, 1501, 150),
    (item_set_slot, 1010, 1500, 0),
    (item_set_slot, 1010, 1508, 17),
    (item_set_slot, 1010, 44, 0),
    (item_set_slot, 1010, 45, 39),
    (item_set_slot, 1010, 43, 98),
    (item_set_slot, 1010, 42, 93),
    (item_set_slot, 1011, 1501, 150),
    (item_set_slot, 1011, 1500, 8),
    (item_set_slot, 1011, 1508, 17),
    (item_set_slot, 1011, 44, 279),
    (item_set_slot, 1011, 45, 38),
    (item_set_slot, 1011, 43, 98),
    (item_set_slot, 1011, 42, 93),
    (item_set_slot, 1012, 1501, 150),
    (item_set_slot, 1012, 1500, 8),
    (item_set_slot, 1012, 1508, 17),
    (item_set_slot, 1012, 44, 279),
    (item_set_slot, 1012, 45, 39),
    (item_set_slot, 1012, 43, 98),
    (item_set_slot, 1012, 42, 95),
    (item_set_slot, 1013, 1501, 150),
    (item_set_slot, 1013, 1500, 8),
    (item_set_slot, 1013, 1508, 17),
    (item_set_slot, 1013, 44, 279),
    (item_set_slot, 1013, 45, 38),
    (item_set_slot, 1013, 43, 97),
    (item_set_slot, 1013, 42, 94),
    (item_set_slot, 1014, 1501, 150),
    (item_set_slot, 1014, 1500, 8),
    (item_set_slot, 1014, 1508, 17),
    (item_set_slot, 1014, 44, 279),
    (item_set_slot, 1014, 45, 40),
    (item_set_slot, 1014, 43, 98),
    (item_set_slot, 1014, 42, 95),
    (item_set_slot, 1015, 1501, 150),
    (item_set_slot, 1015, 1500, 8),
    (item_set_slot, 1015, 1508, 17),
    (item_set_slot, 1015, 44, 279),
    (item_set_slot, 1015, 45, 38),
    (item_set_slot, 1015, 43, 97),
    (item_set_slot, 1015, 42, 94),
    (item_set_slot, 1016, 1501, 150),
    (item_set_slot, 1016, 1500, 8),
    (item_set_slot, 1016, 1508, 17),
    (item_set_slot, 1016, 44, 280),
    (item_set_slot, 1016, 45, 39),
    (item_set_slot, 1016, 43, 97),
    (item_set_slot, 1016, 42, 95),
    (item_set_slot, 1017, 1501, 150),
    (item_set_slot, 1017, 1500, 8),
    (item_set_slot, 1017, 1508, 17),
    (item_set_slot, 1017, 44, 281),
    (item_set_slot, 1017, 45, 38),
    (item_set_slot, 1017, 43, 98),
    (item_set_slot, 1017, 42, 93),
    (item_set_slot, 1018, 1501, 250),
    (item_set_slot, 1018, 1500, 0),
    (item_set_slot, 1018, 1508, 27),
    (item_set_slot, 1018, 42, 30),
    (item_set_slot, 1018, 44, 61),
    (item_set_slot, 1018, 43, 100),
    (item_set_slot, 1019, 1501, 250),
    (item_set_slot, 1019, 1500, 0),
    (item_set_slot, 1019, 1508, 27),
    (item_set_slot, 1019, 42, 30),
    (item_set_slot, 1019, 44, 61),
    (item_set_slot, 1019, 43, 100),
    (item_set_slot, 1020, 1501, 250),
    (item_set_slot, 1020, 1500, 0),
    (item_set_slot, 1020, 1508, 27),
    (item_set_slot, 1020, 42, 30),
    (item_set_slot, 1020, 44, 61),
    (item_set_slot, 1020, 43, 100),
    (item_set_slot, 1021, 1501, 250),
    (item_set_slot, 1021, 1500, 0),
    (item_set_slot, 1021, 1508, 27),
    (item_set_slot, 1021, 42, 30),
    (item_set_slot, 1021, 44, 61),
    (item_set_slot, 1021, 43, 100),
    (item_set_slot, 1022, 1501, 250),
    (item_set_slot, 1022, 1500, 0),
    (item_set_slot, 1022, 1502, 2),
    (item_set_slot, 1022, 1508, 29),
    (item_set_slot, 1022, 41, 70),
    (item_set_slot, 1022, 44, 0),
    (item_set_slot, 1022, 45, 0),
    (item_set_slot, 1023, 1501, 250),
    (item_set_slot, 1023, 1500, 0),
    (item_set_slot, 1023, 1502, 2),
    (item_set_slot, 1023, 1508, 29),
    (item_set_slot, 1023, 41, 70),
    (item_set_slot, 1023, 44, 0),
    (item_set_slot, 1023, 45, 0),
    (item_set_slot, 1024, 1501, 200),
    (item_set_slot, 1024, 1500, 0),
    (item_set_slot, 1024, 1502, 2),
    (item_set_slot, 1024, 1508, 29),
    (item_set_slot, 1024, 41, 60),
    (item_set_slot, 1024, 44, 0),
    (item_set_slot, 1024, 45, 0),
    (item_set_slot, 1025, 1501, 200),
    (item_set_slot, 1025, 1500, 0),
    (item_set_slot, 1025, 1502, 2),
    (item_set_slot, 1025, 1508, 29),
    (item_set_slot, 1025, 41, 60),
    (item_set_slot, 1025, 44, 0),
    (item_set_slot, 1025, 45, 0),
    (item_set_slot, 1026, 1501, 200),
    (item_set_slot, 1026, 1500, 0),
    (item_set_slot, 1026, 1502, 2),
    (item_set_slot, 1026, 1508, 29),
    (item_set_slot, 1026, 41, 60),
    (item_set_slot, 1026, 44, 0),
    (item_set_slot, 1026, 45, 0),
    (item_set_slot, 1027, 1501, 200),
    (item_set_slot, 1027, 1500, 0),
    (item_set_slot, 1027, 1502, 2),
    (item_set_slot, 1027, 1508, 29),
    (item_set_slot, 1027, 41, 60),
    (item_set_slot, 1027, 44, 0),
    (item_set_slot, 1027, 45, 0),
    (item_set_slot, 1028, 1501, 250),
    (item_set_slot, 1028, 1500, 0),
    (item_set_slot, 1028, 1502, 2),
    (item_set_slot, 1028, 1508, 29),
    (item_set_slot, 1028, 41, 70),
    (item_set_slot, 1028, 44, 0),
    (item_set_slot, 1028, 45, 0),
    (item_set_slot, 1029, 1501, 250),
    (item_set_slot, 1029, 1500, 0),
    (item_set_slot, 1029, 1502, 2),
    (item_set_slot, 1029, 1508, 29),
    (item_set_slot, 1029, 41, 70),
    (item_set_slot, 1029, 44, 0),
    (item_set_slot, 1029, 45, 0),
    (item_set_slot, 1030, 1501, 250),
    (item_set_slot, 1030, 1500, 0),
    (item_set_slot, 1030, 1502, 2),
    (item_set_slot, 1030, 1508, 29),
    (item_set_slot, 1030, 41, 70),
    (item_set_slot, 1030, 44, 0),
    (item_set_slot, 1030, 45, 0),
    (item_set_slot, 1031, 1501, 200),
    (item_set_slot, 1031, 1500, 0),
    (item_set_slot, 1031, 1502, 1),
    (item_set_slot, 1031, 1508, 29),
    (item_set_slot, 1031, 41, 60),
    (item_set_slot, 1031, 44, 0),
    (item_set_slot, 1031, 45, 0),
    (item_set_slot, 1032, 1501, 200),
    (item_set_slot, 1032, 1500, 0),
    (item_set_slot, 1032, 1502, 1),
    (item_set_slot, 1032, 1508, 29),
    (item_set_slot, 1032, 41, 60),
    (item_set_slot, 1032, 44, 0),
    (item_set_slot, 1032, 45, 0),
    (item_set_slot, 1033, 1501, 175),
    (item_set_slot, 1033, 1500, 0),
    (item_set_slot, 1033, 1502, 2),
    (item_set_slot, 1033, 1508, 29),
    (item_set_slot, 1033, 41, 50),
    (item_set_slot, 1033, 44, 0),
    (item_set_slot, 1033, 45, 0),
    (item_set_slot, 1034, 1501, 150),
    (item_set_slot, 1034, 1500, 0),
    (item_set_slot, 1034, 1502, 2),
    (item_set_slot, 1034, 1508, 29),
    (item_set_slot, 1034, 41, 40),
    (item_set_slot, 1034, 44, 0),
    (item_set_slot, 1034, 45, 0),
    (item_set_slot, 1035, 1501, 200),
    (item_set_slot, 1035, 1500, 0),
    (item_set_slot, 1035, 1502, 1),
    (item_set_slot, 1035, 1508, 29),
    (item_set_slot, 1035, 41, 60),
    (item_set_slot, 1035, 44, 0),
    (item_set_slot, 1035, 45, 0),
    (item_set_slot, 1036, 1501, 100),
    (item_set_slot, 1036, 1500, 0),
    (item_set_slot, 1036, 1502, 0),
    (item_set_slot, 1036, 1508, 26),
    (item_set_slot, 1036, 41, 20),
    (item_set_slot, 1036, 44, 0),
    (item_set_slot, 1036, 45, 0),
    (item_set_slot, 1037, 1501, 100),
    (item_set_slot, 1037, 1500, 0),
    (item_set_slot, 1037, 1502, 0),
    (item_set_slot, 1037, 1508, 26),
    (item_set_slot, 1037, 41, 20),
    (item_set_slot, 1037, 44, 0),
    (item_set_slot, 1037, 45, 0),
    (item_set_slot, 1038, 1501, 150),
    (item_set_slot, 1038, 1500, 0),
    (item_set_slot, 1038, 1502, 1),
    (item_set_slot, 1038, 1508, 29),
    (item_set_slot, 1038, 41, 40),
    (item_set_slot, 1038, 44, 0),
    (item_set_slot, 1038, 45, 0),
    (item_set_slot, 1039, 1501, 3100),
    (item_set_slot, 1039, 1500, 12),
    (item_set_slot, 1039, 1502, 1),
    (item_set_slot, 1039, 1508, 29),
    (item_set_slot, 1039, 41, 0),
    (item_set_slot, 1039, 44, 64),
    (item_set_slot, 1039, 45, 24),
    (item_set_slot, 1040, 1501, 1800),
    (item_set_slot, 1040, 1500, 8),
    (item_set_slot, 1040, 1502, 1),
    (item_set_slot, 1040, 1508, 29),
    (item_set_slot, 1040, 41, 0),
    (item_set_slot, 1040, 44, 33),
    (item_set_slot, 1040, 45, 14),
    (item_set_slot, 1041, 1501, 2100),
    (item_set_slot, 1041, 1500, 9),
    (item_set_slot, 1041, 1502, 1),
    (item_set_slot, 1041, 1508, 29),
    (item_set_slot, 1041, 41, 0),
    (item_set_slot, 1041, 44, 41),
    (item_set_slot, 1041, 45, 17),
    (item_set_slot, 1042, 1501, 50),
    (item_set_slot, 1042, 1500, 0),
    (item_set_slot, 1042, 1502, 0),
    (item_set_slot, 1042, 1508, 26),
    (item_set_slot, 1042, 41, 8),
    (item_set_slot, 1042, 44, 0),
    (item_set_slot, 1042, 45, 0),
    (item_set_slot, 1043, 1501, 2100),
    (item_set_slot, 1043, 1500, 9),
    (item_set_slot, 1043, 1502, 1),
    (item_set_slot, 1043, 1508, 29),
    (item_set_slot, 1043, 41, 0),
    (item_set_slot, 1043, 44, 41),
    (item_set_slot, 1043, 45, 17),
    (item_set_slot, 1044, 1501, 2100),
    (item_set_slot, 1044, 1500, 9),
    (item_set_slot, 1044, 1502, 1),
    (item_set_slot, 1044, 1508, 29),
    (item_set_slot, 1044, 41, 0),
    (item_set_slot, 1044, 44, 41),
    (item_set_slot, 1044, 45, 17),
    (item_set_slot, 1045, 1501, 2100),
    (item_set_slot, 1045, 1500, 9),
    (item_set_slot, 1045, 1502, 1),
    (item_set_slot, 1045, 1508, 29),
    (item_set_slot, 1045, 41, 0),
    (item_set_slot, 1045, 44, 41),
    (item_set_slot, 1045, 45, 17),
    (item_set_slot, 1046, 1501, 2100),
    (item_set_slot, 1046, 1500, 9),
    (item_set_slot, 1046, 1502, 1),
    (item_set_slot, 1046, 1508, 29),
    (item_set_slot, 1046, 41, 0),
    (item_set_slot, 1046, 44, 41),
    (item_set_slot, 1046, 45, 17),
    (item_set_slot, 1047, 1501, 250),
    (item_set_slot, 1047, 1500, 0),
    (item_set_slot, 1047, 1502, 2),
    (item_set_slot, 1047, 1508, 29),
    (item_set_slot, 1047, 41, 70),
    (item_set_slot, 1047, 44, 0),
    (item_set_slot, 1047, 45, 0),
    (item_set_slot, 1048, 1501, 3100),
    (item_set_slot, 1048, 1500, 12),
    (item_set_slot, 1048, 1502, 1),
    (item_set_slot, 1048, 1508, 29),
    (item_set_slot, 1048, 41, 0),
    (item_set_slot, 1048, 44, 64),
    (item_set_slot, 1048, 45, 24),
    (item_set_slot, 1049, 1501, 2100),
    (item_set_slot, 1049, 1500, 9),
    (item_set_slot, 1049, 1502, 1),
    (item_set_slot, 1049, 1508, 29),
    (item_set_slot, 1049, 41, 0),
    (item_set_slot, 1049, 44, 41),
    (item_set_slot, 1049, 45, 17),
    (item_set_slot, 1050, 1501, 1800),
    (item_set_slot, 1050, 1500, 8),
    (item_set_slot, 1050, 1502, 1),
    (item_set_slot, 1050, 1508, 29),
    (item_set_slot, 1050, 41, 0),
    (item_set_slot, 1050, 44, 33),
    (item_set_slot, 1050, 45, 14),
    (item_set_slot, 1051, 1501, 250),
    (item_set_slot, 1051, 1500, 8),
    (item_set_slot, 1051, 1508, 13),
    (item_set_slot, 1051, 44, 295),
    (item_set_slot, 1051, 45, 32),
    (item_set_slot, 1051, 43, 95),
    (item_set_slot, 1051, 42, 155),
    (item_set_slot, 1052, 1501, 200),
    (item_set_slot, 1052, 1500, 0),
    (item_set_slot, 1052, 1502, 2),
    (item_set_slot, 1052, 1508, 29),
    (item_set_slot, 1052, 41, 60),
    (item_set_slot, 1052, 44, 0),
    (item_set_slot, 1052, 45, 0),
    (item_set_slot, 1053, 1501, 200),
    (item_set_slot, 1053, 1500, 0),
    (item_set_slot, 1053, 1502, 2),
    (item_set_slot, 1053, 1508, 29),
    (item_set_slot, 1053, 41, 60),
    (item_set_slot, 1053, 44, 0),
    (item_set_slot, 1053, 45, 0),
    (item_set_slot, 1054, 1501, 300),
    (item_set_slot, 1054, 1500, 0),
    (item_set_slot, 1054, 1508, 27),
    (item_set_slot, 1054, 41, 90),
    (item_set_slot, 1054, 44, 0),
    (item_set_slot, 1054, 45, 0),
    (item_set_slot, 1055, 1501, 300),
    (item_set_slot, 1055, 1500, 0),
    (item_set_slot, 1055, 1508, 27),
    (item_set_slot, 1055, 41, 90),
    (item_set_slot, 1055, 44, 0),
    (item_set_slot, 1055, 45, 0),
    (item_set_slot, 1056, 1501, 300),
    (item_set_slot, 1056, 1500, 0),
    (item_set_slot, 1056, 1508, 27),
    (item_set_slot, 1056, 41, 90),
    (item_set_slot, 1056, 44, 0),
    (item_set_slot, 1056, 45, 0),
    (item_set_slot, 1057, 1501, 200),
    (item_set_slot, 1057, 1500, 0),
    (item_set_slot, 1057, 1508, 27),
    (item_set_slot, 1057, 41, 60),
    (item_set_slot, 1057, 44, 0),
    (item_set_slot, 1057, 45, 0),
    (item_set_slot, 1058, 1501, 200),
    (item_set_slot, 1058, 1500, 0),
    (item_set_slot, 1058, 1508, 27),
    (item_set_slot, 1058, 41, 60),
    (item_set_slot, 1058, 44, 0),
    (item_set_slot, 1058, 45, 0),
    (item_set_slot, 1059, 1501, 225),
    (item_set_slot, 1059, 1500, 8),
    (item_set_slot, 1059, 1508, 13),
    (item_set_slot, 1059, 44, 0),
    (item_set_slot, 1059, 45, 43),
    (item_set_slot, 1059, 43, 84),
    (item_set_slot, 1059, 42, 128),
    (item_set_slot, 1060, 1501, 200),
    (item_set_slot, 1060, 1500, 0),
    (item_set_slot, 1060, 1502, 2),
    (item_set_slot, 1060, 1508, 29),
    (item_set_slot, 1060, 41, 60),
    (item_set_slot, 1060, 44, 0),
    (item_set_slot, 1060, 45, 0),
    (item_set_slot, 1061, 1501, 200),
    (item_set_slot, 1061, 1500, 0),
    (item_set_slot, 1061, 1502, 2),
    (item_set_slot, 1061, 1508, 29),
    (item_set_slot, 1061, 41, 60),
    (item_set_slot, 1061, 44, 0),
    (item_set_slot, 1061, 45, 0),
    (item_set_slot, 1062, 1501, 1400),
    (item_set_slot, 1062, 1500, 5),
    (item_set_slot, 1062, 1502, 0),
    (item_set_slot, 1062, 1508, 26),
    (item_set_slot, 1062, 41, 0),
    (item_set_slot, 1062, 44, 26),
    (item_set_slot, 1062, 45, 12),
    (item_set_slot, 1063, 1501, 1100),
    (item_set_slot, 1063, 1500, 3),
    (item_set_slot, 1063, 1502, 0),
    (item_set_slot, 1063, 1508, 26),
    (item_set_slot, 1063, 41, 0),
    (item_set_slot, 1063, 44, 21),
    (item_set_slot, 1063, 45, 10),
    (item_set_slot, 1064, 1501, 1800),
    (item_set_slot, 1064, 1500, 8),
    (item_set_slot, 1064, 1502, 0),
    (item_set_slot, 1064, 1508, 26),
    (item_set_slot, 1064, 41, 0),
    (item_set_slot, 1064, 44, 33),
    (item_set_slot, 1064, 45, 14),
    (item_set_slot, 1065, 1501, 1100),
    (item_set_slot, 1065, 1500, 3),
    (item_set_slot, 1065, 1502, 0),
    (item_set_slot, 1065, 1508, 26),
    (item_set_slot, 1065, 41, 0),
    (item_set_slot, 1065, 44, 21),
    (item_set_slot, 1065, 45, 10),
    (item_set_slot, 1066, 1501, 1100),
    (item_set_slot, 1066, 1500, 3),
    (item_set_slot, 1066, 1502, 0),
    (item_set_slot, 1066, 1508, 26),
    (item_set_slot, 1066, 41, 0),
    (item_set_slot, 1066, 44, 21),
    (item_set_slot, 1066, 45, 10),
    (item_set_slot, 1067, 1501, 1400),
    (item_set_slot, 1067, 1500, 5),
    (item_set_slot, 1067, 1502, 0),
    (item_set_slot, 1067, 1508, 26),
    (item_set_slot, 1067, 41, 0),
    (item_set_slot, 1067, 44, 26),
    (item_set_slot, 1067, 45, 12),
    (item_set_slot, 1068, 1501, 0),
    (item_set_slot, 1068, 1500, 3),
    (item_set_slot, 1068, 1508, 36),
    (item_set_slot, 1068, 41, 45),
    (item_set_slot, 1068, 44, 17),
    (item_set_slot, 1068, 45, 10),
    (item_set_slot, 1069, 1501, 200),
    (item_set_slot, 1069, 1500, 0),
    (item_set_slot, 1069, 1508, 27),
    (item_set_slot, 1069, 41, 60),
    (item_set_slot, 1069, 44, 0),
    (item_set_slot, 1069, 45, 0),
    (item_set_slot, 1070, 1501, 200),
    (item_set_slot, 1070, 1500, 0),
    (item_set_slot, 1070, 1508, 27),
    (item_set_slot, 1070, 41, 60),
    (item_set_slot, 1070, 44, 0),
    (item_set_slot, 1070, 45, 0),
    (item_set_slot, 1071, 1501, 200),
    (item_set_slot, 1071, 1500, 0),
    (item_set_slot, 1071, 1508, 27),
    (item_set_slot, 1071, 41, 60),
    (item_set_slot, 1071, 44, 0),
    (item_set_slot, 1071, 45, 0),
    (item_set_slot, 1072, 1501, 3100),
    (item_set_slot, 1072, 1500, 12),
    (item_set_slot, 1072, 1502, 1),
    (item_set_slot, 1072, 1508, 29),
    (item_set_slot, 1072, 41, 0),
    (item_set_slot, 1072, 44, 64),
    (item_set_slot, 1072, 45, 24),
    (item_set_slot, 1073, 1501, 3100),
    (item_set_slot, 1073, 1500, 12),
    (item_set_slot, 1073, 1502, 1),
    (item_set_slot, 1073, 1508, 29),
    (item_set_slot, 1073, 41, 0),
    (item_set_slot, 1073, 44, 64),
    (item_set_slot, 1073, 45, 24),
    (item_set_slot, 1074, 1501, 1400),
    (item_set_slot, 1074, 1500, 5),
    (item_set_slot, 1074, 1502, 1),
    (item_set_slot, 1074, 1508, 29),
    (item_set_slot, 1074, 41, 0),
    (item_set_slot, 1074, 44, 26),
    (item_set_slot, 1074, 45, 12),
    (item_set_slot, 1075, 1501, 2600),
    (item_set_slot, 1075, 1500, 10),
    (item_set_slot, 1075, 1502, 1),
    (item_set_slot, 1075, 1508, 29),
    (item_set_slot, 1075, 41, 0),
    (item_set_slot, 1075, 44, 51),
    (item_set_slot, 1075, 45, 20),
    (item_set_slot, 1076, 1501, 2600),
    (item_set_slot, 1076, 1500, 10),
    (item_set_slot, 1076, 1502, 1),
    (item_set_slot, 1076, 1508, 29),
    (item_set_slot, 1076, 41, 0),
    (item_set_slot, 1076, 44, 51),
    (item_set_slot, 1076, 45, 20),
    (item_set_slot, 1077, 1501, 2100),
    (item_set_slot, 1077, 1500, 9),
    (item_set_slot, 1077, 1502, 0),
    (item_set_slot, 1077, 1508, 26),
    (item_set_slot, 1077, 41, 0),
    (item_set_slot, 1077, 44, 41),
    (item_set_slot, 1077, 45, 17),
    (item_set_slot, 1078, 1501, 1800),
    (item_set_slot, 1078, 1500, 8),
    (item_set_slot, 1078, 1502, 1),
    (item_set_slot, 1078, 1508, 29),
    (item_set_slot, 1078, 41, 0),
    (item_set_slot, 1078, 44, 33),
    (item_set_slot, 1078, 45, 14),
    (item_set_slot, 1079, 1501, 0),
    (item_set_slot, 1079, 1500, 3),
    (item_set_slot, 1079, 1508, 36),
    (item_set_slot, 1079, 41, 45),
    (item_set_slot, 1079, 44, 18),
    (item_set_slot, 1079, 45, 28),
    (item_set_slot, 1080, 1501, 600),
    (item_set_slot, 1080, 1500, 1),
    (item_set_slot, 1080, 1502, 0),
    (item_set_slot, 1080, 1508, 26),
    (item_set_slot, 1080, 41, 0),
    (item_set_slot, 1080, 44, 12),
    (item_set_slot, 1080, 45, 5),
    (item_set_slot, 1081, 1501, 600),
    (item_set_slot, 1081, 1500, 1),
    (item_set_slot, 1081, 1502, 0),
    (item_set_slot, 1081, 1508, 26),
    (item_set_slot, 1081, 41, 0),
    (item_set_slot, 1081, 44, 12),
    (item_set_slot, 1081, 45, 5),
    (item_set_slot, 1082, 1501, 600),
    (item_set_slot, 1082, 1500, 1),
    (item_set_slot, 1082, 1502, 0),
    (item_set_slot, 1082, 1508, 26),
    (item_set_slot, 1082, 41, 0),
    (item_set_slot, 1082, 44, 12),
    (item_set_slot, 1082, 45, 5),
    (item_set_slot, 1083, 1501, 150),
    (item_set_slot, 1083, 1500, 0),
    (item_set_slot, 1083, 1502, 2),
    (item_set_slot, 1083, 1508, 29),
    (item_set_slot, 1083, 41, 40),
    (item_set_slot, 1083, 44, 0),
    (item_set_slot, 1083, 45, 0),
    (item_set_slot, 1084, 1501, 200),
    (item_set_slot, 1084, 1500, 0),
    (item_set_slot, 1084, 1502, 2),
    (item_set_slot, 1084, 1508, 29),
    (item_set_slot, 1084, 41, 60),
    (item_set_slot, 1084, 44, 0),
    (item_set_slot, 1084, 45, 0),
    (item_set_slot, 1085, 1501, 200),
    (item_set_slot, 1085, 1500, 0),
    (item_set_slot, 1085, 1502, 1),
    (item_set_slot, 1085, 1508, 29),
    (item_set_slot, 1085, 41, 60),
    (item_set_slot, 1085, 44, 0),
    (item_set_slot, 1085, 45, 0),
    (item_set_slot, 1086, 1501, 150),
    (item_set_slot, 1086, 1500, 0),
    (item_set_slot, 1086, 1502, 2),
    (item_set_slot, 1086, 1508, 29),
    (item_set_slot, 1086, 41, 40),
    (item_set_slot, 1086, 44, 0),
    (item_set_slot, 1086, 45, 0),
    (item_set_slot, 1087, 1501, 175),
    (item_set_slot, 1087, 1500, 0),
    (item_set_slot, 1087, 1508, 17),
    (item_set_slot, 1087, 44, 256),
    (item_set_slot, 1087, 45, 35),
    (item_set_slot, 1087, 43, 93),
    (item_set_slot, 1087, 42, 77),
    (item_set_slot, 1088, 1501, 50),
    (item_set_slot, 1088, 1500, 0),
    (item_set_slot, 1088, 1502, 0),
    (item_set_slot, 1088, 1508, 26),
    (item_set_slot, 1088, 41, 4),
    (item_set_slot, 1088, 44, 0),
    (item_set_slot, 1088, 45, 0),
    (item_set_slot, 1089, 1501, 150),
    (item_set_slot, 1089, 1500, 8),
    (item_set_slot, 1089, 1508, 17),
    (item_set_slot, 1089, 44, 276),
    (item_set_slot, 1089, 45, 34),
    (item_set_slot, 1089, 43, 99),
    (item_set_slot, 1089, 42, 90),
    (item_set_slot, 1090, 1501, 175),
    (item_set_slot, 1090, 1500, 9),
    (item_set_slot, 1090, 1508, 13),
    (item_set_slot, 1090, 44, 0),
    (item_set_slot, 1090, 45, 290),
    (item_set_slot, 1090, 43, 94),
    (item_set_slot, 1090, 42, 74),
    (item_set_slot, 1091, 1501, 150),
    (item_set_slot, 1091, 1500, 0),
    (item_set_slot, 1091, 1508, 27),
    (item_set_slot, 1091, 41, 40),
    (item_set_slot, 1091, 44, 0),
    (item_set_slot, 1091, 45, 0),
    (item_set_slot, 1092, 1501, 100),
    (item_set_slot, 1092, 1500, 0),
    (item_set_slot, 1092, 1502, 2),
    (item_set_slot, 1092, 1508, 29),
    (item_set_slot, 1092, 41, 20),
    (item_set_slot, 1092, 44, 0),
    (item_set_slot, 1092, 45, 0),
    (item_set_slot, 1093, 1501, 200),
    (item_set_slot, 1093, 1500, 0),
    (item_set_slot, 1093, 1502, 2),
    (item_set_slot, 1093, 1508, 29),
    (item_set_slot, 1093, 41, 60),
    (item_set_slot, 1093, 44, 0),
    (item_set_slot, 1093, 45, 0),
    (item_set_slot, 1094, 1501, 200),
    (item_set_slot, 1094, 1500, 0),
    (item_set_slot, 1094, 1502, 2),
    (item_set_slot, 1094, 1508, 29),
    (item_set_slot, 1094, 41, 60),
    (item_set_slot, 1094, 44, 0),
    (item_set_slot, 1094, 45, 0),
    (item_set_slot, 1095, 1501, 250),
    (item_set_slot, 1095, 1500, 0),
    (item_set_slot, 1095, 1502, 2),
    (item_set_slot, 1095, 1508, 29),
    (item_set_slot, 1095, 41, 70),
    (item_set_slot, 1095, 44, 0),
    (item_set_slot, 1095, 45, 0),
    (item_set_slot, 1096, 1501, 250),
    (item_set_slot, 1096, 1500, 0),
    (item_set_slot, 1096, 1502, 2),
    (item_set_slot, 1096, 1508, 29),
    (item_set_slot, 1096, 41, 70),
    (item_set_slot, 1096, 44, 0),
    (item_set_slot, 1096, 45, 0),
    (item_set_slot, 1097, 1501, 100),
    (item_set_slot, 1097, 1500, 0),
    (item_set_slot, 1097, 1502, 0),
    (item_set_slot, 1097, 1508, 26),
    (item_set_slot, 1097, 41, 20),
    (item_set_slot, 1097, 44, 0),
    (item_set_slot, 1097, 45, 0),
    (item_set_slot, 1098, 1501, 1400),
    (item_set_slot, 1098, 1500, 5),
    (item_set_slot, 1098, 1502, 0),
    (item_set_slot, 1098, 1508, 26),
    (item_set_slot, 1098, 41, 0),
    (item_set_slot, 1098, 44, 26),
    (item_set_slot, 1098, 45, 12),
    (item_set_slot, 1099, 1501, 1400),
    (item_set_slot, 1099, 1500, 5),
    (item_set_slot, 1099, 1502, 0),
    (item_set_slot, 1099, 1508, 26),
    (item_set_slot, 1099, 41, 0),
    (item_set_slot, 1099, 44, 26),
    (item_set_slot, 1099, 45, 12),
    (item_set_slot, 1100, 1501, 175),
    (item_set_slot, 1100, 1500, 9),
    (item_set_slot, 1100, 1508, 13),
    (item_set_slot, 1100, 44, 0),
    (item_set_slot, 1100, 45, 291),
    (item_set_slot, 1100, 43, 93),
    (item_set_slot, 1100, 42, 75),
    (item_set_slot, 1101, 1501, 1100),
    (item_set_slot, 1101, 1500, 3),
    (item_set_slot, 1101, 1502, 0),
    (item_set_slot, 1101, 1508, 26),
    (item_set_slot, 1101, 41, 0),
    (item_set_slot, 1101, 44, 21),
    (item_set_slot, 1101, 45, 10),
    (item_set_slot, 1102, 1501, 1100),
    (item_set_slot, 1102, 1500, 3),
    (item_set_slot, 1102, 1502, 0),
    (item_set_slot, 1102, 1508, 26),
    (item_set_slot, 1102, 41, 0),
    (item_set_slot, 1102, 44, 21),
    (item_set_slot, 1102, 45, 10),
    (item_set_slot, 1103, 1501, 1100),
    (item_set_slot, 1103, 1500, 3),
    (item_set_slot, 1103, 1502, 0),
    (item_set_slot, 1103, 1508, 26),
    (item_set_slot, 1103, 41, 0),
    (item_set_slot, 1103, 44, 21),
    (item_set_slot, 1103, 45, 10),
    (item_set_slot, 1104, 1501, 2600),
    (item_set_slot, 1104, 1500, 10),
    (item_set_slot, 1104, 1502, 0),
    (item_set_slot, 1104, 1508, 26),
    (item_set_slot, 1104, 41, 0),
    (item_set_slot, 1104, 44, 51),
    (item_set_slot, 1104, 45, 20),
    (item_set_slot, 1105, 1501, 2600),
    (item_set_slot, 1105, 1500, 10),
    (item_set_slot, 1105, 1502, 1),
    (item_set_slot, 1105, 1508, 29),
    (item_set_slot, 1105, 41, 0),
    (item_set_slot, 1105, 44, 51),
    (item_set_slot, 1105, 45, 20),
    (item_set_slot, 1106, 1501, 150),
    (item_set_slot, 1106, 1500, 8),
    (item_set_slot, 1106, 1508, 17),
    (item_set_slot, 1106, 44, 279),
    (item_set_slot, 1106, 45, 37),
    (item_set_slot, 1106, 43, 98),
    (item_set_slot, 1106, 42, 96),
    (item_set_slot, 1107, 1501, 150),
    (item_set_slot, 1107, 1500, 0),
    (item_set_slot, 1107, 1502, 0),
    (item_set_slot, 1107, 1508, 26),
    (item_set_slot, 1107, 41, 40),
    (item_set_slot, 1107, 44, 0),
    (item_set_slot, 1107, 45, 0),
    (item_set_slot, 1108, 1501, 50),
    (item_set_slot, 1108, 1500, 0),
    (item_set_slot, 1108, 1502, 0),
    (item_set_slot, 1108, 1508, 26),
    (item_set_slot, 1108, 41, 8),
    (item_set_slot, 1108, 44, 0),
    (item_set_slot, 1108, 45, 0),
    (item_set_slot, 1109, 1501, 150),
    (item_set_slot, 1109, 1500, 0),
    (item_set_slot, 1109, 1502, 0),
    (item_set_slot, 1109, 1508, 26),
    (item_set_slot, 1109, 41, 40),
    (item_set_slot, 1109, 44, 0),
    (item_set_slot, 1109, 45, 0),
    (item_set_slot, 1110, 1501, 50),
    (item_set_slot, 1110, 1500, 0),
    (item_set_slot, 1110, 1502, 0),
    (item_set_slot, 1110, 1508, 26),
    (item_set_slot, 1110, 41, 8),
    (item_set_slot, 1110, 44, 0),
    (item_set_slot, 1110, 45, 0),
    (item_set_slot, 1111, 1501, 600),
    (item_set_slot, 1111, 1500, 1),
    (item_set_slot, 1111, 1502, 0),
    (item_set_slot, 1111, 1508, 26),
    (item_set_slot, 1111, 41, 0),
    (item_set_slot, 1111, 44, 12),
    (item_set_slot, 1111, 45, 5),
    (item_set_slot, 1112, 1501, 600),
    (item_set_slot, 1112, 1500, 1),
    (item_set_slot, 1112, 1502, 0),
    (item_set_slot, 1112, 1508, 26),
    (item_set_slot, 1112, 41, 0),
    (item_set_slot, 1112, 44, 12),
    (item_set_slot, 1112, 45, 5),
    (item_set_slot, 1113, 1501, 600),
    (item_set_slot, 1113, 1500, 1),
    (item_set_slot, 1113, 1502, 0),
    (item_set_slot, 1113, 1508, 26),
    (item_set_slot, 1113, 41, 0),
    (item_set_slot, 1113, 44, 12),
    (item_set_slot, 1113, 45, 5),
    (item_set_slot, 1114, 1501, 450),
    (item_set_slot, 1114, 1500, 0),
    (item_set_slot, 1114, 1508, 27),
    (item_set_slot, 1114, 42, 50),
    (item_set_slot, 1114, 44, 69),
    (item_set_slot, 1114, 43, 81),
    (item_set_slot, 1115, 1501, 250),
    (item_set_slot, 1115, 1500, 0),
    (item_set_slot, 1115, 1508, 27),
    (item_set_slot, 1115, 42, 30),
    (item_set_slot, 1115, 44, 67),
    (item_set_slot, 1115, 43, 100),
    (item_set_slot, 1116, 1501, 250),
    (item_set_slot, 1116, 1500, 0),
    (item_set_slot, 1116, 1508, 27),
    (item_set_slot, 1116, 42, 30),
    (item_set_slot, 1116, 44, 67),
    (item_set_slot, 1116, 43, 100),
    (item_set_slot, 1117, 1501, 300),
    (item_set_slot, 1117, 1500, 0),
    (item_set_slot, 1117, 1502, 2),
    (item_set_slot, 1117, 1508, 29),
    (item_set_slot, 1117, 41, 90),
    (item_set_slot, 1117, 44, 0),
    (item_set_slot, 1117, 45, 0),
    (item_set_slot, 1118, 1501, 200),
    (item_set_slot, 1118, 1500, 0),
    (item_set_slot, 1118, 1502, 2),
    (item_set_slot, 1118, 1508, 29),
    (item_set_slot, 1118, 41, 60),
    (item_set_slot, 1118, 44, 0),
    (item_set_slot, 1118, 45, 0),
    (item_set_slot, 1119, 1501, 175),
    (item_set_slot, 1119, 1500, 0),
    (item_set_slot, 1119, 1502, 2),
    (item_set_slot, 1119, 1508, 29),
    (item_set_slot, 1119, 41, 50),
    (item_set_slot, 1119, 44, 0),
    (item_set_slot, 1119, 45, 0),
    (item_set_slot, 1120, 1501, 200),
    (item_set_slot, 1120, 1500, 0),
    (item_set_slot, 1120, 1502, 2),
    (item_set_slot, 1120, 1508, 29),
    (item_set_slot, 1120, 41, 60),
    (item_set_slot, 1120, 44, 0),
    (item_set_slot, 1120, 45, 0),
    (item_set_slot, 1121, 1501, 2600),
    (item_set_slot, 1121, 1500, 10),
    (item_set_slot, 1121, 1502, 1),
    (item_set_slot, 1121, 1508, 29),
    (item_set_slot, 1121, 41, 0),
    (item_set_slot, 1121, 44, 51),
    (item_set_slot, 1121, 45, 20),
    (item_set_slot, 1122, 1501, 2600),
    (item_set_slot, 1122, 1500, 10),
    (item_set_slot, 1122, 1502, 1),
    (item_set_slot, 1122, 1508, 29),
    (item_set_slot, 1122, 41, 0),
    (item_set_slot, 1122, 44, 51),
    (item_set_slot, 1122, 45, 20),
    (item_set_slot, 1123, 1501, 2600),
    (item_set_slot, 1123, 1500, 10),
    (item_set_slot, 1123, 1502, 1),
    (item_set_slot, 1123, 1508, 29),
    (item_set_slot, 1123, 41, 0),
    (item_set_slot, 1123, 44, 51),
    (item_set_slot, 1123, 45, 20),
    (item_set_slot, 1124, 1501, 2600),
    (item_set_slot, 1124, 1500, 10),
    (item_set_slot, 1124, 1502, 1),
    (item_set_slot, 1124, 1508, 29),
    (item_set_slot, 1124, 41, 0),
    (item_set_slot, 1124, 44, 51),
    (item_set_slot, 1124, 45, 20),
    (item_set_slot, 1125, 1501, 2100),
    (item_set_slot, 1125, 1500, 9),
    (item_set_slot, 1125, 1502, 1),
    (item_set_slot, 1125, 1508, 29),
    (item_set_slot, 1125, 41, 0),
    (item_set_slot, 1125, 44, 41),
    (item_set_slot, 1125, 45, 17),
    (item_set_slot, 1126, 1501, 200),
    (item_set_slot, 1126, 1500, 0),
    (item_set_slot, 1126, 1502, 2),
    (item_set_slot, 1126, 1508, 29),
    (item_set_slot, 1126, 41, 60),
    (item_set_slot, 1126, 44, 0),
    (item_set_slot, 1126, 45, 0),
    (item_set_slot, 1127, 1501, 2600),
    (item_set_slot, 1127, 1500, 10),
    (item_set_slot, 1127, 1502, 1),
    (item_set_slot, 1127, 1508, 29),
    (item_set_slot, 1127, 41, 0),
    (item_set_slot, 1127, 44, 51),
    (item_set_slot, 1127, 45, 20),
    (item_set_slot, 1128, 1501, 2600),
    (item_set_slot, 1128, 1500, 10),
    (item_set_slot, 1128, 1502, 1),
    (item_set_slot, 1128, 1508, 29),
    (item_set_slot, 1128, 41, 0),
    (item_set_slot, 1128, 44, 51),
    (item_set_slot, 1128, 45, 20),
    (item_set_slot, 1129, 1501, 2600),
    (item_set_slot, 1129, 1500, 10),
    (item_set_slot, 1129, 1502, 1),
    (item_set_slot, 1129, 1508, 29),
    (item_set_slot, 1129, 41, 0),
    (item_set_slot, 1129, 44, 51),
    (item_set_slot, 1129, 45, 20),
    (item_set_slot, 1130, 1501, 1400),
    (item_set_slot, 1130, 1500, 5),
    (item_set_slot, 1130, 1502, 0),
    (item_set_slot, 1130, 1508, 26),
    (item_set_slot, 1130, 41, 0),
    (item_set_slot, 1130, 44, 26),
    (item_set_slot, 1130, 45, 12),
    (item_set_slot, 1131, 1501, 2100),
    (item_set_slot, 1131, 1500, 9),
    (item_set_slot, 1131, 1502, 1),
    (item_set_slot, 1131, 1508, 29),
    (item_set_slot, 1131, 41, 0),
    (item_set_slot, 1131, 44, 41),
    (item_set_slot, 1131, 45, 17),
    (item_set_slot, 1132, 1501, 1400),
    (item_set_slot, 1132, 1500, 5),
    (item_set_slot, 1132, 1502, 0),
    (item_set_slot, 1132, 1508, 26),
    (item_set_slot, 1132, 41, 0),
    (item_set_slot, 1132, 44, 26),
    (item_set_slot, 1132, 45, 12),
    (item_set_slot, 1133, 1501, 1400),
    (item_set_slot, 1133, 1500, 5),
    (item_set_slot, 1133, 1502, 0),
    (item_set_slot, 1133, 1508, 26),
    (item_set_slot, 1133, 41, 0),
    (item_set_slot, 1133, 44, 26),
    (item_set_slot, 1133, 45, 12),
    (item_set_slot, 1134, 1501, 50),
    (item_set_slot, 1134, 1500, 0),
    (item_set_slot, 1134, 1502, 0),
    (item_set_slot, 1134, 1508, 26),
    (item_set_slot, 1134, 41, 8),
    (item_set_slot, 1134, 44, 0),
    (item_set_slot, 1134, 45, 0),
    (item_set_slot, 1135, 1501, 50),
    (item_set_slot, 1135, 1500, 0),
    (item_set_slot, 1135, 1502, 0),
    (item_set_slot, 1135, 1508, 26),
    (item_set_slot, 1135, 41, 8),
    (item_set_slot, 1135, 44, 0),
    (item_set_slot, 1135, 45, 0),
    (item_set_slot, 1136, 1501, 50),
    (item_set_slot, 1136, 1500, 0),
    (item_set_slot, 1136, 1502, 0),
    (item_set_slot, 1136, 1508, 26),
    (item_set_slot, 1136, 41, 8),
    (item_set_slot, 1136, 44, 0),
    (item_set_slot, 1136, 45, 0),
    (item_set_slot, 1137, 1501, 2600),
    (item_set_slot, 1137, 1500, 10),
    (item_set_slot, 1137, 1502, 1),
    (item_set_slot, 1137, 1508, 29),
    (item_set_slot, 1137, 41, 0),
    (item_set_slot, 1137, 44, 51),
    (item_set_slot, 1137, 45, 20),
    (item_set_slot, 1138, 1501, 1800),
    (item_set_slot, 1138, 1500, 8),
    (item_set_slot, 1138, 1502, 0),
    (item_set_slot, 1138, 1508, 26),
    (item_set_slot, 1138, 41, 0),
    (item_set_slot, 1138, 44, 33),
    (item_set_slot, 1138, 45, 14),
    (item_set_slot, 1139, 1501, 200),
    (item_set_slot, 1139, 1500, 0),
    (item_set_slot, 1139, 1502, 0),
    (item_set_slot, 1139, 1508, 26),
    (item_set_slot, 1139, 41, 60),
    (item_set_slot, 1139, 44, 0),
    (item_set_slot, 1139, 45, 0),
    (item_set_slot, 1140, 1501, 150),
    (item_set_slot, 1140, 1500, 0),
    (item_set_slot, 1140, 1502, 0),
    (item_set_slot, 1140, 1508, 26),
    (item_set_slot, 1140, 41, 40),
    (item_set_slot, 1140, 44, 0),
    (item_set_slot, 1140, 45, 0),
    (item_set_slot, 1141, 1501, 1400),
    (item_set_slot, 1141, 1500, 5),
    (item_set_slot, 1141, 1502, 1),
    (item_set_slot, 1141, 1508, 29),
    (item_set_slot, 1141, 41, 0),
    (item_set_slot, 1141, 44, 26),
    (item_set_slot, 1141, 45, 12),
    (item_set_slot, 1142, 1501, 1400),
    (item_set_slot, 1142, 1500, 5),
    (item_set_slot, 1142, 1502, 1),
    (item_set_slot, 1142, 1508, 29),
    (item_set_slot, 1142, 41, 0),
    (item_set_slot, 1142, 44, 26),
    (item_set_slot, 1142, 45, 12),
    (item_set_slot, 1143, 1501, 1400),
    (item_set_slot, 1143, 1500, 5),
    (item_set_slot, 1143, 1502, 1),
    (item_set_slot, 1143, 1508, 29),
    (item_set_slot, 1143, 41, 0),
    (item_set_slot, 1143, 44, 26),
    (item_set_slot, 1143, 45, 12),
    (item_set_slot, 1144, 1501, 1100),
    (item_set_slot, 1144, 1500, 3),
    (item_set_slot, 1144, 1502, 0),
    (item_set_slot, 1144, 1508, 26),
    (item_set_slot, 1144, 41, 0),
    (item_set_slot, 1144, 44, 21),
    (item_set_slot, 1144, 45, 10),
    (item_set_slot, 1145, 1501, 1100),
    (item_set_slot, 1145, 1500, 3),
    (item_set_slot, 1145, 1502, 0),
    (item_set_slot, 1145, 1508, 26),
    (item_set_slot, 1145, 41, 0),
    (item_set_slot, 1145, 44, 21),
    (item_set_slot, 1145, 45, 10),
    (item_set_slot, 1146, 1501, 1100),
    (item_set_slot, 1146, 1500, 3),
    (item_set_slot, 1146, 1502, 0),
    (item_set_slot, 1146, 1508, 26),
    (item_set_slot, 1146, 41, 0),
    (item_set_slot, 1146, 44, 21),
    (item_set_slot, 1146, 45, 10),
    (item_set_slot, 1147, 1501, 1100),
    (item_set_slot, 1147, 1500, 3),
    (item_set_slot, 1147, 1502, 0),
    (item_set_slot, 1147, 1508, 26),
    (item_set_slot, 1147, 41, 0),
    (item_set_slot, 1147, 44, 21),
    (item_set_slot, 1147, 45, 10),
    (item_set_slot, 1148, 1501, 100),
    (item_set_slot, 1148, 1500, 0),
    (item_set_slot, 1148, 1502, 0),
    (item_set_slot, 1148, 1508, 26),
    (item_set_slot, 1148, 41, 20),
    (item_set_slot, 1148, 44, 0),
    (item_set_slot, 1148, 45, 0),
    (item_set_slot, 1149, 1501, 100),
    (item_set_slot, 1149, 1500, 0),
    (item_set_slot, 1149, 1502, 0),
    (item_set_slot, 1149, 1508, 26),
    (item_set_slot, 1149, 41, 20),
    (item_set_slot, 1149, 44, 0),
    (item_set_slot, 1149, 45, 0),
    (item_set_slot, 1150, 1501, 2600),
    (item_set_slot, 1150, 1500, 10),
    (item_set_slot, 1150, 1502, 1),
    (item_set_slot, 1150, 1508, 29),
    (item_set_slot, 1150, 41, 0),
    (item_set_slot, 1150, 44, 51),
    (item_set_slot, 1150, 45, 20),
    (item_set_slot, 1151, 1501, 1100),
    (item_set_slot, 1151, 1500, 3),
    (item_set_slot, 1151, 1502, 0),
    (item_set_slot, 1151, 1508, 26),
    (item_set_slot, 1151, 41, 0),
    (item_set_slot, 1151, 44, 21),
    (item_set_slot, 1151, 45, 10),
    (item_set_slot, 1152, 1501, 175),
    (item_set_slot, 1152, 1500, 0),
    (item_set_slot, 1152, 1502, 2),
    (item_set_slot, 1152, 1508, 29),
    (item_set_slot, 1152, 41, 50),
    (item_set_slot, 1152, 44, 0),
    (item_set_slot, 1152, 45, 0),
    (item_set_slot, 1153, 1501, 175),
    (item_set_slot, 1153, 1500, 0),
    (item_set_slot, 1153, 1502, 2),
    (item_set_slot, 1153, 1508, 29),
    (item_set_slot, 1153, 41, 50),
    (item_set_slot, 1153, 44, 0),
    (item_set_slot, 1153, 45, 0),
    (item_set_slot, 1154, 1501, 200),
    (item_set_slot, 1154, 1500, 0),
    (item_set_slot, 1154, 1502, 2),
    (item_set_slot, 1154, 1508, 29),
    (item_set_slot, 1154, 41, 60),
    (item_set_slot, 1154, 44, 0),
    (item_set_slot, 1154, 45, 0),
    (item_set_slot, 1155, 1501, 200),
    (item_set_slot, 1155, 1500, 0),
    (item_set_slot, 1155, 1502, 2),
    (item_set_slot, 1155, 1508, 29),
    (item_set_slot, 1155, 41, 60),
    (item_set_slot, 1155, 44, 0),
    (item_set_slot, 1155, 45, 0),
    (item_set_slot, 1156, 1501, 200),
    (item_set_slot, 1156, 1500, 0),
    (item_set_slot, 1156, 1502, 2),
    (item_set_slot, 1156, 1508, 29),
    (item_set_slot, 1156, 41, 60),
    (item_set_slot, 1156, 44, 0),
    (item_set_slot, 1156, 45, 0),
    (item_set_slot, 1157, 1501, 3100),
    (item_set_slot, 1157, 1500, 12),
    (item_set_slot, 1157, 1502, 1),
    (item_set_slot, 1157, 1508, 29),
    (item_set_slot, 1157, 41, 0),
    (item_set_slot, 1157, 44, 64),
    (item_set_slot, 1157, 45, 24),
    (item_set_slot, 1158, 1501, 50),
    (item_set_slot, 1158, 1500, 0),
    (item_set_slot, 1158, 1502, 2),
    (item_set_slot, 1158, 1508, 29),
    (item_set_slot, 1158, 41, 4),
    (item_set_slot, 1158, 44, 0),
    (item_set_slot, 1158, 45, 0),
    (item_set_slot, 1159, 1501, 1400),
    (item_set_slot, 1159, 1500, 5),
    (item_set_slot, 1159, 1502, 1),
    (item_set_slot, 1159, 1508, 29),
    (item_set_slot, 1159, 41, 0),
    (item_set_slot, 1159, 44, 26),
    (item_set_slot, 1159, 45, 12),
    (item_set_slot, 1160, 1501, 200),
    (item_set_slot, 1160, 1500, 0),
    (item_set_slot, 1160, 1502, 2),
    (item_set_slot, 1160, 1508, 29),
    (item_set_slot, 1160, 41, 60),
    (item_set_slot, 1160, 44, 0),
    (item_set_slot, 1160, 45, 0),
    (item_set_slot, 1161, 1501, 200),
    (item_set_slot, 1161, 1500, 0),
    (item_set_slot, 1161, 1502, 2),
    (item_set_slot, 1161, 1508, 29),
    (item_set_slot, 1161, 41, 60),
    (item_set_slot, 1161, 44, 0),
    (item_set_slot, 1161, 45, 0),
    (item_set_slot, 1162, 1501, 200),
    (item_set_slot, 1162, 1500, 0),
    (item_set_slot, 1162, 1502, 2),
    (item_set_slot, 1162, 1508, 29),
    (item_set_slot, 1162, 41, 60),
    (item_set_slot, 1162, 44, 0),
    (item_set_slot, 1162, 45, 0),
    (item_set_slot, 1163, 1501, 200),
    (item_set_slot, 1163, 1500, 0),
    (item_set_slot, 1163, 1502, 2),
    (item_set_slot, 1163, 1508, 29),
    (item_set_slot, 1163, 41, 60),
    (item_set_slot, 1163, 44, 0),
    (item_set_slot, 1163, 45, 0),
    (item_set_slot, 1164, 1501, 200),
    (item_set_slot, 1164, 1500, 0),
    (item_set_slot, 1164, 1502, 2),
    (item_set_slot, 1164, 1508, 29),
    (item_set_slot, 1164, 41, 60),
    (item_set_slot, 1164, 44, 0),
    (item_set_slot, 1164, 45, 0),
    (item_set_slot, 1165, 1501, 200),
    (item_set_slot, 1165, 1500, 0),
    (item_set_slot, 1165, 1502, 2),
    (item_set_slot, 1165, 1508, 29),
    (item_set_slot, 1165, 41, 60),
    (item_set_slot, 1165, 44, 0),
    (item_set_slot, 1165, 45, 0),
    (item_set_slot, 1166, 1501, 150),
    (item_set_slot, 1166, 1500, 0),
    (item_set_slot, 1166, 1502, 2),
    (item_set_slot, 1166, 1508, 29),
    (item_set_slot, 1166, 41, 40),
    (item_set_slot, 1166, 44, 0),
    (item_set_slot, 1166, 45, 0),
    (item_set_slot, 1167, 1501, 150),
    (item_set_slot, 1167, 1500, 0),
    (item_set_slot, 1167, 1502, 2),
    (item_set_slot, 1167, 1508, 29),
    (item_set_slot, 1167, 41, 40),
    (item_set_slot, 1167, 44, 0),
    (item_set_slot, 1167, 45, 0),
    (item_set_slot, 1168, 1501, 175),
    (item_set_slot, 1168, 1500, 0),
    (item_set_slot, 1168, 1502, 2),
    (item_set_slot, 1168, 1508, 29),
    (item_set_slot, 1168, 41, 50),
    (item_set_slot, 1168, 44, 0),
    (item_set_slot, 1168, 45, 0),
    (item_set_slot, 1169, 1501, 250),
    (item_set_slot, 1169, 1500, 0),
    (item_set_slot, 1169, 1502, 2),
    (item_set_slot, 1169, 1508, 29),
    (item_set_slot, 1169, 41, 70),
    (item_set_slot, 1169, 44, 0),
    (item_set_slot, 1169, 45, 0),
    (item_set_slot, 1170, 1501, 1800),
    (item_set_slot, 1170, 1500, 8),
    (item_set_slot, 1170, 1502, 1),
    (item_set_slot, 1170, 1508, 29),
    (item_set_slot, 1170, 41, 0),
    (item_set_slot, 1170, 44, 33),
    (item_set_slot, 1170, 45, 14),
    (item_set_slot, 1171, 1501, 200),
    (item_set_slot, 1171, 1500, 0),
    (item_set_slot, 1171, 1502, 2),
    (item_set_slot, 1171, 1508, 29),
    (item_set_slot, 1171, 41, 60),
    (item_set_slot, 1171, 44, 0),
    (item_set_slot, 1171, 45, 0),
    (item_set_slot, 1172, 1501, 200),
    (item_set_slot, 1172, 1500, 0),
    (item_set_slot, 1172, 1502, 2),
    (item_set_slot, 1172, 1508, 29),
    (item_set_slot, 1172, 41, 60),
    (item_set_slot, 1172, 44, 0),
    (item_set_slot, 1172, 45, 0),
    (item_set_slot, 1173, 1501, 200),
    (item_set_slot, 1173, 1500, 0),
    (item_set_slot, 1173, 1502, 2),
    (item_set_slot, 1173, 1508, 29),
    (item_set_slot, 1173, 41, 60),
    (item_set_slot, 1173, 44, 0),
    (item_set_slot, 1173, 45, 0),
    (item_set_slot, 1174, 1501, 50),
    (item_set_slot, 1174, 1500, 0),
    (item_set_slot, 1174, 1502, 0),
    (item_set_slot, 1174, 1508, 26),
    (item_set_slot, 1174, 41, 8),
    (item_set_slot, 1174, 44, 0),
    (item_set_slot, 1174, 45, 0),
    (item_set_slot, 1175, 1501, 50),
    (item_set_slot, 1175, 1500, 0),
    (item_set_slot, 1175, 1502, 2),
    (item_set_slot, 1175, 1508, 29),
    (item_set_slot, 1175, 41, 4),
    (item_set_slot, 1175, 44, 0),
    (item_set_slot, 1175, 45, 0),
    (item_set_slot, 1176, 1501, 300),
    (item_set_slot, 1176, 1500, 0),
    (item_set_slot, 1176, 1502, 2),
    (item_set_slot, 1176, 1508, 29),
    (item_set_slot, 1176, 41, 90),
    (item_set_slot, 1176, 44, 0),
    (item_set_slot, 1176, 45, 0),
    (item_set_slot, 1177, 1501, 250),
    (item_set_slot, 1177, 1500, 0),
    (item_set_slot, 1177, 1508, 27),
    (item_set_slot, 1177, 41, 70),
    (item_set_slot, 1177, 44, 0),
    (item_set_slot, 1177, 45, 0),
    (item_set_slot, 1178, 1501, 250),
    (item_set_slot, 1178, 1500, 0),
    (item_set_slot, 1178, 1508, 27),
    (item_set_slot, 1178, 41, 70),
    (item_set_slot, 1178, 44, 0),
    (item_set_slot, 1178, 45, 0),
    (item_set_slot, 1179, 1501, 250),
    (item_set_slot, 1179, 1500, 0),
    (item_set_slot, 1179, 1508, 27),
    (item_set_slot, 1179, 41, 70),
    (item_set_slot, 1179, 44, 0),
    (item_set_slot, 1179, 45, 0),
    (item_set_slot, 1180, 1501, 250),
    (item_set_slot, 1180, 1500, 0),
    (item_set_slot, 1180, 1508, 27),
    (item_set_slot, 1180, 41, 70),
    (item_set_slot, 1180, 44, 0),
    (item_set_slot, 1180, 45, 0),
    (item_set_slot, 1181, 1501, 250),
    (item_set_slot, 1181, 1500, 0),
    (item_set_slot, 1181, 1508, 27),
    (item_set_slot, 1181, 41, 70),
    (item_set_slot, 1181, 44, 0),
    (item_set_slot, 1181, 45, 0),
    (item_set_slot, 1182, 1501, 250),
    (item_set_slot, 1182, 1500, 0),
    (item_set_slot, 1182, 1508, 27),
    (item_set_slot, 1182, 41, 70),
    (item_set_slot, 1182, 44, 0),
    (item_set_slot, 1182, 45, 0),
    (item_set_slot, 1183, 1501, 300),
    (item_set_slot, 1183, 1500, 0),
    (item_set_slot, 1183, 1508, 42),
    (item_set_slot, 1183, 44, 31),
    (item_set_slot, 1183, 45, 0),
    (item_set_slot, 1183, 43, 0),
    (item_set_slot, 1183, 42, 95),
    (item_set_slot, 1184, 1501, 50),
    (item_set_slot, 1184, 1500, 0),
    (item_set_slot, 1184, 1502, 2),
    (item_set_slot, 1184, 1508, 29),
    (item_set_slot, 1184, 41, 8),
    (item_set_slot, 1184, 44, 0),
    (item_set_slot, 1184, 45, 0),
    (item_set_slot, 1185, 1501, 50),
    (item_set_slot, 1185, 1500, 0),
    (item_set_slot, 1185, 1502, 2),
    (item_set_slot, 1185, 1508, 29),
    (item_set_slot, 1185, 41, 8),
    (item_set_slot, 1185, 44, 0),
    (item_set_slot, 1185, 45, 0),
    (item_set_slot, 1186, 1501, 175),
    (item_set_slot, 1186, 1500, 0),
    (item_set_slot, 1186, 1502, 2),
    (item_set_slot, 1186, 1508, 29),
    (item_set_slot, 1186, 41, 50),
    (item_set_slot, 1186, 44, 0),
    (item_set_slot, 1186, 45, 0),
    (item_set_slot, 1187, 1501, 150),
    (item_set_slot, 1187, 1500, 0),
    (item_set_slot, 1187, 1502, 2),
    (item_set_slot, 1187, 1508, 29),
    (item_set_slot, 1187, 41, 40),
    (item_set_slot, 1187, 44, 0),
    (item_set_slot, 1187, 45, 0),
    (item_set_slot, 1188, 1501, 100),
    (item_set_slot, 1188, 1500, 0),
    (item_set_slot, 1188, 1502, 0),
    (item_set_slot, 1188, 1508, 26),
    (item_set_slot, 1188, 41, 20),
    (item_set_slot, 1188, 44, 0),
    (item_set_slot, 1188, 45, 0),
    (item_set_slot, 1189, 1501, 50),
    (item_set_slot, 1189, 1500, 0),
    (item_set_slot, 1189, 1502, 0),
    (item_set_slot, 1189, 1508, 26),
    (item_set_slot, 1189, 41, 0),
    (item_set_slot, 1189, 44, 0),
    (item_set_slot, 1189, 45, 0),
    (item_set_slot, 1190, 1501, 50),
    (item_set_slot, 1190, 1500, 0),
    (item_set_slot, 1190, 1502, 0),
    (item_set_slot, 1190, 1508, 26),
    (item_set_slot, 1190, 41, 4),
    (item_set_slot, 1190, 44, 0),
    (item_set_slot, 1190, 45, 0),
    (item_set_slot, 1191, 1501, 100),
    (item_set_slot, 1191, 1500, 0),
    (item_set_slot, 1191, 1502, 0),
    (item_set_slot, 1191, 1508, 26),
    (item_set_slot, 1191, 41, 0),
    (item_set_slot, 1191, 44, 0),
    (item_set_slot, 1191, 45, 2),
    (item_set_slot, 1192, 1501, 25),
    (item_set_slot, 1192, 1500, 0),
    (item_set_slot, 1192, 1502, 0),
    (item_set_slot, 1192, 1508, 26),
    (item_set_slot, 1192, 41, 0),
    (item_set_slot, 1192, 44, 0),
    (item_set_slot, 1192, 45, 0),
    (item_set_slot, 1193, 1501, 100),
    (item_set_slot, 1193, 1500, 0),
    (item_set_slot, 1193, 1502, 0),
    (item_set_slot, 1193, 1508, 26),
    (item_set_slot, 1193, 41, 0),
    (item_set_slot, 1193, 44, 0),
    (item_set_slot, 1193, 45, 2),
    (item_set_slot, 1194, 1501, 3100),
    (item_set_slot, 1194, 1500, 12),
    (item_set_slot, 1194, 1502, 1),
    (item_set_slot, 1194, 1508, 29),
    (item_set_slot, 1194, 41, 0),
    (item_set_slot, 1194, 44, 64),
    (item_set_slot, 1194, 45, 24),
    (item_set_slot, 1195, 1501, 100),
    (item_set_slot, 1195, 1500, 0),
    (item_set_slot, 1195, 1502, 0),
    (item_set_slot, 1195, 1508, 26),
    (item_set_slot, 1195, 41, 10),
    (item_set_slot, 1195, 44, 0),
    (item_set_slot, 1195, 45, 0),
    (item_set_slot, 1196, 1501, 100),
    (item_set_slot, 1196, 1500, 0),
    (item_set_slot, 1196, 1502, 0),
    (item_set_slot, 1196, 1508, 26),
    (item_set_slot, 1196, 41, 10),
    (item_set_slot, 1196, 44, 0),
    (item_set_slot, 1196, 45, 0),
    (item_set_slot, 1197, 1501, 100),
    (item_set_slot, 1197, 1500, 0),
    (item_set_slot, 1197, 1502, 0),
    (item_set_slot, 1197, 1508, 26),
    (item_set_slot, 1197, 41, 2),
    (item_set_slot, 1197, 44, 0),
    (item_set_slot, 1197, 45, 0),
    (item_set_slot, 1198, 1501, 1650),
    (item_set_slot, 1198, 1500, 0),
    (item_set_slot, 1198, 1508, 0),
    (item_set_slot, 1198, 44, 512),
    (item_set_slot, 1198, 45, 512),
    (item_set_slot, 1198, 43, 60),
    (item_set_slot, 1198, 42, 155),
    (item_set_slot, 1199, 1501, 1650),
    (item_set_slot, 1199, 1500, 0),
    (item_set_slot, 1199, 1508, 0),
    (item_set_slot, 1199, 44, 512),
    (item_set_slot, 1199, 45, 512),
    (item_set_slot, 1199, 43, 60),
    (item_set_slot, 1199, 42, 155),
    (item_set_slot, 1200, 1501, 1650),
    (item_set_slot, 1200, 1500, 0),
    (item_set_slot, 1200, 1508, 0),
    (item_set_slot, 1200, 44, 512),
    (item_set_slot, 1200, 45, 512),
    (item_set_slot, 1200, 43, 60),
    (item_set_slot, 1200, 42, 155),
    (item_set_slot, 1201, 1501, 1650),
    (item_set_slot, 1201, 1500, 0),
    (item_set_slot, 1201, 1508, 0),
    (item_set_slot, 1201, 44, 512),
    (item_set_slot, 1201, 45, 512),
    (item_set_slot, 1201, 43, 60),
    (item_set_slot, 1201, 42, 155),
    (item_set_slot, 1202, 1501, 0),
    (item_set_slot, 1202, 1500, 0),
    (item_set_slot, 1202, 1508, 0),
    (item_set_slot, 0, 1507, 100),
    (item_set_slot, 0, 1504, 0),
    (item_set_slot, 1, 1507, 50),
    (item_set_slot, 1, 1504, -1),
    (item_set_slot, 2, 1507, 55),
    (item_set_slot, 2, 1504, -1),
    (item_set_slot, 3, 1507, 65),
    (item_set_slot, 3, 1504, -1),
    (item_set_slot, 4, 1507, 72),
    (item_set_slot, 4, 1504, -1),
    (item_set_slot, 5, 1507, 75),
    (item_set_slot, 5, 1504, -1),
    (item_set_slot, 6, 1507, 80),
    (item_set_slot, 6, 1504, -1),
    (item_set_slot, 7, 1507, 83),
    (item_set_slot, 7, 1504, -1),
    (item_set_slot, 8, 1507, 86),
    (item_set_slot, 8, 1504, -1),
    (item_set_slot, 9, 1507, 90),
    (item_set_slot, 9, 1504, -1),
    (item_set_slot, 10, 1507, 190),
    (item_set_slot, 10, 1504, 1),
    (item_set_slot, 11, 1507, 250),
    (item_set_slot, 11, 1504, 1),
    (item_set_slot, 12, 1507, 160),
    (item_set_slot, 12, 1504, 1),
    (item_set_slot, 13, 1507, 350),
    (item_set_slot, 13, 1504, 1),
    (item_set_slot, 14, 1507, 670),
    (item_set_slot, 14, 1504, 1),
    (item_set_slot, 15, 1507, 850),
    (item_set_slot, 15, 1504, 1),
    (item_set_slot, 16, 1507, 1450),
    (item_set_slot, 16, 1504, 1),
    (item_set_slot, 17, 1507, 1750),
    (item_set_slot, 17, 1504, 1),
    (item_set_slot, 18, 1507, 190),
    (item_set_slot, 18, 1504, 1),
    (item_set_slot, 19, 1507, 490),
    (item_set_slot, 19, 1504, 1),
    (item_set_slot, 20, 1507, 320),
    (item_set_slot, 20, 1504, 1),
    (item_set_slot, 21, 1507, 50),
    (item_set_slot, 21, 1504, -1),
    (item_set_slot, 22, 1507, 70),
    (item_set_slot, 22, 1504, -1),
    (item_set_slot, 23, 1507, 60),
    (item_set_slot, 23, 1504, -1),
    (item_set_slot, 24, 1507, 170),
    (item_set_slot, 24, 1504, 1),
    (item_set_slot, 25, 1507, 260),
    (item_set_slot, 25, 1504, 1),
    (item_set_slot, 26, 1507, 390),
    (item_set_slot, 26, 1504, 1),
    (item_set_slot, 27, 1507, 650),
    (item_set_slot, 27, 1504, 1),
    (item_set_slot, 28, 1507, 250),
    (item_set_slot, 28, 1504, 1),
    (item_set_slot, 29, 1507, 1150),
    (item_set_slot, 29, 1504, 1),
    (item_set_slot, 30, 1507, 40),
    (item_set_slot, 30, 1504, -1),
    (item_set_slot, 31, 1507, 60),
    (item_set_slot, 31, 1504, -1),
    (item_set_slot, 32, 1507, 90),
    (item_set_slot, 32, 1504, 1),
    (item_set_slot, 33, 1507, 180),
    (item_set_slot, 33, 1504, 1),
    (item_set_slot, 34, 1507, 180),
    (item_set_slot, 34, 1504, -1),
    (item_set_slot, 35, 1507, 650),
    (item_set_slot, 35, 1504, 1),
    (item_set_slot, 36, 1507, 1450),
    (item_set_slot, 36, 1504, 1),
    (item_set_slot, 37, 1507, 100),
    (item_set_slot, 37, 1504, 1),
    (item_set_slot, 38, 1507, 100),
    (item_set_slot, 38, 1504, -1),
    (item_set_slot, 39, 1507, 90),
    (item_set_slot, 39, 1504, -1),
    (item_set_slot, 40, 1507, 40),
    (item_set_slot, 40, 1504, -1),
    (item_set_slot, 41, 1507, 5),
    (item_set_slot, 41, 1504, -1),
    (item_set_slot, 42, 1507, 190),
    (item_set_slot, 42, 1504, 1),

]),

("get_inventory_weight_of_whole_party",
[
    (assign, ":var_0", 0),
    (party_get_num_companion_stacks, ":var_1", "p_main_party"),
    (try_for_range, ":var_2", 0, ":var_1"),
        (party_stack_get_troop_id, ":var_3", "p_main_party", ":var_2"),
        (is_between, ":var_3", "trp_npc1", "trp_kingdom_1_lord"),
        (troop_get_inventory_capacity, ":var_4", ":var_3"),
        (try_for_range, ":var_5", 10, ":var_4"),
            (troop_get_inventory_slot, ":var_6", ":var_3", ":var_5"),
            (ge, ":var_6", 0),
            (item_get_slot, ":var_7", ":var_6", 1501),
            (val_add, ":var_0", ":var_7"),
        (try_end),
    (try_end),
    (val_div, ":var_0", 100),
    (assign, reg0, ":var_0"),

]),

("sort_food",
[
    (store_script_param, ":var_0", 1),
    (assign, ":var_1", 0),
    (troop_get_inventory_capacity, ":var_2", ":var_0"),
    (try_for_range, ":var_3", 10, ":var_2"),
        (troop_get_inventory_slot, ":var_4", ":var_0", ":var_3"),
        (troop_get_inventory_slot_modifier, ":var_5", ":var_0", ":var_3"),
        (gt, ":var_4", -1),
        (is_between, ":var_4", "itm_smoked_fish", "itm_siege_supply"),
        (try_for_range, ":var_6", ":var_3", ":var_2"),
            (neg|eq, ":var_6", ":var_3"),
            (troop_get_inventory_slot, ":var_7", ":var_0", ":var_6"),
            (troop_get_inventory_slot_modifier, ":var_8", ":var_0", ":var_6"),
            (gt, ":var_7", -1),
            (eq, ":var_7", ":var_4"),
            (eq, ":var_8", ":var_5"),
            (troop_inventory_slot_get_item_max_amount, ":var_1", ":var_0", ":var_3"),
            (troop_inventory_slot_get_item_amount, ":var_9", ":var_0", ":var_3"),
            (troop_inventory_slot_get_item_amount, ":var_10", ":var_0", ":var_6"),
            (store_add, ":var_11", ":var_9", ":var_10"),
            (store_sub, ":var_12", ":var_11", ":var_1"),
            (try_begin),
                (gt, ":var_12", 0),
                (troop_inventory_slot_set_item_amount, ":var_0", ":var_3", ":var_1"),
                (troop_inventory_slot_set_item_amount, ":var_0", ":var_6", ":var_12"),
                (assign, ":var_6", 0),
            (else_try),
                (troop_inventory_slot_set_item_amount, ":var_0", ":var_3", ":var_11"),
                (troop_set_inventory_slot, ":var_0", ":var_6", -1),
            (try_end),
        (try_end),
    (try_end),

]),

("auto_sell",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (store_free_inventory_capacity, ":var_2", ":var_1"),
    (troop_sort_inventory, ":var_0"),
    (troop_get_inventory_capacity, ":var_3", ":var_0"),
    (try_for_range_backwards, ":var_4", 10, ":var_3"),
        (troop_get_inventory_slot, ":var_5", ":var_0", ":var_4"),
        (troop_get_inventory_slot_modifier, ":var_6", ":var_0", ":var_4"),
        (gt, ":var_5", -1),
        (item_get_type, ":var_7", ":var_5"),
        (item_slot_eq, ":var_7", 1506, 0),
        (call_script, "script_get_item_value_with_imod", ":var_5", ":var_6"),
        (assign, ":var_8", reg0),
        (val_div, ":var_8", 100),
        (call_script, "script_game_get_item_sell_price_factor", ":var_5"),
        (assign, ":var_9", reg0),
        (val_mul, ":var_8", ":var_9"),
        (val_div, ":var_8", 100),
        (val_max, ":var_8", 1),
        (neg|gt, ":var_8", "$g_auto_sell_price_limit"),
        (store_troop_gold, ":var_10", ":var_1"),
        (neg|gt, ":var_8", ":var_10"),
        (gt, ":var_2", 0),
        (troop_add_item, ":var_1", ":var_5", ":var_6"),
        (val_sub, ":var_2", 1),
        (troop_set_inventory_slot, ":var_0", ":var_4", -1),
        (troop_remove_gold, ":var_1", ":var_8"),
        (troop_add_gold, ":var_0", ":var_8"),
    (try_end),

]),

("start_town_conversation",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (try_begin),
        (eq, ":var_0", 23),
        (assign, ":var_2", 14),
    (else_try),
        (eq, ":var_0", 20),
        (assign, ":var_2", 13),
    (else_try),
        (assign, ":var_2", 10),
        (assign, ":var_2", 13),
    (try_end),
    (party_get_slot, ":var_3", "$current_town", ":var_2"),
    (modify_visitors_at_site, ":var_3"),
    (reset_visitors),
    (set_visitor, 0, "trp_player"),
    (party_get_slot, ":var_4", "$current_town", ":var_0"),
    (set_visitor, ":var_1", ":var_4"),
    (set_jump_mission, "mt_conversation_encounter"),
    (jump_to_scene, ":var_3"),
    (change_screen_map_conversation, ":var_4"),

]),

("get_book_read_slot",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_sub, ":var_2", "trp_kingdom_1_lord", "trp_npc1"),
    (store_sub, ":var_3", ":var_1", "itm_book_tactics"),
    (store_sub, ":var_4", ":var_0", "trp_npc1"),
    (store_mul, ":var_5", ":var_3", ":var_2"),
    (val_add, ":var_5", ":var_4"),
    (assign, reg0, ":var_5"),

]),

("get_troop_max_hp",
[
    (store_script_param_1, ":var_0"),
    (store_skill_level, ":var_1", skl_ironflesh, ":var_0"),
    (store_attribute_level, ":var_2", ":var_0", ca_strength),
    (val_mul, ":var_1", 2),
    (val_add, ":var_1", ":var_2"),
    (val_add, ":var_1", 35),
    (assign, reg0, ":var_1"),

]),

("get_current_item_for_autoloot",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (try_begin),
        (eq, ":var_0", 0),
        (assign, ":var_2", ":var_1"),
        (troop_get_inventory_slot, ":var_3", "$temp", ":var_2"),
    (else_try),
        (store_sub, ":var_2", "$temp", "trp_npc1"),
        (val_mul, ":var_2", 4),
        (val_add, ":var_2", 10),
        (val_add, ":var_2", ":var_1"),
        (troop_get_inventory_slot, ":var_3", "trp_merchants_end", ":var_2"),
    (try_end),
    (try_begin),
        (ge, ":var_3", 0),
        (str_store_item_name, s10, ":var_3"),
    (else_try),
        (str_store_string, s10, "str_none"),
    (try_end),

]),

("prsnt_lines",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (store_script_param, ":var_3", 4),
    (create_mesh_overlay, reg1, "mesh_white_plane"),
    (val_mul, ":var_0", 50),
    (val_mul, ":var_1", 50),
    (position_set_x, pos1, ":var_0"),
    (position_set_y, pos1, ":var_1"),
    (overlay_set_size, reg1, pos1),
    (position_set_x, pos1, ":var_2"),
    (position_set_y, pos1, ":var_3"),
    (overlay_set_position, reg1, pos1),
    (overlay_set_color, reg1, 0),

]),

("copy_inventory",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (troop_clear_inventory, ":var_1"),
    (troop_get_inventory_capacity, ":var_2", ":var_0"),
    (try_for_range, ":var_3", 0, ":var_2"),
        (troop_get_inventory_slot, ":var_4", ":var_0", ":var_3"),
        (troop_set_inventory_slot, ":var_1", ":var_3", ":var_4"),
        (troop_get_inventory_slot_modifier, ":var_5", ":var_0", ":var_3"),
        (troop_set_inventory_slot_modifier, ":var_1", ":var_3", ":var_5"),
        (troop_inventory_slot_get_item_amount, ":var_6", ":var_0", ":var_3"),
        (gt, ":var_6", 0),
        (troop_inventory_slot_set_item_amount, ":var_1", ":var_3", ":var_6"),
    (try_end),

]),

("sell_all_prisoners",
[
    (assign, ":var_0", 0),
    (party_get_num_prisoner_stacks, ":var_1", "p_main_party"),
    (try_for_range_backwards, ":var_2", 0, ":var_1"),
        (party_prisoner_stack_get_troop_id, ":var_3", "p_main_party", ":var_2"),
        (neg|troop_is_hero, ":var_3"),
        (party_prisoner_stack_get_size, ":var_4", "p_main_party", ":var_2"),
        (call_script, "script_game_get_prisoner_price", ":var_3"),
        (assign, ":var_5", reg0),
        (store_mul, ":var_6", ":var_5", ":var_4"),
        (val_add, ":var_0", ":var_6"),
        (party_remove_prisoners, "p_main_party", ":var_3", ":var_4"),
    (try_end),
    (troop_add_gold, "trp_player", ":var_0"),

]),

("get_dest_color_from_rgb",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (assign, ":var_3", 4278190080),
    (val_mul, ":var_1", 256),
    (val_mul, ":var_0", 65536),
    (val_add, ":var_3", ":var_2"),
    (val_add, ":var_3", ":var_1"),
    (val_add, ":var_3", ":var_0"),
    (assign, reg0, ":var_3"),

]),

("convert_rgb_code_to_html_code",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (str_store_string, s0, "@#"),
    (store_div, ":var_3", ":var_0", 16),
    (store_add, ":var_4", "str_key_0", ":var_3"),
    (str_store_string, s1, ":var_4"),
    (str_store_string, s0, "@{s0}{s1}"),
    (store_mod, ":var_5", ":var_0", 16),
    (store_add, ":var_4", "str_key_0", ":var_5"),
    (str_store_string, s1, ":var_4"),
    (str_store_string, s0, "@{s0}{s1}"),
    (store_div, ":var_6", ":var_1", 16),
    (store_add, ":var_4", "str_key_0", ":var_6"),
    (str_store_string, s1, ":var_4"),
    (str_store_string, s0, "@{s0}{s1}"),
    (store_mod, ":var_7", ":var_1", 16),
    (store_add, ":var_4", "str_key_0", ":var_7"),
    (str_store_string, s1, ":var_4"),
    (str_store_string, s0, "@{s0}{s1}"),
    (store_div, ":var_8", ":var_2", 16),
    (store_add, ":var_4", "str_key_0", ":var_8"),
    (str_store_string, s1, ":var_4"),
    (str_store_string, s0, "@{s0}{s1}"),
    (store_mod, ":var_9", ":var_2", 16),
    (store_add, ":var_4", "str_key_0", ":var_9"),
    (str_store_string, s1, ":var_4"),
    (str_store_string, s0, "@{s0}{s1}"),

]),

("convert_slot_no_to_color",
[
    (store_script_param, ":var_0", 1),
    (store_mod, ":var_1", ":var_0", 6),
    (val_div, ":var_0", 6),
    (store_mod, ":var_2", ":var_0", 6),
    (val_div, ":var_0", 6),
    (store_mod, ":var_3", ":var_0", 6),
    (val_mul, ":var_1", 51),
    (val_mul, ":var_2", 51),
    (val_mul, ":var_3", 51),
    (assign, ":var_4", 4278190080),
    (val_mul, ":var_2", 256),
    (val_mul, ":var_3", 65536),
    (val_add, ":var_4", ":var_1"),
    (val_add, ":var_4", ":var_2"),
    (val_add, ":var_4", ":var_3"),
    (assign, reg0, ":var_4"),

]),

("raf_send_messenger_to_companion",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (set_spawn_radius, 1),
    (spawn_around_party, "$current_town", "pt_messenger_party"),
    (assign, ":var_2", reg0),
    (party_add_members, ":var_2", "trp_raf_messenger", 1),
    (try_begin),
        (gt, "$players_kingdom", 0),
        (party_set_faction, ":var_2", "$players_kingdom"),
        (party_set_slot, ":var_2", slot_center_original_faction, "$players_kingdom"),
    (else_try),
        (party_set_faction, ":var_2", "fac_player_faction"),
        (party_set_slot, ":var_2", slot_center_original_faction, "fac_player_faction"),
    (try_end),
    (party_set_slot, ":var_2", slot_party_type, 26),
    (party_set_slot, ":var_2", slot_party_home_center, "$current_town"),
    (party_set_ai_behavior, ":var_2", 1),
    (party_set_ai_object, ":var_2", ":var_0"),
    (party_set_slot, ":var_2", slot_party_ai_object, ":var_0"),
    (party_set_slot, ":var_2", slot_party_orders_object, ":var_1"),
    (troop_set_slot, ":var_1", 400, 1),

]),

("raf_troop_get_religion",
[
    (store_script_param, ":var_0", 1),
    (assign, reg0, -1),
    (store_troop_faction, ":var_1", ":var_0"),
    (try_begin),
        (eq, ":var_1", "fac_kingdom_1"),
        (assign, reg0, 0),
    (else_try),
        (eq, ":var_1", "fac_kingdom_2"),
        (assign, reg0, 3),
    (else_try),
        (eq, ":var_1", "fac_kingdom_20"),
        (assign, reg0, 2),
    (else_try),
        (eq, ":var_1", "fac_kingdom_3"),
        (assign, reg0, 4),
    (else_try),
        (eq, ":var_1", "fac_kingdom_8"),
        (assign, reg0, 1),
    (try_end),

]),

("prsnt_upgrade_tree_switch",
[
    (store_trigger_param_1, ":var_0"),
    (store_trigger_param_2, ":var_1"),
    (try_begin),
        (eq, ":var_0", "$g_presentation_obj_5"),
        (presentation_set_duration, 0),
    (try_end),

]),

("prsnt_upgrade_tree_ready",
[
    (assign, "$g_presentation_next_presentation", -1),
    (create_game_button_overlay, "$g_presentation_obj_5", "@Done"),
    (position_set_x, pos1, 900),
    (position_set_y, pos1, 25),
    (overlay_set_position, "$g_presentation_obj_5", pos1),

]),

("prsnt_upgrade_tree_troop_and_name",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (store_script_param, ":var_3", 4),
    (str_store_troop_name, s1, ":var_1"),
    (create_text_overlay, reg1, "@{s1}", 4112),
    (position_set_x, pos1, 800),
    (position_set_y, pos1, 800),
    (overlay_set_size, reg1, pos1),
    (position_set_x, pos1, ":var_2"),
    (position_set_y, pos1, ":var_3"),
    (overlay_set_position, reg1, pos1),
    (val_sub, ":var_2", 70),
    (val_add, ":var_3", 5),
    (store_mul, ":var_4", ":var_1", 2),
    (create_image_button_overlay_with_tableau_material, reg1, -1, "tableau_game_party_window", ":var_4"),
    (position_set_x, pos1, 450),
    (position_set_y, pos1, 450),
    (overlay_set_size, reg1, pos1),
    (position_set_x, pos1, ":var_2"),
    (position_set_y, pos1, ":var_3"),
    (overlay_set_position, reg1, pos1),
    (troop_set_slot, "trp_temp_array_a", ":var_0", reg1),
    (troop_set_slot, "trp_temp_array_b", ":var_0", ":var_1"),

]),

("prsnt_upgrade_tree_troop_cost",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (call_script, "script_game_get_upgrade_cost", ":var_0"),
    (create_text_overlay, reg1, "@{reg0}", 4112),
    (position_set_x, pos1, 800),
    (position_set_y, pos1, 800),
    (overlay_set_size, reg1, pos1),
    (position_set_x, pos1, ":var_1"),
    (position_set_y, pos1, ":var_2"),
    (overlay_set_position, reg1, pos1),

]),

("raf_religion_to_s11",
[
    (store_script_param, ":var_0", 1),
    (faction_get_slot, ":var_1", ":var_0", 102),
    (try_begin),
        (eq, ":var_1", 0),
        (str_store_string, s11, "str_religion_catholic"),
    (else_try),
        (eq, ":var_1", 3),
        (str_store_string, s11, "str_religion_pagan_balt"),
    (else_try),
        (eq, ":var_1", 4),
        (str_store_string, s11, "str_religion_pagan_mongol"),
    (else_try),
        (eq, ":var_1", 2),
        (str_store_string, s11, "str_religion_muslim"),
    (else_try),
        (eq, ":var_1", 1),
        (str_store_string, s11, "str_religion_orthodox"),
    (try_end),

]),

("division_reset_places",
[
    (assign, "$next_cavalry_place", 200),
    (assign, "$next_archer_place", 1000),
    (assign, "$next_infantry_place", -200),

]),

("battlegroup_place_around_leader",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (team_get_leader, ":var_2", ":var_0"),
    (try_begin),
        (gt, ":var_2", -1),
        (agent_get_position, pos1, ":var_2"),
        (try_begin),
            (eq, "$autorotate_at_player", 1),
            (call_script, "script_team_get_position_of_enemies", 60, ":var_0", 9),
            (neg|eq, reg0, 0),
            (call_script, "script_point_y_toward_position", 1, 60),
        (try_end),
        (store_add, ":var_3", 84, ":var_1"),
        (team_get_slot, ":var_4", ":var_0", ":var_3"),
        (store_add, ":var_3", 12, ":var_1"),
        (team_get_slot, ":var_5", ":var_0", ":var_3"),
        (store_add, ":var_3", 93, ":var_1"),
        (team_get_slot, ":var_6", ":var_0", ":var_3"),
        (store_add, ":var_3", 102, ":var_1"),
        (team_get_slot, ":var_7", ":var_0", ":var_3"),
        (try_begin),
            (this_or_next|eq, ":var_4", 2),
            (eq, ":var_4", 5),
            (position_move_x, pos1, "$next_cavalry_place", 0),
            (try_begin),
                (eq, ":var_6", 0),
                (try_begin),
                    (ge, ":var_7", 0),
                    (store_mul, ":var_8", ":var_7", 133),
                    (val_add, ":var_8", 150),
                (else_try),
                    (assign, ":var_8", 200),
                    (val_mul, ":var_7", -1),
                    (val_add, ":var_7", 1),
                    (val_div, ":var_5", ":var_7"),
                (try_end),
                (store_mul, ":var_9", ":var_5", ":var_8"),
                (store_div, reg0, ":var_9", 2),
                (position_move_x, pos1, reg0, 0),
                (copy_position, pos61, pos1),
            (else_try),
                (store_mul, ":var_8", ":var_7", 50),
                (val_add, ":var_8", 200),
                (convert_to_fixed_point, ":var_5"),
                (store_sqrt, ":var_9", ":var_5"),
                (val_mul, ":var_9", ":var_8"),
                (convert_from_fixed_point, ":var_9"),
                (val_sub, ":var_9", ":var_8"),
                (store_div, reg0, ":var_9", 2),
                (position_move_x, pos1, reg0, 0),
                (copy_position, pos61, pos1),
                (call_script, "script_form_cavalry", ":var_0", ":var_1", ":var_2", ":var_7"),
            (try_end),
            (val_add, "$next_cavalry_place", ":var_9"),
            (val_add, "$next_cavalry_place", 200),
        (else_try),
            (eq, ":var_4", 1),
            (position_move_y, pos1, "$next_archer_place"),
            (copy_position, pos61, pos1),
            (try_begin),
                (neg|eq, ":var_6", 0),
                (call_script, "script_get_centering_amount", 1, ":var_5", ":var_7"),
                (val_mul, reg0, -1),
                (position_move_x, pos1, reg0, 0),
                (call_script, "script_form_archers", ":var_0", ":var_1", ":var_2", ":var_7", ":var_6"),
            (try_end),
            (val_add, "$next_archer_place", 500),
        (else_try),
            (eq, ":var_4", 4),
            (position_move_y, pos1, "$next_archer_place"),
            (copy_position, pos61, pos1),
            (try_begin),
                (neg|eq, ":var_6", 0),
                (call_script, "script_get_centering_amount", ":var_6", ":var_5", ":var_7"),
                (position_move_x, pos1, reg0, 0),
                (call_script, "script_form_infantry", ":var_0", ":var_1", ":var_2", ":var_7", ":var_6"),
            (try_end),
            (val_add, "$next_archer_place", 500),
        (else_try),
            (position_move_x, pos1, "$next_infantry_place", 0),
            (copy_position, pos61, pos1),
            (try_begin),
                (eq, ":var_6", 0),
                (try_begin),
                    (ge, ":var_7", 0),
                    (store_mul, ":var_8", ":var_7", 75),
                    (val_add, ":var_8", 100),
                (else_try),
                    (assign, ":var_8", 150),
                    (val_mul, ":var_7", -1),
                    (val_add, ":var_7", 1),
                    (val_div, ":var_5", ":var_7"),
                (try_end),
                (store_mul, ":var_9", ":var_5", ":var_8"),
                (store_div, reg0, ":var_9", 2),
                (val_mul, reg0, -1),
                (position_move_x, pos61, reg0, 0),
            (else_try),
                (call_script, "script_form_infantry", ":var_0", ":var_1", ":var_2", ":var_7", ":var_6"),
                (call_script, "script_get_centering_amount", ":var_6", ":var_5", ":var_7"),
                (store_mul, ":var_9", 2, reg0),
                (store_mul, ":var_8", ":var_7", 50),
                (val_add, ":var_8", 67),
                (val_add, ":var_9", ":var_8"),
                (val_mul, reg0, -1),
                (position_move_x, pos61, reg0, 0),
            (try_end),
            (val_sub, "$next_infantry_place", ":var_9"),
            (val_sub, "$next_infantry_place", 100),
        (try_end),
        (store_add, ":var_3", 111, ":var_1"),
        (team_set_slot, ":var_0", ":var_3", 0),
        (set_show_messages, 0),
        (team_get_movement_order, reg0, ":var_0", ":var_1"),
        (try_begin),
            (neg|eq, reg0, 0),
            (team_give_order, ":var_0", ":var_1", 0),
        (try_end),
        (call_script, "script_set_formation_position", ":var_0", ":var_1", 61),
        (set_show_messages, 1),
    (try_end),

]),

("form_cavalry",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (store_script_param, ":var_3", 4),
    (store_mul, ":var_4", ":var_3", 50),
    (store_add, ":var_5", 200, ":var_4"),
    (store_add, ":var_6", 300, ":var_4"),
    (assign, ":var_7", 0),
    (try_for_agents, ":var_8"),
        (call_script, "script_cf_valid_formation_member", ":var_0", ":var_1", ":var_2", ":var_8"),
        (agent_get_troop_id, ":var_9", ":var_8"),
        (store_character_level, ":var_10", ":var_9"),
        (gt, ":var_10", ":var_7"),
        (assign, ":var_7", ":var_10"),
    (try_end),
    (assign, ":var_11", 1),
    (assign, ":var_12", 1),
    (store_mul, ":var_13", ":var_6", -1),
    (store_mul, ":var_14", ":var_5", -1),
    (store_div, ":var_15", ":var_5", 2),
    (store_div, ":var_16", ":var_14", 2),
    (val_add, ":var_7", 1),
    (assign, ":var_17", 1),
    (try_for_range_backwards, ":var_18", 0, ":var_7"),
        (try_for_agents, ":var_8"),
            (agent_get_troop_id, ":var_9", ":var_8"),
            (store_character_level, ":var_10", ":var_9"),
            (eq, ":var_10", ":var_18"),
            (call_script, "script_cf_valid_formation_member", ":var_0", ":var_1", ":var_2", ":var_8"),
            (agent_set_scripted_destination, ":var_8", pos1, 1),
            (try_begin),
                (eq, ":var_17", 1),
                (position_move_x, pos1, ":var_14", 0),
            (else_try),
                (position_move_x, pos1, ":var_5", 0),
            (try_end),
            (val_add, ":var_11", 1),
            (gt, ":var_11", ":var_12"),
            (position_move_y, pos1, ":var_13", 0),
            (try_begin),
                (neg|eq, ":var_17", 1),
                (assign, ":var_17", 1),
                (position_move_x, pos1, ":var_16", 0),
            (else_try),
                (assign, ":var_17", 0),
                (position_move_x, pos1, ":var_15", 0),
            (try_end),
            (assign, ":var_11", 1),
            (val_add, ":var_12", 1),
        (try_end),
    (try_end),

]),

("form_archers",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (store_script_param, ":var_3", 4),
    (store_script_param, ":var_4", 5),
    (store_mul, ":var_5", ":var_3", 50),
    (store_add, ":var_6", 67, ":var_5"),
    (assign, ":var_7", 0),
    (try_for_agents, ":var_8"),
        (call_script, "script_cf_valid_formation_member", ":var_0", ":var_1", ":var_2", ":var_8"),
        (agent_set_scripted_destination, ":var_8", pos1, 1),
        (position_move_x, pos1, ":var_6", 0),
        (try_begin),
            (eq, ":var_4", 2),
            (val_add, ":var_7", 75),
            (try_begin),
                (neg|gt, ":var_7", 150),
                (position_move_y, pos1, 75, 0),
            (else_try),
                (position_move_y, pos1, -150, 0),
                (assign, ":var_7", 0),
            (try_end),
        (try_end),
    (try_end),

]),

("form_infantry",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (store_script_param, ":var_3", 4),
    (store_script_param, ":var_4", 5),
    (store_mul, ":var_5", ":var_3", 50),
    (store_add, ":var_6", 67, ":var_5"),
    (store_mul, ":var_7", ":var_6", -1),
    (store_add, ":var_8", 12, ":var_1"),
    (team_get_slot, ":var_9", ":var_0", ":var_8"),
    (try_begin),
        (eq, ":var_4", 1),
        (call_script, "script_get_default_formation", ":var_0"),
        (assign, ":var_4", reg0),
    (try_end),
    (team_get_weapon_usage_order, ":var_10", ":var_0", 0),
    (assign, ":var_11", 1),
    (assign, ":var_12", 1),
    (assign, ":var_13", 1),
    (try_begin),
        (eq, ":var_4", 5),
        (convert_to_fixed_point, ":var_9"),
        (store_sqrt, ":var_14", ":var_9"),
        (convert_from_fixed_point, ":var_14"),
        (val_add, ":var_14", 1),
        (try_for_agents, ":var_15"),
            (call_script, "script_cf_valid_formation_member", ":var_0", ":var_1", ":var_2", ":var_15"),
            (agent_set_scripted_destination, ":var_15", pos1, 1),
            (try_begin),
                (eq, 0, 1),
                (eq, ":var_10", 0),
                (try_begin),
                    (this_or_next|eq, ":var_13", 1),
                    (this_or_next|ge, ":var_13", ":var_14"),
                    (this_or_next|eq, ":var_12", 1),
                    (ge, ":var_12", ":var_14"),
                    (call_script, "script_equip_best_melee_weapon", ":var_15", 0, 0),
                (else_try),
                    (call_script, "script_equip_best_melee_weapon", ":var_15", 0, 1),
                (try_end),
            (try_end),
            (try_begin),
                (eq, ":var_11", 1),
                (position_move_x, pos1, ":var_7", 0),
            (else_try),
                (position_move_x, pos1, ":var_6", 0),
            (try_end),
            (val_add, ":var_12", 1),
            (gt, ":var_12", ":var_14"),
            (position_move_y, pos1, ":var_7", 0),
            (try_begin),
                (neg|eq, ":var_11", 1),
                (assign, ":var_11", 1),
                (position_move_x, pos1, ":var_7", 0),
            (else_try),
                (assign, ":var_11", 0),
                (position_move_x, pos1, ":var_6", 0),
            (try_end),
            (assign, ":var_12", 1),
            (val_add, ":var_13", 1),
        (try_end),
    (else_try),
        (eq, ":var_4", 4),
        (assign, ":var_16", 0),
        (try_for_agents, ":var_15"),
            (call_script, "script_cf_valid_formation_member", ":var_0", ":var_1", ":var_2", ":var_15"),
            (agent_get_troop_id, ":var_17", ":var_15"),
            (store_character_level, ":var_18", ":var_17"),
            (gt, ":var_18", ":var_16"),
            (assign, ":var_16", ":var_18"),
        (try_end),
        (assign, ":var_19", 1),
        (store_div, ":var_20", ":var_6", 2),
        (store_div, ":var_21", ":var_7", 2),
        (val_add, ":var_16", 1),
        (try_for_range_backwards, ":var_22", 0, ":var_16"),
            (try_for_agents, ":var_15"),
                (agent_get_troop_id, ":var_17", ":var_15"),
                (store_character_level, ":var_18", ":var_17"),
                (eq, ":var_18", ":var_22"),
                (call_script, "script_cf_valid_formation_member", ":var_0", ":var_1", ":var_2", ":var_15"),
                (agent_set_scripted_destination, ":var_15", pos1, 1),
                (try_begin),
                    (eq, 0, 1),
                    (eq, ":var_10", 0),
                    (try_begin),
                        (this_or_next|eq, ":var_12", 1),
                        (ge, ":var_12", ":var_19"),
                        (call_script, "script_equip_best_melee_weapon", ":var_15", 0, 0),
                    (else_try),
                        (call_script, "script_equip_best_melee_weapon", ":var_15", 0, 1),
                    (try_end),
                (try_end),
                (try_begin),
                    (eq, ":var_11", 1),
                    (position_move_x, pos1, ":var_7", 0),
                (else_try),
                    (position_move_x, pos1, ":var_6", 0),
                (try_end),
                (val_add, ":var_12", 1),
                (gt, ":var_12", ":var_19"),
                (position_move_y, pos1, ":var_7", 0),
                (try_begin),
                    (neg|eq, ":var_11", 1),
                    (assign, ":var_11", 1),
                    (position_move_x, pos1, ":var_21", 0),
                (else_try),
                    (assign, ":var_11", 0),
                    (position_move_x, pos1, ":var_20", 0),
                (try_end),
                (assign, ":var_12", 1),
                (val_add, ":var_19", 1),
            (try_end),
        (try_end),
    (else_try),
        (eq, ":var_4", 2),
        (store_div, ":var_19", ":var_9", 3),
        (val_add, ":var_19", 1),
        (assign, ":var_16", 0),
        (try_for_agents, ":var_15"),
            (call_script, "script_cf_valid_formation_member", ":var_0", ":var_1", ":var_2", ":var_15"),
            (agent_get_troop_id, ":var_17", ":var_15"),
            (store_character_level, ":var_18", ":var_17"),
            (gt, ":var_18", ":var_16"),
            (assign, ":var_16", ":var_18"),
        (try_end),
        (val_add, ":var_16", 1),
        (try_for_range_backwards, ":var_22", 0, ":var_16"),
            (try_for_agents, ":var_15"),
                (agent_get_troop_id, ":var_17", ":var_15"),
                (store_character_level, ":var_18", ":var_17"),
                (eq, ":var_18", ":var_22"),
                (call_script, "script_cf_valid_formation_member", ":var_0", ":var_1", ":var_2", ":var_15"),
                (agent_set_scripted_destination, ":var_15", pos1, 1),
                (try_begin),
                    (eq, 0, 1),
                    (eq, ":var_10", 0),
                    (try_begin),
                        (eq, ":var_13", 1),
                        (call_script, "script_equip_best_melee_weapon", ":var_15", 0, 0),
                    (else_try),
                        (call_script, "script_equip_best_melee_weapon", ":var_15", 0, 1),
                    (try_end),
                (try_end),
                (try_begin),
                    (eq, ":var_11", 1),
                    (position_move_x, pos1, ":var_7", 0),
                (else_try),
                    (position_move_x, pos1, ":var_6", 0),
                (try_end),
                (val_add, ":var_12", 1),
                (gt, ":var_12", ":var_19"),
                (position_move_y, pos1, ":var_7", 0),
                (try_begin),
                    (neg|eq, ":var_11", 1),
                    (assign, ":var_11", 1),
                    (position_move_x, pos1, ":var_7", 0),
                (else_try),
                    (assign, ":var_11", 0),
                    (position_move_x, pos1, ":var_6", 0),
                (try_end),
                (assign, ":var_12", 1),
                (val_add, ":var_13", 1),
            (try_end),
        (try_end),
    (else_try),
        (eq, ":var_4", 3),
        (store_div, ":var_19", ":var_9", 3),
        (val_add, ":var_19", 1),
        (assign, ":var_23", -1),
        (assign, ":var_24", -1),
        (try_for_range, ":var_25", 0, 3),
            (store_mul, ":var_26", ":var_25", 83),
            (store_add, ":var_27", ":var_26", 83),
            (try_begin),
                (gt, ":var_24", -1),
                (assign, ":var_24", ":var_26"),
            (try_end),
            (try_for_agents, ":var_15"),
                (call_script, "script_cf_valid_formation_member", ":var_0", ":var_1", ":var_2", ":var_15"),
                (agent_get_wielded_item, ":var_28", ":var_15", 0),
                (try_begin),
                    (gt, ":var_28", 0),
                    (item_get_slot, ":var_29", ":var_28", 42),
                (else_try),
                    (assign, ":var_29", 0),
                (try_end),
                (try_begin),
                    (gt, ":var_13", 1),
                    (try_begin),
                        (eq, ":var_23", ":var_15"),
                        (assign, ":var_24", ":var_26"),
                    (else_try),
                        (eq, ":var_23", -1),
                        (assign, ":var_23", ":var_15"),
                    (try_end),
                    (eq, 0, 1),
                    (eq, ":var_10", 0),
                    (ge, ":var_29", ":var_26"),
                    (eq, ":var_24", -1),
                    (call_script, "script_equip_best_melee_weapon", ":var_15", 0, 1),
                    (agent_get_wielded_item, ":var_28", ":var_15", 0),
                    (try_begin),
                        (gt, ":var_28", 0),
                        (item_get_slot, ":var_29", ":var_28", 42),
                    (else_try),
                        (assign, ":var_29", 0),
                    (try_end),
                (try_end),
                (assign, ":var_30", 0),
                (agent_get_wielded_item, ":var_31", ":var_15", 1),
                (try_begin),
                    (gt, ":var_31", 0),
                    (item_get_type, reg0, ":var_31"),
                    (eq, reg0, 7),
                    (try_begin),
                        (is_between, ":var_29", ":var_26", ":var_27"),
                        (assign, ":var_30", 1),
                    (try_end),
                (else_try),
                    (gt, ":var_13", 1),
                    (is_between, ":var_29", ":var_24", ":var_27"),
                    (assign, ":var_30", 1),
                (try_end),
                (eq, ":var_30", 1),
                (agent_set_scripted_destination, ":var_15", pos1, 1),
                (try_begin),
                    (eq, 0, 1),
                    (eq, ":var_10", 0),
                    (eq, ":var_13", 1),
                    (call_script, "script_equip_best_melee_weapon", ":var_15", 1, 0),
                (try_end),
                (try_begin),
                    (eq, ":var_11", 1),
                    (position_move_x, pos1, ":var_7", 0),
                (else_try),
                    (position_move_x, pos1, ":var_6", 0),
                (try_end),
                (val_add, ":var_12", 1),
                (gt, ":var_12", ":var_19"),
                (position_move_y, pos1, ":var_7", 0),
                (try_begin),
                    (neg|eq, ":var_11", 1),
                    (assign, ":var_11", 1),
                    (position_move_x, pos1, ":var_7", 0),
                (else_try),
                    (assign, ":var_11", 0),
                    (position_move_x, pos1, ":var_6", 0),
                (try_end),
                (assign, ":var_12", 1),
                (val_add, ":var_13", 1),
            (try_end),
        (try_end),
    (try_end),

]),

("get_default_formation",
[
    (store_script_param, ":var_0", 1),
    (team_get_slot, ":var_1", ":var_0", 1),
    (try_begin),
        (this_or_next|eq, ":var_1", 29),
        (eq, ":var_1", 28),
        (is_between, "$players_kingdom", "fac_player_supporters_faction", "fac_kingdoms_end"),
        (neg|eq, "$players_kingdom", 29),
        (assign, ":var_1", "$players_kingdom"),
    (try_end),
    (faction_get_slot, ":var_2", ":var_1", slot_faction_culture),
    (try_begin),
        (this_or_next|eq, ":var_2", "fac_culture_finnish"),
        (this_or_next|eq, ":var_2", "fac_culture_mazovian"),
        (this_or_next|eq, ":var_2", "fac_culture_welsh"),
        (this_or_next|eq, ":var_2", "fac_culture_rus"),
        (this_or_next|eq, ":var_2", "fac_culture_nordic"),
        (this_or_next|eq, ":var_2", "fac_culture_baltic"),
        (this_or_next|eq, ":var_2", "fac_culture_gaelic"),
        (eq, ":var_2", "fac_culture_scotish"),
        (assign, reg0, 3),
    (else_try),
        (this_or_next|eq, ":var_1", "fac_player_supporters_faction"),
        (this_or_next|is_between, ":var_1", "fac_player_supporters_faction", "fac_kingdoms_end"),
        (is_between, ":var_2", 7, 28),
        (assign, reg0, 2),
    (try_end),

]),

("equip_best_melee_weapon",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (assign, ":var_3", 0),
    (assign, ":var_4", 0),
    (try_for_range, ":var_5", 0, 4),
        (agent_get_item_slot, ":var_6", ":var_0", ":var_5"),
        (gt, ":var_6", 0),
        (item_get_type, ":var_7", ":var_6"),
        (try_begin),
            (eq, ":var_7", 7),
            (assign, ":var_3", ":var_6"),
        (else_try),
            (eq, ":var_7", 10),
            (assign, ":var_4", ":var_6"),
        (try_end),
    (try_end),
    (try_begin),
        (eq, ":var_4", 0),
        (assign, ":var_8", 0),
        (try_for_range, ":var_5", 0, 4),
            (agent_get_item_slot, ":var_6", ":var_0", ":var_5"),
            (gt, ":var_6", 0),
            (item_get_type, ":var_7", ":var_6"),
            (neg|eq, ":var_7", 7),
            (item_get_slot, reg0, ":var_6", 41),
            (this_or_next|eq, reg0, 0),
            (this_or_next|eq, ":var_1", 0),
            (eq, ":var_3", 0),
            (try_begin),
                (neg|eq, ":var_2", 0),
                (item_get_slot, ":var_9", ":var_6", 42),
                (try_begin),
                    (neg|ge, ":var_8", ":var_9"),
                    (assign, ":var_8", ":var_9"),
                    (assign, ":var_4", ":var_6"),
                (try_end),
            (else_try),
                (assign, ":var_10", 1),
                (agent_get_troop_id, ":var_11", ":var_0"),
                (try_begin),
                    (troop_is_hero, ":var_11"),
                    (try_for_range, ":var_12", 0, 4),
                        (troop_get_inventory_slot, reg0, ":var_11", ":var_12"),
                        (eq, reg0, ":var_6"),
                        (troop_get_inventory_slot_modifier, ":var_10", ":var_11", ":var_12"),
                    (try_end),
                (try_end),
                (call_script, "script_get_item_score_with_imod", ":var_6", ":var_10"),
                (neg|ge, ":var_8", reg0),
                (assign, ":var_8", reg0),
                (assign, ":var_4", ":var_6"),
            (try_end),
        (try_end),
    (try_end),
    (agent_get_wielded_item, reg0, ":var_0", 0),
    (try_begin),
        (neg|eq, reg0, ":var_4"),
        (try_begin),
            (gt, ":var_3", 0),
            (agent_get_wielded_item, reg0, ":var_0", 1),
            (neg|eq, reg0, ":var_3"),
            (agent_set_wielded_item, ":var_0", ":var_3"),
        (try_end),
        (gt, ":var_4", 0),
        (agent_set_wielded_item, ":var_0", ":var_4"),
    (try_end),

]),

("formation_current_position",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (store_add, ":var_3", 120, ":var_2"),
    (team_get_slot, ":var_4", ":var_1", ":var_3"),
    (call_script, "script_get_formation_position", 0, ":var_1", ":var_2"),
    (try_begin),
        (eq, ":var_4", -1),
        (copy_position, ":var_0", pos0),
    (else_try),
        (agent_get_position, ":var_0", ":var_4"),
        (position_copy_rotation, ":var_0", pos0),
        (store_add, ":var_3", 12, ":var_2"),
        (team_get_slot, ":var_5", ":var_1", ":var_3"),
        (store_add, ":var_3", 102, ":var_2"),
        (team_get_slot, ":var_6", ":var_1", ":var_3"),
        (try_begin),
            (store_add, ":var_3", 84, ":var_2"),
            (team_slot_eq, ":var_1", ":var_3", 1),
            (call_script, "script_get_centering_amount", 1, ":var_5", ":var_6"),
        (else_try),
            (store_add, ":var_3", 93, ":var_2"),
            (team_get_slot, ":var_7", ":var_1", ":var_3"),
            (call_script, "script_get_centering_amount", ":var_7", ":var_5", ":var_6"),
            (val_mul, reg0, -1),
        (try_end),
        (position_move_x, ":var_0", reg0, 0),
    (try_end),

]),

("get_centering_amount",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (store_mul, ":var_3", ":var_2", 50),
    (val_add, ":var_3", 67),
    (assign, reg0, 0),
    (try_begin),
        (eq, ":var_0", 5),
        (convert_to_fixed_point, ":var_1"),
        (store_sqrt, reg0, ":var_1"),
        (val_mul, reg0, ":var_3"),
        (convert_from_fixed_point, reg0),
        (val_sub, reg0, ":var_3"),
    (else_try),
        (this_or_next|eq, ":var_0", 2),
        (eq, ":var_0", 3),
        (store_div, reg0, ":var_1", 3),
        (try_begin),
            (store_mod, reg1, ":var_1", 3),
            (eq, reg1, 0),
            (val_sub, reg0, 1),
        (try_end),
        (val_mul, reg0, ":var_3"),
    (else_try),
        (eq, ":var_0", 1),
        (store_mul, reg0, ":var_1", ":var_3"),
    (try_end),
    (val_div, reg0, 2),

]),

("formation_end",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (try_begin),
        (store_add, ":var_2", 93, ":var_1"),
        (neg|team_slot_eq, ":var_0", ":var_2", 0),
        (team_set_slot, ":var_0", ":var_2", 0),
        (team_get_leader, ":var_3", ":var_0"),
        (try_for_agents, ":var_4"),
            (agent_is_alive, ":var_4"),
            (agent_is_human, ":var_4"),
            (agent_get_team, ":var_5", ":var_4"),
            (eq, ":var_5", ":var_0"),
            (neg|eq, ":var_3", ":var_4"),
            (agent_get_division, ":var_6", ":var_4"),
            (eq, ":var_6", ":var_1"),
            (agent_clear_scripted_mode, ":var_4"),
        (try_end),
        (try_begin),
            (eq, ":var_0", "$fplayer_team_no"),
            (store_add, ":var_2", 102, ":var_1"),
            (team_get_slot, ":var_7", "$fplayer_team_no", ":var_2"),
            (set_show_messages, 0),
            (try_begin),
                (gt, ":var_7", 3),
                (assign, ":var_7", 2),
            (else_try),
                (gt, ":var_7", 0),
                (team_give_order, "$fplayer_team_no", ":var_1", 7),
                (try_begin),
                    (gt, ":var_7", 1),
                    (assign, ":var_7", 1),
                (else_try),
                    (assign, ":var_7", 0),
                (try_end),
            (try_end),
            (set_show_messages, 1),
            (team_set_slot, "$fplayer_team_no", ":var_2", ":var_7"),
        (try_end),
    (try_end),

]),

("formation_move_position",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (store_script_param, ":var_3", 4),
    (copy_position, pos1, ":var_2"),
    (call_script, "script_team_get_position_of_enemies", 60, ":var_0", 9),
    (try_begin),
        (neg|eq, reg0, 0),
        (copy_position, pos1, ":var_2"),
        (call_script, "script_point_y_toward_position", 1, 60),
        (assign, ":var_4", reg0),
        (call_script, "script_get_formation_position", 61, ":var_0", ":var_1"),
        (get_distance_between_positions, ":var_5", pos1, pos61),
        (val_add, ":var_5", 1000),
        (try_begin),
            (gt, ":var_3", 0),
            (gt, ":var_5", ":var_4"),
            (assign, ":var_5", ":var_4"),
        (try_end),
        (val_mul, ":var_5", ":var_3"),
        (position_move_y, pos1, ":var_5", 0),
        (try_begin),
            (neg|ge, ":var_4", 1000),
            (position_copy_rotation, pos1, pos61),
        (try_end),
        (call_script, "script_set_formation_position", ":var_0", ":var_1", 1),
        (store_add, ":var_6", 12, ":var_1"),
        (team_get_slot, ":var_7", ":var_0", ":var_6"),
        (store_add, ":var_6", 102, ":var_1"),
        (team_get_slot, ":var_8", ":var_0", ":var_6"),
        (try_begin),
            (store_add, ":var_6", 84, ":var_1"),
            (neg|team_slot_eq, ":var_0", ":var_6", 1),
            (store_add, ":var_6", 93, ":var_1"),
            (team_get_slot, ":var_9", ":var_0", ":var_6"),
            (call_script, "script_get_centering_amount", ":var_9", ":var_7", ":var_8"),
        (else_try),
            (call_script, "script_get_centering_amount", 1, ":var_7", ":var_8"),
            (val_mul, reg0, -1),
        (try_end),
        (position_move_x, pos1, reg0, 0),
    (try_end),

]),

("set_formation_position",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (position_get_x, ":var_3", ":var_2"),
    (position_get_y, ":var_4", ":var_2"),
    (position_get_rotation_around_z, ":var_5", ":var_2"),
    (store_add, ":var_6", 129, ":var_1"),
    (team_set_slot, ":var_0", ":var_6", ":var_3"),
    (store_add, ":var_6", 138, ":var_1"),
    (team_set_slot, ":var_0", ":var_6", ":var_4"),
    (store_add, ":var_6", 147, ":var_1"),
    (team_set_slot, ":var_0", ":var_6", ":var_5"),
    (team_set_order_position, ":var_0", ":var_1", ":var_2"),

]),

("get_formation_position",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (init_position, ":var_0"),
    (try_begin),
        (is_between, ":var_1", 0, 4),
        (store_add, ":var_3", 129, ":var_2"),
        (team_get_slot, ":var_4", ":var_1", ":var_3"),
        (store_add, ":var_3", 138, ":var_2"),
        (team_get_slot, ":var_5", ":var_1", ":var_3"),
        (store_add, ":var_3", 147, ":var_2"),
        (team_get_slot, ":var_6", ":var_1", ":var_3"),
        (position_set_x, ":var_0", ":var_4"),
        (position_set_y, ":var_0", ":var_5"),
        (position_rotate_z, ":var_0", ":var_6"),
    (else_try),
        (store_add, ":var_3", 120, ":var_2"),
        (team_get_slot, reg0, ":var_1", ":var_3"),
        (try_begin),
            (gt, reg0, -1),
            (team_get_order_position, ":var_0", ":var_1", ":var_2"),
            (agent_get_position, pos0, reg0),
            (agent_set_position, reg0, ":var_0"),
            (agent_get_position, ":var_0", reg0),
            (agent_set_position, reg0, pos0),
        (try_end),
    (try_end),
    (position_set_z_to_ground_level, ":var_0"),

]),

("cf_battlegroup_valid_formation",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (assign, ":var_3", 0),
    (store_add, ":var_4", 84, ":var_1"),
    (team_get_slot, ":var_5", ":var_0", ":var_4"),
    (try_begin),
        (this_or_next|eq, ":var_5", 2),
        (eq, ":var_5", 5),
        (assign, ":var_6", 5),
        (try_begin),
            (eq, ":var_2", 4),
            (assign, ":var_3", 1),
        (try_end),
    (else_try),
        (eq, ":var_5", 1),
        (assign, ":var_6", 12),
        (try_begin),
            (this_or_next|eq, ":var_2", 2),
            (eq, ":var_2", 1),
            (assign, ":var_3", 1),
        (try_end),
    (else_try),
        (assign, ":var_6", 12),
        (neg|eq, ":var_2", 0),
        (assign, ":var_3", 1),
    (try_end),
    (try_begin),
        (eq, ":var_3", 0),
        (assign, ":var_7", 0),
    (else_try),
        (store_add, ":var_4", 12, ":var_1"),
        (team_get_slot, ":var_7", ":var_0", ":var_4"),
        (neg|gt, ":var_7", ":var_6"),
        (assign, ":var_7", 1),
    (try_end),
    (assign, reg0, ":var_7"),
    (gt, ":var_7", 1),

]),

("cf_valid_formation_member",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (store_script_param, ":var_3", 4),
    (neg|eq, ":var_2", ":var_3"),
    (agent_get_division, ":var_4", ":var_3"),
    (eq, ":var_4", ":var_1"),
    (agent_get_team, ":var_5", ":var_3"),
    (eq, ":var_5", ":var_0"),
    (agent_is_alive, ":var_3"),
    (agent_is_human, ":var_3"),
    (agent_slot_eq, ":var_3", slot_agent_is_running_away, 0),

]),

("player_attempt_formation",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (set_fixed_point_multiplier, 100),
    (try_begin),
        (eq, ":var_1", 2),
        (str_store_string, s1, "@ranks"),
    (else_try),
        (eq, ":var_1", 3),
        (str_store_string, s1, "@shield wall"),
    (else_try),
        (eq, ":var_1", 4),
        (str_store_string, s1, "@wedge"),
    (else_try),
        (eq, ":var_1", 5),
        (str_store_string, s1, "@square"),
    (else_try),
        (str_store_string, s1, "@up"),
    (try_end),
    (str_store_class_name, s2, ":var_0"),
    (try_begin),
        (call_script, "script_cf_battlegroup_valid_formation", "$fplayer_team_no", ":var_0", ":var_1"),
        (try_begin),
            (store_add, ":var_2", 93, ":var_0"),
            (neg|team_slot_eq, "$fplayer_team_no", ":var_2", ":var_1"),
            (team_set_slot, "$fplayer_team_no", ":var_2", ":var_1"),
            (display_message, "@{!}{s2} forming {s1}."),
            (store_add, ":var_2", 102, ":var_0"),
            (team_get_slot, ":var_3", "$fplayer_team_no", ":var_2"),
            (set_show_messages, 0),
            (assign, reg0, ":var_3"),
            (try_for_range, reg1, reg0, 2),
                (team_give_order, "$fplayer_team_no", ":var_0", 8),
                (val_add, ":var_3", 1),
            (try_end),
            (set_show_messages, 1),
            (team_set_slot, "$fplayer_team_no", ":var_2", ":var_3"),
        (try_end),
    (else_try),
        (assign, ":var_4", reg0),
        (call_script, "script_formation_end", "$fplayer_team_no", ":var_0"),
        (neg|eq, ":var_1", 0),
        (try_begin),
            (gt, ":var_4", 0),
            (display_message, "@Not enough troops in {s2} to form {s1}, but holding."),
        (else_try),
            (store_add, ":var_2", 84, ":var_0"),
            (team_get_slot, reg0, "$fplayer_team_no", ":var_2"),
            (call_script, "script_str_store_division_type_name", 3, reg0),
            (display_message, "@{!}{s2} is an {s3} division and cannot form {s1}, so is holding."),
        (try_end),
    (try_end),
    (call_script, "script_battlegroup_place_around_leader", "$fplayer_team_no", ":var_0"),

]),

("str_store_division_type_name",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (try_begin),
        (eq, ":var_1", 0),
        (str_store_string, ":var_0", "@infantry"),
    (else_try),
        (eq, ":var_1", 1),
        (str_store_string, ":var_0", "@archer"),
    (else_try),
        (eq, ":var_1", 2),
        (str_store_string, ":var_0", "@cavalry"),
    (else_try),
        (eq, ":var_1", 3),
        (str_store_string, ":var_0", "@polearm"),
    (else_try),
        (eq, ":var_1", 4),
        (str_store_string, ":var_0", "@skirmisher"),
    (else_try),
        (eq, ":var_1", 5),
        (str_store_string, ":var_0", "@mounted archer"),
    (else_try),
        (eq, ":var_1", 6),
        (str_store_string, ":var_0", "@support"),
    (else_try),
        (eq, ":var_1", 7),
        (str_store_string, ":var_0", "@bodyguard"),
    (else_try),
        (str_store_string, ":var_0", "@undetermined type of"),
    (try_end),

]),

("player_order_formations",
[
    (store_script_param, ":var_0", 1),
    (set_fixed_point_multiplier, 100),
    (try_begin),
        (eq, ":var_0", 0),
        (call_script, "script_division_reset_places"),
        (try_for_range, ":var_1", 0, 9),
            (class_is_listening_order, "$fplayer_team_no", ":var_1"),
            (store_add, ":var_2", 12, ":var_1"),
            (team_slot_ge, "$fplayer_team_no", ":var_2", 1),
            (store_add, ":var_2", 93, ":var_1"),
            (team_get_slot, ":var_3", "$fplayer_team_no", ":var_2"),
            (call_script, "script_player_attempt_formation", ":var_1", ":var_3"),
        (try_end),
    (else_try),
        (eq, ":var_0", 1),
        (try_for_range, ":var_1", 0, 9),
            (class_is_listening_order, "$fplayer_team_no", ":var_1"),
            (store_add, ":var_2", 12, ":var_1"),
            (team_slot_ge, "$fplayer_team_no", ":var_2", 1),
            (store_add, ":var_2", 93, ":var_1"),
            (team_get_slot, ":var_3", "$fplayer_team_no", ":var_2"),
            (call_script, "script_player_attempt_formation", ":var_1", ":var_3"),
            (store_add, ":var_2", 111, ":var_1"),
            (team_set_slot, "$fplayer_team_no", ":var_2", ":var_0"),
        (try_end),
    (else_try),
        (this_or_next|eq, ":var_0", 2),
        (eq, ":var_0", 14),
        (try_for_range, ":var_1", 0, 9),
            (class_is_listening_order, "$fplayer_team_no", ":var_1"),
            (store_add, ":var_2", 111, ":var_1"),
            (team_set_slot, "$fplayer_team_no", ":var_2", ":var_0"),
            (store_add, ":var_2", 93, ":var_1"),
            (neg|team_slot_eq, "$fplayer_team_no", ":var_2", 0),
            (call_script, "script_formation_end", "$fplayer_team_no", ":var_1"),
            (store_add, ":var_2", 84, ":var_1"),
            (store_add, reg0, ":var_1", 1),
            (try_begin),
                (this_or_next|team_slot_eq, "$fplayer_team_no", ":var_2", 0),
                (team_slot_eq, "$fplayer_team_no", ":var_2", 3),
                (display_message, "@Division {reg0}: infantry formation disassembled."),
            (else_try),
                (team_slot_eq, "$fplayer_team_no", ":var_2", 1),
                (display_message, "@Division {reg0}: archer formation disassembled."),
            (else_try),
                (team_slot_eq, "$fplayer_team_no", ":var_2", 4),
                (display_message, "@Division {reg0}: skirmisher formation disassembled."),
            (else_try),
                (this_or_next|team_slot_eq, "$fplayer_team_no", ":var_2", 2),
                (team_slot_eq, "$fplayer_team_no", ":var_2", 5),
                (display_message, "@Division {reg0}: cavalry formation disassembled."),
            (else_try),
                (display_message, "@Division {reg0}: formation disassembled."),
            (try_end),
        (try_end),
    (else_try),
        (eq, ":var_0", 4),
        (try_for_range, ":var_1", 0, 9),
            (class_is_listening_order, "$fplayer_team_no", ":var_1"),
            (store_add, ":var_2", 84, ":var_1"),
            (this_or_next|team_slot_eq, "$fplayer_team_no", ":var_2", 2),
            (team_slot_eq, "$fplayer_team_no", ":var_2", 5),
            (store_add, ":var_2", 93, ":var_1"),
            (neg|team_slot_eq, "$fplayer_team_no", ":var_2", 0),
            (call_script, "script_formation_end", "$fplayer_team_no", ":var_1"),
            (display_message, "@Cavalry formation disassembled."),
        (try_end),
    (else_try),
        (eq, ":var_0", 5),
        (try_for_range, ":var_1", 0, 9),
            (class_is_listening_order, "$fplayer_team_no", ":var_1"),
            (store_add, ":var_2", 111, ":var_1"),
            (team_get_slot, ":var_4", "$fplayer_team_no", ":var_2"),
            (team_set_slot, "$fplayer_team_no", ":var_2", ":var_0"),
            (store_add, ":var_2", 93, ":var_1"),
            (team_get_slot, ":var_3", "$fplayer_team_no", ":var_2"),
            (neg|eq, ":var_3", 0),
            (call_script, "script_formation_current_position", 63, "$fplayer_team_no", ":var_1"),
            (try_begin),
                (neg|eq, ":var_4", 5),
                (call_script, "script_set_formation_position", "$fplayer_team_no", ":var_1", 63),
            (try_end),
            (call_script, "script_formation_move_position", "$fplayer_team_no", ":var_1", 63, 1),
            (store_add, ":var_2", 102, ":var_1"),
            (team_get_slot, ":var_5", "$fplayer_team_no", ":var_2"),
            (store_add, ":var_2", 84, ":var_1"),
            (try_begin),
                (team_slot_eq, "$fplayer_team_no", ":var_2", 1),
                (call_script, "script_form_archers", "$fplayer_team_no", ":var_1", "$fplayer_agent_no", ":var_5", ":var_3"),
            (else_try),
                (this_or_next|team_slot_eq, "$fplayer_team_no", ":var_2", 2),
                (team_slot_eq, "$fplayer_team_no", ":var_2", 5),
                (call_script, "script_form_cavalry", "$fplayer_team_no", ":var_1", "$fplayer_agent_no", ":var_5"),
            (else_try),
                (call_script, "script_form_infantry", "$fplayer_team_no", ":var_1", "$fplayer_agent_no", ":var_5", ":var_3"),
            (try_end),
        (try_end),
    (else_try),
        (eq, ":var_0", 6),
        (try_for_range, ":var_1", 0, 9),
            (class_is_listening_order, "$fplayer_team_no", ":var_1"),
            (store_add, ":var_2", 111, ":var_1"),
            (team_get_slot, ":var_4", "$fplayer_team_no", ":var_2"),
            (team_set_slot, "$fplayer_team_no", ":var_2", ":var_0"),
            (store_add, ":var_2", 93, ":var_1"),
            (team_get_slot, ":var_3", "$fplayer_team_no", ":var_2"),
            (neg|eq, ":var_3", 0),
            (call_script, "script_formation_current_position", 63, "$fplayer_team_no", ":var_1"),
            (try_begin),
                (neg|eq, ":var_4", 6),
                (call_script, "script_set_formation_position", "$fplayer_team_no", ":var_1", 63),
            (try_end),
            (call_script, "script_formation_move_position", "$fplayer_team_no", ":var_1", 63, -1),
            (store_add, ":var_2", 102, ":var_1"),
            (team_get_slot, ":var_5", "$fplayer_team_no", ":var_2"),
            (store_add, ":var_2", 84, ":var_1"),
            (try_begin),
                (team_slot_eq, "$fplayer_team_no", ":var_2", 1),
                (call_script, "script_form_archers", "$fplayer_team_no", ":var_1", "$fplayer_agent_no", ":var_5", ":var_3"),
            (else_try),
                (this_or_next|team_slot_eq, "$fplayer_team_no", ":var_2", 2),
                (team_slot_eq, "$fplayer_team_no", ":var_2", 5),
                (call_script, "script_form_cavalry", "$fplayer_team_no", ":var_1", "$fplayer_agent_no", ":var_5"),
            (else_try),
                (call_script, "script_form_infantry", "$fplayer_team_no", ":var_1", "$fplayer_agent_no", ":var_5", ":var_3"),
            (try_end),
        (try_end),
    (else_try),
        (eq, ":var_0", 7),
        (try_for_range, ":var_1", 0, 9),
            (class_is_listening_order, "$fplayer_team_no", ":var_1"),
            (store_add, ":var_2", 102, ":var_1"),
            (team_get_slot, ":var_5", "$fplayer_team_no", ":var_2"),
            (gt, ":var_5", -3),
            (val_sub, ":var_5", 1),
            (team_set_slot, "$fplayer_team_no", ":var_2", ":var_5"),
            (store_add, ":var_2", 93, ":var_1"),
            (team_get_slot, ":var_3", "$fplayer_team_no", ":var_2"),
            (neg|eq, ":var_3", 0),
            (try_begin),
                (neg|ge, ":var_5", 0),
                (set_show_messages, 0),
                (assign, reg0, ":var_5"),
                (try_for_range, reg1, reg0, 0),
                    (team_give_order, "$fplayer_team_no", ":var_1", 8),
                    (val_add, ":var_5", 1),
                (try_end),
                (set_show_messages, 1),
                (store_add, ":var_2", 102, ":var_1"),
                (team_set_slot, "$fplayer_team_no", ":var_2", ":var_5"),
            (else_try),
                (call_script, "script_get_formation_position", 1, "$fplayer_team_no", ":var_1"),
                (store_add, ":var_2", 84, ":var_1"),
                (try_begin),
                    (team_slot_eq, "$fplayer_team_no", ":var_2", 1),
                    (store_add, ":var_2", 12, ":var_1"),
                    (team_get_slot, ":var_6", "$fplayer_team_no", ":var_2"),
                    (call_script, "script_get_centering_amount", 1, ":var_6", ":var_5"),
                    (val_mul, reg0, -1),
                    (position_move_x, pos1, reg0),
                    (call_script, "script_form_archers", "$fplayer_team_no", ":var_1", "$fplayer_agent_no", ":var_5", ":var_3"),
                (else_try),
                    (this_or_next|team_slot_eq, "$fplayer_team_no", ":var_2", 2),
                    (team_slot_eq, "$fplayer_team_no", ":var_2", 5),
                    (call_script, "script_form_cavalry", "$fplayer_team_no", ":var_1", "$fplayer_agent_no", ":var_5"),
                (else_try),
                    (store_add, ":var_2", 12, ":var_1"),
                    (team_get_slot, ":var_6", "$fplayer_team_no", ":var_2"),
                    (call_script, "script_get_centering_amount", ":var_3", ":var_6", ":var_5"),
                    (position_move_x, pos1, reg0),
                    (call_script, "script_form_infantry", "$fplayer_team_no", ":var_1", "$fplayer_agent_no", ":var_5", ":var_3"),
                (try_end),
            (try_end),
        (try_end),
    (else_try),
        (eq, ":var_0", 8),
        (try_for_range, ":var_1", 0, 9),
            (class_is_listening_order, "$fplayer_team_no", ":var_1"),
            (store_add, ":var_2", 93, ":var_1"),
            (team_get_slot, ":var_3", "$fplayer_team_no", ":var_2"),
            (store_add, ":var_2", 102, ":var_1"),
            (team_get_slot, ":var_5", "$fplayer_team_no", ":var_2"),
            (try_begin),
                (this_or_next|neg|eq, ":var_3", 0),
                (neg|ge, ":var_5", 2),
                (val_add, ":var_5", 1),
            (try_end),
            (team_set_slot, "$fplayer_team_no", ":var_2", ":var_5"),
            (neg|eq, ":var_3", 0),
            (set_show_messages, 0),
            (assign, reg0, ":var_5"),
            (try_for_range, reg1, reg0, 1),
                (team_give_order, "$fplayer_team_no", ":var_1", 8),
                (val_add, ":var_5", 1),
            (try_end),
            (set_show_messages, 1),
            (store_add, ":var_2", 102, ":var_1"),
            (team_set_slot, "$fplayer_team_no", ":var_2", ":var_5"),
            (call_script, "script_get_formation_position", 1, "$fplayer_team_no", ":var_1"),
            (store_add, ":var_2", 84, ":var_1"),
            (try_begin),
                (team_slot_eq, "$fplayer_team_no", ":var_2", 1),
                (store_add, ":var_2", 12, ":var_1"),
                (team_get_slot, ":var_6", "$fplayer_team_no", ":var_2"),
                (call_script, "script_get_centering_amount", 1, ":var_6", ":var_5"),
                (val_mul, reg0, -1),
                (position_move_x, pos1, reg0),
                (call_script, "script_form_archers", "$fplayer_team_no", ":var_1", "$fplayer_agent_no", ":var_5", ":var_3"),
            (else_try),
                (this_or_next|team_slot_eq, "$fplayer_team_no", ":var_2", 2),
                (team_slot_eq, "$fplayer_team_no", ":var_2", 5),
                (call_script, "script_form_cavalry", "$fplayer_team_no", ":var_1", "$fplayer_agent_no", ":var_5"),
            (else_try),
                (store_add, ":var_2", 12, ":var_1"),
                (team_get_slot, ":var_6", "$fplayer_team_no", ":var_2"),
                (call_script, "script_get_centering_amount", ":var_3", ":var_6", ":var_5"),
                (position_move_x, pos1, reg0),
                (call_script, "script_form_infantry", "$fplayer_team_no", ":var_1", "$fplayer_agent_no", ":var_5", ":var_3"),
            (try_end),
        (try_end),
    (else_try),
        (eq, ":var_0", 11),
        (try_for_range, ":var_1", 0, 9),
            (class_is_listening_order, "$fplayer_team_no", ":var_1"),
            (store_add, ":var_2", 111, ":var_1"),
            (team_set_slot, "$fplayer_team_no", ":var_2", ":var_0"),
            (store_add, ":var_2", 93, ":var_1"),
            (team_get_slot, ":var_3", "$fplayer_team_no", ":var_2"),
            (neg|eq, ":var_3", 0),
            (call_script, "script_formation_current_position", 63, "$fplayer_team_no", ":var_1"),
            (copy_position, pos1, pos63),
            (store_add, ":var_2", 102, ":var_1"),
            (team_get_slot, ":var_5", "$fplayer_team_no", ":var_2"),
            (store_add, ":var_2", 84, ":var_1"),
            (try_begin),
                (team_slot_eq, "$fplayer_team_no", ":var_2", 1),
                (store_add, ":var_2", 12, ":var_1"),
                (team_get_slot, ":var_6", "$fplayer_team_no", ":var_2"),
                (call_script, "script_get_centering_amount", 1, ":var_6", ":var_5"),
                (val_mul, reg0, -1),
                (position_move_x, pos1, reg0),
                (call_script, "script_form_archers", "$fplayer_team_no", ":var_1", "$fplayer_agent_no", ":var_5", ":var_3"),
            (else_try),
                (this_or_next|team_slot_eq, "$fplayer_team_no", ":var_2", 2),
                (team_slot_eq, "$fplayer_team_no", ":var_2", 5),
                (call_script, "script_form_cavalry", "$fplayer_team_no", ":var_1", "$fplayer_agent_no", ":var_5"),
            (else_try),
                (store_add, ":var_2", 12, ":var_1"),
                (team_get_slot, ":var_6", "$fplayer_team_no", ":var_2"),
                (call_script, "script_get_centering_amount", ":var_3", ":var_6", ":var_5"),
                (position_move_x, pos1, reg0),
                (call_script, "script_form_infantry", "$fplayer_team_no", ":var_1", "$fplayer_agent_no", ":var_5", ":var_3"),
            (try_end),
            (call_script, "script_set_formation_position", "$fplayer_team_no", ":var_1", 63),
        (try_end),
    (try_end),

]),

("point_y_toward_position",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (position_get_x, ":var_2", ":var_1"),
    (position_get_x, ":var_3", ":var_0"),
    (val_sub, ":var_2", ":var_3"),
    (store_mul, ":var_4", ":var_2", ":var_2"),
    (position_get_y, ":var_5", ":var_1"),
    (position_get_y, ":var_3", ":var_0"),
    (val_sub, ":var_5", ":var_3"),
    (store_mul, reg0, ":var_5", ":var_5"),
    (val_add, ":var_4", reg0),
    (convert_from_fixed_point, ":var_4"),
    (store_sqrt, ":var_6", ":var_4"),
    (convert_to_fixed_point, ":var_2"),
    (val_div, ":var_2", ":var_6"),
    (convert_to_fixed_point, ":var_5"),
    (val_div, ":var_5", ":var_6"),
    (try_begin),
        (neg|ge, ":var_2", 0),
        (assign, ":var_7", 90),
        (assign, ":var_8", 270),
        (assign, ":var_9", 180),
    (else_try),
        (assign, ":var_7", 90),
        (assign, ":var_8", -90),
        (assign, ":var_9", 0),
    (try_end),
    (assign, ":var_10", 0),
    (convert_to_fixed_point, ":var_9"),
    (convert_to_fixed_point, ":var_7"),
    (convert_to_fixed_point, ":var_8"),
    (try_for_range, reg0, 0, 6),
        (store_sin, ":var_10", ":var_9"),
        (try_begin),
            (gt, ":var_10", ":var_5"),
            (assign, ":var_7", ":var_9"),
        (else_try),
            (neg|ge, ":var_10", ":var_5"),
            (assign, ":var_8", ":var_9"),
        (try_end),
        (store_add, ":var_11", ":var_8", ":var_7"),
        (store_div, ":var_9", ":var_11", 2),
    (try_end),
    (convert_from_fixed_point, ":var_9"),
    (position_get_rotation_around_z, reg0, ":var_0"),
    (val_sub, ":var_9", reg0),
    (val_sub, ":var_9", 90),
    (position_rotate_z, ":var_0", ":var_9"),
    (assign, reg0, ":var_6"),

]),

("store_battlegroup_type",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (try_begin),
        (eq, ":var_1", 0),
        (assign, ":var_2", 0),
    (else_try),
        (eq, ":var_1", 1),
        (assign, ":var_2", 1),
    (else_try),
        (eq, ":var_1", 2),
        (assign, ":var_2", 2),
    (else_try),
        (assign, ":var_3", 0),
        (assign, ":var_4", 0),
        (assign, ":var_5", 0),
        (assign, ":var_6", 0),
        (assign, ":var_7", 0),
        (assign, ":var_8", 0),
        (assign, ":var_9", 0),
        (assign, ":var_10", 0),
        (try_for_agents, ":var_11"),
            (agent_is_alive, ":var_11"),
            (agent_is_human, ":var_11"),
            (agent_slot_eq, ":var_11", slot_agent_is_running_away, 0),
            (agent_get_team, ":var_12", ":var_11"),
            (eq, ":var_12", ":var_0"),
            (team_get_leader, ":var_13", ":var_0"),
            (neg|eq, ":var_13", ":var_11"),
            (agent_get_division, ":var_14", ":var_11"),
            (eq, ":var_14", ":var_1"),
            (agent_get_troop_id, ":var_15", ":var_11"),
            (agent_get_ammo, ":var_16", ":var_11", 0),
            (agent_get_wielded_item, reg0, ":var_11", 0),
            (try_begin),
                (neg|ge, reg0, 0),
                (assign, ":var_17", 0),
            (else_try),
                (item_get_type, ":var_17", reg0),
            (try_end),
            (try_begin),
                (neg|troop_is_hero, ":var_15"),
                (try_begin),
                    (agent_get_horse, reg0, ":var_11"),
                    (ge, reg0, 0),
                    (try_begin),
                        (gt, ":var_16", 0),
                        (val_add, ":var_6", 1),
                    (else_try),
                        (val_add, ":var_5", 1),
                    (try_end),
                (else_try),
                    (gt, ":var_16", 0),
                    (try_begin),
                        (eq, ":var_17", 10),
                        (val_add, ":var_8", 1),
                    (else_try),
                        (val_add, ":var_4", 1),
                    (try_end),
                (else_try),
                    (try_begin),
                        (eq, ":var_17", 4),
                        (val_add, ":var_7", 1),
                    (else_try),
                        (val_add, ":var_3", 1),
                    (try_end),
                (try_end),
            (else_try),
                (assign, ":var_18", 0),
                (store_skill_level, reg0, skl_engineer, ":var_15"),
                (val_add, ":var_18", reg0),
                (store_skill_level, reg0, skl_first_aid, ":var_15"),
                (val_add, ":var_18", reg0),
                (store_skill_level, reg0, skl_surgery, ":var_15"),
                (val_add, ":var_18", reg0),
                (store_skill_level, reg0, skl_wound_treatment, ":var_15"),
                (val_add, ":var_18", reg0),
                (try_begin),
                    (gt, ":var_18", 5),
                    (val_add, ":var_9", 1),
                (else_try),
                    (val_add, ":var_10", 1),
                (try_end),
            (try_end),
        (try_end),
        (assign, ":var_19", 84),
        (team_set_slot, 7, ":var_19", ":var_3"),
        (val_add, ":var_19", 1),
        (team_set_slot, 7, ":var_19", ":var_4"),
        (val_add, ":var_19", 1),
        (team_set_slot, 7, ":var_19", ":var_5"),
        (val_add, ":var_19", 1),
        (team_set_slot, 7, ":var_19", ":var_7"),
        (val_add, ":var_19", 1),
        (team_set_slot, 7, ":var_19", ":var_8"),
        (val_add, ":var_19", 1),
        (team_set_slot, 7, ":var_19", ":var_6"),
        (val_add, ":var_19", 1),
        (team_set_slot, 7, ":var_19", ":var_9"),
        (val_add, ":var_19", 1),
        (team_set_slot, 7, ":var_19", ":var_10"),
        (assign, ":var_20", 0),
        (assign, ":var_21", 0),
        (try_for_range, ":var_22", 0, 8),
            (store_add, ":var_19", 84, ":var_22"),
            (team_get_slot, ":var_23", 7, ":var_19"),
            (val_add, ":var_21", ":var_23"),
            (neg|ge, ":var_20", ":var_23"),
            (assign, ":var_20", ":var_23"),
            (assign, ":var_2", ":var_22"),
        (try_end),
        (val_mul, ":var_20", 2),
        (try_begin),
            (neg|ge, ":var_20", ":var_21"),
            (assign, ":var_20", 0),
            (assign, ":var_2", -1),
            (try_for_range, ":var_22", 0, 3),
                (store_add, ":var_19", 84, ":var_22"),
                (team_get_slot, ":var_23", 7, ":var_19"),
                (val_add, ":var_19", 3),
                (team_get_slot, reg0, 7, ":var_19"),
                (val_add, ":var_23", reg0),
                (neg|ge, ":var_20", ":var_23"),
                (assign, ":var_20", ":var_23"),
                (assign, ":var_2", ":var_22"),
            (try_end),
            (val_mul, ":var_20", 2),
            (neg|ge, ":var_20", ":var_21"),
            (assign, ":var_2", -1),
        (try_end),
    (try_end),
    (store_add, ":var_19", 84, ":var_1"),
    (team_set_slot, ":var_0", ":var_19", ":var_2"),
    (assign, reg0, ":var_2"),

]),

("store_battlegroup_data",
[
    (assign, ":var_0", 0),
    (assign, ":var_1", 0),
    (assign, ":var_2", 0),
    (assign, ":var_3", 0),
    (assign, ":var_4", 0),
    (assign, ":var_5", 0),
    (assign, ":var_6", 0),
    (assign, ":var_7", 0),
    (assign, ":var_8", 0),
    (assign, ":var_9", 0),
    (assign, ":var_10", 0),
    (assign, ":var_11", 0),
    (assign, ":var_12", 0),
    (assign, ":var_13", 0),
    (assign, ":var_14", 0),
    (assign, ":var_15", 0),
    (try_for_range, ":var_16", 0, 4),
        (try_for_range, ":var_17", 4, 84),
            (team_set_slot, ":var_16", ":var_17", 0),
        (try_end),
        (try_for_range, ":var_18", 0, 9),
            (store_add, ":var_17", 120, ":var_18"),
            (team_set_slot, ":var_16", ":var_17", -1),
        (try_end),
    (try_end),
    (try_for_agents, ":var_19"),
        (agent_is_alive, ":var_19"),
        (agent_is_human, ":var_19"),
        (agent_slot_eq, ":var_19", slot_agent_is_running_away, 0),
        (agent_get_team, ":var_20", ":var_19"),
        (agent_get_division, ":var_18", ":var_19"),
        (try_begin),
            (team_get_leader, ":var_21", ":var_20"),
            (eq, ":var_21", ":var_19"),
            (assign, ":var_18", -1),
        (try_end),
        (agent_get_troop_id, ":var_22", ":var_19"),
        (store_character_level, ":var_23", ":var_22"),
        (agent_get_ammo, ":var_24", ":var_19", 0),
        (assign, ":var_25", 0),
        (assign, ":var_26", 0),
        (agent_get_wielded_item, reg0, ":var_19", 0),
        (try_begin),
            (gt, reg0, 0),
            (item_get_type, ":var_25", reg0),
            (this_or_next|eq, ":var_25", 2),
            (this_or_next|eq, ":var_25", 3),
            (this_or_next|eq, ":var_25", 4),
            (eq, ":var_25", 10),
            (item_get_slot, ":var_26", reg0, 42),
        (try_end),
        (agent_get_position, pos1, ":var_19"),
        (position_get_x, ":var_27", pos1),
        (position_get_y, ":var_28", pos1),
        (try_begin),
            (eq, ":var_18", -1),
            (try_begin),
                (eq, ":var_20", 0),
                (assign, ":var_0", 1),
                (assign, ":var_1", ":var_27"),
                (assign, ":var_2", ":var_28"),
                (assign, ":var_3", ":var_23"),
            (else_try),
                (eq, ":var_20", 1),
                (assign, ":var_4", 1),
                (assign, ":var_5", ":var_27"),
                (assign, ":var_6", ":var_28"),
                (assign, ":var_7", ":var_23"),
            (else_try),
                (eq, ":var_20", 2),
                (assign, ":var_8", 1),
                (assign, ":var_9", ":var_27"),
                (assign, ":var_10", ":var_28"),
                (assign, ":var_11", ":var_23"),
            (else_try),
                (eq, ":var_20", 3),
                (assign, ":var_12", 1),
                (assign, ":var_13", ":var_27"),
                (assign, ":var_14", ":var_28"),
                (assign, ":var_15", ":var_23"),
            (try_end),
        (else_try),
            (try_begin),
                (store_add, ":var_17", 120, ":var_18"),
                (neg|team_slot_ge, ":var_20", ":var_17", 0),
                (team_set_slot, ":var_20", ":var_17", ":var_19"),
            (try_end),
            (store_add, ":var_17", 12, ":var_18"),
            (team_get_slot, ":var_29", ":var_20", ":var_17"),
            (val_add, ":var_29", 1),
            (team_set_slot, ":var_20", ":var_17", ":var_29"),
            (try_begin),
                (gt, ":var_24", 0),
                (store_add, ":var_17", 21, ":var_18"),
                (team_get_slot, ":var_29", ":var_20", ":var_17"),
                (val_add, ":var_29", 1),
                (team_set_slot, ":var_20", ":var_17", ":var_29"),
            (else_try),
                (store_add, ":var_17", 39, ":var_18"),
                (team_set_slot, ":var_20", ":var_17", 1),
            (try_end),
            (try_begin),
                (eq, ":var_25", 10),
                (store_add, ":var_17", 30, ":var_18"),
                (team_get_slot, ":var_29", ":var_20", ":var_17"),
                (val_add, ":var_29", 1),
                (team_set_slot, ":var_20", ":var_17", ":var_29"),
            (try_end),
            (store_add, ":var_17", 48, ":var_18"),
            (team_get_slot, ":var_29", ":var_20", ":var_17"),
            (val_add, ":var_29", ":var_23"),
            (team_set_slot, ":var_20", ":var_17", ":var_29"),
            (store_add, ":var_17", 57, ":var_18"),
            (team_get_slot, ":var_29", ":var_20", ":var_17"),
            (val_add, ":var_29", ":var_26"),
            (team_set_slot, ":var_20", ":var_17", ":var_29"),
            (store_add, ":var_17", 66, ":var_18"),
            (team_get_slot, ":var_29", ":var_20", ":var_17"),
            (val_add, ":var_29", ":var_27"),
            (team_set_slot, ":var_20", ":var_17", ":var_29"),
            (store_add, ":var_17", 75, ":var_18"),
            (team_get_slot, ":var_29", ":var_20", ":var_17"),
            (val_add, ":var_29", ":var_28"),
            (team_set_slot, ":var_20", ":var_17", ":var_29"),
        (try_end),
    (try_end),
    (try_for_range, ":var_16", 0, 4),
        (assign, ":var_30", 0),
        (assign, ":var_31", 0),
        (assign, ":var_32", 0),
        (assign, ":var_33", 0),
        (assign, ":var_34", 0),
        (assign, ":var_35", 0),
        (assign, ":var_36", 0),
        (try_for_range, ":var_37", 0, 9),
            (store_add, ":var_17", 12, ":var_37"),
            (team_get_slot, ":var_38", ":var_16", ":var_17"),
            (gt, ":var_38", 0),
            (val_add, ":var_30", ":var_38"),
            (store_add, ":var_17", 48, ":var_37"),
            (team_get_slot, ":var_39", ":var_16", ":var_17"),
            (val_add, ":var_31", ":var_39"),
            (store_add, ":var_17", 66, ":var_37"),
            (team_get_slot, ":var_40", ":var_16", ":var_17"),
            (val_add, ":var_32", ":var_40"),
            (store_add, ":var_17", 75, ":var_37"),
            (team_get_slot, ":var_41", ":var_16", ":var_17"),
            (val_add, ":var_33", ":var_41"),
            (store_add, ":var_17", 48, ":var_37"),
            (val_div, ":var_39", ":var_38"),
            (team_set_slot, ":var_16", ":var_17", ":var_39"),
            (store_add, ":var_17", 21, ":var_37"),
            (team_get_slot, ":var_29", ":var_16", ":var_17"),
            (val_mul, ":var_29", 100),
            (val_div, ":var_29", ":var_38"),
            (team_set_slot, ":var_16", ":var_17", ":var_29"),
            (store_add, ":var_17", 30, ":var_37"),
            (team_get_slot, ":var_29", ":var_16", ":var_17"),
            (val_mul, ":var_29", 100),
            (val_div, ":var_29", ":var_38"),
            (team_set_slot, ":var_16", ":var_17", ":var_29"),
            (store_add, ":var_17", 57, ":var_37"),
            (team_get_slot, ":var_29", ":var_16", ":var_17"),
            (val_div, ":var_29", ":var_38"),
            (team_set_slot, ":var_16", ":var_17", ":var_29"),
            (store_add, ":var_17", 66, ":var_37"),
            (val_div, ":var_40", ":var_38"),
            (team_set_slot, ":var_16", ":var_17", ":var_40"),
            (store_add, ":var_17", 75, ":var_37"),
            (val_div, ":var_41", ":var_38"),
            (team_set_slot, ":var_16", ":var_17", ":var_41"),
            (store_add, ":var_17", 84, ":var_37"),
            (team_get_slot, reg0, ":var_16", ":var_17"),
            (try_begin),
                (neg|is_between, reg0, 0, 8),
                (call_script, "script_store_battlegroup_type", ":var_16", ":var_37"),
            (try_end),
            (try_begin),
                (this_or_next|eq, reg0, 0),
                (eq, reg0, 3),
                (val_add, ":var_34", ":var_38"),
            (else_try),
                (this_or_next|eq, reg0, 1),
                (eq, reg0, 4),
                (val_add, ":var_35", ":var_38"),
            (else_try),
                (this_or_next|eq, reg0, 2),
                (eq, reg0, 5),
                (val_add, ":var_36", ":var_38"),
            (try_end),
        (try_end),
        (team_set_slot, ":var_16", 7, ":var_34"),
        (team_set_slot, ":var_16", 8, ":var_35"),
        (team_set_slot, ":var_16", 9, ":var_36"),
        (try_begin),
            (eq, ":var_16", 0),
            (val_add, ":var_30", ":var_0"),
            (val_add, ":var_31", ":var_3"),
            (val_add, ":var_32", ":var_1"),
            (val_add, ":var_33", ":var_2"),
        (else_try),
            (eq, ":var_16", 1),
            (val_add, ":var_30", ":var_4"),
            (val_add, ":var_31", ":var_7"),
            (val_add, ":var_32", ":var_5"),
            (val_add, ":var_33", ":var_6"),
        (else_try),
            (eq, ":var_16", 2),
            (val_add, ":var_30", ":var_8"),
            (val_add, ":var_31", ":var_11"),
            (val_add, ":var_32", ":var_9"),
            (val_add, ":var_33", ":var_10"),
        (else_try),
            (eq, ":var_16", 3),
            (val_add, ":var_30", ":var_12"),
            (val_add, ":var_31", ":var_15"),
            (val_add, ":var_32", ":var_13"),
            (val_add, ":var_33", ":var_14"),
        (try_end),
        (gt, ":var_30", 0),
        (team_set_slot, ":var_16", 4, ":var_30"),
        (val_div, ":var_31", ":var_30"),
        (team_set_slot, ":var_16", 6, ":var_31"),
        (val_div, ":var_32", ":var_30"),
        (team_set_slot, ":var_16", 10, ":var_32"),
        (val_div, ":var_33", ":var_30"),
        (team_set_slot, ":var_16", 11, ":var_33"),
    (try_end),

]),

("team_get_position_of_enemies",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (assign, ":var_3", 0),
    (assign, ":var_4", 0),
    (assign, ":var_5", 0),
    (try_for_range, ":var_6", 0, 4),
        (teams_are_enemies, ":var_6", ":var_1"),
        (try_begin),
            (eq, ":var_2", 9),
            (team_get_slot, ":var_7", ":var_6", 4),
            (try_begin),
                (gt, ":var_7", 0),
                (call_script, "script_battlegroup_get_position", ":var_0", ":var_6", 9),
                (position_get_x, reg0, ":var_0"),
                (val_mul, reg0, ":var_7"),
                (val_add, ":var_3", reg0),
                (position_get_y, reg0, ":var_0"),
                (val_mul, reg0, ":var_7"),
                (val_add, ":var_4", reg0),
            (try_end),
        (else_try),
            (assign, ":var_7", 0),
            (try_for_range, ":var_8", 0, 9),
                (eq, ":var_8", ":var_2"),
                (store_add, ":var_9", 12, ":var_2"),
                (team_get_slot, ":var_10", ":var_6", ":var_9"),
                (gt, ":var_10", 0),
                (val_add, ":var_7", ":var_10"),
                (call_script, "script_battlegroup_get_position", ":var_0", ":var_6", ":var_2"),
                (position_get_x, reg0, ":var_0"),
                (val_mul, reg0, ":var_7"),
                (val_add, ":var_3", reg0),
                (position_get_y, reg0, ":var_0"),
                (val_mul, reg0, ":var_7"),
                (val_add, ":var_4", reg0),
            (try_end),
        (try_end),
        (val_add, ":var_5", ":var_7"),
    (try_end),
    (try_begin),
        (eq, ":var_5", 0),
        (init_position, ":var_0"),
    (else_try),
        (val_div, ":var_3", ":var_5"),
        (position_set_x, ":var_0", ":var_3"),
        (val_div, ":var_4", ":var_5"),
        (position_set_y, ":var_0", ":var_4"),
        (position_set_z_to_ground_level, ":var_0"),
    (try_end),
    (assign, reg0, ":var_5"),

]),

("formation_battle_tactic_init_aux",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (team_get_leader, ":var_2", ":var_0"),
    (try_begin),
        (eq, ":var_1", 1),
        (agent_get_position, pos1, ":var_2"),
        (call_script, "script_find_high_ground_around_pos1", ":var_0", 30),
        (copy_position, pos1, pos52),
        (call_script, "script_find_high_ground_around_pos1", ":var_0", 30),
        (copy_position, pos1, pos52),
        (call_script, "script_find_high_ground_around_pos1", ":var_0", 30),
        (team_give_order, ":var_0", 9, 0),
        (team_set_order_position, ":var_0", 9, pos52),
        (team_give_order, ":var_0", 1, 5),
        (team_give_order, ":var_0", 1, 5),
    (else_try),
        (eq, ":var_1", 2),
        (team_get_leader, ":var_2", ":var_0"),
        (ge, ":var_2", 0),
        (agent_set_speed_limit, ":var_2", 8),
        (agent_get_position, pos60, ":var_2"),
        (team_give_order, ":var_0", 9, 0),
        (team_set_order_position, ":var_0", 9, pos60),
    (try_end),
    (call_script, "script_division_reset_places"),
    (call_script, "script_get_default_formation", ":var_0"),
    (assign, ":var_3", reg0),
    (try_begin),
        (call_script, "script_cf_battlegroup_valid_formation", ":var_0", 0, ":var_3"),
        (store_add, ":var_4", 93, 0),
        (team_set_slot, ":var_0", ":var_4", ":var_3"),
        (store_add, ":var_4", 102, 0),
        (team_set_slot, ":var_0", ":var_4", 0),
    (else_try),
        (call_script, "script_formation_end", ":var_0", 0),
    (try_end),
    (call_script, "script_battlegroup_place_around_leader", ":var_0", 0),
    (try_begin),
        (call_script, "script_cf_battlegroup_valid_formation", ":var_0", 1, 1),
        (store_add, ":var_4", 93, 1),
        (team_set_slot, ":var_0", ":var_4", 1),
        (store_add, ":var_4", 102, 1),
        (team_set_slot, ":var_0", ":var_4", 2),
    (else_try),
        (call_script, "script_formation_end", ":var_0", 1),
    (try_end),
    (call_script, "script_battlegroup_place_around_leader", ":var_0", 1),
    (try_begin),
        (call_script, "script_cf_battlegroup_valid_formation", ":var_0", 2, 4),
        (store_add, ":var_4", 93, 2),
        (team_set_slot, ":var_0", ":var_4", 4),
        (store_add, ":var_4", 102, 2),
        (team_set_slot, ":var_0", ":var_4", 0),
    (else_try),
        (call_script, "script_formation_end", ":var_0", 2),
    (try_end),
    (call_script, "script_battlegroup_place_around_leader", ":var_0", 2),
    (team_give_order, ":var_0", 1, 8),
    (team_give_order, ":var_0", 1, 8),

]),

("formation_battle_tactic_apply_aux",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_mission_timer_a, ":var_2"),
    (try_begin),
        (eq, ":var_1", 1),
        (copy_position, pos1, pos52),
        (call_script, "script_get_closest3_distance_of_enemies_at_pos1", ":var_0", 1),
        (assign, ":var_3", reg0),
        (assign, ":var_4", reg1),
        (try_begin),
            (this_or_next|neg|ge, ":var_4", 1000),
            (neg|ge, ":var_3", 4000),
            (assign, ":var_1", 0),
            (call_script, "script_formation_end", ":var_0", 0),
            (call_script, "script_formation_end", ":var_0", 1),
            (call_script, "script_formation_end", ":var_0", 2),
            (team_give_order, ":var_0", 9, 2),
        (try_end),
    (else_try),
        (eq, ":var_1", 2),
        (team_get_leader, ":var_5", ":var_0"),
        (try_begin),
            (agent_is_alive, ":var_5"),
            (agent_set_speed_limit, ":var_5", 9),
            (call_script, "script_team_get_average_position_of_enemies", ":var_0"),
            (copy_position, pos60, pos0),
            (ge, ":var_5", 0),
            (agent_get_position, pos61, ":var_5"),
            (position_transform_position_to_local, pos62, pos61, pos60),
            (position_normalize_origin, ":var_6", pos62),
            (convert_from_fixed_point, ":var_6"),
            (assign, reg17, ":var_6"),
            (position_get_x, ":var_7", pos62),
            (position_get_y, ":var_8", pos62),
            (val_mul, ":var_7", 23),
            (val_mul, ":var_8", 23),
            (position_set_x, pos62, ":var_7"),
            (position_set_y, pos62, ":var_8"),
            (position_transform_position_to_parent, pos63, pos61, pos62),
            (position_set_z_to_ground_level, pos63),
            (team_give_order, ":var_0", 9, 0),
            (team_set_order_position, ":var_0", 9, pos63),
            (call_script, "script_point_y_toward_position", 63, 60),
            (agent_get_position, pos49, ":var_5"),
            (agent_set_position, ":var_5", pos63),
            (call_script, "script_division_reset_places"),
            (call_script, "script_get_default_formation", ":var_0"),
            (assign, ":var_9", reg0),
            (try_begin),
                (call_script, "script_cf_battlegroup_valid_formation", ":var_0", 0, ":var_9"),
                (store_add, ":var_10", 93, 0),
                (team_set_slot, ":var_0", ":var_10", ":var_9"),
                (store_add, ":var_10", 102, 0),
                (team_set_slot, ":var_0", ":var_10", 0),
            (else_try),
                (call_script, "script_formation_end", ":var_0", 0),
            (try_end),
            (call_script, "script_battlegroup_place_around_leader", ":var_0", 0),
            (try_begin),
                (call_script, "script_cf_battlegroup_valid_formation", ":var_0", 1, 1),
                (store_add, ":var_10", 93, 1),
                (team_set_slot, ":var_0", ":var_10", 1),
                (store_add, ":var_10", 102, 1),
                (team_set_slot, ":var_0", ":var_10", 2),
            (else_try),
                (call_script, "script_formation_end", ":var_0", 1),
            (try_end),
            (call_script, "script_battlegroup_place_around_leader", ":var_0", 1),
            (try_begin),
                (call_script, "script_cf_battlegroup_valid_formation", ":var_0", 2, 4),
                (store_add, ":var_10", 93, 2),
                (team_set_slot, ":var_0", ":var_10", 4),
                (store_add, ":var_10", 102, 2),
                (team_set_slot, ":var_0", ":var_10", 0),
            (else_try),
                (call_script, "script_formation_end", ":var_0", 2),
            (try_end),
            (call_script, "script_battlegroup_place_around_leader", ":var_0", 2),
            (agent_set_position, ":var_5", pos49),
            (agent_get_position, pos1, ":var_5"),
            (try_begin),
                (neg|ge, ":var_6", 50),
                (ge, ":var_2", 30),
                (assign, ":var_1", 0),
                (call_script, "script_formation_end", ":var_0", 0),
                (call_script, "script_formation_end", ":var_0", 1),
                (call_script, "script_formation_end", ":var_0", 2),
                (team_give_order, ":var_0", 9, 2),
                (agent_set_speed_limit, ":var_5", 60),
            (try_end),
        (else_try),
            (assign, ":var_1", 0),
            (call_script, "script_formation_end", ":var_0", 0),
            (call_script, "script_formation_end", ":var_0", 1),
            (call_script, "script_formation_end", ":var_0", 2),
            (team_give_order, ":var_0", 9, 2),
        (try_end),
    (try_end),
    (try_begin),
        (neg|eq, ":var_1", 0),
        (ge, ":var_2", 300),
        (assign, ":var_1", 0),
        (call_script, "script_formation_end", ":var_0", 0),
        (call_script, "script_formation_end", ":var_0", 1),
        (call_script, "script_formation_end", ":var_0", 2),
        (team_give_order, ":var_0", 9, 2),
        (team_get_leader, ":var_5", ":var_0"),
        (agent_set_speed_limit, ":var_5", 60),
    (try_end),
    (assign, reg0, ":var_1"),

]),

("battle_tactic_init_aux",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (try_begin),
        (eq, 1, 1),
        (call_script, "script_formation_battle_tactic_init_aux", ":var_0", ":var_1"),
    (else_try),
        (call_script, "script_orig_battle_tactic_init_aux", ":var_0", ":var_1"),
    (try_end),

]),

("battle_tactic_apply_aux",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (try_begin),
        (eq, 1, 1),
        (call_script, "script_formation_battle_tactic_apply_aux", ":var_0", ":var_1"),
    (else_try),
        (call_script, "script_orig_battle_tactic_apply_aux", ":var_0", ":var_1"),
    (try_end),

]),

("calculate_decision_numbers",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (try_begin),
        (team_get_slot, reg0, ":var_0", 6),
        (store_div, reg1, reg0, 3),
        (store_add, reg0, ":var_1", reg1),
    (try_end),

]),

("team_field_ranged_tactics",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (assign, ":var_3", 1),
    (assign, ":var_4", 37),
    (store_add, ":var_5", 12, ":var_3"),
    (try_begin),
        (team_slot_ge, ":var_0", ":var_5", 1),
        (call_script, "script_battlegroup_get_position", ":var_4", ":var_0", ":var_3"),
        (call_script, "script_team_get_position_of_enemies", 39, ":var_0", 9),
        (call_script, "script_point_y_toward_position", ":var_4", 39),
        (call_script, "script_get_nearest_enemy_battlegroup_location", 40, ":var_0", ":var_4"),
        (assign, ":var_6", reg0),
        (call_script, "script_calculate_decision_numbers", ":var_0", ":var_2"),
        (assign, ":var_7", reg0),
        (assign, ":var_8", reg1),
        (try_begin),
            (gt, ":var_7", 86),
            (team_get_movement_order, reg0, ":var_0", ":var_3"),
            (try_begin),
                (neg|eq, reg0, 2),
                (team_give_order, ":var_0", ":var_3", 2),
            (try_end),
        (else_try),
            (ge, "$battle_phase", 2),
            (store_add, ":var_5", 39, ":var_3"),
            (team_slot_ge, ":var_0", ":var_5", 1),
            (team_get_movement_order, reg0, ":var_0", ":var_3"),
            (try_begin),
                (neg|eq, reg0, 2),
                (team_give_order, ":var_0", ":var_3", 2),
            (try_end),
        (else_try),
            (gt, "$cur_casualties", 0),
            (eq, "$cur_casualties", "$prev_casualties"),
            (gt, ":var_7", 50),
            (neg|gt, ":var_6", 13000),
            (team_give_order, ":var_0", ":var_3", 5),
        (else_try),
            (store_add, ":var_7", ":var_1", ":var_8"),
            (assign, ":var_9", 0),
            (try_begin),
                (eq, "$battle_phase", 1),
                (assign, ":var_9", 1),
            (else_try),
                (ge, "$battle_phase", 3),
                (try_begin),
                    (neg|is_between, ":var_6", 2000, 13000),
                    (assign, ":var_9", 1),
                (else_try),
                    (neg|ge, ":var_7", 100),
                    (gt, ":var_6", 6500),
                    (assign, ":var_9", 1),
                (try_end),
            (else_try),
                (ge, ":var_7", 100),
                (store_add, ":var_5", 12, 0),
                (team_get_slot, reg0, ":var_0", ":var_5"),
                (try_begin),
                    (this_or_next|eq, reg0, 0),
                    (gt, ":var_6", 13000),
                    (assign, ":var_9", 1),
                (else_try),
                    (call_script, "script_battlegroup_get_position", 36, ":var_0", 0),
                    (get_distance_between_positions, ":var_10", pos36, pos40),
                    (val_sub, ":var_10", ":var_6"),
                    (neg|gt, ":var_10", 1500),
                    (assign, ":var_9", 1),
                (try_end),
            (try_end),
            (try_begin),
                (gt, ":var_9", 0),
                (try_begin),
                    (eq, ":var_0", 0),
                    (assign, ":var_11", 45),
                (else_try),
                    (eq, ":var_0", 1),
                    (assign, ":var_11", 46),
                (else_try),
                    (eq, ":var_0", 2),
                    (assign, ":var_11", 47),
                (else_try),
                    (eq, ":var_0", 3),
                    (assign, ":var_11", 48),
                (try_end),
                (try_begin),
                    (neg|ge, ":var_7", 100),
                    (neg|ge, "$battle_phase", 3),
                    (store_div, ":var_12", ":var_6", 6),
                    (assign, ":var_13", ":var_12"),
                (else_try),
                    (assign, ":var_14", 0),
                    (try_begin),
                        (ge, "$battle_phase", 3),
                        (assign, ":var_14", 1),
                    (else_try),
                        (gt, "$battle_phase", 1),
                        (call_script, "script_point_y_toward_position", ":var_11", ":var_4"),
                        (position_get_rotation_around_z, reg0, ":var_11"),
                        (position_get_rotation_around_z, reg1, ":var_4"),
                        (val_sub, reg0, reg1),
                        (neg|is_between, reg0, -45, 45),
                        (assign, ":var_14", 1),
                    (try_end),
                    (try_begin),
                        (gt, ":var_14", 0),
                        (copy_position, ":var_4", ":var_11"),
                        (call_script, "script_point_y_toward_position", ":var_4", 39),
                        (call_script, "script_get_nearest_enemy_battlegroup_location", 40, ":var_0", ":var_4"),
                        (assign, ":var_6", reg0),
                    (try_end),
                    (try_begin),
                        (eq, "$battle_phase", 1),
                        (assign, ":var_15", 13000),
                    (else_try),
                        (assign, ":var_15", 6500),
                        (store_sub, reg1, 6500, 2000),
                        (val_sub, reg1, 200),
                        (store_add, ":var_5", 30, ":var_3"),
                        (team_get_slot, reg0, ":var_0", ":var_5"),
                        (val_mul, reg1, reg0),
                        (val_div, reg1, 100),
                        (val_sub, ":var_15", reg1),
                    (try_end),
                    (store_sub, ":var_12", ":var_6", ":var_15"),
                    (store_div, ":var_13", ":var_15", 3),
                    (try_begin),
                        (neg|ge, "$battle_phase", 3),
                        (try_begin),
                            (this_or_next|eq, "$battle_phase", 1),
                            (neg|ge, ":var_2", 50),
                            (val_div, ":var_12", 2),
                        (try_end),
                    (try_end),
                (try_end),
                (position_move_y, ":var_4", ":var_12", 0),
                (try_begin),
                    (neg|ge, "$battle_phase", 3),
                    (copy_position, pos1, ":var_4"),
                    (store_div, reg0, ":var_13", 100),
                    (call_script, "script_find_high_ground_around_pos1_corrected", ":var_4", reg0),
                (try_end),
            (try_end),
            (team_get_movement_order, reg0, ":var_0", ":var_3"),
            (try_begin),
                (neg|eq, reg0, 0),
                (team_give_order, ":var_0", ":var_3", 0),
            (try_end),
            (team_set_order_position, ":var_0", ":var_3", ":var_4"),
        (try_end),
    (try_end),

]),

("team_field_melee_tactics",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 3),
    (call_script, "script_calculate_decision_numbers", ":var_0", ":var_1"),
    (try_begin),
        (gt, reg0, 86),
        (try_for_range, ":var_2", 0, 9),
            (store_add, ":var_3", 12, ":var_2"),
            (team_slot_ge, ":var_0", ":var_3", 1),
            (store_add, ":var_3", 84, ":var_2"),
            (neg|team_slot_eq, ":var_0", ":var_3", 1),
            (neg|team_slot_eq, ":var_0", ":var_3", 4),
            (call_script, "script_formation_end", ":var_0", ":var_2"),
            (team_get_movement_order, reg0, ":var_0", ":var_2"),
            (try_begin),
                (neg|eq, reg0, 2),
                (team_give_order, ":var_0", ":var_2", 2),
            (try_end),
        (try_end),
    (else_try),
        (assign, ":var_4", 1000000),
        (assign, ":var_5", 1000000),
        (assign, ":var_6", 1000000),
        (assign, ":var_7", 0),
        (assign, ":var_8", 0),
        (assign, ":var_9", 0),
        (assign, ":var_10", 0),
        (assign, ":var_11", 0),
        (assign, ":var_12", 0),
        (assign, ":var_13", 0),
        (assign, ":var_14", 0),
        (try_for_agents, ":var_15"),
            (agent_is_alive, ":var_15"),
            (agent_is_human, ":var_15"),
            (agent_get_team, ":var_16", ":var_15"),
            (teams_are_enemies, ":var_16", ":var_0"),
            (agent_slot_eq, ":var_15", slot_agent_is_running_away, 0),
            (agent_get_class, ":var_17", ":var_15"),
            (try_begin),
                (eq, ":var_17", 0),
                (val_add, ":var_9", 1),
                (agent_get_troop_id, ":var_18", ":var_15"),
                (store_character_level, ":var_19", ":var_18"),
                (val_add, ":var_12", ":var_19"),
            (else_try),
                (eq, ":var_17", 2),
                (val_add, ":var_10", 1),
            (else_try),
                (val_add, ":var_11", 1),
            (try_end),
            (agent_get_position, pos0, ":var_15"),
            (position_get_x, ":var_20", pos0),
            (val_add, ":var_13", ":var_20"),
            (position_get_y, ":var_20", pos0),
            (val_add, ":var_14", ":var_20"),
            (assign, ":var_21", 0),
            (assign, ":var_22", 0),
            (try_for_agents, ":var_23"),
                (agent_is_alive, ":var_23"),
                (agent_is_human, ":var_23"),
                (agent_get_team, ":var_24", ":var_23"),
                (eq, ":var_24", ":var_0"),
                (agent_slot_eq, ":var_23", slot_agent_is_running_away, 0),
                (agent_get_class, ":var_25", ":var_23"),
                (try_begin),
                    (eq, ":var_25", 0),
                    (agent_get_position, pos1, ":var_23"),
                    (get_distance_between_positions, ":var_26", pos0, pos1),
                    (try_begin),
                        (gt, ":var_4", ":var_26"),
                        (assign, ":var_4", ":var_26"),
                        (copy_position, pos32, pos0),
                        (assign, ":var_27", ":var_26"),
                        (assign, ":var_28", ":var_15"),
                    (try_end),
                    (try_begin),
                        (neg|eq, ":var_17", 2),
                        (gt, ":var_5", ":var_26"),
                        (assign, ":var_5", ":var_26"),
                        (copy_position, pos33, pos0),
                        (assign, ":var_29", ":var_26"),
                        (assign, ":var_30", ":var_15"),
                    (try_end),
                    (try_begin),
                        (neg|ge, ":var_26", 150),
                        (assign, ":var_21", 1),
                    (try_end),
                    (try_begin),
                        (neg|ge, ":var_26", 350),
                        (assign, ":var_22", 1),
                    (try_end),
                (else_try),
                    (eq, ":var_25", 2),
                    (agent_get_position, pos1, ":var_23"),
                    (get_distance_between_positions, ":var_26", pos0, pos1),
                    (try_begin),
                        (gt, ":var_6", ":var_26"),
                        (assign, ":var_6", ":var_26"),
                    (try_end),
                (try_end),
            (try_end),
            (try_begin),
                (eq, ":var_21", 1),
                (val_add, ":var_7", 1),
            (try_end),
            (try_begin),
                (eq, ":var_22", 1),
                (val_add, ":var_8", 1),
            (try_end),
        (try_end),
        (store_add, ":var_31", ":var_9", ":var_10"),
        (val_add, ":var_31", ":var_11"),
        (gt, ":var_31", 0),
        (init_position, pos39),
        (val_div, ":var_13", ":var_31"),
        (position_set_x, pos39, ":var_13"),
        (val_div, ":var_14", ":var_31"),
        (position_set_y, pos39, ":var_14"),
        (position_set_z_to_ground_level, pos39),
        (store_add, ":var_3", 12, 1),
        (team_get_slot, ":var_32", ":var_0", ":var_3"),
        (try_begin),
            (eq, ":var_32", 0),
            (assign, ":var_33", 1000000),
            (assign, ":var_34", 2),
        (else_try),
            (call_script, "script_battlegroup_get_position", 37, ":var_0", 1),
            (call_script, "script_point_y_toward_position", 37, 39),
            (call_script, "script_get_nearest_enemy_battlegroup_location", 0, ":var_0", 37),
            (assign, ":var_33", reg0),
            (team_get_movement_order, ":var_34", ":var_0", 1),
        (try_end),
        (store_add, ":var_3", 12, 0),
        (team_get_slot, ":var_35", ":var_0", ":var_3"),
        (try_begin),
            (eq, ":var_35", 0),
            (assign, ":var_36", 1000000),
        (else_try),
            (call_script, "script_battlegroup_get_position", 36, ":var_0", 0),
            (call_script, "script_get_nearest_enemy_battlegroup_location", 0, ":var_0", 36),
            (assign, ":var_36", reg0),
        (try_end),
        (store_add, ":var_3", 12, 2),
        (team_get_slot, ":var_37", ":var_0", ":var_3"),
        (try_begin),
            (eq, ":var_37", 0),
            (assign, ":var_38", 1000000),
        (else_try),
            (call_script, "script_battlegroup_get_position", 38, ":var_0", 2),
            (call_script, "script_get_nearest_enemy_battlegroup_location", 0, ":var_0", 38),
            (assign, ":var_38", reg0),
        (try_end),
        (try_begin),
            (neg|ge, "$battle_phase", 3),
            (this_or_next|neg|gt, ":var_36", 2000),
            (this_or_next|neg|gt, ":var_38", 2000),
            (neg|gt, ":var_33", 2000),
            (assign, "$battle_phase", 3),
        (else_try),
            (neg|ge, "$battle_phase", 2),
            (this_or_next|neg|gt, ":var_4", 13000),
            (neg|gt, ":var_6", 13000),
            (assign, "$battle_phase", 2),
        (try_end),
        (team_get_leader, ":var_39", ":var_0"),
        (assign, ":var_40", 0),
        (try_begin),
            (neg|gt, ":var_35", 0),
            (assign, ":var_41", ":var_34"),
            (team_get_movement_order, reg0, ":var_0", 0),
            (try_begin),
                (neg|eq, reg0, ":var_41"),
                (team_give_order, ":var_0", 0, ":var_41"),
            (try_end),
            (try_begin),
                (gt, ":var_32", 0),
                (copy_position, pos1, pos37),
                (position_move_y, pos1, 1000, 0),
                (team_set_order_position, ":var_0", 0, pos1),
            (else_try),
                (team_set_order_position, ":var_0", 0, pos38),
            (try_end),
        (else_try),
            (store_mul, ":var_42", ":var_12", 100),
            (val_div, ":var_42", ":var_31"),
            (try_begin),
                (teams_are_enemies, ":var_0", "$fplayer_team_no"),
                (assign, ":var_43", 0),
                (assign, ":var_44", 0),
                (assign, ":var_45", ":var_35"),
            (else_try),
                (store_add, ":var_3", 48, 0),
                (team_get_slot, ":var_43", "$fplayer_team_no", ":var_3"),
                (team_get_slot, ":var_44", "$fplayer_team_no", 4),
                (store_add, ":var_3", 12, 0),
                (team_get_slot, ":var_45", "$fplayer_team_no", ":var_3"),
                (val_add, ":var_45", ":var_35"),
            (try_end),
            (store_mul, ":var_46", ":var_45", 100),
            (store_add, ":var_3", 48, 0),
            (team_get_slot, ":var_47", ":var_0", ":var_3"),
            (val_add, ":var_43", ":var_47"),
            (val_mul, ":var_46", ":var_43"),
            (team_get_slot, reg0, ":var_0", 4),
            (val_add, ":var_44", reg0),
            (val_div, ":var_46", ":var_44"),
            (assign, ":var_41", 2),
            (try_begin),
                (gt, ":var_33", 2000),
                (gt, ":var_4", 2000),
                (neg|eq, ":var_34", 2),
                (try_begin),
                    (this_or_next|neg|gt, "$battle_phase", 2),
                    (neg|ge, ":var_46", ":var_42"),
                    (assign, ":var_41", 0),
                (try_end),
            (try_end),
            (try_begin),
                (neg|gt, ":var_47", 12),
                (gt, ":var_7", 0),
                (store_mul, reg0, ":var_8", 2),
                (is_between, reg0, 1, ":var_35"),
                (get_distance_between_positions, reg0, pos36, pos32),
                (neg|gt, reg0, 2000),
                (call_script, "script_formation_end", ":var_0", 0),
                (team_get_movement_order, reg0, ":var_0", 0),
                (try_begin),
                    (neg|eq, reg0, 2),
                    (team_give_order, ":var_0", 0, 2),
                (try_end),
            (else_try),
                (team_get_slot, ":var_48", ":var_0", 2),
                (try_begin),
                    (eq, ":var_48", 1),
                    (call_script, "script_get_default_formation", ":var_0"),
                    (assign, ":var_48", reg0),
                    (team_set_slot, ":var_0", 2, ":var_48"),
                (try_end),
                (agent_get_division, ":var_49", ":var_28"),
                (agent_get_class, ":var_50", ":var_28"),
                (agent_get_team, ":var_51", ":var_28"),
                (team_get_leader, ":var_52", ":var_51"),
                (store_mul, ":var_53", ":var_10", 100),
                (val_div, ":var_53", ":var_31"),
                (try_begin),
                    (neg|eq, ":var_48", 0),
                    (try_begin),
                        (gt, ":var_53", 66),
                        (assign, ":var_48", 5),
                    (else_try),
                        (neg|eq, ":var_50", 2),
                        (neg|eq, ":var_50", 1),
                        (neg|eq, ":var_28", ":var_52"),
                        (store_add, ":var_3", 12, ":var_49"),
                        (team_get_slot, reg0, ":var_51", ":var_3"),
                        (gt, reg0, ":var_35"),
                        (store_add, ":var_3", 48, 0),
                        (team_get_slot, ":var_54", ":var_0", ":var_3"),
                        (store_add, ":var_3", 48, ":var_49"),
                        (team_get_slot, reg0, ":var_51", ":var_3"),
                        (gt, ":var_54", reg0),
                        (assign, ":var_48", 4),
                    (try_end),
                (try_end),
                (try_begin),
                    (eq, ":var_41", 0),
                    (gt, ":var_32", 0),
                    (copy_position, pos1, pos37),
                    (position_move_x, pos1, -100, 0),
                    (try_begin),
                        (this_or_next|eq, ":var_49", 2),
                        (gt, ":var_46", ":var_42"),
                        (position_move_y, pos1, 1000, 0),
                    (else_try),
                        (position_move_y, pos1, -1000, 0),
                    (try_end),
                    (assign, ":var_55", 1),
                (else_try),
                    (assign, ":var_56", -1),
                    (assign, ":var_57", 1),
                    (try_begin),
                        (eq, ":var_7", 0),
                        (gt, ":var_33", 2000),
                        (neg|ge, ":var_53", 100),
                        (assign, ":var_58", ":var_29"),
                        (copy_position, pos60, pos33),
                        (agent_get_team, ":var_59", ":var_30"),
                        (assign, ":var_60", ":var_59"),
                        (team_get_leader, reg0, ":var_59"),
                        (try_begin),
                            (eq, ":var_30", reg0),
                            (assign, ":var_61", 1000000),
                        (else_try),
                            (agent_get_division, ":var_56", ":var_30"),
                            (call_script, "script_battlegroup_get_position", 0, ":var_59", ":var_56"),
                            (get_distance_between_positions, ":var_61", pos36, pos0),
                            (store_add, ":var_3", 12, ":var_56"),
                            (team_get_slot, ":var_57", ":var_59", ":var_3"),
                        (try_end),
                    (else_try),
                        (assign, ":var_58", ":var_27"),
                        (copy_position, pos60, pos32),
                        (assign, ":var_60", ":var_51"),
                        (try_begin),
                            (eq, ":var_28", ":var_52"),
                            (assign, ":var_61", 1000000),
                        (else_try),
                            (assign, ":var_56", ":var_49"),
                            (call_script, "script_battlegroup_get_position", 0, ":var_51", ":var_56"),
                            (get_distance_between_positions, ":var_61", pos36, pos0),
                            (store_add, ":var_3", 12, ":var_56"),
                            (team_get_slot, ":var_57", ":var_51", ":var_3"),
                        (try_end),
                    (try_end),
                    (store_sub, reg0, ":var_61", ":var_58"),
                    (try_begin),
                        (gt, reg0, 2000),
                        (copy_position, pos0, pos60),
                        (assign, ":var_62", ":var_58"),
                    (else_try),
                        (assign, ":var_62", ":var_61"),
                        (try_begin),
                            (eq, ":var_48", 4),
                            (val_sub, ":var_62", 67),
                        (else_try),
                            (store_mul, reg0, 67, 1),
                            (val_sub, ":var_62", reg0),
                            (eq, ":var_56", 0),
                            (ge, ":var_57", 12),
                            (try_begin),
                                (neg|eq, ":var_60", "$fplayer_team_no"),
                                (val_sub, ":var_62", 67),
                            (else_try),
                                (neg|team_slot_eq, "$fplayer_team_no", 93, 0),
                                (val_sub, ":var_62", 67),
                            (try_end),
                        (try_end),
                    (try_end),
                    (try_begin),
                        (neg|ge, ":var_35", 12),
                        (assign, ":var_63", 0),
                    (else_try),
                        (eq, ":var_48", 5),
                        (assign, reg0, ":var_35"),
                        (convert_to_fixed_point, reg0),
                        (store_sqrt, ":var_63", reg0),
                        (val_mul, ":var_63", 67),
                        (val_div, ":var_63", 2),
                        (convert_from_fixed_point, ":var_63"),
                    (else_try),
                        (eq, ":var_48", 4),
                        (assign, reg0, ":var_35"),
                        (convert_to_fixed_point, reg0),
                        (store_sqrt, ":var_63", reg0),
                        (val_mul, ":var_63", 67),
                        (val_mul, ":var_63", 2),
                        (val_div, ":var_63", 3),
                        (convert_from_fixed_point, ":var_63"),
                    (else_try),
                        (assign, ":var_63", 67),
                    (try_end),
                    (try_begin),
                        (neg|gt, ":var_62", 2000),
                        (val_add, ":var_63", 600),
                    (else_try),
                        (neg|gt, ":var_62", 6500),
                        (val_add, ":var_63", 1200),
                    (else_try),
                        (neg|gt, ":var_62", 13000),
                        (val_add, ":var_63", 1800),
                    (try_end),
                    (try_begin),
                        (neg|gt, ":var_62", 13000),
                        (val_min, ":var_62", ":var_63"),
                    (try_end),
                    (copy_position, pos1, pos36),
                    (try_begin),
                        (eq, ":var_7", 0),
                        (call_script, "script_point_y_toward_position", 1, 0),
                        (position_move_y, pos1, ":var_62"),
                    (else_try),
                        (call_script, "script_get_formation_position", 2, ":var_0", 0),
                        (position_copy_rotation, pos1, pos2),
                        (position_move_y, pos1, -2000),
                        (call_script, "script_point_y_toward_position", 1, 0),
                        (position_move_y, pos1, 2000),
                        (position_move_y, pos1, ":var_62"),
                    (try_end),
                    (assign, ":var_55", 0),
                (try_end),
                (copy_position, pos61, pos1),
                (call_script, "script_get_centering_amount", ":var_48", ":var_35", 0),
                (assign, ":var_64", reg0),
                (try_begin),
                    (call_script, "script_cf_battlegroup_valid_formation", ":var_0", 0, ":var_48"),
                    (position_move_x, pos1, ":var_64"),
                    (call_script, "script_form_infantry", ":var_0", 0, ":var_39", ":var_55", ":var_48"),
                    (store_add, ":var_3", 93, 0),
                    (team_set_slot, ":var_0", ":var_3", ":var_48"),
                    (assign, ":var_40", 1),
                (else_try),
                    (call_script, "script_formation_end", ":var_0", 0),
                    (team_get_movement_order, reg0, ":var_0", 0),
                    (try_begin),
                        (neg|eq, reg0, ":var_41"),
                        (team_give_order, ":var_0", 0, ":var_41"),
                    (try_end),
                    (eq, ":var_41", 0),
                    (assign, ":var_40", 1),
                (try_end),
                (call_script, "script_set_formation_position", ":var_0", 0, 61),
                (position_move_x, pos61, ":var_64"),
            (try_end),
        (try_end),
        (try_begin),
            (gt, ":var_37", 0),
            (store_add, ":var_3", 48, 2),
            (team_get_slot, ":var_54", ":var_0", ":var_3"),
            (assign, ":var_65", 1000000),
            (assign, ":var_66", 1000000),
            (assign, ":var_67", 0),
            (try_for_range, ":var_16", 0, 4),
                (team_slot_ge, ":var_16", 4, 1),
                (teams_are_enemies, ":var_16", ":var_0"),
                (try_for_range, ":var_68", 0, 9),
                    (store_add, ":var_3", 12, ":var_68"),
                    (team_get_slot, ":var_69", ":var_16", ":var_3"),
                    (gt, ":var_69", 0),
                    (call_script, "script_battlegroup_get_position", 0, ":var_16", ":var_68"),
                    (get_distance_between_positions, ":var_26", pos38, pos0),
                    (try_begin),
                        (store_add, ":var_3", 57, ":var_68"),
                        (team_get_slot, reg0, ":var_16", ":var_3"),
                        (assign, ":var_70", reg0),
                        (store_add, ":var_3", 48, ":var_68"),
                        (team_get_slot, reg0, ":var_16", ":var_3"),
                        (val_mul, ":var_70", reg0),
                        (val_mul, ":var_70", ":var_69"),
                        (val_div, ":var_70", ":var_54"),
                        (val_div, ":var_70", ":var_37"),
                        (try_begin),
                            (neg|eq, ":var_68", 2),
                            (val_div, ":var_70", 2),
                        (try_end),
                        (gt, ":var_70", 100),
                        (try_begin),
                            (gt, ":var_65", ":var_26"),
                            (copy_position, pos34, pos0),
                            (assign, ":var_65", ":var_26"),
                        (try_end),
                    (else_try),
                        (val_add, ":var_67", 1),
                        (gt, ":var_66", ":var_26"),
                        (copy_position, pos35, pos0),
                        (assign, ":var_66", ":var_26"),
                    (try_end),
                (try_end),
            (try_end),
            (try_begin),
                (eq, ":var_65", 1000000),
                (assign, ":var_71", 0),
            (else_try),
                (eq, ":var_66", 1000000),
                (assign, ":var_71", 1),
            (else_try),
                (get_distance_between_positions, reg0, pos35, pos34),
                (store_div, reg1, 2000, 2),
                (try_begin),
                    (neg|gt, reg0, reg1),
                    (assign, ":var_71", 1),
                (else_try),
                    (assign, ":var_71", 0),
                (try_end),
            (try_end),
            (assign, ":var_72", 2),
            (try_begin),
                (teams_are_enemies, ":var_0", 0),
                (neg|team_slot_ge, 1, 3, 2),
                (neg|team_slot_eq, 1, 3, "$attacker_reinforcement_stage"),
                (assign, ":var_72", 0),
            (else_try),
                (teams_are_enemies, ":var_0", 1),
                (neg|team_slot_ge, 0, 3, 2),
                (neg|team_slot_eq, 0, 3, "$defender_reinforcement_stage"),
                (assign, ":var_72", 0),
            (else_try),
                (neg|eq, ":var_41", 2),
                (try_begin),
                    (neg|gt, "$battle_phase", 2),
                    (assign, ":var_72", 0),
                (else_try),
                    (eq, ":var_66", 1000000),
                    (try_begin),
                        (eq, ":var_32", 0),
                        (assign, ":var_73", 0),
                    (else_try),
                        (get_distance_between_positions, ":var_73", pos38, pos37),
                    (try_end),
                    (try_begin),
                        (this_or_next|gt, ":var_6", 2000),
                        (gt, ":var_73", 2000),
                        (assign, ":var_72", 0),
                    (try_end),
                (try_end),
            (try_end),
            (try_begin),
                (eq, ":var_0", 0),
                (assign, ":var_74", 41),
            (else_try),
                (eq, ":var_0", 1),
                (assign, ":var_74", 42),
            (else_try),
                (eq, ":var_0", 2),
                (assign, ":var_74", 43),
            (else_try),
                (eq, ":var_0", 3),
                (assign, ":var_74", 44),
            (try_end),
            (store_add, ":var_3", 21, 2),
            (team_get_slot, reg0, ":var_0", ":var_3"),
            (try_begin),
                (ge, reg0, 50),
                (call_script, "script_formation_end", ":var_0", 2),
                (try_begin),
                    (eq, ":var_32", 0),
                    (team_get_movement_order, reg0, ":var_0", 2),
                    (try_begin),
                        (neg|eq, reg0, 2),
                        (team_give_order, ":var_0", 2, 2),
                    (try_end),
                (else_try),
                    (team_get_movement_order, reg0, ":var_0", 2),
                    (try_begin),
                        (neg|eq, reg0, ":var_72"),
                        (team_give_order, ":var_0", 2, ":var_72"),
                    (try_end),
                    (copy_position, ":var_74", pos37),
                    (position_move_y, ":var_74", -500, 0),
                    (team_set_order_position, ":var_0", 2, ":var_74"),
                (try_end),
            (else_try),
                (eq, ":var_72", 2),
                (neg|gt, ":var_6", 2000),
                (try_begin),
                    (eq, ":var_67", 1),
                    (eq, ":var_71", 0),
                    (gt, ":var_66", ":var_65"),
                    (assign, reg0, 0),
                (else_try),
                    (ge, ":var_67", 2),
                    (eq, ":var_71", 1),
                    (assign, reg0, 0),
                (else_try),
                    (assign, reg0, 1),
                (try_end),
                (eq, reg0, 1),
                (call_script, "script_formation_end", ":var_0", 2),
                (team_get_movement_order, reg0, ":var_0", 2),
                (try_begin),
                    (neg|eq, reg0, 2),
                    (team_give_order, ":var_0", 2, 2),
                (try_end),
            (else_try),
                (neg|ge, ":var_66", ":var_65"),
                (eq, ":var_71", 0),
                (call_script, "script_formation_end", ":var_0", 2),
                (team_get_movement_order, reg0, ":var_0", 2),
                (try_begin),
                    (neg|eq, reg0, 0),
                    (team_give_order, ":var_0", 2, 0),
                (try_end),
                (try_begin),
                    (gt, ":var_66", 6500),
                    (eq, ":var_72", 0),
                    (try_begin),
                        (eq, ":var_32", 0),
                        (copy_position, ":var_74", pos38),
                    (else_try),
                        (copy_position, ":var_74", pos37),
                        (position_move_y, ":var_74", 2000, 0),
                    (try_end),
                (else_try),
                    (copy_position, ":var_74", pos38),
                    (call_script, "script_point_y_toward_position", ":var_74", 35),
                    (position_move_y, ":var_74", ":var_66", 0),
                (try_end),
                (team_set_order_position, ":var_0", 2, ":var_74"),
            (else_try),
                (try_begin),
                    (eq, ":var_72", 2),
                    (neg|eq, ":var_66", 1000000),
                    (copy_position, ":var_74", pos38),
                    (call_script, "script_point_y_toward_position", ":var_74", 35),
                    (position_move_y, ":var_74", ":var_66", 0),
                    (position_move_y, ":var_74", 2000, 0),
                (else_try),
                    (neg|eq, ":var_72", 2),
                    (eq, ":var_32", 0),
                    (copy_position, ":var_74", pos38),
                (else_try),
                    (copy_position, ":var_74", pos37),
                    (position_move_x, ":var_74", 500, 0),
                    (position_move_y, ":var_74", -1000, 0),
                (try_end),
                (try_begin),
                    (neg|eq, ":var_65", 1000000),
                    (call_script, "script_point_y_toward_position", 38, 34),
                    (call_script, "script_point_y_toward_position", 34, ":var_74"),
                    (position_get_rotation_around_z, reg0, pos38),
                    (position_get_rotation_around_z, reg1, pos34),
                    (store_sub, ":var_75", reg0, reg1),
                    (try_begin),
                        (neg|ge, ":var_75", -180),
                        (val_add, ":var_75", 360),
                    (else_try),
                        (gt, ":var_75", 180),
                        (val_sub, ":var_75", 360),
                    (try_end),
                    (try_begin),
                        (is_between, ":var_75", -135, 136),
                        (copy_position, ":var_74", pos38),
                        (assign, ":var_62", 6500),
                        (try_begin),
                            (is_between, ":var_75", -135, 0),
                            (val_mul, ":var_62", -1),
                        (try_end),
                        (position_move_x, ":var_74", ":var_62", 0),
                        (store_sub, ":var_62", ":var_65", 6500),
                        (position_move_y, ":var_74", ":var_62", 0),
                        (call_script, "script_point_y_toward_position", ":var_74", 38),
                        (position_rotate_z, ":var_74", 180),
                    (try_end),
                (try_end),
                (get_scene_boundaries, pos0, pos1),
                (position_get_x, reg0, ":var_74"),
                (position_get_x, reg1, pos0),
                (val_max, reg0, reg1),
                (position_get_x, reg1, pos1),
                (val_min, reg0, reg1),
                (position_set_x, ":var_74", reg0),
                (position_get_y, reg0, ":var_74"),
                (position_get_y, reg1, pos0),
                (val_max, reg0, reg1),
                (position_get_y, reg1, pos1),
                (val_min, reg0, reg1),
                (position_set_y, ":var_74", reg0),
                (position_set_z_to_ground_level, ":var_74"),
                (try_begin),
                    (call_script, "script_cf_battlegroup_valid_formation", ":var_0", 2, 4),
                    (copy_position, pos1, ":var_74"),
                    (call_script, "script_form_cavalry", ":var_0", 2, ":var_39", 0),
                    (store_add, ":var_3", 93, 2),
                    (team_set_slot, ":var_0", ":var_3", 4),
                (else_try),
                    (call_script, "script_formation_end", ":var_0", 2),
                    (team_get_movement_order, reg0, ":var_0", 2),
                    (try_begin),
                        (neg|eq, reg0, ":var_72"),
                        (team_give_order, ":var_0", 2, ":var_72"),
                    (try_end),
                (try_end),
                (call_script, "script_set_formation_position", ":var_0", 2, ":var_74"),
            (try_end),
        (try_end),
        (try_begin),
            (ge, ":var_39", 0),
            (agent_is_alive, ":var_39"),
            (try_begin),
                (neg|gt, ":var_35", 0),
                (try_begin),
                    (eq, ":var_34", 2),
                    (agent_clear_scripted_mode, ":var_39"),
                (else_try),
                    (copy_position, pos1, pos37),
                    (position_move_y, pos1, -1000, 0),
                    (agent_set_scripted_destination, ":var_39", pos1, 1),
                (try_end),
            (else_try),
                (neg|eq, ":var_40", 0),
                (agent_slot_eq, ":var_39", slot_agent_is_running_away, 0),
                (position_move_x, pos61, 100, 0),
                (agent_set_scripted_destination, ":var_39", pos61, 1),
            (else_try),
                (agent_clear_scripted_mode, ":var_39"),
            (try_end),
        (try_end),
    (try_end),

]),

("field_tactics",
[
    (store_script_param, ":var_0", 1),
    (assign, ":var_1", 0),
    (assign, ":var_2", 0),
    (assign, ":var_3", 0),
    (try_for_range, ":var_4", 0, 4),
        (team_get_slot, ":var_5", ":var_4", 4),
        (gt, ":var_5", 0),
        (team_get_slot, ":var_6", ":var_4", 9),
        (store_add, ":var_7", ":var_5", ":var_6"),
        (val_add, ":var_2", 1),
        (val_add, ":var_3", ":var_7"),
        (try_begin),
            (neg|eq, ":var_4", "$fplayer_team_no"),
            (neg|teams_are_enemies, ":var_4", "$fplayer_team_no"),
            (team_get_slot, ":var_8", "$fplayer_team_no", 5),
            (val_add, ":var_7", ":var_8"),
        (try_end),
        (team_set_slot, ":var_4", 5, ":var_7"),
        (neg|ge, ":var_1", ":var_7"),
        (assign, ":var_1", ":var_7"),
    (try_end),
    (set_show_messages, 0),
    (try_for_range, ":var_9", 0, 4),
        (team_get_slot, ":var_10", ":var_9", 5),
        (gt, ":var_10", 0),
        (assign, ":var_11", 0),
        (try_begin),
            (neg|eq, ":var_9", "$fplayer_team_no"),
            (assign, ":var_11", 1),
        (else_try),
            (main_hero_fallen),
            (eq, "$enable_deahtcam", 1),
            (eq, 1, 1),
            (assign, ":var_11", 1),
        (try_end),
        (eq, ":var_11", 1),
        (team_get_slot, ":var_12", ":var_9", 1),
        (try_begin),
            (this_or_next|eq, 0, 0),
            (this_or_next|eq, ":var_12", 77),
            (is_between, ":var_12", 30, 72),
            (val_mul, ":var_10", 100),
            (store_div, ":var_13", ":var_10", ":var_1"),
            (store_div, ":var_14", ":var_10", ":var_3"),
            (try_begin),
                (eq, ":var_0", 1),
                (call_script, "script_team_field_ranged_tactics", ":var_9", ":var_13", ":var_14"),
            (try_end),
            (call_script, "script_team_field_melee_tactics", ":var_9", ":var_13", ":var_14"),
        (try_end),
    (try_end),
    (set_show_messages, 1),
    (try_begin),
        (eq, ":var_0", 1),
        (assign, "$prev_casualties", "$cur_casualties"),
    (try_end),

]),

("find_high_ground_around_pos1_corrected",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (assign, ":var_2", 1),
    (convert_to_fixed_point, ":var_2"),
    (set_fixed_point_multiplier, 1),
    (position_get_x, ":var_3", pos1),
    (position_get_y, ":var_4", pos1),
    (store_sub, ":var_5", ":var_3", ":var_1"),
    (store_sub, ":var_6", ":var_4", ":var_1"),
    (store_add, ":var_7", ":var_3", ":var_1"),
    (store_add, ":var_8", ":var_4", ":var_1"),
    (get_scene_boundaries, ":var_0", pos0),
    (position_get_x, ":var_9", ":var_0"),
    (position_get_x, ":var_10", pos0),
    (position_get_y, ":var_11", ":var_0"),
    (position_get_y, ":var_12", pos0),
    (val_max, ":var_5", ":var_9"),
    (val_max, ":var_6", ":var_11"),
    (val_min, ":var_7", ":var_10"),
    (val_min, ":var_8", ":var_12"),
    (assign, ":var_13", -100),
    (copy_position, ":var_0", pos1),
    (init_position, pos0),
    (try_for_range, ":var_14", ":var_5", ":var_7"),
        (try_for_range, ":var_15", ":var_6", ":var_8"),
            (position_set_x, pos0, ":var_14"),
            (position_set_y, pos0, ":var_15"),
            (position_set_z_to_ground_level, pos0),
            (position_get_z, ":var_16", pos0),
            (try_begin),
                (gt, ":var_16", ":var_13"),
                (copy_position, ":var_0", pos0),
                (assign, ":var_13", ":var_16"),
            (try_end),
        (try_end),
    (try_end),
    (set_fixed_point_multiplier, ":var_2"),

]),

("cf_count_casualties",
[
    (assign, ":var_0", 0),
    (try_for_agents, ":var_1"),
        (try_begin),
            (this_or_next|agent_is_wounded, ":var_1"),
            (this_or_next|agent_slot_eq, ":var_1", slot_agent_is_running_away, 1),
            (neg|agent_is_alive, ":var_1"),
            (val_add, ":var_0", 1),
        (try_end),
    (try_end),
    (assign, reg0, ":var_0"),
    (gt, ":var_0", 0),

]),

("battlegroup_get_position",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (assign, ":var_3", 0),
    (assign, ":var_4", 0),
    (init_position, ":var_0"),
    (try_begin),
        (neg|is_between, ":var_2", 0, 9),
        (team_slot_ge, ":var_1", 4, 1),
        (team_get_slot, ":var_3", ":var_1", 10),
        (team_get_slot, ":var_4", ":var_1", 11),
    (else_try),
        (is_between, ":var_2", 0, 9),
        (store_add, ":var_5", 12, ":var_2"),
        (team_slot_ge, ":var_1", ":var_5", 1),
        (store_add, ":var_5", 66, ":var_2"),
        (team_get_slot, ":var_3", ":var_1", ":var_5"),
        (store_add, ":var_5", 75, ":var_2"),
        (team_get_slot, ":var_4", ":var_1", ":var_5"),
    (try_end),
    (position_set_x, ":var_0", ":var_3"),
    (position_set_y, ":var_0", ":var_4"),
    (position_set_z_to_ground_level, ":var_0"),

]),

("get_nearest_enemy_battlegroup_location",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (assign, ":var_3", 1000000),
    (try_for_range, ":var_4", 0, 4),
        (team_slot_ge, ":var_4", 4, 1),
        (teams_are_enemies, ":var_4", ":var_1"),
        (try_for_range, ":var_5", 0, 9),
            (store_add, ":var_6", 12, ":var_5"),
            (team_slot_ge, ":var_4", ":var_6", 1),
            (call_script, "script_battlegroup_get_position", 0, ":var_4", ":var_5"),
            (get_distance_between_positions, reg0, pos0, ":var_2"),
            (try_begin),
                (gt, ":var_3", reg0),
                (assign, ":var_3", reg0),
                (copy_position, ":var_0", pos0),
            (try_end),
        (try_end),
    (try_end),
    (assign, reg0, ":var_3"),

]),

("decide_run_away_or_not",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (assign, ":var_2", 0),
    (agent_get_team, ":var_3", ":var_0"),
    (agent_get_division, ":var_4", ":var_0"),
    (try_begin),
        (neg|ge, ":var_4", 9),
        (team_get_movement_order, ":var_5", ":var_3", ":var_4"),
        (eq, ":var_5", 14),
        (assign, ":var_2", 1),
    (try_end),
    (agent_get_slot, ":var_6", ":var_0", slot_agent_is_running_away),
    (try_begin),
        (eq, ":var_6", 0),
        (try_begin),
            (eq, ":var_2", 1),
            (agent_clear_scripted_mode, ":var_0"),
            (agent_start_running_away, ":var_0"),
            (agent_set_slot, ":var_0", slot_agent_is_running_away, 1),
        (else_try),
            (ge, ":var_1", 45),
            (agent_get_slot, ":var_7", ":var_0", slot_agent_courage_score),
            (store_agent_hit_points, ":var_8", ":var_0"),
            (val_mul, ":var_8", 4),
            (try_begin),
                (agent_is_ally, ":var_0"),
                (val_sub, ":var_8", 100),
            (try_end),
            (val_mul, ":var_8", 10),
            (store_sub, ":var_9", 3500, ":var_8"),
            (neg|ge, ":var_7", ":var_9"),
            (agent_get_troop_id, ":var_10", ":var_0"),
            (neg|troop_is_hero, ":var_10"),
            (agent_clear_scripted_mode, ":var_0"),
            (agent_start_running_away, ":var_0"),
            (agent_set_slot, ":var_0", slot_agent_is_running_away, 1),
        (try_end),
    (else_try),
        (neg|eq, ":var_2", 1),
        (agent_get_slot, ":var_7", ":var_0", slot_agent_courage_score),
        (store_agent_hit_points, ":var_8", ":var_0"),
        (val_mul, ":var_8", 4),
        (try_begin),
            (agent_is_ally, ":var_0"),
            (val_sub, ":var_8", 100),
        (try_end),
        (val_mul, ":var_8", 10),
        (store_sub, ":var_11", 3700, ":var_8"),
        (ge, ":var_7", ":var_11"),
        (agent_stop_running_away, ":var_0"),
        (agent_set_slot, ":var_0", slot_agent_is_running_away, 0),
    (try_end),

]),

("tom_process_player_enterprise",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (assign, ":var_3", ":var_2"),
    (try_for_range, ":var_4", "p_town_1_1", "p_salt_mine"),
        (party_get_slot, ":var_5", ":var_4", slot_center_player_enterprise),
        (eq, ":var_5", ":var_0"),
        (val_add, ":var_3", 1),
    (try_end),
    (try_begin),
        (eq, "$tom_difficulty_enterprise", 0),
        (assign, ":var_6", 25),
    (else_try),
        (eq, "$tom_difficulty_enterprise", 1),
        (assign, ":var_6", 20),
    (else_try),
        (eq, "$tom_difficulty_enterprise", 2),
        (assign, ":var_6", 15),
    (try_end),
    (store_skill_level, ":var_7", "skl_trade", "trp_player"),
    (val_sub, ":var_6", ":var_7"),
    (call_script, "script_process_player_enterprise", ":var_0", ":var_1"),
    (assign, ":var_8", 0),
    (assign, ":var_9", reg0),
    (try_for_range, reg1, 0, ":var_3"),
        (store_sub, ":var_9", reg0, ":var_8"),
        (val_mul, ":var_9", ":var_6"),
        (val_div, ":var_9", 100),
        (val_abs, ":var_9"),
        (val_add, ":var_8", ":var_9"),
    (try_end),
    (val_sub, reg0, ":var_8"),

]),

("raf_process_alarm",
[
    (store_script_param, ":var_0", 1),
    (party_set_slot, ":var_0", slot_center_last_spotted_enemy, -1),
    (party_set_slot, ":var_0", slot_center_sortie_strength, 0),
    (party_set_slot, ":var_0", slot_center_sortie_enemy_strength, 0),
    (assign, ":var_1", 3),
    (try_begin),
        (is_currently_night),
        (assign, ":var_1", 2),
    (try_end),
    (try_begin),
        (party_slot_eq, ":var_0", slot_center_has_watch_tower, 1),
        (val_mul, ":var_1", 2),
    (else_try),
        (neg|is_between, ":var_0", "p_village_1_1", "p_salt_mine"),
        (val_add, ":var_1", 1),
        (val_mul, ":var_1", 2),
    (try_end),
    (store_faction_of_party, ":var_2", ":var_0"),
    (try_for_parties, ":var_3"),
        (this_or_next|party_slot_eq, ":var_3", slot_party_type, 13),
        (eq, ":var_3", "p_main_party"),
        (store_faction_of_party, ":var_4", ":var_3"),
        (try_begin),
            (eq, ":var_3", "p_main_party"),
            (assign, ":var_4", "$players_kingdom"),
        (try_end),
        (try_begin),
            (eq, ":var_4", ":var_2"),
            (store_distance_to_party_from_party, ":var_5", ":var_3", ":var_0"),
            (neg|gt, ":var_5", ":var_1"),
            (party_get_slot, ":var_6", ":var_3", slot_party_cached_strength),
            (party_get_slot, ":var_7", ":var_0", slot_center_sortie_strength),
            (val_add, ":var_7", ":var_6"),
            (party_set_slot, ":var_0", slot_center_sortie_strength, ":var_7"),
        (else_try),
            (neg|eq, ":var_4", ":var_2"),
            (store_distance_to_party_from_party, ":var_5", ":var_3", ":var_0"),
            (try_begin),
                (neg|ge, ":var_5", 10),
                (store_current_hours, ":var_8"),
                (store_sub, ":var_9", ":var_4", "fac_player_supporters_faction"),
                (val_add, ":var_9", 350),
                (party_set_slot, ":var_0", ":var_9", ":var_8"),
            (try_end),
            (store_relation, ":var_10", ":var_2", ":var_4"),
            (neg|ge, ":var_10", 0),
            (try_begin),
                (neg|gt, ":var_5", ":var_1"),
                (party_get_slot, ":var_6", ":var_3", slot_party_cached_strength),
                (party_get_slot, ":var_11", ":var_0", slot_center_sortie_enemy_strength),
                (val_add, ":var_11", ":var_6"),
                (party_set_slot, ":var_0", slot_center_sortie_enemy_strength, ":var_11"),
                (party_set_slot, ":var_0", slot_center_last_spotted_enemy, ":var_3"),
            (try_end),
        (try_end),
    (try_end),

]),

("game_get_troop_wage",
[
    (store_script_param, ":var_0", 1),
    (store_script_param_2, ":var_1"),
    (assign, ":var_2", 0),
    (assign, ":var_3", 0),
    (assign, ":var_4", 0),
    (assign, ":var_5", 0),
    (assign, ":var_6", 1),
    (try_begin),
        (neg|troop_is_hero, ":var_0"),
        (troop_get_inventory_capacity, ":var_7", ":var_0"),
        (try_for_range, ":var_8", 0, ":var_7"),
            (troop_get_inventory_slot, ":var_9", ":var_0", ":var_8"),
            (gt, ":var_9", 0),
            (item_get_type, ":var_10", ":var_9"),
            (try_begin),
                (eq, ":var_10", 12),
                (item_get_slot, ":var_2", ":var_9", 41),
                (gt, ":var_2", ":var_3"),
                (assign, ":var_3", ":var_2"),
            (else_try),
                (eq, ":var_10", 13),
                (item_get_slot, ":var_2", ":var_9", 44),
                (gt, ":var_2", ":var_4"),
                (assign, ":var_4", ":var_2"),
            (else_try),
                (eq, ":var_10", 14),
                (item_get_slot, ":var_2", ":var_9", 45),
                (gt, ":var_2", ":var_5"),
                (assign, ":var_5", ":var_2"),
            (else_try),
                (eq, ":var_10", 1),
                (assign, ":var_6", 2),
            (try_end),
        (try_end),
        (store_add, ":var_11", ":var_3", ":var_4"),
        (val_div, ":var_11", 4),
        (try_begin),
            (store_character_level, ":var_12", ":var_0"),
            (neg|ge, ":var_12", 6),
            (val_div, ":var_11", 3),
            (val_mul, ":var_11", 2),
        (else_try),
            (val_sub, ":var_11", 3),
        (try_end),
        (try_begin),
            (store_character_level, ":var_12", ":var_0"),
            (ge, ":var_12", 19),
            (val_add, ":var_11", 3),
            (val_mul, ":var_11", 2),
            (try_begin),
                (ge, ":var_12", 30),
                (val_add, ":var_11", 210),
            (else_try),
                (ge, ":var_12", 27),
                (val_add, ":var_11", 110),
            (else_try),
                (ge, ":var_12", 24),
                (val_add, ":var_11", 10),
            (try_end),
        (try_end),
        (try_begin),
            (eq, ":var_6", 2),
            (val_mul, ":var_11", 5),
            (val_div, ":var_11", 4),
        (try_end),
    (try_end),
    (try_begin),
        (is_between, ":var_0", "trp_npc1", "trp_kingdom_1_lord"),
        (store_character_level, ":var_13", ":var_0"),
        (store_mul, ":var_14", ":var_13", 3),
        (val_add, ":var_14", 50),
        (store_mul, ":var_15", ":var_13", 2),
        (val_add, ":var_15", 20),
        (store_add, ":var_11", ":var_14", ":var_15"),
        (val_div, ":var_11", 2),
        (val_max, ":var_11", 1),
        (val_sub, ":var_11", 31),
        (val_max, ":var_11", 1),
        (store_mul, reg0, ":var_11", ":var_11"),
        (assign, ":var_11", reg0),
        (val_div, ":var_11", 200),
        (try_begin),
            (neg|ge, ":var_11", 80),
            (val_mul, ":var_11", 3),
        (try_end),
        (val_mul, ":var_11", 2),
        (val_div, ":var_11", 3),
    (try_end),
    (party_get_template_id, ":var_16", ":var_1"),
    (try_begin),
        (eq, "$use_feudal_lance", 1),
        (this_or_next|gt, "$g_player_crusading", 0),
        (eq, "$use_feudal_lance", 1),
        (eq, ":var_16", "p_main_party"),
        (assign, ":var_17", 0),
        (try_for_range, ":var_18", "p_town_1_1", "p_salt_mine"),
            (party_slot_eq, ":var_18", slot_town_lord, "trp_player"),
            (assign, ":var_17", 1),
            (assign, ":var_18", -1),
        (try_end),
        (eq, ":var_17", 0),
        (val_mul, ":var_11", 2),
        (val_div, ":var_11", 3),
        (val_max, ":var_11", 3),
    (else_try),
        (eq, "$use_feudal_lance", 1),
        (this_or_next|gt, "$g_player_crusading", 0),
        (eq, "$use_feudal_lance", 1),
        (eq, ":var_16", "p_main_party"),
        (assign, ":var_19", 0),
        (try_for_range, ":var_18", "p_town_1_1", "p_salt_mine"),
            (party_slot_eq, ":var_18", slot_town_lord, "trp_player"),
            (assign, ":var_19", 1),
            (store_faction_of_party, ":var_20", ":var_18"),
            (assign, ":var_18", -1),
        (try_end),
        (eq, ":var_19", 1),
        (call_script, "script_check_if_faction_is_at_war", ":var_20"),
        (eq, reg0, 0),
        (val_mul, ":var_11", 3),
        (val_div, ":var_11", 2),
    (try_end),
    (try_begin),
        (this_or_next|eq, ":var_1", "p_main_party"),
        (eq, ":var_16", "pt_merc_party"),
        (try_begin),
            (eq, "$tom_difficulty_wages", 0),
            (val_mul, ":var_11", 3),
            (val_div, ":var_11", 2),
        (else_try),
            (eq, "$tom_difficulty_wages", 1),
        (else_try),
            (eq, "$tom_difficulty_wages", 2),
            (val_div, ":var_11", 2),
        (try_end),
        (val_max, ":var_11", 3),
    (try_end),
    (try_begin),
        (neg|eq, ":var_0", "trp_player"),
        (neg|eq, ":var_0", "trp_kidnapped_girl"),
        (neg|is_between, ":var_0", "trp_kingdom_4_pretender", "trp_knight_1_1_wife"),
        (val_max, ":var_11", 1),
    (try_end),
    (assign, ":var_21", -1),
    (try_begin),
        (ge, ":var_1", 0),
        (try_begin),
            (this_or_next|party_slot_eq, ":var_1", slot_party_type, 3),
            (party_slot_eq, ":var_1", slot_party_type, 2),
            (party_get_slot, ":var_21", ":var_1", slot_town_lord),
        (else_try),
            (eq, ":var_1", "p_main_party"),
            (assign, ":var_21", "trp_player"),
        (else_try),
            (party_stack_get_troop_id, ":var_21", ":var_1", 0),
        (try_end),
    (try_end),
    (try_begin),
        (ge, ":var_21", 0),
        (store_skill_level, ":var_22", "skl_leadership", ":var_21"),
        (store_mul, ":var_23", 5, ":var_22"),
        (store_sub, ":var_24", 100, ":var_23"),
        (val_mul, ":var_11", ":var_24"),
        (val_div, ":var_11", 100),
    (try_end),
    (assign, reg0, ":var_11"),
    (set_trigger_result, reg0),

]),

("get_closest_enemy_distance",
[
    (store_script_param, ":var_0", 1),
    (assign, ":var_1", 100000),
    (assign, ":var_2", -1),
    (agent_get_position, pos1, ":var_0"),
    (agent_get_team, ":var_3", ":var_0"),
    (try_for_agents, ":var_4"),
        (agent_is_alive, ":var_4"),
        (agent_is_active, ":var_4"),
        (agent_is_human, ":var_4"),
        (agent_get_team, ":var_5", ":var_4"),
        (teams_are_enemies, ":var_5", ":var_3"),
        (agent_get_position, pos2, ":var_4"),
        (get_distance_between_positions, ":var_6", pos2, pos1),
        (neg|ge, ":var_6", ":var_1"),
        (assign, ":var_1", ":var_6"),
        (assign, ":var_2", ":var_4"),
    (try_end),
    (assign, reg1, ":var_1"),
    (assign, reg4, ":var_2"),

]),

("get_first_closest_enemy_distance",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (assign, ":var_3", 100000),
    (assign, ":var_4", -1),
    (agent_get_position, pos1, ":var_0"),
    (try_for_agents, ":var_5"),
        (gt, ":var_3", ":var_2"),
        (agent_is_alive, ":var_5"),
        (agent_is_active, ":var_5"),
        (agent_is_human, ":var_5"),
        (agent_get_team, ":var_6", ":var_5"),
        (teams_are_enemies, ":var_6", ":var_1"),
        (agent_get_position, pos2, ":var_5"),
        (get_distance_between_positions, ":var_7", pos2, pos1),
        (neg|ge, ":var_7", ":var_3"),
        (assign, ":var_4", ":var_5"),
        (assign, ":var_3", ":var_7"),
    (try_end),
    (assign, reg1, ":var_3"),
    (assign, reg4, ":var_4"),

]),

("get_closest_enemy_distance_new",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (assign, ":var_3", 100000),
    (agent_get_position, pos1, ":var_0"),
    (try_for_agents, ":var_4"),
        (gt, ":var_3", ":var_2"),
        (agent_is_alive, ":var_4"),
        (agent_is_active, ":var_4"),
        (agent_is_human, ":var_4"),
        (agent_get_team, ":var_5", ":var_4"),
        (teams_are_enemies, ":var_5", ":var_1"),
        (agent_get_position, pos2, ":var_4"),
        (get_distance_between_positions, ":var_6", pos2, pos1),
        (neg|ge, ":var_6", ":var_3"),
        (assign, ":var_3", ":var_6"),
    (try_end),
    (assign, reg1, ":var_3"),

]),

("tom_agent_skirmish",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (store_script_param, ":var_3", 4),
    (store_script_param, ":var_4", 5),
    (store_script_param, ":var_5", 6),
    (try_begin),
        (assign, ":var_6", ":var_3"),
        (gt, ":var_1", 0),
        (agent_get_position, pos0, ":var_0"),
        (agent_get_position, pos1, ":var_1"),
        (agent_get_slot, ":var_7", ":var_0", 106),
        (agent_get_slot, ":var_8", ":var_0", 105),
        (try_begin),
            (eq, ":var_7", 0),
            (store_random_in_range, ":var_7", 1, 3),
            (agent_set_slot, ":var_0", 106, ":var_7"),
        (try_end),
        (try_begin),
            (neg|gt, ":var_2", ":var_4"),
            (val_add, ":var_8", ":var_5"),
            (try_begin),
                (ge, ":var_8", 360),
                (assign, ":var_8", 0),
            (try_end),
            (agent_set_slot, ":var_0", 105, ":var_8"),
            (try_begin),
                (eq, ":var_7", 1),
                (val_mul, ":var_8", -1),
                (val_sub, ":var_6", 1500),
            (try_end),
            (position_get_rotation_around_z, reg1, pos1),
            (store_sub, reg0, 360, reg1),
            (val_add, ":var_8", reg0),
            (position_rotate_z, pos1, ":var_8"),
            (position_move_x, pos1, ":var_6", 0),
            (agent_set_scripted_destination, ":var_0", pos1, 1),
            (agent_set_slot, ":var_0", 104, 1),
        (else_try),
            (agent_clear_scripted_mode, ":var_0"),
            (agent_set_slot, ":var_0", 104, 0),
        (try_end),
    (try_end),

]),

("raf_set_troop_classes",
[
    (troop_set_class, "trp_euro_spearman_1", 0),
    (troop_set_class, "trp_euro_spearman_2", 0),
    (troop_set_class, "trp_euro_spearman_3", 0),
    (troop_set_class, "trp_teu_town_2_1", 0),
    (troop_set_class, "trp_teu_town_3_1", 0),
    (troop_set_class, "trp_teu_town_4_1", 0),
    (troop_set_class, "trp_rus_town_3_2", 0),
    (troop_set_class, "trp_nordic_spearman", 0),
    (troop_set_class, "trp_nordic_veteran_spearman", 0),
    (troop_set_class, "trp_balt_spearman", 0),
    (troop_set_class, "trp_balt_veteran_spearman", 0),
    (troop_set_class, "trp_marinid_levy_spearman", 0),
    (troop_set_class, "trp_iberian_veteran_spearman", 0),
    (troop_set_class, "trp_andalus_spearman_1", 0),
    (troop_set_class, "trp_andalus_spearman_2", 0),
    (troop_set_class, "trp_andalus_spearman_3", 0),
    (troop_set_class, "trp_gaelic_spearman_1", 0),
    (troop_set_class, "trp_gaelic_spearman_2", 0),
    (troop_set_class, "trp_merc_gaelic_spearman", 0),
    (troop_set_class, "trp_anatolian_christian_spearman_1", 0),
    (troop_set_class, "trp_anatolian_christian_spearman_2", 0),
    (troop_set_class, "trp_scottish_forinsec_spearman", 0),
    (troop_set_class, "trp_scottish_forinsec_spearman", 0),
    (troop_set_class, "trp_tatar_veteran_horse_archer", 3),
    (troop_set_class, "trp_tatar_horse_archer", 3),
    (troop_set_class, "trp_tatar_horseman", 3),
    (troop_set_class, "trp_tatar_skirmisher", 3),
    (troop_set_class, "trp_cuman_veteran_horse_archer", 3),
    (troop_set_class, "trp_cuman_horse_archer", 3),
    (troop_set_class, "trp_cuman_horseman", 3),
    (troop_set_class, "trp_cuman_skirmisher", 3),
    (troop_set_class, "trp_cuman_tribesman", 3),
    (troop_set_class, "trp_rus_horse_1", 3),
    (troop_set_class, "trp_byz_castle_2", 3),
    (troop_set_class, "trp_andalus_horse_1", 3),
    (troop_set_class, "trp_andalus_horse_1", 3),
    (troop_set_class, "trp_anatolian_turkoman_1", 3),
    (troop_set_class, "trp_anatolian_turkoman_2", 3),
    (troop_set_class, "trp_crusader_turkopole", 3),
    (troop_set_class, "trp_merc_sicily_horse_archer_1", 3),
    (troop_set_class, "trp_merc_sicily_horse_archer_2", 3),
    (str_store_string, s21, "@Horse Archers"),
    (class_set_name, 3, 21),
    (troop_set_class, "trp_marinid_village_rabble", 0),
    (troop_set_class, "trp_marinid_skirmishers", 0),
    (troop_set_class, "trp_marinid_javelin_infantry", 0),
    (troop_set_class, "trp_byz_village_2", 0),
    (troop_set_class, "trp_iberian_village_skirmisher", 0),
    (troop_set_class, "trp_teu_balt_1", 0),
    (troop_set_class, "trp_teu_balt_2", 0),
    (troop_set_class, "trp_balkan_vil_3_1_1", 0),
    (troop_set_class, "trp_balt_skirmisher", 0),
    (troop_set_class, "trp_balt_jav", 0),
    (troop_set_class, "trp_balt_veteran_jav", 0),
    (troop_set_class, "trp_merc_almogabar", 0),
    (troop_set_class, "trp_byz_village_3_1", 0),
    (troop_set_class, "trp_byz_village_4_1", 0),
    (troop_set_class, "trp_balkan_vil_4_1_1", 0),
    (troop_set_class, "trp_balkan_vil_4_1_1", 0),
    (troop_set_class, "trp_marinid_mounted_skirmisher_1", 2),
    (troop_set_class, "trp_marinid_mounted_skirmisher_2", 2),
    (troop_set_class, "trp_marinid_mounted_skirmisher_3", 2),
    (troop_set_class, "trp_balt_mounted_skirmisher", 2),
    (troop_set_class, "trp_balt_light_cavalry", 2),
    (troop_set_class, "trp_balt_medium_cavalry", 2),
    (try_for_range, ":var_0", "trp_knight_1_1", "trp_kingdom_2_pretender"),
        (troop_set_class, ":var_0", 2),
    (try_end),

]),

("party_calculate_regular_strength",
[
    (store_script_param_1, ":var_0"),
    (assign, reg0, 0),
    (party_get_num_companion_stacks, ":var_1", ":var_0"),
    (try_for_range, ":var_2", 0, ":var_1"),
        (party_stack_get_troop_id, ":var_3", ":var_0", ":var_2"),
        (neg|troop_is_hero, ":var_3"),
        (store_character_level, ":var_4", ":var_3"),
        (val_add, ":var_4", 12),
        (val_mul, ":var_4", ":var_4"),
        (val_div, ":var_4", 100),
        (party_stack_get_size, ":var_5", ":var_0", ":var_2"),
        (party_stack_get_num_wounded, ":var_6", ":var_0", ":var_2"),
        (val_sub, ":var_5", ":var_6"),
        (val_mul, ":var_4", ":var_5"),
        (val_add, reg0, ":var_4"),
    (try_end),

]),

("party_calculate_strength",
[
    (store_script_param_1, ":var_0"),
    (store_script_param_2, ":var_1"),
    (assign, reg0, 0),
    (party_get_num_companion_stacks, ":var_2", ":var_0"),
    (assign, ":var_3", 0),
    (try_begin),
        (neg|eq, ":var_1", 0),
        (assign, ":var_3", 1),
    (try_end),
    (try_for_range, ":var_4", ":var_3", ":var_2"),
        (party_stack_get_troop_id, ":var_5", ":var_0", ":var_4"),
        (store_character_level, ":var_6", ":var_5"),
        (val_add, ":var_6", 4),
        (val_mul, ":var_6", ":var_6"),
        (val_mul, ":var_6", 2),
        (val_div, ":var_6", 100),
        (val_max, ":var_6", 1),
        (try_begin),
            (neg|troop_is_hero, ":var_5"),
            (party_stack_get_size, ":var_7", ":var_0", ":var_4"),
            (party_stack_get_num_wounded, ":var_8", ":var_0", ":var_4"),
            (val_sub, ":var_7", ":var_8"),
            (val_mul, ":var_6", ":var_7"),
        (else_try),
            (troop_is_wounded, ":var_5"),
            (assign, ":var_6", 0),
        (try_end),
        (val_add, reg0, ":var_6"),
    (try_end),
    (party_set_slot, ":var_0", slot_party_cached_strength, reg0),

]),

("change_rain_or_snow",
[
    (party_get_current_terrain, ":var_0", "p_main_party"),
    (try_begin),
        (this_or_next|eq, ":var_0", 4),
        (eq, ":var_0", 12),
        (assign, ":var_1", 2),
    (else_try),
        (assign, ":var_1", 1),
    (try_end),
    (get_global_cloud_amount, ":var_2"),
    (assign, ":var_3", 0),
    (try_begin),
        (neg|eq, ":var_0", 5),
        (neg|eq, ":var_0", 13),
        (gt, ":var_2", 67),
        (store_random_in_range, ":var_4", 30, 101),
        (set_rain, ":var_1", ":var_4"),
        (assign, ":var_3", 1),
        (store_random_in_range, ":var_5", 30, 101),
        (set_global_haze_amount, ":var_5"),
    (try_end),
    (store_random_in_range, ":var_6", 1, 100),
    (try_begin),
        (eq, ":var_3", 1),
        (eq, ":var_1", 2),
        (neg|eq, "$tom_sand_storm_chance", 0),
        (neg|ge, ":var_6", "$tom_sand_storm_chance"),
        (set_rain, 2, 100),
        (assign, "$tom_sand_storm", 2),
        (set_global_haze_amount, 100),
    (else_try),
        (eq, ":var_3", 1),
        (eq, ":var_1", 1),
        (neg|eq, "$tom_sand_storm_chance", 0),
        (neg|ge, ":var_6", "$tom_sand_storm_chance"),
        (set_rain, 1, 100),
        (assign, "$tom_sand_storm", 3),
        (set_global_haze_amount, 100),
    (else_try),
        (this_or_next|eq, ":var_0", 5),
        (eq, ":var_0", 13),
        (neg|ge, ":var_6", "$tom_sand_storm_chance"),
        (assign, "$tom_sand_storm", 1),
        (set_global_haze_amount, 0),
    (try_end),

]),

("vector_length",
[
    (store_script_param, ":var_0", 1),
    (set_fixed_point_multiplier, 10),
    (position_get_x, ":var_1", ":var_0"),
    (position_get_y, ":var_2", ":var_0"),
    (store_mul, ":var_3", ":var_1", ":var_1"),
    (store_mul, ":var_4", ":var_2", ":var_2"),
    (store_add, ":var_5", ":var_3", ":var_4"),
    (store_pow, reg0, ":var_5", 5),
    (val_div, reg0, 10),

]),

("maintain_broken_items",
[
    (troop_get_inventory_capacity, ":var_0", "trp_player"),
    (troop_get_inventory_capacity, ":var_1", "trp_broken_items"),
    (try_for_range, ":var_2", 0, ":var_1"),
        (assign, ":var_3", 0),
        (troop_get_inventory_slot, ":var_4", "trp_broken_items", ":var_2"),
        (try_for_range, ":var_5", 0, ":var_0"),
            (troop_get_inventory_slot, ":var_6", "trp_player", ":var_5"),
            (troop_get_inventory_slot_modifier, ":var_7", "trp_player", ":var_5"),
            (eq, ":var_7", 6),
            (eq, ":var_6", ":var_4"),
            (assign, ":var_3", 1),
        (try_end),
        (eq, ":var_3", 0),
        (troop_remove_item, "trp_broken_items", ":var_4"),
    (try_end),

]),

("first_formation_member_sound_horn",
[
    (get_player_agent_no, ":var_0"),
    (agent_get_team, ":var_1", ":var_0"),
    (try_for_range, ":var_2", 0, 9),
        (class_is_listening_order, ":var_1", ":var_2"),
        (assign, ":var_3", -1),
        (try_for_agents, ":var_4"),
            (neg|eq, ":var_4", ":var_0"),
            (agent_is_alive, ":var_4"),
            (agent_is_human, ":var_4"),
            (agent_get_division, ":var_5", ":var_4"),
            (eq, ":var_5", ":var_2"),
            (agent_get_team, ":var_6", ":var_4"),
            (eq, ":var_6", ":var_1"),
            (assign, ":var_3", ":var_4"),
        (try_end),
        (try_begin),
            (gt, ":var_3", -1),
            (agent_play_sound, ":var_3", "snd_horn"),
        (try_end),
    (try_end),

]),

("set_flag_carriers",
[
    (try_for_range, ":var_0", 0, 4),
        (team_get_slot, ":var_1", ":var_0", 4),
        (gt, ":var_1", 0),
        (neg|eq, "$fplayer_team_no", 0),
        (store_div, ":var_2", ":var_1", 35),
        (gt, ":var_2", 0),
        (assign, ":var_2", 1),
        (try_for_agents, ":var_3"),
            (agent_is_human, ":var_3"),
            (agent_is_non_player, ":var_3"),
            (agent_get_troop_id, ":var_4", ":var_3"),
            (neg|troop_is_guarantee_ranged, ":var_4"),
            (neg|troop_is_guarantee_horse, ":var_4"),
            (neg|troop_is_hero, ":var_4"),
            (agent_get_team, ":var_5", ":var_3"),
            (eq, ":var_5", 0),
            (gt, ":var_2", 0),
            (try_begin),
                (agent_get_party_id, ":var_6", ":var_3"),
                (gt, ":var_6", 0),
                (store_faction_of_party, ":var_7", ":var_6"),
                (eq, ":var_7", "fac_kingdom_23"),
                (party_stack_get_troop_id, ":var_8", ":var_6", 0),
                (eq, ":var_8", "trp_kingdom_23_lord"),
                (assign, ":var_9", "itm_cross"),
            (else_try),
                (store_random_in_range, ":var_9", "itm_flag_pole_1", "itm_cross"),
            (try_end),
            (agent_equip_item, ":var_3", ":var_9"),
            (agent_set_wielded_item, ":var_3", ":var_9"),
            (agent_set_slot, ":var_3", 107, 1),
            (val_sub, ":var_2", 1),
        (try_end),
    (try_end),
    (assign, ":var_10", 0),
    (assign, ":var_11", 0),
    (assign, ":var_12", 0),
    (assign, ":var_13", 0),
    (assign, ":var_14", 0),
    (assign, ":var_15", 0),
    (assign, ":var_16", 0),
    (assign, ":var_17", 0),
    (assign, ":var_18", 0),
    (try_for_agents, ":var_3"),
        (agent_is_human, ":var_3"),
        (agent_is_non_player, ":var_3"),
        (agent_get_team, ":var_5", ":var_3"),
        (eq, ":var_5", "$fplayer_team_no"),
        (agent_get_division, ":var_19", ":var_3"),
        (try_begin),
            (eq, ":var_19", 0),
            (val_add, ":var_10", 1),
        (else_try),
            (eq, ":var_19", 1),
            (val_add, ":var_11", 1),
        (else_try),
            (eq, ":var_19", 2),
            (val_add, ":var_12", 1),
        (else_try),
            (eq, ":var_19", 3),
            (val_add, ":var_13", 1),
        (else_try),
            (eq, ":var_19", 4),
            (val_add, ":var_14", 1),
        (else_try),
            (eq, ":var_19", 5),
            (val_add, ":var_15", 1),
        (else_try),
            (eq, ":var_19", 6),
            (val_add, ":var_16", 1),
        (else_try),
            (eq, ":var_19", 7),
            (val_add, ":var_17", 1),
        (else_try),
            (eq, ":var_19", 8),
            (val_add, ":var_18", 1),
        (try_end),
    (try_end),
    (try_for_range, reg1, 0, 9),
        (assign, ":var_20", 0),
        (assign, ":var_21", reg1),
        (try_begin),
            (eq, reg1, 0),
            (val_add, ":var_20", ":var_10"),
        (else_try),
            (eq, reg1, 1),
            (val_add, ":var_20", ":var_11"),
        (else_try),
            (eq, reg1, 2),
            (val_add, ":var_20", ":var_12"),
        (else_try),
            (eq, reg1, 3),
            (val_add, ":var_20", ":var_13"),
        (else_try),
            (eq, reg1, 4),
            (val_add, ":var_20", ":var_14"),
        (else_try),
            (eq, reg1, 5),
            (val_add, ":var_20", ":var_15"),
        (else_try),
            (eq, reg1, 6),
            (val_add, ":var_20", ":var_16"),
        (else_try),
            (eq, reg1, 7),
            (val_add, ":var_20", ":var_17"),
        (else_try),
            (eq, reg1, 8),
            (val_add, ":var_20", ":var_18"),
        (try_end),
        (store_div, ":var_2", ":var_20", 20),
        (gt, ":var_2", 0),
        (assign, ":var_2", 1),
        (try_for_agents, ":var_3"),
            (agent_is_human, ":var_3"),
            (agent_is_non_player, ":var_3"),
            (agent_get_troop_id, ":var_4", ":var_3"),
            (neg|is_between, ":var_4", "trp_npc1", "trp_knight_1_1_wife"),
            (neg|troop_is_guarantee_ranged, ":var_4"),
            (neg|troop_is_guarantee_horse, ":var_4"),
            (neg|troop_is_hero, ":var_4"),
            (agent_get_team, ":var_5", ":var_3"),
            (eq, ":var_5", "$fplayer_team_no"),
            (agent_get_division, ":var_19", ":var_3"),
            (eq, ":var_19", ":var_21"),
            (gt, ":var_2", 0),
            (agent_get_position, pos8, ":var_3"),
            (set_spawn_position, pos8),
            (assign, ":var_22", ":var_3"),
            (agent_set_team, ":var_22", ":var_5"),
            (store_random_in_range, ":var_9", "itm_flag_pole_1", "itm_cross"),
            (agent_equip_item, ":var_22", ":var_9"),
            (agent_equip_item, ":var_22", ":var_9"),
            (agent_equip_item, ":var_22", ":var_9"),
            (agent_set_wielded_item, ":var_22", ":var_9"),
            (agent_set_slot, ":var_22", 107, 1),
            (val_sub, ":var_2", 1),
        (try_end),
    (try_end),

]),

("freelancer_get_troop",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (try_begin),
        (eq, ":var_0", "trp_knight_23_6"),
        (assign, reg1, "trp_teu_town_1"),
        (try_begin),
            (troop_slot_ge, "trp_player", slot_troop_renown, 120),
            (assign, reg1, "trp_teu_horse_1"),
        (try_end),
    (else_try),
        (eq, ":var_0", "trp_knight_23_1"),
        (assign, reg1, "trp_hospitaller_half_brother"),
        (try_begin),
            (troop_slot_ge, "trp_player", slot_troop_renown, 120),
            (assign, reg1, "trp_hospitaller_knight"),
        (try_end),
    (else_try),
        (eq, ":var_0", "trp_knight_23_2"),
        (assign, reg1, "trp_templar_half_brother"),
        (try_begin),
            (troop_slot_ge, "trp_player", slot_troop_renown, 120),
            (assign, reg1, "trp_templar_knight"),
        (try_end),
    (else_try),
        (eq, ":var_0", "trp_knight_16_1"),
        (assign, reg1, "trp_santiago_half_brother"),
        (try_begin),
            (troop_slot_ge, "trp_player", slot_troop_renown, 120),
            (assign, reg1, "trp_santiago_knight"),
        (try_end),
    (else_try),
        (eq, ":var_0", "trp_knight_18_9"),
        (assign, reg1, "trp_calatrava_half_brother"),
        (try_begin),
            (troop_slot_ge, "trp_player", slot_troop_renown, 120),
            (assign, reg1, "trp_calatrava_knight"),
        (try_end),
    (else_try),
        (try_begin),
            (neg|faction_slot_eq, ":var_1", 301, 0),
            (faction_get_slot, reg1, ":var_1", 301),
        (else_try),
            (faction_get_slot, reg1, ":var_1", ":var_2"),
        (try_end),
    (try_end),

]),

("pass_all_posetions_from_lord_to_lord",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_troop_gold, ":var_2", ":var_0"),
    (troop_remove_gold, ":var_0", ":var_2"),
    (troop_add_gold, ":var_1", ":var_2"),
    (troop_clear_inventory, ":var_0"),
    (try_for_range, reg1, 0, "itm_pig_killer"),
        (troop_has_item_equipped, ":var_0", reg1),
        (troop_remove_item, ":var_0", reg1),
    (try_end),
    (troop_clear_inventory, ":var_0"),

]),

("desert_order",
[
    (try_begin),
        (eq, "$crusader_order_joined", 1),
        (display_message, "@Deserting the grandmaster of your order had brought you much dishonor"),
        (call_script, "script_change_player_honor", -50),
        (call_script, "script_change_troop_renown", "trp_player", -50),
    (try_end),

]),

("freelancer_attach_party",
[
    (party_attach_to_party, "p_main_party", "$enlisted_party"),
    (set_camera_follow_party, "$enlisted_party"),
    (party_set_flags, "$enlisted_party", 16384, 1),
    (disable_party, "p_main_party"),
    (assign, "$freelancer_state", 1),

]),

("freelancer_detach_party",
[
    (enable_party, "p_main_party"),
    (party_detach, "p_main_party"),
    (try_begin),
        (party_is_active, "$enlisted_party"),
        (party_relocate_near_party, "p_main_party", "$enlisted_party", 2),
        (party_set_flags, "$enlisted_party", 16384, 0),
    (try_end),
    (set_camera_follow_party, "p_main_party"),
    (assign, "$g_player_icon_state", 0),

]),

("event_player_enlists",
[
    (store_script_param, ":var_0", 1),
    (troop_get_xp, ":var_1", "trp_player"),
    (troop_set_slot, "trp_player", slot_troop_signup, ":var_1"),
    (store_current_day, ":var_2"),
    (troop_set_slot, "trp_player", slot_troop_signup_2, ":var_2"),
    (party_get_morale, ":var_3", "p_main_party"),
    (party_set_slot, "p_main_party", slot_party_ai_rationale, ":var_3"),
    (call_script, "script_set_parties_around_player_ignore_player", 2, 4),
    (assign, "$enlisted_lord", "$g_talk_troop"),
    (troop_get_slot, "$enlisted_party", "$enlisted_lord", slot_troop_leaded_party),
    (party_get_num_companion_stacks, ":var_4", "p_main_party"),
    (try_for_range_backwards, ":var_5", 1, ":var_4"),
        (party_stack_get_troop_id, ":var_6", "p_main_party", ":var_5"),
        (party_stack_get_size, ":var_7", "p_main_party", ":var_5"),
        (party_remove_members, "p_main_party", ":var_6", ":var_7"),
    (try_end),
    (store_troop_faction, ":var_8", "$enlisted_lord"),
    (try_begin),
        (store_relation, ":var_9", ":var_8", "fac_player_supporters_faction"),
        (neg|ge, ":var_9", 5),
        (call_script, "script_set_player_relation_with_faction", ":var_8", 5),
    (try_end),
    (try_for_range, ":var_10", "fac_player_supporters_faction", "fac_kingdoms_end"),
        (neg|eq, ":var_8", ":var_10"),
        (faction_slot_eq, ":var_10", slot_faction_state, 0),
        (store_relation, ":var_9", ":var_10", "fac_player_supporters_faction"),
        (ge, ":var_9", 0),
        (call_script, "script_set_player_relation_with_faction", ":var_10", -5),
    (try_end),
    (call_script, "script_freelancer_get_troop", "$enlisted_lord", ":var_8", ":var_0"),
    (assign, "$player_cur_troop", reg1),
    (call_script, "script_freelancer_equip_troop", "$player_cur_troop"),
    (call_script, "script_freelancer_attach_party"),
    (troop_get_slot, ":var_11", "$enlisted_lord", slot_troop_banner_scene_prop),
    (troop_set_slot, "trp_player", slot_troop_banner_scene_prop, ":var_11"),
    (display_message, "@You have been enlisted!"),
    (str_store_troop_name_link, s13, "$enlisted_lord"),
    (str_store_faction_name_link, s14, ":var_8"),
    (quest_set_slot, "qst_freelancer_enlisted", 8, "$enlisted_party"),
    (quest_set_slot, "qst_freelancer_enlisted", 20, 5),
    (quest_set_slot, "qst_freelancer_enlisted", 21, 1000),
    (quest_set_slot, "qst_freelancer_enlisted", 22, 100),
    (setup_quest_text, "qst_freelancer_enlisted"),
    (str_clear, s2),
    (call_script, "script_start_quest", "qst_freelancer_enlisted", "$enlisted_lord"),
    (str_store_troop_name, s5, "$player_cur_troop"),
    (str_store_string, s5, "@Current rank: {s5}"),
    (add_quest_note_from_sreg, "qst_freelancer_enlisted", 3, 5, 1),

]),

("event_player_discharge",
[
    (store_troop_faction, ":var_0", "$enlisted_lord"),
    (call_script, "script_change_player_relation_with_faction_ex", ":var_0", 5),
    (try_for_range, ":var_1", "fac_player_supporters_faction", "fac_kingdoms_end"),
        (neg|eq, ":var_0", ":var_1"),
        (faction_slot_eq, ":var_1", slot_faction_state, 0),
        (store_relation, ":var_2", ":var_1", "fac_player_supporters_faction"),
        (neg|ge, ":var_2", 0),
        (call_script, "script_set_player_relation_with_faction", ":var_1", 0),
    (try_end),
    (call_script, "script_freelancer_unequip_troop", "$player_cur_troop"),
    (troop_equip_items, "trp_player"),
    (troop_set_slot, "trp_player", slot_troop_mission_object, 0),
    (troop_set_slot, "trp_player", slot_troop_current_mission, 0),
    (troop_set_slot, "trp_player", slot_troop_banner_scene_prop, 0),
    (assign, "$freelancer_state", 0),
    (call_script, "script_freelancer_detach_party"),
    (rest_for_hours, 0, 0, 0),
    (display_message, "@You have left your commander!"),
    (call_script, "script_finish_quest", "qst_freelancer_enlisted", 100),

]),

("event_player_vacation",
[
    (troop_set_slot, "trp_player", slot_troop_mission_object, 1),
    (troop_set_slot, "trp_player", slot_troop_current_mission, 14),
    (store_troop_faction, ":var_0", "$enlisted_lord"),
    (try_for_range, ":var_1", "fac_player_supporters_faction", "fac_kingdoms_end"),
        (neg|eq, ":var_0", ":var_1"),
        (faction_slot_eq, ":var_1", slot_faction_state, 0),
        (call_script, "script_set_player_relation_with_faction", ":var_1", 0),
    (try_end),
    (assign, "$freelancer_state", 2),
    (call_script, "script_freelancer_detach_party"),
    (rest_for_hours, 0, 0, 0),
    (display_message, "@You have been granted leave!"),
    (str_store_troop_name_link, s13, "$enlisted_lord"),
    (str_store_faction_name_link, s14, ":var_0"),
    (quest_set_slot, "qst_freelancer_vacation", 8, "$enlisted_party"),
    (quest_set_slot, "qst_freelancer_vacation", 20, 0),
    (quest_set_slot, "qst_freelancer_vacation", 21, 50),
    (quest_set_slot, "qst_freelancer_vacation", 23, 14),
    (setup_quest_text, "qst_freelancer_vacation"),
    (str_clear, s2),
    (call_script, "script_start_quest", "qst_freelancer_vacation", "$enlisted_lord"),

]),

("event_player_returns_vacation",
[
    (troop_set_slot, "trp_player", slot_troop_mission_object, 0),
    (troop_set_slot, "trp_player", slot_troop_current_mission, 0),
    (call_script, "script_set_parties_around_player_ignore_player", 2, 4),
    (party_get_num_companion_stacks, ":var_0", "p_main_party"),
    (try_for_range_backwards, ":var_1", 1, ":var_0"),
        (party_stack_get_troop_id, ":var_2", "p_main_party", ":var_1"),
        (party_stack_get_size, ":var_3", "p_main_party", ":var_1"),
        (party_remove_members, "p_main_party", ":var_2", ":var_3"),
    (try_end),
    (troop_get_slot, "$enlisted_party", "$enlisted_lord", slot_troop_leaded_party),
    (store_troop_faction, ":var_4", "$enlisted_lord"),
    (try_for_range, ":var_5", "fac_player_supporters_faction", "fac_kingdoms_end"),
        (neg|eq, ":var_4", ":var_5"),
        (faction_slot_eq, ":var_5", slot_faction_state, 0),
        (call_script, "script_set_player_relation_with_faction", ":var_5", -5),
    (try_end),
    (try_begin),
        (store_relation, ":var_6", ":var_4", "fac_player_supporters_faction"),
        (neg|ge, ":var_6", 5),
        (call_script, "script_set_player_relation_with_faction", ":var_4", 5),
    (try_end),
    (call_script, "script_freelancer_attach_party"),
    (display_message, "@You have rejoined your commander!"),

]),

("event_player_deserts",
[
    (store_troop_faction, ":var_0", "$enlisted_lord"),
    (call_script, "script_change_player_relation_with_faction_ex", ":var_0", -10),
    (call_script, "script_change_player_relation_with_troop", "$enlisted_lord", -10),
    (call_script, "script_change_player_honor", -20),
    (troop_set_slot, "trp_player", slot_troop_mission_object, 0),
    (troop_set_slot, "trp_player", slot_troop_current_mission, 0),
    (faction_set_slot, ":var_0", 301, 0),
    (troop_set_slot, "trp_player", slot_troop_banner_scene_prop, 0),
    (rest_for_hours, 0, 0, 0),
    (assign, "$freelancer_state", 0),
    (call_script, "script_fail_quest", "qst_freelancer_enlisted"),

]),

("party_restore",
[
    (store_current_day, ":var_0"),
    (troop_get_slot, ":var_1", "trp_player", slot_troop_signup_2),
    (store_sub, ":var_2", ":var_0", ":var_1"),
    (party_get_slot, ":var_3", "p_main_party", slot_party_ai_rationale),
    (store_add, ":var_4", 800, ":var_3"),
    (val_sub, ":var_4", ":var_2"),
    (party_get_num_companion_stacks, ":var_5", "p_freelancer_party_backup"),
    (try_for_range, ":var_6", 0, ":var_5"),
        (assign, ":var_7", 0),
        (party_stack_get_troop_id, ":var_8", "p_freelancer_party_backup", ":var_6"),
        (neg|eq, ":var_8", "trp_player"),
        (try_begin),
            (troop_is_hero, ":var_8"),
            (assign, ":var_7", 1),
        (else_try),
            (store_random_in_range, ":var_9", 0, 1000),
            (is_between, ":var_9", 0, ":var_4"),
            (party_stack_get_size, ":var_10", "p_freelancer_party_backup", ":var_6"),
            (store_random_in_range, ":var_9", 0, 1000),
            (try_begin),
                (is_between, ":var_9", 0, ":var_4"),
                (assign, ":var_7", ":var_10"),
            (else_try),
                (store_random_in_range, ":var_7", 0, ":var_10"),
            (try_end),
        (try_end),
        (ge, ":var_7", 1),
        (party_add_members, "p_main_party", ":var_8", ":var_7"),
    (try_end),
    (party_clear, "p_freelancer_party_backup"),

]),

("get_desert_troops",
[
    (party_get_morale, ":var_0", "$enlisted_party"),
    (store_current_day, ":var_1"),
    (troop_get_slot, ":var_2", "trp_player", slot_troop_signup_2),
    (store_sub, ":var_3", ":var_1", ":var_2"),
    (store_sub, ":var_4", 100, ":var_0"),
    (store_skill_level, ":var_5", "skl_leadership", "trp_player"),
    (store_skill_level, ":var_6", "skl_persuasion", "trp_player"),
    (val_mul, ":var_5", 10),
    (val_mul, ":var_6", 10),
    (store_add, ":var_7", ":var_5", ":var_6"),
    (val_add, ":var_7", ":var_3"),
    (val_add, ":var_7", ":var_4"),
    (party_get_num_companion_stacks, ":var_8", "$enlisted_party"),
    (try_for_range_backwards, ":var_9", 1, ":var_8"),
        (store_random_in_range, ":var_10", 0, 1000),
        (is_between, ":var_10", 0, ":var_7"),
        (party_stack_get_troop_id, ":var_11", "$enlisted_party", ":var_9"),
        (party_stack_get_size, ":var_12", "$enlisted_party", ":var_9"),
        (store_random_in_range, ":var_13", 0, ":var_12"),
        (party_remove_members, "$enlisted_party", ":var_11", ":var_13"),
        (party_add_members, "p_main_party", ":var_11", ":var_13"),
    (try_end),

]),

("freelancer_keep_field_loot",
[
    (get_player_agent_no, ":var_0"),
    (try_for_range, ":var_1", 0, 4),
        (agent_get_item_slot, ":var_2", ":var_0", ":var_1"),
        (gt, ":var_2", 0),
        (neg|troop_has_item_equipped, "trp_player", ":var_2"),
        (troop_add_item, "trp_player", ":var_2"),
    (try_end),
    (agent_get_horse, ":var_3", ":var_0"),
    (try_begin),
        (gt, ":var_3", 0),
        (agent_get_item_id, ":var_3", ":var_3"),
        (troop_get_inventory_slot, ":var_4", "trp_player", 8),
        (neg|eq, ":var_3", ":var_4"),
        (try_begin),
            (gt, ":var_4", 0),
            (troop_get_inventory_slot_modifier, ":var_5", "trp_player", 8),
            (troop_add_item, "trp_player", ":var_4", ":var_5"),
        (try_end),
        (troop_set_inventory_slot, "trp_player", 8, ":var_3"),
    (try_end),

]),

("cf_freelancer_player_can_upgrade",
[
    (store_script_param_1, ":var_0"),
    (troop_get_inventory_capacity, ":var_1", ":var_0"),
    (assign, ":var_2", 1),
    (assign, ":var_3", 0),
    (assign, ":var_4", 0),
    (assign, ":var_5", 5),
    (try_for_range, ":var_6", 2, ":var_5"),
        (assign, ":var_7", ":var_1"),
        (try_for_range, ":var_8", 0, ":var_7"),
            (troop_get_inventory_slot, ":var_9", ":var_0", ":var_8"),
            (gt, ":var_9", 0),
            (item_get_type, ":var_10", ":var_9"),
            (eq, ":var_10", ":var_6"),
            (val_add, ":var_4", 1),
            (call_script, "script_troop_can_use_item", "trp_player", ":var_9", 0),
            (eq, reg0, 1),
            (assign, ":var_3", 1),
            (assign, ":var_7", 0),
        (try_end),
        (eq, ":var_3", 1),
        (assign, ":var_5", 2),
    (try_end),
    (try_begin),
        (eq, ":var_3", 0),
        (gt, ":var_4", 0),
        (assign, ":var_2", 0),
        (assign, reg0, 0),
    (try_end),
    (eq, ":var_2", 1),
    (assign, ":var_3", 0),
    (assign, ":var_4", 0),
    (assign, ":var_7", ":var_1"),
    (try_for_range, ":var_8", 0, ":var_7"),
        (troop_get_inventory_slot, ":var_9", ":var_0", ":var_8"),
        (gt, ":var_9", 0),
        (item_get_type, ":var_10", ":var_9"),
        (eq, ":var_10", 13),
        (val_add, ":var_4", 1),
        (call_script, "script_troop_can_use_item", "trp_player", ":var_9", 0),
        (eq, reg0, 1),
        (assign, ":var_3", 1),
        (assign, ":var_7", 0),
    (try_end),
    (try_begin),
        (eq, ":var_3", 0),
        (gt, ":var_4", 0),
        (assign, ":var_2", 0),
        (assign, reg0, 1),
    (try_end),
    (eq, ":var_2", 1),
    (try_begin),
        (troop_is_guarantee_ranged, ":var_0"),
        (assign, ":var_3", 0),
        (assign, ":var_4", 0),
        (assign, ":var_5", 11),
        (try_for_range, ":var_6", 8, ":var_5"),
            (assign, ":var_7", ":var_1"),
            (try_for_range, ":var_8", 0, ":var_7"),
                (troop_get_inventory_slot, ":var_9", ":var_0", ":var_8"),
                (gt, ":var_9", 0),
                (item_get_type, ":var_10", ":var_9"),
                (eq, ":var_10", ":var_6"),
                (val_add, ":var_4", 1),
                (call_script, "script_troop_can_use_item", "trp_player", ":var_9", 0),
                (eq, reg0, 1),
                (assign, ":var_3", 1),
                (assign, ":var_7", 0),
            (try_end),
            (eq, ":var_3", 1),
            (assign, ":var_5", 8),
        (try_end),
        (eq, ":var_3", 0),
        (gt, ":var_4", 0),
        (assign, ":var_2", 0),
        (assign, reg0, 2),
    (try_end),
    (eq, ":var_2", 1),
    (try_begin),
        (troop_is_guarantee_horse, ":var_0"),
        (assign, ":var_3", 0),
        (assign, ":var_4", 0),
        (assign, ":var_7", ":var_1"),
        (try_for_range, ":var_8", 0, ":var_7"),
            (troop_get_inventory_slot, ":var_9", ":var_0", ":var_8"),
            (gt, ":var_9", 0),
            (item_get_type, ":var_10", ":var_9"),
            (eq, ":var_10", 1),
            (val_add, ":var_4", 1),
            (call_script, "script_troop_can_use_item", "trp_player", ":var_9", 0),
            (eq, reg0, 1),
            (assign, ":var_3", 1),
            (assign, ":var_7", 0),
        (try_end),
        (eq, ":var_3", 0),
        (gt, ":var_4", 0),
        (assign, ":var_2", 0),
        (assign, reg0, 3),
    (try_end),
    (eq, ":var_2", 1),

]),

("freelancer_equip_troop",
[
    (store_script_param_1, ":var_0"),
    (str_clear, s2),
    (set_show_messages, 0),
    (assign, ":var_1", 100),
    (troop_get_inventory_capacity, ":var_2", ":var_0"),
    (assign, ":var_3", 0),
    (assign, ":var_4", 0),
    (assign, ":var_5", 0),
    (try_for_range, ":var_6", 1, 16),
        (neg|eq, ":var_6", 11),
        (neg|eq, ":var_6", 5),
        (neg|eq, ":var_6", 6),
        (assign, ":var_7", 0),
        (try_begin),
            (troop_is_guarantee_horse, ":var_0"),
            (eq, ":var_6", 1),
            (assign, ":var_7", 1),
        (else_try),
            (troop_is_guarantee_ranged, ":var_0"),
            (this_or_next|eq, ":var_6", 8),
            (this_or_next|eq, ":var_6", 9),
            (eq, ":var_6", 10),
            (assign, ":var_7", 1),
        (else_try),
            (this_or_next|eq, ":var_6", 7),
            (ge, ":var_6", 12),
            (assign, ":var_7", 1),
        (else_try),
            (neg|eq, ":var_6", 1),
            (neg|ge, ":var_5", 4),
            (store_random_in_range, ":var_7", 0, 3),
        (try_end),
        (eq, ":var_7", 1),
        (try_for_range, ":var_8", 0, 20),
            (troop_set_slot, "trp_temp_array_a", ":var_8", 0),
        (try_end),
        (assign, ":var_9", 0),
        (try_for_range, ":var_8", 0, ":var_2"),
            (troop_get_inventory_slot, ":var_10", ":var_0", ":var_8"),
            (gt, ":var_10", 0),
            (item_get_type, ":var_11", ":var_10"),
            (eq, ":var_11", ":var_6"),
            (call_script, "script_troop_can_use_item", "trp_player", ":var_10", 0),
            (eq, reg0, 1),
            (troop_set_slot, "trp_temp_array_a", ":var_9", ":var_10"),
            (val_add, ":var_9", 1),
        (try_end),
        (gt, ":var_9", 0),
        (try_begin),
            (eq, ":var_9", 1),
            (assign, ":var_12", 0),
        (else_try),
            (store_random_in_range, ":var_12", 0, ":var_9"),
        (try_end),
        (troop_get_slot, ":var_10", "trp_temp_array_a", ":var_12"),
        (gt, ":var_10", 0),
        (str_store_item_name, s3, ":var_10"),
        (str_store_string, s2, "@{s3}, {s2}"),
        (try_begin),
            (eq, ":var_6", 1),
            (assign, ":var_13", 8),
        (else_try),
            (is_between, ":var_6", 12, 16),
            (store_sub, ":var_14", ":var_6", 12),
            (store_add, ":var_13", 4, ":var_14"),
        (else_try),
            (store_add, ":var_13", 0, ":var_5"),
        (try_end),
        (try_begin),
            (troop_get_inventory_slot, ":var_15", "trp_player", ":var_13"),
            (gt, ":var_15", 0),
            (troop_get_inventory_slot_modifier, ":var_16", "trp_player", ":var_13"),
            (troop_add_item, "trp_player", ":var_15", ":var_16"),
        (try_end),
        (troop_set_inventory_slot, "trp_player", ":var_13", ":var_10"),
        (party_set_slot, "p_freelancer_party_backup", ":var_1", ":var_10"),
        (val_add, ":var_1", 1),
        (try_begin),
            (is_between, ":var_6", 2, 12),
            (val_add, ":var_5", 1),
            (try_begin),
                (is_between, ":var_6", 2, 5),
                (assign, ":var_3", 1),
            (else_try),
                (eq, ":var_6", 8),
                (assign, ":var_4", 5),
            (else_try),
                (eq, ":var_6", 9),
                (assign, ":var_4", 6),
            (try_end),
        (try_end),
    (try_end),
    (try_begin),
        (neg|eq, ":var_4", 0),
        (try_begin),
            (troop_get_inventory_slot, ":var_15", "trp_player", 3),
            (gt, ":var_15", 0),
            (troop_get_inventory_slot_modifier, ":var_16", "trp_player", 3),
            (troop_add_item, "trp_player", ":var_15", ":var_16"),
        (try_end),
        (assign, ":var_17", ":var_2"),
        (try_for_range, ":var_8", 0, ":var_17"),
            (troop_get_inventory_slot, ":var_10", ":var_0", ":var_8"),
            (gt, ":var_10", 0),
            (item_get_type, ":var_6", ":var_10"),
            (eq, ":var_6", ":var_4"),
            (troop_set_inventory_slot, "trp_player", 3, ":var_10"),
            (party_set_slot, "p_freelancer_party_backup", ":var_1", ":var_10"),
            (val_add, ":var_1", 1),
            (assign, ":var_5", 4),
            (str_store_item_name, s3, ":var_10"),
            (str_store_string, s2, "@{s3}, {s2}"),
            (assign, ":var_17", 0),
        (try_end),
    (try_end),
    (try_begin),
        (eq, ":var_3", 0),
        (assign, ":var_17", ":var_2"),
        (try_for_range, ":var_8", 0, ":var_17"),
            (troop_get_inventory_slot, ":var_10", ":var_0", ":var_8"),
            (gt, ":var_10", 0),
            (item_get_type, ":var_6", ":var_10"),
            (is_between, ":var_6", 2, 5),
            (call_script, "script_troop_can_use_item", "trp_player", ":var_10", 0),
            (eq, reg0, 1),
            (try_begin),
                (gt, ":var_5", 3),
                (assign, ":var_5", 2),
            (try_end),
            (try_begin),
                (troop_get_inventory_slot, ":var_15", "trp_player", ":var_5"),
                (gt, ":var_15", 0),
                (troop_get_inventory_slot_modifier, ":var_16", "trp_player", ":var_5"),
                (troop_add_item, "trp_player", ":var_15", ":var_16"),
            (try_end),
            (troop_set_inventory_slot, "trp_player", ":var_5", ":var_10"),
            (party_set_slot, "p_freelancer_party_backup", ":var_1", ":var_10"),
            (val_add, ":var_1", 1),
            (str_store_item_name, s3, ":var_10"),
            (str_store_string, s2, "@{s3}, {s2}"),
            (assign, ":var_17", 0),
        (try_end),
    (try_end),
    (set_show_messages, 1),
    (try_begin),
        (neg|str_is_empty, 2),
        (val_sub, ":var_1", 100),
        (party_set_slot, "p_freelancer_party_backup", slot_center_tavern_minstrel, ":var_1"),
        (str_store_troop_name, s1, ":var_0"),
        (display_message, "@The equipment of a {s1}: {s2}is assigned to you."),
    (try_end),

]),

("freelancer_unequip_troop",
[
    (store_script_param_1, ":var_0"),
    (str_clear, s2),
    (set_show_messages, 0),
    (party_get_slot, ":var_1", "p_freelancer_party_backup", slot_center_tavern_minstrel),
    (troop_get_inventory_capacity, ":var_2", "trp_player"),
    (try_for_range, ":var_3", 0, ":var_1"),
        (store_add, ":var_4", 100, ":var_3"),
        (party_get_slot, ":var_5", "p_freelancer_party_backup", ":var_4"),
        (gt, ":var_5", 0),
        (assign, ":var_6", ":var_2"),
        (try_for_range, ":var_7", 0, ":var_6"),
            (troop_get_inventory_slot, ":var_8", "trp_player", ":var_7"),
            (eq, ":var_8", ":var_5"),
            (troop_get_inventory_slot_modifier, ":var_9", "trp_player", ":var_7"),
            (eq, ":var_9", 0),
            (troop_set_inventory_slot, "trp_player", ":var_7", -1),
            (str_store_item_name, s3, ":var_8"),
            (str_store_string, s2, "@{s3}, {s2}"),
            (assign, ":var_6", 0),
        (try_end),
    (try_end),
    (set_show_messages, 1),
    (try_begin),
        (neg|str_is_empty, 2),
        (party_set_slot, "p_freelancer_party_backup", slot_center_tavern_minstrel, 0),
        (str_store_troop_name, s1, ":var_0"),
        (display_message, "@The equipment of a {s1}: {s2}is taken from you."),
    (try_end),
    (troop_equip_items, "trp_player"),

]),

("refresh_center_inventories",
[
    (set_merchandise_modifier_quality, 150),
    (reset_item_probabilities, 100),
    (try_for_range, ":var_0", "p_town_1_1", "p_castle_1_1"),
        (party_get_slot, ":var_1", ":var_0", slot_town_merchant),
        (reset_item_probabilities, 100),
        (assign, ":var_2", 0),
        (try_for_range, ":var_3", "itm_spice", "itm_siege_supply"),
            (call_script, "script_center_get_production", ":var_0", ":var_3"),
            (assign, ":var_4", reg0),
            (try_for_range, ":var_5", "p_village_1_1", "p_salt_mine"),
                (party_slot_eq, ":var_5", slot_village_bound_center, ":var_0"),
                (call_script, "script_center_get_production", ":var_5", ":var_3"),
                (val_div, reg0, 3),
                (val_add, ":var_4", reg0),
            (try_end),
            (val_max, ":var_4", 1),
            (val_mul, ":var_4", 4),
            (val_add, ":var_2", ":var_4"),
        (try_end),
        (party_get_slot, ":var_6", ":var_0", slot_town_prosperity),
        (assign, ":var_7", 25),
        (try_begin),
            (ge, ":var_6", 50),
            (store_sub, ":var_8", ":var_6", 50),
            (val_mul, ":var_8", 2),
            (val_add, ":var_8", 100),
            (val_mul, ":var_7", ":var_8"),
            (val_div, ":var_7", 100),
        (else_try),
            (store_sub, ":var_8", ":var_6", 50),
            (val_add, ":var_8", 100),
            (val_mul, ":var_7", ":var_8"),
            (val_div, ":var_7", 100),
        (try_end),
        (val_clamp, ":var_7", 10, 40),
        (try_begin),
            (is_between, ":var_0", "p_castle_1_1", "p_village_1_1"),
            (val_div, ":var_7", 2),
        (try_end),
        (try_for_range, ":var_3", "itm_spice", "itm_siege_supply"),
            (call_script, "script_center_get_production", ":var_0", ":var_3"),
            (assign, ":var_4", reg0),
            (try_for_range, ":var_5", "p_village_1_1", "p_salt_mine"),
                (party_slot_eq, ":var_5", slot_village_bound_center, ":var_0"),
                (call_script, "script_center_get_production", ":var_5", ":var_3"),
                (val_div, reg0, 3),
                (val_add, ":var_4", reg0),
            (try_end),
            (val_max, ":var_4", 1),
            (val_mul, ":var_4", 4),
            (val_mul, ":var_4", ":var_7"),
            (val_mul, ":var_4", 100),
            (val_div, ":var_4", ":var_2"),
            (set_item_probability_in_merchandise, ":var_3", ":var_4"),
        (try_end),
        (troop_clear_inventory, ":var_1"),
        (troop_add_merchandise, ":var_1", 11, ":var_7"),
        (troop_ensure_inventory_space, ":var_1", 20),
        (troop_sort_inventory, ":var_1"),
        (store_troop_gold, ":var_9", ":var_1"),
        (neg|ge, ":var_9", 1500),
        (store_random_in_range, ":var_10", 500, 1000),
        (call_script, "script_troop_add_gold", ":var_1", ":var_10"),
    (try_end),

]),

("refresh_center_armories",
[
    (reset_item_probabilities, 100),
    (set_merchandise_modifier_quality, 150),
    (try_for_range, ":var_0", "trp_town_1_armorer", "trp_town_1_weaponsmith"),
        (store_sub, ":var_1", ":var_0", "trp_town_1_armorer"),
        (val_add, ":var_1", "p_town_1_1"),
        (troop_clear_inventory, ":var_0"),
        (party_get_slot, ":var_2", ":var_1", slot_center_original_faction),
        (troop_add_merchandise_with_faction, ":var_0", ":var_2", 13, 2),
        (troop_add_merchandise_with_faction, ":var_0", ":var_2", 12, 2),
        (faction_get_slot, ":var_3", ":var_2", slot_faction_culture),
        (troop_add_merchandise_with_faction, ":var_0", ":var_3", 13, 16),
        (troop_add_merchandise_with_faction, ":var_0", ":var_3", 12, 16),
        (troop_add_merchandise_with_faction, ":var_0", ":var_3", 14, 8),
        (troop_add_merchandise_with_faction, ":var_0", ":var_3", 15, 4),
        (troop_ensure_inventory_space, ":var_0", 30),
        (troop_sort_inventory, ":var_0"),
        (store_troop_gold, reg6, ":var_0"),
        (neg|ge, reg6, 1000),
        (store_random_in_range, ":var_4", 250, 500),
        (call_script, "script_troop_add_gold", ":var_0", ":var_4"),
    (try_end),

]),

("refresh_center_weaponsmiths",
[
    (reset_item_probabilities, 100),
    (set_merchandise_modifier_quality, 150),
    (try_for_range, ":var_0", "trp_town_1_weaponsmith", "trp_town_1_tavernkeeper"),
        (store_sub, ":var_1", ":var_0", "trp_town_1_weaponsmith"),
        (val_add, ":var_1", "p_town_1_1"),
        (troop_clear_inventory, ":var_0"),
        (party_get_slot, ":var_2", ":var_1", slot_center_original_faction),
        (troop_add_merchandise_with_faction, ":var_0", ":var_2", 2, 1),
        (troop_add_merchandise_with_faction, ":var_0", ":var_2", 3, 1),
        (troop_add_merchandise_with_faction, ":var_0", ":var_2", 4, 1),
        (troop_add_merchandise_with_faction, ":var_0", ":var_2", 7, 1),
        (troop_add_merchandise_with_faction, ":var_0", ":var_2", 8, 1),
        (troop_add_merchandise_with_faction, ":var_0", ":var_2", 9, 1),
        (troop_add_merchandise_with_faction, ":var_0", ":var_2", 10, 1),
        (faction_get_slot, ":var_3", ":var_2", slot_faction_culture),
        (troop_add_merchandise_with_faction, ":var_0", ":var_3", 2, 5),
        (troop_add_merchandise_with_faction, ":var_0", ":var_3", 3, 5),
        (troop_add_merchandise_with_faction, ":var_0", ":var_3", 4, 5),
        (troop_add_merchandise_with_faction, ":var_0", ":var_3", 7, 6),
        (troop_add_merchandise_with_faction, ":var_0", ":var_3", 8, 4),
        (troop_add_merchandise_with_faction, ":var_0", ":var_3", 9, 3),
        (troop_add_merchandise_with_faction, ":var_0", ":var_3", 10, 5),
        (troop_add_merchandise_with_faction, ":var_0", ":var_3", 5, 2),
        (troop_add_merchandise_with_faction, ":var_0", ":var_3", 6, 2),
        (troop_ensure_inventory_space, ":var_0", 30),
        (troop_sort_inventory, ":var_0"),
        (store_troop_gold, reg6, ":var_0"),
        (neg|ge, reg6, 1000),
        (store_random_in_range, ":var_4", 250, 500),
        (call_script, "script_troop_add_gold", ":var_0", ":var_4"),
    (try_end),

]),

("refresh_center_stables",
[
    (reset_item_probabilities, 100),
    (set_merchandise_modifier_quality, 150),
    (try_for_range, ":var_0", "trp_town_1_horse_merchant", "trp_town_1_mayor"),
        (troop_clear_inventory, ":var_0"),
        (store_sub, ":var_1", ":var_0", "trp_town_1_horse_merchant"),
        (val_add, ":var_1", "p_town_1_1"),
        (party_get_slot, ":var_2", ":var_1", slot_center_original_faction),
        (troop_add_merchandise_with_faction, ":var_0", ":var_2", 1, 2),
        (faction_get_slot, ":var_3", ":var_2", slot_faction_culture),
        (troop_add_merchandise_with_faction, ":var_0", ":var_3", 1, 20),
        (troop_ensure_inventory_space, ":var_0", 65),
        (troop_sort_inventory, ":var_0"),
        (store_troop_gold, ":var_4", ":var_0"),
        (neg|ge, ":var_4", 600),
        (store_random_in_range, ":var_5", 250, 500),
        (call_script, "script_troop_add_gold", ":var_0", ":var_5"),
    (try_end),

]),

("tom_command_cheer",
[
    (get_player_agent_no, ":var_0"),
    (agent_get_team, ":var_1", ":var_0"),
    (try_for_range, ":var_2", 0, 9),
        (try_begin),
            (class_is_listening_order, ":var_1", ":var_2"),
            (try_for_agents, ":var_3"),
                (agent_is_alive, ":var_3"),
                (agent_is_human, ":var_3"),
                (agent_get_class, ":var_4", ":var_3"),
                (eq, ":var_4", ":var_2"),
                (agent_get_simple_behavior, ":var_5", ":var_3"),
                (neg|eq, ":var_5", 4),
                (agent_play_sound, ":var_3", "snd_man_victory"),
            (try_end),
            (assign, ":var_2", 11),
        (try_end),

]),

("update_manor_infested_by_bandits",
[
    (troop_get_slot, ":var_0", "trp_manor_array", slot_troop_relations_begin),
    (try_for_range, ":var_1", 1, ":var_0"),
        (troop_get_slot, ":var_2", "trp_manor_array", ":var_1"),
        (party_clear, ":var_2"),
        (party_set_slot, ":var_2", slot_village_state, 0),
        (store_random_in_range, ":var_3", 0, 100),
        (party_clear_particle_systems, ":var_2"),
        (try_begin),
            (party_slot_eq, ":var_2", 327, 1),
            (assign, ":var_3", 0),
        (try_end),
        (try_begin),
            (party_get_template_id, ":var_4", ":var_2"),
            (eq, ":var_4", "pt_monastery"),
            (assign, ":var_3", 0),
        (try_end),
        (try_begin),
            (neg|ge, ":var_3", 80),
            (party_set_slot, ":var_2", slot_village_infested_by_bandits, 0),
            (party_clear_particle_systems, ":var_2"),
        (else_try),
            (store_random_in_range, ":var_3", 1, 3),
            (party_set_slot, ":var_2", slot_village_infested_by_bandits, ":var_3"),
            (party_add_particle_system, ":var_2", "psys_map_village_fire_smoke"),
        (try_end),
    (try_end),

]),

("get_mercenary_troop_for_manor",
[
    (store_script_param, ":var_0", 1),
    (assign, ":var_1", "trp_merc_euro_spearman"),
    (try_begin),
        (call_script, "script_cf_select_random_town_with_faction", ":var_0"),
        (assign, ":var_2", reg0),
        (gt, ":var_2", 0),
        (assign, ":var_3", 702),
        (try_begin),
            (party_slot_eq, ":var_2", ":var_3", 1),
            (store_random_in_range, ":var_1", "trp_merc_euro_spearman", "trp_merc_balt_spearman"),
        (else_try),
            (party_slot_eq, ":var_2", ":var_3", 2),
            (store_random_in_range, ":var_1", "trp_merc_balt_spearman", "trp_merc_mamluke_spearman"),
        (else_try),
            (party_slot_eq, ":var_2", ":var_3", 4),
            (store_random_in_range, ":var_1", "trp_merc_maghreb_spearman", "trp_merc_rus_spearman"),
        (else_try),
            (party_slot_eq, ":var_2", ":var_3", 5),
            (store_random_in_range, ":var_1", "trp_merc_rus_spearman", "trp_merc_latin_spearman"),
        (else_try),
            (party_slot_eq, ":var_2", ":var_3", 6),
            (store_random_in_range, ":var_1", "trp_merc_latin_spearman", "trp_merc_balkan_spearman"),
        (else_try),
            (party_slot_eq, ":var_2", ":var_3", 7),
            (store_random_in_range, ":var_1", "trp_merc_balkan_spearman", "trp_merc_scan_spearman"),
        (else_try),
            (party_slot_eq, ":var_2", ":var_3", 8),
            (store_random_in_range, ":var_1", "trp_merc_scan_spearman", "trp_merc_gaelic_spearman"),
        (else_try),
            (party_slot_eq, ":var_2", ":var_3", 9),
            (store_random_in_range, ":var_1", "trp_merc_gaelic_spearman", "trp_genoese_crossbowman"),
        (else_try),
            (party_slot_eq, ":var_2", ":var_3", 10),
            (store_random_in_range, ":var_1", "trp_merc_mamluke_spearman", "trp_merc_maghreb_spearman"),
        (try_end),
    (try_end),
    (assign, reg0, ":var_1"),

]),

("init_manor_agents",
[
    (store_script_param, ":var_0", 1),
    (party_get_slot, ":var_1", ":var_0", slot_village_bound_center),
    (party_get_slot, ":var_2", ":var_1", slot_town_lord),
    (store_faction_of_party, ":var_3", ":var_0"),
    (try_begin),
        (eq, ":var_3", "fac_player_supporters_faction"),
        (assign, ":var_3", "$g_player_culture"),
    (try_end),
    (party_get_slot, ":var_4", ":var_0", 342),
    (try_begin),
        (neg|gt, ":var_4", 200),
        (assign, ":var_5", 1),
        (assign, ":var_6", 0),
        (assign, ":var_7", 0),
    (else_try),
        (neg|gt, ":var_4", 400),
        (assign, ":var_5", 2),
        (try_begin),
            (party_slot_eq, ":var_0", 303, 1),
            (assign, ":var_6", 1),
            (assign, ":var_7", 0),
        (try_end),
    (else_try),
        (neg|gt, ":var_4", 600),
        (assign, ":var_5", 3),
        (try_begin),
            (party_slot_eq, ":var_0", 303, 1),
            (assign, ":var_6", 2),
            (assign, ":var_7", 0),
        (try_end),
    (else_try),
        (neg|gt, ":var_4", 800),
        (assign, ":var_5", 4),
        (try_begin),
            (party_slot_eq, ":var_0", 303, 1),
            (assign, ":var_6", 3),
            (assign, ":var_7", 0),
        (try_end),
    (else_try),
        (gt, ":var_4", 800),
        (assign, ":var_5", 4),
        (try_begin),
            (party_slot_eq, ":var_0", 303, 1),
            (assign, ":var_6", 4),
            (assign, ":var_7", 1),
        (try_end),
    (try_end),
    (try_begin),
        (eq, ":var_2", "trp_player"),
        (set_visitor, 10, "trp_manor_seneschal"),
        (set_visitor, 11, "trp_manor_storage"),
        (set_visitor, 12, "trp_manor_marshal"),
    (try_end),
    (try_begin),
        (eq, "$town_nighttime", 0),
        (faction_get_slot, ":var_8", ":var_3", slot_faction_culture),
        (faction_get_slot, ":var_9", ":var_8", slot_faction_village_walker_male_troop),
        (faction_get_slot, ":var_10", ":var_8", slot_faction_village_walker_female_troop),
        (try_for_range, ":var_11", 31, 40),
            (try_for_range, reg0, 0, ":var_5"),
                (store_random_in_range, ":var_12", ":var_9", ":var_10"),
                (set_visitor, ":var_11", ":var_12"),
            (try_end),
        (try_end),
        (faction_get_slot, ":var_8", ":var_3", slot_faction_culture),
        (faction_get_slot, ":var_9", ":var_8", slot_faction_town_walker_male_troop),
        (faction_get_slot, ":var_10", ":var_8", slot_faction_town_walker_female_troop),
        (try_for_range, ":var_11", 20, 25),
            (try_for_range, reg0, 0, ":var_6"),
                (store_random_in_range, ":var_12", ":var_9", ":var_10"),
                (set_visitor, ":var_11", ":var_12"),
            (try_end),
        (try_end),
        (try_for_range, ":var_11", 25, 30),
            (try_for_range, reg0, 0, ":var_7"),
                (store_add, ":var_13", "trp_manor_noble2", 1),
                (store_random_in_range, ":var_12", "trp_manor_noble", ":var_13"),
                (set_visitor, ":var_11", ":var_12"),
            (try_end),
        (try_end),
        (try_for_range, ":var_14", 0, 14),
            (store_add, ":var_15", ":var_14", 308),
            (store_add, ":var_16", ":var_14", 41),
            (store_add, ":var_12", ":var_14", "trp_manor_grain"),
            (party_slot_eq, "$g_encountered_party", ":var_15", 1),
            (set_visitor, ":var_16", ":var_12"),
            (party_slot_eq, "$g_encountered_party", 303, 1),
            (store_add, ":var_16", ":var_14", 81),
            (set_visitor, ":var_16", "trp_manor_seller"),
        (try_end),
        (faction_get_slot, ":var_17", ":var_3", 102),
        (try_begin),
            (party_slot_eq, "$g_encountered_party", 306, 1),
            (store_add, ":var_12", ":var_17", "trp_priest_catholic"),
            (set_visitor, 71, ":var_12"),
        (try_end),
        (try_for_range, ":var_14", 0, 4),
            (store_add, ":var_15", ":var_14", 323),
            (store_add, ":var_12", ":var_14", "trp_manor_armorsmith"),
            (store_add, ":var_16", ":var_14", 13),
            (party_slot_eq, "$g_encountered_party", ":var_15", 1),
            (set_visitor, ":var_16", ":var_12"),
        (try_end),
        (try_begin),
            (eq, ":var_2", "trp_player"),
            (party_get_slot, ":var_12", "$g_encountered_party", 344),
            (gt, ":var_12", 0),
            (set_visitor, 72, ":var_12"),
        (try_end),
        (try_begin),
            (eq, ":var_2", "trp_player"),
            (party_slot_eq, "$g_encountered_party", 340, 1),
            (set_visitor, 73, "trp_manor_trader_book"),
        (try_end),
    (try_end),
    (try_begin),
        (try_begin),
            (party_slot_eq, "$g_encountered_party", 305, 1),
            (set_visitor, 70, "trp_whore"),
        (try_end),
        (try_for_range, ":var_16", 66, 70),
            (party_slot_eq, "$g_encountered_party", 304, 1),
            (store_random_in_range, ":var_18", "trp_tavern_minstrel_1", "trp_kingdom_heroes_including_player_begin"),
            (set_visitor, ":var_16", ":var_18"),
        (try_end),
        (faction_get_slot, ":var_12", ":var_3", slot_faction_quick_battle_tier_2_infantry),
        (try_for_range, ":var_16", 60, 66),
            (party_slot_eq, "$g_encountered_party", 327, 1),
            (set_visitor, ":var_16", ":var_12"),
        (try_end),
        (try_begin),
            (party_slot_eq, "$g_encountered_party", 322, 1),
            (store_random_in_range, ":var_12", "trp_ransom_broker_1", "trp_tavern_traveler_1"),
            (set_visitor, 17, ":var_12"),
        (try_end),
    (try_end),

]),

("manor_refresh_inventories",
[
    (store_script_param, ":var_0", 1),
    (party_get_slot, ":var_1", ":var_0", slot_village_bound_center),
    (party_get_slot, ":var_2", ":var_1", slot_center_original_faction),
    (reset_item_probabilities, 100),
    (set_merchandise_modifier_quality, 150),
    (try_begin),
        (party_slot_eq, ":var_0", 323, 1),
        (troop_clear_inventory, "trp_manor_armorsmith"),
        (troop_add_merchandise_with_faction, "trp_manor_armorsmith", ":var_2", 13, 16),
        (troop_add_merchandise_with_faction, "trp_manor_armorsmith", ":var_2", 12, 16),
        (troop_add_merchandise_with_faction, "trp_manor_armorsmith", ":var_2", 14, 8),
        (troop_add_merchandise_with_faction, "trp_manor_armorsmith", ":var_2", 15, 4),
        (troop_ensure_inventory_space, "trp_manor_armorsmith", 30),
        (troop_sort_inventory, "trp_manor_armorsmith"),
        (store_troop_gold, reg6, "trp_manor_armorsmith"),
        (troop_remove_gold, "trp_manor_armorsmith", reg6),
        (store_random_in_range, ":var_3", 250, 500),
        (call_script, "script_troop_add_gold", "trp_manor_armorsmith", ":var_3"),
    (try_end),
    (try_begin),
        (party_slot_eq, ":var_0", 324, 1),
        (troop_clear_inventory, "trp_manor_weaponsmith"),
        (troop_add_merchandise_with_faction, "trp_manor_weaponsmith", ":var_2", 2, 5),
        (troop_add_merchandise_with_faction, "trp_manor_weaponsmith", ":var_2", 3, 5),
        (troop_add_merchandise_with_faction, "trp_manor_weaponsmith", ":var_2", 4, 5),
        (troop_add_merchandise_with_faction, "trp_manor_weaponsmith", ":var_2", 7, 6),
        (troop_ensure_inventory_space, "trp_manor_weaponsmith", 30),
        (troop_sort_inventory, "trp_manor_weaponsmith"),
        (store_troop_gold, reg6, "trp_manor_weaponsmith"),
        (troop_remove_gold, "trp_manor_weaponsmith", reg6),
        (store_random_in_range, ":var_3", 250, 500),
        (call_script, "script_troop_add_gold", "trp_manor_weaponsmith", ":var_3"),
    (try_end),
    (try_begin),
        (party_slot_eq, ":var_0", 325, 1),
        (troop_clear_inventory, "trp_manor_fletcher"),
        (troop_add_merchandise_with_faction, "trp_manor_fletcher", ":var_2", 8, 4),
        (troop_add_merchandise_with_faction, "trp_manor_fletcher", ":var_2", 9, 3),
        (troop_add_merchandise_with_faction, "trp_manor_fletcher", ":var_2", 10, 5),
        (troop_add_merchandise_with_faction, "trp_manor_fletcher", ":var_2", 5, 2),
        (troop_add_merchandise_with_faction, "trp_manor_fletcher", ":var_2", 6, 2),
        (troop_ensure_inventory_space, "trp_manor_fletcher", 30),
        (troop_sort_inventory, "trp_manor_fletcher"),
        (store_troop_gold, reg6, "trp_manor_fletcher"),
        (troop_remove_gold, "trp_manor_fletcher", reg6),
        (store_random_in_range, ":var_3", 250, 500),
        (call_script, "script_troop_add_gold", "trp_manor_fletcher", ":var_3"),
    (try_end),
    (try_begin),
        (party_slot_eq, ":var_0", 326, 1),
        (troop_clear_inventory, "trp_manor_breeder"),
        (troop_add_merchandise_with_faction, "trp_manor_breeder", ":var_2", 1, 20),
        (troop_ensure_inventory_space, "trp_manor_breeder", 30),
        (troop_sort_inventory, "trp_manor_breeder"),
        (store_troop_gold, reg6, "trp_manor_breeder"),
        (troop_remove_gold, "trp_manor_breeder", reg6),
        (store_random_in_range, ":var_3", 250, 500),
        (call_script, "script_troop_add_gold", "trp_manor_breeder", ":var_3"),
    (try_end),
    (try_for_range, ":var_4", 3132, 3146),
        (troop_get_slot, ":var_5", ":var_4", 302),
        (troop_clear_inventory, ":var_4"),
        (store_random_in_range, ":var_6", 2, 5),
        (troop_add_items, ":var_4", ":var_5", ":var_6"),
        (troop_ensure_inventory_space, ":var_4", 20),
        (troop_sort_inventory, ":var_4"),
        (store_troop_gold, reg6, ":var_4"),
        (troop_remove_gold, ":var_4", reg6),
        (store_random_in_range, ":var_3", 150, 300),
        (call_script, "script_troop_add_gold", ":var_4", ":var_3"),
    (try_end),

]),

("init_manor_walker_agents",
[
    (assign, ":var_0", 0),
    (try_for_agents, ":var_1"),
        (agent_get_troop_id, ":var_2", ":var_1"),
        (this_or_next|is_between, ":var_2", "trp_town_walker_1", "trp_tournament_master"),
        (this_or_next|is_between, ":var_2", "trp_manor_noble", "trp_manor_trader_silk"),
        (is_between, ":var_2", "trp_farmer", "trp_kingdom_heroes_including_player_begin"),
        (neg|is_between, ":var_2", "trp_ransom_broker_1", "trp_tavern_traveler_1"),
        (val_add, ":var_0", 1),
        (agent_get_position, pos1, ":var_1"),
        (store_random_in_range, ":var_3", 0, 2),
        (try_begin),
            (eq, ":var_3", 0),
            (store_random_in_range, ":var_4", 20, 72),
        (else_try),
            (store_random_in_range, ":var_4", 81, 95),
        (try_end),
        (agent_set_slot, ":var_1", slot_agent_target_entry_point, ":var_4"),
        (call_script, "script_set_town_walker_destination", ":var_1"),
    (try_end),

]),

("tick_manor_walkers",
[
    (try_for_agents, ":var_0"),
        (agent_get_troop_id, ":var_1", ":var_0"),
        (this_or_next|is_between, ":var_1", "trp_town_walker_1", "trp_tournament_master"),
        (this_or_next|is_between, ":var_1", "trp_manor_noble", "trp_manor_trader_silk"),
        (is_between, ":var_1", "trp_farmer", "trp_kingdom_heroes_including_player_begin"),
        (agent_get_slot, ":var_2", ":var_0", slot_agent_target_entry_point),
        (entry_point_get_position, pos1, ":var_2"),
        (try_begin),
            (this_or_next|is_between, ":var_2", 41, 61),
            (is_between, ":var_2", 80, 95),
            (init_position, pos2),
            (position_set_y, pos2, 250),
            (position_transform_position_to_parent, pos1, pos1, pos2),
        (try_end),
        (agent_get_position, pos2, ":var_0"),
        (get_distance_between_positions, ":var_3", pos1, pos2),
        (neg|ge, ":var_3", 400),
        (assign, ":var_4", 0),
        (try_begin),
            (this_or_next|is_between, ":var_2", 41, 61),
            (is_between, ":var_2", 80, 95),
            (store_random_in_range, ":var_4", 0, 100),
        (try_end),
        (neg|ge, ":var_4", 20),
        (call_script, "script_set_town_walker_destination", ":var_0"),
    (try_end),

]),

("select_mercenary_troop",
[
    (store_script_param, ":var_0", 1),
    (assign, ":var_1", "trp_merc_euro_spearman"),
    (try_begin),
        (party_slot_eq, ":var_0", 702, 1),
        (store_random_in_range, ":var_1", "trp_merc_euro_spearman", "trp_merc_balt_spearman"),
    (else_try),
        (party_slot_eq, ":var_0", 702, 2),
        (store_random_in_range, ":var_1", "trp_merc_balt_spearman", "trp_merc_maghreb_spearman"),
    (else_try),
        (party_slot_eq, ":var_0", 702, 4),
        (store_random_in_range, ":var_1", "trp_merc_maghreb_spearman", "trp_merc_rus_spearman"),
    (else_try),
        (party_slot_eq, ":var_0", 702, 5),
        (store_random_in_range, ":var_1", "trp_merc_rus_spearman", "trp_merc_latin_spearman"),
    (else_try),
        (party_slot_eq, ":var_0", 702, 6),
        (store_random_in_range, ":var_1", "trp_merc_latin_spearman", "trp_merc_balkan_spearman"),
    (else_try),
        (party_slot_eq, ":var_0", 702, 7),
        (store_random_in_range, ":var_1", "trp_merc_balkan_spearman", "trp_merc_scan_spearman"),
    (else_try),
        (party_slot_eq, ":var_0", 702, 8),
        (store_random_in_range, ":var_1", "trp_merc_scan_spearman", "trp_merc_gaelic_spearman"),
    (else_try),
        (party_slot_eq, ":var_0", 702, 9),
        (store_random_in_range, ":var_1", "trp_merc_gaelic_spearman", "trp_genoese_crossbowman"),
    (try_end),
    (assign, reg0, ":var_1"),

]),

("cf_recruit_individual_merc",
[
    (store_script_param, ":var_0", 1),
    (party_get_attached_to, ":var_1", ":var_0"),
    (is_between, ":var_1", "p_town_1_1", "p_village_1_1"),
    (try_begin),
        (store_random_in_range, ":var_2", 1, 10),
        (call_script, "script_select_mercenary_troop", ":var_1"),
        (assign, ":var_3", reg1),
        (gt, ":var_3", "trp_player"),
        (party_add_members, ":var_0", ":var_3", ":var_2"),
    (try_end),

]),

("cf_recruit_merc_lance_for_npc",
[
    (store_script_param, ":var_0", 1),
    (store_faction_of_party, ":var_1", ":var_0"),
    (call_script, "script_cf_select_random_town_with_faction", ":var_1"),
    (gt, reg0, 0),
    (assign, ":var_2", reg0),
    (party_get_slot, ":var_3", ":var_2", 702),
    (party_get_slot, ":var_4", ":var_2", 705),
    (party_get_slot, ":var_5", ":var_2", 708),
    (party_get_slot, ":var_6", ":var_2", 711),
    (party_get_slot, ":var_7", ":var_2", 712),
    (party_get_slot, ":var_8", ":var_2", 713),
    (assign, ":var_9", -1),
    (try_begin),
        (gt, ":var_5", 0),
        (gt, ":var_8", 0),
        (store_random_in_range, ":var_10", 0, 2),
        (eq, ":var_10", 0),
        (assign, ":var_9", 708),
        (val_sub, ":var_8", 1),
        (party_set_slot, ":var_2", 711, ":var_8"),
    (else_try),
        (gt, ":var_4", 0),
        (gt, ":var_7", 0),
        (store_random_in_range, ":var_10", 0, 2),
        (eq, ":var_10", 0),
        (assign, ":var_9", 705),
        (val_sub, ":var_7", 1),
        (party_set_slot, ":var_2", 712, ":var_7"),
    (else_try),
        (gt, ":var_3", 0),
        (gt, ":var_6", 0),
        (assign, ":var_9", 702),
        (val_sub, ":var_6", 1),
        (party_set_slot, ":var_2", 713, ":var_6"),
    (try_end),
    (gt, ":var_9", -1),
    (call_script, "script_fill_company", ":var_2", ":var_0", ":var_9"),

]),

("cf_recruit_lance_for_npc",
[
    (store_script_param, ":var_0", 1),
    (party_get_slot, ":var_1", ":var_0", slot_party_type),
    (assign, ":var_2", -1),
    (try_begin),
        (eq, ":var_1", 13),
        (party_stack_get_troop_id, ":var_2", ":var_0"),
    (try_end),
    (assign, ":var_3", -1),
    (assign, ":var_4", 2),
    (assign, ":var_5", "p_salt_mine"),
    (try_for_range, ":var_6", "p_town_1_1", ":var_5"),
        (this_or_next|neg|party_slot_ge, ":var_6", slot_center_is_besieged_by, 1),
        (neg|party_slot_eq, ":var_6", slot_village_state, 1),
        (party_get_slot, ":var_7", ":var_6", slot_town_lord),
        (eq, ":var_7", ":var_2"),
        (party_get_slot, ":var_8", ":var_6", slot_center_volunteer_troop_amount),
        (gt, ":var_8", 0),
        (call_script, "script_fill_lance", ":var_6", ":var_0"),
        (val_sub, ":var_8", 1),
        (party_set_slot, ":var_6", slot_center_volunteer_troop_amount, ":var_8"),
        (assign, ":var_3", ":var_6"),
        (val_sub, ":var_4", 1),
        (eq, ":var_4", 0),
        (assign, ":var_5", -1),
    (try_end),
    (gt, ":var_3", 0),

]),

("get_random_merc_company_from_center",
[
    (store_script_param, ":var_0", 1),
    (party_get_slot, ":var_1", ":var_0", 702),
    (party_get_slot, ":var_2", ":var_0", 705),
    (party_get_slot, ":var_3", ":var_0", 708),
    (try_begin),
        (gt, ":var_3", 0),
        (store_random_in_range, ":var_4", 0, 2),
        (eq, ":var_4", 0),
        (party_get_slot, ":var_5", ":var_0", 710),
    (else_try),
        (gt, ":var_2", 0),
        (store_random_in_range, ":var_4", 0, 2),
        (eq, ":var_4", 0),
        (party_get_slot, ":var_5", ":var_0", 707),
    (else_try),
        (gt, ":var_1", 0),
        (party_get_slot, ":var_5", ":var_0", 704),
    (try_end),
    (assign, reg0, ":var_5"),

]),

("get_orig_culture",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (try_begin),
        (this_or_next|eq, ":var_2", "fac_culture_baltic"),
        (eq, ":var_2", "fac_culture_finnish"),
        (eq, ":var_1", "fac_kingdom_1"),
        (assign, ":var_2", "fac_culture_teutonic"),
    (else_try),
        (eq, ":var_2", "fac_culture_byzantium"),
        (eq, ":var_1", "fac_kingdom_26"),
        (assign, ":var_2", "fac_culture_italian"),
    (else_try),
        (eq, ":var_1", "fac_kingdom_23"),
        (assign, ":var_2", "fac_culture_western"),
    (else_try),
        (eq, ":var_0", "fac_kingdom_23"),
        (neg|eq, ":var_1", "fac_kingdom_23"),
        (assign, ":var_2", "fac_culture_mamluke"),
    (try_end),
    (assign, reg0, ":var_2"),

]),

("check_agents_for_lances",
[
    (get_player_agent_no, ":var_0"),
    (try_for_agents, ":var_1"),
        (neg|agent_slot_eq, ":var_1", 100, 1),
        (neg|agent_is_alive, ":var_1"),
        (neg|agent_is_wounded, ":var_1"),
        (agent_is_human, ":var_1"),
        (agent_get_party_id, ":var_2", ":var_1"),
        (eq, ":var_2", "p_main_party"),
        (neg|eq, ":var_0", ":var_1"),
        (agent_get_slot, ":var_3", ":var_1", 102),
        (ge, ":var_3", 0),
        (troop_set_slot, "trp_lances_places", ":var_3", 0),
        (troop_set_slot, "trp_lances_troops", ":var_3", 0),
    (try_end),
    (call_script, "script_balance_lance_storage"),

]),

("balance_lance_storage",
[
    (assign, ":var_0", 0),
    (try_for_range, ":var_1", 0, "$lance_troop_serving"),
        (troop_get_slot, ":var_2", "trp_lances_troops", ":var_1"),
        (troop_get_slot, ":var_3", "trp_lances_places", ":var_1"),
        (gt, ":var_2", 0),
        (troop_set_slot, "trp_temp_array_a", ":var_0", ":var_2"),
        (troop_set_slot, "trp_temp_array_b", ":var_0", ":var_3"),
        (val_add, ":var_0", 1),
    (try_end),
    (assign, "$lance_troop_serving", ":var_0"),
    (try_for_range, ":var_1", 0, "$lance_troop_serving"),
        (troop_get_slot, ":var_2", "trp_temp_array_a", ":var_1"),
        (troop_get_slot, ":var_3", "trp_temp_array_b", ":var_1"),
        (troop_set_slot, "trp_lances_troops", ":var_1", ":var_2"),
        (troop_set_slot, "trp_lances_places", ":var_1", ":var_3"),
    (try_end),
    (assign, ":var_0", 0),
    (try_for_range, ":var_1", 0, "$lance_troop_reserve"),
        (troop_get_slot, ":var_2", "trp_lances_troops_reserve", ":var_1"),
        (troop_get_slot, ":var_3", "trp_lances_places_reserve", ":var_1"),
        (gt, ":var_2", 0),
        (troop_set_slot, "trp_temp_array_a", ":var_0", ":var_2"),
        (troop_set_slot, "trp_temp_array_b", ":var_0", ":var_3"),
        (val_add, ":var_0", 1),
    (try_end),
    (assign, "$lance_troop_reserve", ":var_0"),
    (try_for_range, ":var_1", 0, "$lance_troop_reserve"),
        (troop_get_slot, ":var_2", "trp_temp_array_a", ":var_1"),
        (troop_get_slot, ":var_3", "trp_temp_array_b", ":var_1"),
        (troop_set_slot, "trp_lances_troops_reserve", ":var_1", ":var_2"),
        (troop_set_slot, "trp_lances_places_reserve", ":var_1", ":var_3"),
    (try_end),

]),

("count_nobles_commoners_for_center",
[
    (try_for_parties, ":var_0"),
        (party_set_slot, ":var_0", 714, 0),
        (party_set_slot, ":var_0", 715, 0),
        (party_get_slot, ":var_1", ":var_0", 716),
        (party_set_slot, ":var_0", 716, 0),
        (ge, ":var_1", 1),
        (val_div, ":var_1", 10),
        (party_get_slot, ":var_2", ":var_0", slot_center_volunteer_troop_amount),
        (val_add, ":var_2", ":var_1"),
        (party_set_slot, ":var_0", slot_center_volunteer_troop_amount, ":var_2"),
    (try_end),
    (try_for_range, ":var_3", 0, "$lance_troop_reserve"),
        (troop_get_slot, ":var_4", "trp_lances_troops_reserve", ":var_3"),
        (troop_get_slot, ":var_5", "trp_lances_places_reserve", ":var_3"),
        (assign, ":var_6", "fac_player_faction"),
        (try_for_range, ":var_7", "fac_culture_finnish", ":var_6"),
            (call_script, "script_troop_find_culture", ":var_4", ":var_7"),
            (ge, reg0, 0),
            (try_begin),
                (eq, reg0, 2),
                (party_get_slot, ":var_8", ":var_5", 715),
                (val_add, ":var_8", 1),
                (party_set_slot, ":var_5", 715, ":var_8"),
            (else_try),
                (party_get_slot, ":var_8", ":var_5", 714),
                (val_add, ":var_8", 1),
                (party_set_slot, ":var_5", 714, ":var_8"),
            (try_end),
            (assign, ":var_6", -1),
        (try_end),
    (try_end),

]),

("get_noble_troop",
[
    (store_script_param, ":var_0", 1),
    (assign, reg1, -1),
    (assign, ":var_1", "$lance_troop_reserve"),
    (try_for_range, ":var_2", 0, ":var_1"),
        (troop_slot_eq, "trp_lances_places_reserve", ":var_2", ":var_0"),
        (troop_get_slot, ":var_3", "trp_lances_troops_reserve", ":var_2"),
        (assign, ":var_4", "fac_player_faction"),
        (try_for_range, ":var_5", "fac_culture_finnish", ":var_4"),
            (call_script, "script_troop_find_culture", ":var_3", ":var_5"),
            (eq, reg0, 2),
            (assign, ":var_4", -1),
        (try_end),
        (eq, reg0, 2),
        (troop_set_slot, "trp_lances_troops_reserve", ":var_2", 0),
        (troop_set_slot, "trp_lances_places_reserve", ":var_2", 0),
        (assign, reg1, ":var_3"),
        (assign, ":var_1", -1),
    (try_end),

]),

("get_commoner_troop",
[
    (store_script_param, ":var_0", 1),
    (assign, reg1, -1),
    (assign, ":var_1", "$lance_troop_reserve"),
    (try_for_range, ":var_2", 0, ":var_1"),
        (troop_slot_eq, "trp_lances_places_reserve", ":var_2", ":var_0"),
        (troop_get_slot, ":var_3", "trp_lances_troops_reserve", ":var_2"),
        (assign, ":var_4", "fac_player_faction"),
        (try_for_range, ":var_5", "fac_culture_finnish", ":var_4"),
            (call_script, "script_troop_find_culture", ":var_3", ":var_5"),
            (is_between, reg0, 0, 2),
            (assign, ":var_4", -1),
        (try_end),
        (is_between, reg0, 0, 2),
        (troop_set_slot, "trp_lances_troops_reserve", ":var_2", 0),
        (troop_set_slot, "trp_lances_places_reserve", ":var_2", 0),
        (assign, reg1, ":var_3"),
        (assign, ":var_1", -1),
    (try_end),

]),

("add_lance_troop_to_regulars",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (troop_set_slot, "trp_lances_places", "$lance_troop_serving", ":var_1"),
    (troop_set_slot, "trp_lances_troops", "$lance_troop_serving", ":var_0"),
    (val_add, "$lance_troop_serving", 1),

]),

("search_for_troop",
[
    (store_script_param, ":var_0", 1),
    (assign, reg0, -1),
    (assign, ":var_1", "$lance_troop_serving"),
    (try_for_range, ":var_2", 0, ":var_1"),
        (troop_slot_eq, "trp_lances_troop_in_combat", ":var_2", 0),
        (troop_slot_eq, "trp_lances_troops", ":var_2", ":var_0"),
        (assign, reg0, ":var_2"),
        (troop_set_slot, "trp_lances_troop_in_combat", ":var_2", 1),
        (assign, ":var_1", -1),
    (try_end),

]),

("clear_troop_array",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (try_for_range, ":var_3", ":var_1", ":var_2"),
        (troop_set_slot, ":var_0", ":var_3", 0),
    (try_end),

]),

("fill_lance",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (party_get_slot, ":var_2", ":var_0", slot_center_original_faction),
    (party_get_slot, ":var_3", ":var_0", slot_center_culture),
    (party_get_slot, ":var_4", ":var_0", slot_town_prosperity),
    (party_get_slot, ":var_5", ":var_0", 800),
    (party_get_slot, ":var_6", ":var_0", 801),
    (party_stack_get_troop_id, ":var_7", ":var_1"),
    (store_faction_of_party, ":var_8", ":var_0"),
    (call_script, "script_get_orig_culture", ":var_2", ":var_8", ":var_3"),
    (assign, ":var_3", reg0),
    (try_begin),
        (is_between, ":var_1", "p_town_1_1", "p_village_1_1"),
        (party_slot_ge, ":var_1", slot_town_lord, 0),
        (party_get_slot, ":var_7", ":var_1", slot_town_lord),
    (try_end),
    (faction_get_slot, ":var_9", ":var_3", slot_faction_quick_battle_tier_1_infantry),
    (faction_get_slot, ":var_10", ":var_3", 101),
    (faction_get_slot, ":var_11", ":var_3", 100),
    (assign, ":var_12", 50),
    (try_begin),
        (is_between, ":var_0", "p_castle_1_1", "p_village_1_1"),
        (assign, ":var_12", 50),
    (else_try),
        (is_between, ":var_0", "p_village_1_1", "p_salt_mine"),
        (assign, ":var_12", 70),
    (else_try),
        (assign, ":var_12", 30),
    (try_end),
    (store_random_in_range, ":var_13", 1, 101),
    (try_begin),
        (neg|gt, ":var_13", ":var_12"),
        (assign, ":var_14", ":var_9"),
    (else_try),
        (assign, ":var_14", ":var_11"),
    (try_end),
    (try_begin),
        (eq, ":var_7", "trp_knight_23_6"),
        (assign, ":var_14", "trp_teu_town_1"),
        (assign, ":var_10", "trp_teu_horse_1"),
    (else_try),
        (eq, ":var_7", "trp_knight_23_1"),
        (store_random_in_range, ":var_10", "trp_hospitaller_half_brother", "trp_saint_lazarus_half_brother"),
    (else_try),
        (eq, ":var_7", "trp_knight_23_2"),
        (assign, ":var_10", "trp_templar_half_brother", "trp_hospitaller_half_brother"),
    (else_try),
        (eq, ":var_7", "trp_knight_16_1"),
        (assign, ":var_10", "trp_santiago_half_brother", "trp_calatrava_half_brother"),
    (else_try),
        (eq, ":var_7", "trp_knight_18_9"),
        (assign, ":var_10", "trp_calatrava_half_brother", "trp_saint_thomas_half_brother"),
    (else_try),
        (eq, ":var_7", "trp_knight_7_15"),
        (assign, ":var_11", "trp_cuman_tribesman"),
        (assign, ":var_10", "trp_cuman_horseman"),
    (else_try),
        (neg|is_between, ":var_1", "p_town_1_1", "p_salt_mine"),
        (this_or_next|is_between, ":var_7", "trp_knight_3_1", "trp_knight_3_20"),
        (this_or_next|is_between, ":var_7", "trp_knight_27_4", "trp_knight_2_1"),
        (this_or_next|eq, ":var_7", "trp_kingdom_3_lord"),
        (eq, ":var_7", "trp_kingdom_27_lord"),
        (assign, ":var_14", "trp_tatar_tribesman"),
        (assign, ":var_10", "trp_tatar_horseman"),
    (try_end),
    (try_begin),
        (neg|is_between, ":var_5", 1, 4),
        (assign, ":var_5", 2),
    (try_end),
    (try_begin),
        (neg|is_between, ":var_6", 1, 4),
        (assign, ":var_6", 2),
    (try_end),
    (call_script, "script_get_lance_precentage", ":var_5", ":var_4"),
    (assign, ":var_15", reg1),
    (assign, ":var_16", reg2),
    (assign, ":var_17", reg3),
    (try_for_range, reg10, 0, ":var_5"),
        (store_random_in_range, ":var_13", 1, 101),
        (try_begin),
            (eq, ":var_1", "p_main_party"),
            (party_slot_ge, ":var_0", 715, 1),
            (call_script, "script_get_noble_troop", ":var_0"),
            (ge, reg1, 0),
            (party_get_slot, ":var_18", ":var_0", 715),
            (val_sub, ":var_18", 1),
            (party_set_slot, ":var_0", 715, ":var_18"),
        (else_try),
            (neg|ge, ":var_13", ":var_15"),
            (assign, reg1, ":var_10"),
        (else_try),
            (neg|ge, ":var_13", ":var_16"),
            (call_script, "script_choose_random_troop_for_lance", ":var_10", 2),
        (else_try),
            (neg|ge, ":var_13", ":var_17"),
            (call_script, "script_choose_random_troop_for_lance", ":var_10", 3),
        (else_try),
            (store_random_in_range, ":var_19", 0, 100),
            (try_begin),
                (neg|ge, ":var_19", 50),
                (call_script, "script_choose_random_troop_for_lance", ":var_10", 4),
            (else_try),
                (call_script, "script_choose_random_troop_for_lance", ":var_10", 5),
            (try_end),
        (try_end),
        (try_begin),
            (eq, ":var_1", "p_main_party"),
            (call_script, "script_add_lance_troop_to_regulars", reg1, ":var_0"),
        (try_end),
        (party_add_members, ":var_1", reg1, 1),
    (try_end),
    (call_script, "script_get_lance_precentage", ":var_6", ":var_4"),
    (assign, ":var_15", reg1),
    (assign, ":var_16", reg2),
    (assign, ":var_17", reg3),
    (val_mul, ":var_6", 4),
    (try_for_range, reg10, 0, ":var_6"),
        (store_random_in_range, ":var_13", 1, 101),
        (try_begin),
            (eq, ":var_1", "p_main_party"),
            (party_slot_ge, ":var_0", 714, 1),
            (call_script, "script_get_commoner_troop", ":var_0"),
            (ge, reg1, 0),
            (party_get_slot, ":var_18", ":var_0", 714),
            (val_sub, ":var_18", 1),
            (party_set_slot, ":var_0", 714, ":var_18"),
            (str_store_troop_name, s0, reg1),
        (else_try),
            (neg|ge, ":var_13", ":var_15"),
            (assign, reg1, ":var_14"),
        (else_try),
            (neg|ge, ":var_13", ":var_16"),
            (call_script, "script_choose_random_troop_for_lance", ":var_14", 2),
        (else_try),
            (neg|ge, ":var_13", ":var_17"),
            (call_script, "script_choose_random_troop_for_lance", ":var_14", 3),
        (else_try),
            (store_random_in_range, ":var_19", 0, 100),
            (try_begin),
                (neg|ge, ":var_19", 50),
                (call_script, "script_choose_random_troop_for_lance", ":var_14", 4),
            (else_try),
                (call_script, "script_choose_random_troop_for_lance", ":var_14", 5),
            (try_end),
        (try_end),
        (try_begin),
            (eq, ":var_1", "p_main_party"),
            (call_script, "script_add_lance_troop_to_regulars", reg1, ":var_0"),
        (try_end),
        (party_add_members, ":var_1", reg1, 1),
    (try_end),
    (assign, reg0, ":var_1"),

]),

("choose_random_troop_for_lance",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (val_sub, ":var_1", 1),
    (assign, reg1, ":var_0"),
    (assign, ":var_2", -1),
    (assign, ":var_3", -1),
    (troop_get_upgrade_troop, ":var_2", ":var_0", 0),
    (troop_get_upgrade_troop, ":var_3", ":var_0", 1),
    (try_begin),
        (gt, ":var_2", 0),
        (gt, ":var_3", 0),
        (store_random_in_range, ":var_4", 0, 101),
        (try_begin),
            (neg|ge, ":var_4", 50),
            (assign, reg1, ":var_2"),
        (else_try),
            (assign, reg1, ":var_3"),
        (try_end),
    (else_try),
        (gt, ":var_2", 0),
        (assign, reg1, ":var_2"),
    (else_try),
        (gt, ":var_3", 0),
        (assign, reg1, ":var_3"),
    (try_end),
    (try_begin),
        (gt, ":var_1", 1),
        (call_script, "script_choose_random_troop_for_lance", reg1, ":var_1"),
    (try_end),
    (assign, reg2, ":var_1"),

]),

("feudal_lance_manpower_update",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (try_begin),
        (party_get_slot, ":var_2", ":var_0", slot_center_volunteer_troop_amount),
        (try_begin),
            (party_slot_eq, ":var_0", slot_town_lord, "trp_player"),
            (party_get_slot, ":var_3", ":var_0", slot_center_player_relation),
            (val_div, ":var_3", 25),
            (val_add, ":var_1", ":var_3"),
        (try_end),
        (neg|ge, ":var_2", ":var_1"),
        (store_faction_of_party, ":var_4", ":var_0"),
        (try_begin),
            (faction_slot_eq, ":var_4", 400, 0),
            (val_add, ":var_2", 1),
        (try_end),
        (val_add, ":var_2", 1),
        (val_clamp, ":var_2", 1, ":var_1"),
        (party_set_slot, ":var_0", slot_center_volunteer_troop_amount, ":var_2"),
    (try_end),

]),

("fill_company",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (assign, ":var_3", "pt_generic_euro"),
    (try_begin),
        (eq, ":var_2", 702),
        (party_get_slot, ":var_3", ":var_0", 704),
    (else_try),
        (eq, ":var_2", 705),
        (party_get_slot, ":var_3", ":var_0", 707),
    (else_try),
        (eq, ":var_2", 708),
        (party_get_slot, ":var_3", ":var_0", 710),
    (try_end),
    (party_add_template, ":var_1", ":var_3"),

]),

("get_lance_size",
[
    (store_script_param, ":var_0", 1),
    (party_get_slot, ":var_1", ":var_0", 800),
    (party_get_slot, ":var_2", ":var_0", 801),
    (val_mul, ":var_2", 4),
    (try_begin),
        (neg|gt, ":var_2", 0),
        (assign, ":var_2", 1),
    (try_end),
    (try_begin),
        (neg|gt, ":var_1", 0),
        (assign, ":var_1", 1),
    (try_end),
    (store_add, reg0, ":var_2", ":var_1"),
    (assign, reg1, ":var_1"),
    (assign, reg2, ":var_2"),

]),

("get_lance_precentage",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (try_begin),
        (neg|gt, ":var_1", 25),
        (assign, ":var_2", 50),
        (assign, ":var_3", 90),
        (assign, ":var_4", 95),
    (else_try),
        (neg|gt, ":var_1", 75),
        (assign, ":var_2", 30),
        (assign, ":var_3", 80),
        (assign, ":var_4", 90),
    (else_try),
        (assign, ":var_2", 10),
        (assign, ":var_3", 70),
        (assign, ":var_4", 85),
    (try_end),
    (try_begin),
        (eq, ":var_0", 1),
        (val_sub, ":var_2", 20),
        (val_sub, ":var_3", 10),
        (val_sub, ":var_4", 5),
    (else_try),
        (eq, ":var_0", 3),
        (val_add, ":var_2", 20),
        (val_add, ":var_3", 10),
        (val_add, ":var_4", 5),
    (try_end),
    (assign, reg1, ":var_2"),
    (assign, reg2, ":var_3"),
    (assign, reg3, ":var_4"),

]),

("check_if_faction_is_at_war",
[
    (store_script_param, ":var_0", 1),
    (assign, reg0, 0),
    (assign, ":var_1", "fac_kingdoms_end"),
    (try_for_range, ":var_2", "fac_player_supporters_faction", ":var_1"),
        (neg|eq, ":var_0", ":var_2"),
        (store_relation, ":var_3", ":var_2", ":var_0"),
        (neg|ge, ":var_3", 0),
        (assign, reg0, 1),
        (assign, ":var_1", -5),
    (try_end),

]),

("set_sea_icons",
[
    (try_for_parties, ":var_0"),
        (party_get_template_id, ":var_1", ":var_0"),
        (try_begin),
            (eq, ":var_1", "pt_kingdom_hero_party"),
            (party_set_icon, ":var_0", "icon_flagbearer_a"),
        (else_try),
            (eq, ":var_1", "pt_kingdom_caravan_party"),
            (party_set_icon, ":var_0", "icon_mule"),
        (else_try),
            (this_or_next|eq, ":var_1", "pt_desert_bandits"),
            (eq, ":var_1", "pt_deserters"),
            (party_set_icon, ":var_0", "icon_vaegir_knight"),
        (else_try),
            (this_or_next|eq, ":var_1", "pt_merc_party"),
            (this_or_next|eq, ":var_1", "pt_prisoner_train_party"),
            (this_or_next|eq, ":var_1", "pt_patrol_party"),
            (this_or_next|eq, ":var_1", "pt_ghibellines"),
            (this_or_next|eq, ":var_1", "pt_guelphs"),
            (eq, ":var_1", "pt_manhunters"),
            (party_set_icon, ":var_0", "icon_gray_knight"),
        (else_try),
            (eq, ":var_1", "pt_steppe_bandits"),
            (party_set_icon, ":var_0", "icon_khergit"),
        (else_try),
            (this_or_next|eq, ":var_1", "pt_peasant_rebels_euro"),
            (eq, ":var_1", "pt_village_farmers"),
            (party_set_icon, ":var_0", "icon_peasant"),
        (else_try),
            (eq, ":var_1", "pt_cattle_herd"),
            (party_set_icon, ":var_0", "icon_cattle"),
        (else_try),
            (this_or_next|eq, ":var_1", "pt_manhunters"),
            (this_or_next|eq, ":var_1", "pt_dplmc_recruiter"),
            (this_or_next|eq, ":var_1", "pt_crusaders"),
            (eq, ":var_1", "pt_merchant_caravan"),
            (party_set_icon, ":var_0", "icon_gray_knight"),
        (else_try),
            (this_or_next|party_slot_eq, ":var_0", slot_party_type, 7),
            (party_slot_eq, ":var_0", slot_party_type, 12),
            (party_set_icon, ":var_0", "icon_gray_knight"),
        (else_try),
            (this_or_next|eq, ":var_1", "pt_looters"),
            (this_or_next|eq, ":var_1", "pt_forest_bandits"),
            (this_or_next|eq, ":var_1", "pt_mountain_bandits"),
            (this_or_next|eq, ":var_1", "pt_taiga_bandits"),
            (this_or_next|eq, ":var_1", "pt_curonians"),
            (this_or_next|eq, ":var_1", "pt_prussians"),
            (this_or_next|eq, ":var_1", "pt_samogitians"),
            (this_or_next|eq, ":var_1", "pt_yotvingians"),
            (this_or_next|eq, ":var_1", "pt_welsh"),
            (this_or_next|eq, ":var_1", "pt_robber_knights"),
            (this_or_next|eq, ":var_1", "pt_troublesome_bandits"),
            (this_or_next|eq, ":var_1", "pt_bandits_awaiting_ransom"),
            (eq, ":var_1", "pt_sea_raiders"),
            (party_set_icon, ":var_0", "icon_axeman"),
        (try_end),
    (try_end),

]),

("get_party_campsite",
[
    (store_script_param, ":var_0", 1),
    (party_get_current_terrain, ":var_1", ":var_0"),
    (assign, reg0, "scn_campside_plain"),
    (try_begin),
        (this_or_next|eq, ":var_1", 3),
        (this_or_next|eq, ":var_1", 9),
        (eq, ":var_1", 11),
        (assign, reg0, "scn_campside_plain"),
    (else_try),
        (this_or_next|eq, ":var_1", 4),
        (eq, ":var_1", 12),
        (assign, reg0, "scn_campside_snow"),
    (else_try),
        (this_or_next|eq, ":var_1", 2),
        (eq, ":var_1", 10),
        (assign, reg0, "scn_campside_steppe"),
    (else_try),
        (this_or_next|eq, ":var_1", 5),
        (eq, ":var_1", 13),
        (assign, reg0, "scn_campside_desert"),
    (try_end),

]),

("cf_hire_npc_specialist",
[
    (store_script_param, ":var_0", 1),
    (party_count_members_of_type, reg1, "p_main_party", ":var_0"),
    (eq, reg1, 0),
    (assign, ":var_1", 0),
    (party_get_free_companions_capacity, reg1, "p_main_party"),
    (try_begin),
        (eq, reg1, 0),
        (assign, ":var_1", 1),
        (display_message, "@Not enough space in the party to hire this specialist!"),
    (try_end),
    (eq, ":var_1", 0),
    (store_character_level, ":var_2", ":var_0"),
    (assign, ":var_3", 50),
    (val_mul, ":var_3", ":var_2"),
    (try_begin),
        (troop_slot_ge, ":var_0", slot_troop_prisoner_of_party, 0),
        (val_mul, ":var_3", 2),
    (try_end),
    (store_troop_gold, ":var_4", "trp_player"),
    (try_begin),
        (ge, ":var_4", ":var_3"),
        (assign, ":var_1", 0),
    (else_try),
        (assign, ":var_1", 1),
        (display_message, "@Not enough gold!"),
    (try_end),
    (eq, ":var_1", 0),
    (troop_remove_gold, "trp_player", ":var_3"),
    (party_get_slot, ":var_5", "$current_town", slot_center_culture),
    (try_begin),
        (troop_slot_eq, ":var_0", 303, 0),
        (faction_get_slot, ":var_6", ":var_5", 100),
        (call_script, "script_equip_companion", ":var_0", ":var_6"),
        (troop_set_slot, ":var_0", 303, 1),
    (try_end),
    (party_add_members, "p_main_party", ":var_0", 1),
    (troop_set_slot, ":var_0", slot_troop_occupation, 5),
    (troop_set_slot, ":var_0", slot_troop_met, 1),
    (troop_get_slot, ":var_7", ":var_0", slot_troop_prisoner_of_party),
    (try_begin),
        (ge, ":var_7", 1),
        (party_remove_prisoners, ":var_7", ":var_0", 1),
    (try_end),
    (troop_set_slot, ":var_0", slot_troop_prisoner_of_party, -1),
    (display_message, "@Hired!"),

]),

("equip_companion",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (assign, ":var_2", 0),
    (assign, ":var_3", 25),
    (assign, ":var_4", 50),
    (assign, ":var_5", 75),
    (assign, ":var_6", 100),
    (assign, ":var_7", 125),
    (assign, ":var_8", 150),
    (assign, ":var_9", 175),
    (assign, ":var_10", 200),
    (assign, ":var_11", 225),
    (assign, ":var_12", 250),
    (assign, ":var_13", 275),
    (assign, ":var_14", 300),
    (assign, ":var_15", 325),
    (assign, ":var_16", 0),
    (assign, ":var_17", 0),
    (assign, ":var_18", 0),
    (assign, ":var_19", 0),
    (assign, ":var_20", 0),
    (assign, ":var_21", 0),
    (assign, ":var_22", 0),
    (assign, ":var_23", 0),
    (assign, ":var_24", 0),
    (assign, ":var_25", 0),
    (assign, ":var_26", 0),
    (assign, ":var_27", 0),
    (assign, ":var_28", 0),
    (assign, ":var_29", 0),
    (troop_clear_inventory, ":var_0"),
    (troop_get_inventory_capacity, ":var_30", ":var_1"),
    (try_for_range, ":var_31", 0, ":var_30"),
        (troop_get_inventory_slot, ":var_32", ":var_1", ":var_31"),
        (gt, ":var_32", 0),
        (item_get_type, ":var_33", ":var_32"),
        (try_begin),
            (eq, ":var_33", 4),
            (val_add, ":var_2", 1),
            (troop_set_slot, "trp_items_array", slot_troop_relations_begin, ":var_2"),
            (troop_set_slot, "trp_items_array", ":var_2", ":var_32"),
            (assign, ":var_16", 1),
        (else_try),
            (eq, ":var_33", 2),
            (val_add, ":var_3", 1),
            (troop_set_slot, "trp_items_array", slot_troop_last_quest_betrayed, ":var_3"),
            (troop_set_slot, "trp_items_array", ":var_3", ":var_32"),
            (assign, ":var_17", 1),
        (else_try),
            (eq, ":var_33", 7),
            (val_add, ":var_4", 1),
            (troop_set_slot, "trp_items_array", slot_troop_recruitment_random, ":var_4"),
            (troop_set_slot, "trp_items_array", ":var_4", ":var_32"),
            (assign, ":var_18", 1),
        (else_try),
            (eq, ":var_33", 3),
            (val_add, ":var_5", 1),
            (troop_set_slot, "trp_items_array", slot_troop_personalitymatch_object, ":var_5"),
            (troop_set_slot, "trp_items_array", ":var_5", ":var_32"),
            (assign, ":var_19", 1),
        (else_try),
            (eq, ":var_33", 10),
            (val_add, ":var_6", 1),
            (troop_set_slot, "trp_items_array", 100, ":var_6"),
            (troop_set_slot, "trp_items_array", ":var_6", ":var_32"),
            (assign, ":var_20", 1),
        (else_try),
            (eq, ":var_33", 6),
            (val_add, ":var_7", 1),
            (troop_set_slot, "trp_items_array", slot_troop_rehire_speech, ":var_7"),
            (troop_set_slot, "trp_items_array", ":var_7", ":var_32"),
            (assign, ":var_21", 1),
        (else_try),
            (eq, ":var_33", 5),
            (val_add, ":var_8", 1),
            (troop_set_slot, "trp_items_array", slot_troop_days_on_mission, ":var_8"),
            (troop_set_slot, "trp_items_array", ":var_8", ":var_32"),
            (assign, ":var_22", 1),
        (else_try),
            (eq, ":var_33", 8),
            (val_add, ":var_9", 1),
            (troop_set_slot, "trp_items_array", 175, ":var_9"),
            (troop_set_slot, "trp_items_array", ":var_9", ":var_32"),
            (assign, ":var_23", 1),
        (else_try),
            (eq, ":var_33", 9),
            (val_add, ":var_10", 1),
            (troop_set_slot, "trp_items_array", 200, ":var_10"),
            (troop_set_slot, "trp_items_array", ":var_10", ":var_32"),
            (assign, ":var_24", 1),
        (else_try),
            (eq, ":var_33", 12),
            (val_add, ":var_11", 1),
            (troop_set_slot, "trp_items_array", 225, ":var_11"),
            (troop_set_slot, "trp_items_array", ":var_11", ":var_32"),
            (assign, ":var_25", 1),
        (else_try),
            (eq, ":var_33", 13),
            (val_add, ":var_12", 1),
            (troop_set_slot, "trp_items_array", 250, ":var_12"),
            (troop_set_slot, "trp_items_array", ":var_12", ":var_32"),
            (assign, ":var_26", 1),
        (else_try),
            (eq, ":var_33", 14),
            (val_add, ":var_13", 1),
            (troop_set_slot, "trp_items_array", 275, ":var_13"),
            (troop_set_slot, "trp_items_array", ":var_13", ":var_32"),
            (assign, ":var_27", 1),
        (else_try),
            (eq, ":var_33", 15),
            (val_add, ":var_14", 1),
            (troop_set_slot, "trp_items_array", 300, ":var_14"),
            (troop_set_slot, "trp_items_array", ":var_14", ":var_32"),
            (assign, ":var_28", 1),
        (else_try),
            (eq, ":var_33", 1),
            (val_add, ":var_15", 1),
            (troop_set_slot, "trp_items_array", 325, ":var_15"),
            (troop_set_slot, "trp_items_array", ":var_15", ":var_32"),
            (assign, ":var_29", 1),
        (try_end),
    (try_end),
    (try_begin),
        (eq, ":var_16", 1),
        (troop_get_slot, ":var_34", "trp_items_array", slot_troop_relations_begin),
        (store_random_in_range, ":var_35", 1, ":var_34"),
        (troop_get_slot, ":var_36", "trp_items_array", ":var_35"),
        (neg|eq, ":var_36", "itm_no_item"),
        (troop_add_item, ":var_0", ":var_36"),
    (try_end),
    (try_begin),
        (eq, ":var_17", 1),
        (troop_get_slot, ":var_34", "trp_items_array", slot_troop_last_quest_betrayed),
        (store_random_in_range, ":var_35", 26, ":var_34"),
        (troop_get_slot, ":var_36", "trp_items_array", ":var_35"),
        (neg|eq, ":var_36", "itm_no_item"),
        (troop_add_item, ":var_0", ":var_36"),
    (try_end),
    (try_begin),
        (eq, ":var_18", 1),
        (troop_get_slot, ":var_34", "trp_items_array", slot_troop_recruitment_random),
        (store_random_in_range, ":var_35", 51, ":var_34"),
        (troop_get_slot, ":var_36", "trp_items_array", ":var_35"),
        (neg|eq, ":var_36", "itm_no_item"),
        (troop_add_item, ":var_0", ":var_36"),
    (try_end),
    (try_begin),
        (eq, ":var_19", 1),
        (try_begin),
            (eq, ":var_17", 1),
            (store_random_in_range, ":var_37", 0, 100),
            (neg|ge, ":var_37", 65),
        (else_try),
            (troop_get_slot, ":var_34", "trp_items_array", slot_troop_personalitymatch_object),
            (store_random_in_range, ":var_35", 76, ":var_34"),
            (troop_get_slot, ":var_36", "trp_items_array", ":var_35"),
            (neg|eq, ":var_36", "itm_no_item"),
            (troop_add_item, ":var_0", ":var_36"),
        (try_end),
    (try_end),
    (try_begin),
        (eq, ":var_20", 1),
        (troop_get_slot, ":var_34", "trp_items_array", 100),
        (store_random_in_range, ":var_35", 101, ":var_34"),
        (troop_get_slot, ":var_36", "trp_items_array", ":var_35"),
        (neg|eq, ":var_36", "itm_no_item"),
        (troop_add_item, ":var_0", ":var_36"),
    (try_end),
    (try_begin),
        (eq, ":var_21", 1),
        (troop_get_slot, ":var_34", "trp_items_array", slot_troop_rehire_speech),
        (store_random_in_range, ":var_35", 126, ":var_34"),
        (troop_get_slot, ":var_36", "trp_items_array", ":var_35"),
        (neg|eq, ":var_36", "itm_no_item"),
        (troop_add_item, ":var_0", ":var_36"),
    (try_end),
    (try_begin),
        (eq, ":var_22", 1),
        (troop_get_slot, ":var_34", "trp_items_array", slot_troop_days_on_mission),
        (store_random_in_range, ":var_35", 151, ":var_34"),
        (troop_get_slot, ":var_36", "trp_items_array", ":var_35"),
        (neg|eq, ":var_36", "itm_no_item"),
        (troop_add_item, ":var_0", ":var_36"),
    (try_end),
    (try_begin),
        (eq, ":var_23", 1),
        (troop_get_slot, ":var_34", "trp_items_array", 175),
        (store_random_in_range, ":var_35", 176, ":var_34"),
        (troop_get_slot, ":var_36", "trp_items_array", ":var_35"),
        (neg|eq, ":var_36", "itm_no_item"),
        (troop_add_item, ":var_0", ":var_36"),
    (try_end),
    (try_begin),
        (eq, ":var_24", 1),
        (troop_get_slot, ":var_34", "trp_items_array", 200),
        (store_random_in_range, ":var_35", 201, ":var_34"),
        (troop_get_slot, ":var_36", "trp_items_array", ":var_35"),
        (neg|eq, ":var_36", "itm_no_item"),
        (troop_add_item, ":var_0", ":var_36"),
    (try_end),
    (try_begin),
        (eq, ":var_25", 1),
        (troop_get_slot, ":var_34", "trp_items_array", 225),
        (store_random_in_range, ":var_35", 256, ":var_34"),
        (troop_get_slot, ":var_36", "trp_items_array", ":var_35"),
        (neg|eq, ":var_36", "itm_no_item"),
        (troop_add_item, ":var_0", ":var_36"),
    (try_end),
    (try_begin),
        (eq, ":var_26", 1),
        (troop_get_slot, ":var_34", "trp_items_array", 250),
        (store_random_in_range, ":var_35", 251, ":var_34"),
        (troop_get_slot, ":var_36", "trp_items_array", ":var_35"),
        (neg|eq, ":var_36", "itm_no_item"),
        (troop_add_item, ":var_0", ":var_36"),
    (try_end),
    (try_begin),
        (eq, ":var_27", 1),
        (troop_get_slot, ":var_34", "trp_items_array", 275),
        (store_random_in_range, ":var_35", 276, ":var_34"),
        (troop_get_slot, ":var_36", "trp_items_array", ":var_35"),
        (neg|eq, ":var_36", "itm_no_item"),
        (troop_add_item, ":var_0", ":var_36"),
    (try_end),
    (try_begin),
        (eq, ":var_28", 1),
        (troop_get_slot, ":var_34", "trp_items_array", 300),
        (store_random_in_range, ":var_35", 301, ":var_34"),
        (troop_get_slot, ":var_36", "trp_items_array", ":var_35"),
        (neg|eq, ":var_36", "itm_no_item"),
        (troop_add_item, ":var_0", ":var_36"),
    (try_end),
    (try_begin),
        (eq, ":var_29", 1),
        (troop_get_slot, ":var_34", "trp_items_array", 325),
        (store_random_in_range, ":var_35", 326, ":var_34"),
        (troop_get_slot, ":var_36", "trp_items_array", ":var_35"),
        (neg|eq, ":var_36", "itm_no_item"),
        (troop_add_item, ":var_0", ":var_36"),
    (try_end),
    (try_begin),
        (neg|eq, "trp_player", ":var_0"),
        (troop_equip_items, ":var_0"),
        (troop_clear_inventory, ":var_0"),
        (troop_set_auto_equip, ":var_0", 0),
    (try_end),

]),

("set_troop_culture",
[
    (try_for_range, ":var_0", "trp_mercenaries_end", "trp_looter"),
        (try_begin),
            (is_between, ":var_0", 125, 125),
            (troop_set_slot, ":var_0", 301, "fac_culture_finnish"),
        (else_try),
            (is_between, ":var_0", 125, 142),
            (troop_set_slot, ":var_0", 301, "fac_culture_mazovian"),
        (else_try),
            (is_between, ":var_0", 142, 159),
            (troop_set_slot, ":var_0", 301, "fac_culture_serbian"),
        (else_try),
            (is_between, ":var_0", 159, 169),
            (troop_set_slot, ":var_0", 301, "fac_culture_welsh"),
        (else_try),
            (is_between, ":var_0", 169, 186),
            (troop_set_slot, ":var_0", 301, "fac_culture_teutonic"),
        (else_try),
            (is_between, ":var_0", 186, 484),
            (troop_set_slot, ":var_0", 301, "fac_culture_mongol"),
        (else_try),
            (is_between, ":var_0", 197, 216),
            (troop_set_slot, ":var_0", 301, "fac_culture_balkan"),
        (else_try),
            (is_between, ":var_0", 216, 231),
            (troop_set_slot, ":var_0", 301, "fac_culture_rus"),
        (else_try),
            (is_between, ":var_0", 231, 249),
            (troop_set_slot, ":var_0", 301, "fac_culture_nordic"),
        (else_try),
            (is_between, ":var_0", 249, 268),
            (troop_set_slot, ":var_0", 301, "fac_culture_baltic"),
        (else_try),
            (is_between, ":var_0", 268, 285),
            (troop_set_slot, ":var_0", 301, "fac_culture_marinid"),
        (else_try),
            (is_between, ":var_0", 285, 298),
            (troop_set_slot, ":var_0", 301, "fac_culture_mamluke"),
        (else_try),
            (is_between, ":var_0", 305, 322),
            (troop_set_slot, ":var_0", 301, "fac_culture_byzantium"),
        (else_try),
            (is_between, ":var_0", 322, 340),
            (troop_set_slot, ":var_0", 301, "fac_culture_iberian"),
        (else_try),
            (is_between, ":var_0", 340, 359),
            (troop_set_slot, ":var_0", 301, "fac_culture_italian"),
        (else_try),
            (is_between, ":var_0", 359, 379),
            (troop_set_slot, ":var_0", 301, "fac_culture_andalus"),
        (else_try),
            (is_between, ":var_0", 379, 392),
            (troop_set_slot, ":var_0", 301, "fac_culture_gaelic"),
        (else_try),
            (is_between, ":var_0", 392, 416),
            (troop_set_slot, ":var_0", 301, "fac_culture_anatolian"),
        (else_try),
            (is_between, ":var_0", 416, 422),
            (troop_set_slot, ":var_0", 301, "fac_culture_scotish"),
        (else_try),
            (is_between, ":var_0", 423, 439),
            (troop_set_slot, ":var_0", 301, "fac_culture_western"),
        (try_end),
    (try_end),

]),

("troop_find_culture",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (faction_get_slot, ":var_2", ":var_1", slot_faction_quick_battle_tier_1_infantry),
    (faction_get_slot, ":var_3", ":var_1", 100),
    (faction_get_slot, ":var_4", ":var_1", 101),
    (assign, reg0, -1),
    (assign, reg10, -1),
    (try_begin),
        (call_script, "script_troop_tree_search", ":var_0", ":var_4"),
        (eq, reg10, ":var_0"),
        (assign, reg0, 2),
    (else_try),
        (call_script, "script_troop_tree_search", ":var_0", ":var_3"),
        (eq, reg10, ":var_0"),
        (assign, reg0, 1),
    (else_try),
        (call_script, "script_troop_tree_search", ":var_0", ":var_2"),
        (eq, reg10, ":var_0"),
        (assign, reg0, 0),
    (try_end),

]),

("troop_tree_search",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (troop_get_upgrade_troop, ":var_2", ":var_1", 0),
    (troop_get_upgrade_troop, ":var_3", ":var_1", 1),
    (try_begin),
        (eq, ":var_1", ":var_0"),
        (assign, reg10, ":var_0"),
    (else_try),
        (gt, ":var_2", 0),
        (call_script, "script_troop_tree_search", ":var_0", ":var_2"),
        (eq, reg10, ":var_0"),
    (else_try),
        (gt, ":var_3", 0),
        (call_script, "script_troop_tree_search", ":var_0", ":var_3"),
    (try_end),

]),

("init_tournament_participents",
[
    (store_script_param, ":var_0", 1),
    (try_begin),
        (troop_set_slot, "trp_tournament_participants", slot_troop_relations_begin, "trp_player"),
        (assign, ":var_1", 1),
        (party_collect_attachments_to_party, ":var_0", "p_temp_party"),
        (party_get_num_companion_stacks, ":var_2", "p_temp_party"),
        (try_for_range, ":var_3", 0, ":var_2"),
            (party_stack_get_troop_id, ":var_4", "p_temp_party", ":var_3"),
            (troop_is_hero, ":var_4"),
            (troop_set_slot, "trp_tournament_participants", ":var_1", ":var_4"),
            (val_add, ":var_1", 1),
        (try_end),
        (party_get_num_companion_stacks, ":var_2", "p_main_party"),
        (try_for_range, ":var_3", 0, ":var_2"),
            (eq, "$freelancer_state", 0),
            (eq, "$tournament_type", 0),
            (party_stack_get_troop_id, ":var_4", "p_main_party", ":var_3"),
            (troop_is_hero, ":var_4"),
            (neg|eq, ":var_4", "trp_player"),
            (neg|eq, ":var_4", "trp_kidnapped_girl"),
            (troop_set_slot, "trp_tournament_participants", ":var_1", ":var_4"),
            (val_add, ":var_1", 1),
        (try_end),
        (try_for_range, ":var_4", "trp_xerina", "trp_tutorial_trainer"),
            (store_random_in_range, ":var_5", 0, 100),
            (neg|ge, ":var_5", 80),
            (troop_set_slot, "trp_tournament_participants", ":var_1", ":var_4"),
            (val_add, ":var_1", 1),
        (try_end),
        (assign, ":var_6", ":var_1"),
        (try_for_range, ":var_1", ":var_6", 64),
            (party_get_slot, ":var_7", ":var_0", slot_center_culture),
            (faction_get_slot, ":var_8", ":var_7", 101),
            (call_script, "script_choose_random_troop_for_lance", ":var_8", 4),
            (troop_set_slot, "trp_tournament_participants", ":var_1", reg1),
        (try_end),
    (try_end),
    (try_begin),
        (eq, "$tournament_type", 1),
        (try_for_range, reg0, 0, 9),
            (troop_get_slot, ":var_9", "trp_tournament_participants", reg0),
            (store_mul, ":var_10", reg0, 5),
            (store_add, ":var_11", ":var_10", 5),
            (troop_set_slot, "trp_temp_array_b", ":var_10", ":var_9"),
            (val_add, ":var_10", 1),
            (try_begin),
                (eq, ":var_9", "trp_player"),
                (party_get_num_companion_stacks, ":var_2", "p_main_party"),
                (try_for_range, ":var_3", 0, ":var_2"),
                    (party_stack_get_troop_id, ":var_4", "p_main_party", ":var_3"),
                    (neg|eq, ":var_4", "trp_player"),
                    (party_stack_get_size, ":var_12", "p_main_party", ":var_3"),
                    (try_for_range, reg1, 0, ":var_12"),
                        (neg|ge, ":var_10", ":var_11"),
                        (troop_set_slot, "trp_temp_array_b", ":var_10", ":var_4"),
                        (val_add, ":var_10", 1),
                    (try_end),
                (try_end),
            (else_try),
                (try_for_range, ":var_13", ":var_10", ":var_11"),
                    (party_get_slot, ":var_7", ":var_0", slot_center_culture),
                    (faction_get_slot, ":var_8", ":var_7", 101),
                    (call_script, "script_choose_random_troop_for_lance", ":var_8", 4),
                    (troop_set_slot, "trp_temp_array_b", ":var_13", reg1),
                (try_end),
            (try_end),
        (try_end),
    (try_end),
    (try_for_range, ":var_13", 0, 10),
        (troop_set_slot, "trp_temp_array_c", ":var_13", 0),
    (try_end),

]),

("end_tournament_fight_new",
[
    (store_script_param, ":var_0", 1),
    (troop_get_slot, ":var_1", "trp_temp_array_c", slot_troop_relations_begin),
    (troop_get_slot, ":var_2", "trp_temp_array_c", "$current_opponent"),
    (try_begin),
        (eq, ":var_0", 1),
        (val_add, ":var_1", 1),
        (assign, "$g_tournament_player_team_won", 1),
    (else_try),
        (val_add, ":var_2", 1),
        (assign, "$g_tournament_player_team_won", 0),
    (try_end),
    (troop_set_slot, "trp_temp_array_c", slot_troop_relations_begin, ":var_1"),
    (troop_set_slot, "trp_temp_array_c", "$current_opponent", ":var_2"),
    (jump_to_menu, "mnu_town_tournament_new"),

]),

("simulate_next_battle",
[
    (store_script_param, ":var_0", 1),
    (try_begin),
        (eq, ":var_0", 1),
        (call_script, "script_simulate_next_battle_auxiliary", 3, 4, 0),
        (call_script, "script_simulate_next_battle_auxiliary", 5, 6, 0),
        (call_script, "script_simulate_next_battle_auxiliary", 7, 8, 0),
    (else_try),
        (eq, ":var_0", 2),
        (call_script, "script_simulate_next_battle_auxiliary", 2, 4, 0),
        (call_script, "script_simulate_next_battle_auxiliary", 7, 5, 0),
        (call_script, "script_simulate_next_battle_auxiliary", 6, 8, 0),
    (else_try),
        (eq, ":var_0", 3),
        (call_script, "script_simulate_next_battle_auxiliary", 2, 3, 0),
        (call_script, "script_simulate_next_battle_auxiliary", 5, 8, 0),
        (call_script, "script_simulate_next_battle_auxiliary", 7, 6, 0),
    (else_try),
        (eq, ":var_0", 4),
        (call_script, "script_simulate_next_battle_auxiliary", 2, 6, 0),
        (call_script, "script_simulate_next_battle_auxiliary", 3, 7, 0),
        (call_script, "script_simulate_next_battle_auxiliary", 4, 8, 0),
    (else_try),
        (eq, ":var_0", 5),
        (call_script, "script_simulate_next_battle_auxiliary", 2, 5, 0),
        (call_script, "script_simulate_next_battle_auxiliary", 3, 8, 0),
        (call_script, "script_simulate_next_battle_auxiliary", 4, 7, 0),
    (else_try),
        (eq, ":var_0", 6),
        (call_script, "script_simulate_next_battle_auxiliary", 2, 8, 0),
        (call_script, "script_simulate_next_battle_auxiliary", 3, 5, 0),
        (call_script, "script_simulate_next_battle_auxiliary", 4, 6, 0),
    (else_try),
        (eq, ":var_0", 7),
        (call_script, "script_simulate_next_battle_auxiliary", 2, 7, 0),
        (call_script, "script_simulate_next_battle_auxiliary", 3, 6, 0),
        (call_script, "script_simulate_next_battle_auxiliary", 4, 5, 0),
    (try_end),

]),

("simulate_next_battle_auxiliary",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (try_begin),
        (eq, ":var_2", 0),
        (val_sub, ":var_0", 1),
        (val_sub, ":var_1", 1),
    (try_end),
    (store_random_in_range, ":var_3", 1, 101),
    (troop_get_slot, ":var_4", "trp_temp_array_c", ":var_0"),
    (troop_get_slot, ":var_5", "trp_temp_array_c", ":var_1"),
    (try_begin),
        (neg|gt, ":var_3", 50),
        (val_add, ":var_4", 1),
    (else_try),
        (val_add, ":var_5", 1),
    (try_end),
    (troop_set_slot, "trp_temp_array_c", ":var_0", ":var_4"),
    (troop_set_slot, "trp_temp_array_c", ":var_1", ":var_5"),

]),

("get_and_remove_member",
[
    (store_script_param, ":var_0", 1),
    (assign, reg1, -1),
    (party_get_num_companion_stacks, ":var_1", ":var_0"),
    (try_begin),
        (gt, ":var_1", 0),
        (party_stack_get_troop_id, ":var_2", ":var_0", 0),
        (assign, reg1, ":var_2"),
        (party_remove_members, ":var_0", ":var_2", 1),
    (try_end),

]),

("set_matching_sexy_boots",
[
    (store_script_param, ":var_0", 1),
    (agent_get_item_slot, ":var_1", ":var_0", 5),
    (agent_get_item_slot, ":var_2", ":var_0", 6),
    (agent_get_item_slot, ":var_3", ":var_0", 4),
    (agent_get_item_slot, ":var_4", ":var_0", 7),
    (try_begin),
        (is_between, ":var_3", "itm_kufia_berber_black", "itm_legs_african"),
        (try_begin),
            (neg|gt, ":var_2", 0),
            (agent_equip_item, ":var_0", "itm_legs_african"),
            (assign, ":var_2", "itm_legs_african"),
        (try_end),
        (try_begin),
            (neg|gt, ":var_4", 0),
            (agent_equip_item, ":var_0", "itm_hands_african"),
            (assign, ":var_4", "itm_hands_african"),
        (try_end),
    (else_try),
        (try_begin),
            (eq, ":var_4", "itm_hands_african"),
            (agent_unequip_item, ":var_0", "itm_hands_african"),
            (assign, ":var_4", 0),
        (else_try),
            (eq, ":var_2", "itm_legs_african"),
            (agent_unequip_item, ":var_0", "itm_legs_african"),
            (assign, ":var_2", 0),
        (try_end),
    (try_end),
    (try_begin),
        (neg|gt, ":var_2", 0),
        (neg|is_between, ":var_1", "itm_red_dress", "itm_nomad_armor"),
        (neg|is_between, ":var_1", "itm_berber_robe_a", 1148),
        (neg|is_between, ":var_1", "itm_meghrebi_leather_a", 945),
        (agent_equip_item, ":var_0", "itm_bare_legs"),
    (else_try),
        (this_or_next|is_between, ":var_1", "itm_red_dress", "itm_nomad_armor"),
        (this_or_next|is_between, ":var_1", "itm_berber_robe_a", 1148),
        (this_or_next|is_between, ":var_1", "itm_meghrebi_leather_a", 945),
        (this_or_next|is_between, ":var_1", "itm_kau_castile_a", "itm_teu_brother_surcoat_e"),
        (this_or_next|is_between, ":var_1", "itm_templar_sarjeant_surcoat", "itm_hirdman_a"),
        (this_or_next|is_between, ":var_1", "itm_sarranid_cloth_robe", "itm_skirmisher_armor"),
        (this_or_next|eq, ":var_1", "itm_teu_postulant_a"),
        (this_or_next|eq, ":var_1", "itm_teu_coat_of_plates"),
        (is_between, ":var_1", "itm_veteran_surcoat_a", "itm_kau_aragon_knight"),
        (neg|eq, ":var_1", "itm_kau_aragon_knight"),
        (neg|eq, ":var_1", "itm_surcoat_lithuania_a"),
        (neg|eq, ":var_1", "itm_surcoat_lithuania_b"),
        (neg|eq, ":var_1", "itm_surcoat_novgorod"),
        (neg|eq, ":var_1", "itm_surcoat_gslask"),
        (neg|eq, ":var_1", "itm_surcoat_pol_b"),
        (neg|eq, ":var_1", "itm_teu_hochmeister_surcoat"),
        (neg|eq, ":var_1", "itm_teu_hbrother_mail"),
        (neg|eq, ":var_1", "itm_templar_mail_a"),
        (neg|eq, ":var_1", "itm_templar_gambeson_a"),
        (neg|eq, ":var_1", "itm_hospitaller_gambeson_a"),
        (this_or_next|eq, ":var_2", "itm_sarranid_boots_a_long"),
        (this_or_next|eq, ":var_2", "itm_sarranid_boots_b_long"),
        (this_or_next|eq, ":var_2", "itm_sarranid_boots_d_long"),
        (this_or_next|eq, ":var_2", "itm_byz_lord_boots_long"),
        (this_or_next|eq, ":var_2", "itm_cuman_boots"),
        (this_or_next|eq, ":var_2", "itm_splinted_greaves_long"),
        (this_or_next|eq, ":var_2", "itm_mail_boots_long"),
        (this_or_next|eq, ":var_2", "itm_legs_with_shoes"),
        (this_or_next|eq, ":var_2", "itm_rus_boots_a"),
        (this_or_next|eq, ":var_2", "itm_blue_hose"),
        (eq, ":var_2", "itm_kau_mail_boots_dark_long"),
        (val_sub, ":var_2", 1),
        (agent_equip_item, ":var_0", ":var_2"),
    (else_try),
        (this_or_next|eq, ":var_2", "itm_sarranid_boots_a"),
        (this_or_next|eq, ":var_2", "itm_sarranid_boots_b"),
        (this_or_next|eq, ":var_2", "itm_sarranid_boots_d"),
        (this_or_next|eq, ":var_2", "itm_byz_lord_boots"),
        (this_or_next|eq, ":var_2", "itm_mamluke_boots"),
        (this_or_next|eq, ":var_2", "itm_splinted_greaves"),
        (this_or_next|eq, ":var_2", "itm_mail_boots"),
        (this_or_next|eq, ":var_2", "itm_berber_shoes"),
        (this_or_next|eq, ":var_2", "itm_rus_cav_boots"),
        (this_or_next|eq, ":var_2", "itm_priest_2_boots"),
        (eq, ":var_2", "itm_kau_mail_boots_dark"),
        (val_add, ":var_2", 1),
        (agent_equip_item, ":var_0", ":var_2"),
    (try_end),

]),

("set_prsnt_debug",
[
    (position_set_x, pos1, 50),
    (position_set_y, pos1, 50),
    (create_text_overlay, reg0, "@50----------------------------------------------------------------------------------------------------------------------------------------------------------------", 4096),
    (overlay_set_position, reg0, pos1),
    (position_set_y, pos1, 100),
    (create_text_overlay, reg0, "@100----------------------------------------------------------------------------------------------------------------------------------------------------------------", 4096),
    (overlay_set_position, reg0, pos1),
    (position_set_y, pos1, 200),
    (create_text_overlay, reg0, "@200----------------------------------------------------------------------------------------------------------------------------------------------------------------", 4096),
    (overlay_set_position, reg0, pos1),
    (position_set_y, pos1, 300),
    (create_text_overlay, reg0, "@300----------------------------------------------------------------------------------------------------------------------------------------------------------------", 4096),
    (overlay_set_position, reg0, pos1),
    (position_set_y, pos1, 400),
    (create_text_overlay, reg0, "@400----------------------------------------------------------------------------------------------------------------------------------------------------------------", 4096),
    (overlay_set_position, reg0, pos1),
    (position_set_y, pos1, 500),
    (create_text_overlay, reg0, "@500----------------------------------------------------------------------------------------------------------------------------------------------------------------", 4096),
    (overlay_set_position, reg0, pos1),
    (position_set_y, pos1, 600),
    (create_text_overlay, reg0, "@600----------------------------------------------------------------------------------------------------------------------------------------------------------------", 4096),
    (overlay_set_position, reg0, pos1),
    (position_set_y, pos1, 660),
    (create_text_overlay, reg0, "@660----------------------------------------------------------------------------------------------------------------------------------------------------------------", 4096),
    (overlay_set_position, reg0, pos1),
    (position_set_y, pos1, 700),
    (create_text_overlay, reg0, "@700----------------------------------------------------------------------------------------------------------------------------------------------------------------", 4096),
    (overlay_set_position, reg0, pos1),
    (position_set_y, pos1, 720),
    (position_set_x, pos1, 50),
    (create_text_overlay, reg0, "@050+", 4096),
    (overlay_set_position, reg0, pos1),
    (position_set_x, pos1, 100),
    (create_text_overlay, reg0, "@100+", 4096),
    (overlay_set_position, reg0, pos1),
    (position_set_x, pos1, 150),
    (create_text_overlay, reg0, "@150+", 4096),
    (overlay_set_position, reg0, pos1),
    (position_set_x, pos1, 200),
    (create_text_overlay, reg0, "@200+", 4096),
    (overlay_set_position, reg0, pos1),
    (position_set_x, pos1, 250),
    (create_text_overlay, reg0, "@250+", 4096),
    (overlay_set_position, reg0, pos1),
    (position_set_x, pos1, 300),
    (create_text_overlay, reg0, "@300+", 4096),
    (overlay_set_position, reg0, pos1),
    (position_set_x, pos1, 350),
    (create_text_overlay, reg0, "@350+", 4096),
    (overlay_set_position, reg0, pos1),
    (position_set_x, pos1, 400),
    (create_text_overlay, reg0, "@400+", 4096),
    (overlay_set_position, reg0, pos1),
    (position_set_x, pos1, 450),
    (create_text_overlay, reg0, "@450+", 4096),
    (overlay_set_position, reg0, pos1),
    (position_set_x, pos1, 500),
    (create_text_overlay, reg0, "@500+", 4096),
    (overlay_set_position, reg0, pos1),
    (position_set_x, pos1, 550),
    (create_text_overlay, reg0, "@550+", 4096),
    (overlay_set_position, reg0, pos1),
    (position_set_x, pos1, 600),
    (create_text_overlay, reg0, "@600+", 4096),
    (overlay_set_position, reg0, pos1),
    (position_set_x, pos1, 650),
    (create_text_overlay, reg0, "@650+", 4096),
    (overlay_set_position, reg0, pos1),
    (position_set_x, pos1, 700),
    (create_text_overlay, reg0, "@700+", 4096),
    (overlay_set_position, reg0, pos1),
    (position_set_x, pos1, 750),
    (create_text_overlay, reg0, "@750+", 4096),
    (overlay_set_position, reg0, pos1),
    (position_set_x, pos1, 800),
    (create_text_overlay, reg0, "@800+", 4096),
    (overlay_set_position, reg0, pos1),
    (position_set_x, pos1, 850),
    (create_text_overlay, reg0, "@850+", 4096),
    (overlay_set_position, reg0, pos1),
    (position_set_x, pos1, 900),
    (create_text_overlay, reg0, "@900+", 4096),
    (overlay_set_position, reg0, pos1),

]),

("economy_get_buildings",
[
    (party_get_slot, ":var_0", "$g_encountered_party", slot_center_acres_pasture),
    (party_get_slot, ":var_1", "$g_encountered_party", slot_town_trade_routes_end),
    (party_get_slot, ":var_2", "$g_encountered_party", slot_center_head_sheep),
    (party_get_slot, ":var_3", "$g_encountered_party", slot_center_head_horses),
    (party_get_slot, ":var_4", "$g_encountered_party", slot_center_acres_grain),
    (party_get_slot, ":var_5", "$g_encountered_party", slot_center_acres_olives),
    (party_get_slot, ":var_6", "$g_encountered_party", slot_center_acres_vineyard),
    (party_get_slot, ":var_7", "$g_encountered_party", slot_center_acres_flax),
    (party_get_slot, ":var_8", "$g_encountered_party", slot_center_acres_dates),
    (party_get_slot, ":var_9", "$g_encountered_party", slot_center_fishing_fleet),
    (party_get_slot, ":var_10", "$g_encountered_party", slot_center_salt_pans),
    (party_get_slot, ":var_11", "$g_encountered_party", slot_center_apiaries),
    (party_get_slot, ":var_12", "$g_encountered_party", slot_center_silk_farms),
    (party_get_slot, ":var_13", "$g_encountered_party", slot_center_kirmiz_farms),
    (party_get_slot, ":var_14", "$g_encountered_party", slot_center_iron_deposits),
    (party_get_slot, ":var_15", "$g_encountered_party", slot_center_fur_traps),
    (party_get_slot, ":var_16", "$g_encountered_party", slot_center_household_gardens),
    (party_get_slot, ":var_17", "$g_encountered_party", slot_center_mills),
    (party_get_slot, ":var_18", "$g_encountered_party", slot_center_breweries),
    (party_get_slot, ":var_19", "$g_encountered_party", slot_center_wine_presses),
    (party_get_slot, ":var_20", "$g_encountered_party", slot_center_olive_presses),
    (party_get_slot, ":var_21", "$g_encountered_party", slot_center_linen_looms),
    (party_get_slot, ":var_22", "$g_encountered_party", slot_center_silk_looms),
    (party_get_slot, ":var_23", "$g_encountered_party", slot_center_wool_looms),
    (party_get_slot, ":var_24", "$g_encountered_party", slot_center_pottery_kilns),
    (party_get_slot, ":var_25", "$g_encountered_party", slot_center_smithies),
    (party_get_slot, ":var_26", "$g_encountered_party", slot_center_tanneries),
    (party_get_slot, ":var_27", "$g_encountered_party", slot_center_shipyards),
    (assign, reg1, ":var_1"),
    (assign, reg2, ":var_2"),
    (assign, reg3, ":var_3"),
    (assign, reg4, ":var_4"),
    (assign, reg5, ":var_5"),
    (assign, reg6, ":var_6"),
    (assign, reg7, ":var_7"),
    (assign, reg8, ":var_8"),
    (assign, reg9, ":var_9"),
    (assign, reg10, ":var_10"),
    (assign, reg11, ":var_11"),
    (assign, reg12, ":var_12"),
    (assign, reg13, ":var_13"),
    (assign, reg14, ":var_14"),
    (assign, reg15, ":var_15"),
    (assign, reg16, ":var_16"),
    (assign, reg17, ":var_17"),
    (assign, reg18, ":var_18"),
    (assign, reg19, ":var_19"),
    (assign, reg20, ":var_20"),
    (assign, reg21, ":var_21"),
    (assign, reg22, ":var_22"),
    (assign, reg23, ":var_23"),
    (assign, reg24, ":var_24"),
    (assign, reg25, ":var_25"),
    (assign, reg26, ":var_26"),
    (assign, reg27, ":var_27"),
    (assign, reg0, 1000),
    (str_store_string, s1, "@Cattle farms({reg1})   {reg0}"),
    (assign, reg0, 1000),
    (str_store_string, s2, "@Sheep farms({reg2})    {reg0}"),
    (assign, reg0, 1000),
    (str_store_string, s3, "@Horse stables({reg3})  {reg0}"),
    (assign, reg0, 1000),
    (str_store_string, s4, "@Grain farms({reg4})    {reg0}"),
    (assign, reg0, 1000),
    (str_store_string, s5, "@Olive farms({reg5})    {reg0}"),
    (assign, reg0, 1000),
    (str_store_string, s6, "@Vineyard farms({reg6}) {reg0}"),
    (assign, reg0, 1000),
    (str_store_string, s7, "@Flax farms({reg7})     {reg0}"),
    (assign, reg0, 1000),
    (str_store_string, s8, "@Date farms({reg8})     {reg0}"),
    (assign, reg0, 1000),
    (str_store_string, s9, "@Fishing fleets({reg9}) {reg0}"),
    (assign, reg0, 1000),
    (str_store_string, s10, "@Salt pans({reg10})     {reg0}"),
    (assign, reg0, 1000),
    (str_store_string, s11, "@Apiaries({reg11})      {reg0}"),
    (assign, reg0, 1000),
    (str_store_string, s12, "@Silk farms({reg12})    {reg0}"),
    (assign, reg0, 1000),
    (str_store_string, s13, "@Kirmz famrs({reg13})   {reg0}"),
    (assign, reg0, 1000),
    (str_store_string, s14, "@Iron deposits({reg14}) {reg0}"),
    (assign, reg0, 1000),
    (str_store_string, s15, "@Fur traps({reg15})     {reg0}"),
    (assign, reg0, 1000),
    (str_store_string, s16, "@Gabbage farms({reg16}) {reg0}"),
    (assign, reg0, 2000),
    (str_store_string, s17, "@Mills({reg17})         {reg0}"),
    (assign, reg0, 2000),
    (str_store_string, s18, "@Breweries({reg18})     {reg0}"),
    (assign, reg0, 2000),
    (str_store_string, s19, "@Wineries({reg19})      {reg0}"),
    (assign, reg0, 2000),
    (str_store_string, s20, "@Olive presses({reg20}) {reg0}"),
    (assign, reg0, 2000),
    (str_store_string, s21, "@Linen looms({reg21})   {reg0}"),
    (assign, reg0, 2000),
    (str_store_string, s22, "@Silk looms({reg22})    {reg0}"),
    (assign, reg0, 2000),
    (str_store_string, s23, "@Wool looms({reg23})    {reg0}"),
    (assign, reg0, 2000),
    (str_store_string, s24, "@Pottery kilns({reg24}) {reg0}"),
    (assign, reg0, 2000),
    (str_store_string, s25, "@Smithies({reg25})      {reg0}"),
    (assign, reg0, 2000),
    (str_store_string, s26, "@Tanneries({reg26})     {reg0}"),
    (assign, reg0, 2000),
    (str_store_string, s27, "@Shipyards({reg27})     {reg0}"),

]),

("script_check_pope_crown",
[

]),

("add_item_to_pool",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (troop_get_slot, ":var_2", ":var_1", slot_troop_relations_begin),
    (val_add, ":var_2", 1),
    (assign, ":var_3", 0),
    (try_for_range, ":var_4", 1, ":var_2"),
        (troop_get_slot, ":var_5", ":var_1", ":var_4"),
        (eq, ":var_5", ":var_0"),
        (assign, ":var_3", 1),
    (try_end),
    (try_begin),
        (eq, ":var_3", 0),
        (troop_set_slot, ":var_1", ":var_2", ":var_0"),
        (troop_set_slot, ":var_1", slot_troop_relations_begin, ":var_2"),
    (try_end),

]),

("cf_add_item_to_pool",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (troop_get_slot, ":var_2", ":var_1", slot_troop_relations_begin),
    (val_add, ":var_2", 1),
    (assign, ":var_3", 0),
    (try_for_range, ":var_4", 1, ":var_2"),
        (troop_get_slot, ":var_5", ":var_1", ":var_4"),
        (eq, ":var_5", ":var_0"),
        (assign, ":var_3", 1),
    (try_end),
    (eq, ":var_3", 0),
    (troop_set_slot, ":var_1", ":var_2", ":var_0"),
    (troop_set_slot, ":var_1", slot_troop_relations_begin, ":var_2"),

]),

("extract_armor_from_tree",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (try_begin),
        (gt, ":var_0", 0),
        (troop_get_inventory_capacity, ":var_2", ":var_0"),
        (try_for_range, ":var_3", 0, ":var_2"),
            (troop_get_inventory_slot, ":var_4", ":var_0", ":var_3"),
            (gt, ":var_4", 0),
            (item_get_type, ":var_5", ":var_4"),
            (try_begin),
                (this_or_next|eq, ":var_5", 12),
                (eq, ":var_5", 13),
                (call_script, "script_cf_add_item_to_pool", ":var_4", ":var_1"),
            (try_end),
        (try_end),
        (troop_get_upgrade_troop, ":var_6", ":var_0", 0),
        (troop_get_upgrade_troop, ":var_7", ":var_0", 1),
        (try_begin),
            (gt, ":var_6", 0),
            (neg|eq, ":var_6", "trp_teu_balt_1"),
            (call_script, "script_extract_armor_from_tree", ":var_6", ":var_1"),
        (try_end),
        (try_begin),
            (gt, ":var_7", 0),
            (neg|eq, ":var_7", "trp_teu_balt_1"),
            (call_script, "script_extract_armor_from_tree", ":var_7", ":var_1"),
        (try_end),
    (try_end),

]),

("fill_pools_by_culture",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (faction_get_slot, ":var_3", ":var_0", slot_faction_quick_battle_tier_1_infantry),
    (faction_get_slot, ":var_4", ":var_0", 100),
    (faction_get_slot, ":var_5", ":var_0", 101),
    (call_script, "script_extract_armor_from_tree", ":var_3", ":var_1"),
    (call_script, "script_extract_armor_from_tree", ":var_4", ":var_1"),
    (call_script, "script_extract_armor_from_tree", ":var_5", ":var_2"),

]),

("initialize_culture_pools",
[
    (try_for_range, ":var_0", "fac_culture_finnish", "fac_player_faction"),
        (store_sub, ":var_1", ":var_0", "fac_culture_finnish"),
        (store_add, ":var_2", "trp_pool_commoner_finnish", ":var_1"),
        (store_add, ":var_3", "trp_pool_noble_finnish", ":var_1"),
        (neg|eq, ":var_0", "fac_culture_scotish"),
        (call_script, "script_fill_pools_by_culture", ":var_0", ":var_2", ":var_3"),
    (try_end),
    (call_script, "script_extract_armor_from_tree", "trp_teu_balt_1", "trp_pool_teutonic_auxiliary"),
    (call_script, "script_extract_armor_from_tree", "trp_scottish_village_recruit", "trp_pool_commoner_scotish"),
    (call_script, "script_add_item_to_pool", "itm_new_turban_a", "trp_pool_commoner_marinid"),
    (call_script, "script_add_item_to_pool", "itm_new_turban_a", "trp_pool_noble_marinid"),
    (call_script, "script_add_item_to_pool", "itm_new_turban_b", "trp_pool_commoner_marinid"),
    (call_script, "script_add_item_to_pool", "itm_new_turban_b", "trp_pool_noble_marinid"),
    (call_script, "script_add_item_to_pool", "itm_megreb_spangen", "trp_pool_commoner_marinid"),
    (call_script, "script_add_item_to_pool", "itm_megreb_spangen", "trp_pool_noble_marinid"),
    (call_script, "script_add_item_to_pool", "itm_berber_white_turban", "trp_pool_commoner_marinid"),
    (call_script, "script_add_item_to_pool", "itm_berber_white_turban", "trp_pool_noble_marinid"),
    (call_script, "script_add_item_to_pool", "itm_teu_monk_surcoat_a", "trp_pool_noble_teutonic"),
    (call_script, "script_add_item_to_pool", "itm_teu_gambeson", "trp_pool_noble_teutonic"),
    (call_script, "script_add_item_to_pool", "itm_liv_sergeant", "trp_pool_noble_teutonic"),
    (call_script, "script_add_item_to_pool", "itm_teu_sergeant", "trp_pool_noble_teutonic"),
    (call_script, "script_add_item_to_pool", "itm_teu_hbrother_mail", "trp_pool_noble_teutonic"),
    (call_script, "script_extract_armor_from_tree", "trp_merc_euro_spearman", "trp_pool_commoner_western"),
    (call_script, "script_extract_armor_from_tree", "trp_merc_euro_guisarmer", "trp_pool_commoner_western"),
    (call_script, "script_extract_armor_from_tree", "trp_merc_euro_range", "trp_pool_commoner_western"),
    (call_script, "script_extract_armor_from_tree", "trp_merc_euro_horse", "trp_pool_commoner_western"),
    (call_script, "script_extract_armor_from_tree", "trp_merc_balt_spearman", "trp_pool_commoner_baltic"),
    (call_script, "script_extract_armor_from_tree", "trp_merc_balt_guisarmer", "trp_pool_commoner_baltic"),
    (call_script, "script_extract_armor_from_tree", "trp_merc_balt_range", "trp_pool_commoner_baltic"),
    (call_script, "script_extract_armor_from_tree", "trp_merc_balt_horse", "trp_pool_commoner_baltic"),
    (call_script, "script_extract_armor_from_tree", "trp_merc_mamluke_spearman", "trp_pool_commoner_mamluke"),
    (call_script, "script_extract_armor_from_tree", "trp_merc_mamluke_javalin", "trp_pool_commoner_mamluke"),
    (call_script, "script_extract_armor_from_tree", "trp_merc_mamluke_range", "trp_pool_commoner_mamluke"),
    (call_script, "script_extract_armor_from_tree", "trp_merc_mamluke_syrian", "trp_pool_commoner_mamluke"),
    (call_script, "script_extract_armor_from_tree", "trp_merc_maghreb_spearman", "trp_pool_commoner_marinid"),
    (call_script, "script_extract_armor_from_tree", "trp_merc_maghreb_range", "trp_pool_commoner_marinid"),
    (call_script, "script_extract_armor_from_tree", "trp_merc_maghreb_horse", "trp_pool_commoner_marinid"),
    (call_script, "script_extract_armor_from_tree", "trp_merc_rus_spearman", "trp_pool_commoner_rus"),
    (call_script, "script_extract_armor_from_tree", "trp_merc_rus_guisarmer", "trp_pool_commoner_rus"),
    (call_script, "script_extract_armor_from_tree", "trp_merc_rus_range", "trp_pool_commoner_rus"),
    (call_script, "script_extract_armor_from_tree", "trp_merc_rus_horse", "trp_pool_commoner_rus"),
    (call_script, "script_extract_armor_from_tree", "trp_merc_latin_spearman", "trp_pool_commoner_iberian"),
    (call_script, "script_extract_armor_from_tree", "trp_merc_latin_guisarmer", "trp_pool_commoner_iberian"),
    (call_script, "script_extract_armor_from_tree", "trp_merc_latin_range", "trp_pool_commoner_iberian"),
    (call_script, "script_extract_armor_from_tree", "trp_merc_latin_horse", "trp_pool_commoner_iberian"),
    (call_script, "script_extract_armor_from_tree", "trp_merc_latin_light", "trp_pool_commoner_iberian"),
    (call_script, "script_extract_armor_from_tree", "trp_merc_balkan_spearman", "trp_pool_commoner_balkan"),
    (call_script, "script_extract_armor_from_tree", "trp_merc_balkan_guisarmer", "trp_pool_commoner_balkan"),
    (call_script, "script_extract_armor_from_tree", "trp_merc_balkan_range", "trp_pool_commoner_balkan"),
    (call_script, "script_extract_armor_from_tree", "trp_merc_balkan_horse", "trp_pool_commoner_balkan"),
    (call_script, "script_extract_armor_from_tree", "trp_merc_scan_spearman", "trp_pool_commoner_nordic"),
    (call_script, "script_extract_armor_from_tree", "trp_merc_scan_guisarmer", "trp_pool_commoner_nordic"),
    (call_script, "script_extract_armor_from_tree", "trp_merc_scan_range", "trp_pool_commoner_nordic"),
    (call_script, "script_extract_armor_from_tree", "trp_merc_scan_horse", "trp_pool_commoner_nordic"),
    (call_script, "script_extract_armor_from_tree", "trp_merc_gaelic_spearman", "trp_pool_commoner_gaelic"),
    (call_script, "script_extract_armor_from_tree", "trp_merc_gaelic_axeman_1", "trp_pool_commoner_gaelic"),
    (call_script, "script_extract_armor_from_tree", "trp_merc_gaelic_spearman_2", "trp_pool_commoner_gaelic"),
    (call_script, "script_extract_armor_from_tree", "trp_merc_gaelic_axeman_2", "trp_pool_commoner_gaelic"),
    (call_script, "script_extract_armor_from_tree", "trp_merc_brabantine_spearman", "trp_pool_commoner_western"),
    (call_script, "script_extract_armor_from_tree", "trp_merc_brabantine_xbow", "trp_pool_commoner_western"),
    (call_script, "script_extract_armor_from_tree", "trp_merc_brabantine_guisarm", "trp_pool_commoner_western"),
    (call_script, "script_extract_armor_from_tree", "trp_merc_sicily_foot_archer_1", "trp_pool_sicily_muslims"),
    (call_script, "script_extract_armor_from_tree", "trp_merc_sicily_foot_archer_2", "trp_pool_sicily_muslims"),
    (call_script, "script_extract_armor_from_tree", "trp_merc_sicily_infantry_1", "trp_pool_sicily_muslims"),
    (call_script, "script_extract_armor_from_tree", "trp_merc_sicily_infantry_2", "trp_pool_sicily_muslims"),
    (call_script, "script_extract_armor_from_tree", "trp_merc_sicily_horse_archer_1", "trp_pool_sicily_muslims"),
    (call_script, "script_extract_armor_from_tree", "trp_merc_sicily_horse_archer_2", "trp_pool_sicily_muslims"),
    (call_script, "script_extract_armor_from_tree", "trp_cuman_tribesman", "trp_pool_cuman"),
    (call_script, "script_extract_armor_from_tree", "trp_cuman_horseman", "trp_pool_cuman"),
    (call_script, "script_extract_armor_from_tree", "trp_goergian_horse_archer", "trp_pool_georgian"),
    (call_script, "script_extract_armor_from_tree", "trp_kwarezmian_range", "trp_pool_kwarezmian"),
    (call_script, "script_extract_armor_from_tree", "trp_kwarezmian_light_horse", "trp_pool_kwarezmian"),
    (call_script, "script_extract_armor_from_tree", "trp_kwarezmian_medium_horse", "trp_pool_kwarezmian"),
    (call_script, "script_extract_armor_from_tree", "trp_mordovian_foot", "trp_pool_mordovian"),
    (call_script, "script_extract_armor_from_tree", "trp_mordovian_range", "trp_pool_mordovian"),
    (call_script, "script_extract_armor_from_tree", "trp_mordovian_horse", "trp_pool_mordovian"),
    (call_script, "script_extract_armor_from_tree", "trp_kipchak_range", "trp_pool_kipchak"),
    (call_script, "script_extract_armor_from_tree", "trp_kipchak_light_horse", "trp_pool_kipchak"),
    (call_script, "script_extract_armor_from_tree", "trp_kipchak_medium_horse", "trp_pool_kipchak"),
    (display_message, "@Cultural troop pools initalized"),

]),

("cf_add_troop_items_armor",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (store_script_param, ":var_3", 4),
    (troop_get_slot, ":var_4", ":var_1", slot_troop_relations_begin),
    (val_add, ":var_4", 1),
    (assign, ":var_5", 0),
    (str_store_troop_name, s1, ":var_0"),
    (str_store_troop_name, s0, ":var_1"),
    (assign, reg0, ":var_4"),
    (try_for_range, ":var_6", 1, ":var_4"),
        (troop_get_slot, ":var_7", ":var_1", ":var_6"),
        (item_get_type, ":var_8", ":var_7"),
        (item_get_slot, ":var_9", ":var_7", 44),
        (assign, ":var_10", -1),
        (try_begin),
            (eq, ":var_8", 13),
            (ge, ":var_9", ":var_2"),
            (neg|gt, ":var_9", ":var_3"),
            (assign, ":var_10", ":var_7"),
        (try_end),
        (gt, ":var_10", 0),
        (troop_add_item, ":var_0", ":var_10"),
        (val_add, ":var_5", 1),
    (try_end),
    (assign, reg0, ":var_5"),
    (gt, ":var_5", 0),

]),

("cf_add_troop_items_helmet",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (store_script_param, ":var_3", 4),
    (troop_get_slot, ":var_4", ":var_1", slot_troop_relations_begin),
    (val_add, ":var_4", 1),
    (assign, ":var_5", 0),
    (str_store_troop_name, s1, ":var_0"),
    (str_store_troop_name, s0, ":var_1"),
    (assign, reg0, ":var_4"),
    (try_for_range, ":var_6", 1, ":var_4"),
        (troop_get_slot, ":var_7", ":var_1", ":var_6"),
        (item_get_type, ":var_8", ":var_7"),
        (item_get_slot, ":var_9", ":var_7", 41),
        (assign, ":var_10", -1),
        (try_begin),
            (eq, ":var_8", 12),
            (ge, ":var_9", ":var_2"),
            (neg|gt, ":var_9", ":var_3"),
            (assign, ":var_10", ":var_7"),
        (try_end),
        (gt, ":var_10", 0),
        (troop_add_item, ":var_0", ":var_10"),
        (val_add, ":var_5", 1),
    (try_end),
    (assign, reg0, ":var_5"),
    (gt, ":var_5", 0),

]),

("equip_troops_by_tier",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (try_begin),
        (this_or_next|eq, ":var_0", "trp_welsh_horse_1"),
        (troop_is_guarantee_ranged, ":var_0"),
        (val_sub, ":var_2", 1),
    (else_try),
        (this_or_next|troop_is_guarantee_horse, ":var_0"),
        (is_between, ":var_0", "trp_balt_noble_recruit", "trp_marinid_village_rabble"),
        (neg|eq, ":var_0", "trp_tatar_tribesman"),
        (neg|eq, ":var_0", "trp_tatar_skirmisher"),
        (neg|eq, ":var_0", "trp_tatar_horse_archer"),
        (neg|eq, ":var_0", "trp_tatar_veteran_horse_archer"),
        (val_add, ":var_2", 1),
    (try_end),
    (try_begin),
        (ge, ":var_2", 5),
        (call_script, "script_cf_add_troop_items_armor", ":var_0", ":var_1", 51, 200),
        (gt, reg0, 2),
    (else_try),
        (ge, ":var_2", 4),
        (call_script, "script_cf_add_troop_items_armor", ":var_0", ":var_1", 41, 200),
        (gt, reg0, 2),
    (else_try),
        (ge, ":var_2", 3),
        (call_script, "script_cf_add_troop_items_armor", ":var_0", ":var_1", 26, 41),
        (gt, reg0, 2),
    (else_try),
        (ge, ":var_2", 2),
        (call_script, "script_cf_add_troop_items_armor", ":var_0", ":var_1", 26, 33),
        (gt, reg0, 2),
    (else_try),
        (call_script, "script_cf_add_troop_items_armor", ":var_0", ":var_1", 0, 26),
    (try_end),
    (try_begin),
        (ge, ":var_2", 5),
        (call_script, "script_cf_add_troop_items_helmet", ":var_0", ":var_1", 70, 200),
        (gt, reg0, 2),
    (else_try),
        (ge, ":var_2", 4),
        (call_script, "script_cf_add_troop_items_helmet", ":var_0", ":var_1", 60, 70),
        (gt, reg0, 2),
    (else_try),
        (ge, ":var_2", 3),
        (call_script, "script_cf_add_troop_items_helmet", ":var_0", ":var_1", 50, 60),
        (gt, reg0, 2),
    (else_try),
        (ge, ":var_2", 2),
        (call_script, "script_cf_add_troop_items_helmet", ":var_0", ":var_1", 40, 50),
        (gt, reg0, 2),
    (else_try),
        (call_script, "script_cf_add_troop_items_helmet", ":var_0", ":var_1", 0, 40),
    (try_end),

]),

("rebalance_troop_trees",
[
    (store_script_param, ":var_0", 1),
    (store_script_param, ":var_1", 2),
    (store_script_param, ":var_2", 3),
    (try_begin),
        (gt, ":var_0", 0),
        (try_for_range, ":var_3", "itm_tutorial_spear", "itm_pig_killer"),
            (item_get_type, ":var_4", ":var_3"),
            (this_or_next|eq, ":var_4", 12),
            (eq, ":var_4", 13),
            (troop_remove_item, ":var_0", ":var_3"),
        (try_end),
        (call_script, "script_equip_troops_by_tier", ":var_0", ":var_1", ":var_2"),
        (troop_equip_items, ":var_0"),
        (val_add, ":var_2", 1),
        (troop_get_upgrade_troop, ":var_5", ":var_0", 0),
        (troop_get_upgrade_troop, ":var_6", ":var_0", 1),
        (try_begin),
            (gt, ":var_5", 0),
            (neg|eq, ":var_5", "trp_teu_balt_1"),
            (call_script, "script_rebalance_troop_trees", ":var_5", ":var_1", ":var_2"),
        (try_end),
        (try_begin),
            (gt, ":var_6", 0),
            (neg|eq, ":var_6", "trp_teu_balt_1"),
            (call_script, "script_rebalance_troop_trees", ":var_6", ":var_1", ":var_2"),
        (try_end),
    (try_end),

]),

("rebalance_troops_by_culture",
[
    (try_for_range, ":var_0", "fac_culture_finnish", "fac_player_faction"),
        (store_sub, ":var_1", ":var_0", "fac_culture_finnish"),
        (store_add, ":var_2", "trp_pool_commoner_finnish", ":var_1"),
        (store_add, ":var_3", "trp_pool_noble_finnish", ":var_1"),
        (neg|eq, ":var_0", "fac_culture_scotish"),
        (faction_get_slot, ":var_4", ":var_0", slot_faction_quick_battle_tier_1_infantry),
        (faction_get_slot, ":var_5", ":var_0", 100),
        (faction_get_slot, ":var_6", ":var_0", 101),
        (call_script, "script_rebalance_troop_trees", ":var_4", ":var_2", 1),
        (call_script, "script_rebalance_troop_trees", ":var_5", ":var_2", 1),
        (call_script, "script_rebalance_troop_trees", ":var_6", ":var_3", 1),
    (try_end),
    (call_script, "script_rebalance_troop_trees", "trp_teu_balt_1", "trp_pool_teutonic_auxiliary", 2),
    (call_script, "script_rebalance_troop_trees", "trp_scottish_village_recruit", "trp_pool_commoner_scotish", 1),
    (call_script, "script_rebalance_troop_trees", "trp_merc_euro_spearman", "trp_pool_commoner_western", 3),
    (call_script, "script_rebalance_troop_trees", "trp_merc_euro_guisarmer", "trp_pool_commoner_western", 3),
    (call_script, "script_rebalance_troop_trees", "trp_merc_euro_range", "trp_pool_commoner_western", 3),
    (call_script, "script_rebalance_troop_trees", "trp_merc_euro_horse", "trp_pool_commoner_western", 3),
    (call_script, "script_rebalance_troop_trees", "trp_merc_balt_spearman", "trp_pool_commoner_baltic", 3),
    (call_script, "script_rebalance_troop_trees", "trp_merc_balt_guisarmer", "trp_pool_commoner_baltic", 3),
    (call_script, "script_rebalance_troop_trees", "trp_merc_balt_range", "trp_pool_commoner_baltic", 3),
    (call_script, "script_rebalance_troop_trees", "trp_merc_balt_horse", "trp_pool_commoner_baltic", 3),
    (call_script, "script_rebalance_troop_trees", "trp_merc_mamluke_spearman", "trp_pool_commoner_mamluke", 3),
    (call_script, "script_rebalance_troop_trees", "trp_merc_mamluke_javalin", "trp_pool_commoner_mamluke", 3),
    (call_script, "script_rebalance_troop_trees", "trp_merc_mamluke_range", "trp_pool_commoner_mamluke", 3),
    (call_script, "script_rebalance_troop_trees", "trp_merc_mamluke_syrian", "trp_pool_commoner_mamluke", 3),
    (call_script, "script_rebalance_troop_trees", "trp_merc_maghreb_spearman", "trp_pool_commoner_marinid", 3),
    (call_script, "script_rebalance_troop_trees", "trp_merc_maghreb_range", "trp_pool_commoner_marinid", 3),
    (call_script, "script_rebalance_troop_trees", "trp_merc_maghreb_horse", "trp_pool_commoner_marinid", 3),
    (call_script, "script_rebalance_troop_trees", "trp_merc_rus_spearman", "trp_pool_commoner_rus", 3),
    (call_script, "script_rebalance_troop_trees", "trp_merc_rus_guisarmer", "trp_pool_commoner_rus", 3),
    (call_script, "script_rebalance_troop_trees", "trp_merc_rus_range", "trp_pool_commoner_rus", 3),
    (call_script, "script_rebalance_troop_trees", "trp_merc_rus_horse", "trp_pool_commoner_rus", 3),
    (call_script, "script_rebalance_troop_trees", "trp_merc_latin_spearman", "trp_pool_commoner_iberian", 3),
    (call_script, "script_rebalance_troop_trees", "trp_merc_latin_guisarmer", "trp_pool_commoner_iberian", 3),
    (call_script, "script_rebalance_troop_trees", "trp_merc_latin_range", "trp_pool_commoner_iberian", 3),
    (call_script, "script_rebalance_troop_trees", "trp_merc_latin_horse", "trp_pool_commoner_iberian", 3),
    (call_script, "script_rebalance_troop_trees", "trp_merc_latin_light", "trp_pool_commoner_iberian", 2),
    (call_script, "script_rebalance_troop_trees", "trp_merc_balkan_spearman", "trp_pool_commoner_balkan", 3),
    (call_script, "script_rebalance_troop_trees", "trp_merc_balkan_guisarmer", "trp_pool_commoner_balkan", 3),
    (call_script, "script_rebalance_troop_trees", "trp_merc_balkan_range", "trp_pool_commoner_balkan", 3),
    (call_script, "script_rebalance_troop_trees", "trp_merc_balkan_horse", "trp_pool_commoner_balkan", 3),
    (call_script, "script_rebalance_troop_trees", "trp_merc_scan_spearman", "trp_pool_commoner_nordic", 3),
    (call_script, "script_rebalance_troop_trees", "trp_merc_scan_guisarmer", "trp_pool_commoner_nordic", 3),
    (call_script, "script_rebalance_troop_trees", "trp_merc_scan_range", "trp_pool_commoner_nordic", 3),
    (call_script, "script_rebalance_troop_trees", "trp_merc_scan_horse", "trp_pool_commoner_nordic", 3),
    (call_script, "script_rebalance_troop_trees", "trp_merc_gaelic_spearman", "trp_pool_commoner_gaelic", 2),
    (call_script, "script_rebalance_troop_trees", "trp_merc_gaelic_axeman_1", "trp_pool_commoner_gaelic", 3),
    (call_script, "script_rebalance_troop_trees", "trp_merc_gaelic_spearman_2", "trp_pool_commoner_gaelic", 2),
    (call_script, "script_rebalance_troop_trees", "trp_merc_gaelic_axeman_2", "trp_pool_commoner_gaelic", 3),
    (call_script, "script_rebalance_troop_trees", "trp_merc_brabantine_spearman", "trp_pool_commoner_western", 4),
    (call_script, "script_rebalance_troop_trees", "trp_merc_brabantine_xbow", "trp_pool_commoner_western", 4),
    (call_script, "script_rebalance_troop_trees", "trp_merc_brabantine_guisarm", "trp_pool_commoner_western", 4),
    (call_script, "script_rebalance_troop_trees", "trp_merc_sicily_foot_archer_1", "trp_pool_sicily_muslims", 2),
    (call_script, "script_rebalance_troop_trees", "trp_merc_sicily_foot_archer_2", "trp_pool_sicily_muslims", 3),
    (call_script, "script_rebalance_troop_trees", "trp_merc_sicily_infantry_1", "trp_pool_sicily_muslims", 2),
    (call_script, "script_rebalance_troop_trees", "trp_merc_sicily_infantry_2", "trp_pool_sicily_muslims", 3),
    (call_script, "script_rebalance_troop_trees", "trp_merc_sicily_horse_archer_1", "trp_pool_sicily_muslims", 2),
    (call_script, "script_rebalance_troop_trees", "trp_merc_sicily_horse_archer_2", "trp_pool_sicily_muslims", 3),
    (call_script, "script_rebalance_troop_trees", "trp_cuman_tribesman", "trp_pool_cuman", 1),
    (call_script, "script_rebalance_troop_trees", "trp_cuman_horseman", "trp_pool_cuman", 1),
    (call_script, "script_rebalance_troop_trees", "trp_goergian_horse_archer", "trp_pool_georgian", 2),
    (call_script, "script_rebalance_troop_trees", "trp_kwarezmian_range", "trp_pool_kwarezmian", 2),
    (call_script, "script_rebalance_troop_trees", "trp_kwarezmian_light_horse", "trp_pool_kwarezmian", 2),
    (call_script, "script_rebalance_troop_trees", "trp_kwarezmian_medium_horse", "trp_pool_kwarezmian", 3),
    (call_script, "script_rebalance_troop_trees", "trp_mordovian_foot", "trp_pool_mordovian", 2),
    (call_script, "script_rebalance_troop_trees", "trp_mordovian_range", "trp_pool_mordovian", 2),
    (call_script, "script_rebalance_troop_trees", "trp_mordovian_horse", "trp_pool_mordovian", 2),
    (call_script, "script_rebalance_troop_trees", "trp_kipchak_range", "trp_pool_kipchak", 2),
    (call_script, "script_rebalance_troop_trees", "trp_kipchak_light_horse", "trp_pool_kipchak", 2),
    (call_script, "script_rebalance_troop_trees", "trp_kipchak_medium_horse", "trp_pool_kipchak", 3),
    (display_message, "@Troop rebalanced"),

]),


]